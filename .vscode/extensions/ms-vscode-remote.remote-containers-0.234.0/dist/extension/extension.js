/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------------------------------------------*/

var S3=Object.create;var fl=Object.defineProperty,x3=Object.defineProperties,P3=Object.getOwnPropertyDescriptor,k3=Object.getOwnPropertyDescriptors,I3=Object.getOwnPropertyNames,K_=Object.getOwnPropertySymbols,T3=Object.getPrototypeOf,Y_=Object.prototype.hasOwnProperty,A3=Object.prototype.propertyIsEnumerable;var J_=(t,e,r)=>e in t?fl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,V=(t,e)=>{for(var r in e||(e={}))Y_.call(e,r)&&J_(t,r,e[r]);if(K_)for(var r of K_(e))A3.call(e,r)&&J_(t,r,e[r]);return t},ae=(t,e)=>x3(t,k3(e)),Q_=t=>fl(t,"__esModule",{value:!0});var I=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),D3=(t,e)=>{Q_(t);for(var r in e)fl(t,r,{get:e[r],enumerable:!0})},R3=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of I3(e))!Y_.call(t,n)&&n!=="default"&&fl(t,n,{get:()=>e[n],enumerable:!(r=P3(e,n))||r.enumerable});return t},K=t=>R3(Q_(fl(t!=null?S3(T3(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var ba=I(($ue,tS)=>{"use strict";var eS=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);tS.exports=t=>t?Object.keys(t).map(e=>[eS.has(e)?eS.get(e):e,t[e]]).reduce((e,r)=>(e[r[0]]=r[1],e),Object.create(null)):{}});var nS=I((jue,rS)=>{"use strict";rS.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var gl=I((Uue,iS)=>{"use strict";iS.exports=Be;Be.Node=ws;Be.create=Be;function Be(t){var e=this;if(e instanceof Be||(e=new Be),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}Be.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Be.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Be.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Be.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)N3(this,arguments[t]);return this.length};Be.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)L3(this,arguments[t]);return this.length};Be.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Be.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Be.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};Be.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};Be.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};Be.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};Be.prototype.map=function(t,e){e=e||this;for(var r=new Be,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};Be.prototype.mapReverse=function(t,e){e=e||this;for(var r=new Be,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};Be.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};Be.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};Be.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};Be.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};Be.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Be;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};Be.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Be;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};Be.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var o=[],n=0;i&&n<e;n++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=O3(this,i,r[n]);return o};Be.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function O3(t,e,r){var n=e===t.head?new ws(r,null,e,t):new ws(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function N3(t,e){t.tail=new ws(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function L3(t,e){t.head=new ws(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function ws(t,e,r,n){if(!(this instanceof ws))return new ws(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{nS()(Be)}catch{}});var Ea=I((Bue,pS)=>{"use strict";var F3=require("events"),oS=require("stream"),vl=gl(),sS=require("string_decoder").StringDecoder,Pi=Symbol("EOF"),yl=Symbol("maybeEmitEnd"),no=Symbol("emittedEnd"),of=Symbol("emittingEnd"),sf=Symbol("closed"),aS=Symbol("read"),bv=Symbol("flush"),cS=Symbol("flushChunk"),Cr=Symbol("encoding"),ki=Symbol("decoder"),af=Symbol("flowing"),wl=Symbol("paused"),Cl=Symbol("resume"),pr=Symbol("bufferLength"),lS=Symbol("bufferPush"),Ev=Symbol("bufferShift"),tr=Symbol("objectMode"),rr=Symbol("destroyed"),uS=global._MP_NO_ITERATOR_SYMBOLS_!=="1",M3=uS&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),q3=uS&&Symbol.iterator||Symbol("iterator not implemented"),dS=t=>t==="end"||t==="finish"||t==="prefinish",$3=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,j3=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t);pS.exports=class fS extends oS{constructor(e){super();this[af]=!1,this[wl]=!1,this.pipes=new vl,this.buffer=new vl,this[tr]=e&&e.objectMode||!1,this[tr]?this[Cr]=null:this[Cr]=e&&e.encoding||null,this[Cr]==="buffer"&&(this[Cr]=null),this[ki]=this[Cr]?new sS(this[Cr]):null,this[Pi]=!1,this[no]=!1,this[of]=!1,this[sf]=!1,this.writable=!0,this.readable=!0,this[pr]=0,this[rr]=!1}get bufferLength(){return this[pr]}get encoding(){return this[Cr]}set encoding(e){if(this[tr])throw new Error("cannot set encoding in objectMode");if(this[Cr]&&e!==this[Cr]&&(this[ki]&&this[ki].lastNeed||this[pr]))throw new Error("cannot change encoding");this[Cr]!==e&&(this[ki]=e?new sS(e):null,this.buffer.length&&(this.buffer=this.buffer.map(r=>this[ki].write(r)))),this[Cr]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[tr]}set objectMode(e){this[tr]=this[tr]||!!e}write(e,r,n){if(this[Pi])throw new Error("write after end");return this[rr]?(this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0):(typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8"),!this[tr]&&!Buffer.isBuffer(e)&&(j3(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):$3(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),!this.objectMode&&!e.length?(this[pr]!==0&&this.emit("readable"),n&&n(),this.flowing):(typeof e=="string"&&!this[tr]&&!(r===this[Cr]&&!this[ki].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Cr]&&(e=this[ki].write(e)),this.flowing?(this[pr]!==0&&this[bv](!0),this.emit("data",e)):this[lS](e),this[pr]!==0&&this.emit("readable"),n&&n(),this.flowing))}read(e){if(this[rr])return null;try{return this[pr]===0||e===0||e>this[pr]?null:(this[tr]&&(e=null),this.buffer.length>1&&!this[tr]&&(this.encoding?this.buffer=new vl([Array.from(this.buffer).join("")]):this.buffer=new vl([Buffer.concat(Array.from(this.buffer),this[pr])])),this[aS](e||null,this.buffer.head.value))}finally{this[yl]()}}[aS](e,r){return e===r.length||e===null?this[Ev]():(this.buffer.head.value=r.slice(e),r=r.slice(0,e),this[pr]-=e),this.emit("data",r),!this.buffer.length&&!this[Pi]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=null),typeof r=="function"&&(n=r,r="utf8"),e&&this.write(e,r),n&&this.once("end",n),this[Pi]=!0,this.writable=!1,(this.flowing||!this[wl])&&this[yl](),this}[Cl](){this[rr]||(this[wl]=!1,this[af]=!0,this.emit("resume"),this.buffer.length?this[bv]():this[Pi]?this[yl]():this.emit("drain"))}resume(){return this[Cl]()}pause(){this[af]=!1,this[wl]=!0}get destroyed(){return this[rr]}get flowing(){return this[af]}get paused(){return this[wl]}[lS](e){return this[tr]?this[pr]+=1:this[pr]+=e.length,this.buffer.push(e)}[Ev](){return this.buffer.length&&(this[tr]?this[pr]-=1:this[pr]-=this.buffer.head.value.length),this.buffer.shift()}[bv](e){do;while(this[cS](this[Ev]()));!e&&!this.buffer.length&&!this[Pi]&&this.emit("drain")}[cS](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,r){if(this[rr])return;let n=this[no];r=r||{},e===process.stdout||e===process.stderr?r.end=!1:r.end=r.end!==!1;let i={dest:e,opts:r,ondrain:o=>this[Cl]()};return this.pipes.push(i),e.on("drain",i.ondrain),this[Cl](),n&&i.opts.end&&i.dest.end(),e}addListener(e,r){return this.on(e,r)}on(e,r){try{return super.on(e,r)}finally{e==="data"&&!this.pipes.length&&!this.flowing?this[Cl]():dS(e)&&this[no]&&(super.emit(e),this.removeAllListeners(e))}}get emittedEnd(){return this[no]}[yl](){!this[of]&&!this[no]&&!this[rr]&&this.buffer.length===0&&this[Pi]&&(this[of]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[sf]&&this.emit("close"),this[of]=!1)}emit(e,r){if(e!=="error"&&e!=="close"&&e!==rr&&this[rr])return;if(e==="data"){if(!r)return;this.pipes.length&&this.pipes.forEach(i=>i.dest.write(r)===!1&&this.pause())}else if(e==="end"){if(this[no]===!0)return;this[no]=!0,this.readable=!1,this[ki]&&(r=this[ki].end(),r&&(this.pipes.forEach(i=>i.dest.write(r)),super.emit("data",r))),this.pipes.forEach(i=>{i.dest.removeListener("drain",i.ondrain),i.opts.end&&i.dest.end()})}else if(e==="close"&&(this[sf]=!0,!this[no]&&!this[rr]))return;let n=new Array(arguments.length);if(n[0]=e,n[1]=r,arguments.length>2)for(let i=2;i<arguments.length;i++)n[i]=arguments[i];try{return super.emit.apply(this,n)}finally{dS(e)?this.removeAllListeners(e):this[yl]()}}collect(){let e=[];this[tr]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[tr]||(e.dataLength+=n.length)}),r.then(()=>e)}concat(){return this[tr]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[tr]?Promise.reject(new Error("cannot concat in objectMode")):this[Cr]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(rr,()=>r(new Error("stream destroyed"))),this.on("end",()=>e()),this.on("error",n=>r(n))})}[M3](){return{next:()=>{let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[Pi])return Promise.resolve({done:!0});let n=null,i=null,o=l=>{this.removeListener("data",s),this.removeListener("end",a),i(l)},s=l=>{this.removeListener("error",o),this.removeListener("end",a),this.pause(),n({value:l,done:!!this[Pi]})},a=()=>{this.removeListener("error",o),this.removeListener("data",s),n({done:!0})},c=()=>o(new Error("stream destroyed"));return new Promise((l,u)=>{i=u,n=l,this.once(rr,c),this.once("error",o),this.once("end",a),this.once("data",s)})}}}[q3](){return{next:()=>{let r=this.read();return{value:r,done:r===null}}}}destroy(e){return this[rr]?(e?this.emit("error",e):this.emit(rr),this):(this[rr]=!0,this.buffer=new vl,this[pr]=0,typeof this.close=="function"&&!this[sf]&&this.close(),e?this.emit("error",e):this.emit(rr),this)}static isStream(e){return!!e&&(e instanceof fS||e instanceof oS||e instanceof F3&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var mS=I((Hue,hS)=>{var U3=require("zlib").constants||{ZLIB_VERNUM:4736};hS.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},U3))});var Dv=I(qr=>{"use strict";var _v=require("assert"),io=require("buffer").Buffer,gS=require("zlib"),Cs=qr.constants=mS(),B3=Ea(),vS=io.concat,bs=Symbol("_superWrite"),bl=class extends Error{constructor(e){super("zlib: "+e.message);this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},H3=Symbol("opts"),El=Symbol("flushFlag"),yS=Symbol("finishFlushFlag"),Sv=Symbol("fullFlushFlag"),nt=Symbol("handle"),cf=Symbol("onError"),_a=Symbol("sawError"),xv=Symbol("level"),Pv=Symbol("strategy"),kv=Symbol("ended"),Vue=Symbol("_defaultFullFlush"),Iv=class extends B3{constructor(e,r){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e);this[_a]=!1,this[kv]=!1,this[H3]=e,this[El]=e.flush,this[yS]=e.finishFlush;try{this[nt]=new gS[r](e)}catch(n){throw new bl(n)}this[cf]=n=>{this[_a]||(this[_a]=!0,this.close(),this.emit("error",n))},this[nt].on("error",n=>this[cf](new bl(n))),this.once("end",()=>this.close)}close(){this[nt]&&(this[nt].close(),this[nt]=null,this.emit("close"))}reset(){if(!this[_a])return _v(this[nt],"zlib binding closed"),this[nt].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[Sv]),this.write(Object.assign(io.alloc(0),{[El]:e})))}end(e,r,n){return e&&this.write(e,r),this.flush(this[yS]),this[kv]=!0,super.end(null,null,n)}get ended(){return this[kv]}write(e,r,n){if(typeof r=="function"&&(n=r,r="utf8"),typeof e=="string"&&(e=io.from(e,r)),this[_a])return;_v(this[nt],"zlib binding closed");let i=this[nt]._handle,o=i.close;i.close=()=>{};let s=this[nt].close;this[nt].close=()=>{},io.concat=l=>l;let a;try{let l=typeof e[El]=="number"?e[El]:this[El];a=this[nt]._processChunk(e,l),io.concat=vS}catch(l){io.concat=vS,this[cf](new bl(l))}finally{this[nt]&&(this[nt]._handle=i,i.close=o,this[nt].close=s,this[nt].removeAllListeners("error"))}this[nt]&&this[nt].on("error",l=>this[cf](new bl(l)));let c;if(a)if(Array.isArray(a)&&a.length>0){c=this[bs](io.from(a[0]));for(let l=1;l<a.length;l++)c=this[bs](a[l])}else c=this[bs](io.from(a));return n&&n(),c}[bs](e){return super.write(e)}},oo=class extends Iv{constructor(e,r){e=e||{},e.flush=e.flush||Cs.Z_NO_FLUSH,e.finishFlush=e.finishFlush||Cs.Z_FINISH;super(e,r);this[Sv]=Cs.Z_FULL_FLUSH,this[xv]=e.level,this[Pv]=e.strategy}params(e,r){if(!this[_a]){if(!this[nt])throw new Error("cannot switch params when binding is closed");if(!this[nt].params)throw new Error("not supported in this implementation");if(this[xv]!==e||this[Pv]!==r){this.flush(Cs.Z_SYNC_FLUSH),_v(this[nt],"zlib binding closed");let n=this[nt].flush;this[nt].flush=(i,o)=>{this.flush(i),o()};try{this[nt].params(e,r)}finally{this[nt].flush=n}this[nt]&&(this[xv]=e,this[Pv]=r)}}}},wS=class extends oo{constructor(e){super(e,"Deflate")}},CS=class extends oo{constructor(e){super(e,"Inflate")}},Tv=Symbol("_portable"),bS=class extends oo{constructor(e){super(e,"Gzip");this[Tv]=e&&!!e.portable}[bs](e){return this[Tv]?(this[Tv]=!1,e[9]=255,super[bs](e)):super[bs](e)}},ES=class extends oo{constructor(e){super(e,"Gunzip")}},_S=class extends oo{constructor(e){super(e,"DeflateRaw")}},SS=class extends oo{constructor(e){super(e,"InflateRaw")}},xS=class extends oo{constructor(e){super(e,"Unzip")}},Av=class extends Iv{constructor(e,r){e=e||{},e.flush=e.flush||Cs.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||Cs.BROTLI_OPERATION_FINISH;super(e,r);this[Sv]=Cs.BROTLI_OPERATION_FLUSH}},PS=class extends Av{constructor(e){super(e,"BrotliCompress")}},kS=class extends Av{constructor(e){super(e,"BrotliDecompress")}};qr.Deflate=wS;qr.Inflate=CS;qr.Gzip=bS;qr.Gunzip=ES;qr.DeflateRaw=_S;qr.InflateRaw=SS;qr.Unzip=xS;typeof gS.BrotliCompress=="function"?(qr.BrotliCompress=PS,qr.BrotliDecompress=kS):qr.BrotliCompress=qr.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var Sa=I((Gue,IS)=>{var V3=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;IS.exports=V3!=="win32"?t=>t:t=>t&&t.replace(/\\/g,"/")});var lf=I((Kue,TS)=>{"use strict";var W3=Ea(),Rv=Sa(),Ov=Symbol("slurp");TS.exports=class extends W3{constructor(e,r,n){super();switch(this.pause(),this.extended=r,this.globalExtended=n,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=Rv(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=Rv(e.linkpath),this.uname=e.uname,this.gname=e.gname,r&&this[Ov](r),n&&this[Ov](n,!0)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");let n=this.remain,i=this.blockRemain;return this.remain=Math.max(0,n-r),this.blockRemain=Math.max(0,i-r),this.ignore?!0:n>=r?super.write(e):super.write(e.slice(0,n))}[Ov](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=n==="path"||n==="linkpath"?Rv(e[n]):e[n])}}});var Nv=I(uf=>{"use strict";uf.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);uf.code=new Map(Array.from(uf.name).map(t=>[t[1],t[0]]))});var OS=I((Jue,RS)=>{"use strict";var G3=(t,e)=>{if(Number.isSafeInteger(t))t<0?K3(t,e):z3(t,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},z3=(t,e)=>{e[0]=128;for(var r=e.length;r>1;r--)e[r-1]=t&255,t=Math.floor(t/256)},K3=(t,e)=>{e[0]=255;var r=!1;t=t*-1;for(var n=e.length;n>1;n--){var i=t&255;t=Math.floor(t/256),r?e[n-1]=AS(i):i===0?e[n-1]=0:(r=!0,e[n-1]=DS(i))}},Y3=t=>{let e=t[0],r=e===128?Q3(t.slice(1,t.length)):e===255?J3(t):null;if(r===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(r))throw Error("parsed number outside of javascript safe integer range");return r},J3=t=>{for(var e=t.length,r=0,n=!1,i=e-1;i>-1;i--){var o=t[i],s;n?s=AS(o):o===0?s=o:(n=!0,s=DS(o)),s!==0&&(r-=s*Math.pow(256,e-i-1))}return r},Q3=t=>{for(var e=t.length,r=0,n=e-1;n>-1;n--){var i=t[n];i!==0&&(r+=i*Math.pow(256,e-n-1))}return r},AS=t=>(255^t)&255,DS=t=>(255^t)+1&255;RS.exports={encode:G3,parse:Y3}});var Pa=I((Que,FS)=>{"use strict";var Lv=Nv(),xa=require("path").posix,NS=OS(),Fv=Symbol("slurp"),$r=Symbol("type"),LS=class{constructor(e,r,n,i){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[$r]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,r||0,n,i):e&&this.set(e)}decode(e,r,n,i){if(r||(r=0),!e||!(e.length>=r+512))throw new Error("need 512 bytes for header");if(this.path=Es(e,r,100),this.mode=so(e,r+100,8),this.uid=so(e,r+108,8),this.gid=so(e,r+116,8),this.size=so(e,r+124,12),this.mtime=Mv(e,r+136,12),this.cksum=so(e,r+148,12),this[Fv](n),this[Fv](i,!0),this[$r]=Es(e,r+156,1),this[$r]===""&&(this[$r]="0"),this[$r]==="0"&&this.path.substr(-1)==="/"&&(this[$r]="5"),this[$r]==="5"&&(this.size=0),this.linkpath=Es(e,r+157,100),e.slice(r+257,r+265).toString()==="ustar\x0000")if(this.uname=Es(e,r+265,32),this.gname=Es(e,r+297,32),this.devmaj=so(e,r+329,8),this.devmin=so(e,r+337,8),e[r+475]!==0){let s=Es(e,r+345,155);this.path=s+"/"+this.path}else{let s=Es(e,r+345,130);s&&(this.path=s+"/"+this.path),this.atime=Mv(e,r+476,12),this.ctime=Mv(e,r+488,12)}let o=8*32;for(let s=r;s<r+148;s++)o+=e[s];for(let s=r+156;s<r+512;s++)o+=e[s];this.cksumValid=o===this.cksum,this.cksum===null&&o===8*32&&(this.nullBlock=!0)}[Fv](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=e[n])}encode(e,r){if(e||(e=this.block=Buffer.alloc(512),r=0),r||(r=0),!(e.length>=r+512))throw new Error("need 512 bytes for header");let n=this.ctime||this.atime?130:155,i=X3(this.path||"",n),o=i[0],s=i[1];this.needPax=i[2],this.needPax=_s(e,r,100,o)||this.needPax,this.needPax=ao(e,r+100,8,this.mode)||this.needPax,this.needPax=ao(e,r+108,8,this.uid)||this.needPax,this.needPax=ao(e,r+116,8,this.gid)||this.needPax,this.needPax=ao(e,r+124,12,this.size)||this.needPax,this.needPax=qv(e,r+136,12,this.mtime)||this.needPax,e[r+156]=this[$r].charCodeAt(0),this.needPax=_s(e,r+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",r+257,8),this.needPax=_s(e,r+265,32,this.uname)||this.needPax,this.needPax=_s(e,r+297,32,this.gname)||this.needPax,this.needPax=ao(e,r+329,8,this.devmaj)||this.needPax,this.needPax=ao(e,r+337,8,this.devmin)||this.needPax,this.needPax=_s(e,r+345,n,s)||this.needPax,e[r+475]!==0?this.needPax=_s(e,r+345,155,s)||this.needPax:(this.needPax=_s(e,r+345,130,s)||this.needPax,this.needPax=qv(e,r+476,12,this.atime)||this.needPax,this.needPax=qv(e,r+488,12,this.ctime)||this.needPax);let a=8*32;for(let c=r;c<r+148;c++)a+=e[c];for(let c=r+156;c<r+512;c++)a+=e[c];return this.cksum=a,ao(e,r+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let r in e)e[r]!==null&&e[r]!==void 0&&(this[r]=e[r])}get type(){return Lv.name.get(this[$r])||this[$r]}get typeKey(){return this[$r]}set type(e){Lv.code.has(e)?this[$r]=Lv.code.get(e):this[$r]=e}},X3=(t,e)=>{let r=100,n=t,i="",o,s=xa.parse(t).root||".";if(Buffer.byteLength(n)<r)o=[n,i,!1];else{i=xa.dirname(n),n=xa.basename(n);do Buffer.byteLength(n)<=r&&Buffer.byteLength(i)<=e?o=[n,i,!1]:Buffer.byteLength(n)>r&&Buffer.byteLength(i)<=e?o=[n.substr(0,r-1),i,!0]:(n=xa.join(xa.basename(i),n),i=xa.dirname(i));while(i!==s&&!o);o||(o=[t.substr(0,r-1),"",!0])}return o},Es=(t,e,r)=>t.slice(e,e+r).toString("utf8").replace(/\0.*/,""),Mv=(t,e,r)=>Z3(so(t,e,r)),Z3=t=>t===null?null:new Date(t*1e3),so=(t,e,r)=>t[e]&128?NS.parse(t.slice(e,e+r)):tW(t,e,r),eW=t=>isNaN(t)?null:t,tW=(t,e,r)=>eW(parseInt(t.slice(e,e+r).toString("utf8").replace(/\0.*$/,"").trim(),8)),rW={12:8589934591,8:2097151},ao=(t,e,r,n)=>n===null?!1:n>rW[r]||n<0?(NS.encode(n,t.slice(e,e+r)),!0):(nW(t,e,r,n),!1),nW=(t,e,r,n)=>t.write(iW(n,r),e,r,"ascii"),iW=(t,e)=>oW(Math.floor(t).toString(8),e),oW=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0",qv=(t,e,r,n)=>n===null?!1:ao(t,e,r,n.getTime()/1e3),sW=new Array(156).join("\0"),_s=(t,e,r,n)=>n===null?!1:(t.write(n+sW,e,r,"utf8"),n.length!==Buffer.byteLength(n)||n.length>r);FS.exports=LS});var ff=I((Xue,MS)=>{"use strict";var aW=Pa(),cW=require("path"),df=class{constructor(e,r){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=r||!1}encode(){let e=this.encodeBody();if(e==="")return null;let r=Buffer.byteLength(e),n=512*Math.ceil(1+r/512),i=Buffer.allocUnsafe(n);for(let o=0;o<512;o++)i[o]=0;new aW({path:("PaxHeader/"+cW.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:r,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(i),i.write(e,512,r,"utf8");for(let o=r+512;o<i.length;o++)i[o]=0;return i}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let r=this[e]instanceof Date?this[e].getTime()/1e3:this[e],n=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+r+`
`,i=Buffer.byteLength(n),o=Math.floor(Math.log(i)/Math.log(10))+1;return i+o>=Math.pow(10,o)&&(o+=1),o+i+n}};df.parse=(t,e,r)=>new df(lW(uW(t),e),r);var lW=(t,e)=>e?Object.keys(t).reduce((r,n)=>(r[n]=t[n],r),e):t,uW=t=>t.replace(/\n$/,"").split(`
`).reduce(dW,Object.create(null)),dW=(t,e)=>{let r=parseInt(e,10);if(r!==Buffer.byteLength(e)+1)return t;e=e.substr((r+" ").length);let n=e.split("="),i=n.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!i)return t;let o=n.join("=");return t[i]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(i)?new Date(o*1e3):/^[0-9]+$/.test(o)?+o:o,t};MS.exports=df});var ka=I((Zue,qS)=>{qS.exports=t=>{let e=t.length-1,r=-1;for(;e>-1&&t.charAt(e)==="/";)r=e,e--;return r===-1?t:t.slice(0,r)}});var pf=I((ede,$S)=>{"use strict";$S.exports=t=>class extends t{warn(e,r,n={}){this.file&&(n.file=this.file),this.cwd&&(n.cwd=this.cwd),n.code=r instanceof Error&&r.code||e,n.tarCode=e,!this.strict&&n.recoverable!==!1?(r instanceof Error&&(n=Object.assign(r,n),r=r.message),this.emit("warn",n.tarCode,r,n)):r instanceof Error?this.emit("error",Object.assign(r,n)):this.emit("error",Object.assign(new Error(`${e}: ${r}`),n))}}});var jv=I((tde,jS)=>{"use strict";var hf=["|","<",">","?",":"],$v=hf.map(t=>String.fromCharCode(61440+t.charCodeAt(0))),fW=new Map(hf.map((t,e)=>[t,$v[e]])),pW=new Map($v.map((t,e)=>[t,hf[e]]));jS.exports={encode:t=>hf.reduce((e,r)=>e.split(r).join(fW.get(r)),t),decode:t=>$v.reduce((e,r)=>e.split(r).join(pW.get(r)),t)}});var Uv=I((rde,BS)=>{var{isAbsolute:hW,parse:US}=require("path").win32;BS.exports=t=>{let e="",r=US(t);for(;hW(t)||r.root;){let n=t.charAt(0)==="/"&&t.slice(0,4)!=="//?/"?"/":r.root;t=t.substr(n.length),e+=n,r=US(t)}return[e,t]}});var VS=I((nde,HS)=>{"use strict";HS.exports=(t,e,r)=>(t&=4095,r&&(t=(t|384)&~18),e&&(t&256&&(t|=64),t&32&&(t|=8),t&4&&(t|=1)),t)});var Jv=I((sde,ox)=>{"use strict";var WS=Ea(),GS=ff(),zS=Pa(),Qn=require("fs"),KS=require("path"),Xn=Sa(),mW=ka(),YS=(t,e)=>e?(t=Xn(t).replace(/^\.(\/|$)/,""),mW(e)+"/"+t):Xn(t),gW=16*1024*1024,JS=Symbol("process"),QS=Symbol("file"),XS=Symbol("directory"),Bv=Symbol("symlink"),ZS=Symbol("hardlink"),_l=Symbol("header"),mf=Symbol("read"),Hv=Symbol("lstat"),gf=Symbol("onlstat"),Vv=Symbol("onread"),Wv=Symbol("onreadlink"),Gv=Symbol("openfile"),zv=Symbol("onopenfile"),co=Symbol("close"),vf=Symbol("mode"),Kv=Symbol("awaitDrain"),Yv=Symbol("ondrain"),Zn=Symbol("prefix"),ex=Symbol("hadError"),tx=pf(),vW=jv(),rx=Uv(),nx=VS(),yf=tx(class extends WS{constructor(e,r){r=r||{};super(r);if(typeof e!="string")throw new TypeError("path is required");this.path=Xn(e),this.portable=!!r.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=r.maxReadSize||gW,this.linkCache=r.linkCache||new Map,this.statCache=r.statCache||new Map,this.preservePaths=!!r.preservePaths,this.cwd=Xn(r.cwd||process.cwd()),this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.mtime=r.mtime||null,this.prefix=r.prefix?Xn(r.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[i,o]=rx(this.path);i&&(this.path=o,n=i)}this.win32=!!r.win32||process.platform==="win32",this.win32&&(this.path=vW.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=Xn(r.absolute||KS.resolve(this.cwd,e)),this.path===""&&(this.path="./"),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.statCache.has(this.absolute)?this[gf](this.statCache.get(this.absolute)):this[Hv]()}emit(e,...r){return e==="error"&&(this[ex]=!0),super.emit(e,...r)}[Hv](){Qn.lstat(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[gf](r)})}[gf](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=wW(e),this.emit("stat",e),this[JS]()}[JS](){switch(this.type){case"File":return this[QS]();case"Directory":return this[XS]();case"SymbolicLink":return this[Bv]();default:return this.end()}}[vf](e){return nx(e,this.type==="Directory",this.portable)}[Zn](e){return YS(e,this.prefix)}[_l](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new zS({path:this[Zn](this.path),linkpath:this.type==="Link"?this[Zn](this.linkpath):this.linkpath,mode:this[vf](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new GS({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[Zn](this.path),linkpath:this.type==="Link"?this[Zn](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[XS](){this.path.substr(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[_l](),this.end()}[Bv](){Qn.readlink(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[Wv](r)})}[Wv](e){this.linkpath=Xn(e),this[_l](),this.end()}[ZS](e){this.type="Link",this.linkpath=Xn(KS.relative(this.cwd,e)),this.stat.size=0,this[_l](),this.end()}[QS](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let r=this.linkCache.get(e);if(r.indexOf(this.cwd)===0)return this[ZS](r)}this.linkCache.set(e,this.absolute)}if(this[_l](),this.stat.size===0)return this.end();this[Gv]()}[Gv](){Qn.open(this.absolute,"r",(e,r)=>{if(e)return this.emit("error",e);this[zv](r)})}[zv](e){if(this.fd=e,this[ex])return this[co]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let r=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(r),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[mf]()}[mf](){let{fd:e,buf:r,offset:n,length:i,pos:o}=this;Qn.read(e,r,n,i,o,(s,a)=>{if(s)return this[co](()=>this.emit("error",s));this[Vv](a)})}[co](e){Qn.close(this.fd,e)}[Vv](e){if(e<=0&&this.remain>0){let i=new Error("encountered unexpected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[co](()=>this.emit("error",i))}if(e>this.remain){let i=new Error("did not encounter expected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[co](()=>this.emit("error",i))}if(e===this.remain)for(let i=e;i<this.length&&e<this.blockRemain;i++)this.buf[i+this.offset]=0,e++,this.remain++;let r=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(r)?this[Yv]():this[Kv](()=>this[Yv]())}[Kv](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let r=new Error("writing more data than expected");return r.path=this.absolute,this.emit("error",r)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[Yv](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[co](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[mf]()}}),ix=class extends yf{[Hv](){this[gf](Qn.lstatSync(this.absolute))}[Bv](){this[Wv](Qn.readlinkSync(this.absolute))}[Gv](){this[zv](Qn.openSync(this.absolute,"r"))}[mf](){let e=!0;try{let{fd:r,buf:n,offset:i,length:o,pos:s}=this,a=Qn.readSync(r,n,i,o,s);this[Vv](a),e=!1}finally{if(e)try{this[co](()=>{})}catch{}}}[Kv](e){e()}[co](e){Qn.closeSync(this.fd),e()}},yW=tx(class extends WS{constructor(e,r){r=r||{};super(r);this.preservePaths=!!r.preservePaths,this.portable=!!r.portable,this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=r.prefix||null,this.path=Xn(e.path),this.mode=this[vf](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:r.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=Xn(e.linkpath),typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[i,o]=rx(this.path);i&&(this.path=o,n=i)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new zS({path:this[Zn](this.path),linkpath:this.type==="Link"?this[Zn](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.header.encode()&&!this.noPax&&super.write(new GS({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[Zn](this.path),linkpath:this.type==="Link"?this[Zn](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[Zn](e){return YS(e,this.prefix)}[vf](e){return nx(e,this.type==="Directory",this.portable)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=r,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});yf.Sync=ix;yf.Tar=yW;var wW=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";ox.exports=yf});var Pf=I((cde,px)=>{"use strict";var Qv=class{constructor(e,r){this.path=e||"./",this.absolute=r,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},CW=Ea(),bW=Dv(),EW=lf(),Xv=Jv(),_W=Xv.Sync,SW=Xv.Tar,xW=gl(),sx=Buffer.alloc(1024),wf=Symbol("onStat"),Cf=Symbol("ended"),ei=Symbol("queue"),Ia=Symbol("current"),Ss=Symbol("process"),bf=Symbol("processing"),ax=Symbol("processJob"),ti=Symbol("jobs"),Zv=Symbol("jobDone"),Ef=Symbol("addFSEntry"),cx=Symbol("addTarEntry"),ey=Symbol("stat"),ty=Symbol("readdir"),_f=Symbol("onreaddir"),Sf=Symbol("pipe"),lx=Symbol("entry"),ry=Symbol("entryOpt"),ny=Symbol("writeEntryClass"),ux=Symbol("write"),iy=Symbol("ondrain"),xf=require("fs"),dx=require("path"),PW=pf(),oy=Sa(),sy=PW(class extends CW{constructor(e){super(e);e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=oy(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[ny]=Xv,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip?(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new bW.Gzip(e.gzip),this.zip.on("data",r=>super.write(r)),this.zip.on("end",r=>super.end()),this.zip.on("drain",r=>this[iy]()),this.on("resume",r=>this.zip.resume())):this.on("drain",this[iy]),this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:r=>!0,this[ei]=new xW,this[ti]=0,this.jobs=+e.jobs||4,this[bf]=!1,this[Cf]=!1}[ux](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[Cf]=!0,this[Ss](),this}write(e){if(this[Cf])throw new Error("write after end");return e instanceof EW?this[cx](e):this[Ef](e),this.flowing}[cx](e){let r=oy(dx.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let n=new Qv(e.path,r,!1);n.entry=new SW(e,this[ry](n)),n.entry.on("end",i=>this[Zv](n)),this[ti]+=1,this[ei].push(n)}this[Ss]()}[Ef](e){let r=oy(dx.resolve(this.cwd,e));this[ei].push(new Qv(e,r)),this[Ss]()}[ey](e){e.pending=!0,this[ti]+=1;let r=this.follow?"stat":"lstat";xf[r](e.absolute,(n,i)=>{e.pending=!1,this[ti]-=1,n?this.emit("error",n):this[wf](e,i)})}[wf](e,r){this.statCache.set(e.absolute,r),e.stat=r,this.filter(e.path,r)||(e.ignore=!0),this[Ss]()}[ty](e){e.pending=!0,this[ti]+=1,xf.readdir(e.absolute,(r,n)=>{if(e.pending=!1,this[ti]-=1,r)return this.emit("error",r);this[_f](e,n)})}[_f](e,r){this.readdirCache.set(e.absolute,r),e.readdir=r,this[Ss]()}[Ss](){if(!this[bf]){this[bf]=!0;for(let e=this[ei].head;e!==null&&this[ti]<this.jobs;e=e.next)if(this[ax](e.value),e.value.ignore){let r=e.next;this[ei].removeNode(e),e.next=r}this[bf]=!1,this[Cf]&&!this[ei].length&&this[ti]===0&&(this.zip?this.zip.end(sx):(super.write(sx),super.end()))}}get[Ia](){return this[ei]&&this[ei].head&&this[ei].head.value}[Zv](e){this[ei].shift(),this[ti]-=1,this[Ss]()}[ax](e){if(!e.pending){if(e.entry){e===this[Ia]&&!e.piped&&this[Sf](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[wf](e,this.statCache.get(e.absolute)):this[ey](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[_f](e,this.readdirCache.get(e.absolute)):this[ty](e),!e.readdir))){if(e.entry=this[lx](e),!e.entry){e.ignore=!0;return}e===this[Ia]&&!e.piped&&this[Sf](e)}}}[ry](e){return{onwarn:(r,n,i)=>this.warn(r,n,i),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[lx](e){this[ti]+=1;try{return new this[ny](e.path,this[ry](e)).on("end",()=>this[Zv](e)).on("error",r=>this.emit("error",r))}catch(r){this.emit("error",r)}}[iy](){this[Ia]&&this[Ia].entry&&this[Ia].entry.resume()}[Sf](e){e.piped=!0,e.readdir&&e.readdir.forEach(i=>{let o=e.path,s=o==="./"?"":o.replace(/\/*$/,"/");this[Ef](s+i)});let r=e.entry,n=this.zip;n?r.on("data",i=>{n.write(i)||r.pause()}):r.on("data",i=>{super.write(i)||r.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),fx=class extends sy{constructor(e){super(e);this[ny]=_W}pause(){}resume(){}[ey](e){let r=this.follow?"statSync":"lstatSync";this[wf](e,xf[r](e.absolute))}[ty](e,r){this[_f](e,xf.readdirSync(e.absolute))}[Sf](e){let r=e.entry,n=this.zip;e.readdir&&e.readdir.forEach(i=>{let o=e.path,s=o==="./"?"":o.replace(/\/*$/,"/");this[Ef](s+i)}),n?r.on("data",i=>{n.write(i)}):r.on("data",i=>{super[ux](i)})}};sy.Sync=fx;px.exports=sy});var Fa=I(xl=>{"use strict";var kW=Ea(),IW=require("events").EventEmitter,br=require("fs"),ay=br.writev;if(!ay){let t=process.binding("fs"),e=t.FSReqWrap||t.FSReqCallback;ay=(r,n,i,o)=>{let s=(c,l)=>o(c,l,n),a=new e;a.oncomplete=s,t.writeBuffers(r,n,i,a)}}var Ta=Symbol("_autoClose"),Tn=Symbol("_close"),Sl=Symbol("_ended"),Ze=Symbol("_fd"),hx=Symbol("_finished"),lo=Symbol("_flags"),cy=Symbol("_flush"),ly=Symbol("_handleChunk"),uy=Symbol("_makeBuf"),kf=Symbol("_mode"),If=Symbol("_needDrain"),Aa=Symbol("_onerror"),Da=Symbol("_onopen"),dy=Symbol("_onread"),Ra=Symbol("_onwrite"),uo=Symbol("_open"),Ii=Symbol("_path"),xs=Symbol("_pos"),ri=Symbol("_queue"),Oa=Symbol("_read"),mx=Symbol("_readSize"),fo=Symbol("_reading"),Tf=Symbol("_remain"),gx=Symbol("_size"),Af=Symbol("_write"),Na=Symbol("_writing"),Df=Symbol("_defaultFlag"),La=Symbol("_errored"),fy=class extends kW{constructor(e,r){r=r||{};super(r);if(this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[La]=!1,this[Ze]=typeof r.fd=="number"?r.fd:null,this[Ii]=e,this[mx]=r.readSize||16*1024*1024,this[fo]=!1,this[gx]=typeof r.size=="number"?r.size:1/0,this[Tf]=this[gx],this[Ta]=typeof r.autoClose=="boolean"?r.autoClose:!0,typeof this[Ze]=="number"?this[Oa]():this[uo]()}get fd(){return this[Ze]}get path(){return this[Ii]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[uo](){br.open(this[Ii],"r",(e,r)=>this[Da](e,r))}[Da](e,r){e?this[Aa](e):(this[Ze]=r,this.emit("open",r),this[Oa]())}[uy](){return Buffer.allocUnsafe(Math.min(this[mx],this[Tf]))}[Oa](){if(!this[fo]){this[fo]=!0;let e=this[uy]();if(e.length===0)return process.nextTick(()=>this[dy](null,0,e));br.read(this[Ze],e,0,e.length,null,(r,n,i)=>this[dy](r,n,i))}}[dy](e,r,n){this[fo]=!1,e?this[Aa](e):this[ly](r,n)&&this[Oa]()}[Tn](){if(this[Ta]&&typeof this[Ze]=="number"){let e=this[Ze];this[Ze]=null,br.close(e,r=>r?this.emit("error",r):this.emit("close"))}}[Aa](e){this[fo]=!0,this[Tn](),this.emit("error",e)}[ly](e,r){let n=!1;return this[Tf]-=e,e>0&&(n=super.write(e<r.length?r.slice(0,e):r)),(e===0||this[Tf]<=0)&&(n=!1,this[Tn](),super.end()),n}emit(e,r){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[Ze]=="number"&&this[Oa]();break;case"error":return this[La]?void 0:(this[La]=!0,super.emit(e,r));default:return super.emit(e,r)}}},vx=class extends fy{[uo](){let e=!0;try{this[Da](null,br.openSync(this[Ii],"r")),e=!1}finally{e&&this[Tn]()}}[Oa](){let e=!0;try{if(!this[fo]){this[fo]=!0;do{let r=this[uy](),n=r.length===0?0:br.readSync(this[Ze],r,0,r.length,null);if(!this[ly](n,r))break}while(!0);this[fo]=!1}e=!1}finally{e&&this[Tn]()}}[Tn](){if(this[Ta]&&typeof this[Ze]=="number"){let e=this[Ze];this[Ze]=null,br.closeSync(e),this.emit("close")}}},py=class extends IW{constructor(e,r){r=r||{};super(r);this.readable=!1,this.writable=!0,this[La]=!1,this[Na]=!1,this[Sl]=!1,this[If]=!1,this[ri]=[],this[Ii]=e,this[Ze]=typeof r.fd=="number"?r.fd:null,this[kf]=r.mode===void 0?438:r.mode,this[xs]=typeof r.start=="number"?r.start:null,this[Ta]=typeof r.autoClose=="boolean"?r.autoClose:!0;let n=this[xs]!==null?"r+":"w";this[Df]=r.flags===void 0,this[lo]=this[Df]?n:r.flags,this[Ze]===null&&this[uo]()}emit(e,r){if(e==="error"){if(this[La])return;this[La]=!0}return super.emit(e,r)}get fd(){return this[Ze]}get path(){return this[Ii]}[Aa](e){this[Tn](),this[Na]=!0,this.emit("error",e)}[uo](){br.open(this[Ii],this[lo],this[kf],(e,r)=>this[Da](e,r))}[Da](e,r){this[Df]&&this[lo]==="r+"&&e&&e.code==="ENOENT"?(this[lo]="w",this[uo]()):e?this[Aa](e):(this[Ze]=r,this.emit("open",r),this[cy]())}end(e,r){return e&&this.write(e,r),this[Sl]=!0,!this[Na]&&!this[ri].length&&typeof this[Ze]=="number"&&this[Ra](null,0),this}write(e,r){return typeof e=="string"&&(e=Buffer.from(e,r)),this[Sl]?(this.emit("error",new Error("write() after end()")),!1):this[Ze]===null||this[Na]||this[ri].length?(this[ri].push(e),this[If]=!0,!1):(this[Na]=!0,this[Af](e),!0)}[Af](e){br.write(this[Ze],e,0,e.length,this[xs],(r,n)=>this[Ra](r,n))}[Ra](e,r){e?this[Aa](e):(this[xs]!==null&&(this[xs]+=r),this[ri].length?this[cy]():(this[Na]=!1,this[Sl]&&!this[hx]?(this[hx]=!0,this[Tn](),this.emit("finish")):this[If]&&(this[If]=!1,this.emit("drain"))))}[cy](){if(this[ri].length===0)this[Sl]&&this[Ra](null,0);else if(this[ri].length===1)this[Af](this[ri].pop());else{let e=this[ri];this[ri]=[],ay(this[Ze],e,this[xs],(r,n)=>this[Ra](r,n))}}[Tn](){if(this[Ta]&&typeof this[Ze]=="number"){let e=this[Ze];this[Ze]=null,br.close(e,r=>r?this.emit("error",r):this.emit("close"))}}},yx=class extends py{[uo](){let e;if(this[Df]&&this[lo]==="r+")try{e=br.openSync(this[Ii],this[lo],this[kf])}catch(r){if(r.code==="ENOENT")return this[lo]="w",this[uo]();throw r}else e=br.openSync(this[Ii],this[lo],this[kf]);this[Da](null,e)}[Tn](){if(this[Ta]&&typeof this[Ze]=="number"){let e=this[Ze];this[Ze]=null,br.closeSync(e),this.emit("close")}}[Af](e){let r=!0;try{this[Ra](null,br.writeSync(this[Ze],e,0,e.length,this[xs])),r=!1}finally{if(r)try{this[Tn]()}catch{}}}};xl.ReadStream=fy;xl.ReadStreamSync=vx;xl.WriteStream=py;xl.WriteStreamSync=yx});var qf=I((dde,xx)=>{"use strict";var TW=pf(),AW=Pa(),DW=require("events"),RW=gl(),OW=1024*1024,NW=lf(),wx=ff(),LW=Dv(),hy=Buffer.from([31,139]),tn=Symbol("state"),Ps=Symbol("writeEntry"),Ti=Symbol("readEntry"),my=Symbol("nextEntry"),Cx=Symbol("processEntry"),rn=Symbol("extendedHeader"),Pl=Symbol("globalExtendedHeader"),po=Symbol("meta"),bx=Symbol("emitMeta"),ot=Symbol("buffer"),Ai=Symbol("queue"),ks=Symbol("ended"),Ex=Symbol("emittedEnd"),Is=Symbol("emit"),Er=Symbol("unzip"),Rf=Symbol("consumeChunk"),Of=Symbol("consumeChunkSub"),gy=Symbol("consumeBody"),_x=Symbol("consumeMeta"),Sx=Symbol("consumeHeader"),Nf=Symbol("consuming"),vy=Symbol("bufferConcat"),yy=Symbol("maybeEnd"),kl=Symbol("writing"),ho=Symbol("aborted"),Lf=Symbol("onDone"),Ts=Symbol("sawValidEntry"),Ff=Symbol("sawNullBlock"),Mf=Symbol("sawEOF"),FW=t=>!0;xx.exports=TW(class extends DW{constructor(e){e=e||{};super(e);this.file=e.file||"",this[Ts]=null,this.on(Lf,r=>{(this[tn]==="begin"||this[Ts]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(Lf,e.ondone):this.on(Lf,r=>{this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||OW,this.filter=typeof e.filter=="function"?e.filter:FW,this.writable=!0,this.readable=!1,this[Ai]=new RW,this[ot]=null,this[Ti]=null,this[Ps]=null,this[tn]="begin",this[po]="",this[rn]=null,this[Pl]=null,this[ks]=!1,this[Er]=null,this[ho]=!1,this[Ff]=!1,this[Mf]=!1,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[Sx](e,r){this[Ts]===null&&(this[Ts]=!1);let n;try{n=new AW(e,r,this[rn],this[Pl])}catch(i){return this.warn("TAR_ENTRY_INVALID",i)}if(n.nullBlock)this[Ff]?(this[Mf]=!0,this[tn]==="begin"&&(this[tn]="header"),this[Is]("eof")):(this[Ff]=!0,this[Is]("nullBlock"));else if(this[Ff]=!1,!n.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:n});else if(!n.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:n});else{let i=n.type;if(/^(Symbolic)?Link$/.test(i)&&!n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:n});else if(!/^(Symbolic)?Link$/.test(i)&&n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:n});else{let o=this[Ps]=new NW(n,this[rn],this[Pl]);if(!this[Ts])if(o.remain){let s=()=>{o.invalid||(this[Ts]=!0)};o.on("end",s)}else this[Ts]=!0;o.meta?o.size>this.maxMetaEntrySize?(o.ignore=!0,this[Is]("ignoredEntry",o),this[tn]="ignore",o.resume()):o.size>0&&(this[po]="",o.on("data",s=>this[po]+=s),this[tn]="meta"):(this[rn]=null,o.ignore=o.ignore||!this.filter(o.path,o),o.ignore?(this[Is]("ignoredEntry",o),this[tn]=o.remain?"ignore":"header",o.resume()):(o.remain?this[tn]="body":(this[tn]="header",o.end()),this[Ti]?this[Ai].push(o):(this[Ai].push(o),this[my]())))}}}[Cx](e){let r=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[Ti]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",n=>this[my]()),r=!1)):(this[Ti]=null,r=!1),r}[my](){do;while(this[Cx](this[Ai].shift()));if(!this[Ai].length){let e=this[Ti];!e||e.flowing||e.size===e.remain?this[kl]||this.emit("drain"):e.once("drain",n=>this.emit("drain"))}}[gy](e,r){let n=this[Ps],i=n.blockRemain,o=i>=e.length&&r===0?e:e.slice(r,r+i);return n.write(o),n.blockRemain||(this[tn]="header",this[Ps]=null,n.end()),o.length}[_x](e,r){let n=this[Ps],i=this[gy](e,r);return this[Ps]||this[bx](n),i}[Is](e,r,n){!this[Ai].length&&!this[Ti]?this.emit(e,r,n):this[Ai].push([e,r,n])}[bx](e){switch(this[Is]("meta",this[po]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[rn]=wx.parse(this[po],this[rn],!1);break;case"GlobalExtendedHeader":this[Pl]=wx.parse(this[po],this[Pl],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[rn]=this[rn]||Object.create(null),this[rn].path=this[po].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[rn]=this[rn]||Object.create(null),this[rn].linkpath=this[po].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[ho]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[ho])return;if(this[Er]===null&&e){if(this[ot]&&(e=Buffer.concat([this[ot],e]),this[ot]=null),e.length<hy.length)return this[ot]=e,!0;for(let n=0;this[Er]===null&&n<hy.length;n++)e[n]!==hy[n]&&(this[Er]=!1);if(this[Er]===null){let n=this[ks];this[ks]=!1,this[Er]=new LW.Unzip,this[Er].on("data",o=>this[Rf](o)),this[Er].on("error",o=>this.abort(o)),this[Er].on("end",o=>{this[ks]=!0,this[Rf]()}),this[kl]=!0;let i=this[Er][n?"end":"write"](e);return this[kl]=!1,i}}this[kl]=!0,this[Er]?this[Er].write(e):this[Rf](e),this[kl]=!1;let r=this[Ai].length?!1:this[Ti]?this[Ti].flowing:!0;return!r&&!this[Ai].length&&this[Ti].once("drain",n=>this.emit("drain")),r}[vy](e){e&&!this[ho]&&(this[ot]=this[ot]?Buffer.concat([this[ot],e]):e)}[yy](){if(this[ks]&&!this[Ex]&&!this[ho]&&!this[Nf]){this[Ex]=!0;let e=this[Ps];if(e&&e.blockRemain){let r=this[ot]?this[ot].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${r} available)`,{entry:e}),this[ot]&&e.write(this[ot]),e.end()}this[Is](Lf)}}[Rf](e){if(this[Nf])this[vy](e);else if(!e&&!this[ot])this[yy]();else{if(this[Nf]=!0,this[ot]){this[vy](e);let r=this[ot];this[ot]=null,this[Of](r)}else this[Of](e);for(;this[ot]&&this[ot].length>=512&&!this[ho]&&!this[Mf];){let r=this[ot];this[ot]=null,this[Of](r)}this[Nf]=!1}(!this[ot]||this[ks])&&this[yy]()}[Of](e){let r=0,n=e.length;for(;r+512<=n&&!this[ho]&&!this[Mf];)switch(this[tn]){case"begin":case"header":this[Sx](e,r),r+=512;break;case"ignore":case"body":r+=this[gy](e,r);break;case"meta":r+=this[_x](e,r);break;default:throw new Error("invalid state: "+this[tn])}r<n&&(this[ot]?this[ot]=Buffer.concat([e.slice(r),this[ot]]):this[ot]=e.slice(r))}end(e){this[ho]||(this[Er]?this[Er].end(e):(this[ks]=!0,this.write(e)))}})});var $f=I((fde,Tx)=>{"use strict";var MW=ba(),Px=qf(),Ma=require("fs"),qW=Fa(),kx=require("path"),wy=ka();Tx.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=MW(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&jW(n,e),n.noResume||$W(n),n.file&&n.sync?UW(n):n.file?BW(n,r):Ix(n)};var $W=t=>{let e=t.onentry;t.onentry=e?r=>{e(r),r.resume()}:r=>r.resume()},jW=(t,e)=>{let r=new Map(e.map(o=>[wy(o),!0])),n=t.filter,i=(o,s)=>{let a=s||kx.parse(o).root||".",c=o===a?!1:r.has(o)?r.get(o):i(kx.dirname(o),a);return r.set(o,c),c};t.filter=n?(o,s)=>n(o,s)&&i(wy(o)):o=>i(wy(o))},UW=t=>{let e=Ix(t),r=t.file,n=!0,i;try{let o=Ma.statSync(r),s=t.maxReadSize||16*1024*1024;if(o.size<s)e.end(Ma.readFileSync(r));else{let a=0,c=Buffer.allocUnsafe(s);for(i=Ma.openSync(r,"r");a<o.size;){let l=Ma.readSync(i,c,0,s,a);a+=l,e.write(c.slice(0,l))}e.end()}n=!1}finally{if(n&&i)try{Ma.closeSync(i)}catch{}}},BW=(t,e)=>{let r=new Px(t),n=t.maxReadSize||16*1024*1024,i=t.file,o=new Promise((s,a)=>{r.on("error",a),r.on("end",s),Ma.stat(i,(c,l)=>{if(c)a(c);else{let u=new qW.ReadStream(i,{readSize:n,size:l.size});u.on("error",a),u.pipe(r)}})});return e?o.then(e,e):o},Ix=t=>new Px(t)});var Lx=I((pde,Nx)=>{"use strict";var HW=ba(),jf=Pf(),Ax=Fa(),Dx=$f(),Rx=require("path");Nx.exports=(t,e,r)=>{if(typeof e=="function"&&(r=e),Array.isArray(t)&&(e=t,t={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let n=HW(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return n.file&&n.sync?VW(n,e):n.file?WW(n,e,r):n.sync?GW(n,e):zW(n,e)};var VW=(t,e)=>{let r=new jf.Sync(t),n=new Ax.WriteStreamSync(t.file,{mode:t.mode||438});r.pipe(n),Ox(r,e)},WW=(t,e,r)=>{let n=new jf(t),i=new Ax.WriteStream(t.file,{mode:t.mode||438});n.pipe(i);let o=new Promise((s,a)=>{i.on("error",a),i.on("close",s),n.on("error",a)});return Cy(n,e),r?o.then(r,r):o},Ox=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?Dx({file:Rx.resolve(t.cwd,r.substr(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},Cy=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return Dx({file:Rx.resolve(t.cwd,r.substr(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>Cy(t,e));t.add(r)}t.end()},GW=(t,e)=>{let r=new jf.Sync(t);return Ox(r,e),r},zW=(t,e)=>{let r=new jf(t);return Cy(r,e),r}});var by=I((hde,Bx)=>{"use strict";var KW=ba(),Fx=Pf(),jr=require("fs"),Mx=Fa(),qx=$f(),$x=require("path"),jx=Pa();Bx.exports=(t,e,r)=>{let n=KW(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),n.sync?YW(n,e):QW(n,e,r)};var YW=(t,e)=>{let r=new Fx.Sync(t),n=!0,i,o;try{try{i=jr.openSync(t.file,"r+")}catch(c){if(c.code==="ENOENT")i=jr.openSync(t.file,"w+");else throw c}let s=jr.fstatSync(i),a=Buffer.alloc(512);e:for(o=0;o<s.size;o+=512){for(let u=0,d=0;u<512;u+=d){if(d=jr.readSync(i,a,u,a.length-u,o+u),o===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!d)break e}let c=new jx(a);if(!c.cksumValid)break;let l=512*Math.ceil(c.size/512);if(o+l+512>s.size)break;o+=l,t.mtimeCache&&t.mtimeCache.set(c.path,c.mtime)}n=!1,JW(t,r,o,i,e)}finally{if(n)try{jr.closeSync(i)}catch{}}},JW=(t,e,r,n,i)=>{let o=new Mx.WriteStreamSync(t.file,{fd:n,start:r});e.pipe(o),XW(e,i)},QW=(t,e,r)=>{e=Array.from(e);let n=new Fx(t),i=(s,a,c)=>{let l=(h,m)=>{h?jr.close(s,g=>c(h)):c(null,m)},u=0;if(a===0)return l(null,0);let d=0,f=Buffer.alloc(512),p=(h,m)=>{if(h)return l(h);if(d+=m,d<512&&m)return jr.read(s,f,d,f.length-d,u+d,p);if(u===0&&f[0]===31&&f[1]===139)return l(new Error("cannot append to compressed archives"));if(d<512)return l(null,u);let g=new jx(f);if(!g.cksumValid)return l(null,u);let v=512*Math.ceil(g.size/512);if(u+v+512>a||(u+=v+512,u>=a))return l(null,u);t.mtimeCache&&t.mtimeCache.set(g.path,g.mtime),d=0,jr.read(s,f,0,512,u,p)};jr.read(s,f,0,512,u,p)},o=new Promise((s,a)=>{n.on("error",a);let c="r+",l=(u,d)=>{if(u&&u.code==="ENOENT"&&c==="r+")return c="w+",jr.open(t.file,c,l);if(u)return a(u);jr.fstat(d,(f,p)=>{if(f)return jr.close(d,()=>a(f));i(d,p.size,(h,m)=>{if(h)return a(h);let g=new Mx.WriteStream(t.file,{fd:d,start:m});n.pipe(g),g.on("error",a),g.on("close",s),Ux(n,e)})})};jr.open(t.file,c,l)});return r?o.then(r,r):o},XW=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?qx({file:$x.resolve(t.cwd,r.substr(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},Ux=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return qx({file:$x.resolve(t.cwd,r.substr(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>Ux(t,e));t.add(r)}t.end()}});var Vx=I((mde,Hx)=>{"use strict";var ZW=ba(),eG=by();Hx.exports=(t,e,r)=>{let n=ZW(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),tG(n),eG(n,e,r)};var tG=t=>{let e=t.filter;t.mtimeCache||(t.mtimeCache=new Map),t.filter=e?(r,n)=>e(r,n)&&!(t.mtimeCache.get(r)>n.mtime):(r,n)=>!(t.mtimeCache.get(r)>n.mtime)}});var zx=I((gde,Gx)=>{var{promisify:Wx}=require("util"),mo=require("fs"),rG=t=>{if(!t)t={mode:511,fs:mo};else if(typeof t=="object")t=V({mode:511,fs:mo},t);else if(typeof t=="number")t={mode:t,fs:mo};else if(typeof t=="string")t={mode:parseInt(t,8),fs:mo};else throw new TypeError("invalid options argument");return t.mkdir=t.mkdir||t.fs.mkdir||mo.mkdir,t.mkdirAsync=Wx(t.mkdir),t.stat=t.stat||t.fs.stat||mo.stat,t.statAsync=Wx(t.stat),t.statSync=t.statSync||t.fs.statSync||mo.statSync,t.mkdirSync=t.mkdirSync||t.fs.mkdirSync||mo.mkdirSync,t};Gx.exports=rG});var Yx=I((vde,Kx)=>{var nG=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:iG,parse:oG}=require("path"),sG=t=>{if(/\0/.test(t))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:t,code:"ERR_INVALID_ARG_VALUE"});if(t=iG(t),nG==="win32"){let e=/[*|"<>?:]/,{root:r}=oG(t);if(e.test(t.substr(r.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};Kx.exports=sG});var eP=I((yde,Zx)=>{var{dirname:Jx}=require("path"),Qx=(t,e,r=void 0)=>r===e?Promise.resolve():t.statAsync(e).then(n=>n.isDirectory()?r:void 0,n=>n.code==="ENOENT"?Qx(t,Jx(e),e):void 0),Xx=(t,e,r=void 0)=>{if(r!==e)try{return t.statSync(e).isDirectory()?r:void 0}catch(n){return n.code==="ENOENT"?Xx(t,Jx(e),e):void 0}};Zx.exports={findMade:Qx,findMadeSync:Xx}});var Sy=I((wde,rP)=>{var{dirname:tP}=require("path"),Ey=(t,e,r)=>{e.recursive=!1;let n=tP(t);return n===t?e.mkdirAsync(t,e).catch(i=>{if(i.code!=="EISDIR")throw i}):e.mkdirAsync(t,e).then(()=>r||t,i=>{if(i.code==="ENOENT")return Ey(n,e).then(o=>Ey(t,e,o));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;return e.statAsync(t).then(o=>{if(o.isDirectory())return r;throw i},()=>{throw i})})},_y=(t,e,r)=>{let n=tP(t);if(e.recursive=!1,n===t)try{return e.mkdirSync(t,e)}catch(i){if(i.code!=="EISDIR")throw i;return}try{return e.mkdirSync(t,e),r||t}catch(i){if(i.code==="ENOENT")return _y(t,e,_y(n,e,r));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;try{if(!e.statSync(t).isDirectory())throw i}catch{throw i}}};rP.exports={mkdirpManual:Ey,mkdirpManualSync:_y}});var oP=I((Cde,iP)=>{var{dirname:nP}=require("path"),{findMade:aG,findMadeSync:cG}=eP(),{mkdirpManual:lG,mkdirpManualSync:uG}=Sy(),dG=(t,e)=>(e.recursive=!0,nP(t)===t?e.mkdirAsync(t,e):aG(e,t).then(n=>e.mkdirAsync(t,e).then(()=>n).catch(i=>{if(i.code==="ENOENT")return lG(t,e);throw i}))),fG=(t,e)=>{if(e.recursive=!0,nP(t)===t)return e.mkdirSync(t,e);let n=cG(e,t);try{return e.mkdirSync(t,e),n}catch(i){if(i.code==="ENOENT")return uG(t,e);throw i}};iP.exports={mkdirpNative:dG,mkdirpNativeSync:fG}});var lP=I((bde,cP)=>{var sP=require("fs"),pG=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,xy=pG.replace(/^v/,"").split("."),aP=+xy[0]>10||+xy[0]==10&&+xy[1]>=12,hG=aP?t=>t.mkdir===sP.mkdir:()=>!1,mG=aP?t=>t.mkdirSync===sP.mkdirSync:()=>!1;cP.exports={useNative:hG,useNativeSync:mG}});var mP=I((Ede,hP)=>{var qa=zx(),$a=Yx(),{mkdirpNative:uP,mkdirpNativeSync:dP}=oP(),{mkdirpManual:fP,mkdirpManualSync:pP}=Sy(),{useNative:gG,useNativeSync:vG}=lP(),ja=(t,e)=>(t=$a(t),e=qa(e),gG(e)?uP(t,e):fP(t,e)),yG=(t,e)=>(t=$a(t),e=qa(e),vG(e)?dP(t,e):pP(t,e));ja.sync=yG;ja.native=(t,e)=>uP($a(t),qa(e));ja.manual=(t,e)=>fP($a(t),qa(e));ja.nativeSync=(t,e)=>dP($a(t),qa(e));ja.manualSync=(t,e)=>pP($a(t),qa(e));hP.exports=ja});var EP=I((_de,bP)=>{"use strict";var nn=require("fs"),As=require("path"),wG=nn.lchown?"lchown":"chown",CG=nn.lchownSync?"lchownSync":"chownSync",gP=nn.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),vP=(t,e,r)=>{try{return nn[CG](t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},bG=(t,e,r)=>{try{return nn.chownSync(t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},EG=gP?(t,e,r,n)=>i=>{!i||i.code!=="EISDIR"?n(i):nn.chown(t,e,r,n)}:(t,e,r,n)=>n,Py=gP?(t,e,r)=>{try{return vP(t,e,r)}catch(n){if(n.code!=="EISDIR")throw n;bG(t,e,r)}}:(t,e,r)=>vP(t,e,r),_G=process.version,yP=(t,e,r)=>nn.readdir(t,e,r),SG=(t,e)=>nn.readdirSync(t,e);/^v4\./.test(_G)&&(yP=(t,e,r)=>nn.readdir(t,r));var Uf=(t,e,r,n)=>{nn[wG](t,e,r,EG(t,e,r,i=>{n(i&&i.code!=="ENOENT"?i:null)}))},wP=(t,e,r,n,i)=>{if(typeof e=="string")return nn.lstat(As.resolve(t,e),(o,s)=>{if(o)return i(o.code!=="ENOENT"?o:null);s.name=e,wP(t,s,r,n,i)});if(e.isDirectory())ky(As.resolve(t,e.name),r,n,o=>{if(o)return i(o);let s=As.resolve(t,e.name);Uf(s,r,n,i)});else{let o=As.resolve(t,e.name);Uf(o,r,n,i)}},ky=(t,e,r,n)=>{yP(t,{withFileTypes:!0},(i,o)=>{if(i){if(i.code==="ENOENT")return n();if(i.code!=="ENOTDIR"&&i.code!=="ENOTSUP")return n(i)}if(i||!o.length)return Uf(t,e,r,n);let s=o.length,a=null,c=l=>{if(!a){if(l)return n(a=l);if(--s==0)return Uf(t,e,r,n)}};o.forEach(l=>wP(t,l,e,r,c))})},xG=(t,e,r,n)=>{if(typeof e=="string")try{let i=nn.lstatSync(As.resolve(t,e));i.name=e,e=i}catch(i){if(i.code==="ENOENT")return;throw i}e.isDirectory()&&CP(As.resolve(t,e.name),r,n),Py(As.resolve(t,e.name),r,n)},CP=(t,e,r)=>{let n;try{n=SG(t,{withFileTypes:!0})}catch(i){if(i.code==="ENOENT")return;if(i.code==="ENOTDIR"||i.code==="ENOTSUP")return Py(t,e,r);throw i}return n&&n.length&&n.forEach(i=>xG(t,i,e,r)),Py(t,e,r)};bP.exports=ky;ky.sync=CP});var PP=I((Sde,Ay)=>{"use strict";var _P=mP(),on=require("fs"),Bf=require("path"),SP=EP(),An=Sa(),Iy=class extends Error{constructor(e,r){super("Cannot extract through symbolic link");this.path=r,this.symlink=e}get name(){return"SylinkError"}},Ty=class extends Error{constructor(e,r){super(r+": Cannot cd into '"+e+"'");this.path=e,this.code=r}get name(){return"CwdError"}},Hf=(t,e)=>t.get(An(e)),Il=(t,e,r)=>t.set(An(e),r),PG=(t,e)=>{on.stat(t,(r,n)=>{(r||!n.isDirectory())&&(r=new Ty(t,r&&r.code||"ENOTDIR")),e(r)})};Ay.exports=(t,e,r)=>{t=An(t);let n=e.umask,i=e.mode|448,o=(i&n)!=0,s=e.uid,a=e.gid,c=typeof s=="number"&&typeof a=="number"&&(s!==e.processUid||a!==e.processGid),l=e.preserve,u=e.unlink,d=e.cache,f=An(e.cwd),p=(g,v)=>{g?r(g):(Il(d,t,!0),v&&c?SP(v,s,a,w=>p(w)):o?on.chmod(t,i,r):r())};if(d&&Hf(d,t)===!0)return p();if(t===f)return PG(t,p);if(l)return _P(t,{mode:i}).then(g=>p(null,g),p);let m=An(Bf.relative(f,t)).split("/");Vf(f,m,i,d,u,f,null,p)};var Vf=(t,e,r,n,i,o,s,a)=>{if(!e.length)return a(null,s);let c=e.shift(),l=An(Bf.resolve(t+"/"+c));if(Hf(n,l))return Vf(l,e,r,n,i,o,s,a);on.mkdir(l,r,xP(l,e,r,n,i,o,s,a))},xP=(t,e,r,n,i,o,s,a)=>c=>{c?on.lstat(t,(l,u)=>{if(l)l.path=l.path&&An(l.path),a(l);else if(u.isDirectory())Vf(t,e,r,n,i,o,s,a);else if(i)on.unlink(t,d=>{if(d)return a(d);on.mkdir(t,r,xP(t,e,r,n,i,o,s,a))});else{if(u.isSymbolicLink())return a(new Iy(t,t+"/"+e.join("/")));a(c)}}):(s=s||t,Vf(t,e,r,n,i,o,s,a))},kG=t=>{let e=!1,r="ENOTDIR";try{e=on.statSync(t).isDirectory()}catch(n){r=n.code}finally{if(!e)throw new Ty(t,r)}};Ay.exports.sync=(t,e)=>{t=An(t);let r=e.umask,n=e.mode|448,i=(n&r)!=0,o=e.uid,s=e.gid,a=typeof o=="number"&&typeof s=="number"&&(o!==e.processUid||s!==e.processGid),c=e.preserve,l=e.unlink,u=e.cache,d=An(e.cwd),f=g=>{Il(u,t,!0),g&&a&&SP.sync(g,o,s),i&&on.chmodSync(t,n)};if(u&&Hf(u,t)===!0)return f();if(t===d)return kG(d),f();if(c)return f(_P.sync(t,n));let h=An(Bf.relative(d,t)).split("/"),m=null;for(let g=h.shift(),v=d;g&&(v+="/"+g);g=h.shift())if(v=An(Bf.resolve(v)),!Hf(u,v))try{on.mkdirSync(v,n),m=m||v,Il(u,v,!0)}catch{let b=on.lstatSync(v);if(b.isDirectory()){Il(u,v,!0);continue}else if(l){on.unlinkSync(v),on.mkdirSync(v,n),m=m||v,Il(u,v,!0);continue}else if(b.isSymbolicLink())return new Iy(v,v+"/"+h.join("/"))}return f(m)}});var Ry=I((xde,kP)=>{var Dy=Object.create(null),{hasOwnProperty:IG}=Object.prototype;kP.exports=t=>(IG.call(Dy,t)||(Dy[t]=t.normalize("NFKD")),Dy[t])});var DP=I((Pde,AP)=>{var IP=require("assert"),TG=Ry(),AG=ka(),{join:TP}=require("path"),DG=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,RG=DG==="win32";AP.exports=()=>{let t=new Map,e=new Map,r=l=>l.split("/").slice(0,-1).reduce((d,f)=>(d.length&&(f=TP(d[d.length-1],f)),d.push(f||"/"),d),[]),n=new Set,i=l=>{let u=e.get(l);if(!u)throw new Error("function does not have any path reservations");return{paths:u.paths.map(d=>t.get(d)),dirs:[...u.dirs].map(d=>t.get(d))}},o=l=>{let{paths:u,dirs:d}=i(l);return u.every(f=>f[0]===l)&&d.every(f=>f[0]instanceof Set&&f[0].has(l))},s=l=>n.has(l)||!o(l)?!1:(n.add(l),l(()=>a(l)),!0),a=l=>{if(!n.has(l))return!1;let{paths:u,dirs:d}=e.get(l),f=new Set;return u.forEach(p=>{let h=t.get(p);IP.equal(h[0],l),h.length===1?t.delete(p):(h.shift(),typeof h[0]=="function"?f.add(h[0]):h[0].forEach(m=>f.add(m)))}),d.forEach(p=>{let h=t.get(p);IP(h[0]instanceof Set),h[0].size===1&&h.length===1?t.delete(p):h[0].size===1?(h.shift(),f.add(h[0])):h[0].delete(l)}),n.delete(l),f.forEach(p=>s(p)),!0};return{check:o,reserve:(l,u)=>{l=RG?["win32 parallelization disabled"]:l.map(f=>TG(AG(TP(f))).toLowerCase());let d=new Set(l.map(f=>r(f)).reduce((f,p)=>f.concat(p)));return e.set(u,{dirs:d,paths:l}),l.forEach(f=>{let p=t.get(f);p?p.push(u):t.set(f,[u])}),d.forEach(f=>{let p=t.get(f);p?p[p.length-1]instanceof Set?p[p.length-1].add(u):p.push(new Set([u])):t.set(f,[new Set([u])])}),s(u)}}}});var NP=I((kde,OP)=>{var OG=process.env.__FAKE_PLATFORM__||process.platform,NG=OG==="win32",LG=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:FG,O_TRUNC:MG,O_WRONLY:qG,UV_FS_O_FILEMAP:RP=0}=LG.constants,$G=NG&&!!RP,jG=512*1024,UG=RP|MG|FG|qG;OP.exports=$G?t=>t<jG?UG:"w":()=>"w"});var jy=I((Ide,YP)=>{"use strict";var BG=require("assert"),HG=qf(),He=require("fs"),VG=Fa(),Di=require("path"),LP=PP(),FP=jv(),WG=DP(),GG=Uv(),Ur=Sa(),zG=ka(),KG=Ry(),MP=Symbol("onEntry"),Oy=Symbol("checkFs"),qP=Symbol("checkFs2"),Wf=Symbol("pruneCache"),Ny=Symbol("isReusable"),sn=Symbol("makeFs"),Ly=Symbol("file"),Fy=Symbol("directory"),Gf=Symbol("link"),$P=Symbol("symlink"),jP=Symbol("hardlink"),UP=Symbol("unsupported"),BP=Symbol("checkPath"),go=Symbol("mkdir"),nr=Symbol("onError"),zf=Symbol("pending"),HP=Symbol("pend"),Ua=Symbol("unpend"),My=Symbol("ended"),qy=Symbol("maybeClose"),$y=Symbol("skip"),Tl=Symbol("doChown"),Al=Symbol("uid"),Dl=Symbol("gid"),Rl=Symbol("checkedCwd"),VP=require("crypto"),WP=NP(),YG=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,Ol=YG==="win32",JG=(t,e)=>{if(!Ol)return He.unlink(t,e);let r=t+".DELETE."+VP.randomBytes(16).toString("hex");He.rename(t,r,n=>{if(n)return e(n);He.unlink(r,e)})},QG=t=>{if(!Ol)return He.unlinkSync(t);let e=t+".DELETE."+VP.randomBytes(16).toString("hex");He.renameSync(t,e),He.unlinkSync(e)},GP=(t,e,r)=>t===t>>>0?t:e===e>>>0?e:r,zP=t=>KG(zG(Ur(t))).toLowerCase(),XG=(t,e)=>{e=zP(e);for(let r of t.keys()){let n=zP(r);(n===e||n.indexOf(e+"/")===0)&&t.delete(r)}},ZG=t=>{for(let e of t.keys())t.delete(e)},Kf=class extends HG{constructor(e){e||(e={}),e.ondone=r=>{this[My]=!0,this[qy]()};super(e);if(this[Rl]=!1,this.reservations=WG(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[zf]=0,this[My]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||Ol,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=Ur(Di.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",r=>this[MP](r))}warn(e,r,n={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(n.recoverable=!1),super.warn(e,r,n)}[qy](){this[My]&&this[zf]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close"))}[BP](e){if(this.strip){let r=Ur(e.path).split("/");if(r.length<this.strip)return!1;if(e.path=r.slice(this.strip).join("/"),e.type==="Link"){let n=Ur(e.linkpath).split("/");if(n.length>=this.strip)e.linkpath=n.slice(this.strip).join("/");else return!1}}if(!this.preservePaths){let r=Ur(e.path),n=r.split("/");if(n.includes("..")||Ol&&/^[a-z]:\.\.$/i.test(n[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:r}),!1;let[i,o]=GG(r);i&&(e.path=o,this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:e,path:r}))}if(Di.isAbsolute(e.path)?e.absolute=Ur(Di.resolve(e.path)):e.absolute=Ur(Di.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:Ur(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:r}=Di.win32.parse(e.absolute);e.absolute=r+FP.encode(e.absolute.substr(r.length));let{root:n}=Di.win32.parse(e.path);e.path=n+FP.encode(e.path.substr(n.length))}return!0}[MP](e){if(!this[BP](e))return e.resume();switch(BG.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[Oy](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[UP](e)}}[nr](e,r){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:r}),this[Ua](),r.resume())}[go](e,r,n){LP(Ur(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r,noChmod:this.noChmod},n)}[Tl](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[Al](e){return GP(this.uid,e.uid,this.processUid)}[Dl](e){return GP(this.gid,e.gid,this.processGid)}[Ly](e,r){let n=e.mode&4095||this.fmode,i=new VG.WriteStream(e.absolute,{flags:WP(e.size),mode:n,autoClose:!1});i.on("error",c=>{i.fd&&He.close(i.fd,()=>{}),i.write=()=>!0,this[nr](c,e),r()});let o=1,s=c=>{if(c){i.fd&&He.close(i.fd,()=>{}),this[nr](c,e),r();return}--o==0&&He.close(i.fd,l=>{l?this[nr](l,e):this[Ua](),r()})};i.on("finish",c=>{let l=e.absolute,u=i.fd;if(e.mtime&&!this.noMtime){o++;let d=e.atime||new Date,f=e.mtime;He.futimes(u,d,f,p=>p?He.utimes(l,d,f,h=>s(h&&p)):s())}if(this[Tl](e)){o++;let d=this[Al](e),f=this[Dl](e);He.fchown(u,d,f,p=>p?He.chown(l,d,f,h=>s(h&&p)):s())}s()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",c=>{this[nr](c,e),r()}),e.pipe(a)),a.pipe(i)}[Fy](e,r){let n=e.mode&4095||this.dmode;this[go](e.absolute,n,i=>{if(i){this[nr](i,e),r();return}let o=1,s=a=>{--o==0&&(r(),this[Ua](),e.resume())};e.mtime&&!this.noMtime&&(o++,He.utimes(e.absolute,e.atime||new Date,e.mtime,s)),this[Tl](e)&&(o++,He.chown(e.absolute,this[Al](e),this[Dl](e),s)),s()})}[UP](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[$P](e,r){this[Gf](e,e.linkpath,"symlink",r)}[jP](e,r){let n=Ur(Di.resolve(this.cwd,e.linkpath));this[Gf](e,n,"link",r)}[HP](){this[zf]++}[Ua](){this[zf]--,this[qy]()}[$y](e){this[Ua](),e.resume()}[Ny](e,r){return e.type==="File"&&!this.unlink&&r.isFile()&&r.nlink<=1&&!Ol}[Oy](e){this[HP]();let r=[e.path];e.linkpath&&r.push(e.linkpath),this.reservations.reserve(r,n=>this[qP](e,n))}[Wf](e){e.type==="SymbolicLink"?ZG(this.dirCache):e.type!=="Directory"&&XG(this.dirCache,e.absolute)}[qP](e,r){this[Wf](e);let n=a=>{this[Wf](e),r(a)},i=()=>{this[go](this.cwd,this.dmode,a=>{if(a){this[nr](a,e),n();return}this[Rl]=!0,o()})},o=()=>{if(e.absolute!==this.cwd){let a=Ur(Di.dirname(e.absolute));if(a!==this.cwd)return this[go](a,this.dmode,c=>{if(c){this[nr](c,e),n();return}s()})}s()},s=()=>{He.lstat(e.absolute,(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>e.mtime)){this[$y](e),n();return}if(a||this[Ny](e,c))return this[sn](null,e,n);if(c.isDirectory()){if(e.type==="Directory"){let l=!this.noChmod&&e.mode&&(c.mode&4095)!==e.mode,u=d=>this[sn](d,e,n);return l?He.chmod(e.absolute,e.mode,u):u()}if(e.absolute!==this.cwd)return He.rmdir(e.absolute,l=>this[sn](l,e,n))}if(e.absolute===this.cwd)return this[sn](null,e,n);JG(e.absolute,l=>this[sn](l,e,n))})};this[Rl]?o():i()}[sn](e,r,n){if(e){this[nr](e,r),n();return}switch(r.type){case"File":case"OldFile":case"ContiguousFile":return this[Ly](r,n);case"Link":return this[jP](r,n);case"SymbolicLink":return this[$P](r,n);case"Directory":case"GNUDumpDir":return this[Fy](r,n)}}[Gf](e,r,n,i){He[n](r,e.absolute,o=>{o?this[nr](o,e):(this[Ua](),e.resume()),i()})}},Yf=t=>{try{return[null,t()]}catch(e){return[e,null]}},KP=class extends Kf{[sn](e,r){return super[sn](e,r,()=>{})}[Oy](e){if(this[Wf](e),!this[Rl]){let o=this[go](this.cwd,this.dmode);if(o)return this[nr](o,e);this[Rl]=!0}if(e.absolute!==this.cwd){let o=Ur(Di.dirname(e.absolute));if(o!==this.cwd){let s=this[go](o,this.dmode);if(s)return this[nr](s,e)}}let[r,n]=Yf(()=>He.lstatSync(e.absolute));if(n&&(this.keep||this.newer&&n.mtime>e.mtime))return this[$y](e);if(r||this[Ny](e,n))return this[sn](null,e);if(n.isDirectory()){if(e.type==="Directory"){let s=!this.noChmod&&e.mode&&(n.mode&4095)!==e.mode,[a]=s?Yf(()=>{He.chmodSync(e.absolute,e.mode)}):[];return this[sn](a,e)}let[o]=Yf(()=>He.rmdirSync(e.absolute));this[sn](o,e)}let[i]=e.absolute===this.cwd?[]:Yf(()=>QG(e.absolute));this[sn](i,e)}[Ly](e,r){let n=e.mode&4095||this.fmode,i=a=>{let c;try{He.closeSync(o)}catch(l){c=l}(a||c)&&this[nr](a||c,e),r()},o;try{o=He.openSync(e.absolute,WP(e.size),n)}catch(a){return i(a)}let s=this.transform&&this.transform(e)||e;s!==e&&(s.on("error",a=>this[nr](a,e)),e.pipe(s)),s.on("data",a=>{try{He.writeSync(o,a,0,a.length)}catch(c){i(c)}}),s.on("end",a=>{let c=null;if(e.mtime&&!this.noMtime){let l=e.atime||new Date,u=e.mtime;try{He.futimesSync(o,l,u)}catch(d){try{He.utimesSync(e.absolute,l,u)}catch{c=d}}}if(this[Tl](e)){let l=this[Al](e),u=this[Dl](e);try{He.fchownSync(o,l,u)}catch(d){try{He.chownSync(e.absolute,l,u)}catch{c=c||d}}}i(c)})}[Fy](e,r){let n=e.mode&4095||this.dmode,i=this[go](e.absolute,n);if(i){this[nr](i,e),r();return}if(e.mtime&&!this.noMtime)try{He.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[Tl](e))try{He.chownSync(e.absolute,this[Al](e),this[Dl](e))}catch{}r(),e.resume()}[go](e,r){try{return LP.sync(Ur(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r})}catch(n){return n}}[Gf](e,r,n,i){try{He[n+"Sync"](r,e.absolute),i(),e.resume()}catch(o){return this[nr](o,e)}}};Kf.Sync=KP;YP.exports=Kf});var ek=I((Tde,ZP)=>{"use strict";var ez=ba(),Jf=jy(),JP=require("fs"),QP=Fa(),XP=require("path"),Uy=ka();ZP.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=ez(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&tz(n,e),n.file&&n.sync?rz(n):n.file?nz(n,r):n.sync?iz(n):oz(n)};var tz=(t,e)=>{let r=new Map(e.map(o=>[Uy(o),!0])),n=t.filter,i=(o,s)=>{let a=s||XP.parse(o).root||".",c=o===a?!1:r.has(o)?r.get(o):i(XP.dirname(o),a);return r.set(o,c),c};t.filter=n?(o,s)=>n(o,s)&&i(Uy(o)):o=>i(Uy(o))},rz=t=>{let e=new Jf.Sync(t),r=t.file,n=JP.statSync(r),i=t.maxReadSize||16*1024*1024;new QP.ReadStreamSync(r,{readSize:i,size:n.size}).pipe(e)},nz=(t,e)=>{let r=new Jf(t),n=t.maxReadSize||16*1024*1024,i=t.file,o=new Promise((s,a)=>{r.on("error",a),r.on("close",s),JP.stat(i,(c,l)=>{if(c)a(c);else{let u=new QP.ReadStream(i,{readSize:n,size:l.size});u.on("error",a),u.pipe(r)}})});return e?o.then(e,e):o},iz=t=>new Jf.Sync(t),oz=t=>new Jf(t)});var Ba=I(Dt=>{"use strict";Dt.c=Dt.create=Lx();Dt.r=Dt.replace=by();Dt.t=Dt.list=$f();Dt.u=Dt.update=Vx();Dt.x=Dt.extract=ek();Dt.Pack=Pf();Dt.Unpack=jy();Dt.Parse=qf();Dt.ReadEntry=lf();Dt.WriteEntry=Jv();Dt.Header=Pa();Dt.Pax=ff();Dt.types=Nv()});var Hy=I(By=>{"use strict";Object.defineProperty(By,"__esModule",{value:!0});By.default=cz;var sz=az(require("crypto"));function az(t){return t&&t.__esModule?t:{default:t}}var Qf=new Uint8Array(256),Xf=Qf.length;function cz(){return Xf>Qf.length-16&&(sz.default.randomFillSync(Qf),Xf=0),Qf.slice(Xf,Xf+=16)}});var tk=I(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});Zf.default=void 0;var lz=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Zf.default=lz});var Nl=I(ep=>{"use strict";Object.defineProperty(ep,"__esModule",{value:!0});ep.default=void 0;var uz=dz(tk());function dz(t){return t&&t.__esModule?t:{default:t}}function fz(t){return typeof t=="string"&&uz.default.test(t)}var pz=fz;ep.default=pz});var Ll=I(tp=>{"use strict";Object.defineProperty(tp,"__esModule",{value:!0});tp.default=void 0;var hz=mz(Nl());function mz(t){return t&&t.__esModule?t:{default:t}}var Ht=[];for(let t=0;t<256;++t)Ht.push((t+256).toString(16).substr(1));function gz(t,e=0){let r=(Ht[t[e+0]]+Ht[t[e+1]]+Ht[t[e+2]]+Ht[t[e+3]]+"-"+Ht[t[e+4]]+Ht[t[e+5]]+"-"+Ht[t[e+6]]+Ht[t[e+7]]+"-"+Ht[t[e+8]]+Ht[t[e+9]]+"-"+Ht[t[e+10]]+Ht[t[e+11]]+Ht[t[e+12]]+Ht[t[e+13]]+Ht[t[e+14]]+Ht[t[e+15]]).toLowerCase();if(!(0,hz.default)(r))throw TypeError("Stringified UUID is invalid");return r}var vz=gz;tp.default=vz});var ik=I(rp=>{"use strict";Object.defineProperty(rp,"__esModule",{value:!0});rp.default=void 0;var yz=rk(Hy()),wz=rk(Ll());function rk(t){return t&&t.__esModule?t:{default:t}}var nk,Vy,Wy=0,Gy=0;function Cz(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let o=t.node||nk,s=t.clockseq!==void 0?t.clockseq:Vy;if(o==null||s==null){let f=t.random||(t.rng||yz.default)();o==null&&(o=nk=[f[0]|1,f[1],f[2],f[3],f[4],f[5]]),s==null&&(s=Vy=(f[6]<<8|f[7])&16383)}let a=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:Gy+1,l=a-Wy+(c-Gy)/1e4;if(l<0&&t.clockseq===void 0&&(s=s+1&16383),(l<0||a>Wy)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Wy=a,Gy=c,Vy=s,a+=122192928e5;let u=((a&268435455)*1e4+c)%4294967296;i[n++]=u>>>24&255,i[n++]=u>>>16&255,i[n++]=u>>>8&255,i[n++]=u&255;let d=a/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=d&255,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let f=0;f<6;++f)i[n+f]=o[f];return e||(0,wz.default)(i)}var bz=Cz;rp.default=bz});var zy=I(np=>{"use strict";Object.defineProperty(np,"__esModule",{value:!0});np.default=void 0;var Ez=_z(Nl());function _z(t){return t&&t.__esModule?t:{default:t}}function Sz(t){if(!(0,Ez.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var xz=Sz;np.default=xz});var Ky=I(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds.default=Tz;Ds.URL=Ds.DNS=void 0;var Pz=ok(Ll()),kz=ok(zy());function ok(t){return t&&t.__esModule?t:{default:t}}function Iz(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var sk="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Ds.DNS=sk;var ak="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Ds.URL=ak;function Tz(t,e,r){function n(i,o,s,a){if(typeof i=="string"&&(i=Iz(i)),typeof o=="string"&&(o=(0,kz.default)(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+i.length);if(c.set(o),c.set(i,o.length),c=r(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,s){a=a||0;for(let l=0;l<16;++l)s[a+l]=c[l];return s}return(0,Pz.default)(c)}try{n.name=t}catch{}return n.DNS=sk,n.URL=ak,n}});var ck=I(ip=>{"use strict";Object.defineProperty(ip,"__esModule",{value:!0});ip.default=void 0;var Az=Dz(require("crypto"));function Dz(t){return t&&t.__esModule?t:{default:t}}function Rz(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),Az.default.createHash("md5").update(t).digest()}var Oz=Rz;ip.default=Oz});var uk=I(op=>{"use strict";Object.defineProperty(op,"__esModule",{value:!0});op.default=void 0;var Nz=lk(Ky()),Lz=lk(ck());function lk(t){return t&&t.__esModule?t:{default:t}}var Fz=(0,Nz.default)("v3",48,Lz.default),Mz=Fz;op.default=Mz});var fk=I(sp=>{"use strict";Object.defineProperty(sp,"__esModule",{value:!0});sp.default=void 0;var qz=dk(Hy()),$z=dk(Ll());function dk(t){return t&&t.__esModule?t:{default:t}}function jz(t,e,r){t=t||{};let n=t.random||(t.rng||qz.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,$z.default)(n)}var Uz=jz;sp.default=Uz});var pk=I(ap=>{"use strict";Object.defineProperty(ap,"__esModule",{value:!0});ap.default=void 0;var Bz=Hz(require("crypto"));function Hz(t){return t&&t.__esModule?t:{default:t}}function Vz(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),Bz.default.createHash("sha1").update(t).digest()}var Wz=Vz;ap.default=Wz});var mk=I(cp=>{"use strict";Object.defineProperty(cp,"__esModule",{value:!0});cp.default=void 0;var Gz=hk(Ky()),zz=hk(pk());function hk(t){return t&&t.__esModule?t:{default:t}}var Kz=(0,Gz.default)("v5",80,zz.default),Yz=Kz;cp.default=Yz});var gk=I(lp=>{"use strict";Object.defineProperty(lp,"__esModule",{value:!0});lp.default=void 0;var Jz="00000000-0000-0000-0000-000000000000";lp.default=Jz});var vk=I(up=>{"use strict";Object.defineProperty(up,"__esModule",{value:!0});up.default=void 0;var Qz=Xz(Nl());function Xz(t){return t&&t.__esModule?t:{default:t}}function Zz(t){if(!(0,Qz.default)(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}var e4=Zz;up.default=e4});var yk=I(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Object.defineProperty(Dn,"v1",{enumerable:!0,get:function(){return t4.default}});Object.defineProperty(Dn,"v3",{enumerable:!0,get:function(){return r4.default}});Object.defineProperty(Dn,"v4",{enumerable:!0,get:function(){return n4.default}});Object.defineProperty(Dn,"v5",{enumerable:!0,get:function(){return i4.default}});Object.defineProperty(Dn,"NIL",{enumerable:!0,get:function(){return o4.default}});Object.defineProperty(Dn,"version",{enumerable:!0,get:function(){return s4.default}});Object.defineProperty(Dn,"validate",{enumerable:!0,get:function(){return a4.default}});Object.defineProperty(Dn,"stringify",{enumerable:!0,get:function(){return c4.default}});Object.defineProperty(Dn,"parse",{enumerable:!0,get:function(){return l4.default}});var t4=Ri(ik()),r4=Ri(uk()),n4=Ri(fk()),i4=Ri(mk()),o4=Ri(gk()),s4=Ri(vk()),a4=Ri(Nl()),c4=Ri(Ll()),l4=Ri(zy());function Ri(t){return t&&t.__esModule?t:{default:t}}});var Dk=I((cfe,Ak)=>{var Ha=1e3,Va=Ha*60,Wa=Va*60,Rs=Wa*24,C4=Rs*7,b4=Rs*365.25;Ak.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return E4(t);if(r==="number"&&isFinite(t))return e.long?S4(t):_4(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function E4(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*b4;case"weeks":case"week":case"w":return r*C4;case"days":case"day":case"d":return r*Rs;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Wa;case"minutes":case"minute":case"mins":case"min":case"m":return r*Va;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ha;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function _4(t){var e=Math.abs(t);return e>=Rs?Math.round(t/Rs)+"d":e>=Wa?Math.round(t/Wa)+"h":e>=Va?Math.round(t/Va)+"m":e>=Ha?Math.round(t/Ha)+"s":t+"ms"}function S4(t){var e=Math.abs(t);return e>=Rs?fp(t,e,Rs,"day"):e>=Wa?fp(t,e,Wa,"hour"):e>=Va?fp(t,e,Va,"minute"):e>=Ha?fp(t,e,Ha,"second"):t+" ms"}function fp(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var Xy=I((lfe,Rk)=>{function x4(t){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=i,r.enabled=s,r.humanize=Dk(),r.destroy=l,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let d=0;for(let f=0;f<u.length;f++)d=(d<<5)-d+u.charCodeAt(f),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(u){let d,f=null;function p(...h){if(!p.enabled)return;let m=p,g=Number(new Date),v=g-(d||g);m.diff=v,m.prev=d,m.curr=g,d=g,h[0]=r.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");let w=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,(C,S)=>{if(C==="%%")return"%";w++;let P=r.formatters[S];if(typeof P=="function"){let _=h[w];C=P.call(m,_),h.splice(w,1),w--}return C}),r.formatArgs.call(m,h),(m.log||r.log).apply(m,h)}return p.namespace=u,p.useColors=r.useColors(),p.color=r.selectColor(u),p.extend=n,p.destroy=r.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>f===null?r.enabled(u):f,set:h=>{f=h}}),typeof r.init=="function"&&r.init(p),p}function n(u,d){let f=r(this.namespace+(typeof d=="undefined"?":":d)+u);return f.log=this.log,f}function i(u){r.save(u),r.names=[],r.skips=[];let d,f=(typeof u=="string"?u:"").split(/[\s,]+/),p=f.length;for(d=0;d<p;d++)!f[d]||(u=f[d].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.substr(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function o(){let u=[...r.names.map(a),...r.skips.map(a).map(d=>"-"+d)].join(",");return r.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let d,f;for(d=0,f=r.skips.length;d<f;d++)if(r.skips[d].test(u))return!1;for(d=0,f=r.names.length;d<f;d++)if(r.names[d].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Rk.exports=x4});var Ok=I((Hr,pp)=>{Hr.formatArgs=k4;Hr.save=I4;Hr.load=T4;Hr.useColors=P4;Hr.storage=A4();Hr.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Hr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function P4(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function k4(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+pp.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}Hr.log=console.debug||console.log||(()=>{});function I4(t){try{t?Hr.storage.setItem("debug",t):Hr.storage.removeItem("debug")}catch{}}function T4(){let t;try{t=Hr.storage.getItem("debug")}catch{}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function A4(){try{return localStorage}catch{}}pp.exports=Xy()(Hr);var{formatters:D4}=pp.exports;D4.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Lk=I((ufe,Nk)=>{"use strict";Nk.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var qk=I((dfe,Mk)=>{"use strict";var R4=require("os"),Fk=require("tty"),an=Lk(),{env:Mt}=process,hp;an("no-color")||an("no-colors")||an("color=false")||an("color=never")?hp=0:(an("color")||an("colors")||an("color=true")||an("color=always"))&&(hp=1);function O4(){if("FORCE_COLOR"in Mt)return Mt.FORCE_COLOR==="true"?1:Mt.FORCE_COLOR==="false"?0:Mt.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(Mt.FORCE_COLOR,10),3)}function N4(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function L4(t,{streamIsTTY:e,sniffFlags:r=!0}={}){let n=O4();n!==void 0&&(hp=n);let i=r?hp:n;if(i===0)return 0;if(r){if(an("color=16m")||an("color=full")||an("color=truecolor"))return 3;if(an("color=256"))return 2}if(t&&!e&&i===void 0)return 0;let o=i||0;if(Mt.TERM==="dumb")return o;if(process.platform==="win32"){let s=R4.release().split(".");return Number(s[0])>=10&&Number(s[2])>=10586?Number(s[2])>=14931?3:2:1}if("CI"in Mt)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(s=>s in Mt)||Mt.CI_NAME==="codeship"?1:o;if("TEAMCITY_VERSION"in Mt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Mt.TEAMCITY_VERSION)?1:0;if(Mt.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Mt){let s=Number.parseInt((Mt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Mt.TERM_PROGRAM){case"iTerm.app":return s>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Mt.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Mt.TERM)||"COLORTERM"in Mt?1:o}function Zy(t,e={}){let r=L4(t,V({streamIsTTY:t&&t.isTTY},e));return N4(r)}Mk.exports={supportsColor:Zy,stdout:Zy({isTTY:Fk.isatty(1)}),stderr:Zy({isTTY:Fk.isatty(2)})}});var jk=I((Vt,gp)=>{var F4=require("tty"),mp=require("util");Vt.init=H4;Vt.log=j4;Vt.formatArgs=q4;Vt.save=U4;Vt.load=B4;Vt.useColors=M4;Vt.destroy=mp.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Vt.colors=[6,2,3,4,5,1];try{let t=qk();t&&(t.stderr||t).level>=2&&(Vt.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Vt.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function M4(){return"colors"in Vt.inspectOpts?Boolean(Vt.inspectOpts.colors):F4.isatty(process.stderr.fd)}function q4(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} [0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+gp.exports.humanize(this.diff)+"[0m")}else t[0]=$4()+e+" "+t[0]}function $4(){return Vt.inspectOpts.hideDate?"":new Date().toISOString()+" "}function j4(...t){return process.stderr.write(mp.format(...t)+`
`)}function U4(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function B4(){return process.env.DEBUG}function H4(t){t.inspectOpts={};let e=Object.keys(Vt.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Vt.inspectOpts[e[r]]}gp.exports=Xy()(Vt);var{formatters:$k}=gp.exports;$k.o=function(t){return this.inspectOpts.colors=this.useColors,mp.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};$k.O=function(t){return this.inspectOpts.colors=this.useColors,mp.inspect(t,this.inspectOpts)}});var Uk=I((ffe,ew)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?ew.exports=Ok():ew.exports=jk()});var Hk=I((pfe,Bk)=>{var ql;Bk.exports=function(){if(!ql){try{ql=Uk()("follow-redirects")}catch{}typeof ql!="function"&&(ql=function(){})}ql.apply(null,arguments)}});var Ga=I((hfe,iw)=>{var Os=require("url"),tw=Os.URL,V4=require("http"),W4=require("https"),Vk=require("stream").Writable,G4=require("assert"),Wk=Hk(),Ns=["abort","aborted","connect","error","socket","timeout"],rw=Object.create(null);Ns.forEach(function(t){rw[t]=function(e,r,n){this._redirectable.emit(t,e,r,n)}});var Gk=vp("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),z4=vp("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),K4=vp("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),Y4=vp("ERR_STREAM_WRITE_AFTER_END","write after end");function Vr(t,e){Vk.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var r=this;this._onNativeResponse=function(n){r._processResponse(n)},this._performRequest()}Vr.prototype=Object.create(Vk.prototype);Vr.prototype.abort=function(){Yk(this._currentRequest),this.emit("abort")};Vr.prototype.write=function(t,e,r){if(this._ending)throw new Y4;if(!(typeof t=="string"||typeof t=="object"&&"length"in t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof e=="function"&&(r=e,e=null),t.length===0){r&&r();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new K4),this.abort())};Vr.prototype.end=function(t,e,r){if(typeof t=="function"?(r=t,t=e=null):typeof e=="function"&&(r=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,i=this._currentRequest;this.write(t,e,function(){n._ended=!0,i.end(null,null,r)}),this._ending=!0}};Vr.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};Vr.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};Vr.prototype.setTimeout=function(t,e){var r=this;function n(s){s.setTimeout(t),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function i(s){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),o()},t),n(s)}function o(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",o),r.removeListener("error",o),r.removeListener("response",o),e&&r.removeListener("timeout",e),r.socket||r._currentRequest.removeListener("socket",i)}return e&&this.on("timeout",e),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.on("abort",o),this.on("error",o),this.on("response",o),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){Vr.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(Vr.prototype,t,{get:function(){return this._currentRequest[t]}})});Vr.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};Vr.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e){this.emit("error",new TypeError("Unsupported protocol "+t));return}if(this._options.agents){var r=t.substr(0,t.length-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);this._currentUrl=Os.format(this._options),n._redirectable=this;for(var i=0;i<Ns.length;i++)n.on(Ns[i],rw[Ns[i]]);if(this._isRedirect){var o=0,s=this,a=this._requestBodyBuffers;(function c(l){if(n===s._currentRequest)if(l)s.emit("error",l);else if(o<a.length){var u=a[o++];n.finished||n.write(u.data,u.encoding,c)}else s._ended&&n.end()})()}};Vr.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var r=t.headers.location;if(r&&this._options.followRedirects!==!1&&e>=300&&e<400){if(Yk(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new z4);return}((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],nw(/^content-/i,this._options.headers));var n=nw(/^host$/i,this._options.headers),i=Os.parse(this._currentUrl),o=n||i.host,s=/^\w+:/.test(r)?this._currentUrl:Os.format(Object.assign(i,{host:o})),a;try{a=Os.resolve(s,r)}catch(u){this.emit("error",new Gk(u));return}Wk("redirecting to",a),this._isRedirect=!0;var c=Os.parse(a);if(Object.assign(this._options,c),(c.protocol!==i.protocol||!Q4(c.host,o))&&nw(/^(?:authorization|cookie)$/i,this._options.headers),typeof this._options.beforeRedirect=="function"){var l={headers:t.headers};try{this._options.beforeRedirect.call(null,this._options,l)}catch(u){this.emit("error",u);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(u){this.emit("error",new Gk(u))}}else t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[]};function zk(t){var e={maxRedirects:21,maxBodyLength:10*1024*1024},r={};return Object.keys(t).forEach(function(n){var i=n+":",o=r[i]=t[n],s=e[n]=Object.create(o);function a(l,u,d){if(typeof l=="string"){var f=l;try{l=Kk(new tw(f))}catch{l=Os.parse(f)}}else tw&&l instanceof tw?l=Kk(l):(d=u,u=l,l={protocol:i});return typeof u=="function"&&(d=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},l,u),u.nativeProtocols=r,G4.equal(u.protocol,i,"protocol mismatch"),Wk("options",u),new Vr(u,d)}function c(l,u,d){var f=s.request(l,u,d);return f.end(),f}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function J4(){}function Kk(t){var e={protocol:t.protocol,hostname:t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:t.pathname+t.search,href:t.href};return t.port!==""&&(e.port=Number(t.port)),e}function nw(t,e){var r;for(var n in e)t.test(n)&&(r=e[n],delete e[n]);return r===null||typeof r=="undefined"?void 0:String(r).trim()}function vp(t,e){function r(n){Error.captureStackTrace(this,this.constructor),n?(this.message=e+": "+n.message,this.cause=n):this.message=e}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+t+"]",r.prototype.code=t,r}function Yk(t){for(var e=0;e<Ns.length;e++)t.removeListener(Ns[e],rw[Ns[e]]);t.on("error",J4),t.abort()}function Q4(t,e){if(t===e)return!0;let r=t.length-e.length-1;return r>0&&t[r]==="."&&t.endsWith(e)}iw.exports=zk({http:V4,https:W4});iw.exports.wrap=zk});var cw=I((Lfe,nI)=>{nI.exports=function(e,r,n){e(r),n&&n(r===!0?null:r)}});var Sp=I((Ffe,oI)=>{"use strict";var iI=cw();oI.exports=function(e,r){if(!e)return function(i,o){return i?iI(o,i,r):o(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(i){return e[i]}));var n=0;return function(i,o){if(i)return iI(o,i,r);n>=e.length?o(!0):o(null,e[n++])}}});var aI=I((Mfe,sI)=>{"use strict";var r6=Sp();sI.exports=function(t){return r6(Object.keys(t))}});var lw=I((qfe,cI)=>{"use strict";var n6=cw();cI.exports=function(e,r){return function(n,i){if(n)return n6(i,n,r);if(e!=null){var o=e;e=null,i(null,o)}else i(!0)}}});var uI=I(($fe,lI)=>{"use strict";lI.exports=function(e){var r=0;return e=e||1/0,function(n,i){if(n)return i&&i(n);if(r>e)return i(!0);i(null,r++)}}});var fI=I((jfe,dI)=>{"use strict";dI.exports=function(e){return e=e||Math.random,function(r,n){return r?n&&n(r):n(null,e())}}});var hI=I((Ufe,pI)=>{"use strict";pI.exports=function(){return function(e,r){r(!0)}}});var gI=I((Bfe,mI)=>{"use strict";mI.exports=function(e){return function(r,n){n(e)}}});var yI=I((Hfe,vI)=>{"use strict";vI.exports={keys:aI(),once:lw(),values:Sp(),count:uI(),infinite:fI(),empty:hI(),error:gI()}});var Ya=I((Vfe,wI)=>{"use strict";wI.exports=function(e,r){var n,i;function o(s){if(n=s,i)return o.abort();(function a(){for(var c=!0,l=!1;c;)if(l=!1,n(null,function(u,d){if(l=!0,u=u||i){if(c=!1,r)r(u===!0?null:u);else if(u&&u!==!0)throw u}else e&&e(d)===!1||i?(c=!1,n(i||!0,r||function(){})):c||a()}),!l){c=!1;return}})()}return o.abort=function(s,a){if(typeof s=="function"&&(a=s,s=!0),i=s||!0,n)return n(i,a||function(){})},o}});var bI=I((Wfe,CI)=>{"use strict";var i6=Ya();CI.exports=function(e){return i6(null,e)}});var _I=I((Gfe,EI)=>{"use strict";var o6=Ya();EI.exports=function(e){return o6(function(r){console.log(r)},e)}});var Ja=I((zfe,SI)=>{SI.exports=function(e){return e&&(typeof e=="string"?function(r){return r[e]}:typeof e=="object"&&typeof e.exec=="function"?function(r){var n=e.exec(r);return n&&n[0]}:e)}});var kI=I((Kfe,PI)=>{"use strict";function xI(t){return t}var s6=Ja(),a6=Ya();PI.exports=function(e,r){var n=!1;return r?e=s6(e)||xI:(r=e,e=xI),a6(function(i){if(e(i))return n=!0,r(null,i),!1},function(i){n||r(i===!0?null:i,null)})}});var xp=I((Yfe,II)=>{"use strict";var c6=Ya();II.exports=function(e,r,n){n||(n=r,r=null);var i=c6(function(o){r=e(r,o)},function(o){n(o,r)});return arguments.length===2?function(o){o(null,function(s,a){if(s)return n(s===!0?null:s);r=a,i(o)})}:i}});var AI=I((Jfe,TI)=>{"use strict";var l6=xp();TI.exports=function(e){return l6(function(r,n){return r.push(n),r},[],e)}});var RI=I((Qfe,DI)=>{"use strict";var u6=xp();DI.exports=function(e){return u6(function(r,n){return r+n},"",e)}});var NI=I((Xfe,OI)=>{"use strict";OI.exports={drain:Ya(),onEnd:bI(),log:_I(),find:kI(),reduce:xp(),collect:AI(),concat:RI()}});var FI=I((Zfe,LI)=>{"use strict";function d6(t){return t}var f6=Ja();LI.exports=function(e){return e?(e=f6(e),function(r){return function(n,i){r(n,function(o,s){try{s=o?null:e(s)}catch(a){return r(a,function(){return i(a)})}i(o,s)})}}):d6}});var qI=I((epe,MI)=>{"use strict";function p6(t){return t}var h6=Ja();MI.exports=function(e){if(!e)return p6;e=h6(e);var r=!1,n,i;return function(o){return function s(a,c){if(i)return c(i);a?(i=a,r?o(a,function(l){r?n=c:c(a)}):o(a,function(l){c(a)})):o(null,function(l,u){l?c(l):i?c(i):(r=!0,e(u,function(d,f){r=!1,i?(c(i),n&&n(i)):d?s(d,c):c(null,f)}))})}}}});var uw=I((tpe,$I)=>{var m6=Ja();function g6(t){return t}$I.exports=function(e){return typeof e=="object"&&typeof e.test=="function"?function(r){return e.test(r)}:m6(e)||g6}});var Pp=I((rpe,jI)=>{"use strict";var v6=uw();jI.exports=function(e){return e=v6(e),function(r){return function n(i,o){for(var s,a=!0;a;)a=!1,s=!0,r(i,function(c,l){if(!c&&!e(l))return s?a=!0:n(c,o);o(c,l)}),s=!1}}}});var BI=I((npe,UI)=>{"use strict";var y6=uw(),w6=Pp();UI.exports=function(e){return e=y6(e),w6(function(r){return!e(r)})}});var VI=I((ipe,HI)=>{"use strict";HI.exports=function(e,r){var n=!1;function i(o){n||!r||(n=!0,r(o===!0?null:o))}return function(o){return function(s,a){return s&&i(s),o(s,function(c,l){c?i(c):e&&e(l),a(c,l)})}}}});var GI=I((ope,WI)=>{"use strict";WI.exports=function(e,r){r=r||{};var n=r.last||!1,i=!1;if(typeof e=="number"){n=!0;var o=e;e=function(){return--o}}return function(s){function a(c){s(!0,function(l){n=!1,c(l||!0)})}return function(c,l){i&&!c?n?a(l):l(i):(i=c)?s(i,l):s(null,function(u,d){(i=i||u)?l(i):e(d)?l(null,d):(i=!0,n?l(null,d):a(l))})}}}});var dw=I((spe,zI)=>{"use strict";function C6(t){return t}var b6=Ja(),E6=Pp();zI.exports=function(e,r){e=b6(e)||C6;var n={};return E6(function(i){var o=e(i);return n[o]?!!r:(n[o]=!0,!r)})}});var YI=I((ape,KI)=>{"use strict";var _6=dw();KI.exports=function(e){return _6(e,!0)}});var QI=I((cpe,JI)=>{"use strict";var S6=Sp(),x6=lw();JI.exports=function(){return function(e){var r;return function(n,i){n?r?r(n,function(a){e(a||n,i)}):e(n,i):r?o():s();function o(){r(null,function(a,c){a===!0?s():a?e(!0,function(l){i(a)}):i(null,c)})}function s(){r=null,e(null,function(a,c){if(a)return i(a);Array.isArray(c)||c&&typeof c=="object"?c=S6(c):typeof c!="function"&&(c=x6(c)),r=c,o()})}}}}});var ZI=I((lpe,XI)=>{"use strict";XI.exports={map:FI(),asyncMap:qI(),filter:Pp(),filterNot:BI(),through:VI(),take:GI(),unique:dw(),nonUnique:YI(),flatten:QI()}});var fw=I((upe,eT)=>{"use strict";eT.exports=function t(e){var r=arguments.length;if(typeof e=="function"&&e.length===1){for(var n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var o=e;o&&typeof o.source=="function"&&(o=o.source);for(var i=1;i<r;i++){var s=arguments[i];typeof s=="function"?o=s(o):s&&typeof s=="object"&&(s.sink(o),o=s.source)}return o}});var kp=I((Fs,iT)=>{"use strict";var tT=yI(),rT=NI(),nT=ZI();Fs=iT.exports=fw();Fs.pull=Fs;for(Rn in tT)Fs[Rn]=tT[Rn];var Rn;for(Rn in nT)Fs[Rn]=nT[Rn];var Rn;for(Rn in rT)Fs[Rn]=rT[Rn];var Rn});var Ew=I((_pe,uT)=>{var Epe=uT.exports=function(t){(function e(){var r=!0,n=!1,i=!1;do i=!0,r=!1,t.call(this,function(){i?r=!0:e()}),i=!1;while(r)})()}});var fT=I((Spe,dT)=>{var D6=Ew();dT.exports=function(t,e){return function(r){var n=[],i,o;function s(l){n.push(l)}t=t||function(l){this.queue(l)},e=e||function(){this.queue(null)};var a={emit:function(l,u){l=="data"&&s(u),l=="end"&&(i=!0,s(null)),l=="error"&&(o=u)},queue:s},c;return function(l,u){if(i=i||l,l)return r(l,function(){if(c){var d=c;c=null,d(l)}u(l)});c=u,D6(function d(f){if(!!c)if(u=c,o)c=null,u(o);else if(n.length){var p=n.shift();c=null,u(p===null,p)}else r(i,function(h,m){if(h&&h!==!0)return o=h,f();if(i=i||h)e.call(a);else if(m!==null&&(t.call(a,m),o||i))return r(o||i,function(){c=null,u(o||i)});f(d)})})}}}});var hT=I((xpe,pT)=>{pT.exports=function(){var t=[],e=0;function r(){return t.reduce(function(n,i){return n+i.length},0)}return{length:e,data:this,add:function(n){if(!Buffer.isBuffer(n))throw new Error("data must be a buffer, was: "+JSON.stringify(n));return this.length=e=e+n.length,t.push(n),this},has:function(n){return n==null?e>0:e>=n},get:function(n){var i;if(n==null||n===e){e=0;var o=t;return t=[],o.length==1?o[0]:Buffer.concat(o)}else if(t.length>1&&n<=(i=t[0].length)){var s=t[0].slice(0,n);return n===i?t.shift():t[0]=t[0].slice(n,i),e-=n,s}else if(n<e){for(var a=[],c=0;c+t[0].length<n;){var l=t.shift();c+=l.length,a.push(l)}return c<n&&(a.push(t[0].slice(0,n-c)),t[0]=t[0].slice(n-c,t[0].length),this.length=e=e-n),Buffer.concat(a)}else throw new Error("could not get "+n+" bytes")}}}});var yT=I((Ppe,vT)=>{"use strict";var R6=hT();function O6(t){return Number.isFinite(t)}function mT(t){return typeof t=="function"}function gT(t,e){return e?function(r,n){var i=setTimeout(function(){t(new Error("pull-reader: read exceeded timeout"),n)},e);t(r,function(o,s){clearTimeout(i),n(o,s)})}:t}vT.exports=function(t){var e=[],r,n,i=!1,o=R6(),s,a,c;function l(){for(;e.length;)if(e[0].length==null&&o.has(1))e.shift().cb(null,o.get());else if(o.has(e[0].length)){var f=e.shift();f.cb(null,o.get(f.length))}else if(s==!0&&e[0].length&&o.length<e[0].length){var p="stream ended with:"+o.length+" but wanted:"+e[0].length;e.shift().cb(new Error(p))}else if(s)e.shift().cb(s);else return!!e.length;return e.length||!o.has(1)||c}function u(){var f=l();f&&!i&&r&&!i&&!a&&(i=!0,n(null,function(p,h){if(i=!1,p)return s=p,l();o.add(h),u()}))}function d(f){if(c){for(;e.length;)e.shift().cb(c);return cb&&cb(c)}n=gT(f,t),r=f,u()}return d.abort=function(f,p){c=f||!0,r?(i=!0,r(c,function(){for(;e.length;)e.shift().cb(c);p&&p(c)})):p()},d.read=function(f,p,h){if(mT(p)&&(h=p,p=t),mT(h))e.push({length:O6(f)?f:null,cb:h}),u();else return a=!0,function(m,g){if(i||o.has(1)){if(m)return r(m,g);e.push({length:null,cb:g}),u()}else gT(r,p)(m,function(v,w){g(v,w)})}},d}});var AT=I((Ms,TT)=>{var N6=fT(),L6=yT(),wT=0,CT=1,bT=2,ET="GOODBYE",F6=Buffer.isBuffer;function _T(t){return typeof t=="string"}function ST(t){var e=Buffer.alloc(9),r=0,n=t.value!==void 0?t.value:t.end;return _T(t)&&t===ET?(e.fill(0),[e,null]):(_T(n)?(r=CT,n=Buffer.from(n,"utf-8")):F6(n)?r=wT:(r=bT,n=Buffer.from(JSON.stringify(n),"utf-8")),r=t.stream<<3|t.end<<2|r,e[0]=r,e.writeUInt32BE(n.length,1),e.writeInt32BE(t.req||0,5),[e,n])}function xT(t){if(t.length!=9)throw new Error("expected header to be 9 bytes long");var e=t[0],r=t.readUInt32BE(1),n=t.readInt32BE(5);return{req:n,stream:!!(e&8),end:!!(e&4),value:null,length:r,type:e&3}}function PT(t,e){if(t.length!==e.length)throw new Error("incorrect length, expected:"+e.length+" found:"+t.length);if(wT===e.type)e.value=t;else if(CT===e.type)e.value=t.toString();else if(bT===e.type)e.value=JSON.parse(t.toString());else throw new Error("unknown message type");return e}function kT(){return N6(function(t){var e=ST(t);this.queue(e[0]),e[1]!==null&&this.queue(e[1])})}function IT(){var t=L6(),e=!1;return function(r){return t(r),function(n,i){if(e)return i(!0);if(n)return t.abort(n,i);t.read(9,function(o,s){if(o)return i(o);var a=xT(s);if(a.length===0)return e=!0,i(null,ET);t.read(a.length,function(c,l){if(c)return i(c);try{PT(l,a)}catch(u){return i(u)}i(null,a)})})}}}Ms=TT.exports=function(t){return{source:kT()(t.source),sink:function(e){return t.sink(IT()(e))}}};Ms.encodePair=ST;Ms.decodeHead=xT;Ms.decodeBody=PT;Ms.encode=kT;Ms.decode=IT});var OT=I((kpe,RT)=>{function Gl(t){return t&&(t===!0?!0:{message:t.message,name:t.name,stack:t.stack})}RT.exports=function(t){return new ln(t)};function ln(t){this.ended=!1,this.opts=t,this._req_counter=1,this._requests={},this._instreams={},this._outstreams={},this._closecbs=[],this._closing=!1,this._closed=!1,t.close&&this._closecbs.push(t.close)}ln.prototype.message=function(t){this.read({req:0,stream:!1,end:!1,value:t})};ln.prototype.request=function(t,e){if(this._closing)return e(new Error("parent stream is closing"));var r=this._req_counter++,n=this;this._requests[r]=function(i,o){delete n._requests[r],e(i,o),n._maybedone(i)},this.read({req:r,stream:!1,end:!1,value:t})};ln.prototype.stream=function(){if(this._closing)throw new Error("parent stream is closing");var t=this._req_counter++,e=this;return this._outstreams[t]=new zl(t,this,function(){delete e._outstreams[t]}),this._outstreams[t]};ln.prototype.close=function(t){if(!t)throw new Error("packet-stream.close *must* have callback");if(this._closed)return t();this._closecbs.push(t),this._closing=!0,this._maybedone()};ln.prototype.destroy=function(t){t=t||Gl(t),this.ended=t,this._closing=!0;var e=t===!0?new Error("unexpected end of parent stream"):t,r=0;for(var n in this._requests)r++,this._requests[n](e);for(var n in this._instreams)r++,this._instreams[n].writeEnd=!0,this._instreams[n].destroy(e);for(var n in this._outstreams)r++,this._outstreams[n].writeEnd=!0,this._outstreams[n].destroy(e);r===0&&t===!0&&(e=null),this._maybedone(e)};ln.prototype._maybedone=function(t){this._closed||!this._closing||Object.keys(this._requests).length!==0||Object.keys(this._instreams).length!==0||Object.keys(this._outstreams).length!==0||(this._closed=!0,this._closecbs.forEach(function(e){e(t)}),this.read(null,t||!0),this.opts=null,this._closecbs.length=0,this.read=DT)};function DT(t){console.error("packet-stream asked to read after closed",t)}ln.prototype.read=function(t){console.error("please overwrite read method to do IO",t)};ln.prototype.write=function(t,e){this.ended||(e?this.destroy(e):t.req&&!t.stream?this._onrequest(t):t.req&&t.stream?this._onstream(t):this._onmessage(t))};ln.prototype._onmessage=function(t){this.opts&&typeof this.opts.message=="function"&&this.opts.message(t.value)};ln.prototype._onrequest=function(t){var e=t.req*-1;if(t.req<0)typeof this._requests[e]=="function"&&this._requests[e](t.end?t.value:null,t.end?null:t.value);else if(this.opts&&typeof this.opts.request=="function"){var r=!1,n=this;this.opts.request(t.value,function(o,s){if(r)throw new Error("cb called twice from local api");r=!0,o?n.read({value:Gl(o),end:!0,req:e}):n.read({value:s,end:!1,req:e}),n._maybedone()})}else{if(this.ended){var i=this.ended===!0?new Error("unexpected end of parent stream"):this.ended;this.read({value:Gl(i),end:!0,stream:!1,req:e})}else this.read({value:{message:"Unable to handle requests",name:"NO_REQUEST_HANDLER",stack:null},end:!0,stream:!1,req:e});this._maybedone()}};ln.prototype._onstream=function(t){if(t.req<0){var e=t.req*-1,r=this._outstreams[e];if(!r)return console.error("no stream for incoming msg",t);t.end?(r.writeEnd&&delete this._outstreams[e],r.readEnd=!0,r.read(null,t.value),this._maybedone()):r.read(t.value)}else{var e=t.req,n=this._instreams[e];if(!n){var i=this;n=this._instreams[e]=new zl(e*-1,this,function(){delete i._instreams[e]}),this.opts&&typeof this.opts.stream=="function"&&this.opts.stream(n)}t.end?(n.writeEnd&&delete this._instreams[e],n.readEnd=!0,n.read&&n.read(null,t.value),this._maybedone()):n.read?n.read(t.value):console.error("no .read for stream:",n.id,"dropped:",t)}};function zl(t,e,r){this.id=t,this.read=null,this.writeEnd=null,this.readEnd=null,this._ps=e,this._remove=r,this._seq_counter=1}zl.prototype.write=function(t,e){if(e){this.writeEnd=e;var r=this._ps;r&&(r.read({req:this.id,stream:!0,end:!0,value:Gl(e)}),this.readEnd&&this.destroy(e),r._maybedone(e))}else this._ps&&this._ps.read({req:this.id,stream:!0,end:!1,value:t})};zl.prototype.end=function(t){this.write(null,Gl(t||!0))};zl.prototype.destroy=function(t){if(this.writeEnd){if(!this.readEnd){this.readEnd=!0;try{this.read&&this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}}else{if(this.writeEnd=!0,!this.readEnd){this.readEnd=!0;try{this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}this.write(null,t)}this._ps&&(this._remove(),this._remove=null,this.read=DT,this._ps=null)}});var LT=I((Ipe,Kl)=>{"use strict";var M6=kp();function q6(t){let e=!1;return(r,n)=>{e||(e=!0,t(r,n))}}function _w(t,e){let r=[],n=!1,i=!1,o,s,a=q6((c,l)=>{e&&e(c,l),t=null,e=null,o=null,s&&s(c||!0,()=>{})});return t.read=function(c,l){if(n=n||l,o){let u=o;o=null,u(n,c)}else!n&&!i&&r.push(c);n&&a(n!==!0?n:null)},{source(c,l){c?(t&&t.write(null,c),l(c),r.length=0,i=!0,a(c!==!0?c:null)):r.length?l(null,r.shift()):n?l(n):o=l},sink(c){if(n)return s=null,c(n,()=>{});s=c,M6.drain(l=>{if(n)return!1;t.write(l)},l=>{t&&!t.writeEnd&&t.write(null,l||!0),a&&a(l)})(c)}}}function NT(t,e){return _w(t,r=>{t.writeEnd||t.write(null,r||!0),e&&e(r)})}function $6(t){return NT(t).source}function j6(t,e){return NT(t,e).sink}Kl.exports=_w;Kl.exports.source=$6;Kl.exports.sink=j6;Kl.exports.duplex=_w});var MT=I((Tpe,FT)=>{FT.exports=function(e){var r,n,i;function o(s){return function(a,c){s(a,function(l,u){if(l&&!i)return i=!0,c(null,e);l&&r?c(l):l?n=c:c(null,u)})}}return o.end=function(){return r=!0,n&&n(r),o},o}});var Sw=I((Ape,qT)=>{qT.exports=function(e,r,n){e(r),n&&n(r===!0?null:r)}});var Ap=I((Dpe,jT)=>{"use strict";var $T=Sw();jT.exports=function(e,r){if(!e)return function(i,o){return i?$T(o,i,r):o(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(i){return e[i]}));var n=0;return function(i,o){if(i)return $T(o,i,r);n>=e.length?o(!0):o(null,e[n++])}}});var BT=I((Rpe,UT)=>{"use strict";var U6=Ap();UT.exports=function(t){return U6(Object.keys(t))}});var xw=I((Ope,HT)=>{"use strict";var B6=Sw();HT.exports=function(e,r){return function(n,i){if(n)return B6(i,n,r);if(e!=null){var o=e;e=null,i(null,o)}else i(!0)}}});var WT=I((Npe,VT)=>{"use strict";VT.exports=function(e){var r=0;return e=e||1/0,function(n,i){if(n)return i&&i(n);if(r>e)return i(!0);i(null,r++)}}});var zT=I((Lpe,GT)=>{"use strict";GT.exports=function(e){return e=e||Math.random,function(r,n){return r?n&&n(r):n(null,e())}}});var YT=I((Fpe,KT)=>{"use strict";KT.exports=function(){return function(e,r){r(!0)}}});var QT=I((Mpe,JT)=>{"use strict";JT.exports=function(e){return function(r,n){n(e)}}});var ZT=I((qpe,XT)=>{"use strict";XT.exports={keys:BT(),once:xw(),values:Ap(),count:WT(),infinite:zT(),empty:YT(),error:QT()}});var Xa=I(($pe,eA)=>{"use strict";eA.exports=function(e,r){var n,i;function o(s){if(n=s,i)return o.abort();(function a(){for(var c=!0,l=!1;c;)if(l=!1,n(null,function(u,d){if(l=!0,u=u||i){if(c=!1,r)r(u===!0?null:u);else if(u&&u!==!0)throw u}else e&&e(d)===!1||i?(c=!1,n(i||!0,r||function(){})):c||a()}),!l){c=!1;return}})()}return o.abort=function(s,a){if(typeof s=="function"&&(a=s,s=!0),i=s||!0,n)return n(i,a||function(){})},o}});var rA=I((jpe,tA)=>{"use strict";var H6=Xa();tA.exports=function(e){return H6(null,e)}});var iA=I((Upe,nA)=>{"use strict";var V6=Xa();nA.exports=function(e){return V6(function(r){console.log(r)},e)}});var Za=I((Bpe,oA)=>{oA.exports=function(e){return e&&(typeof e=="string"?function(r){return r[e]}:typeof e=="object"&&typeof e.exec=="function"?function(r){var n=e.exec(r);return n&&n[0]}:e)}});var cA=I((Hpe,aA)=>{"use strict";function sA(t){return t}var W6=Za(),G6=Xa();aA.exports=function(e,r){var n=!1;return r?e=W6(e)||sA:(r=e,e=sA),G6(function(i){if(e(i))return n=!0,r(null,i),!1},function(i){n||r(i===!0?null:i,null)})}});var Dp=I((Vpe,lA)=>{"use strict";var z6=Xa();lA.exports=function(e,r,n){n||(n=r,r=null);var i=z6(function(o){r=e(r,o)},function(o){n(o,r)});return arguments.length===2?function(o){o(null,function(s,a){if(s)return n(s===!0?null:s);r=a,i(o)})}:i}});var dA=I((Wpe,uA)=>{"use strict";var K6=Dp();uA.exports=function(e){return K6(function(r,n){return r.push(n),r},[],e)}});var pA=I((Gpe,fA)=>{"use strict";var Y6=Dp();fA.exports=function(e){return Y6(function(r,n){return r+n},"",e)}});var mA=I((zpe,hA)=>{"use strict";hA.exports={drain:Xa(),onEnd:rA(),log:iA(),find:cA(),reduce:Dp(),collect:dA(),concat:pA()}});var vA=I((Kpe,gA)=>{"use strict";function J6(t){return t}var Q6=Za();gA.exports=function(e){return e?(e=Q6(e),function(r){return function(n,i){r(n,function(o,s){try{s=o?null:e(s)}catch(a){return r(a,function(){return i(a)})}i(o,s)})}}):J6}});var wA=I((Ype,yA)=>{"use strict";function X6(t){return t}var Z6=Za();yA.exports=function(e){if(!e)return X6;e=Z6(e);var r=!1,n,i;return function(o){return function s(a,c){if(i)return c(i);a?(i=a,r?o(a,function(){r?n=c:c(a)}):o(a,c)):o(null,function(l,u){l?c(l):i?c(i):(r=!0,e(u,function(d,f){r=!1,i?(c(i),n(i)):d?s(d,c):c(null,f)}))})}}}});var Pw=I((Jpe,CA)=>{var e9=Za();function t9(t){return t}CA.exports=function(e){return typeof e=="object"&&typeof e.test=="function"?function(r){return e.test(r)}:e9(e)||t9}});var Rp=I((Qpe,bA)=>{"use strict";var r9=Pw();bA.exports=function(e){return e=r9(e),function(r){return function n(i,o){for(var s,a=!0;a;)a=!1,s=!0,r(i,function(c,l){if(!c&&!e(l))return s?a=!0:n(c,o);o(c,l)}),s=!1}}}});var _A=I((Xpe,EA)=>{"use strict";var n9=Pw(),i9=Rp();EA.exports=function(e){return e=n9(e),i9(function(r){return!e(r)})}});var xA=I((Zpe,SA)=>{"use strict";SA.exports=function(e,r){var n=!1;function i(o){n||!r||(n=!0,r(o===!0?null:o))}return function(o){return function(s,a){return s&&i(s),o(s,function(c,l){c?i(c):e&&e(l),a(c,l)})}}}});var kA=I((ehe,PA)=>{"use strict";PA.exports=function(e,r){r=r||{};var n=r.last||!1,i=!1;if(typeof e=="number"){n=!0;var o=e;e=function(){return--o}}return function(s){function a(c){s(!0,function(l){n=!1,c(l||!0)})}return function(c,l){i?n?a(l):l(i):(i=c)?s(i,l):s(null,function(u,d){(i=i||u)?l(i):e(d)?l(null,d):(i=!0,n?l(null,d):a(l))})}}}});var kw=I((the,IA)=>{"use strict";function o9(t){return t}var s9=Za(),a9=Rp();IA.exports=function(e,r){e=s9(e)||o9;var n={};return a9(function(i){var o=e(i);return n[o]?!!r:(n[o]=!0,!r)})}});var AA=I((rhe,TA)=>{"use strict";var c9=kw();TA.exports=function(e){return c9(e,!0)}});var RA=I((nhe,DA)=>{"use strict";var l9=Ap(),u9=xw();DA.exports=function(){return function(e){var r;return function(n,i){n?r?r(n,function(a){e(a||n,i)}):e(n,i):r?o():s();function o(){r(null,function(a,c){a===!0?s():a?e(!0,function(l){i(a)}):i(null,c)})}function s(){r=null,e(null,function(a,c){if(a)return i(a);Array.isArray(c)||c&&typeof c=="object"?c=l9(c):typeof c!="function"&&(c=u9(c)),r=c,o()})}}}}});var NA=I((ihe,OA)=>{"use strict";OA.exports={map:vA(),asyncMap:wA(),filter:Rp(),filterNot:_A(),through:xA(),take:kA(),unique:kw(),nonUnique:AA(),flatten:RA()}});var FA=I((ohe,LA)=>{"use strict";LA.exports=function t(e){var r=arguments.length;if(typeof e=="function"&&e.length===1){for(var n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var o=e;o&&typeof o.source=="function"&&(o=o.source);for(var i=1;i<r;i++){var s=arguments[i];typeof s=="function"?o=s(o):s&&typeof s=="object"&&(s.sink(o),o=s.source)}return o}});var UA=I((Yl,jA)=>{"use strict";var MA=ZT(),qA=mA(),$A=NA();Yl=jA.exports=FA();for(On in MA)Yl[On]=MA[On];var On;for(On in $A)Yl[On]=$A[On];var On;for(On in qA)Yl[On]=qA[On];var On});var HA=I((she,BA)=>{var d9=MT(),Iw=UA();BA.exports=function(t,e){e=e||"GOODBYE";var r=d9(e);return{source:Iw(t.source,r),sink:Iw(Iw.filter(function(n){if(n!==e)return!0;r.end()}),t.sink)}}});var Jl=I(Nn=>{"use strict";var Op=kp();function f9(t){return t?Object.keys(t).length===0:!0}Nn.set=function(e,r,n){let i,o;for(let s=0;s<r.length;s++){let a=r[s];e[a]=e[a]||{},i=e,o=a,e=e[a]}i[o]=n};Nn.get=function(e,r){if(typeof r=="string")return e[r];let n;for(let i=0;i<r.length;i++){let o=r[i];if(n=e=e[o],e==null)return e}return n};Nn.prefix=function(e,r){let n;for(let i=0;i<r.length;i++){let o=r[i];if(n=e=e[o],typeof e!="object")return e}return typeof n!="object"?!!n:!1};function p9(t,e){for(let r in e){let n=e[r];t[n]||(t[n]={}),t=t[n]}return t}function h9(t,e){(function r(n,i){let o=e[i];if(n)e.length-1===i?delete n[o]:i<e.length&&r(n[o],i+1);else return;f9(n[o])&&delete n[o]})(t,0)}function m9(t,e){for(let r in e)t[r]=e[r];return t}Nn.mount=function(e,r,n){if(!Array.isArray(r))throw new Error("path must be array of strings");return m9(p9(e,r),n)};Nn.unmount=function(e,r){return h9(e,r)};var Np=t=>t==="source",Lp=t=>t==="sink",VA=t=>t==="duplex",g9=t=>t==="sync",v9=t=>t==="async",WA=t=>g9(t)||v9(t),y9=t=>Np(t)||Lp(t)||VA(t);Nn.isRequest=WA;Nn.isStream=y9;function Tw(t){return function(e){e(t||!0,()=>{})}}function GA(t){return{source:Op.error(t),sink:Tw(t)}}Nn.errorAsStream=function(e,r){return Np(e)?Op.error(r):Lp(e)?Tw(r):GA(r)};Nn.errorAsStreamOrCb=function(e,r,n){return WA(e)?n(r):Np(e)?Op.error(r):Lp(e)?Tw(r):n(r),GA(r)};Nn.pipeToStream=function(e,r,n){Np(e)?r(n):Lp(e)?n(r):VA(e)&&Op(r,n,r)}});var Aw=I((lhe,KA)=>{function zA(t){if(t.stack&&t.name&&t.message)return t.stack.substring(t.name.length+3+t.message.length).split(`
`);if(t.stack)return t.stack.split(`
`)}function w9(t,e){return t.filter(function(r){return!~e.indexOf(r)})}var che=KA.exports=function(t,e){if(!(t.stack&&t.name&&t.message))return console.error(new Error("stackless error")),t;var r=new Error(e),n=w9(zA(r).slice(1),zA(t)).join(`
`);return r.__proto__=t,r.stack=r.name+": "+r.message+`
`+n+`
  `+t.stack,r}});var QA=I((uhe,JA)=>{"use strict";var C9=OT(),Dw=LT(),b9=HA(),ec=Jl(),YA=Aw();JA.exports=function(e,r,n){let i=C9({message(){},request(s,a){if(!Array.isArray(s.args))return a(new Error(`invalid request, args should be array, was: ${JSON.stringify(s)}`));let c=s.name,l=s.args,u=!1,d=!1;l.push((f,p)=>{d=!0,u=!0,a(f,p)});try{e("async",c,l)}catch(f){if(u||d)throw YA(f,"no callback provided to muxrpc async funtion");a(f)}},stream(s){s.read=function(c,l){if(l)return s.write(null,l);let{name:u,type:d,args:f}=c,p,h;if(s.read=null,!ec.isStream(d))return s.write(null,new Error(`unsupported stream type: ${d}`));try{h=e(d,u,f)}catch(v){p=v}let g=Dw[d==="source"?"sink":d==="sink"?"source":"duplex"](s);return ec.pipeToStream(d,g,p?ec.errorAsStream(d,p):h)}},close(s){if(i=null,o.ended=!0,!o.closed&&(o.closed=!0,n)){let a=n;n=null,a(s)}}}),o=b9(Dw(i,()=>{}));return o=r?r(o):o,o.remoteCall=function(s,a,c,l){if(a==="emit")return i.message(c);if(!(ec.isRequest(s)||ec.isStream(s)))throw new Error(`unsupported type: ${JSON.stringify(s)}`);if(ec.isRequest(s))return i.request({name:a,args:c},l);let u=i.stream(),d=Dw[s](u,l);return u.write({name:a,args:c,type:s}),d},o.isOpen=function(){return!i.ended},o.close=function(s,a){if(typeof s=="function"&&(a=s,s=!1),!i){a&&a();return}if(s){i.destroy(s),a&&a();return}return i.close(c=>{if(a)a(c);else if(c)throw YA(c,"no callback provided for muxrpc close")}),this},o.closed=!1,o}});var ZA=I((dhe,XA)=>{"use strict";var E9=Aw(),_9=Jl();function Rw(t,e,r,n){for(let i in e){let o=e[i],s=r?r.concat(i):[i];if(o&&typeof o=="object"){let a=o;t[i]=Rw({},a,s,n)}else{let a=o;t[i]=(...c)=>n(a,s,c)}}return t}function S9(t){if(t)throw E9(t,"callback not provided")}function x9(t,e,r,n){t=t||{};function i(o,s,a){let c=typeof a[a.length-1]=="function"?a.pop():o==="sync"||o==="async"?null:S9;if(typeof c=="function"){let l;try{l=r(o,s,a,c)}catch(u){return _9.errorAsStreamOrCb(o,u,c)}return l}else return new Promise((l,u)=>{r(o,s,a,(d,f)=>{d?u(d):l(f)})})}return n?i("async","manifest",[function(o,s){if(o)return n(o);Rw(t,s,null,i),n(null,s,t)}]):Rw(t,e,null,i),t}XA.exports=x9});var rD=I((fhe,tD)=>{"use strict";var Fp=Jl();function eD(t){return Array.isArray(t)?t:t.split(".")}function P9(t){return t&&typeof t.pre=="function"&&typeof t.test=="function"&&typeof t.post=="function"}tD.exports=function(e){if(P9(e))return e;if(typeof e=="function")return{pre:e};let r=null,n={};function i(o){if(o.allow){r={};for(let s of o.allow)Fp.set(r,eD(s),!0)}else r=null;if(o.deny)for(let s of o.deny)Fp.set(n,eD(s),!0);else n={};return this}return e&&i(e),i.pre=o=>{if(o=Array.isArray(o)?o:[o],r&&!Fp.prefix(r,o))return new Error(`method:${o} is not in list of allowed methods`);if(n&&Fp.prefix(n,o))return new Error(`method:${o} is on list of disallowed methods`)},i.post=()=>{},i.test=o=>i.pre(o),i.get=()=>({allow:r,deny:n}),i}});var iD=I((phe,nD)=>{"use strict";var k9=rD(),Ow=Jl();nD.exports=function(e,r,n){n=k9(n);function i(s,a){return s===Ow.get(r,a)}function o(s,a,c){if(a==="emit")throw new Error("emit has been removed");if(s==="async"&&i("sync",a)){let l=c.pop(),u;try{u=Ow.get(e,a).apply(this,c)}catch(d){return l(d)}return l(null,u)}if(!i(s,a))throw new Error(`no ${s}:${a}`);return Ow.get(e,a).apply(this,c)}return function(a,c,l){let u=n.pre(c,l);if(u)throw u;return o.call(this,a,c,l)}}});var aD=I((hhe,sD)=>{"use strict";var I9=AT(),T9=require("events").EventEmitter,A9=QA(),D9=ZA(),R9=iD();function oD(t,e,r,n,i,o,s){let a;typeof t=="function"&&(a=t,t={}),e=e||{},t=t||{};let c=new T9;o||(o=I9);let l,u={_emit(f,p){return c&&c._emit(f,p),u},id:n},d=A9(R9(r,e,i).bind(u),o,f=>{if(!c.closed&&(c.closed=!0,c.emit("closed"),l)){let p=l;l=null,p(f)}});if(D9(c,t,(f,p,h,m)=>{if(d.closed)throw new Error("stream is closed");return d.remoteCall(f,p,h,m)},a),c._emit=c.emit,s){Object.__defineGetter__.call(c,"id",()=>u.id),Object.__defineSetter__.call(c,"id",p=>{u.id=p});let f=!0;c.createStream=p=>{if(l=p,f)return f=!1,d;throw new Error("one stream per rpc")}}else c.stream=d;return c.closed=!1,c.close=function(f,p){return d.close(f,p),this},c}sD.exports=function(t,e,r){return arguments.length>3?oD.apply(this,arguments):function(n,i,o){return oD(t,e,n,o,i,r,!0)}}});var Nw=I((Oi,uD)=>{var mhe=fw(),O9=Ew();function cD(t){t.destroy?t.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function lD(t,e,r){var n,i=!1,o;function s(){o||(o=!0,r&&r(n===!0?null:n))}function a(){i||(i=!0,l(),n?s():t(n=!0,s))}function c(u){l(),n||t(n=u,s)}function l(){e.on("finish",a),e.removeListener("close",a),e.removeListener("error",c)}e.on("close",a),e.on("finish",a),e.on("error",c),process.nextTick(function(){O9(function(u){t(null,function(d,f){if(n=n||d,d===!0)return e._isStdio?s():e.end();if(n=n||d)return cD(e),s(n);if(e._isStdio)e.write(f,function(){u()});else{var p=e.write(f);p===!1?e.once("drain",u):u()}})})})}function N9(t){var e=!1,r=!1,n;function i(){var o=t.read();if(o!==null&&n){var s=n;n=null,s(null,o)}}return t.on("readable",function(){r=!0,n&&i()}).on("end",function(){e=!0,n&&n(e)}).on("error",function(o){e=o,n&&n(e)}),function(o,s){n=s,e?s(e):r&&i()}}function Mp(t){var e=[],r=[],n,i=!1,o;function s(){for(;(e.length||n)&&r.length;)r.shift()(e.length?null:n,e.shift());!e.length&&i&&(i=!1,t.resume())}return t.on("data",function(a){e.push(a),s(),e.length&&t.pause&&(i=!0,t.pause())}),t.on("end",function(){n=!0,s()}),t.on("close",function(){n=!0,s()}),t.on("error",function(a){n=a,s()}),function(a,c){if(!c)throw new Error("*must* provide cb");if(a){let u=function(){for(;r.length;)r.shift()(a);c(a)};var l=u;if(n)return u();t.once("close",u),cD(t)}else r.push(c),s()}}var L9=Mp,qp=function(t,e){return function(r){return lD(r,t,e)}},$p=function(t){return Mp(t)};Oi=uD.exports=function(t,e){return t.writable&&t.write?t.readable?function(r){return lD(r,t,e),Mp(t)}:qp(t,e):$p(t)};Oi.sink=qp;Oi.source=$p;Oi.read=L9;Oi.read1=Mp;Oi.read2=N9;Oi.duplex=function(t,e){return{source:$p(t),sink:qp(t,e)}};Oi.transform=function(t){return function(e){var r=$p(t);return qp(t)(e),r}}});var fD=I((ghe,jp)=>{var F9=require("stream");jp.exports=Lw;jp.exports.source=function(t){return Lw(null,t)};jp.exports.sink=function(t){return Lw(t,null)};var dD=typeof setImmediate=="undefined"?process.nextTick:setImmediate;function Lw(t,e){t&&typeof t=="object"&&(e=t.source,t=t.sink);var r=[],n=[],i,o,s=new F9;s.writable=s.readable=!0,s.write=function(g){return r.length?r.shift()(null,g):n.push(g),r.length||(o=!0),!!r.length},s.end=function(){e?n.length?m():e(i=!0,r.length?r.shift():function(){}):r.length&&r.shift()(!0)},s.source=function(g,v){n.length?(v(null,n.shift()),n.length||s.emit("drain")):((i=i||g)?v(i):r.push(v),o&&(o=!1,s.emit("drain")))};var a;t&&(a=t(s.source)),a&&!e&&(e=a);var c=[],l=[],u=!1,d=!1,f=!1;if(s.sink=function(g){e=g,dD(m)},e){s.sink(e),s.paused=!0;var p=s.on.bind(s);s.on=(g,v)=>{var w=p(g,v);return g==="data"&&s.paused&&dD(s.resume.bind(s)),w};var h=s.pipe.bind(s);s.pipe=function(g,v){var w=h(g,v);return s.paused&&s.resume(),w}}function m(){if(d=!1,!(!e||f)){for(;c.length&&!s.paused;)s.emit("data",c.shift());if(!s.paused){if(u)return s.emit("end");f=!0,e(null,function g(v,w){f=!1,s.paused?(v===!0?u=v:v?s.emit("error",v):c.push(w),d=!0):v&&(i=v)!==!0?s.emit("error",v):(i=i||v)?s.emit("end"):(s.emit("data",w),f=!0,e(null,g))})}}}return s.pause=function(){return s.paused=!0,s},s.resume=function(){return s.paused=!1,m(),s},s.destroy=function(){!i&&e&&e(i=!0,function(){}),i=!0,r.length&&r.shift()(!0),s.emit("close")},s}});var hD=I((vhe,pD)=>{pD.exports=M9;function M9(t,e){typeof t=="function"&&(e=t,t=!1);var r=[],n,i;function o(d,f){d&&(n=d,i&&u(n)),i=f,l()}var s;function a(d){s=s||d||!0,l()}function c(d){if(!s){if(i){u(n,d);return}r.push(d)}}if(t)return{push:c,end:a,source:o,buffer:r};return o.push=c,o.end=a,o.buffer=r,o;function l(){!i||(n?u(n):!r.length&&s?u(s):r.length&&u(null,r.shift()))}function u(d,f){var p=i;if(d&&e){var h=e;e=null,h(d===!0?null:d)}i=null,p(d,f)}}});var Qw=I((Vme,UD)=>{"use strict";var $D=require("child_process"),oK=1024*1024,jD={exec(t,e){$D.exec(t,{maxBuffer:2*oK,windowsHide:!0},e)},spawn(t,e,r){return $D.spawn(t,e,r)},stripLine(t,e){let r=0;for(;e-- >0;){let n=t.indexOf(`
`,r);n>=0&&(r=n+1)}return r>0?t.substring(r):t},split(t,e){let r=t.trim().split(/\s+/);return r.length>e&&(r[e-1]=r.slice(e-1).join(" ")),r},extractColumns(t,e,r){let n=t.split(/(\r\n|\n|\r)/),i=[];return r||(r=Math.max.apply(null,e)+1),n.forEach(o=>{let s=jD.split(o,r),a=[];e.forEach(c=>{a.push(s[c]||"")}),i.push(a)}),i},parseTable(t){let e=t.split(/(\r\n\r\n|\r\n\n|\n\r\n)|\n\n/).filter(r=>r.trim().length>0).map(r=>r.split(/(\r\n|\n|\r)/).filter(n=>n.trim().length>0));return e.forEach(r=>{for(let n=0;r[n];){let i=r[n];i.startsWith(" ")?(r[n-1]+=i.trimLeft(),r.splice(n,1)):n+=1}}),e.map(r=>{let n={};return r.forEach(i=>{let o=i.indexOf(":"),s=i.slice(0,o).trim();n[s]=i.slice(o+1).trim()}),n})}};UD.exports=jD});var HD=I((Wme,BD)=>{"use strict";var sK=require("os"),eh=require("fs"),fn=Qw(),aK=t=>new Promise((e,r)=>{eh.existsSync(t)?e():eh.mkdir(t,n=>{n?r(n):e()})}),Xw={darwin(t){return new Promise((e,r)=>{fn.exec("netstat -anv -p TCP && netstat -anv -p UDP",function(n,i,o){if(n)r(n);else{if(n=o.toString().trim(),n){r(n);return}let s=fn.stripLine(i.toString(),2),a=fn.extractColumns(s,[0,3,8],10).filter(c=>!!String(c[0]).match(/^(udp|tcp)/)).find(c=>{let l=String(c[1]).match(/\.(\d+)$/);if(l&&l[1]===String(t))return!0});a&&a[2].length?e(parseInt(a[2],10)):r(new Error(`pid of port (${t}) not found`))}})})},freebsd:"darwin",sunos:"darwin",linux(t){return new Promise((e,r)=>{let n="netstat -tunlp";fn.exec(n,function(i,o,s){if(i)r(i);else{let a=s.toString().trim();a&&console.warn(a);let c=fn.stripLine(o.toString(),2),l=fn.extractColumns(c,[3,6],7).find(u=>{let d=String(u[0]).match(/:(\d+)$/);if(d&&d[1]===String(t))return!0});if(l&&l[1]){let u=l[1].split("/",1)[0];u.length?e(parseInt(u,10)):r(new Error(`pid of port (${t}) not found`))}else r(new Error(`pid of port (${t}) not found`))}})})},win32(t){return new Promise((e,r)=>{fn.exec("netstat -ano",function(n,i,o){if(n)r(n);else{if(n=o.toString().trim(),n){r(n);return}let s=fn.stripLine(i.toString(),4),a=fn.extractColumns(s,[1,4],5).find(c=>{let l=String(c[0]).match(/:(\d+)$/);if(l&&l[1]===String(t))return!0});a&&a[1].length&&parseInt(a[1],10)>0?e(parseInt(a[1],10)):r(new Error(`pid of port (${t}) not found`))}})})},android(t){return new Promise((e,r)=>{let n=sK.tmpdir()+"/.find-process",i=n+"/"+process.pid,o='netstat -tunp >> "'+i+'"';aK(n).then(()=>{fn.exec(o,()=>{eh.readFile(i,"utf8",(s,a)=>{if(eh.unlink(i,()=>{}),s)r(s);else{a=fn.stripLine(a,2);let c=fn.extractColumns(a,[3,6],7).find(l=>{let u=String(l[0]).match(/:(\d+)$/);if(u&&u[1]===String(t))return!0});if(c&&c[1]){let l=c[1].split("/",1)[0];l.length?e(parseInt(l,10)):r(new Error(`pid of port (${t}) not found`))}else r(new Error(`pid of port (${t}) not found`))}})})})})}};function cK(t){let e=process.platform;return new Promise((r,n)=>{if(!(e in Xw))return n(new Error(`platform ${e} is unsupported`));let i=Xw[e];typeof i=="string"&&(i=Xw[i]),i(t).then(r,n)})}BD.exports=cK});var zD=I((Gme,GD)=>{"use strict";var th=require("path"),xo=Qw();function Zw(t,e){return e?t&&t.match?t.match(e):!1:!0}function VD(t){let e=t.split(th.sep),r=e[e.length-1];r&&(e[e.length-1]=r.split(" ")[0]);let n=[];for(let i of e){let o=i.indexOf(" -");if(o>=0){n.push(i.substring(0,o).trim());break}else if(i.endsWith(" ")){n.push(i.trim());break}n.push(i)}return n.join(th.sep)}function WD(t){if(process.platform==="darwin"){let e=t.indexOf(".app/");if(e>=0)return th.basename(t.substring(0,e))}return th.basename(t)}var eC={darwin(t){return new Promise((e,r)=>{let n;"pid"in t?n=`ps -p ${t.pid} -ww -o pid,ppid,uid,gid,args`:n="ps ax -ww -o pid,ppid,uid,gid,args",xo.exec(n,function(i,o,s){if(i)"pid"in t?e([]):r(i);else{if(i=s.toString().trim(),i){r(i);return}let a=xo.stripLine(o.toString(),1),l=xo.extractColumns(a,[0,1,2,3,4],5).filter(u=>u[0]&&t.pid?u[0]===String(t.pid):u[4]&&t.name?Zw(u[4],t.name):!!u[0]).map(u=>{let d=String(u[4]),f=VD(d);return{pid:parseInt(u[0],10),ppid:parseInt(u[1],10),uid:parseInt(u[2],10),gid:parseInt(u[3],10),name:WD(f),bin:f,cmd:u[4]}});t.strict&&t.name&&(l=l.filter(u=>u.name===t.name)),e(l)}})})},linux:"darwin",sunos:"darwin",freebsd:"darwin",win32(t){return new Promise((e,r)=>{let n="Get-CimInstance -className win32_process | select Name,ProcessId,ParentProcessId,CommandLine,ExecutablePath",i=[],o=xo.spawn("powershell.exe",["/c",n],{detached:!1,windowsHide:!0});o.stdout.on("data",s=>{i.push(s.toString())}),o.on("close",s=>{if(s!==0)return r(new Error("Command '"+n+"' terminated with code: "+s));let a=xo.parseTable(i.join("")).filter(c=>{if("pid"in t)return c.ProcessId===String(t.pid);if(t.name){let l=c.Name||"";return t.strict?l===t.name||l.endsWith(".exe")&&l.slice(0,-4)===t.name:Zw(c.CommandLine||l,t.name)}else return!0}).map(c=>({pid:parseInt(c.ProcessId,10),ppid:parseInt(c.ParentProcessId,10),bin:c.ExecutablePath,name:c.Name||"",cmd:c.CommandLine}));e(a)})})},android(t){return new Promise((e,r)=>{let n="ps";xo.exec(n,function(i,o,s){if(i)"pid"in t?e([]):r(i);else{if(i=s.toString().trim(),i){r(i);return}let a=xo.stripLine(o.toString(),1),l=xo.extractColumns(a,[0,3],4).filter(u=>u[0]&&t.pid?u[0]===String(t.pid):u[1]&&t.name?Zw(u[1],t.name):!!u[0]).map(u=>{let d=String(u[1]),f=VD(d);return{pid:parseInt(u[0],10),name:WD(f),bin:f,cmd:d}});t.strict&&t.name&&(l=l.filter(u=>u.name===t.name)),e(l)}})})}};function lK(t){let e=process.platform;return new Promise((r,n)=>{if(!(e in eC))return n(new Error(`platform ${e} is unsupported`));let i=eC[e];typeof i=="string"&&(i=eC[i]),i(t).then(r,n)})}GD.exports=lK});var JD=I((zme,YD)=>{"use strict";var uK=HD(),KD=zD(),tC={port(t,e){return uK(t,e).then(r=>tC.pid(r,e),()=>[])},pid(t,e){return KD({pid:t,strict:e})},name(t,e){return KD({name:t,strict:e})}};function dK(t,e,r){return new Promise((n,i)=>{if(!(t in tC))i(new Error(`do not support find by "${t}"`));else{let o=/^\d+$/.test(e);t==="pid"&&!o?i(new Error("pid must be a number")):t==="port"&&!o?i(new Error("port must be a number")):tC[t](e,r).then(n,i)}})}YD.exports=dK});var XD=I((Kme,QD)=>{"use strict";QD.exports=JD()});var wu=I((Tve,DO)=>{var gY="2.0.0",vY=256,yY=Number.MAX_SAFE_INTEGER||9007199254740991,wY=16;DO.exports={SEMVER_SPEC_VERSION:gY,MAX_LENGTH:vY,MAX_SAFE_INTEGER:yY,MAX_SAFE_COMPONENT_LENGTH:wY}});var Cu=I((Ave,RO)=>{var CY=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};RO.exports=CY});var zs=I((Ro,OO)=>{var{MAX_SAFE_COMPONENT_LENGTH:FC}=wu(),bY=Cu();Ro=OO.exports={};var EY=Ro.re=[],ue=Ro.src=[],de=Ro.t={},_Y=0,Ae=(t,e,r)=>{let n=_Y++;bY(n,e),de[t]=n,ue[n]=e,EY[n]=new RegExp(e,r?"g":void 0)};Ae("NUMERICIDENTIFIER","0|[1-9]\\d*");Ae("NUMERICIDENTIFIERLOOSE","[0-9]+");Ae("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");Ae("MAINVERSION",`(${ue[de.NUMERICIDENTIFIER]})\\.(${ue[de.NUMERICIDENTIFIER]})\\.(${ue[de.NUMERICIDENTIFIER]})`);Ae("MAINVERSIONLOOSE",`(${ue[de.NUMERICIDENTIFIERLOOSE]})\\.(${ue[de.NUMERICIDENTIFIERLOOSE]})\\.(${ue[de.NUMERICIDENTIFIERLOOSE]})`);Ae("PRERELEASEIDENTIFIER",`(?:${ue[de.NUMERICIDENTIFIER]}|${ue[de.NONNUMERICIDENTIFIER]})`);Ae("PRERELEASEIDENTIFIERLOOSE",`(?:${ue[de.NUMERICIDENTIFIERLOOSE]}|${ue[de.NONNUMERICIDENTIFIER]})`);Ae("PRERELEASE",`(?:-(${ue[de.PRERELEASEIDENTIFIER]}(?:\\.${ue[de.PRERELEASEIDENTIFIER]})*))`);Ae("PRERELEASELOOSE",`(?:-?(${ue[de.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${ue[de.PRERELEASEIDENTIFIERLOOSE]})*))`);Ae("BUILDIDENTIFIER","[0-9A-Za-z-]+");Ae("BUILD",`(?:\\+(${ue[de.BUILDIDENTIFIER]}(?:\\.${ue[de.BUILDIDENTIFIER]})*))`);Ae("FULLPLAIN",`v?${ue[de.MAINVERSION]}${ue[de.PRERELEASE]}?${ue[de.BUILD]}?`);Ae("FULL",`^${ue[de.FULLPLAIN]}$`);Ae("LOOSEPLAIN",`[v=\\s]*${ue[de.MAINVERSIONLOOSE]}${ue[de.PRERELEASELOOSE]}?${ue[de.BUILD]}?`);Ae("LOOSE",`^${ue[de.LOOSEPLAIN]}$`);Ae("GTLT","((?:<|>)?=?)");Ae("XRANGEIDENTIFIERLOOSE",`${ue[de.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Ae("XRANGEIDENTIFIER",`${ue[de.NUMERICIDENTIFIER]}|x|X|\\*`);Ae("XRANGEPLAIN",`[v=\\s]*(${ue[de.XRANGEIDENTIFIER]})(?:\\.(${ue[de.XRANGEIDENTIFIER]})(?:\\.(${ue[de.XRANGEIDENTIFIER]})(?:${ue[de.PRERELEASE]})?${ue[de.BUILD]}?)?)?`);Ae("XRANGEPLAINLOOSE",`[v=\\s]*(${ue[de.XRANGEIDENTIFIERLOOSE]})(?:\\.(${ue[de.XRANGEIDENTIFIERLOOSE]})(?:\\.(${ue[de.XRANGEIDENTIFIERLOOSE]})(?:${ue[de.PRERELEASELOOSE]})?${ue[de.BUILD]}?)?)?`);Ae("XRANGE",`^${ue[de.GTLT]}\\s*${ue[de.XRANGEPLAIN]}$`);Ae("XRANGELOOSE",`^${ue[de.GTLT]}\\s*${ue[de.XRANGEPLAINLOOSE]}$`);Ae("COERCE",`(^|[^\\d])(\\d{1,${FC}})(?:\\.(\\d{1,${FC}}))?(?:\\.(\\d{1,${FC}}))?(?:$|[^\\d])`);Ae("COERCERTL",ue[de.COERCE],!0);Ae("LONETILDE","(?:~>?)");Ae("TILDETRIM",`(\\s*)${ue[de.LONETILDE]}\\s+`,!0);Ro.tildeTrimReplace="$1~";Ae("TILDE",`^${ue[de.LONETILDE]}${ue[de.XRANGEPLAIN]}$`);Ae("TILDELOOSE",`^${ue[de.LONETILDE]}${ue[de.XRANGEPLAINLOOSE]}$`);Ae("LONECARET","(?:\\^)");Ae("CARETTRIM",`(\\s*)${ue[de.LONECARET]}\\s+`,!0);Ro.caretTrimReplace="$1^";Ae("CARET",`^${ue[de.LONECARET]}${ue[de.XRANGEPLAIN]}$`);Ae("CARETLOOSE",`^${ue[de.LONECARET]}${ue[de.XRANGEPLAINLOOSE]}$`);Ae("COMPARATORLOOSE",`^${ue[de.GTLT]}\\s*(${ue[de.LOOSEPLAIN]})$|^$`);Ae("COMPARATOR",`^${ue[de.GTLT]}\\s*(${ue[de.FULLPLAIN]})$|^$`);Ae("COMPARATORTRIM",`(\\s*)${ue[de.GTLT]}\\s*(${ue[de.LOOSEPLAIN]}|${ue[de.XRANGEPLAIN]})`,!0);Ro.comparatorTrimReplace="$1$2$3";Ae("HYPHENRANGE",`^\\s*(${ue[de.XRANGEPLAIN]})\\s+-\\s+(${ue[de.XRANGEPLAIN]})\\s*$`);Ae("HYPHENRANGELOOSE",`^\\s*(${ue[de.XRANGEPLAINLOOSE]})\\s+-\\s+(${ue[de.XRANGEPLAINLOOSE]})\\s*$`);Ae("STAR","(<|>)?=?\\s*\\*");Ae("GTE0","^\\s*>=\\s*0.0.0\\s*$");Ae("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")});var bu=I((Dve,NO)=>{var SY=["includePrerelease","loose","rtl"],xY=t=>t?typeof t!="object"?{loose:!0}:SY.filter(e=>t[e]).reduce((e,r)=>(e[r]=!0,e),{}):{};NO.exports=xY});var Dh=I((Rve,MO)=>{var LO=/^[0-9]+$/,FO=(t,e)=>{let r=LO.test(t),n=LO.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},PY=(t,e)=>FO(e,t);MO.exports={compareIdentifiers:FO,rcompareIdentifiers:PY}});var cr=I((Ove,UO)=>{var Rh=Cu(),{MAX_LENGTH:qO,MAX_SAFE_INTEGER:Oh}=wu(),{re:$O,t:jO}=zs(),kY=bu(),{compareIdentifiers:Eu}=Dh(),hn=class{constructor(e,r){if(r=kY(r),e instanceof hn){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>qO)throw new TypeError(`version is longer than ${qO} characters`);Rh("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?$O[jO.LOOSE]:$O[jO.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Oh||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Oh||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Oh||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<Oh)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Rh("SemVer.compare",this.version,this.options,e),!(e instanceof hn)){if(typeof e=="string"&&e===this.version)return 0;e=new hn(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof hn||(e=new hn(e,this.options)),Eu(this.major,e.major)||Eu(this.minor,e.minor)||Eu(this.patch,e.patch)}comparePre(e){if(e instanceof hn||(e=new hn(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(Rh("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Eu(n,i)}while(++r)}compareBuild(e){e instanceof hn||(e=new hn(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(Rh("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Eu(n,i)}while(++r)}inc(e,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};UO.exports=hn});var Ks=I((Nve,WO)=>{var{MAX_LENGTH:IY}=wu(),{re:BO,t:HO}=zs(),VO=cr(),TY=bu(),AY=(t,e)=>{if(e=TY(e),t instanceof VO)return t;if(typeof t!="string"||t.length>IY||!(e.loose?BO[HO.LOOSE]:BO[HO.FULL]).test(t))return null;try{return new VO(t,e)}catch{return null}};WO.exports=AY});var zO=I((Lve,GO)=>{var DY=Ks(),RY=(t,e)=>{let r=DY(t,e);return r?r.version:null};GO.exports=RY});var YO=I((Fve,KO)=>{var OY=Ks(),NY=(t,e)=>{let r=OY(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};KO.exports=NY});var QO=I((Mve,JO)=>{var LY=cr(),FY=(t,e,r,n)=>{typeof r=="string"&&(n=r,r=void 0);try{return new LY(t,r).inc(e,n).version}catch{return null}};JO.exports=FY});var mn=I((qve,ZO)=>{var XO=cr(),MY=(t,e,r)=>new XO(t,r).compare(new XO(e,r));ZO.exports=MY});var Nh=I(($ve,eN)=>{var qY=mn(),$Y=(t,e,r)=>qY(t,e,r)===0;eN.exports=$Y});var nN=I((jve,rN)=>{var tN=Ks(),jY=Nh(),UY=(t,e)=>{if(jY(t,e))return null;{let r=tN(t),n=tN(e),i=r.prerelease.length||n.prerelease.length,o=i?"pre":"",s=i?"prerelease":"";for(let a in r)if((a==="major"||a==="minor"||a==="patch")&&r[a]!==n[a])return o+a;return s}};rN.exports=UY});var oN=I((Uve,iN)=>{var BY=cr(),HY=(t,e)=>new BY(t,e).major;iN.exports=HY});var aN=I((Bve,sN)=>{var VY=cr(),WY=(t,e)=>new VY(t,e).minor;sN.exports=WY});var lN=I((Hve,cN)=>{var GY=cr(),zY=(t,e)=>new GY(t,e).patch;cN.exports=zY});var dN=I((Vve,uN)=>{var KY=Ks(),YY=(t,e)=>{let r=KY(t,e);return r&&r.prerelease.length?r.prerelease:null};uN.exports=YY});var pN=I((Wve,fN)=>{var JY=mn(),QY=(t,e,r)=>JY(e,t,r);fN.exports=QY});var mN=I((Gve,hN)=>{var XY=mn(),ZY=(t,e)=>XY(t,e,!0);hN.exports=ZY});var Lh=I((zve,vN)=>{var gN=cr(),e7=(t,e,r)=>{let n=new gN(t,r),i=new gN(e,r);return n.compare(i)||n.compareBuild(i)};vN.exports=e7});var wN=I((Kve,yN)=>{var t7=Lh(),r7=(t,e)=>t.sort((r,n)=>t7(r,n,e));yN.exports=r7});var bN=I((Yve,CN)=>{var n7=Lh(),i7=(t,e)=>t.sort((r,n)=>n7(n,r,e));CN.exports=i7});var _u=I((Jve,EN)=>{var o7=mn(),s7=(t,e,r)=>o7(t,e,r)>0;EN.exports=s7});var Fh=I((Qve,_N)=>{var a7=mn(),c7=(t,e,r)=>a7(t,e,r)<0;_N.exports=c7});var MC=I((Xve,SN)=>{var l7=mn(),u7=(t,e,r)=>l7(t,e,r)!==0;SN.exports=u7});var Mh=I((Zve,xN)=>{var d7=mn(),f7=(t,e,r)=>d7(t,e,r)>=0;xN.exports=f7});var qh=I((eye,PN)=>{var p7=mn(),h7=(t,e,r)=>p7(t,e,r)<=0;PN.exports=h7});var qC=I((tye,kN)=>{var m7=Nh(),g7=MC(),v7=_u(),y7=Mh(),w7=Fh(),C7=qh(),b7=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return m7(t,r,n);case"!=":return g7(t,r,n);case">":return v7(t,r,n);case">=":return y7(t,r,n);case"<":return w7(t,r,n);case"<=":return C7(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};kN.exports=b7});var TN=I((rye,IN)=>{var E7=cr(),_7=Ks(),{re:$h,t:jh}=zs(),S7=(t,e)=>{if(t instanceof E7)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match($h[jh.COERCE]);else{let n;for(;(n=$h[jh.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),$h[jh.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;$h[jh.COERCERTL].lastIndex=-1}return r===null?null:_7(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,e)};IN.exports=S7});var FN=I((nye,LN)=>{"use strict";var x7=gl(),Ys=Symbol("max"),Ui=Symbol("length"),yc=Symbol("lengthCalculator"),Su=Symbol("allowStale"),Js=Symbol("maxAge"),Bi=Symbol("dispose"),AN=Symbol("noDisposeOnSet"),$t=Symbol("lruList"),Mn=Symbol("cache"),DN=Symbol("updateAgeOnGet"),$C=()=>1,RN=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[Ys]=e.max||1/0,n=e.length||$C;if(this[yc]=typeof n!="function"?$C:n,this[Su]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Js]=e.maxAge||0,this[Bi]=e.dispose,this[AN]=e.noDisposeOnSet||!1,this[DN]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Ys]=e||1/0,xu(this)}get max(){return this[Ys]}set allowStale(e){this[Su]=!!e}get allowStale(){return this[Su]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Js]=e,xu(this)}get maxAge(){return this[Js]}set lengthCalculator(e){typeof e!="function"&&(e=$C),e!==this[yc]&&(this[yc]=e,this[Ui]=0,this[$t].forEach(r=>{r.length=this[yc](r.value,r.key),this[Ui]+=r.length})),xu(this)}get lengthCalculator(){return this[yc]}get length(){return this[Ui]}get itemCount(){return this[$t].length}rforEach(e,r){r=r||this;for(let n=this[$t].tail;n!==null;){let i=n.prev;NN(this,e,n,r),n=i}}forEach(e,r){r=r||this;for(let n=this[$t].head;n!==null;){let i=n.next;NN(this,e,n,r),n=i}}keys(){return this[$t].toArray().map(e=>e.key)}values(){return this[$t].toArray().map(e=>e.value)}reset(){this[Bi]&&this[$t]&&this[$t].length&&this[$t].forEach(e=>this[Bi](e.key,e.value)),this[Mn]=new Map,this[$t]=new x7,this[Ui]=0}dump(){return this[$t].map(e=>Uh(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[$t]}set(e,r,n){if(n=n||this[Js],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,o=this[yc](r,e);if(this[Mn].has(e)){if(o>this[Ys])return wc(this,this[Mn].get(e)),!1;let c=this[Mn].get(e).value;return this[Bi]&&(this[AN]||this[Bi](e,c.value)),c.now=i,c.maxAge=n,c.value=r,this[Ui]+=o-c.length,c.length=o,this.get(e),xu(this),!0}let s=new ON(e,r,o,i,n);return s.length>this[Ys]?(this[Bi]&&this[Bi](e,r),!1):(this[Ui]+=s.length,this[$t].unshift(s),this[Mn].set(e,this[$t].head),xu(this),!0)}has(e){if(!this[Mn].has(e))return!1;let r=this[Mn].get(e).value;return!Uh(this,r)}get(e){return jC(this,e,!0)}peek(e){return jC(this,e,!1)}pop(){let e=this[$t].tail;return e?(wc(this,e),e.value):null}del(e){wc(this,this[Mn].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let s=o-r;s>0&&this.set(i.k,i.v,s)}}}prune(){this[Mn].forEach((e,r)=>jC(this,r,!1))}},jC=(t,e,r)=>{let n=t[Mn].get(e);if(n){let i=n.value;if(Uh(t,i)){if(wc(t,n),!t[Su])return}else r&&(t[DN]&&(n.value.now=Date.now()),t[$t].unshiftNode(n));return i.value}},Uh=(t,e)=>{if(!e||!e.maxAge&&!t[Js])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[Js]&&r>t[Js]},xu=t=>{if(t[Ui]>t[Ys])for(let e=t[$t].tail;t[Ui]>t[Ys]&&e!==null;){let r=e.prev;wc(t,e),e=r}},wc=(t,e)=>{if(e){let r=e.value;t[Bi]&&t[Bi](r.key,r.value),t[Ui]-=r.length,t[Mn].delete(r.key),t[$t].removeNode(e)}},ON=class{constructor(e,r,n,i,o){this.key=e,this.value=r,this.length=n,this.now=i,this.maxAge=o||0}},NN=(t,e,r,n)=>{let i=r.value;Uh(t,i)&&(wc(t,r),t[Su]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};LN.exports=RN});var gn=I((iye,jN)=>{var Cc=class{constructor(e,r){if(r=k7(r),e instanceof Cc)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new Cc(e.raw,r);if(e instanceof UC)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!qN(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&R7(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let n=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=MN.get(n);if(i)return i;let o=this.options.loose,s=o?lr[Kt.HYPHENRANGELOOSE]:lr[Kt.HYPHENRANGE];e=e.replace(s,B7(this.options.includePrerelease)),Ct("hyphen replace",e),e=e.replace(lr[Kt.COMPARATORTRIM],T7),Ct("comparator trim",e,lr[Kt.COMPARATORTRIM]),e=e.replace(lr[Kt.TILDETRIM],A7),e=e.replace(lr[Kt.CARETTRIM],D7),e=e.split(/\s+/).join(" ");let a=o?lr[Kt.COMPARATORLOOSE]:lr[Kt.COMPARATOR],c=e.split(" ").map(f=>O7(f,this.options)).join(" ").split(/\s+/).map(f=>U7(f,this.options)).filter(this.options.loose?f=>!!f.match(a):()=>!0).map(f=>new UC(f,this.options)),l=c.length,u=new Map;for(let f of c){if(qN(f))return[f];u.set(f.value,f)}u.size>1&&u.has("")&&u.delete("");let d=[...u.values()];return MN.set(n,d),d}intersects(e,r){if(!(e instanceof Cc))throw new TypeError("a Range is required");return this.set.some(n=>$N(n,r)&&e.set.some(i=>$N(i,r)&&n.every(o=>i.every(s=>o.intersects(s,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new I7(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(H7(this.set[r],e,this.options))return!0;return!1}};jN.exports=Cc;var P7=FN(),MN=new P7({max:1e3}),k7=bu(),UC=Pu(),Ct=Cu(),I7=cr(),{re:lr,t:Kt,comparatorTrimReplace:T7,tildeTrimReplace:A7,caretTrimReplace:D7}=zs(),qN=t=>t.value==="<0.0.0-0",R7=t=>t.value==="",$N=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},O7=(t,e)=>(Ct("comp",t,e),t=F7(t,e),Ct("caret",t),t=N7(t,e),Ct("tildes",t),t=q7(t,e),Ct("xrange",t),t=j7(t,e),Ct("stars",t),t),mr=t=>!t||t.toLowerCase()==="x"||t==="*",N7=(t,e)=>t.trim().split(/\s+/).map(r=>L7(r,e)).join(" "),L7=(t,e)=>{let r=e.loose?lr[Kt.TILDELOOSE]:lr[Kt.TILDE];return t.replace(r,(n,i,o,s,a)=>{Ct("tilde",t,n,i,o,s,a);let c;return mr(i)?c="":mr(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:mr(s)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(Ct("replaceTilde pr",a),c=`>=${i}.${o}.${s}-${a} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,Ct("tilde return",c),c})},F7=(t,e)=>t.trim().split(/\s+/).map(r=>M7(r,e)).join(" "),M7=(t,e)=>{Ct("caret",t,e);let r=e.loose?lr[Kt.CARETLOOSE]:lr[Kt.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,s,a,c)=>{Ct("caret",t,i,o,s,a,c);let l;return mr(o)?l="":mr(s)?l=`>=${o}.0.0${n} <${+o+1}.0.0-0`:mr(a)?o==="0"?l=`>=${o}.${s}.0${n} <${o}.${+s+1}.0-0`:l=`>=${o}.${s}.0${n} <${+o+1}.0.0-0`:c?(Ct("replaceCaret pr",c),o==="0"?s==="0"?l=`>=${o}.${s}.${a}-${c} <${o}.${s}.${+a+1}-0`:l=`>=${o}.${s}.${a}-${c} <${o}.${+s+1}.0-0`:l=`>=${o}.${s}.${a}-${c} <${+o+1}.0.0-0`):(Ct("no pr"),o==="0"?s==="0"?l=`>=${o}.${s}.${a}${n} <${o}.${s}.${+a+1}-0`:l=`>=${o}.${s}.${a}${n} <${o}.${+s+1}.0-0`:l=`>=${o}.${s}.${a} <${+o+1}.0.0-0`),Ct("caret return",l),l})},q7=(t,e)=>(Ct("replaceXRanges",t,e),t.split(/\s+/).map(r=>$7(r,e)).join(" ")),$7=(t,e)=>{t=t.trim();let r=e.loose?lr[Kt.XRANGELOOSE]:lr[Kt.XRANGE];return t.replace(r,(n,i,o,s,a,c)=>{Ct("xRange",t,n,i,o,s,a,c);let l=mr(o),u=l||mr(s),d=u||mr(a),f=d;return i==="="&&f&&(i=""),c=e.includePrerelease?"-0":"",l?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&f?(u&&(s=0),a=0,i===">"?(i=">=",u?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",u?o=+o+1:s=+s+1),i==="<"&&(c="-0"),n=`${i+o}.${s}.${a}${c}`):u?n=`>=${o}.0.0${c} <${+o+1}.0.0-0`:d&&(n=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),Ct("xRange return",n),n})},j7=(t,e)=>(Ct("replaceStars",t,e),t.trim().replace(lr[Kt.STAR],"")),U7=(t,e)=>(Ct("replaceGTE0",t,e),t.trim().replace(lr[e.includePrerelease?Kt.GTE0PRE:Kt.GTE0],"")),B7=t=>(e,r,n,i,o,s,a,c,l,u,d,f,p)=>(mr(n)?r="":mr(i)?r=`>=${n}.0.0${t?"-0":""}`:mr(o)?r=`>=${n}.${i}.0${t?"-0":""}`:s?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,mr(l)?c="":mr(u)?c=`<${+l+1}.0.0-0`:mr(d)?c=`<${l}.${+u+1}.0-0`:f?c=`<=${l}.${u}.${d}-${f}`:t?c=`<${l}.${u}.${+d+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),H7=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Ct(t[n].semver),t[n].semver!==UC.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var Pu=I((oye,WN)=>{var ku=Symbol("SemVer ANY"),Iu=class{static get ANY(){return ku}constructor(e,r){if(r=V7(r),e instanceof Iu){if(e.loose===!!r.loose)return e;e=e.value}HC("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===ku?this.value="":this.value=this.operator+this.semver.version,HC("comp",this)}parse(e){let r=this.options.loose?UN[BN.COMPARATORLOOSE]:UN[BN.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new HN(n[2],this.options.loose):this.semver=ku}toString(){return this.value}test(e){if(HC("Comparator.test",e,this.options.loose),this.semver===ku||e===ku)return!0;if(typeof e=="string")try{e=new HN(e,this.options)}catch{return!1}return BC(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof Iu))throw new TypeError("a Comparator is required");if((!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new VN(e.value,r).test(this.value);if(e.operator==="")return e.value===""?!0:new VN(this.value,r).test(e.semver);let n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),o=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=BC(this.semver,"<",e.semver,r)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=BC(this.semver,">",e.semver,r)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||o&&s||a||c}};WN.exports=Iu;var V7=bu(),{re:UN,t:BN}=zs(),BC=qC(),HC=Cu(),HN=cr(),VN=gn()});var Tu=I((sye,GN)=>{var W7=gn(),G7=(t,e,r)=>{try{e=new W7(e,r)}catch{return!1}return e.test(t)};GN.exports=G7});var KN=I((aye,zN)=>{var z7=gn(),K7=(t,e)=>new z7(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));zN.exports=K7});var JN=I((cye,YN)=>{var Y7=cr(),J7=gn(),Q7=(t,e,r)=>{let n=null,i=null,o=null;try{o=new J7(e,r)}catch{return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new Y7(n,r))}),n};YN.exports=Q7});var XN=I((lye,QN)=>{var X7=cr(),Z7=gn(),eJ=(t,e,r)=>{let n=null,i=null,o=null;try{o=new Z7(e,r)}catch{return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new X7(n,r))}),n};QN.exports=eJ});var tL=I((uye,eL)=>{var VC=cr(),tJ=gn(),ZN=_u(),rJ=(t,e)=>{t=new tJ(t,e);let r=new VC("0.0.0");if(t.test(r)||(r=new VC("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(s=>{let a=new VC(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||ZN(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!r||ZN(r,o))&&(r=o)}return r&&t.test(r)?r:null};eL.exports=rJ});var nL=I((dye,rL)=>{var nJ=gn(),iJ=(t,e)=>{try{return new nJ(t,e).range||"*"}catch{return null}};rL.exports=iJ});var Bh=I((fye,aL)=>{var oJ=cr(),iL=Pu(),{ANY:sJ}=iL,aJ=gn(),cJ=Tu(),oL=_u(),sL=Fh(),lJ=qh(),uJ=Mh(),dJ=(t,e,r,n)=>{t=new oJ(t,n),e=new aJ(e,n);let i,o,s,a,c;switch(r){case">":i=oL,o=lJ,s=sL,a=">",c=">=";break;case"<":i=sL,o=uJ,s=oL,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(cJ(t,e,n))return!1;for(let l=0;l<e.set.length;++l){let u=e.set[l],d=null,f=null;if(u.forEach(p=>{p.semver===sJ&&(p=new iL(">=0.0.0")),d=d||p,f=f||p,i(p.semver,d.semver,n)?d=p:s(p.semver,f.semver,n)&&(f=p)}),d.operator===a||d.operator===c||(!f.operator||f.operator===a)&&o(t,f.semver))return!1;if(f.operator===c&&s(t,f.semver))return!1}return!0};aL.exports=dJ});var lL=I((pye,cL)=>{var fJ=Bh(),pJ=(t,e,r)=>fJ(t,e,">",r);cL.exports=pJ});var dL=I((hye,uL)=>{var hJ=Bh(),mJ=(t,e,r)=>hJ(t,e,"<",r);uL.exports=mJ});var hL=I((mye,pL)=>{var fL=gn(),gJ=(t,e,r)=>(t=new fL(t,r),e=new fL(e,r),t.intersects(e));pL.exports=gJ});var gL=I((gye,mL)=>{var vJ=Tu(),yJ=mn();mL.exports=(t,e,r)=>{let n=[],i=null,o=null,s=t.sort((u,d)=>yJ(u,d,r));for(let u of s)vJ(u,e,r)?(o=u,i||(i=u)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let a=[];for(let[u,d]of n)u===d?a.push(u):!d&&u===s[0]?a.push("*"):d?u===s[0]?a.push(`<=${d}`):a.push(`${u} - ${d}`):a.push(`>=${u}`);let c=a.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e}});var bL=I((vye,CL)=>{var vL=gn(),Hh=Pu(),{ANY:WC}=Hh,Au=Tu(),GC=mn(),wJ=(t,e,r={})=>{if(t===e)return!0;t=new vL(t,r),e=new vL(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let s=CJ(i,o,r);if(n=n||s!==null,s)continue e}if(n)return!1}return!0},CJ=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===WC){if(e.length===1&&e[0].semver===WC)return!0;r.includePrerelease?t=[new Hh(">=0.0.0-0")]:t=[new Hh(">=0.0.0")]}if(e.length===1&&e[0].semver===WC){if(r.includePrerelease)return!0;e=[new Hh(">=0.0.0")]}let n=new Set,i,o;for(let p of t)p.operator===">"||p.operator===">="?i=yL(i,p,r):p.operator==="<"||p.operator==="<="?o=wL(o,p,r):n.add(p.semver);if(n.size>1)return null;let s;if(i&&o){if(s=GC(i.semver,o.semver,r),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let p of n){if(i&&!Au(p,String(i),r)||o&&!Au(p,String(o),r))return null;for(let h of e)if(!Au(p,String(h),r))return!1;return!0}let a,c,l,u,d=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,f=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&o.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let p of e){if(u=u||p.operator===">"||p.operator===">=",l=l||p.operator==="<"||p.operator==="<=",i){if(f&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===f.major&&p.semver.minor===f.minor&&p.semver.patch===f.patch&&(f=!1),p.operator===">"||p.operator===">="){if(a=yL(i,p,r),a===p&&a!==i)return!1}else if(i.operator===">="&&!Au(i.semver,String(p),r))return!1}if(o){if(d&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===d.major&&p.semver.minor===d.minor&&p.semver.patch===d.patch&&(d=!1),p.operator==="<"||p.operator==="<="){if(c=wL(o,p,r),c===p&&c!==o)return!1}else if(o.operator==="<="&&!Au(o.semver,String(p),r))return!1}if(!p.operator&&(o||i)&&s!==0)return!1}return!(i&&l&&!o&&s!==0||o&&u&&!i&&s!==0||f||d)},yL=(t,e,r)=>{if(!t)return e;let n=GC(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},wL=(t,e,r)=>{if(!t)return e;let n=GC(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};CL.exports=wJ});var _L=I((yye,EL)=>{var zC=zs();EL.exports={re:zC.re,src:zC.src,tokens:zC.t,SEMVER_SPEC_VERSION:wu().SEMVER_SPEC_VERSION,SemVer:cr(),compareIdentifiers:Dh().compareIdentifiers,rcompareIdentifiers:Dh().rcompareIdentifiers,parse:Ks(),valid:zO(),clean:YO(),inc:QO(),diff:nN(),major:oN(),minor:aN(),patch:lN(),prerelease:dN(),compare:mn(),rcompare:pN(),compareLoose:mN(),compareBuild:Lh(),sort:wN(),rsort:bN(),gt:_u(),lt:Fh(),eq:Nh(),neq:MC(),gte:Mh(),lte:qh(),cmp:qC(),coerce:TN(),Comparator:Pu(),Range:gn(),satisfies:Tu(),toComparators:KN(),maxSatisfying:JN(),minSatisfying:XN(),minVersion:tL(),validRange:nL(),outside:Bh(),gtr:lL(),ltr:dL(),intersects:hL(),simplifyRange:gL(),subset:bL()}});var hF=I((Ube,pF)=>{var XJ=Object.create,ju=Object.defineProperty,ZJ=Object.getOwnPropertyDescriptor,eQ=Object.getOwnPropertyNames,b1=Object.getOwnPropertySymbols,tQ=Object.getPrototypeOf,E1=Object.prototype.hasOwnProperty,rQ=Object.prototype.propertyIsEnumerable,_1=(t,e,r)=>e in t?ju(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Mo=(t,e)=>{for(var r in e||(e={}))E1.call(e,r)&&_1(t,r,e[r]);if(b1)for(var r of b1(e))rQ.call(e,r)&&_1(t,r,e[r]);return t},O=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),nQ=(t,e)=>{for(var r in e)ju(t,r,{get:e[r],enumerable:!0})},S1=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of eQ(e))!E1.call(t,i)&&i!==r&&ju(t,i,{get:()=>e[i],enumerable:!(n=ZJ(e,i))||n.enumerable});return t},Uu=(t,e,r)=>(r=t!=null?XJ(tQ(t)):{},S1(e||!t||!t.__esModule?ju(r,"default",{value:t,enumerable:!0}):r,t)),iQ=t=>S1(ju({},"__esModule",{value:!0}),t),Jt=O((t,e)=>{"use strict";var r=function(){function n(){}return n.info=function(i){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];n.enableDebug&&console.info(n.TAG+i,o)},n.warn=function(i){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];n.disableWarnings||console.warn(n.TAG+i,o)},n.enableDebug=!1,n.disableWarnings=!1,n.disableErrors=!1,n.TAG="ApplicationInsights:",n}();e.exports=r}),x1=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(o){for(var s,a=1,c=arguments.length;a<c;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(o[l]=s[l])}return o},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncScopeManager=t.OpenTelemetryScopeManagerWrapper=void 0;var r=Dc(),n=require("events"),i=function(){function o(){}return o.prototype.active=function(){var s=this,a=r.CorrelationContextManager.getCurrentContext();return e(e({},a),{getValue:function(c){return s._activeSymbol?c===s._activeSymbol?a:!1:(s._activeSymbol=c,a)},setValue:function(){}})},o.prototype.with=function(s,a){var c=s.parentSpanId,l=s.name,u=o._spanToContext(s,c,l);return r.CorrelationContextManager.runWithContext(u,a)()},o.prototype.bind=function(s){return typeof s=="function"?r.CorrelationContextManager.wrapCallback(s):(s instanceof n.EventEmitter&&r.CorrelationContextManager.wrapEmitter(s),s)},o.prototype.enable=function(){return r.CorrelationContextManager.enable(),this},o.prototype.disable=function(){return r.CorrelationContextManager.disable(),this},o._spanToContext=function(s,a,c){var l=a?"|"+s.spanContext().traceId+"."+a+".":s.spanContext().traceId,u=e(e({},s.spanContext()),{traceFlags:s.spanContext().traceFlags}),d=r.CorrelationContextManager.spanToContextObject(u,l,c);return d},o}();t.OpenTelemetryScopeManagerWrapper=i,t.AsyncScopeManager=new i}),oQ=O((t,e)=>{t=e.exports=Q;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var y=Array.prototype.slice.call(arguments,0);y.unshift("SEMVER"),console.log.apply(console,y)}:r=function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=16,s=t.re=[],a=t.src=[],c=0,l=c++;a[l]="0|[1-9]\\d*";var u=c++;a[u]="[0-9]+";var d=c++;a[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=c++;a[f]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var p=c++;a[p]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var h=c++;a[h]="(?:"+a[l]+"|"+a[d]+")";var m=c++;a[m]="(?:"+a[u]+"|"+a[d]+")";var g=c++;a[g]="(?:-("+a[h]+"(?:\\."+a[h]+")*))";var v=c++;a[v]="(?:-?("+a[m]+"(?:\\."+a[m]+")*))";var w=c++;a[w]="[0-9A-Za-z-]+";var b=c++;a[b]="(?:\\+("+a[w]+"(?:\\."+a[w]+")*))";var C=c++,S="v?"+a[f]+a[g]+"?"+a[b]+"?";a[C]="^"+S+"$";var P="[v=\\s]*"+a[p]+a[v]+"?"+a[b]+"?",_=c++;a[_]="^"+P+"$";var k=c++;a[k]="((?:<|>)?=?)";var T=c++;a[T]=a[u]+"|x|X|\\*";var A=c++;a[A]=a[l]+"|x|X|\\*";var M=c++;a[M]="[v=\\s]*("+a[A]+")(?:\\.("+a[A]+")(?:\\.("+a[A]+")(?:"+a[g]+")?"+a[b]+"?)?)?";var j=c++;a[j]="[v=\\s]*("+a[T]+")(?:\\.("+a[T]+")(?:\\.("+a[T]+")(?:"+a[v]+")?"+a[b]+"?)?)?";var J=c++;a[J]="^"+a[k]+"\\s*"+a[M]+"$";var Y=c++;a[Y]="^"+a[k]+"\\s*"+a[j]+"$";var oe=c++;a[oe]="(?:^|[^\\d])(\\d{1,"+o+"})(?:\\.(\\d{1,"+o+"}))?(?:\\.(\\d{1,"+o+"}))?(?:$|[^\\d])";var re=c++;a[re]="(?:~>?)";var F=c++;a[F]="(\\s*)"+a[re]+"\\s+",s[F]=new RegExp(a[F],"g");var L="$1~",q=c++;a[q]="^"+a[re]+a[M]+"$";var W=c++;a[W]="^"+a[re]+a[j]+"$";var z=c++;a[z]="(?:\\^)";var ie=c++;a[ie]="(\\s*)"+a[z]+"\\s+",s[ie]=new RegExp(a[ie],"g");var te="$1^",_e=c++;a[_e]="^"+a[z]+a[M]+"$";var ke=c++;a[ke]="^"+a[z]+a[j]+"$";var Pe=c++;a[Pe]="^"+a[k]+"\\s*("+P+")$|^$";var De=c++;a[De]="^"+a[k]+"\\s*("+S+")$|^$";var pe=c++;a[pe]="(\\s*)"+a[k]+"\\s*("+P+"|"+a[M]+")",s[pe]=new RegExp(a[pe],"g");var yt="$1$2$3",It=c++;a[It]="^\\s*("+a[M]+")\\s+-\\s+("+a[M]+")\\s*$";var ve=c++;a[ve]="^\\s*("+a[j]+")\\s+-\\s+("+a[j]+")\\s*$";var fe=c++;for(a[fe]="(<|>)?=?\\s*\\*",be=0;be<c;be++)r(be,a[be]),s[be]||(s[be]=new RegExp(a[be]));var be;t.parse=je;function je(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Q)return y;if(typeof y!="string"||y.length>n)return null;var x=E.loose?s[_]:s[C];if(!x.test(y))return null;try{return new Q(y,E)}catch{return null}}t.valid=Zo;function Zo(y,E){var x=je(y,E);return x?x.version:null}t.clean=es;function es(y,E){var x=je(y.trim().replace(/^[=v]+/,""),E);return x?x.version:null}t.SemVer=Q;function Q(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Q){if(y.loose===E.loose)return y;y=y.version}else if(typeof y!="string")throw new TypeError("Invalid Version: "+y);if(y.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof Q))return new Q(y,E);r("SemVer",y,E),this.options=E,this.loose=!!E.loose;var x=y.trim().match(E.loose?s[_]:s[C]);if(!x)throw new TypeError("Invalid Version: "+y);if(this.raw=y,this.major=+x[1],this.minor=+x[2],this.patch=+x[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");x[4]?this.prerelease=x[4].split(".").map(function(R){if(/^[0-9]+$/.test(R)){var N=+R;if(N>=0&&N<i)return N}return R}):this.prerelease=[],this.build=x[5]?x[5].split("."):[],this.format()}Q.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Q.prototype.toString=function(){return this.version},Q.prototype.compare=function(y){return r("SemVer.compare",this.version,this.options,y),y instanceof Q||(y=new Q(y,this.options)),this.compareMain(y)||this.comparePre(y)},Q.prototype.compareMain=function(y){return y instanceof Q||(y=new Q(y,this.options)),ct(this.major,y.major)||ct(this.minor,y.minor)||ct(this.patch,y.patch)},Q.prototype.comparePre=function(y){if(y instanceof Q||(y=new Q(y,this.options)),this.prerelease.length&&!y.prerelease.length)return-1;if(!this.prerelease.length&&y.prerelease.length)return 1;if(!this.prerelease.length&&!y.prerelease.length)return 0;var E=0;do{var x=this.prerelease[E],R=y.prerelease[E];if(r("prerelease compare",E,x,R),x===void 0&&R===void 0)return 0;if(R===void 0)return 1;if(x===void 0)return-1;if(x!==R)return ct(x,R)}while(++E)},Q.prototype.inc=function(y,E){switch(y){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",E);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",E);break;case"prepatch":this.prerelease.length=0,this.inc("patch",E),this.inc("pre",E);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",E),this.inc("pre",E);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var x=this.prerelease.length;--x>=0;)typeof this.prerelease[x]=="number"&&(this.prerelease[x]++,x=-2);x===-1&&this.prerelease.push(0)}E&&(this.prerelease[0]===E?isNaN(this.prerelease[1])&&(this.prerelease=[E,0]):this.prerelease=[E,0]);break;default:throw new Error("invalid increment argument: "+y)}return this.format(),this.raw=this.version,this},t.inc=ts;function ts(y,E,x,R){typeof x=="string"&&(R=x,x=void 0);try{return new Q(y,x).inc(E,R).version}catch{return null}}t.diff=rs;function rs(y,E){if(wr(y,E))return null;var x=je(y),R=je(E),N="";if(x.prerelease.length||R.prerelease.length){N="pre";var $="prerelease"}for(var H in x)if((H==="major"||H==="minor"||H==="patch")&&x[H]!==R[H])return N+H;return $}t.compareIdentifiers=ct;var Rr=/^[0-9]+$/;function ct(y,E){var x=Rr.test(y),R=Rr.test(E);return x&&R&&(y=+y,E=+E),y===E?0:x&&!R?-1:R&&!x?1:y<E?-1:1}t.rcompareIdentifiers=zn;function zn(y,E){return ct(E,y)}t.major=dr;function dr(y,E){return new Q(y,E).major}t.minor=Qi;function Qi(y,E){return new Q(y,E).minor}t.patch=Xi;function Xi(y,E){return new Q(y,E).patch}t.compare=Ge;function Ge(y,E,x){return new Q(y,x).compare(new Q(E,x))}t.compareLoose=ns;function ns(y,E){return Ge(y,E,!0)}t.rcompare=Kn;function Kn(y,E,x){return Ge(E,y,x)}t.sort=Zi;function Zi(y,E){return y.sort(function(x,R){return t.compare(x,R,E)})}t.rsort=eo;function eo(y,E){return y.sort(function(x,R){return t.rcompare(x,R,E)})}t.gt=Et;function Et(y,E,x){return Ge(y,E,x)>0}t.lt=Bt;function Bt(y,E,x){return Ge(y,E,x)<0}t.eq=wr;function wr(y,E,x){return Ge(y,E,x)===0}t.neq=Yn;function Yn(y,E,x){return Ge(y,E,x)!==0}t.gte=Or;function Or(y,E,x){return Ge(y,E,x)>=0}t.lte=Tt;function Tt(y,E,x){return Ge(y,E,x)<=0}t.cmp=At;function At(y,E,x,R){switch(E){case"===":return typeof y=="object"&&(y=y.version),typeof x=="object"&&(x=x.version),y===x;case"!==":return typeof y=="object"&&(y=y.version),typeof x=="object"&&(x=x.version),y!==x;case"":case"=":case"==":return wr(y,x,R);case"!=":return Yn(y,x,R);case">":return Et(y,x,R);case">=":return Or(y,x,R);case"<":return Bt(y,x,R);case"<=":return Tt(y,x,R);default:throw new TypeError("Invalid operator: "+E)}}t.Comparator=Te;function Te(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Te){if(y.loose===!!E.loose)return y;y=y.value}if(!(this instanceof Te))return new Te(y,E);r("comparator",y,E),this.options=E,this.loose=!!E.loose,this.parse(y),this.semver===_t?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var _t={};Te.prototype.parse=function(y){var E=this.options.loose?s[Pe]:s[De],x=y.match(E);if(!x)throw new TypeError("Invalid comparator: "+y);this.operator=x[1],this.operator==="="&&(this.operator=""),x[2]?this.semver=new Q(x[2],this.options.loose):this.semver=_t},Te.prototype.toString=function(){return this.value},Te.prototype.test=function(y){return r("Comparator.test",y,this.options.loose),this.semver===_t?!0:(typeof y=="string"&&(y=new Q(y,this.options)),At(y,this.operator,this.semver,this.options))},Te.prototype.intersects=function(y,E){if(!(y instanceof Te))throw new TypeError("a Comparator is required");(!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1});var x;if(this.operator==="")return x=new ce(y.value,E),er(this.value,x,E);if(y.operator==="")return x=new ce(this.value,E),er(y.semver,x,E);var R=(this.operator===">="||this.operator===">")&&(y.operator===">="||y.operator===">"),N=(this.operator==="<="||this.operator==="<")&&(y.operator==="<="||y.operator==="<"),$=this.semver.version===y.semver.version,H=(this.operator===">="||this.operator==="<=")&&(y.operator===">="||y.operator==="<="),Z=At(this.semver,"<",y.semver,E)&&(this.operator===">="||this.operator===">")&&(y.operator==="<="||y.operator==="<"),X=At(this.semver,">",y.semver,E)&&(this.operator==="<="||this.operator==="<")&&(y.operator===">="||y.operator===">");return R||N||$&&H||Z||X},t.Range=ce;function ce(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof ce)return y.loose===!!E.loose&&y.includePrerelease===!!E.includePrerelease?y:new ce(y.raw,E);if(y instanceof Te)return new ce(y.value,E);if(!(this instanceof ce))return new ce(y,E);if(this.options=E,this.loose=!!E.loose,this.includePrerelease=!!E.includePrerelease,this.raw=y,this.set=y.split(/\s*\|\|\s*/).map(function(x){return this.parseRange(x.trim())},this).filter(function(x){return x.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+y);this.format()}ce.prototype.format=function(){return this.range=this.set.map(function(y){return y.join(" ").trim()}).join("||").trim(),this.range},ce.prototype.toString=function(){return this.range},ce.prototype.parseRange=function(y){var E=this.options.loose;y=y.trim();var x=E?s[ve]:s[It];y=y.replace(x,ls),r("hyphen replace",y),y=y.replace(s[pe],yt),r("comparator trim",y,s[pe]),y=y.replace(s[F],L),y=y.replace(s[ie],te),y=y.split(/\s+/).join(" ");var R=E?s[Pe]:s[De],N=y.split(" ").map(function($){return kn($,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(N=N.filter(function($){return!!$.match(R)})),N=N.map(function($){return new Te($,this.options)},this),N},ce.prototype.intersects=function(y,E){if(!(y instanceof ce))throw new TypeError("a Range is required");return this.set.some(function(x){return x.every(function(R){return y.set.some(function(N){return N.every(function($){return R.intersects($,E)})})})})},t.toComparators=to;function to(y,E){return new ce(y,E).set.map(function(x){return x.map(function(R){return R.value}).join(" ").trim().split(" ")})}function kn(y,E){return r("comp",y,E),y=os(y,E),r("caret",y),y=Nr(y,E),r("tildes",y),y=as(y,E),r("xrange",y),y=fr(y,E),r("stars",y),y}function we(y){return!y||y.toLowerCase()==="x"||y==="*"}function Nr(y,E){return y.trim().split(/\s+/).map(function(x){return is(x,E)}).join(" ")}function is(y,E){var x=E.loose?s[W]:s[q];return y.replace(x,function(R,N,$,H,Z){r("tilde",y,R,N,$,H,Z);var X;return we(N)?X="":we($)?X=">="+N+".0.0 <"+(+N+1)+".0.0":we(H)?X=">="+N+"."+$+".0 <"+N+"."+(+$+1)+".0":Z?(r("replaceTilde pr",Z),X=">="+N+"."+$+"."+H+"-"+Z+" <"+N+"."+(+$+1)+".0"):X=">="+N+"."+$+"."+H+" <"+N+"."+(+$+1)+".0",r("tilde return",X),X})}function os(y,E){return y.trim().split(/\s+/).map(function(x){return ss(x,E)}).join(" ")}function ss(y,E){r("caret",y,E);var x=E.loose?s[ke]:s[_e];return y.replace(x,function(R,N,$,H,Z){r("caret",y,R,N,$,H,Z);var X;return we(N)?X="":we($)?X=">="+N+".0.0 <"+(+N+1)+".0.0":we(H)?N==="0"?X=">="+N+"."+$+".0 <"+N+"."+(+$+1)+".0":X=">="+N+"."+$+".0 <"+(+N+1)+".0.0":Z?(r("replaceCaret pr",Z),N==="0"?$==="0"?X=">="+N+"."+$+"."+H+"-"+Z+" <"+N+"."+$+"."+(+H+1):X=">="+N+"."+$+"."+H+"-"+Z+" <"+N+"."+(+$+1)+".0":X=">="+N+"."+$+"."+H+"-"+Z+" <"+(+N+1)+".0.0"):(r("no pr"),N==="0"?$==="0"?X=">="+N+"."+$+"."+H+" <"+N+"."+$+"."+(+H+1):X=">="+N+"."+$+"."+H+" <"+N+"."+(+$+1)+".0":X=">="+N+"."+$+"."+H+" <"+(+N+1)+".0.0"),r("caret return",X),X})}function as(y,E){return r("replaceXRanges",y,E),y.split(/\s+/).map(function(x){return cs(x,E)}).join(" ")}function cs(y,E){y=y.trim();var x=E.loose?s[Y]:s[J];return y.replace(x,function(R,N,$,H,Z,X){r("xRange",y,R,N,$,H,Z,X);var qe=we($),Re=qe||we(H),Ie=Re||we(Z),xe=Ie;return N==="="&&xe&&(N=""),qe?N===">"||N==="<"?R="<0.0.0":R="*":N&&xe?(Re&&(H=0),Z=0,N===">"?(N=">=",Re?($=+$+1,H=0,Z=0):(H=+H+1,Z=0)):N==="<="&&(N="<",Re?$=+$+1:H=+H+1),R=N+$+"."+H+"."+Z):Re?R=">="+$+".0.0 <"+(+$+1)+".0.0":Ie&&(R=">="+$+"."+H+".0 <"+$+"."+(+H+1)+".0"),r("xRange return",R),R})}function fr(y,E){return r("replaceStars",y,E),y.trim().replace(s[fe],"")}function ls(y,E,x,R,N,$,H,Z,X,qe,Re,Ie,xe){return we(x)?E="":we(R)?E=">="+x+".0.0":we(N)?E=">="+x+"."+R+".0":E=">="+E,we(X)?Z="":we(qe)?Z="<"+(+X+1)+".0.0":we(Re)?Z="<"+X+"."+(+qe+1)+".0":Ie?Z="<="+X+"."+qe+"."+Re+"-"+Ie:Z="<="+Z,(E+" "+Z).trim()}ce.prototype.test=function(y){if(!y)return!1;typeof y=="string"&&(y=new Q(y,this.options));for(var E=0;E<this.set.length;E++)if(us(this.set[E],y,this.options))return!0;return!1};function us(y,E,x){for(var R=0;R<y.length;R++)if(!y[R].test(E))return!1;if(E.prerelease.length&&!x.includePrerelease){for(R=0;R<y.length;R++)if(r(y[R].semver),y[R].semver!==_t&&y[R].semver.prerelease.length>0){var N=y[R].semver;if(N.major===E.major&&N.minor===E.minor&&N.patch===E.patch)return!0}return!1}return!0}t.satisfies=er;function er(y,E,x){try{E=new ce(E,x)}catch{return!1}return E.test(y)}t.maxSatisfying=ds;function ds(y,E,x){var R=null,N=null;try{var $=new ce(E,x)}catch{return null}return y.forEach(function(H){$.test(H)&&(!R||N.compare(H)===-1)&&(R=H,N=new Q(R,x))}),R}t.minSatisfying=fs;function fs(y,E,x){var R=null,N=null;try{var $=new ce(E,x)}catch{return null}return y.forEach(function(H){$.test(H)&&(!R||N.compare(H)===1)&&(R=H,N=new Q(R,x))}),R}t.minVersion=Qr;function Qr(y,E){y=new ce(y,E);var x=new Q("0.0.0");if(y.test(x)||(x=new Q("0.0.0-0"),y.test(x)))return x;x=null;for(var R=0;R<y.set.length;++R){var N=y.set[R];N.forEach(function($){var H=new Q($.semver.version);switch($.operator){case">":H.prerelease.length===0?H.patch++:H.prerelease.push(0),H.raw=H.format();case"":case">=":(!x||Et(x,H))&&(x=H);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+$.operator)}})}return x&&y.test(x)?x:null}t.validRange=ps;function ps(y,E){try{return new ce(y,E).range||"*"}catch{return null}}t.ltr=hs;function hs(y,E,x){return Lr(y,E,"<",x)}t.gtr=ms;function ms(y,E,x){return Lr(y,E,">",x)}t.outside=Lr;function Lr(y,E,x,R){y=new Q(y,R),E=new ce(E,R);var N,$,H,Z,X;switch(x){case">":N=Et,$=Tt,H=Bt,Z=">",X=">=";break;case"<":N=Bt,$=Or,H=Et,Z="<",X="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(er(y,E,R))return!1;for(var qe=0;qe<E.set.length;++qe){var Re=E.set[qe],Ie=null,xe=null;if(Re.forEach(function(Xe){Xe.semver===_t&&(Xe=new Te(">=0.0.0")),Ie=Ie||Xe,xe=xe||Xe,N(Xe.semver,Ie.semver,R)?Ie=Xe:H(Xe.semver,xe.semver,R)&&(xe=Xe)}),Ie.operator===Z||Ie.operator===X||(!xe.operator||xe.operator===Z)&&$(y,xe.semver)||xe.operator===X&&H(y,xe.semver))return!1}return!0}t.prerelease=gs;function gs(y,E){var x=je(y,E);return x&&x.prerelease.length?x.prerelease:null}t.intersects=Xr;function Xr(y,E,x){return y=new ce(y,x),E=new ce(E,x),y.intersects(E)}t.coerce=vs;function vs(y){if(y instanceof Q)return y;if(typeof y!="string")return null;var E=y.match(s[oe]);return E==null?null:je(E[1]+"."+(E[2]||"0")+"."+(E[3]||"0"))}}),P1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makePatchingRequire=void 0;var e=require("path"),r=oQ(),n=require("module"),i=Object.keys(process.binding("natives")),o=n.prototype.require;function s(a){var c={};return function(l){var u=o.apply(this,arguments);if(a[l]){var d=n._resolveFilename(l,this);if(c.hasOwnProperty(d))return c[d];var f=void 0;if(i.indexOf(l)<0)try{f=o.call(this,e.join(l,"package.json")).version}catch{return u}else f=process.version.substring(1);var p=f.indexOf("-");p>=0&&(f=f.substring(0,p));for(var h=u,m=0,g=a[l];m<g.length;m++){var v=g[m];r.satisfies(f,v.versionSpecifier)&&(h=v.patch(h,d))}return c[d]=h}return u}}t.makePatchingRequire=s}),sQ=O((t,e)=>{e.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}}),Pt=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.channel=t.makePatchingRequire=void 0;var e=P1(),r=P1();Object.defineProperty(t,"makePatchingRequire",{enumerable:!0,get:function(){return r.makePatchingRequire}});var n=function(s){return!0},i=function(){function s(){this.version=sQ().version,this.subscribers={},this.contextPreservationFunction=function(a){return a},this.knownPatches={},this.currentlyPublishing=!1}return s.prototype.shouldPublish=function(a){var c=this.subscribers[a];return c?c.some(function(l){var u=l.filter;return!u||u(!1)}):!1},s.prototype.publish=function(a,c){if(!this.currentlyPublishing){var l=this.subscribers[a];if(l){var u={timestamp:Date.now(),data:c};this.currentlyPublishing=!0,l.forEach(function(d){var f=d.listener,p=d.filter;try{p&&p(!0)&&f(u)}catch{}}),this.currentlyPublishing=!1}}},s.prototype.subscribe=function(a,c,l){l===void 0&&(l=n),this.subscribers[a]||(this.subscribers[a]=[]),this.subscribers[a].push({listener:c,filter:l})},s.prototype.unsubscribe=function(a,c,l){l===void 0&&(l=n);var u=this.subscribers[a];if(u){for(var d=0;d<u.length;++d)if(u[d].listener===c&&u[d].filter===l)return u.splice(d,1),!0}return!1},s.prototype.reset=function(){var a=this;this.subscribers={},this.contextPreservationFunction=function(c){return c},Object.getOwnPropertyNames(this.knownPatches).forEach(function(c){return delete a.knownPatches[c]})},s.prototype.bindToContext=function(a){return this.contextPreservationFunction(a)},s.prototype.addContextPreservation=function(a){var c=this.contextPreservationFunction;this.contextPreservationFunction=function(l){return a(c(l))}},s.prototype.registerMonkeyPatch=function(a,c){this.knownPatches[a]||(this.knownPatches[a]=[]),this.knownPatches[a].push(c)},s.prototype.getPatchesObject=function(){return this.knownPatches},s}();global.diagnosticsSource||(global.diagnosticsSource=new i,o=require("module"),o.prototype.require=e.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var o;t.channel=global.diagnosticsSource}),aQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),cQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._globalThis=void 0,t._globalThis=typeof globalThis=="object"?globalThis:global}),lQ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(cQ(),t)}),uQ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(lQ(),t)}),k1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="1.0.3"}),dQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCompatible=t._makeCompatibilityCheck=void 0;var e=k1(),r=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function n(i){var o=new Set([i]),s=new Set,a=i.match(r);if(!a)return function(){return!1};var c={major:+a[1],minor:+a[2],patch:+a[3],prerelease:a[4]};if(c.prerelease!=null)return function(d){return d===i};function l(d){return s.add(d),!1}function u(d){return o.add(d),!0}return function(d){if(o.has(d))return!0;if(s.has(d))return!1;var f=d.match(r);if(!f)return l(d);var p={major:+f[1],minor:+f[2],patch:+f[3],prerelease:f[4]};return p.prerelease!=null||c.major!==p.major?l(d):c.major===0?c.minor===p.minor&&c.patch<=p.patch?u(d):l(d):c.minor<=p.minor?u(d):l(d)}}t._makeCompatibilityCheck=n,t.isCompatible=n(e.VERSION)}),Bu=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterGlobal=t.getGlobal=t.registerGlobal=void 0;var e=uQ(),r=k1(),n=dQ(),i=r.VERSION.split(".")[0],o=Symbol.for("opentelemetry.js.api."+i),s=e._globalThis;function a(u,d,f,p){var h;p===void 0&&(p=!1);var m=s[o]=(h=s[o])!==null&&h!==void 0?h:{version:r.VERSION};if(!p&&m[u]){var g=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+u);return f.error(g.stack||g.message),!1}if(m.version!==r.VERSION){var g=new Error("@opentelemetry/api: All API registration versions must match");return f.error(g.stack||g.message),!1}return m[u]=d,f.debug("@opentelemetry/api: Registered a global for "+u+" v"+r.VERSION+"."),!0}t.registerGlobal=a;function c(u){var d,f,p=(d=s[o])===null||d===void 0?void 0:d.version;if(!(!p||!n.isCompatible(p)))return(f=s[o])===null||f===void 0?void 0:f[u]}t.getGlobal=c;function l(u,d){d.debug("@opentelemetry/api: Unregistering a global for "+u+" v"+r.VERSION+".");var f=s[o];f&&delete f[u]}t.unregisterGlobal=l}),fQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagComponentLogger=void 0;var e=Bu(),r=function(){function i(o){this._namespace=o.namespace||"DiagComponentLogger"}return i.prototype.debug=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("debug",this._namespace,o)},i.prototype.error=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("error",this._namespace,o)},i.prototype.info=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("info",this._namespace,o)},i.prototype.warn=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("warn",this._namespace,o)},i.prototype.verbose=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("verbose",this._namespace,o)},i}();t.DiagComponentLogger=r;function n(i,o,s){var a=e.getGlobal("diag");if(a)return s.unshift(o),a[i].apply(a,s)}}),wb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagLogLevel=void 0;var e;(function(r){r[r.NONE=0]="NONE",r[r.ERROR=30]="ERROR",r[r.WARN=50]="WARN",r[r.INFO=60]="INFO",r[r.DEBUG=70]="DEBUG",r[r.VERBOSE=80]="VERBOSE",r[r.ALL=9999]="ALL"})(e=t.DiagLogLevel||(t.DiagLogLevel={}))}),pQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLogLevelDiagLogger=void 0;var e=wb();function r(n,i){n<e.DiagLogLevel.NONE?n=e.DiagLogLevel.NONE:n>e.DiagLogLevel.ALL&&(n=e.DiagLogLevel.ALL),i=i||{};function o(s,a){var c=i[s];return typeof c=="function"&&n>=a?c.bind(i):function(){}}return{error:o("error",e.DiagLogLevel.ERROR),warn:o("warn",e.DiagLogLevel.WARN),info:o("info",e.DiagLogLevel.INFO),debug:o("debug",e.DiagLogLevel.DEBUG),verbose:o("verbose",e.DiagLogLevel.VERBOSE)}}t.createLogLevelDiagLogger=r}),Hu=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagAPI=void 0;var e=fQ(),r=pQ(),n=wb(),i=Bu(),o="diag",s=function(){function a(){function c(u){return function(){var d=i.getGlobal("diag");if(d)return d[u].apply(d,arguments)}}var l=this;l.setLogger=function(u,d){var f,p;if(d===void 0&&(d=n.DiagLogLevel.INFO),u===l){var h=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return l.error((f=h.stack)!==null&&f!==void 0?f:h.message),!1}var m=i.getGlobal("diag"),g=r.createLogLevelDiagLogger(d,u);if(m){var v=(p=new Error().stack)!==null&&p!==void 0?p:"<failed to generate stacktrace>";m.warn("Current logger will be overwritten from "+v),g.warn("Current logger will overwrite one already registered from "+v)}return i.registerGlobal("diag",g,l,!0)},l.disable=function(){i.unregisterGlobal(o,l)},l.createComponentLogger=function(u){return new e.DiagComponentLogger(u)},l.verbose=c("verbose"),l.debug=c("debug"),l.info=c("info"),l.warn=c("warn"),l.error=c("error")}return a.instance=function(){return this._instance||(this._instance=new a),this._instance},a}();t.DiagAPI=s}),hQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaggageImpl=void 0;var e=function(){function r(n){this._entries=n?new Map(n):new Map}return r.prototype.getEntry=function(n){var i=this._entries.get(n);if(i)return Object.assign({},i)},r.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(n){var i=n[0],o=n[1];return[i,o]})},r.prototype.setEntry=function(n,i){var o=new r(this._entries);return o._entries.set(n,i),o},r.prototype.removeEntry=function(n){var i=new r(this._entries);return i._entries.delete(n),i},r.prototype.removeEntries=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];for(var o=new r(this._entries),s=0,a=n;s<a.length;s++){var c=a[s];o._entries.delete(c)}return o},r.prototype.clear=function(){return new r},r}();t.BaggageImpl=e}),mQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataSymbol=void 0,t.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")}),I1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataFromString=t.createBaggage=void 0;var e=Hu(),r=hQ(),n=mQ(),i=e.DiagAPI.instance();function o(a){return a===void 0&&(a={}),new r.BaggageImpl(new Map(Object.entries(a)))}t.createBaggage=o;function s(a){return typeof a!="string"&&(i.error("Cannot create baggage metadata from unknown type: "+typeof a),a=""),{__TYPE__:n.baggageEntryMetadataSymbol,toString:function(){return a}}}t.baggageEntryMetadataFromString=s}),gQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),vQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),yQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagConsoleLogger=void 0;var e=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],r=function(){function n(){function i(s){return function(){var a=arguments;if(console){var c=console[s];if(typeof c!="function"&&(c=console.log),typeof c=="function")return c.apply(console,a)}}}for(var o=0;o<e.length;o++)this[e[o].n]=i(e[o].c)}return n}();t.DiagConsoleLogger=r}),wQ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(yQ(),t),r(wb(),t)}),T1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTextMapSetter=t.defaultTextMapGetter=void 0,t.defaultTextMapGetter={get:function(e,r){if(e!=null)return e[r]},keys:function(e){return e==null?[]:Object.keys(e)}},t.defaultTextMapSetter={set:function(e,r,n){e!=null&&(e[r]=n)}}}),CQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),bQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),um=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_CONTEXT=t.createContextKey=void 0;function e(n){return Symbol.for(n)}t.createContextKey=e;var r=function(){function n(i){var o=this;o._currentContext=i?new Map(i):new Map,o.getValue=function(s){return o._currentContext.get(s)},o.setValue=function(s,a){var c=new n(o._currentContext);return c._currentContext.set(s,a),c},o.deleteValue=function(s){var a=new n(o._currentContext);return a._currentContext.delete(s),a}}return n}();t.ROOT_CONTEXT=new r}),EQ=O(t=>{"use strict";var e=t&&t.__spreadArray||function(i,o){for(var s=0,a=o.length,c=i.length;s<a;s++,c++)i[c]=o[s];return i};Object.defineProperty(t,"__esModule",{value:!0}),t.NoopContextManager=void 0;var r=um(),n=function(){function i(){}return i.prototype.active=function(){return r.ROOT_CONTEXT},i.prototype.with=function(o,s,a){for(var c=[],l=3;l<arguments.length;l++)c[l-3]=arguments[l];return s.call.apply(s,e([a],c))},i.prototype.bind=function(o,s){return s},i.prototype.enable=function(){return this},i.prototype.disable=function(){return this},i}();t.NoopContextManager=n}),A1=O(t=>{"use strict";var e=t&&t.__spreadArray||function(c,l){for(var u=0,d=l.length,f=c.length;u<d;u++,f++)c[f]=l[u];return c};Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=void 0;var r=EQ(),n=Bu(),i=Hu(),o="context",s=new r.NoopContextManager,a=function(){function c(){}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalContextManager=function(l){return n.registerGlobal(o,l,i.DiagAPI.instance())},c.prototype.active=function(){return this._getContextManager().active()},c.prototype.with=function(l,u,d){for(var f,p=[],h=3;h<arguments.length;h++)p[h-3]=arguments[h];return(f=this._getContextManager()).with.apply(f,e([l,u,d],p))},c.prototype.bind=function(l,u){return this._getContextManager().bind(l,u)},c.prototype._getContextManager=function(){return n.getGlobal(o)||s},c.prototype.disable=function(){this._getContextManager().disable(),n.unregisterGlobal(o,i.DiagAPI.instance())},c}();t.ContextAPI=a}),D1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFlags=void 0;var e;(function(r){r[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED"})(e=t.TraceFlags||(t.TraceFlags={}))}),Cb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0;var e=D1();t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:e.TraceFlags.NONE}}),bb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NonRecordingSpan=void 0;var e=Cb(),r=function(){function n(i){i===void 0&&(i=e.INVALID_SPAN_CONTEXT),this._spanContext=i}return n.prototype.spanContext=function(){return this._spanContext},n.prototype.setAttribute=function(i,o){return this},n.prototype.setAttributes=function(i){return this},n.prototype.addEvent=function(i,o){return this},n.prototype.setStatus=function(i){return this},n.prototype.updateName=function(i){return this},n.prototype.end=function(i){},n.prototype.isRecording=function(){return!1},n.prototype.recordException=function(i,o){},n}();t.NonRecordingSpan=r}),R1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSpanContext=t.setSpanContext=t.deleteSpan=t.setSpan=t.getSpan=void 0;var e=um(),r=bb(),n=e.createContextKey("OpenTelemetry Context Key SPAN");function i(l){return l.getValue(n)||void 0}t.getSpan=i;function o(l,u){return l.setValue(n,u)}t.setSpan=o;function s(l){return l.deleteValue(n)}t.deleteSpan=s;function a(l,u){return o(l,new r.NonRecordingSpan(u))}t.setSpanContext=a;function c(l){var u;return(u=i(l))===null||u===void 0?void 0:u.spanContext()}t.getSpanContext=c}),Eb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSpanContext=t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=void 0;var e=Cb(),r=bb(),n=/^([0-9a-f]{32})$/i,i=/^[0-9a-f]{16}$/i;function o(l){return n.test(l)&&l!==e.INVALID_TRACEID}t.isValidTraceId=o;function s(l){return i.test(l)&&l!==e.INVALID_SPANID}t.isValidSpanId=s;function a(l){return o(l.traceId)&&s(l.spanId)}t.isSpanContextValid=a;function c(l){return new r.NonRecordingSpan(l)}t.wrapSpanContext=c}),O1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracer=void 0;var e=A1(),r=R1(),n=bb(),i=Eb(),o=e.ContextAPI.getInstance(),s=function(){function c(){}return c.prototype.startSpan=function(l,u,d){var f=Boolean(u==null?void 0:u.root);if(f)return new n.NonRecordingSpan;var p=d&&r.getSpanContext(d);return a(p)&&i.isSpanContextValid(p)?new n.NonRecordingSpan(p):new n.NonRecordingSpan},c.prototype.startActiveSpan=function(l,u,d,f){var p,h,m;if(!(arguments.length<2)){arguments.length===2?m=u:arguments.length===3?(p=u,m=d):(p=u,h=d,m=f);var g=h!=null?h:o.active(),v=this.startSpan(l,p,g),w=r.setSpan(g,v);return o.with(w,m,void 0,v)}},c}();t.NoopTracer=s;function a(c){return typeof c=="object"&&typeof c.spanId=="string"&&typeof c.traceId=="string"&&typeof c.traceFlags=="number"}}),N1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracer=void 0;var e=O1(),r=new e.NoopTracer,n=function(){function i(o,s,a){this._provider=o,this.name=s,this.version=a}return i.prototype.startSpan=function(o,s,a){return this._getTracer().startSpan(o,s,a)},i.prototype.startActiveSpan=function(o,s,a,c){var l=this._getTracer();return Reflect.apply(l.startActiveSpan,l,arguments)},i.prototype._getTracer=function(){if(this._delegate)return this._delegate;var o=this._provider.getDelegateTracer(this.name,this.version);return o?(this._delegate=o,this._delegate):r},i}();t.ProxyTracer=n}),_Q=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracerProvider=void 0;var e=O1(),r=function(){function n(){}return n.prototype.getTracer=function(i,o){return new e.NoopTracer},n}();t.NoopTracerProvider=r}),L1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracerProvider=void 0;var e=N1(),r=_Q(),n=new r.NoopTracerProvider,i=function(){function o(){}return o.prototype.getTracer=function(s,a){var c;return(c=this.getDelegateTracer(s,a))!==null&&c!==void 0?c:new e.ProxyTracer(this,s,a)},o.prototype.getDelegate=function(){var s;return(s=this._delegate)!==null&&s!==void 0?s:n},o.prototype.setDelegate=function(s){this._delegate=s},o.prototype.getDelegateTracer=function(s,a){var c;return(c=this._delegate)===null||c===void 0?void 0:c.getTracer(s,a)},o}();t.ProxyTracerProvider=i}),SQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),xQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SamplingDecision=void 0;var e;(function(r){r[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(e=t.SamplingDecision||(t.SamplingDecision={}))}),PQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),kQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpanKind=void 0;var e;(function(r){r[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"})(e=t.SpanKind||(t.SpanKind={}))}),IQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),TQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),AQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpanStatusCode=void 0;var e;(function(r){r[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"})(e=t.SpanStatusCode||(t.SpanStatusCode={}))}),DQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),RQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),OQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),NQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),LQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceAPI=void 0;var e=Bu(),r=L1(),n=Eb(),i=R1(),o=Hu(),s="trace",a=function(){function c(){this._proxyTracerProvider=new r.ProxyTracerProvider,this.wrapSpanContext=n.wrapSpanContext,this.isSpanContextValid=n.isSpanContextValid,this.deleteSpan=i.deleteSpan,this.getSpan=i.getSpan,this.getSpanContext=i.getSpanContext,this.setSpan=i.setSpan,this.setSpanContext=i.setSpanContext}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalTracerProvider=function(l){var u=e.registerGlobal(s,this._proxyTracerProvider,o.DiagAPI.instance());return u&&this._proxyTracerProvider.setDelegate(l),u},c.prototype.getTracerProvider=function(){return e.getGlobal(s)||this._proxyTracerProvider},c.prototype.getTracer=function(l,u){return this.getTracerProvider().getTracer(l,u)},c.prototype.disable=function(){e.unregisterGlobal(s,o.DiagAPI.instance()),this._proxyTracerProvider=new r.ProxyTracerProvider},c}();t.TraceAPI=a}),FQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTextMapPropagator=void 0;var e=function(){function r(){}return r.prototype.inject=function(n,i){},r.prototype.extract=function(n,i){return n},r.prototype.fields=function(){return[]},r}();t.NoopTextMapPropagator=e}),MQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBaggage=t.setBaggage=t.getBaggage=void 0;var e=um(),r=e.createContextKey("OpenTelemetry Baggage Key");function n(s){return s.getValue(r)||void 0}t.getBaggage=n;function i(s,a){return s.setValue(r,a)}t.setBaggage=i;function o(s){return s.deleteValue(r)}t.deleteBaggage=o}),qQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropagationAPI=void 0;var e=Bu(),r=FQ(),n=T1(),i=MQ(),o=I1(),s=Hu(),a="propagation",c=new r.NoopTextMapPropagator,l=function(){function u(){this.createBaggage=o.createBaggage,this.getBaggage=i.getBaggage,this.setBaggage=i.setBaggage,this.deleteBaggage=i.deleteBaggage}return u.getInstance=function(){return this._instance||(this._instance=new u),this._instance},u.prototype.setGlobalPropagator=function(d){return e.registerGlobal(a,d,s.DiagAPI.instance())},u.prototype.inject=function(d,f,p){return p===void 0&&(p=n.defaultTextMapSetter),this._getGlobalPropagator().inject(d,f,p)},u.prototype.extract=function(d,f,p){return p===void 0&&(p=n.defaultTextMapGetter),this._getGlobalPropagator().extract(d,f,p)},u.prototype.fields=function(){return this._getGlobalPropagator().fields()},u.prototype.disable=function(){e.unregisterGlobal(a,s.DiagAPI.instance())},u.prototype._getGlobalPropagator=function(){return e.getGlobal(a)||c},u}();t.PropagationAPI=l}),ft=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(u,d,f,p){p===void 0&&(p=f),Object.defineProperty(u,p,{enumerable:!0,get:function(){return d[f]}})}:function(u,d,f,p){p===void 0&&(p=f),u[p]=d[f]}),r=t&&t.__exportStar||function(u,d){for(var f in u)f!=="default"&&!Object.prototype.hasOwnProperty.call(d,f)&&e(d,u,f)};Object.defineProperty(t,"__esModule",{value:!0}),t.diag=t.propagation=t.trace=t.context=t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=t.isValidSpanId=t.isValidTraceId=t.isSpanContextValid=t.baggageEntryMetadataFromString=void 0,r(aQ(),t);var n=I1();Object.defineProperty(t,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return n.baggageEntryMetadataFromString}}),r(gQ(),t),r(vQ(),t),r(wQ(),t),r(T1(),t),r(CQ(),t),r(bQ(),t),r(N1(),t),r(L1(),t),r(SQ(),t),r(xQ(),t),r(PQ(),t),r(kQ(),t),r(IQ(),t),r(TQ(),t),r(AQ(),t),r(D1(),t),r(DQ(),t),r(RQ(),t),r(OQ(),t);var i=Eb();Object.defineProperty(t,"isSpanContextValid",{enumerable:!0,get:function(){return i.isSpanContextValid}}),Object.defineProperty(t,"isValidTraceId",{enumerable:!0,get:function(){return i.isValidTraceId}}),Object.defineProperty(t,"isValidSpanId",{enumerable:!0,get:function(){return i.isValidSpanId}});var o=Cb();Object.defineProperty(t,"INVALID_SPANID",{enumerable:!0,get:function(){return o.INVALID_SPANID}}),Object.defineProperty(t,"INVALID_TRACEID",{enumerable:!0,get:function(){return o.INVALID_TRACEID}}),Object.defineProperty(t,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return o.INVALID_SPAN_CONTEXT}}),r(um(),t),r(NQ(),t);var s=A1();t.context=s.ContextAPI.getInstance();var a=LQ();t.trace=a.TraceAPI.getInstance();var c=qQ();t.propagation=c.PropagationAPI.getInstance();var l=Hu();t.diag=l.DiagAPI.instance(),t.default={trace:t.trace,context:t.context,propagation:t.propagation,diag:t.diag}}),_b=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTracingSuppressed=t.unsuppressTracing=t.suppressTracing=void 0;var e=ft(),r=e.createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function n(s){return s.setValue(r,!0)}t.suppressTracing=n;function i(s){return s.deleteValue(r)}t.unsuppressTracing=i;function o(s){return s.getValue(r)===!0}t.isTracingSuppressed=o}),F1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BAGGAGE_MAX_TOTAL_LENGTH=t.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=t.BAGGAGE_MAX_NAME_VALUE_PAIRS=t.BAGGAGE_HEADER=t.BAGGAGE_ITEMS_SEPARATOR=t.BAGGAGE_PROPERTIES_SEPARATOR=t.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,t.BAGGAGE_KEY_PAIR_SEPARATOR="=",t.BAGGAGE_PROPERTIES_SEPARATOR=";",t.BAGGAGE_ITEMS_SEPARATOR=",",t.BAGGAGE_HEADER="baggage",t.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,t.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,t.BAGGAGE_MAX_TOTAL_LENGTH=8192}),M1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseKeyPairsIntoRecord=t.parsePairKeyValue=t.getKeyPairs=t.serializeKeyPairs=void 0;var e=ft(),r=F1(),n=a=>a.reduce((c,l)=>{let u=`${c}${c!==""?r.BAGGAGE_ITEMS_SEPARATOR:""}${l}`;return u.length>r.BAGGAGE_MAX_TOTAL_LENGTH?c:u},"");t.serializeKeyPairs=n;var i=a=>a.getAllEntries().map(([c,l])=>`${encodeURIComponent(c)}=${encodeURIComponent(l.value)}`);t.getKeyPairs=i;var o=a=>{let c=a.split(r.BAGGAGE_PROPERTIES_SEPARATOR);if(c.length<=0)return;let l=c.shift();if(!l)return;let u=l.split(r.BAGGAGE_KEY_PAIR_SEPARATOR);if(u.length!==2)return;let d=decodeURIComponent(u[0].trim()),f=decodeURIComponent(u[1].trim()),p;return c.length>0&&(p=e.baggageEntryMetadataFromString(c.join(r.BAGGAGE_PROPERTIES_SEPARATOR))),{key:d,value:f,metadata:p}};t.parsePairKeyValue=o;var s=a=>typeof a!="string"||a.length===0?{}:a.split(r.BAGGAGE_ITEMS_SEPARATOR).map(c=>t.parsePairKeyValue(c)).filter(c=>c!==void 0&&c.value.length>0).reduce((c,l)=>(c[l.key]=l.value,c),{});t.parseKeyPairsIntoRecord=s}),$Q=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpBaggagePropagator=void 0;var e=ft(),r=_b(),n=F1(),i=M1(),o=class{inject(s,a,c){let l=e.propagation.getBaggage(s);if(!l||r.isTracingSuppressed(s))return;let u=i.getKeyPairs(l).filter(f=>f.length<=n.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,n.BAGGAGE_MAX_NAME_VALUE_PAIRS),d=i.serializeKeyPairs(u);d.length>0&&c.set(a,n.BAGGAGE_HEADER,d)}extract(s,a,c){let l=c.get(a,n.BAGGAGE_HEADER);if(!l)return s;let u={};return l.length===0||(l.split(n.BAGGAGE_ITEMS_SEPARATOR).forEach(d=>{let f=i.parsePairKeyValue(d);if(f){let p={value:f.value};f.metadata&&(p.metadata=f.metadata),u[f.key]=p}}),Object.entries(u).length===0)?s:e.propagation.setBaggage(s,e.propagation.createBaggage(u))}fields(){return[n.BAGGAGE_HEADER]}};t.HttpBaggagePropagator=o}),jQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAttributeValue=t.sanitizeAttributes=void 0;function e(o){let s={};if(o==null||typeof o!="object")return s;for(let[a,c]of Object.entries(o))r(c)&&(Array.isArray(c)?s[a]=c.slice():s[a]=c);return s}t.sanitizeAttributes=e;function r(o){return o==null?!0:Array.isArray(o)?n(o):i(o)}t.isAttributeValue=r;function n(o){let s;for(let a of o)if(a!=null){if(!s){if(i(a)){s=typeof a;continue}return!1}if(typeof a!==s)return!1}return!0}function i(o){switch(typeof o){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}}),q1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loggingErrorHandler=void 0;var e=ft();function r(){return o=>{e.diag.error(n(o))}}t.loggingErrorHandler=r;function n(o){return typeof o=="string"?o:JSON.stringify(i(o))}function i(o){let s={},a=o;for(;a!==null;)Object.getOwnPropertyNames(a).forEach(c=>{if(s[c])return;let l=a[c];l&&(s[c]=String(l))}),a=Object.getPrototypeOf(a);return s}}),$1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalErrorHandler=t.setGlobalErrorHandler=void 0;var e=q1(),r=e.loggingErrorHandler();function n(o){r=o}t.setGlobalErrorHandler=n;var i=o=>{try{r(o)}catch{}};t.globalErrorHandler=i}),j1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TracesSamplerValues=void 0;var e;(function(r){r.AlwaysOff="always_off",r.AlwaysOn="always_on",r.ParentBasedAlwaysOff="parentbased_always_off",r.ParentBasedAlwaysOn="parentbased_always_on",r.ParentBasedTraceIdRatio="parentbased_traceidratio",r.TraceIdRatio="traceidratio"})(e=t.TracesSamplerValues||(t.TracesSamplerValues={}))}),U1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseEnvironment=t.DEFAULT_ENVIRONMENT=void 0;var e=ft(),r=j1(),n=",",i=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function o(p){return i.indexOf(p)>-1}var s=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function a(p){return s.indexOf(p)>-1}t.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:e.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:r.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function c(p,h,m,g=-1/0,v=1/0){if(typeof m[p]<"u"){let w=Number(m[p]);isNaN(w)||(w<g?h[p]=g:w>v?h[p]=v:h[p]=w)}}function l(p,h,m,g=n){let v=m[p];typeof v=="string"&&(h[p]=v.split(g).map(w=>w.trim()))}var u={ALL:e.DiagLogLevel.ALL,VERBOSE:e.DiagLogLevel.VERBOSE,DEBUG:e.DiagLogLevel.DEBUG,INFO:e.DiagLogLevel.INFO,WARN:e.DiagLogLevel.WARN,ERROR:e.DiagLogLevel.ERROR,NONE:e.DiagLogLevel.NONE};function d(p,h,m){let g=m[p];if(typeof g=="string"){let v=u[g.toUpperCase()];v!=null&&(h[p]=v)}}function f(p){let h={};for(let m in t.DEFAULT_ENVIRONMENT){let g=m;switch(g){case"OTEL_LOG_LEVEL":d(g,h,p);break;default:if(o(g))c(g,h,p);else if(a(g))l(g,h,p);else{let v=p[g];typeof v<"u"&&v!==null&&(h[g]=String(v))}}}return h}t.parseEnvironment=f}),UQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnv=void 0;var e=require("os"),r=U1();function n(){let i=r.parseEnvironment(process.env);return Object.assign({HOSTNAME:e.hostname()},r.DEFAULT_ENVIRONMENT,i)}t.getEnv=n}),BQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hexToBase64=void 0;function e(r){let n=r.length,i="";for(let o=0;o<n;o+=2){let s=r.substring(o,o+2),a=parseInt(s,16);i+=String.fromCharCode(a)}return Buffer.from(i,"ascii").toString("base64")}t.hexToBase64=e}),HQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RandomIdGenerator=void 0;var e=8,r=16,n=class{constructor(){this.generateTraceId=o(r),this.generateSpanId=o(e)}};t.RandomIdGenerator=n;var i=Buffer.allocUnsafe(r);function o(s){return function(){for(let a=0;a<s/4;a++)i.writeUInt32BE(Math.random()*2**32>>>0,a*4);for(let a=0;a<s&&!(i[a]>0);a++)a===s-1&&(i[s-1]=1);return i.toString("hex",0,s)}}}),VQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.otperformance=void 0;var e=require("perf_hooks");t.otperformance=e.performance}),Sb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="0.23.0"}),WQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RpcGrpcStatusCodeValues=t.MessagingOperationValues=t.MessagingDestinationKindValues=t.HttpFlavorValues=t.NetTransportValues=t.FaasInvokedProviderValues=t.FaasDocumentOperationValues=t.FaasTriggerValues=t.DbCassandraConsistencyLevelValues=t.DbSystemValues=t.SemanticAttributes=void 0,t.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};var e;(function(d){d.OTHER_SQL="other_sql",d.MSSQL="mssql",d.MYSQL="mysql",d.ORACLE="oracle",d.DB2="db2",d.POSTGRESQL="postgresql",d.REDSHIFT="redshift",d.HIVE="hive",d.CLOUDSCAPE="cloudscape",d.HSQLDB="hsqldb",d.PROGRESS="progress",d.MAXDB="maxdb",d.HANADB="hanadb",d.INGRES="ingres",d.FIRSTSQL="firstsql",d.EDB="edb",d.CACHE="cache",d.ADABAS="adabas",d.FIREBIRD="firebird",d.DERBY="derby",d.FILEMAKER="filemaker",d.INFORMIX="informix",d.INSTANTDB="instantdb",d.INTERBASE="interbase",d.MARIADB="mariadb",d.NETEZZA="netezza",d.PERVASIVE="pervasive",d.POINTBASE="pointbase",d.SQLITE="sqlite",d.SYBASE="sybase",d.TERADATA="teradata",d.VERTICA="vertica",d.H2="h2",d.COLDFUSION="coldfusion",d.CASSANDRA="cassandra",d.HBASE="hbase",d.MONGODB="mongodb",d.REDIS="redis",d.COUCHBASE="couchbase",d.COUCHDB="couchdb",d.COSMOSDB="cosmosdb",d.DYNAMODB="dynamodb",d.NEO4J="neo4j",d.GEODE="geode",d.ELASTICSEARCH="elasticsearch",d.MEMCACHED="memcached",d.COCKROACHDB="cockroachdb"})(e=t.DbSystemValues||(t.DbSystemValues={}));var r;(function(d){d.ALL="all",d.EACH_QUORUM="each_quorum",d.QUORUM="quorum",d.LOCAL_QUORUM="local_quorum",d.ONE="one",d.TWO="two",d.THREE="three",d.LOCAL_ONE="local_one",d.ANY="any",d.SERIAL="serial",d.LOCAL_SERIAL="local_serial"})(r=t.DbCassandraConsistencyLevelValues||(t.DbCassandraConsistencyLevelValues={}));var n;(function(d){d.DATASOURCE="datasource",d.HTTP="http",d.PUBSUB="pubsub",d.TIMER="timer",d.OTHER="other"})(n=t.FaasTriggerValues||(t.FaasTriggerValues={}));var i;(function(d){d.INSERT="insert",d.EDIT="edit",d.DELETE="delete"})(i=t.FaasDocumentOperationValues||(t.FaasDocumentOperationValues={}));var o;(function(d){d.AWS="aws",d.AZURE="azure",d.GCP="gcp"})(o=t.FaasInvokedProviderValues||(t.FaasInvokedProviderValues={}));var s;(function(d){d.IP_TCP="ip_tcp",d.IP_UDP="ip_udp",d.IP="ip",d.UNIX="unix",d.PIPE="pipe",d.INPROC="inproc",d.OTHER="other"})(s=t.NetTransportValues||(t.NetTransportValues={}));var a;(function(d){d.HTTP_1_0="1.0",d.HTTP_1_1="1.1",d.HTTP_2_0="2.0",d.SPDY="SPDY",d.QUIC="QUIC"})(a=t.HttpFlavorValues||(t.HttpFlavorValues={}));var c;(function(d){d.QUEUE="queue",d.TOPIC="topic"})(c=t.MessagingDestinationKindValues||(t.MessagingDestinationKindValues={}));var l;(function(d){d.RECEIVE="receive",d.PROCESS="process"})(l=t.MessagingOperationValues||(t.MessagingOperationValues={}));var u;(function(d){d[d.OK=0]="OK",d[d.CANCELLED=1]="CANCELLED",d[d.UNKNOWN=2]="UNKNOWN",d[d.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",d[d.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",d[d.NOT_FOUND=5]="NOT_FOUND",d[d.ALREADY_EXISTS=6]="ALREADY_EXISTS",d[d.PERMISSION_DENIED=7]="PERMISSION_DENIED",d[d.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",d[d.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",d[d.ABORTED=10]="ABORTED",d[d.OUT_OF_RANGE=11]="OUT_OF_RANGE",d[d.UNIMPLEMENTED=12]="UNIMPLEMENTED",d[d.INTERNAL=13]="INTERNAL",d[d.UNAVAILABLE=14]="UNAVAILABLE",d[d.DATA_LOSS=15]="DATA_LOSS",d[d.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(u=t.RpcGrpcStatusCodeValues||(t.RpcGrpcStatusCodeValues={}))}),GQ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(WQ(),t)}),zQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetrySdkLanguageValues=t.OsTypeValues=t.HostArchValues=t.AwsEcsLaunchtypeValues=t.CloudPlatformValues=t.CloudProviderValues=t.ResourceAttributes=void 0,t.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var e;(function(a){a.AWS="aws",a.AZURE="azure",a.GCP="gcp"})(e=t.CloudProviderValues||(t.CloudProviderValues={}));var r;(function(a){a.AWS_EC2="aws_ec2",a.AWS_ECS="aws_ecs",a.AWS_EKS="aws_eks",a.AWS_LAMBDA="aws_lambda",a.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",a.AZURE_VM="azure_vm",a.AZURE_CONTAINER_INSTANCES="azure_container_instances",a.AZURE_AKS="azure_aks",a.AZURE_FUNCTIONS="azure_functions",a.AZURE_APP_SERVICE="azure_app_service",a.GCP_COMPUTE_ENGINE="gcp_compute_engine",a.GCP_CLOUD_RUN="gcp_cloud_run",a.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",a.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",a.GCP_APP_ENGINE="gcp_app_engine"})(r=t.CloudPlatformValues||(t.CloudPlatformValues={}));var n;(function(a){a.EC2="ec2",a.FARGATE="fargate"})(n=t.AwsEcsLaunchtypeValues||(t.AwsEcsLaunchtypeValues={}));var i;(function(a){a.AMD64="amd64",a.ARM32="arm32",a.ARM64="arm64",a.IA64="ia64",a.PPC32="ppc32",a.PPC64="ppc64",a.X86="x86"})(i=t.HostArchValues||(t.HostArchValues={}));var o;(function(a){a.WINDOWS="windows",a.LINUX="linux",a.DARWIN="darwin",a.FREEBSD="freebsd",a.NETBSD="netbsd",a.OPENBSD="openbsd",a.DRAGONFLYBSD="dragonflybsd",a.HPUX="hpux",a.AIX="aix",a.SOLARIS="solaris",a.Z_OS="z_os"})(o=t.OsTypeValues||(t.OsTypeValues={}));var s;(function(a){a.CPP="cpp",a.DOTNET="dotnet",a.ERLANG="erlang",a.GO="go",a.JAVA="java",a.NODEJS="nodejs",a.PHP="php",a.PYTHON="python",a.RUBY="ruby",a.WEBJS="webjs"})(s=t.TelemetrySdkLanguageValues||(t.TelemetrySdkLanguageValues={}))}),KQ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(zQ(),t)}),Vu=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(GQ(),t),r(KQ(),t)}),YQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SDK_INFO=void 0;var e=Sb(),r=Vu();t.SDK_INFO={[r.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[r.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[r.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.TelemetrySdkLanguageValues.NODEJS,[r.ResourceAttributes.TELEMETRY_SDK_VERSION]:e.VERSION}}),JQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unrefTimer=void 0;function e(r){r.unref()}t.unrefTimer=e}),QQ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(UQ(),t),r(BQ(),t),r(HQ(),t),r(VQ(),t),r(YQ(),t),r(JQ(),t)}),B1=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(QQ(),t)}),XQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTimeInput=t.isTimeInputHrTime=t.hrTimeToMicroseconds=t.hrTimeToMilliseconds=t.hrTimeToNanoseconds=t.hrTimeToTimeStamp=t.hrTimeDuration=t.timeInputToHrTime=t.hrTime=void 0;var e=B1(),r=9,n=Math.pow(10,r);function i(m){let g=m/1e3,v=Math.trunc(g),w=Number((g-v).toFixed(r))*n;return[v,w]}function o(){let m=e.otperformance.timeOrigin;if(typeof m!="number"){let g=e.otperformance;m=g.timing&&g.timing.fetchStart}return m}function s(m){let g=i(o()),v=i(typeof m=="number"?m:e.otperformance.now()),w=g[0]+v[0],b=g[1]+v[1];return b>n&&(b-=n,w+=1),[w,b]}t.hrTime=s;function a(m){if(p(m))return m;if(typeof m=="number")return m<o()?s(m):i(m);if(m instanceof Date)return i(m.getTime());throw TypeError("Invalid input type")}t.timeInputToHrTime=a;function c(m,g){let v=g[0]-m[0],w=g[1]-m[1];return w<0&&(v-=1,w+=n),[v,w]}t.hrTimeDuration=c;function l(m){let g=r,v=`${"0".repeat(g)}${m[1]}Z`,w=v.substr(v.length-g-1);return new Date(m[0]*1e3).toISOString().replace("000Z",w)}t.hrTimeToTimeStamp=l;function u(m){return m[0]*n+m[1]}t.hrTimeToNanoseconds=u;function d(m){return Math.round(m[0]*1e3+m[1]/1e6)}t.hrTimeToMilliseconds=d;function f(m){return Math.round(m[0]*1e6+m[1]/1e3)}t.hrTimeToMicroseconds=f;function p(m){return Array.isArray(m)&&m.length===2&&typeof m[0]=="number"&&typeof m[1]=="number"}t.isTimeInputHrTime=p;function h(m){return p(m)||typeof m=="number"||m instanceof Date}t.isTimeInput=h}),ZQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),eX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExportResultCode=void 0;var e;(function(r){r[r.SUCCESS=0]="SUCCESS",r[r.FAILED=1]="FAILED"})(e=t.ExportResultCode||(t.ExportResultCode={}))}),tX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompositePropagator=void 0;var e=ft(),r=class{constructor(n={}){var i;this._propagators=(i=n.propagators)!==null&&i!==void 0?i:[],this._fields=Array.from(new Set(this._propagators.map(o=>typeof o.fields=="function"?o.fields():[]).reduce((o,s)=>o.concat(s),[])))}inject(n,i,o){for(let s of this._propagators)try{s.inject(n,i,o)}catch(a){e.diag.warn(`Failed to inject with ${s.constructor.name}. Err: ${a.message}`)}}extract(n,i,o){return this._propagators.reduce((s,a)=>{try{return a.extract(s,i,o)}catch(c){e.diag.warn(`Failed to inject with ${a.constructor.name}. Err: ${c.message}`)}return s},n)}fields(){return this._fields.slice()}};t.CompositePropagator=r}),rX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateKey=void 0;var e="[_0-9a-z-*/]",r=`[a-z]${e}{0,255}`,n=`[a-z0-9]${e}{0,240}@[a-z]${e}{0,13}`,i=new RegExp(`^(?:${r}|${n})$`),o=/^[ -~]{0,255}[!-~]$/,s=/,|=/;function a(l){return i.test(l)}t.validateKey=a;function c(l){return o.test(l)&&!s.test(l)}t.validateValue=c}),H1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceState=void 0;var e=rX(),r=32,n=512,i=",",o="=",s=class{constructor(a){this._internalState=new Map,a&&this._parse(a)}set(a,c){let l=this._clone();return l._internalState.has(a)&&l._internalState.delete(a),l._internalState.set(a,c),l}unset(a){let c=this._clone();return c._internalState.delete(a),c}get(a){return this._internalState.get(a)}serialize(){return this._keys().reduce((a,c)=>(a.push(c+o+this.get(c)),a),[]).join(i)}_parse(a){a.length>n||(this._internalState=a.split(i).reverse().reduce((c,l)=>{let u=l.trim(),d=u.indexOf(o);if(d!==-1){let f=u.slice(0,d),p=u.slice(d+1,l.length);e.validateKey(f)&&e.validateValue(p)&&c.set(f,p)}return c},new Map),this._internalState.size>r&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,r))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let a=new s;return a._internalState=new Map(this._internalState),a}};t.TraceState=s}),nX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpTraceContextPropagator=t.parseTraceParent=t.TRACE_STATE_HEADER=t.TRACE_PARENT_HEADER=void 0;var e=ft(),r=_b(),n=H1();t.TRACE_PARENT_HEADER="traceparent",t.TRACE_STATE_HEADER="tracestate";var i="00",o="(?!ff)[\\da-f]{2}",s="(?![0]{32})[\\da-f]{32}",a="(?![0]{16})[\\da-f]{16}",c="[\\da-f]{2}",l=new RegExp(`^\\s?(${o})-(${s})-(${a})-(${c})(-.*)?\\s?$`);function u(f){let p=l.exec(f);return!p||p[1]==="00"&&p[5]?null:{traceId:p[2],spanId:p[3],traceFlags:parseInt(p[4],16)}}t.parseTraceParent=u;var d=class{inject(f,p,h){let m=e.trace.getSpanContext(f);if(!m||r.isTracingSuppressed(f)||!e.isSpanContextValid(m))return;let g=`${i}-${m.traceId}-${m.spanId}-0${Number(m.traceFlags||e.TraceFlags.NONE).toString(16)}`;h.set(p,t.TRACE_PARENT_HEADER,g),m.traceState&&h.set(p,t.TRACE_STATE_HEADER,m.traceState.serialize())}extract(f,p,h){let m=h.get(p,t.TRACE_PARENT_HEADER);if(!m)return f;let g=Array.isArray(m)?m[0]:m;if(typeof g!="string")return f;let v=u(g);if(!v)return f;v.isRemote=!0;let w=h.get(p,t.TRACE_STATE_HEADER);if(w){let b=Array.isArray(w)?w.join(","):w;v.traceState=new n.TraceState(typeof b=="string"?b:void 0)}return e.trace.setSpanContext(f,v)}fields(){return[t.TRACE_PARENT_HEADER,t.TRACE_STATE_HEADER]}};t.HttpTraceContextPropagator=d}),iX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),oX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRPCMetadata=t.deleteRPCMetadata=t.setRPCMetadata=t.RPCType=void 0;var e=ft(),r=e.createContextKey("OpenTelemetry SDK Context Key RPC_METADATA"),n;(function(a){a.HTTP="http"})(n=t.RPCType||(t.RPCType={}));function i(a,c){return a.setValue(r,c)}t.setRPCMetadata=i;function o(a){return a.deleteValue(r)}t.deleteRPCMetadata=o;function s(a){return a.getValue(r)}t.getRPCMetadata=s}),V1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlwaysOffSampler=void 0;var e=ft(),r=class{shouldSample(){return{decision:e.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};t.AlwaysOffSampler=r}),W1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlwaysOnSampler=void 0;var e=ft(),r=class{shouldSample(){return{decision:e.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};t.AlwaysOnSampler=r}),sX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParentBasedSampler=void 0;var e=ft(),r=$1(),n=V1(),i=W1(),o=class{constructor(s){var a,c,l,u;this._root=s.root,this._root||(r.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new i.AlwaysOnSampler),this._remoteParentSampled=(a=s.remoteParentSampled)!==null&&a!==void 0?a:new i.AlwaysOnSampler,this._remoteParentNotSampled=(c=s.remoteParentNotSampled)!==null&&c!==void 0?c:new n.AlwaysOffSampler,this._localParentSampled=(l=s.localParentSampled)!==null&&l!==void 0?l:new i.AlwaysOnSampler,this._localParentNotSampled=(u=s.localParentNotSampled)!==null&&u!==void 0?u:new n.AlwaysOffSampler}shouldSample(s,a,c,l,u,d){let f=e.trace.getSpanContext(s);return!f||!e.isSpanContextValid(f)?this._root.shouldSample(s,a,c,l,u,d):f.isRemote?f.traceFlags&e.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(s,a,c,l,u,d):this._remoteParentNotSampled.shouldSample(s,a,c,l,u,d):f.traceFlags&e.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(s,a,c,l,u,d):this._localParentNotSampled.shouldSample(s,a,c,l,u,d)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};t.ParentBasedSampler=o}),aX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceIdRatioBasedSampler=void 0;var e=ft(),r=class{constructor(n=0){this._ratio=n,this._ratio=this._normalize(n),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(n,i){return{decision:e.isValidTraceId(i)&&this._accumulate(i)<this._upperBound?e.SamplingDecision.RECORD_AND_SAMPLED:e.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(n){return typeof n!="number"||isNaN(n)?0:n>=1?1:n<=0?0:n}_accumulate(n){let i=0;for(let o=0;o<n.length/8;o++){let s=o*8,a=parseInt(n.slice(s,s+8),16);i=(i^a)>>>0}return i}};t.TraceIdRatioBasedSampler=r}),cX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUrlIgnored=t.urlMatches=void 0;function e(n,i){return typeof i=="string"?n===i:i.test(n)}t.urlMatches=e;function r(n,i){if(!i)return!1;for(let o of i)if(e(n,o))return!0;return!1}t.isUrlIgnored=r}),lX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWrapped=void 0;function e(r){return typeof r=="function"&&typeof r.__original=="function"&&typeof r.__unwrap=="function"&&r.__wrapped===!0}t.isWrapped=e}),$n=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.baggageUtils=void 0,r($Q(),t),r(jQ(),t),r($1(),t),r(q1(),t),r(XQ(),t),r(ZQ(),t),r(eX(),t),r(Sb(),t),t.baggageUtils=M1(),r(B1(),t),r(tX(),t),r(nX(),t),r(iX(),t),r(oX(),t),r(V1(),t),r(W1(),t),r(sX(),t),r(aX(),t),r(_b(),t),r(H1(),t),r(U1(),t),r(j1(),t),r(cX(),t),r(lX(),t),r(Sb(),t)}),uX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExceptionEventName=void 0,t.ExceptionEventName="exception"}),G1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Span=void 0;var e=ft(),r=$n(),n=Vu(),i=uX(),o=class{constructor(s,a,c,l,u,d,f=[],p=r.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:e.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=c,this._spanContext=l,this.parentSpanId=d,this.kind=u,this.links=f,this.startTime=r.timeInputToHrTime(p),this.resource=s.resource,this.instrumentationLibrary=s.instrumentationLibrary,this._spanLimits=s.getSpanLimits(),this._spanProcessor=s.getActiveSpanProcessor(),this._spanProcessor.onStart(this,a)}spanContext(){return this._spanContext}setAttribute(s,a){return a==null||this._isSpanEnded()?this:s.length===0?(e.diag.warn(`Invalid attribute key: ${s}`),this):r.isAttributeValue(a)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,s)?this:(this.attributes[s]=a,this):(e.diag.warn(`Invalid attribute value set for key: ${s}`),this)}setAttributes(s){for(let[a,c]of Object.entries(s))this.setAttribute(a,c);return this}addEvent(s,a,c){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(e.diag.warn("Dropping extra events."),this.events.shift()),r.isTimeInput(a)&&(typeof c>"u"&&(c=a),a=void 0),typeof c>"u"&&(c=r.hrTime()),this.events.push({name:s,attributes:a,time:r.timeInputToHrTime(c)}),this)}setStatus(s){return this._isSpanEnded()?this:(this.status=s,this)}updateName(s){return this._isSpanEnded()?this:(this.name=s,this)}end(s=r.hrTime()){if(this._isSpanEnded()){e.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=r.timeInputToHrTime(s),this._duration=r.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&e.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(s,a=r.hrTime()){let c={};typeof s=="string"?c[n.SemanticAttributes.EXCEPTION_MESSAGE]=s:s&&(s.code?c[n.SemanticAttributes.EXCEPTION_TYPE]=s.code.toString():s.name&&(c[n.SemanticAttributes.EXCEPTION_TYPE]=s.name),s.message&&(c[n.SemanticAttributes.EXCEPTION_MESSAGE]=s.message),s.stack&&(c[n.SemanticAttributes.EXCEPTION_STACKTRACE]=s.stack)),c[n.SemanticAttributes.EXCEPTION_TYPE]||c[n.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(i.ExceptionEventName,c,a):e.diag.warn(`Failed to record an exception ${s}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&e.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}};t.Span=o}),z1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildSamplerFromEnv=t.DEFAULT_CONFIG=void 0;var e=ft(),r=$n(),n=r.getEnv(),i=r.TracesSamplerValues.AlwaysOn;t.DEFAULT_CONFIG={sampler:o(n),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:r.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:r.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:r.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};function o(c=r.getEnv()){switch(c.OTEL_TRACES_SAMPLER){case r.TracesSamplerValues.AlwaysOn:return new r.AlwaysOnSampler;case r.TracesSamplerValues.AlwaysOff:return new r.AlwaysOffSampler;case r.TracesSamplerValues.ParentBasedAlwaysOn:return new r.ParentBasedSampler({root:new r.AlwaysOnSampler});case r.TracesSamplerValues.ParentBasedAlwaysOff:return new r.ParentBasedSampler({root:new r.AlwaysOffSampler});case r.TracesSamplerValues.TraceIdRatio:return new r.TraceIdRatioBasedSampler(a(c));case r.TracesSamplerValues.ParentBasedTraceIdRatio:return new r.ParentBasedSampler({root:new r.TraceIdRatioBasedSampler(a(c))});default:return e.diag.error(`OTEL_TRACES_SAMPLER value "${c.OTEL_TRACES_SAMPLER} invalid, defaulting to ${i}".`),new r.AlwaysOnSampler}}t.buildSamplerFromEnv=o;var s=1;function a(c){if(c.OTEL_TRACES_SAMPLER_ARG===void 0||c.OTEL_TRACES_SAMPLER_ARG==="")return e.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${s}.`),s;let l=Number(c.OTEL_TRACES_SAMPLER_ARG);return isNaN(l)?(e.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${s}.`),s):l<0||l>1?(e.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${s}.`),s):l}}),dX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeConfig=void 0;var e=z1();function r(n){let i={sampler:e.buildSamplerFromEnv()},o=Object.assign({},e.DEFAULT_CONFIG,i,n);return o.spanLimits=Object.assign({},e.DEFAULT_CONFIG.spanLimits,n.spanLimits||{}),o}t.mergeConfig=r}),fX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tracer=void 0;var e=ft(),r=$n(),n=G1(),i=dX(),o=class{constructor(a,c,l){this._tracerProvider=l;let u=i.mergeConfig(c);this._sampler=u.sampler,this._spanLimits=u.spanLimits,this._idGenerator=c.idGenerator||new r.RandomIdGenerator,this.resource=l.resource,this.instrumentationLibrary=a}startSpan(a,c={},l=e.context.active()){var u,d;if(r.isTracingSuppressed(l))return e.diag.debug("Instrumentation suppressed, returning Noop Span"),e.trace.wrapSpanContext(e.INVALID_SPAN_CONTEXT);let f=s(c,l),p=this._idGenerator.generateSpanId(),h,m,g;!f||!e.trace.isSpanContextValid(f)?h=this._idGenerator.generateTraceId():(h=f.traceId,m=f.traceState,g=f.spanId);let v=(u=c.kind)!==null&&u!==void 0?u:e.SpanKind.INTERNAL,w=(d=c.links)!==null&&d!==void 0?d:[],b=r.sanitizeAttributes(c.attributes),C=this._sampler.shouldSample(c.root?e.trace.setSpanContext(l,e.INVALID_SPAN_CONTEXT):l,h,a,v,b,w),S=C.decision===e.SamplingDecision.RECORD_AND_SAMPLED?e.TraceFlags.SAMPLED:e.TraceFlags.NONE,P={traceId:h,spanId:p,traceFlags:S,traceState:m};if(C.decision===e.SamplingDecision.NOT_RECORD)return e.diag.debug("Recording is off, propagating context in a non-recording span"),e.trace.wrapSpanContext(P);let _=new n.Span(this,l,a,P,v,g,w,c.startTime);return _.setAttributes(Object.assign(b,C.attributes)),_}startActiveSpan(a,c,l,u){let d,f,p;if(arguments.length<2)return;arguments.length===2?p=c:arguments.length===3?(d=c,p=l):(d=c,f=l,p=u);let h=f!=null?f:e.context.active(),m=this.startSpan(a,d,h),g=e.trace.setSpan(h,m);return e.context.with(g,p,void 0,m)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};t.Tracer=o;function s(a,c){if(!a.root)return e.trace.getSpanContext(c)}}),pX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultServiceName=void 0;function e(){return`unknown_service:${process.argv0}`}t.defaultServiceName=e}),hX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detectResources=void 0;var e=Y1(),r=ft(),n=require("util"),i=async(s={})=>{let a=Object.assign(s),c=await Promise.all((a.detectors||[]).map(async l=>{try{let u=await l.detect(a);return r.diag.debug(`${l.constructor.name} found resource.`,u),u}catch(u){return r.diag.debug(`${l.constructor.name} failed: ${u.message}`),e.Resource.empty()}}));return o(c),c.reduce((l,u)=>l.merge(u),e.Resource.empty())};t.detectResources=i;var o=s=>{s.forEach(a=>{if(Object.keys(a.attributes).length>0){let c=n.inspect(a.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});r.diag.verbose(c)}})}}),mX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.envDetector=void 0;var e=ft(),r=$n(),n=Vu(),i=xb(),o=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(s){let a={},c=r.getEnv(),l=c.OTEL_RESOURCE_ATTRIBUTES,u=c.OTEL_SERVICE_NAME;if(l)try{let d=this._parseResourceAttributes(l);Object.assign(a,d)}catch(d){e.diag.debug(`EnvDetector failed: ${d.message}`)}return u&&(a[n.ResourceAttributes.SERVICE_NAME]=u),new i.Resource(a)}_parseResourceAttributes(s){if(!s)return{};let a={},c=s.split(this._COMMA_SEPARATOR,-1);for(let l of c){let u=l.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(u.length!==2)continue;let[d,f]=u;if(d=d.trim(),f=f.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(d))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(f))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);a[d]=f}return a}_isValid(s){return s.length<=this._MAX_LENGTH&&this._isPrintableString(s)}_isPrintableString(s){for(let a=0;a<s.length;a++){let c=s.charAt(a);if(c<=" "||c>="~")return!1}return!0}_isValidAndNotEmpty(s){return s.length>0&&this._isValid(s)}};t.envDetector=new o}),gX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processDetector=void 0;var e=ft(),r=Vu(),n=xb(),i=class{async detect(o){let s={[r.ResourceAttributes.PROCESS_PID]:process.pid,[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[r.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[r.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(s,o)}_getResourceAttributes(o,s){return o[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||o[r.ResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||o[r.ResourceAttributes.PROCESS_COMMAND]===""||o[r.ResourceAttributes.PROCESS_COMMAND_LINE]===""?(e.diag.debug("ProcessDetector failed: Unable to find required process resources. "),n.Resource.empty()):new n.Resource(Object.assign({},o))}};t.processDetector=new i}),vX=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(mX(),t),r(gX(),t)}),yX=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(pX(),t),r(hX(),t),r(vX(),t)}),K1=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(yX(),t)}),Y1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Resource=void 0;var e=Vu(),r=$n(),n=K1(),i=class{constructor(o){this.attributes=o}static empty(){return i.EMPTY}static default(){return new i({[e.ResourceAttributes.SERVICE_NAME]:n.defaultServiceName(),[e.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.SDK_INFO[e.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[e.ResourceAttributes.TELEMETRY_SDK_NAME]:r.SDK_INFO[e.ResourceAttributes.TELEMETRY_SDK_NAME],[e.ResourceAttributes.TELEMETRY_SDK_VERSION]:r.SDK_INFO[e.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(o){if(!o||!Object.keys(o.attributes).length)return this;let s=Object.assign({},this.attributes,o.attributes);return new i(s)}};t.Resource=i,i.EMPTY=new i({})}),wX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),CX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),xb=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(Y1(),t),r(K1(),t),r(wX(),t),r(CX(),t)}),bX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiSpanProcessor=void 0;var e=$n(),r=class{constructor(n){this._spanProcessors=n}forceFlush(){let n=[];for(let i of this._spanProcessors)n.push(i.forceFlush());return new Promise(i=>{Promise.all(n).then(()=>{i()}).catch(o=>{e.globalErrorHandler(o||new Error("MultiSpanProcessor: forceFlush failed")),i()})})}onStart(n,i){for(let o of this._spanProcessors)o.onStart(n,i)}onEnd(n){for(let i of this._spanProcessors)i.onEnd(n)}shutdown(){let n=[];for(let i of this._spanProcessors)n.push(i.shutdown());return new Promise((i,o)=>{Promise.all(n).then(()=>{i()},o)})}};t.MultiSpanProcessor=r}),J1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopSpanProcessor=void 0;var e=class{onStart(r,n){}onEnd(r){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};t.NoopSpanProcessor=e}),EX=O((t,e)=>{var r=200,n="__lodash_hash_undefined__",i=800,o=16,s=9007199254740991,a="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",u="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Function]",h="[object GeneratorFunction]",m="[object Map]",g="[object Number]",v="[object Null]",w="[object Object]",b="[object Proxy]",C="[object RegExp]",S="[object Set]",P="[object String]",_="[object Undefined]",k="[object WeakMap]",T="[object ArrayBuffer]",A="[object DataView]",M="[object Float32Array]",j="[object Float64Array]",J="[object Int8Array]",Y="[object Int16Array]",oe="[object Int32Array]",re="[object Uint8Array]",F="[object Uint8ClampedArray]",L="[object Uint16Array]",q="[object Uint32Array]",W=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,ie=/^(?:0|[1-9]\d*)$/,te={};te[M]=te[j]=te[J]=te[Y]=te[oe]=te[re]=te[F]=te[L]=te[q]=!0,te[a]=te[c]=te[T]=te[u]=te[A]=te[d]=te[f]=te[p]=te[m]=te[g]=te[w]=te[C]=te[S]=te[P]=te[k]=!1;var _e=typeof global=="object"&&global&&global.Object===Object&&global,ke=typeof self=="object"&&self&&self.Object===Object&&self,Pe=_e||ke||Function("return this")(),De=typeof t=="object"&&t&&!t.nodeType&&t,pe=De&&typeof e=="object"&&e&&!e.nodeType&&e,yt=pe&&pe.exports===De,It=yt&&_e.process,ve=function(){try{var D=pe&&pe.require&&pe.require("util").types;return D||It&&It.binding&&It.binding("util")}catch{}}(),fe=ve&&ve.isTypedArray;function be(D,B,G){switch(G.length){case 0:return D.call(B);case 1:return D.call(B,G[0]);case 2:return D.call(B,G[0],G[1]);case 3:return D.call(B,G[0],G[1],G[2])}return D.apply(B,G)}function je(D,B){for(var G=-1,le=Array(D);++G<D;)le[G]=B(G);return le}function Zo(D){return function(B){return D(B)}}function es(D,B){return D==null?void 0:D[B]}function Q(D,B){return function(G){return D(B(G))}}var ts=Array.prototype,rs=Function.prototype,Rr=Object.prototype,ct=Pe["__core-js_shared__"],zn=rs.toString,dr=Rr.hasOwnProperty,Qi=function(){var D=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||"");return D?"Symbol(src)_1."+D:""}(),Xi=Rr.toString,Ge=zn.call(Object),ns=RegExp("^"+zn.call(dr).replace(W,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kn=yt?Pe.Buffer:void 0,Zi=Pe.Symbol,eo=Pe.Uint8Array,Et=Kn?Kn.allocUnsafe:void 0,Bt=Q(Object.getPrototypeOf,Object),wr=Object.create,Yn=Rr.propertyIsEnumerable,Or=ts.splice,Tt=Zi?Zi.toStringTag:void 0,At=function(){try{var D=pv(Object,"defineProperty");return D({},"",{}),D}catch{}}(),Te=Kn?Kn.isBuffer:void 0,_t=Math.max,ce=Date.now,to=pv(Pe,"Map"),kn=pv(Object,"create"),we=function(){function D(){}return function(B){if(!ys(B))return{};if(wr)return wr(B);D.prototype=B;var G=new D;return D.prototype=void 0,G}}();function Nr(D){var B=-1,G=D==null?0:D.length;for(this.clear();++B<G;){var le=D[B];this.set(le[0],le[1])}}function is(){this.__data__=kn?kn(null):{},this.size=0}function os(D){var B=this.has(D)&&delete this.__data__[D];return this.size-=B?1:0,B}function ss(D){var B=this.__data__;if(kn){var G=B[D];return G===n?void 0:G}return dr.call(B,D)?B[D]:void 0}function as(D){var B=this.__data__;return kn?B[D]!==void 0:dr.call(B,D)}function cs(D,B){var G=this.__data__;return this.size+=this.has(D)?0:1,G[D]=kn&&B===void 0?n:B,this}Nr.prototype.clear=is,Nr.prototype.delete=os,Nr.prototype.get=ss,Nr.prototype.has=as,Nr.prototype.set=cs;function fr(D){var B=-1,G=D==null?0:D.length;for(this.clear();++B<G;){var le=D[B];this.set(le[0],le[1])}}function ls(){this.__data__=[],this.size=0}function us(D){var B=this.__data__,G=Z(B,D);if(G<0)return!1;var le=B.length-1;return G==le?B.pop():Or.call(B,G,1),--this.size,!0}function er(D){var B=this.__data__,G=Z(B,D);return G<0?void 0:B[G][1]}function ds(D){return Z(this.__data__,D)>-1}function fs(D,B){var G=this.__data__,le=Z(G,D);return le<0?(++this.size,G.push([D,B])):G[le][1]=B,this}fr.prototype.clear=ls,fr.prototype.delete=us,fr.prototype.get=er,fr.prototype.has=ds,fr.prototype.set=fs;function Qr(D){var B=-1,G=D==null?0:D.length;for(this.clear();++B<G;){var le=D[B];this.set(le[0],le[1])}}function ps(){this.size=0,this.__data__={hash:new Nr,map:new(to||fr),string:new Nr}}function hs(D){var B=rf(this,D).delete(D);return this.size-=B?1:0,B}function ms(D){return rf(this,D).get(D)}function Lr(D){return rf(this,D).has(D)}function gs(D,B){var G=rf(this,D),le=G.size;return G.set(D,B),this.size+=G.size==le?0:1,this}Qr.prototype.clear=ps,Qr.prototype.delete=hs,Qr.prototype.get=ms,Qr.prototype.has=Lr,Qr.prototype.set=gs;function Xr(D){var B=this.__data__=new fr(D);this.size=B.size}function vs(){this.__data__=new fr,this.size=0}function y(D){var B=this.__data__,G=B.delete(D);return this.size=B.size,G}function E(D){return this.__data__.get(D)}function x(D){return this.__data__.has(D)}function R(D,B){var G=this.__data__;if(G instanceof fr){var le=G.__data__;if(!to||le.length<r-1)return le.push([D,B]),this.size=++G.size,this;G=this.__data__=new Qr(le)}return G.set(D,B),this.size=G.size,this}Xr.prototype.clear=vs,Xr.prototype.delete=y,Xr.prototype.get=E,Xr.prototype.has=x,Xr.prototype.set=R;function N(D,B){var G=gv(D),le=!G&&mv(D),$e=!G&&!le&&B_(D),rt=!G&&!le&&!$e&&V_(D),lt=G||le||$e||rt,Le=lt?je(D.length,String):[],ut=Le.length;for(var Zr in D)(B||dr.call(D,Zr))&&!(lt&&(Zr=="length"||$e&&(Zr=="offset"||Zr=="parent")||rt&&(Zr=="buffer"||Zr=="byteLength"||Zr=="byteOffset")||j_(Zr,ut)))&&Le.push(Zr);return Le}function $(D,B,G){(G!==void 0&&!nf(D[B],G)||G===void 0&&!(B in D))&&X(D,B,G)}function H(D,B,G){var le=D[B];(!(dr.call(D,B)&&nf(le,G))||G===void 0&&!(B in D))&&X(D,B,G)}function Z(D,B){for(var G=D.length;G--;)if(nf(D[G][0],B))return G;return-1}function X(D,B,G){B=="__proto__"&&At?At(D,B,{configurable:!0,enumerable:!0,value:G,writable:!0}):D[B]=G}var qe=s3();function Re(D){return D==null?D===void 0?_:v:Tt&&Tt in Object(D)?a3(D):p3(D)}function Ie(D){return ul(D)&&Re(D)==a}function xe(D){if(!ys(D)||d3(D))return!1;var B=yv(D)?ns:z;return B.test(v3(D))}function Xe(D){return ul(D)&&H_(D.length)&&!!te[Re(D)]}function JV(D){if(!ys(D))return f3(D);var B=U_(D),G=[];for(var le in D)le=="constructor"&&(B||!dr.call(D,le))||G.push(le);return G}function $_(D,B,G,le,$e){D!==B&&qe(B,function(rt,lt){if($e||($e=new Xr),ys(rt))QV(D,B,lt,G,$_,le,$e);else{var Le=le?le(hv(D,lt),rt,lt+"",D,B,$e):void 0;Le===void 0&&(Le=rt),$(D,lt,Le)}},W_)}function QV(D,B,G,le,$e,rt,lt){var Le=hv(D,G),ut=hv(B,G),Zr=lt.get(ut);if(Zr){$(D,G,Zr);return}var Fr=rt?rt(Le,ut,G+"",D,B,lt):void 0,dl=Fr===void 0;if(dl){var wv=gv(ut),Cv=!wv&&B_(ut),z_=!wv&&!Cv&&V_(ut);Fr=ut,wv||Cv||z_?gv(Le)?Fr=Le:y3(Le)?Fr=n3(Le):Cv?(dl=!1,Fr=e3(ut,!0)):z_?(dl=!1,Fr=r3(ut,!0)):Fr=[]:w3(ut)||mv(ut)?(Fr=Le,mv(Le)?Fr=C3(Le):(!ys(Le)||yv(Le))&&(Fr=c3(ut))):dl=!1}dl&&(lt.set(ut,Fr),$e(Fr,ut,le,rt,lt),lt.delete(ut)),$(D,G,Fr)}function XV(D,B){return m3(h3(D,B,G_),D+"")}var ZV=At?function(D,B){return At(D,"toString",{configurable:!0,enumerable:!1,value:E3(B),writable:!0})}:G_;function e3(D,B){if(B)return D.slice();var G=D.length,le=Et?Et(G):new D.constructor(G);return D.copy(le),le}function t3(D){var B=new D.constructor(D.byteLength);return new eo(B).set(new eo(D)),B}function r3(D,B){var G=B?t3(D.buffer):D.buffer;return new D.constructor(G,D.byteOffset,D.length)}function n3(D,B){var G=-1,le=D.length;for(B||(B=Array(le));++G<le;)B[G]=D[G];return B}function i3(D,B,G,le){var $e=!G;G||(G={});for(var rt=-1,lt=B.length;++rt<lt;){var Le=B[rt],ut=le?le(G[Le],D[Le],Le,G,D):void 0;ut===void 0&&(ut=D[Le]),$e?X(G,Le,ut):H(G,Le,ut)}return G}function o3(D){return XV(function(B,G){var le=-1,$e=G.length,rt=$e>1?G[$e-1]:void 0,lt=$e>2?G[2]:void 0;for(rt=D.length>3&&typeof rt=="function"?($e--,rt):void 0,lt&&l3(G[0],G[1],lt)&&(rt=$e<3?void 0:rt,$e=1),B=Object(B);++le<$e;){var Le=G[le];Le&&D(B,Le,le,rt)}return B})}function s3(D){return function(B,G,le){for(var $e=-1,rt=Object(B),lt=le(B),Le=lt.length;Le--;){var ut=lt[D?Le:++$e];if(G(rt[ut],ut,rt)===!1)break}return B}}function rf(D,B){var G=D.__data__;return u3(B)?G[typeof B=="string"?"string":"hash"]:G.map}function pv(D,B){var G=es(D,B);return xe(G)?G:void 0}function a3(D){var B=dr.call(D,Tt),G=D[Tt];try{D[Tt]=void 0;var le=!0}catch{}var $e=Xi.call(D);return le&&(B?D[Tt]=G:delete D[Tt]),$e}function c3(D){return typeof D.constructor=="function"&&!U_(D)?we(Bt(D)):{}}function j_(D,B){var G=typeof D;return B=B!=null?B:s,!!B&&(G=="number"||G!="symbol"&&ie.test(D))&&D>-1&&D%1==0&&D<B}function l3(D,B,G){if(!ys(G))return!1;var le=typeof B;return(le=="number"?vv(G)&&j_(B,G.length):le=="string"&&B in G)?nf(G[B],D):!1}function u3(D){var B=typeof D;return B=="string"||B=="number"||B=="symbol"||B=="boolean"?D!=="__proto__":D===null}function d3(D){return!!Qi&&Qi in D}function U_(D){var B=D&&D.constructor,G=typeof B=="function"&&B.prototype||Rr;return D===G}function f3(D){var B=[];if(D!=null)for(var G in Object(D))B.push(G);return B}function p3(D){return Xi.call(D)}function h3(D,B,G){return B=_t(B===void 0?D.length-1:B,0),function(){for(var le=arguments,$e=-1,rt=_t(le.length-B,0),lt=Array(rt);++$e<rt;)lt[$e]=le[B+$e];$e=-1;for(var Le=Array(B+1);++$e<B;)Le[$e]=le[$e];return Le[B]=G(lt),be(D,this,Le)}}function hv(D,B){if(!(B==="constructor"&&typeof D[B]=="function")&&B!="__proto__")return D[B]}var m3=g3(ZV);function g3(D){var B=0,G=0;return function(){var le=ce(),$e=o-(le-G);if(G=le,$e>0){if(++B>=i)return arguments[0]}else B=0;return D.apply(void 0,arguments)}}function v3(D){if(D!=null){try{return zn.call(D)}catch{}try{return D+""}catch{}}return""}function nf(D,B){return D===B||D!==D&&B!==B}var mv=Ie(function(){return arguments}())?Ie:function(D){return ul(D)&&dr.call(D,"callee")&&!Yn.call(D,"callee")},gv=Array.isArray;function vv(D){return D!=null&&H_(D.length)&&!yv(D)}function y3(D){return ul(D)&&vv(D)}var B_=Te||_3;function yv(D){if(!ys(D))return!1;var B=Re(D);return B==p||B==h||B==l||B==b}function H_(D){return typeof D=="number"&&D>-1&&D%1==0&&D<=s}function ys(D){var B=typeof D;return D!=null&&(B=="object"||B=="function")}function ul(D){return D!=null&&typeof D=="object"}function w3(D){if(!ul(D)||Re(D)!=w)return!1;var B=Bt(D);if(B===null)return!0;var G=dr.call(B,"constructor")&&B.constructor;return typeof G=="function"&&G instanceof G&&zn.call(G)==Ge}var V_=fe?Zo(fe):Xe;function C3(D){return i3(D,W_(D))}function W_(D){return vv(D)?N(D,!0):JV(D)}var b3=o3(function(D,B,G){$_(D,B,G)});function E3(D){return function(){return D}}function G_(D){return D}function _3(){return!1}e.exports=b3}),_X=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BatchSpanProcessorBase=void 0;var e=ft(),r=$n(),n=class{constructor(i,o){this._exporter=i,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let s=r.getEnv();this._maxExportBatchSize=typeof(o==null?void 0:o.maxExportBatchSize)=="number"?o.maxExportBatchSize:s.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(o==null?void 0:o.maxQueueSize)=="number"?o.maxQueueSize:s.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(o==null?void 0:o.scheduledDelayMillis)=="number"?o.scheduledDelayMillis:s.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(o==null?void 0:o.exportTimeoutMillis)=="number"?o.exportTimeoutMillis:s.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(i){}onEnd(i){this._isShutdown||this._addToBuffer(i)}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((i,o)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(i).catch(s=>{o(s)})}),this._shuttingDownPromise)}_addToBuffer(i){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(i),this._maybeStartTimer())}_flushAll(){return new Promise((i,o)=>{let s=[],a=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let c=0,l=a;c<l;c++)s.push(this._flushOneBatch());Promise.all(s).then(()=>{i()}).catch(o)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((i,o)=>{let s=setTimeout(()=>{o(new Error("Timeout"))},this._exportTimeoutMillis);e.context.with(r.suppressTracing(e.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),a=>{var c;clearTimeout(s),a.code===r.ExportResultCode.SUCCESS?i():o((c=a.error)!==null&&c!==void 0?c:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(i=>{r.globalErrorHandler(i)})},this._scheduledDelayMillis),r.unrefTimer(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};t.BatchSpanProcessorBase=n}),SX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BatchSpanProcessor=void 0;var e=_X(),r=class extends e.BatchSpanProcessorBase{onShutdown(){}};t.BatchSpanProcessor=r}),xX=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(SX(),t)}),Q1=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(xX(),t)}),PX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BasicTracerProvider=t.ForceFlushState=void 0;var e=ft(),r=$n(),n=xb(),i=X1(),o=z1(),s=bX(),a=J1(),c=EX(),l=Q1(),u;(function(f){f[f.resolved=0]="resolved",f[f.timeout=1]="timeout",f[f.error=2]="error",f[f.unresolved=3]="unresolved"})(u=t.ForceFlushState||(t.ForceFlushState={}));var d=class{constructor(f={}){var p;this._registeredSpanProcessors=[],this._tracers=new Map;let h=c({},o.DEFAULT_CONFIG,f);this.resource=(p=h.resource)!==null&&p!==void 0?p:n.Resource.empty(),this.resource=n.Resource.default().merge(this.resource),this._config=Object.assign({},h,{resource:this.resource});let m=this._buildExporterFromEnv();if(m!==void 0){let g=new l.BatchSpanProcessor(m);this.activeSpanProcessor=g}else this.activeSpanProcessor=new a.NoopSpanProcessor}getTracer(f,p){let h=`${f}@${p||""}`;return this._tracers.has(h)||this._tracers.set(h,new i.Tracer({name:f,version:p},this._config,this)),this._tracers.get(h)}addSpanProcessor(f){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(p=>e.diag.error("Error while trying to shutdown current span processor",p)),this._registeredSpanProcessors.push(f),this.activeSpanProcessor=new s.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(f={}){e.trace.setGlobalTracerProvider(this),f.propagator===void 0&&(f.propagator=this._buildPropagatorFromEnv()),f.contextManager&&e.context.setGlobalContextManager(f.contextManager),f.propagator&&e.propagation.setGlobalPropagator(f.propagator)}forceFlush(){let f=this._config.forceFlushTimeoutMillis,p=this._registeredSpanProcessors.map(h=>new Promise(m=>{let g,v=setTimeout(()=>{m(new Error(`Span processor did not completed within timeout period of ${f} ms`)),g=u.timeout},f);h.forceFlush().then(()=>{clearTimeout(v),g!==u.timeout&&(g=u.resolved,m(g))}).catch(w=>{clearTimeout(v),g=u.error,m(w)})}));return new Promise((h,m)=>{Promise.all(p).then(g=>{let v=g.filter(w=>w!==u.resolved);v.length>0?m(v):h()}).catch(g=>m([g]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(f){var p;return(p=d._registeredPropagators.get(f))===null||p===void 0?void 0:p()}_getSpanExporter(f){var p;return(p=d._registeredExporters.get(f))===null||p===void 0?void 0:p()}_buildPropagatorFromEnv(){let f=Array.from(new Set(r.getEnv().OTEL_PROPAGATORS)),p=f.map(h=>{let m=this._getPropagator(h);return m||e.diag.warn(`Propagator "${h}" requested through environment variable is unavailable.`),m}).reduce((h,m)=>(m&&h.push(m),h),[]);if(p.length!==0)return f.length===1?p[0]:new r.CompositePropagator({propagators:p})}_buildExporterFromEnv(){let f=r.getEnv().OTEL_TRACES_EXPORTER;if(f==="none")return;let p=this._getSpanExporter(f);return p||e.diag.error(`Exporter "${f}" requested through environment variable is unavailable.`),p}};t.BasicTracerProvider=d,d._registeredPropagators=new Map([["tracecontext",()=>new r.HttpTraceContextPropagator],["baggage",()=>new r.HttpBaggagePropagator]]),d._registeredExporters=new Map}),kX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleSpanExporter=void 0;var e=$n(),r=class{export(n,i){return this._sendSpans(n,i)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(n){return{traceId:n.spanContext().traceId,parentId:n.parentSpanId,name:n.name,id:n.spanContext().spanId,kind:n.kind,timestamp:e.hrTimeToMicroseconds(n.startTime),duration:e.hrTimeToMicroseconds(n.duration),attributes:n.attributes,status:n.status,events:n.events}}_sendSpans(n,i){for(let o of n)console.log(this._exportInfo(o));if(i)return i({code:e.ExportResultCode.SUCCESS})}};t.ConsoleSpanExporter=r}),IX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InMemorySpanExporter=void 0;var e=$n(),r=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(n,i){if(this._stopped)return i({code:e.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...n),setTimeout(()=>i({code:e.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};t.InMemorySpanExporter=r}),TX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),AX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleSpanProcessor=void 0;var e=ft(),r=$n(),n=class{constructor(i){this._exporter=i,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(i){}onEnd(i){this._isShutdown||e.context.with(r.suppressTracing(e.context.active()),()=>{this._exporter.export([i],o=>{var s;o.code!==r.ExportResultCode.SUCCESS&&r.globalErrorHandler((s=o.error)!==null&&s!==void 0?s:new Error(`SimpleSpanProcessor: span export failed (status ${o})`))})})}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((i,o)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(i).catch(s=>{o(s)})}),this._shuttingDownPromise)}};t.SimpleSpanProcessor=n}),DX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),RX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),OX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),NX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),X1=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(fX(),t),r(PX(),t),r(Q1(),t),r(kX(),t),r(IX(),t),r(TX(),t),r(AX(),t),r(DX(),t),r(J1(),t),r(G1(),t),r(RX(),t),r(OX(),t),r(NX(),t)}),LX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.azureCoreTracing=t.AzureMonitorSymbol=void 0;var e=Pt();t.AzureMonitorSymbol="Azure_Monitor_Tracer";var r=!1,n=function(o){if(r)return o;try{var s=X1(),a=ft(),c=new s.BasicTracerProvider,l=c.getTracer("applicationinsights tracer"),u=o.setTracer;o.setTracer=function(d){var f=d.startSpan;d.startSpan=function(p,h,m){var g=f.call(this,p,h,m),v=g.end;return g.end=function(){var w=v.apply(this,arguments);return e.channel.publish("azure-coretracing",g),w},g},d[t.AzureMonitorSymbol]=!0,u.call(this,d)},a.trace.getSpan(a.context.active()),o.setTracer(l),r=!0}catch{}return o};t.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:n};function i(){e.channel.registerMonkeyPatch("@azure/core-tracing",t.azureCoreTracing)}t.enable=i}),FX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.bunyan=void 0;var e=Pt(),r=function(i){var o=i.prototype._emit;return i.prototype._emit=function(s,a){var c=o.apply(this,arguments);if(!a){var l=c;l||(l=o.call(this,s,!0)),e.channel.publish("bunyan",{level:s.level,result:l})}return c},i};t.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:r};function n(){e.channel.registerMonkeyPatch("bunyan",t.bunyan)}t.enable=n}),MX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.console=void 0;var e=Pt(),r=require("stream"),n=function(o){var s=new r.Writable,a=new r.Writable;s.write=function(h){if(!h)return!0;var m=h.toString();return e.channel.publish("console",{message:m}),!0},a.write=function(h){if(!h)return!0;var m=h.toString();return e.channel.publish("console",{message:m,stderr:!0}),!0};for(var c=new o.Console(s,a),l=["log","info","warn","error","dir","time","timeEnd","trace","assert"],u=function(h){var m=o[h];m&&(o[h]=function(){if(c[h])try{c[h].apply(c,arguments)}catch{}return m.apply(o,arguments)})},d=0,f=l;d<f.length;d++){var p=f[d];u(p)}return o};t.console={versionSpecifier:">= 4.0.0",patch:n};function i(){e.channel.registerMonkeyPatch("console",t.console),require("console")}t.enable=i}),qX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.mongoCore=void 0;var e=Pt(),r=function(i){var o=i.Server.prototype.connect;return i.Server.prototype.connect=function(){var s=o.apply(this,arguments),a=this.s.pool.write;this.s.pool.write=function(){var l=typeof arguments[1]=="function"?1:2;return typeof arguments[l]=="function"&&(arguments[l]=e.channel.bindToContext(arguments[l])),a.apply(this,arguments)};var c=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=e.channel.bindToContext(arguments[1])),c.apply(this,arguments)},s},i};t.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:r};function n(){e.channel.registerMonkeyPatch("mongodb-core",t.mongoCore)}t.enable=n}),$X=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(c){for(var l,u=1,d=arguments.length;u<d;u++){l=arguments[u];for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(c[f]=l[f])}return c},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.mongo330=t.mongo3=t.mongo2=void 0;var r=Pt(),n=function(c){var l=c.instrument({operationIdGenerator:{next:function(){return r.channel.bindToContext(function(d){return d()})}}}),u={};return l.on("started",function(d){u[d.requestId]||(u[d.requestId]=e(e({},d),{time:new Date}))}),l.on("succeeded",function(d){var f=u[d.requestId];f&&delete u[d.requestId],typeof d.operationId=="function"?d.operationId(function(){return r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!0})}):r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!0})}),l.on("failed",function(d){var f=u[d.requestId];f&&delete u[d.requestId],typeof d.operationId=="function"?d.operationId(function(){return r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!1})}):r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!1})}),c},i=function(c){var l=c.instrument(),u={},d={};return l.on("started",function(f){u[f.requestId]||(d[f.requestId]=r.channel.bindToContext(function(p){return p()}),u[f.requestId]=e(e({},f),{time:new Date}))}),l.on("succeeded",function(f){var p=u[f.requestId];p&&delete u[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!0})}),delete d[f.requestId])}),l.on("failed",function(f){var p=u[f.requestId];p&&delete u[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!1})}),delete d[f.requestId])}),c},o=function(c){var l=c.Server.prototype.connect;return c.Server.prototype.connect=function(){var u=l.apply(this,arguments),d=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var p=typeof arguments[1]=="function"?1:2;return typeof arguments[p]=="function"&&(arguments[p]=r.channel.bindToContext(arguments[p])),d.apply(this,arguments)};var f=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=r.channel.bindToContext(arguments[1])),f.apply(this,arguments)},u},c},s=function(c){o(c);var l=c.instrument(),u={},d={};return l.on("started",function(f){u[f.requestId]||(d[f.requestId]=r.channel.bindToContext(function(p){return p()}),u[f.requestId]=f)}),l.on("succeeded",function(f){var p=u[f.requestId];p&&delete u[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!0})}),delete d[f.requestId])}),l.on("failed",function(f){var p=u[f.requestId];p&&delete u[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!1})}),delete d[f.requestId])}),c};t.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:n},t.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:i},t.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:s};function a(){r.channel.registerMonkeyPatch("mongodb",t.mongo2),r.channel.registerMonkeyPatch("mongodb",t.mongo3),r.channel.registerMonkeyPatch("mongodb",t.mongo330)}t.enable=a}),jX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.mysql=void 0;var e=Pt(),r=require("path"),n=function(o,s){var a=function(p,h){return function(m,g){var v=p[m];v&&(p[m]=function(){for(var w=arguments.length-1,b=arguments.length-1;b>=0;--b)if(typeof arguments[b]=="function"){w=b;break}else if(typeof arguments[b]<"u")break;var C=arguments[w],S={result:null,startTime:null,startDate:null};typeof C=="function"&&(g?(S.startTime=process.hrtime(),S.startDate=new Date,arguments[w]=e.channel.bindToContext(g(S,C))):arguments[w]=e.channel.bindToContext(C));var P=v.apply(this,arguments);return S.result=P,P})}},c=function(p,h){return a(p.prototype,h+".prototype")},l=["connect","changeUser","ping","statistics","end"],u=require(r.dirname(s)+"/lib/Connection");l.forEach(function(p){return c(u,"Connection")(p)}),a(u,"Connection")("createQuery",function(p,h){return function(m){var g=process.hrtime(p.startTime),v=g[0]*1e3+g[1]/1e6|0;e.channel.publish("mysql",{query:p.result,callbackArgs:arguments,err:m,duration:v,time:p.startDate}),h.apply(this,arguments)}});var d=["_enqueueCallback"],f=require(r.dirname(s)+"/lib/Pool");return d.forEach(function(p){return c(f,"Pool")(p)}),o};t.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:n};function i(){e.channel.registerMonkeyPatch("mysql",t.mysql)}t.enable=i}),UX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.postgresPool1=void 0;var e=Pt();function r(i){var o=i.prototype.connect;return i.prototype.connect=function(s){return s&&(arguments[0]=e.channel.bindToContext(s)),o.apply(this,arguments)},i}t.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:r};function n(){e.channel.registerMonkeyPatch("pg-pool",t.postgresPool1)}t.enable=n}),BX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.postgres7=t.postgres6=void 0;var e=Pt(),r=require("events");function n(s,a){var c=s.Client.prototype.query,l="__diagnosticOriginalFunc";return s.Client.prototype.query=function(u,d,f){var p={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},h=process.hrtime(),m;function g(v){v&&v[l]&&(v=v[l]);var w=e.channel.bindToContext(function(b,C){var S=process.hrtime(h);if(p.result=C&&{rowCount:C.rowCount,command:C.command},p.error=b,p.duration=Math.ceil(S[0]*1e3+S[1]/1e6),e.channel.publish("postgres",p),b){if(v)return v.apply(this,arguments);m&&m instanceof r.EventEmitter&&m.emit("error",b)}else v&&v.apply(this,arguments)});try{return Object.defineProperty(w,l,{value:v}),w}catch{return v}}try{typeof u=="string"?d instanceof Array?(p.query.preparable={text:u,args:d},f=g(f)):(p.query.text=u,f?f=g(f):d=g(d)):(typeof u.name=="string"?p.query.plan=u.name:u.values instanceof Array?p.query.preparable={text:u.text,args:u.values}:p.query.text=u.text,f?f=g(f):d?d=g(d):u.callback=g(u.callback))}catch{return c.apply(this,arguments)}return arguments[0]=u,arguments[1]=d,arguments[2]=f,arguments.length=arguments.length>3?arguments.length:3,m=c.apply(this,arguments),m},s}function i(s,a){var c=s.Client.prototype.query,l="__diagnosticOriginalFunc";return s.Client.prototype.query=function(u,d,f){var p=this,h=!!f,m={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},g=process.hrtime(),v;function w(b){b&&b[l]&&(b=b[l]);var C=e.channel.bindToContext(function(S,P){var _=process.hrtime(g);if(m.result=P&&{rowCount:P.rowCount,command:P.command},m.error=S,m.duration=Math.ceil(_[0]*1e3+_[1]/1e6),e.channel.publish("postgres",m),S){if(b)return b.apply(this,arguments);v&&v instanceof r.EventEmitter&&v.emit("error",S)}else b&&b.apply(this,arguments)});try{return Object.defineProperty(C,l,{value:b}),C}catch{return b}}try{typeof u=="string"?d instanceof Array?(m.query.preparable={text:u,args:d},h=typeof f=="function",f=h?w(f):f):(m.query.text=u,f?(h=typeof f=="function",f=h?w(f):f):(h=typeof d=="function",d=h?w(d):d)):(typeof u.name=="string"?m.query.plan=u.name:u.values instanceof Array?m.query.preparable={text:u.text,args:u.values}:m.query.text=u.text,f?(h=typeof f=="function",f=w(f)):d?(h=typeof d=="function",d=h?w(d):d):(h=typeof u.callback=="function",u.callback=h?w(u.callback):u.callback))}catch{return c.apply(this,arguments)}return arguments[0]=u,arguments[1]=d,arguments[2]=f,arguments.length=arguments.length>3?arguments.length:3,v=c.apply(this,arguments),h?v:v.then(function(b){return w()(void 0,b),new p._Promise(function(C,S){C(b)})}).catch(function(b){return w()(b,void 0),new p._Promise(function(C,S){S(b)})})},s}t.postgres6={versionSpecifier:"6.*",patch:n},t.postgres7={versionSpecifier:">=7.* <=8.*",patch:i};function o(){e.channel.registerMonkeyPatch("pg",t.postgres6),e.channel.registerMonkeyPatch("pg",t.postgres7)}t.enable=o}),HX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.redis=void 0;var e=Pt(),r=function(i){var o=i.RedisClient.prototype.internal_send_command;return i.RedisClient.prototype.internal_send_command=function(s){if(s){var a=s.callback;if(!a||!a.pubsubBound){var c=this.address,l=process.hrtime(),u=new Date;s.callback=e.channel.bindToContext(function(d,f){var p=process.hrtime(l),h=p[0]*1e3+p[1]/1e6|0;e.channel.publish("redis",{duration:h,address:c,commandObj:s,err:d,result:f,time:u}),typeof a=="function"&&a.apply(this,arguments)}),s.callback.pubsubBound=!0}}return o.call(this,s)},i};t.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:r};function n(){e.channel.registerMonkeyPatch("redis",t.redis)}t.enable=n}),VX=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(o){for(var s,a=1,c=arguments.length;a<c;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(o[l]=s[l])}return o},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.tedious=void 0;var r=Pt(),n=function(o){var s=o.Connection.prototype.makeRequest;return o.Connection.prototype.makeRequest=function(){function a(l){var u=process.hrtime(),d={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return r.channel.bindToContext(function(f,p,h){var m=process.hrtime(u);d=e(e({},d),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!f&&{rowCount:p,rows:h},query:{text:this.parametersByName.statement.value},error:f,duration:Math.ceil(m[0]*1e3+m[1]/1e6)}),r.channel.publish("tedious",d),l.call(this,f,p,h)})}var c=arguments[0];arguments[0].callback=a(c.callback),s.apply(this,arguments)},o};t.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:n};function i(){r.channel.registerMonkeyPatch("tedious",t.tedious)}t.enable=i}),WX=O(t=>{"use strict";var e=t&&t.__extends||function(){var a=function(c,l){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(u[f]=d[f])},a(c,l)};return function(c,l){a(c,l);function u(){this.constructor=c}c.prototype=l===null?Object.create(l):(u.prototype=l.prototype,new u)}}(),r=t&&t.__rest||function(a,c){var l={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&c.indexOf(u)<0&&(l[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)c.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(l[u[d]]=a[u[d]]);return l};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.winston2=t.winston3=void 0;var n=Pt(),i=function(a){var c=a.Logger.prototype.log,l,u=function(d,f,p){var h;return l===a.config.npm.levels?h="npm":l===a.config.syslog.levels?h="syslog":h="unknown",n.channel.publish("winston",{level:d,message:f,meta:p,levelKind:h}),f};return a.Logger.prototype.log=function(){return l=this.levels,!this.filters||this.filters.length===0?this.filters=[u]:this.filters[this.filters.length-1]!==u&&(this.filters=this.filters.filter(function(d){return d!==u}),this.filters.push(u)),c.apply(this,arguments)},a},o=function(a){var c=function(p,h){var m;return p.config.npm.levels[h]!=null?m="npm":p.config.syslog.levels[h]!=null?m="syslog":m="unknown",m},l=function(p){e(h,p);function h(m,g){var v=p.call(this,g)||this;return v.winston=m,v}return h.prototype.log=function(m,g){var v=m.message,w=m.level,b=m.meta,C=r(m,["message","level","meta"]);w=typeof Symbol.for=="function"?m[Symbol.for("level")]:w,v=m instanceof Error?m:v;var S=c(this.winston,w);b=b||{};for(var P in C)C.hasOwnProperty(P)&&(b[P]=C[P]);n.channel.publish("winston",{message:v,level:w,levelKind:S,meta:b}),g()},h}(a.Transport);function u(){var p=arguments[0].levels||a.config.npm.levels,h;for(var m in p)p.hasOwnProperty(m)&&(h=h===void 0||p[m]>p[h]?m:h);this.add(new l(a,{level:h}))}var d=a.createLogger;a.createLogger=function(){var p=arguments[0].levels||a.config.npm.levels,h;for(var m in p)p.hasOwnProperty(m)&&(h=h===void 0||p[m]>p[h]?m:h);var g=d.apply(this,arguments);g.add(new l(a,{level:h}));var v=g.configure;return g.configure=function(){v.apply(this,arguments),u.apply(this,arguments)},g};var f=a.configure;return a.configure=function(){f.apply(this,arguments),u.apply(this,arguments)},a.add(new l(a)),a};t.winston3={versionSpecifier:"3.x",patch:o},t.winston2={versionSpecifier:"2.x",patch:i};function s(){n.channel.registerMonkeyPatch("winston",t.winston2),n.channel.registerMonkeyPatch("winston",t.winston3)}t.enable=s}),GX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.tedious=t.pgPool=t.pg=t.winston=t.redis=t.mysql=t.mongodb=t.mongodbCore=t.console=t.bunyan=t.azuresdk=void 0;var e=LX();t.azuresdk=e;var r=FX();t.bunyan=r;var n=MX();t.console=n;var i=qX();t.mongodbCore=i;var o=$X();t.mongodb=o;var s=jX();t.mysql=s;var a=UX();t.pgPool=a;var c=BX();t.pg=c;var l=HX();t.redis=l;var u=VX();t.tedious=u;var d=WX();t.winston=d;function f(){r.enable(),n.enable(),i.enable(),o.enable(),s.enable(),c.enable(),a.enable(),l.enable(),d.enable(),e.enable(),u.enable()}t.enable=f}),Pb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextPreservation=t.IsInitialized=void 0;var e=x1(),r=Jt();t.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var n="DiagnosticChannel";if(t.IsInitialized){i=GX(),o=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",s=o.split(","),a={bunyan:i.bunyan,console:i.console,mongodb:i.mongodb,mongodbCore:i.mongodbCore,mysql:i.mysql,redis:i.redis,pg:i.pg,pgPool:i.pgPool,winston:i.winston,azuresdk:i.azuresdk};for(c in a)s.indexOf(c)===-1&&(a[c].enable(),r.info(n,"Subscribed to "+c+" events"));s.length>0&&r.info(n,"Some modules will not be patched",s)}else r.info(n,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var i,o,s,a,c;function l(u){if(t.IsInitialized){var d=Pt();d.channel.addContextPreservation(u),d.channel.spanContextPropagator=e.AsyncScopeManager}}t.registerContextPreservation=l}),Wu=O((t,e)=>{"use strict";e.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}}),bn=O((t,e)=>{"use strict";var r=t&&t.__assign||function(){return r=Object.assign||function(u){for(var d,f=1,p=arguments.length;f<p;f++){d=arguments[f];for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(u[h]=d[h])}return u},r.apply(this,arguments)},n=require("http"),i=require("https"),o=require("url"),s=require("constants"),a=Jt(),c=Wu(),l=function(){function u(){}return u.getCookie=function(d,f){var p="";if(d&&d.length&&typeof f=="string")for(var h=d+"=",m=f.split(";"),g=0;g<m.length;g++){var f=m[g];if(f=u.trim(f),f&&f.indexOf(h)===0){p=f.substring(h.length,m[g].length);break}}return p},u.trim=function(d){return typeof d=="string"?d.replace(/^\s+|\s+$/g,""):""},u.int32ArrayToBase64=function(d){var f=function(v,w){return String.fromCharCode(v>>w&255)},p=function(v){return f(v,24)+f(v,16)+f(v,8)+f(v,0)},h=d.map(p).join(""),m=Buffer.from?Buffer.from(h,"binary"):new Buffer(h,"binary"),g=m.toString("base64");return g.substr(0,g.indexOf("="))},u.random32=function(){return 4294967296*Math.random()|0},u.randomu32=function(){return u.random32()+2147483648},u.w3cTraceId=function(){for(var d=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],f="",p,h=0;h<4;h++)p=u.random32(),f+=d[p&15]+d[p>>4&15]+d[p>>8&15]+d[p>>12&15]+d[p>>16&15]+d[p>>20&15]+d[p>>24&15]+d[p>>28&15];var m=d[8+Math.random()*4|0];return f.substr(0,8)+f.substr(9,4)+"4"+f.substr(13,3)+m+f.substr(16,3)+f.substr(19,12)},u.w3cSpanId=function(){return u.w3cTraceId().substring(16)},u.isValidW3CId=function(d){return d.length===32&&d!=="00000000000000000000000000000000"},u.isArray=function(d){return Object.prototype.toString.call(d)==="[object Array]"},u.isError=function(d){return d instanceof Error},u.isPrimitive=function(d){var f=typeof d;return f==="string"||f==="number"||f==="boolean"},u.isDate=function(d){return Object.prototype.toString.call(d)==="[object Date]"},u.msToTimeSpan=function(d){(isNaN(d)||d<0)&&(d=0);var f=(d/1e3%60).toFixed(7).replace(/0{0,4}$/,""),p=""+Math.floor(d/(1e3*60))%60,h=""+Math.floor(d/(1e3*60*60))%24,m=Math.floor(d/(1e3*60*60*24));f=f.indexOf(".")<2?"0"+f:f,p=p.length<2?"0"+p:p,h=h.length<2?"0"+h:h;var g=m>0?m+".":"";return g+h+":"+p+":"+f},u.extractError=function(d){var f=d;return{message:d.message,code:f.code||f.id||""}},u.extractObject=function(d){return d instanceof Error?u.extractError(d):typeof d.toJSON=="function"?d.toJSON():d},u.validateStringMap=function(d){if(typeof d!="object"){a.info("Invalid properties dropped from payload");return}var f={};for(var p in d){var h="",m=d[p],g=typeof m;if(u.isPrimitive(m))h=m.toString();else if(m===null||g==="undefined")h="";else if(g==="function"){a.info("key: "+p+" was function; will not serialize");continue}else{var v=u.isArray(m)?m:u.extractObject(m);try{u.isPrimitive(v)?h=v:h=JSON.stringify(v)}catch(w){h=m.constructor.name.toString()+" (Error: "+w.message+")",a.info("key: "+p+", could not be serialized")}}f[p]=h.substring(0,u.MAX_PROPERTY_LENGTH)}return f},u.canIncludeCorrelationHeader=function(d,f){var p=d&&d.config&&d.config.correlationHeaderExcludedDomains;if(!p||p.length==0||!f)return!0;for(var h=0;h<p.length;h++){var m=new RegExp(p[h].replace(/\./g,".").replace(/\*/g,".*"));if(m.test(o.parse(f).hostname))return!1}return!0},u.getCorrelationContextTarget=function(d,f){var p=d.headers&&d.headers[c.requestContextHeader];if(p)for(var h=p.split(","),m=0;m<h.length;++m){var g=h[m].split("=");if(g.length==2&&g[0]==f)return g[1]}},u.makeRequest=function(d,f,p,h){f&&f.indexOf("//")===0&&(f="https:"+f);var m=o.parse(f),g=r(r({},p),{host:m.hostname,port:m.port,path:m.pathname}),v=void 0;if(m.protocol==="https:"&&(v=d.proxyHttpsUrl||void 0),m.protocol==="http:"&&(v=d.proxyHttpUrl||void 0),v){v.indexOf("//")===0&&(v="http:"+v);var w=o.parse(v);w.protocol==="https:"?(a.info("Proxies that use HTTPS are not supported"),v=void 0):g=r(r({},g),{host:w.hostname,port:w.port||"80",path:f,headers:r(r({},g.headers),{Host:m.hostname})})}var b=m.protocol==="https:"&&!v;return b&&d.httpsAgent!==void 0?g.agent=d.httpsAgent:!b&&d.httpAgent!==void 0?g.agent=d.httpAgent:b&&(g.agent=u.tlsRestrictedAgent),b?i.request(g,h):n.request(g,h)},u.safeIncludeCorrelationHeader=function(d,f,p){var h;if(typeof p=="string")h=p;else if(p instanceof Array)h=p.join(",");else if(p&&typeof p.toString=="function")try{h=p.toString()}catch(m){a.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",m,p)}h?u.addCorrelationIdHeaderFromString(d,f,h):f.setHeader(c.requestContextHeader,c.requestContextSourceKey+"="+d.config.correlationId)},u.dumpObj=function(d){var f=Object.prototype.toString.call(d),p="";return f==="[object Error]"?p="{ stack: '"+d.stack+"', message: '"+d.message+"', name: '"+d.name+"'":p=JSON.stringify(d),f+p},u.addCorrelationIdHeaderFromString=function(d,f,p){var h=p.split(","),m=c.requestContextSourceKey+"=",g=h.some(function(v){return v.substring(0,m.length)===m});g||f.setHeader(c.requestContextHeader,p+","+c.requestContextSourceKey+"="+d.config.correlationId)},u.MAX_PROPERTY_LENGTH=8192,u.tlsRestrictedAgent=new i.Agent({keepAlive:!0,maxSockets:25,secureOptions:s.SSL_OP_NO_SSLv2|s.SSL_OP_NO_SSLv3|s.SSL_OP_NO_TLSv1|s.SSL_OP_NO_TLSv1_1}),u}();e.exports=l}),Ac=O((t,e)=>{"use strict";var r=bn(),n=Jt(),i=function(){function o(){}return o.queryCorrelationId=function(s,a){var c=s.profileQueryEndpoint+"/api/profiles/"+s.instrumentationKey+"/appId";if(o.completedLookups.hasOwnProperty(c)){a(o.completedLookups[c]);return}else if(o.pendingLookups[c]){o.pendingLookups[c].push(a);return}o.pendingLookups[c]=[a];var l=function(){if(o.pendingLookups[c]){var u={method:"GET",disableAppInsightsAutoCollection:!0};n.info(o.TAG,u);var d=r.makeRequest(s,c,u,function(f){if(f.statusCode===200){var p="";f.setEncoding("utf-8"),f.on("data",function(h){p+=h}),f.on("end",function(){n.info(o.TAG,p);var h=o.correlationIdPrefix+p;o.completedLookups[c]=h,o.pendingLookups[c]&&o.pendingLookups[c].forEach(function(m){return m(h)}),delete o.pendingLookups[c]})}else f.statusCode>=400&&f.statusCode<500?(o.completedLookups[c]=void 0,delete o.pendingLookups[c]):setTimeout(l,s.correlationIdRetryIntervalMs)});d&&(d.on("error",function(f){n.warn(o.TAG,f)}),d.end())}};setTimeout(l,0)},o.cancelCorrelationIdQuery=function(s,a){var c=s.profileQueryEndpoint+"/api/profiles/"+s.instrumentationKey+"/appId",l=o.pendingLookups[c];l&&(o.pendingLookups[c]=l.filter(function(u){return u!=a}),o.pendingLookups[c].length==0&&delete o.pendingLookups[c])},o.generateRequestId=function(s){if(s){s=s[0]=="|"?s:"|"+s,s[s.length-1]!=="."&&(s+=".");var a=(o.currentRootId++).toString(16);return o.appendSuffix(s,a,"_")}else return o.generateRootId()},o.getRootId=function(s){var a=s.indexOf(".");a<0&&(a=s.length);var c=s[0]==="|"?1:0;return s.substring(c,a)},o.generateRootId=function(){return"|"+r.w3cTraceId()+"."},o.appendSuffix=function(s,a,c){if(s.length+a.length<o.requestIdMaxLength)return s+a+c;var l=o.requestIdMaxLength-9;if(s.length>l)for(;l>1;--l){var u=s[l-1];if(u==="."||u==="_")break}if(l<=1)return o.generateRootId();for(a=r.randomu32().toString(16);a.length<8;)a="0"+a;return s.substring(0,l)+a+"#"},o.TAG="CorrelationIdManager",o.correlationIdPrefix="cid-v1:",o.w3cEnabled=!0,o.pendingLookups={},o.completedLookups={},o.requestIdMaxLength=1024,o.currentRootId=r.randomu32(),o}();e.exports=i}),dm=O((t,e)=>{"use strict";var r=bn(),n=Ac(),i=function(){function o(s,a){if(this.traceFlag=o.DEFAULT_TRACE_FLAG,this.version=o.DEFAULT_VERSION,s&&typeof s=="string")if(s.split(",").length>1)this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16);else{var c=s.trim().split("-"),l=c.length;l>=4?(this.version=c[0],this.traceId=c[1],this.spanId=c[2],this.traceFlag=c[3]):(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=o.DEFAULT_VERSION,this.traceId=r.w3cTraceId()),this.version==="00"&&l!==4&&(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=o.DEFAULT_VERSION,this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=o.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=o.DEFAULT_TRACE_FLAG,this.traceId=r.w3cTraceId()),o.isValidTraceId(this.traceId)||(this.traceId=r.w3cTraceId()),o.isValidSpanId(this.spanId)||(this.spanId=r.w3cTraceId().substr(0,16),this.traceId=r.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(a){this.parentId=a.slice();var u=n.getRootId(a);o.isValidTraceId(u)||(this.legacyRootId=u,u=r.w3cTraceId()),a.indexOf("|")!==-1&&(a=a.substring(1+a.substring(0,a.length-1).lastIndexOf("."),a.length-1)),this.traceId=u,this.spanId=a}else this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)}return o.isValidTraceId=function(s){return s.match(/^[0-9a-f]{32}$/)&&s!=="00000000000000000000000000000000"},o.isValidSpanId=function(s){return s.match(/^[0-9a-f]{16}$/)&&s!=="0000000000000000"},o.formatOpenTelemetryTraceFlags=function(s){var a="0"+s.toString(16);return a.substring(a.length-2)},o.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},o.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},o.prototype.updateSpanId=function(){this.spanId=r.w3cTraceId().substr(0,16)},o.DEFAULT_TRACE_FLAG="01",o.DEFAULT_VERSION="00",o}();e.exports=i}),Z1=O((t,e)=>{"use strict";var r=function(){function n(i){this.fieldmap=[],i&&(this.fieldmap=this.parseHeader(i))}return n.prototype.toString=function(){var i=this.fieldmap;return!i||i.length==0?null:i.join(", ")},n.validateKeyChars=function(i){var o=i.split("@");if(o.length==2){var s=o[0].trim(),a=o[1].trim(),c=Boolean(s.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),l=Boolean(a.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return c&&l}else if(o.length==1)return Boolean(i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},n.prototype.parseHeader=function(i){var o=[],s={},a=i.split(",");if(a.length>32)return null;for(var c=0,l=a;c<l.length;c++){var u=l[c],d=u.trim();if(d.length!==0){var f=d.split("=");if(f.length!==2||!n.validateKeyChars(f[0])||s[f[0]])return null;s[f[0]]=!0,o.push(d)}}return o},n.strict=!0,n}();e.exports=r}),qo=O((t,e)=>{"use strict";var r=function(){function n(){}return n}();e.exports=r}),zX=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=qo(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),eF=O((t,e)=>{"use strict";var r=function(){function n(){}return n}();e.exports=r}),KX=O((t,e)=>{"use strict";var r=function(){function n(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return n}();e.exports=r}),YX=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=eF(),i=function(o){r(s,o);function s(){return o.call(this)||this}return s}(n);e.exports=i}),tF=O((t,e)=>{"use strict";var r;(function(n){n[n.Measurement=0]="Measurement",n[n.Aggregation=1]="Aggregation"})(r||(r={})),e.exports=r}),JX=O((t,e)=>{"use strict";var r=tF(),n=function(){function i(){this.kind=r.Measurement}return i}();e.exports=n}),QX=O((t,e)=>{"use strict";var r=function(){function n(){this.ver=1,this.sampleRate=100,this.tags={}}return n}();e.exports=r}),rF=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=qo(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),XX=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=qo(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.exceptions=[],a.properties={},a.measurements={},a}return s}(n);e.exports=i}),ZX=O((t,e)=>{"use strict";var r=function(){function n(){this.hasFullStack=!0,this.parsedStack=[]}return n}();e.exports=r}),eZ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=qo(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a}return s}(n);e.exports=i}),tZ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=qo(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.metrics=[],a.properties={},a}return s}(n);e.exports=i}),rZ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=rF(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),nZ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=qo(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.success=!0,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),iZ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=qo(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),oZ=O((t,e)=>{"use strict";var r;(function(n){n[n.Verbose=0]="Verbose",n[n.Information=1]="Information",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.Critical=4]="Critical"})(r||(r={})),e.exports=r}),sZ=O((t,e)=>{"use strict";var r=function(){function n(){}return n}();e.exports=r}),nF=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvailabilityData=zX(),t.Base=eF(),t.ContextTagKeys=KX(),t.Data=YX(),t.DataPoint=JX(),t.DataPointType=tF(),t.Domain=qo(),t.Envelope=QX(),t.EventData=rF(),t.ExceptionData=XX(),t.ExceptionDetails=ZX(),t.MessageData=eZ(),t.MetricData=tZ(),t.PageViewData=rZ(),t.RemoteDependencyData=nZ(),t.RequestData=iZ(),t.SeverityLevel=oZ(),t.StackFrame=sZ()}),aZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.domainSupportsProperties=t.RemoteDependencyDataConstants=void 0;var e=nF(),r=function(){function i(){}return i.TYPE_HTTP="Http",i.TYPE_AI="Http (tracked component)",i}();t.RemoteDependencyDataConstants=r;function n(i){return"properties"in i||i instanceof e.EventData||i instanceof e.ExceptionData||i instanceof e.MessageData||i instanceof e.MetricData||i instanceof e.PageViewData||i instanceof e.RemoteDependencyData||i instanceof e.RequestData}t.domainSupportsProperties=n}),cZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),lZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),uZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),dZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),fZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),pZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),hZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),mZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),gZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),vZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),yZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),wZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),CZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryType=t.TelemetryTypeString=t.baseTypeToTelemetryType=t.telemetryTypeToBaseType=void 0;function e(i){switch(i){case n.Event:return"EventData";case n.Exception:return"ExceptionData";case n.Trace:return"MessageData";case n.Metric:return"MetricData";case n.Request:return"RequestData";case n.Dependency:return"RemoteDependencyData";case n.Availability:return"AvailabilityData";case n.PageView:return"PageViewData"}}t.telemetryTypeToBaseType=e;function r(i){switch(i){case"EventData":return n.Event;case"ExceptionData":return n.Exception;case"MessageData":return n.Trace;case"MetricData":return n.Metric;case"RequestData":return n.Request;case"RemoteDependencyData":return n.Dependency;case"AvailabilityData":return n.Availability;case"PageViewData":return n.PageView}}t.baseTypeToTelemetryType=r,t.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var n;(function(i){i[i.Event=0]="Event",i[i.Exception=1]="Exception",i[i.Trace=2]="Trace",i[i.Metric=3]="Metric",i[i.Request=4]="Request",i[i.Dependency=5]="Dependency",i[i.Availability=6]="Availability",i[i.PageView=7]="PageView"})(n=t.TelemetryType||(t.TelemetryType={}))}),bZ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(cZ(),t),r(lZ(),t),r(uZ(),t),r(dZ(),t),r(fZ(),t),r(pZ(),t),r(hZ(),t),r(mZ(),t),r(gZ(),t),r(vZ(),t),r(yZ(),t),r(wZ(),t),r(CZ(),t)}),EZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),_Z=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),SZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),xZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),PZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),kZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),IZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),TZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),AZ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(EZ(),t),r(_Z(),t),r(SZ(),t),r(xZ(),t),r(PZ(),t),r(kZ(),t),r(IZ(),t),r(TZ(),t)}),kr=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(aZ(),t),r(nF(),t),r(bZ(),t),r(AZ(),t)}),iF=O((t,e)=>{"use strict";var r=function(){function n(){}return n.prototype.getUrl=function(){return this.url},n.prototype.RequestParser=function(){this.startTime=+new Date},n.prototype._setStatus=function(i,o){var s=+new Date;this.duration=s-this.startTime,this.statusCode=i;var a=this.properties||{};if(o){if(typeof o=="string")a.error=o;else if(o instanceof Error)a.error=o.message;else if(typeof o=="object")for(var c in o)a[c]=o[c]&&o[c].toString&&o[c].toString()}this.properties=a},n.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},n}();e.exports=r}),oF=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var f=function(p,h){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&(m[v]=g[v])},f(p,h)};return function(p,h){f(p,h);function m(){this.constructor=p}p.prototype=h===null?Object.create(h):(m.prototype=h.prototype,new m)}}(),n=require("url"),i=kr(),o=bn(),s=Wu(),a=iF(),c=Ac(),l=Z1(),u=dm(),d=function(f){r(p,f);function p(h,m){var g=f.call(this)||this;return h&&(g.method=h.method,g.url=g._getAbsoluteUrl(h),g.startTime=+new Date,g.socketRemoteAddress=h.socket&&h.socket.remoteAddress,g.parseHeaders(h,m),h.connection&&(g.connectionRemoteAddress=h.connection.remoteAddress,g.legacySocketRemoteAddress=h.connection.socket&&h.connection.socket.remoteAddress)),g}return p.prototype.onError=function(h,m){this._setStatus(void 0,h),m&&(this.duration=m)},p.prototype.onResponse=function(h,m){this._setStatus(h.statusCode,void 0),m&&(this.duration=m)},p.prototype.getRequestTelemetry=function(h){var m={id:this.requestId,name:this.method+" "+n.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(h&&h.time?m.time=h.time:this.startTime&&(m.time=new Date(this.startTime)),h){for(var g in h)m[g]||(m[g]=h[g]);if(h.properties)for(var g in h.properties)m.properties[g]=h.properties[g]}return m},p.prototype.getRequestTags=function(h){var m={};for(var g in h)m[g]=h[g];return m[p.keys.locationIp]=h[p.keys.locationIp]||this._getIp(),m[p.keys.sessionId]=h[p.keys.sessionId]||this._getId("ai_session"),m[p.keys.userId]=h[p.keys.userId]||this._getId("ai_user"),m[p.keys.userAuthUserId]=h[p.keys.userAuthUserId]||this._getId("ai_authUser"),m[p.keys.operationName]=this.getOperationName(h),m[p.keys.operationParentId]=this.getOperationParentId(h),m[p.keys.operationId]=this.getOperationId(h),m},p.prototype.getOperationId=function(h){return h[p.keys.operationId]||this.operationId},p.prototype.getOperationParentId=function(h){return h[p.keys.operationParentId]||this.parentId||this.getOperationId(h)},p.prototype.getOperationName=function(h){return h[p.keys.operationName]||this.method+" "+n.parse(this.url).pathname},p.prototype.getRequestId=function(){return this.requestId},p.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},p.prototype.getTraceparent=function(){return this.traceparent},p.prototype.getTracestate=function(){return this.tracestate},p.prototype.getLegacyRootId=function(){return this.legacyRootId},p.prototype._getAbsoluteUrl=function(h){if(!h.headers)return h.url;var m=h.connection?h.connection.encrypted:null,g=n.parse(h.url),v=g.pathname,w=g.search,b=m||h.headers["x-forwarded-proto"]=="https"?"https":"http",C=n.format({protocol:b,host:h.headers.host,pathname:v,search:w});return C},p.prototype._getIp=function(){var h=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,m=function(v){var w=h.exec(v);if(w)return w[0]},g=m(this.rawHeaders["x-forwarded-for"])||m(this.rawHeaders["x-client-ip"])||m(this.rawHeaders["x-real-ip"])||m(this.connectionRemoteAddress)||m(this.socketRemoteAddress)||m(this.legacySocketRemoteAddress);return!g&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(g="127.0.0.1"),g},p.prototype._getId=function(h){var m=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",g=p.parseId(o.getCookie(h,m));return g},p.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},p.prototype.parseHeaders=function(h,m){if(this.rawHeaders=h.headers||h.rawHeaders,this.userAgent=h.headers&&h.headers["user-agent"],this.sourceCorrelationId=o.getCorrelationContextTarget(h,s.requestContextSourceKey),h.headers){var g=h.headers[s.traceStateHeader]?h.headers[s.traceStateHeader].toString():null,v=h.headers[s.traceparentHeader]?h.headers[s.traceparentHeader].toString():null,w=h.headers[s.requestIdHeader]?h.headers[s.requestIdHeader].toString():null,b=h.headers[s.parentIdHeader]?h.headers[s.parentIdHeader].toString():null,C=h.headers[s.rootIdHeader]?h.headers[s.rootIdHeader].toString():null;this.correlationContextHeader=h.headers[s.correlationContextHeader]?h.headers[s.correlationContextHeader].toString():null,c.w3cEnabled&&(v||g)?(this.traceparent=new u(v?v.toString():null),this.tracestate=v&&g&&new l(g?g.toString():null),this.setBackCompatFromThisTraceContext()):w?c.w3cEnabled?(this.traceparent=new u(null,w),this.setBackCompatFromThisTraceContext()):(this.parentId=w,this.requestId=c.generateRequestId(this.parentId),this.operationId=c.getRootId(this.requestId)):c.w3cEnabled?(this.traceparent=new u,this.traceparent.parentId=b,this.traceparent.legacyRootId=C||b,this.setBackCompatFromThisTraceContext()):(this.parentId=b,this.requestId=c.generateRequestId(C||this.parentId),this.correlationContextHeader=null,this.operationId=c.getRootId(this.requestId)),m&&(this.requestId=m,this.operationId=c.getRootId(this.requestId))}},p.parseId=function(h){var m=h.split("|");return m.length>0?m[0]:""},p.keys=new i.ContextTagKeys,p}(a);e.exports=d}),DZ=O((t,e)=>{t=e.exports=Q;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var y=Array.prototype.slice.call(arguments,0);y.unshift("SEMVER"),console.log.apply(console,y)}:r=function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=16,s=t.re=[],a=t.src=[],c=0,l=c++;a[l]="0|[1-9]\\d*";var u=c++;a[u]="[0-9]+";var d=c++;a[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=c++;a[f]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var p=c++;a[p]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var h=c++;a[h]="(?:"+a[l]+"|"+a[d]+")";var m=c++;a[m]="(?:"+a[u]+"|"+a[d]+")";var g=c++;a[g]="(?:-("+a[h]+"(?:\\."+a[h]+")*))";var v=c++;a[v]="(?:-?("+a[m]+"(?:\\."+a[m]+")*))";var w=c++;a[w]="[0-9A-Za-z-]+";var b=c++;a[b]="(?:\\+("+a[w]+"(?:\\."+a[w]+")*))";var C=c++,S="v?"+a[f]+a[g]+"?"+a[b]+"?";a[C]="^"+S+"$";var P="[v=\\s]*"+a[p]+a[v]+"?"+a[b]+"?",_=c++;a[_]="^"+P+"$";var k=c++;a[k]="((?:<|>)?=?)";var T=c++;a[T]=a[u]+"|x|X|\\*";var A=c++;a[A]=a[l]+"|x|X|\\*";var M=c++;a[M]="[v=\\s]*("+a[A]+")(?:\\.("+a[A]+")(?:\\.("+a[A]+")(?:"+a[g]+")?"+a[b]+"?)?)?";var j=c++;a[j]="[v=\\s]*("+a[T]+")(?:\\.("+a[T]+")(?:\\.("+a[T]+")(?:"+a[v]+")?"+a[b]+"?)?)?";var J=c++;a[J]="^"+a[k]+"\\s*"+a[M]+"$";var Y=c++;a[Y]="^"+a[k]+"\\s*"+a[j]+"$";var oe=c++;a[oe]="(?:^|[^\\d])(\\d{1,"+o+"})(?:\\.(\\d{1,"+o+"}))?(?:\\.(\\d{1,"+o+"}))?(?:$|[^\\d])";var re=c++;a[re]="(?:~>?)";var F=c++;a[F]="(\\s*)"+a[re]+"\\s+",s[F]=new RegExp(a[F],"g");var L="$1~",q=c++;a[q]="^"+a[re]+a[M]+"$";var W=c++;a[W]="^"+a[re]+a[j]+"$";var z=c++;a[z]="(?:\\^)";var ie=c++;a[ie]="(\\s*)"+a[z]+"\\s+",s[ie]=new RegExp(a[ie],"g");var te="$1^",_e=c++;a[_e]="^"+a[z]+a[M]+"$";var ke=c++;a[ke]="^"+a[z]+a[j]+"$";var Pe=c++;a[Pe]="^"+a[k]+"\\s*("+P+")$|^$";var De=c++;a[De]="^"+a[k]+"\\s*("+S+")$|^$";var pe=c++;a[pe]="(\\s*)"+a[k]+"\\s*("+P+"|"+a[M]+")",s[pe]=new RegExp(a[pe],"g");var yt="$1$2$3",It=c++;a[It]="^\\s*("+a[M]+")\\s+-\\s+("+a[M]+")\\s*$";var ve=c++;a[ve]="^\\s*("+a[j]+")\\s+-\\s+("+a[j]+")\\s*$";var fe=c++;for(a[fe]="(<|>)?=?\\s*\\*",be=0;be<c;be++)r(be,a[be]),s[be]||(s[be]=new RegExp(a[be]));var be;t.parse=je;function je(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Q)return y;if(typeof y!="string"||y.length>n)return null;var x=E.loose?s[_]:s[C];if(!x.test(y))return null;try{return new Q(y,E)}catch{return null}}t.valid=Zo;function Zo(y,E){var x=je(y,E);return x?x.version:null}t.clean=es;function es(y,E){var x=je(y.trim().replace(/^[=v]+/,""),E);return x?x.version:null}t.SemVer=Q;function Q(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Q){if(y.loose===E.loose)return y;y=y.version}else if(typeof y!="string")throw new TypeError("Invalid Version: "+y);if(y.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof Q))return new Q(y,E);r("SemVer",y,E),this.options=E,this.loose=!!E.loose;var x=y.trim().match(E.loose?s[_]:s[C]);if(!x)throw new TypeError("Invalid Version: "+y);if(this.raw=y,this.major=+x[1],this.minor=+x[2],this.patch=+x[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");x[4]?this.prerelease=x[4].split(".").map(function(R){if(/^[0-9]+$/.test(R)){var N=+R;if(N>=0&&N<i)return N}return R}):this.prerelease=[],this.build=x[5]?x[5].split("."):[],this.format()}Q.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Q.prototype.toString=function(){return this.version},Q.prototype.compare=function(y){return r("SemVer.compare",this.version,this.options,y),y instanceof Q||(y=new Q(y,this.options)),this.compareMain(y)||this.comparePre(y)},Q.prototype.compareMain=function(y){return y instanceof Q||(y=new Q(y,this.options)),ct(this.major,y.major)||ct(this.minor,y.minor)||ct(this.patch,y.patch)},Q.prototype.comparePre=function(y){if(y instanceof Q||(y=new Q(y,this.options)),this.prerelease.length&&!y.prerelease.length)return-1;if(!this.prerelease.length&&y.prerelease.length)return 1;if(!this.prerelease.length&&!y.prerelease.length)return 0;var E=0;do{var x=this.prerelease[E],R=y.prerelease[E];if(r("prerelease compare",E,x,R),x===void 0&&R===void 0)return 0;if(R===void 0)return 1;if(x===void 0)return-1;if(x!==R)return ct(x,R)}while(++E)},Q.prototype.inc=function(y,E){switch(y){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",E);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",E);break;case"prepatch":this.prerelease.length=0,this.inc("patch",E),this.inc("pre",E);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",E),this.inc("pre",E);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var x=this.prerelease.length;--x>=0;)typeof this.prerelease[x]=="number"&&(this.prerelease[x]++,x=-2);x===-1&&this.prerelease.push(0)}E&&(this.prerelease[0]===E?isNaN(this.prerelease[1])&&(this.prerelease=[E,0]):this.prerelease=[E,0]);break;default:throw new Error("invalid increment argument: "+y)}return this.format(),this.raw=this.version,this},t.inc=ts;function ts(y,E,x,R){typeof x=="string"&&(R=x,x=void 0);try{return new Q(y,x).inc(E,R).version}catch{return null}}t.diff=rs;function rs(y,E){if(wr(y,E))return null;var x=je(y),R=je(E),N="";if(x.prerelease.length||R.prerelease.length){N="pre";var $="prerelease"}for(var H in x)if((H==="major"||H==="minor"||H==="patch")&&x[H]!==R[H])return N+H;return $}t.compareIdentifiers=ct;var Rr=/^[0-9]+$/;function ct(y,E){var x=Rr.test(y),R=Rr.test(E);return x&&R&&(y=+y,E=+E),y===E?0:x&&!R?-1:R&&!x?1:y<E?-1:1}t.rcompareIdentifiers=zn;function zn(y,E){return ct(E,y)}t.major=dr;function dr(y,E){return new Q(y,E).major}t.minor=Qi;function Qi(y,E){return new Q(y,E).minor}t.patch=Xi;function Xi(y,E){return new Q(y,E).patch}t.compare=Ge;function Ge(y,E,x){return new Q(y,x).compare(new Q(E,x))}t.compareLoose=ns;function ns(y,E){return Ge(y,E,!0)}t.rcompare=Kn;function Kn(y,E,x){return Ge(E,y,x)}t.sort=Zi;function Zi(y,E){return y.sort(function(x,R){return t.compare(x,R,E)})}t.rsort=eo;function eo(y,E){return y.sort(function(x,R){return t.rcompare(x,R,E)})}t.gt=Et;function Et(y,E,x){return Ge(y,E,x)>0}t.lt=Bt;function Bt(y,E,x){return Ge(y,E,x)<0}t.eq=wr;function wr(y,E,x){return Ge(y,E,x)===0}t.neq=Yn;function Yn(y,E,x){return Ge(y,E,x)!==0}t.gte=Or;function Or(y,E,x){return Ge(y,E,x)>=0}t.lte=Tt;function Tt(y,E,x){return Ge(y,E,x)<=0}t.cmp=At;function At(y,E,x,R){switch(E){case"===":return typeof y=="object"&&(y=y.version),typeof x=="object"&&(x=x.version),y===x;case"!==":return typeof y=="object"&&(y=y.version),typeof x=="object"&&(x=x.version),y!==x;case"":case"=":case"==":return wr(y,x,R);case"!=":return Yn(y,x,R);case">":return Et(y,x,R);case">=":return Or(y,x,R);case"<":return Bt(y,x,R);case"<=":return Tt(y,x,R);default:throw new TypeError("Invalid operator: "+E)}}t.Comparator=Te;function Te(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Te){if(y.loose===!!E.loose)return y;y=y.value}if(!(this instanceof Te))return new Te(y,E);r("comparator",y,E),this.options=E,this.loose=!!E.loose,this.parse(y),this.semver===_t?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var _t={};Te.prototype.parse=function(y){var E=this.options.loose?s[Pe]:s[De],x=y.match(E);if(!x)throw new TypeError("Invalid comparator: "+y);this.operator=x[1],this.operator==="="&&(this.operator=""),x[2]?this.semver=new Q(x[2],this.options.loose):this.semver=_t},Te.prototype.toString=function(){return this.value},Te.prototype.test=function(y){return r("Comparator.test",y,this.options.loose),this.semver===_t?!0:(typeof y=="string"&&(y=new Q(y,this.options)),At(y,this.operator,this.semver,this.options))},Te.prototype.intersects=function(y,E){if(!(y instanceof Te))throw new TypeError("a Comparator is required");(!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1});var x;if(this.operator==="")return x=new ce(y.value,E),er(this.value,x,E);if(y.operator==="")return x=new ce(this.value,E),er(y.semver,x,E);var R=(this.operator===">="||this.operator===">")&&(y.operator===">="||y.operator===">"),N=(this.operator==="<="||this.operator==="<")&&(y.operator==="<="||y.operator==="<"),$=this.semver.version===y.semver.version,H=(this.operator===">="||this.operator==="<=")&&(y.operator===">="||y.operator==="<="),Z=At(this.semver,"<",y.semver,E)&&(this.operator===">="||this.operator===">")&&(y.operator==="<="||y.operator==="<"),X=At(this.semver,">",y.semver,E)&&(this.operator==="<="||this.operator==="<")&&(y.operator===">="||y.operator===">");return R||N||$&&H||Z||X},t.Range=ce;function ce(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof ce)return y.loose===!!E.loose&&y.includePrerelease===!!E.includePrerelease?y:new ce(y.raw,E);if(y instanceof Te)return new ce(y.value,E);if(!(this instanceof ce))return new ce(y,E);if(this.options=E,this.loose=!!E.loose,this.includePrerelease=!!E.includePrerelease,this.raw=y,this.set=y.split(/\s*\|\|\s*/).map(function(x){return this.parseRange(x.trim())},this).filter(function(x){return x.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+y);this.format()}ce.prototype.format=function(){return this.range=this.set.map(function(y){return y.join(" ").trim()}).join("||").trim(),this.range},ce.prototype.toString=function(){return this.range},ce.prototype.parseRange=function(y){var E=this.options.loose;y=y.trim();var x=E?s[ve]:s[It];y=y.replace(x,ls),r("hyphen replace",y),y=y.replace(s[pe],yt),r("comparator trim",y,s[pe]),y=y.replace(s[F],L),y=y.replace(s[ie],te),y=y.split(/\s+/).join(" ");var R=E?s[Pe]:s[De],N=y.split(" ").map(function($){return kn($,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(N=N.filter(function($){return!!$.match(R)})),N=N.map(function($){return new Te($,this.options)},this),N},ce.prototype.intersects=function(y,E){if(!(y instanceof ce))throw new TypeError("a Range is required");return this.set.some(function(x){return x.every(function(R){return y.set.some(function(N){return N.every(function($){return R.intersects($,E)})})})})},t.toComparators=to;function to(y,E){return new ce(y,E).set.map(function(x){return x.map(function(R){return R.value}).join(" ").trim().split(" ")})}function kn(y,E){return r("comp",y,E),y=os(y,E),r("caret",y),y=Nr(y,E),r("tildes",y),y=as(y,E),r("xrange",y),y=fr(y,E),r("stars",y),y}function we(y){return!y||y.toLowerCase()==="x"||y==="*"}function Nr(y,E){return y.trim().split(/\s+/).map(function(x){return is(x,E)}).join(" ")}function is(y,E){var x=E.loose?s[W]:s[q];return y.replace(x,function(R,N,$,H,Z){r("tilde",y,R,N,$,H,Z);var X;return we(N)?X="":we($)?X=">="+N+".0.0 <"+(+N+1)+".0.0":we(H)?X=">="+N+"."+$+".0 <"+N+"."+(+$+1)+".0":Z?(r("replaceTilde pr",Z),X=">="+N+"."+$+"."+H+"-"+Z+" <"+N+"."+(+$+1)+".0"):X=">="+N+"."+$+"."+H+" <"+N+"."+(+$+1)+".0",r("tilde return",X),X})}function os(y,E){return y.trim().split(/\s+/).map(function(x){return ss(x,E)}).join(" ")}function ss(y,E){r("caret",y,E);var x=E.loose?s[ke]:s[_e];return y.replace(x,function(R,N,$,H,Z){r("caret",y,R,N,$,H,Z);var X;return we(N)?X="":we($)?X=">="+N+".0.0 <"+(+N+1)+".0.0":we(H)?N==="0"?X=">="+N+"."+$+".0 <"+N+"."+(+$+1)+".0":X=">="+N+"."+$+".0 <"+(+N+1)+".0.0":Z?(r("replaceCaret pr",Z),N==="0"?$==="0"?X=">="+N+"."+$+"."+H+"-"+Z+" <"+N+"."+$+"."+(+H+1):X=">="+N+"."+$+"."+H+"-"+Z+" <"+N+"."+(+$+1)+".0":X=">="+N+"."+$+"."+H+"-"+Z+" <"+(+N+1)+".0.0"):(r("no pr"),N==="0"?$==="0"?X=">="+N+"."+$+"."+H+" <"+N+"."+$+"."+(+H+1):X=">="+N+"."+$+"."+H+" <"+N+"."+(+$+1)+".0":X=">="+N+"."+$+"."+H+" <"+(+N+1)+".0.0"),r("caret return",X),X})}function as(y,E){return r("replaceXRanges",y,E),y.split(/\s+/).map(function(x){return cs(x,E)}).join(" ")}function cs(y,E){y=y.trim();var x=E.loose?s[Y]:s[J];return y.replace(x,function(R,N,$,H,Z,X){r("xRange",y,R,N,$,H,Z,X);var qe=we($),Re=qe||we(H),Ie=Re||we(Z),xe=Ie;return N==="="&&xe&&(N=""),qe?N===">"||N==="<"?R="<0.0.0":R="*":N&&xe?(Re&&(H=0),Z=0,N===">"?(N=">=",Re?($=+$+1,H=0,Z=0):(H=+H+1,Z=0)):N==="<="&&(N="<",Re?$=+$+1:H=+H+1),R=N+$+"."+H+"."+Z):Re?R=">="+$+".0.0 <"+(+$+1)+".0.0":Ie&&(R=">="+$+"."+H+".0 <"+$+"."+(+H+1)+".0"),r("xRange return",R),R})}function fr(y,E){return r("replaceStars",y,E),y.trim().replace(s[fe],"")}function ls(y,E,x,R,N,$,H,Z,X,qe,Re,Ie,xe){return we(x)?E="":we(R)?E=">="+x+".0.0":we(N)?E=">="+x+"."+R+".0":E=">="+E,we(X)?Z="":we(qe)?Z="<"+(+X+1)+".0.0":we(Re)?Z="<"+X+"."+(+qe+1)+".0":Ie?Z="<="+X+"."+qe+"."+Re+"-"+Ie:Z="<="+Z,(E+" "+Z).trim()}ce.prototype.test=function(y){if(!y)return!1;typeof y=="string"&&(y=new Q(y,this.options));for(var E=0;E<this.set.length;E++)if(us(this.set[E],y,this.options))return!0;return!1};function us(y,E,x){for(var R=0;R<y.length;R++)if(!y[R].test(E))return!1;if(E.prerelease.length&&!x.includePrerelease){for(R=0;R<y.length;R++)if(r(y[R].semver),y[R].semver!==_t&&y[R].semver.prerelease.length>0){var N=y[R].semver;if(N.major===E.major&&N.minor===E.minor&&N.patch===E.patch)return!0}return!1}return!0}t.satisfies=er;function er(y,E,x){try{E=new ce(E,x)}catch{return!1}return E.test(y)}t.maxSatisfying=ds;function ds(y,E,x){var R=null,N=null;try{var $=new ce(E,x)}catch{return null}return y.forEach(function(H){$.test(H)&&(!R||N.compare(H)===-1)&&(R=H,N=new Q(R,x))}),R}t.minSatisfying=fs;function fs(y,E,x){var R=null,N=null;try{var $=new ce(E,x)}catch{return null}return y.forEach(function(H){$.test(H)&&(!R||N.compare(H)===1)&&(R=H,N=new Q(R,x))}),R}t.minVersion=Qr;function Qr(y,E){y=new ce(y,E);var x=new Q("0.0.0");if(y.test(x)||(x=new Q("0.0.0-0"),y.test(x)))return x;x=null;for(var R=0;R<y.set.length;++R){var N=y.set[R];N.forEach(function($){var H=new Q($.semver.version);switch($.operator){case">":H.prerelease.length===0?H.patch++:H.prerelease.push(0),H.raw=H.format();case"":case">=":(!x||Et(x,H))&&(x=H);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+$.operator)}})}return x&&y.test(x)?x:null}t.validRange=ps;function ps(y,E){try{return new ce(y,E).range||"*"}catch{return null}}t.ltr=hs;function hs(y,E,x){return Lr(y,E,"<",x)}t.gtr=ms;function ms(y,E,x){return Lr(y,E,">",x)}t.outside=Lr;function Lr(y,E,x,R){y=new Q(y,R),E=new ce(E,R);var N,$,H,Z,X;switch(x){case">":N=Et,$=Tt,H=Bt,Z=">",X=">=";break;case"<":N=Bt,$=Or,H=Et,Z="<",X="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(er(y,E,R))return!1;for(var qe=0;qe<E.set.length;++qe){var Re=E.set[qe],Ie=null,xe=null;if(Re.forEach(function(Xe){Xe.semver===_t&&(Xe=new Te(">=0.0.0")),Ie=Ie||Xe,xe=xe||Xe,N(Xe.semver,Ie.semver,R)?Ie=Xe:H(Xe.semver,xe.semver,R)&&(xe=Xe)}),Ie.operator===Z||Ie.operator===X||(!xe.operator||xe.operator===Z)&&$(y,xe.semver)||xe.operator===X&&H(y,xe.semver))return!1}return!0}t.prerelease=gs;function gs(y,E){var x=je(y,E);return x&&x.prerelease.length?x.prerelease:null}t.intersects=Xr;function Xr(y,E,x){return y=new ce(y,x),E=new ce(E,x),y.intersects(E)}t.coerce=vs;function vs(y){if(y instanceof Q)return y;if(typeof y!="string")return null;var E=y.match(s[oe]);return E==null?null:je(E[1]+"."+(E[2]||"0")+"."+(E[3]||"0"))}}),kb=O((t,e)=>{"use strict";function r(u){return typeof u=="function"}var n=console.error.bind(console);function i(u,d,f){var p=!!u[d]&&u.propertyIsEnumerable(d);Object.defineProperty(u,d,{configurable:!0,enumerable:p,writable:!0,value:f})}function o(u){u&&u.logger&&(r(u.logger)?n=u.logger:n("new logger isn't a function, not replacing"))}function s(u,d,f){if(!u||!u[d]){n("no original function "+d+" to wrap");return}if(!f){n("no wrapper function"),n(new Error().stack);return}if(!r(u[d])||!r(f)){n("original object and wrapper must be functions");return}var p=u[d],h=f(p,d);return i(h,"__original",p),i(h,"__unwrap",function(){u[d]===h&&i(u,d,p)}),i(h,"__wrapped",!0),i(u,d,h),h}function a(u,d,f){if(u)Array.isArray(u)||(u=[u]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(d&&Array.isArray(d))){n("must provide one or more functions to wrap on modules");return}u.forEach(function(p){d.forEach(function(h){s(p,h,f)})})}function c(u,d){if(!u||!u[d]){n("no function to unwrap."),n(new Error().stack);return}if(!u[d].__unwrap)n("no original to unwrap to -- has "+d+" already been unwrapped?");else return u[d].__unwrap()}function l(u,d){if(u)Array.isArray(u)||(u=[u]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(d&&Array.isArray(d))){n("must provide one or more functions to unwrap on modules");return}u.forEach(function(f){d.forEach(function(p){c(f,p)})})}o.wrap=s,o.massWrap=a,o.unwrap=c,o.massUnwrap=l,e.exports=o}),Ib=O((t,e)=>{"use strict";var r=kb(),n=r.wrap,i=r.unwrap,o="wrap@before";function s(d,f,p){var h=!!d[f]&&d.propertyIsEnumerable(f);Object.defineProperty(d,f,{configurable:!0,enumerable:h,writable:!0,value:p})}function a(d,f){for(var p=f.length,h=0;h<p;h++){var m=f[h],g=d[o];if(typeof g=="function")g(m);else if(Array.isArray(g))for(var v=g.length,w=0;w<v;w++)g[w](m)}}function c(d,f){var p;return p=d._events&&d._events[f],Array.isArray(p)||(p?p=[p]:p=[]),p}function l(d,f,p){var h=c(d,f),m=h.filter(function(g){return p.indexOf(g)===-1});m.length>0&&a(d,m)}function u(d,f){if(d){var p=d;if(typeof d=="function")p=f(d);else if(Array.isArray(d)){p=[];for(var h=0;h<d.length;h++)p[h]=f(d[h])}return p}}e.exports=function(d,f,p){if(!d||!d.on||!d.addListener||!d.removeListener||!d.emit)throw new Error("can only wrap real EEs");if(!f)throw new Error("must have function to run on listener addition");if(!p)throw new Error("must have function to wrap listeners when emitting");function h(g){return function(v,w){var b=c(this,v).slice();try{var C=g.call(this,v,w);return l(this,v,b),C}finally{this.on.__wrapped||n(this,"on",h),this.addListener.__wrapped||n(this,"addListener",h)}}}function m(g){return function(v){if(!this._events||!this._events[v])return g.apply(this,arguments);var w=this._events[v];function b(C){return function(){this._events[v]=w;try{return C.apply(this,arguments)}finally{w=this._events[v],this._events[v]=u(w,p)}}}n(this,"removeListener",b);try{return this._events[v]=u(w,p),g.apply(this,arguments)}finally{i(this,"removeListener"),this._events[v]=w}}}d[o]?typeof d[o]=="function"?s(d,o,[d[o],f]):Array.isArray(d[o])&&d[o].push(f):s(d,o,f),d.__wrapped||(n(d,"addListener",h),n(d,"on",h),n(d,"emit",m),s(d,"__unwrap",function(){i(d,"addListener"),i(d,"on"),i(d,"emit"),delete d[o],delete d.__wrapped}),s(d,"__wrapped",!0))}}),RZ=O((t,e)=>{"use strict";var r=require("util"),n=require("assert"),i=Ib(),o=require("async_hooks"),s="cls@contexts",a="error@context",c=process.env.DEBUG_CLS_HOOKED,l=-1;e.exports={getNamespace:d,createNamespace:f,destroyNamespace:p,reset:h,ERROR_SYMBOL:a};function u(g){this.name=g,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}u.prototype.set=function(g,v){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[g]=v,c){let w=" ".repeat(this._indent<0?0:this._indent);m(w+"CONTEXT-SET KEY:"+g+"="+v+" in ns:"+this.name+" currentUid:"+l+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return v},u.prototype.get=function(g){if(!this.active){if(c){let v=o.currentId(),w=o.triggerAsyncId(),b=" ".repeat(this._indent<0?0:this._indent);m(`${b}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${g}=undefined currentUid:${l} asyncHooksCurrentId:${v} triggerId:${w} len:${this._set.length}`)}return}if(c){let v=o.executionAsyncId(),w=o.triggerAsyncId(),b=" ".repeat(this._indent<0?0:this._indent);m(b+"CONTEXT-GETTING KEY:"+g+"="+this.active[g]+" ("+this.name+") currentUid:"+l+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),m(`${b}CONTEXT-GETTING KEY: (${this.name}) ${g}=${this.active[g]} currentUid:${l} asyncHooksCurrentId:${v} triggerId:${w} len:${this._set.length} active:${r.inspect(this.active)}`)}return this.active[g]},u.prototype.createContext=function(){let g=Object.create(this.active?this.active:Object.prototype);if(g._ns_name=this.name,g.id=l,c){let v=o.executionAsyncId(),w=o.triggerAsyncId(),b=" ".repeat(this._indent<0?0:this._indent);m(`${b}CONTEXT-CREATED Context: (${this.name}) currentUid:${l} asyncHooksCurrentId:${v} triggerId:${w} len:${this._set.length} context:${r.inspect(g,{showHidden:!0,depth:2,colors:!0})}`)}return g},u.prototype.run=function(g){let v=this.createContext();this.enter(v);try{if(c){let w=o.triggerAsyncId(),b=o.executionAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);m(`${C}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${l} triggerId:${w} asyncHooksCurrentId:${b} len:${this._set.length} context:${r.inspect(v)}`)}return g(v),v}catch(w){throw w&&(w[a]=v),w}finally{if(c){let w=o.triggerAsyncId(),b=o.executionAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);m(`${C}CONTEXT-RUN END: (${this.name}) currentUid:${l} triggerId:${w} asyncHooksCurrentId:${b} len:${this._set.length} ${r.inspect(v)}`)}this.exit(v)}},u.prototype.runAndReturn=function(g){let v;return this.run(function(w){v=g(w)}),v},u.prototype.runPromise=function(g){let v=this.createContext();this.enter(v);let w=g(v);if(!w||!w.then||!w.catch)throw new Error("fn must return a promise.");return c&&m("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(v)),w.then(b=>(c&&m("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(v)),this.exit(v),b)).catch(b=>{throw b[a]=v,c&&m("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(v)),this.exit(v),b})},u.prototype.bind=function(g,v){v||(this.active?v=this.active:v=this.createContext());let w=this;return function(){w.enter(v);try{return g.apply(this,arguments)}catch(b){throw b&&(b[a]=v),b}finally{w.exit(v)}}},u.prototype.enter=function(g){if(n.ok(g,"context must be provided for entering"),c){let v=o.executionAsyncId(),w=o.triggerAsyncId(),b=" ".repeat(this._indent<0?0:this._indent);m(`${b}CONTEXT-ENTER: (${this.name}) currentUid:${l} triggerId:${w} asyncHooksCurrentId:${v} len:${this._set.length} ${r.inspect(g)}`)}this._set.push(this.active),this.active=g},u.prototype.exit=function(g){if(n.ok(g,"context must be provided for exiting"),c){let w=o.executionAsyncId(),b=o.triggerAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);m(`${C}CONTEXT-EXIT: (${this.name}) currentUid:${l} triggerId:${b} asyncHooksCurrentId:${w} len:${this._set.length} ${r.inspect(g)}`)}if(this.active===g){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let v=this._set.lastIndexOf(g);v<0?(c&&m("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(g)),n.ok(v>=0,`context not currently entered; can't exit. 
`+r.inspect(this)+`
`+r.inspect(g))):(n.ok(v,"can't remove top context"),this._set.splice(v,1))},u.prototype.bindEmitter=function(g){n.ok(g.on&&g.addListener&&g.emit,"can only bind real EEs");let v=this,w="context@"+this.name;function b(S){!S||(S[s]||(S[s]=Object.create(null)),S[s][w]={namespace:v,context:v.active})}function C(S){if(!(S&&S[s]))return S;let P=S,_=S[s];return Object.keys(_).forEach(function(k){let T=_[k];P=T.namespace.bind(P,T.context)}),P}i(g,b,C)},u.prototype.fromException=function(g){return g[a]};function d(g){return process.namespaces[g]}function f(g){n.ok(g,"namespace must be given a name."),c&&m(`NS-CREATING NAMESPACE (${g})`);let v=new u(g);return v.id=l,o.createHook({init(w,b,C,S){if(l=o.executionAsyncId(),v.active){if(v._contexts.set(w,v.active),c){let P=" ".repeat(v._indent<0?0:v._indent);m(`${P}INIT [${b}] (${g}) asyncId:${w} currentUid:${l} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${S}`)}}else if(l===0){let P=o.triggerAsyncId(),_=v._contexts.get(P);if(_){if(v._contexts.set(w,_),c){let k=" ".repeat(v._indent<0?0:v._indent);m(`${k}INIT USING CONTEXT FROM TRIGGERID [${b}] (${g}) asyncId:${w} currentUid:${l} triggerId:${P} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${S}`)}}else if(c){let k=" ".repeat(v._indent<0?0:v._indent);m(`${k}INIT MISSING CONTEXT [${b}] (${g}) asyncId:${w} currentUid:${l} triggerId:${P} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${S}`)}}if(c&&b==="PROMISE"){m(r.inspect(S,{showHidden:!0}));let P=S.parentId,_=" ".repeat(v._indent<0?0:v._indent);m(`${_}INIT RESOURCE-PROMISE [${b}] (${g}) parentId:${P} asyncId:${w} currentUid:${l} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${S}`)}},before(w){l=o.executionAsyncId();let b;if(b=v._contexts.get(w)||v._contexts.get(l),b){if(c){let C=o.triggerAsyncId(),S=" ".repeat(v._indent<0?0:v._indent);m(`${S}BEFORE (${g}) asyncId:${w} currentUid:${l} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(b)}`),v._indent+=2}v.enter(b)}else if(c){let C=o.triggerAsyncId(),S=" ".repeat(v._indent<0?0:v._indent);m(`${S}BEFORE MISSING CONTEXT (${g}) asyncId:${w} currentUid:${l} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${r.inspect(v._contexts,{showHidden:!0,depth:2,colors:!0})}`),v._indent+=2}},after(w){l=o.executionAsyncId();let b;if(b=v._contexts.get(w)||v._contexts.get(l),b){if(c){let C=o.triggerAsyncId();v._indent-=2;let S=" ".repeat(v._indent<0?0:v._indent);m(`${S}AFTER (${g}) asyncId:${w} currentUid:${l} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(b)}`)}v.exit(b)}else if(c){let C=o.triggerAsyncId();v._indent-=2;let S=" ".repeat(v._indent<0?0:v._indent);m(`${S}AFTER MISSING CONTEXT (${g}) asyncId:${w} currentUid:${l} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(b)}`)}},destroy(w){if(l=o.executionAsyncId(),c){let b=o.triggerAsyncId(),C=" ".repeat(v._indent<0?0:v._indent);m(`${C}DESTROY (${g}) currentUid:${l} asyncId:${w} triggerId:${b} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(v._contexts.get(l))}`)}v._contexts.delete(w)}}).enable(),process.namespaces[g]=v,v}function p(g){let v=d(g);n.ok(v,`can't delete nonexistent namespace! "`+g+'"'),n.ok(v.id,"don't assign to process.namespaces directly! "+r.inspect(v)),process.namespaces[g]=null}function h(){process.namespaces&&Object.keys(process.namespaces).forEach(function(g){p(g)}),process.namespaces=Object.create(null)}process.namespaces={};function m(...g){c&&process._rawDebug(`${r.format(...g)}`)}}),OZ=O((t,e)=>{"use strict";function r(){}e.exports=function(){let n=this._hooks,i=this._state,o=process.nextTick;process.nextTick=function(){if(!i.enabled)return o.apply(process,arguments);let s=new Array(arguments.length);for(let u=0;u<arguments.length;u++)s[u]=arguments[u];let a=s[0];if(typeof a!="function")throw new TypeError("callback is not a function");let c=new r,l=--i.counter;return n.init.call(c,l,0,null,null),s[0]=function(){n.pre.call(c,l);let u=!0;try{a.apply(this,arguments),u=!1}finally{u&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){n.post.call(c,l,!0),n.destroy.call(null,l)})}n.post.call(c,l,!1),n.destroy.call(null,l)},o.apply(process,s)}}}),NZ=O((t,e)=>{"use strict";function r(){}e.exports=function(){let n=this._hooks,i=this._state,o=global.Promise,s=o.prototype.then;o.prototype.then=u;function a(d,f,p,h){return typeof d!="function"?h?c(p):l(p):function(){n.pre.call(f,p);try{return d.apply(this,arguments)}finally{n.post.call(f,p,!1),n.destroy.call(null,p)}}}function c(d){return function(f){return n.destroy.call(null,d),f}}function l(d){return function(f){throw n.destroy.call(null,d),f}}function u(d,f){if(!i.enabled)return s.call(this,d,f);let p=new r,h=--i.counter;return n.init.call(p,h,0,null,null),s.call(this,a(d,p,h,!0),a(f,p,h,!1))}}}),LZ=O((t,e)=>{"use strict";var r=require("timers");function n(){}function i(){}function o(){}var s=new Map,a=new Map,c=new Map,l=null,u=!1;e.exports=function(){d(this._hooks,this._state,"setTimeout","clearTimeout",n,s,!0),d(this._hooks,this._state,"setInterval","clearInterval",i,a,!1),d(this._hooks,this._state,"setImmediate","clearImmediate",o,c,!0),global.setTimeout=r.setTimeout,global.setInterval=r.setInterval,global.setImmediate=r.setImmediate,global.clearTimeout=r.clearTimeout,global.clearInterval=r.clearInterval,global.clearImmediate=r.clearImmediate};function d(f,p,h,m,g,v,w){let b=r[h],C=r[m];r[h]=function(){if(!p.enabled)return b.apply(r,arguments);let S=new Array(arguments.length);for(let A=0;A<arguments.length;A++)S[A]=arguments[A];let P=S[0];if(typeof P!="function")throw new TypeError('"callback" argument must be a function');let _=new g,k=--p.counter,T;return f.init.call(_,k,0,null,null),S[0]=function(){l=T,f.pre.call(_,k);let A=!0;try{P.apply(this,arguments),A=!1}finally{A&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){f.post.call(_,k,!0),v.delete(T),f.destroy.call(null,k)})}f.post.call(_,k,!1),l=null,(w||u)&&(u=!1,v.delete(T),f.destroy.call(null,k))},T=b.apply(r,S),v.set(T,k),T},r[m]=function(S){if(l===S&&S!==null)u=!0;else if(v.has(S)){let P=v.get(S);v.delete(S),f.destroy.call(null,P)}C.apply(r,arguments)}}}),sF=O((t,e)=>{e.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}}),FZ=O((t,e)=>{"use strict";var r=process.binding("async_wrap"),n=r.Providers.TIMERWRAP,i={nextTick:OZ(),promise:NZ(),timers:LZ()},o=new Set;function s(){this.enabled=!1,this.counter=0}function a(){let u=this.initFns=[],d=this.preFns=[],f=this.postFns=[],p=this.destroyFns=[];this.init=function(h,m,g,v){if(m===n){o.add(h);return}for(let w of u)w(h,this,m,g,v)},this.pre=function(h){if(!o.has(h))for(let m of d)m(h,this)},this.post=function(h,m){if(!o.has(h))for(let g of f)g(h,this,m)},this.destroy=function(h){if(o.has(h)){o.delete(h);return}for(let m of p)m(h)}}a.prototype.add=function(u){u.init&&this.initFns.push(u.init),u.pre&&this.preFns.push(u.pre),u.post&&this.postFns.push(u.post),u.destroy&&this.destroyFns.push(u.destroy)};function c(u,d){let f=u.indexOf(d);f!==-1&&u.splice(f,1)}a.prototype.remove=function(u){u.init&&c(this.initFns,u.init),u.pre&&c(this.preFns,u.pre),u.post&&c(this.postFns,u.post),u.destroy&&c(this.destroyFns,u.destroy)};function l(){this._state=new s,this._hooks=new a,this.version=sF().version,this.providers=r.Providers;for(let u of Object.keys(i))i[u].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),r.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}e.exports=l,l.prototype.addHooks=function(u){this._hooks.add(u)},l.prototype.removeHooks=function(u){this._hooks.remove(u)},l.prototype.enable=function(){this._state.enabled=!0,r.enable()},l.prototype.disable=function(){this._state.enabled=!1,r.disable()}}),aF=O((t,e)=>{e.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}}),MZ=O((t,e)=>{function r(n){try{return Error.prototype.toString.call(n)}catch(i){try{return"<error: "+i+">"}catch{return"<error>"}}}e.exports=function(n,i){var o=[];o.push(r(n));for(var s=0;s<i.length;s++){var a=i[s],c;try{c=a.toString()}catch(l){try{c="<error: "+l+">"}catch{c="<error>"}}o.push("    at "+c)}return o.join(`
`)}}),qZ=O((t,e)=>{var r=MZ();function n(){this.extend=new s,this.filter=new s,this.format=new a,this.version=aF().version}var i=!1;n.prototype.callSite=function d(f){f||(f={}),i=!0;var p={};Error.captureStackTrace(p,d);var h=p.stack;return i=!1,h=h.slice(f.slice||0),f.extend&&(h=this.extend._modify(p,h)),f.filter&&(h=this.filter._modify(p,h)),h};var o=new n;function s(){this._modifiers=[]}s.prototype._modify=function(d,f){for(var p=0,h=this._modifiers.length;p<h;p++)f=this._modifiers[p](d,f);return f},s.prototype.attach=function(d){this._modifiers.push(d)},s.prototype.deattach=function(d){var f=this._modifiers.indexOf(d);return f===-1?!1:(this._modifiers.splice(f,1),!0)};function a(){this._formater=r,this._previous=void 0}a.prototype.replace=function(d){d?this._formater=d:this.restore()},a.prototype.restore=function(){this._formater=r,this._previous=void 0},a.prototype._backup=function(){this._previous=this._formater},a.prototype._roolback=function(){this._previous===r?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&o.format.replace(Error.prepareStackTrace);var c=!1;function l(d,f){if(i)return f;if(c)return r(d,f);var p=f.concat();p=o.extend._modify(d,p),p=o.filter._modify(d,p),p=p.slice(0,Error.stackTraceLimit),Object.isExtensible(d)&&Object.getOwnPropertyDescriptor(d,"callSite")===void 0&&(d.callSite={original:f,mutated:p}),c=!0;var h=o.format._formater(d,p);return c=!1,h}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return l},set:function(d){d===l?o.format._roolback():(o.format._backup(),o.format.replace(d))}});function u(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:u,set:function(d){Object.defineProperty(this,"callSite",{value:d,writable:!0,configurable:!0})},configurable:!0}),e.exports=o}),cF=O((t,e)=>{if(global._stackChain)if(global._stackChain.version===aF().version)e.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else e.exports=global._stackChain=qZ()}),$Z=O((t,e)=>{"use strict";var r=FZ();if(global._asyncHook)if(global._asyncHook.version===sF().version)e.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else cF().filter.attach(function(n,i){return i.filter(function(o){let s=o.getFileName();return!(s&&s.slice(0,__dirname.length)===__dirname)})}),e.exports=global._asyncHook=new r}),jZ=O((t,e)=>{"use strict";var r=require("util"),n=require("assert"),i=Ib(),o=$Z(),s="cls@contexts",a="error@context",c=[];for(let C in o.providers)c[o.providers[C]]=C;var l=process.env.DEBUG_CLS_HOOKED,u=-1;e.exports={getNamespace:f,createNamespace:p,destroyNamespace:h,reset:m,ERROR_SYMBOL:a};function d(C){this.name=C,this.active=null,this._set=[],this.id=null,this._contexts=new Map}d.prototype.set=function(C,S){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return l&&g("    SETTING KEY:"+C+"="+S+" in ns:"+this.name+" uid:"+u+" active:"+r.inspect(this.active,!0)),this.active[C]=S,S},d.prototype.get=function(C){if(!this.active){l&&g("    GETTING KEY:"+C+"=undefined "+this.name+" uid:"+u+" active:"+r.inspect(this.active,!0));return}return l&&g("    GETTING KEY:"+C+"="+this.active[C]+" "+this.name+" uid:"+u+" active:"+r.inspect(this.active,!0)),this.active[C]},d.prototype.createContext=function(){l&&g("   CREATING Context: "+this.name+" uid:"+u+" len:"+this._set.length+"  active:"+r.inspect(this.active,!0,2,!0));let C=Object.create(this.active?this.active:Object.prototype);return C._ns_name=this.name,C.id=u,l&&g("   CREATED Context: "+this.name+" uid:"+u+" len:"+this._set.length+"  context:"+r.inspect(C,!0,2,!0)),C},d.prototype.run=function(C){let S=this.createContext();this.enter(S);try{return l&&g(" BEFORE RUN: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(S)),C(S),S}catch(P){throw P&&(P[a]=S),P}finally{l&&g(" AFTER RUN: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(S)),this.exit(S)}},d.prototype.runAndReturn=function(C){var S;return this.run(function(P){S=C(P)}),S},d.prototype.runPromise=function(C){let S=this.createContext();this.enter(S);let P=C(S);if(!P||!P.then||!P.catch)throw new Error("fn must return a promise.");return l&&g(" BEFORE runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(S)),P.then(_=>(l&&g(" AFTER runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(S)),this.exit(S),_)).catch(_=>{throw _[a]=S,l&&g(" AFTER runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(S)),this.exit(S),_})},d.prototype.bind=function(C,S){S||(this.active?S=this.active:S=this.createContext());let P=this;return function(){P.enter(S);try{return C.apply(this,arguments)}catch(_){throw _&&(_[a]=S),_}finally{P.exit(S)}}},d.prototype.enter=function(C){n.ok(C,"context must be provided for entering"),l&&g("  ENTER "+this.name+" uid:"+u+" len:"+this._set.length+" context: "+r.inspect(C)),this._set.push(this.active),this.active=C},d.prototype.exit=function(C){if(n.ok(C,"context must be provided for exiting"),l&&g("  EXIT "+this.name+" uid:"+u+" len:"+this._set.length+" context: "+r.inspect(C)),this.active===C){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let S=this._set.lastIndexOf(C);S<0?(l&&g("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(C)),n.ok(S>=0,`context not currently entered; can't exit. 
`+r.inspect(this)+`
`+r.inspect(C))):(n.ok(S,"can't remove top context"),this._set.splice(S,1))},d.prototype.bindEmitter=function(C){n.ok(C.on&&C.addListener&&C.emit,"can only bind real EEs");let S=this,P="context@"+this.name;function _(T){!T||(T[s]||(T[s]=Object.create(null)),T[s][P]={namespace:S,context:S.active})}function k(T){if(!(T&&T[s]))return T;let A=T,M=T[s];return Object.keys(M).forEach(function(j){let J=M[j];A=J.namespace.bind(A,J.context)}),A}i(C,_,k)},d.prototype.fromException=function(C){return C[a]};function f(C){return process.namespaces[C]}function p(C){n.ok(C,"namespace must be given a name."),l&&g("CREATING NAMESPACE "+C);let S=new d(C);return S.id=u,o.addHooks({init(P,_,k,T,A){u=P,T?(S._contexts.set(P,S._contexts.get(T)),l&&g("PARENTID: "+C+" uid:"+P+" parent:"+T+" provider:"+k)):S._contexts.set(u,S.active),l&&g("INIT "+C+" uid:"+P+" parent:"+T+" provider:"+c[k]+" active:"+r.inspect(S.active,!0))},pre(P,_){u=P;let k=S._contexts.get(P);k?(l&&g(" PRE "+C+" uid:"+P+" handle:"+v(_)+" context:"+r.inspect(k)),S.enter(k)):l&&g(" PRE MISSING CONTEXT "+C+" uid:"+P+" handle:"+v(_))},post(P,_){u=P;let k=S._contexts.get(P);k?(l&&g(" POST "+C+" uid:"+P+" handle:"+v(_)+" context:"+r.inspect(k)),S.exit(k)):l&&g(" POST MISSING CONTEXT "+C+" uid:"+P+" handle:"+v(_))},destroy(P){u=P,l&&g("DESTROY "+C+" uid:"+P+" context:"+r.inspect(S._contexts.get(u))+" active:"+r.inspect(S.active,!0)),S._contexts.delete(P)}}),process.namespaces[C]=S,S}function h(C){let S=f(C);n.ok(S,`can't delete nonexistent namespace! "`+C+'"'),n.ok(S.id,"don't assign to process.namespaces directly! "+r.inspect(S)),process.namespaces[C]=null}function m(){process.namespaces&&Object.keys(process.namespaces).forEach(function(C){h(C)}),process.namespaces=Object.create(null)}process.namespaces={},o._state&&!o._state.enabled&&o.enable();function g(C){process.env.DEBUG&&process._rawDebug(C)}function v(C){if(!C)return C;if(typeof C=="function")return C.name?C.name:(C.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(C.constructor&&C.constructor.name)return C.constructor.name}if(l){w=cF();for(b in w.filter._modifiers)w.filter.deattach(b)}var w,b}),UZ=O((t,e)=>{"use strict";var r=DZ();process&&r.gte(process.versions.node,"8.0.0")?e.exports=RZ():e.exports=jZ()}),BZ=O((t,e)=>{t=e.exports=Q;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var y=Array.prototype.slice.call(arguments,0);y.unshift("SEMVER"),console.log.apply(console,y)}:r=function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=16,s=t.re=[],a=t.src=[],c=0,l=c++;a[l]="0|[1-9]\\d*";var u=c++;a[u]="[0-9]+";var d=c++;a[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=c++;a[f]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var p=c++;a[p]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var h=c++;a[h]="(?:"+a[l]+"|"+a[d]+")";var m=c++;a[m]="(?:"+a[u]+"|"+a[d]+")";var g=c++;a[g]="(?:-("+a[h]+"(?:\\."+a[h]+")*))";var v=c++;a[v]="(?:-?("+a[m]+"(?:\\."+a[m]+")*))";var w=c++;a[w]="[0-9A-Za-z-]+";var b=c++;a[b]="(?:\\+("+a[w]+"(?:\\."+a[w]+")*))";var C=c++,S="v?"+a[f]+a[g]+"?"+a[b]+"?";a[C]="^"+S+"$";var P="[v=\\s]*"+a[p]+a[v]+"?"+a[b]+"?",_=c++;a[_]="^"+P+"$";var k=c++;a[k]="((?:<|>)?=?)";var T=c++;a[T]=a[u]+"|x|X|\\*";var A=c++;a[A]=a[l]+"|x|X|\\*";var M=c++;a[M]="[v=\\s]*("+a[A]+")(?:\\.("+a[A]+")(?:\\.("+a[A]+")(?:"+a[g]+")?"+a[b]+"?)?)?";var j=c++;a[j]="[v=\\s]*("+a[T]+")(?:\\.("+a[T]+")(?:\\.("+a[T]+")(?:"+a[v]+")?"+a[b]+"?)?)?";var J=c++;a[J]="^"+a[k]+"\\s*"+a[M]+"$";var Y=c++;a[Y]="^"+a[k]+"\\s*"+a[j]+"$";var oe=c++;a[oe]="(?:^|[^\\d])(\\d{1,"+o+"})(?:\\.(\\d{1,"+o+"}))?(?:\\.(\\d{1,"+o+"}))?(?:$|[^\\d])";var re=c++;a[re]="(?:~>?)";var F=c++;a[F]="(\\s*)"+a[re]+"\\s+",s[F]=new RegExp(a[F],"g");var L="$1~",q=c++;a[q]="^"+a[re]+a[M]+"$";var W=c++;a[W]="^"+a[re]+a[j]+"$";var z=c++;a[z]="(?:\\^)";var ie=c++;a[ie]="(\\s*)"+a[z]+"\\s+",s[ie]=new RegExp(a[ie],"g");var te="$1^",_e=c++;a[_e]="^"+a[z]+a[M]+"$";var ke=c++;a[ke]="^"+a[z]+a[j]+"$";var Pe=c++;a[Pe]="^"+a[k]+"\\s*("+P+")$|^$";var De=c++;a[De]="^"+a[k]+"\\s*("+S+")$|^$";var pe=c++;a[pe]="(\\s*)"+a[k]+"\\s*("+P+"|"+a[M]+")",s[pe]=new RegExp(a[pe],"g");var yt="$1$2$3",It=c++;a[It]="^\\s*("+a[M]+")\\s+-\\s+("+a[M]+")\\s*$";var ve=c++;a[ve]="^\\s*("+a[j]+")\\s+-\\s+("+a[j]+")\\s*$";var fe=c++;for(a[fe]="(<|>)?=?\\s*\\*",be=0;be<c;be++)r(be,a[be]),s[be]||(s[be]=new RegExp(a[be]));var be;t.parse=je;function je(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Q)return y;if(typeof y!="string"||y.length>n)return null;var x=E.loose?s[_]:s[C];if(!x.test(y))return null;try{return new Q(y,E)}catch{return null}}t.valid=Zo;function Zo(y,E){var x=je(y,E);return x?x.version:null}t.clean=es;function es(y,E){var x=je(y.trim().replace(/^[=v]+/,""),E);return x?x.version:null}t.SemVer=Q;function Q(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Q){if(y.loose===E.loose)return y;y=y.version}else if(typeof y!="string")throw new TypeError("Invalid Version: "+y);if(y.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof Q))return new Q(y,E);r("SemVer",y,E),this.options=E,this.loose=!!E.loose;var x=y.trim().match(E.loose?s[_]:s[C]);if(!x)throw new TypeError("Invalid Version: "+y);if(this.raw=y,this.major=+x[1],this.minor=+x[2],this.patch=+x[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");x[4]?this.prerelease=x[4].split(".").map(function(R){if(/^[0-9]+$/.test(R)){var N=+R;if(N>=0&&N<i)return N}return R}):this.prerelease=[],this.build=x[5]?x[5].split("."):[],this.format()}Q.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Q.prototype.toString=function(){return this.version},Q.prototype.compare=function(y){return r("SemVer.compare",this.version,this.options,y),y instanceof Q||(y=new Q(y,this.options)),this.compareMain(y)||this.comparePre(y)},Q.prototype.compareMain=function(y){return y instanceof Q||(y=new Q(y,this.options)),ct(this.major,y.major)||ct(this.minor,y.minor)||ct(this.patch,y.patch)},Q.prototype.comparePre=function(y){if(y instanceof Q||(y=new Q(y,this.options)),this.prerelease.length&&!y.prerelease.length)return-1;if(!this.prerelease.length&&y.prerelease.length)return 1;if(!this.prerelease.length&&!y.prerelease.length)return 0;var E=0;do{var x=this.prerelease[E],R=y.prerelease[E];if(r("prerelease compare",E,x,R),x===void 0&&R===void 0)return 0;if(R===void 0)return 1;if(x===void 0)return-1;if(x!==R)return ct(x,R)}while(++E)},Q.prototype.inc=function(y,E){switch(y){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",E);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",E);break;case"prepatch":this.prerelease.length=0,this.inc("patch",E),this.inc("pre",E);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",E),this.inc("pre",E);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var x=this.prerelease.length;--x>=0;)typeof this.prerelease[x]=="number"&&(this.prerelease[x]++,x=-2);x===-1&&this.prerelease.push(0)}E&&(this.prerelease[0]===E?isNaN(this.prerelease[1])&&(this.prerelease=[E,0]):this.prerelease=[E,0]);break;default:throw new Error("invalid increment argument: "+y)}return this.format(),this.raw=this.version,this},t.inc=ts;function ts(y,E,x,R){typeof x=="string"&&(R=x,x=void 0);try{return new Q(y,x).inc(E,R).version}catch{return null}}t.diff=rs;function rs(y,E){if(wr(y,E))return null;var x=je(y),R=je(E),N="";if(x.prerelease.length||R.prerelease.length){N="pre";var $="prerelease"}for(var H in x)if((H==="major"||H==="minor"||H==="patch")&&x[H]!==R[H])return N+H;return $}t.compareIdentifiers=ct;var Rr=/^[0-9]+$/;function ct(y,E){var x=Rr.test(y),R=Rr.test(E);return x&&R&&(y=+y,E=+E),y===E?0:x&&!R?-1:R&&!x?1:y<E?-1:1}t.rcompareIdentifiers=zn;function zn(y,E){return ct(E,y)}t.major=dr;function dr(y,E){return new Q(y,E).major}t.minor=Qi;function Qi(y,E){return new Q(y,E).minor}t.patch=Xi;function Xi(y,E){return new Q(y,E).patch}t.compare=Ge;function Ge(y,E,x){return new Q(y,x).compare(new Q(E,x))}t.compareLoose=ns;function ns(y,E){return Ge(y,E,!0)}t.rcompare=Kn;function Kn(y,E,x){return Ge(E,y,x)}t.sort=Zi;function Zi(y,E){return y.sort(function(x,R){return t.compare(x,R,E)})}t.rsort=eo;function eo(y,E){return y.sort(function(x,R){return t.rcompare(x,R,E)})}t.gt=Et;function Et(y,E,x){return Ge(y,E,x)>0}t.lt=Bt;function Bt(y,E,x){return Ge(y,E,x)<0}t.eq=wr;function wr(y,E,x){return Ge(y,E,x)===0}t.neq=Yn;function Yn(y,E,x){return Ge(y,E,x)!==0}t.gte=Or;function Or(y,E,x){return Ge(y,E,x)>=0}t.lte=Tt;function Tt(y,E,x){return Ge(y,E,x)<=0}t.cmp=At;function At(y,E,x,R){switch(E){case"===":return typeof y=="object"&&(y=y.version),typeof x=="object"&&(x=x.version),y===x;case"!==":return typeof y=="object"&&(y=y.version),typeof x=="object"&&(x=x.version),y!==x;case"":case"=":case"==":return wr(y,x,R);case"!=":return Yn(y,x,R);case">":return Et(y,x,R);case">=":return Or(y,x,R);case"<":return Bt(y,x,R);case"<=":return Tt(y,x,R);default:throw new TypeError("Invalid operator: "+E)}}t.Comparator=Te;function Te(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Te){if(y.loose===!!E.loose)return y;y=y.value}if(!(this instanceof Te))return new Te(y,E);r("comparator",y,E),this.options=E,this.loose=!!E.loose,this.parse(y),this.semver===_t?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var _t={};Te.prototype.parse=function(y){var E=this.options.loose?s[Pe]:s[De],x=y.match(E);if(!x)throw new TypeError("Invalid comparator: "+y);this.operator=x[1],this.operator==="="&&(this.operator=""),x[2]?this.semver=new Q(x[2],this.options.loose):this.semver=_t},Te.prototype.toString=function(){return this.value},Te.prototype.test=function(y){return r("Comparator.test",y,this.options.loose),this.semver===_t?!0:(typeof y=="string"&&(y=new Q(y,this.options)),At(y,this.operator,this.semver,this.options))},Te.prototype.intersects=function(y,E){if(!(y instanceof Te))throw new TypeError("a Comparator is required");(!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1});var x;if(this.operator==="")return x=new ce(y.value,E),er(this.value,x,E);if(y.operator==="")return x=new ce(this.value,E),er(y.semver,x,E);var R=(this.operator===">="||this.operator===">")&&(y.operator===">="||y.operator===">"),N=(this.operator==="<="||this.operator==="<")&&(y.operator==="<="||y.operator==="<"),$=this.semver.version===y.semver.version,H=(this.operator===">="||this.operator==="<=")&&(y.operator===">="||y.operator==="<="),Z=At(this.semver,"<",y.semver,E)&&(this.operator===">="||this.operator===">")&&(y.operator==="<="||y.operator==="<"),X=At(this.semver,">",y.semver,E)&&(this.operator==="<="||this.operator==="<")&&(y.operator===">="||y.operator===">");return R||N||$&&H||Z||X},t.Range=ce;function ce(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof ce)return y.loose===!!E.loose&&y.includePrerelease===!!E.includePrerelease?y:new ce(y.raw,E);if(y instanceof Te)return new ce(y.value,E);if(!(this instanceof ce))return new ce(y,E);if(this.options=E,this.loose=!!E.loose,this.includePrerelease=!!E.includePrerelease,this.raw=y,this.set=y.split(/\s*\|\|\s*/).map(function(x){return this.parseRange(x.trim())},this).filter(function(x){return x.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+y);this.format()}ce.prototype.format=function(){return this.range=this.set.map(function(y){return y.join(" ").trim()}).join("||").trim(),this.range},ce.prototype.toString=function(){return this.range},ce.prototype.parseRange=function(y){var E=this.options.loose;y=y.trim();var x=E?s[ve]:s[It];y=y.replace(x,ls),r("hyphen replace",y),y=y.replace(s[pe],yt),r("comparator trim",y,s[pe]),y=y.replace(s[F],L),y=y.replace(s[ie],te),y=y.split(/\s+/).join(" ");var R=E?s[Pe]:s[De],N=y.split(" ").map(function($){return kn($,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(N=N.filter(function($){return!!$.match(R)})),N=N.map(function($){return new Te($,this.options)},this),N},ce.prototype.intersects=function(y,E){if(!(y instanceof ce))throw new TypeError("a Range is required");return this.set.some(function(x){return x.every(function(R){return y.set.some(function(N){return N.every(function($){return R.intersects($,E)})})})})},t.toComparators=to;function to(y,E){return new ce(y,E).set.map(function(x){return x.map(function(R){return R.value}).join(" ").trim().split(" ")})}function kn(y,E){return r("comp",y,E),y=os(y,E),r("caret",y),y=Nr(y,E),r("tildes",y),y=as(y,E),r("xrange",y),y=fr(y,E),r("stars",y),y}function we(y){return!y||y.toLowerCase()==="x"||y==="*"}function Nr(y,E){return y.trim().split(/\s+/).map(function(x){return is(x,E)}).join(" ")}function is(y,E){var x=E.loose?s[W]:s[q];return y.replace(x,function(R,N,$,H,Z){r("tilde",y,R,N,$,H,Z);var X;return we(N)?X="":we($)?X=">="+N+".0.0 <"+(+N+1)+".0.0":we(H)?X=">="+N+"."+$+".0 <"+N+"."+(+$+1)+".0":Z?(r("replaceTilde pr",Z),X=">="+N+"."+$+"."+H+"-"+Z+" <"+N+"."+(+$+1)+".0"):X=">="+N+"."+$+"."+H+" <"+N+"."+(+$+1)+".0",r("tilde return",X),X})}function os(y,E){return y.trim().split(/\s+/).map(function(x){return ss(x,E)}).join(" ")}function ss(y,E){r("caret",y,E);var x=E.loose?s[ke]:s[_e];return y.replace(x,function(R,N,$,H,Z){r("caret",y,R,N,$,H,Z);var X;return we(N)?X="":we($)?X=">="+N+".0.0 <"+(+N+1)+".0.0":we(H)?N==="0"?X=">="+N+"."+$+".0 <"+N+"."+(+$+1)+".0":X=">="+N+"."+$+".0 <"+(+N+1)+".0.0":Z?(r("replaceCaret pr",Z),N==="0"?$==="0"?X=">="+N+"."+$+"."+H+"-"+Z+" <"+N+"."+$+"."+(+H+1):X=">="+N+"."+$+"."+H+"-"+Z+" <"+N+"."+(+$+1)+".0":X=">="+N+"."+$+"."+H+"-"+Z+" <"+(+N+1)+".0.0"):(r("no pr"),N==="0"?$==="0"?X=">="+N+"."+$+"."+H+" <"+N+"."+$+"."+(+H+1):X=">="+N+"."+$+"."+H+" <"+N+"."+(+$+1)+".0":X=">="+N+"."+$+"."+H+" <"+(+N+1)+".0.0"),r("caret return",X),X})}function as(y,E){return r("replaceXRanges",y,E),y.split(/\s+/).map(function(x){return cs(x,E)}).join(" ")}function cs(y,E){y=y.trim();var x=E.loose?s[Y]:s[J];return y.replace(x,function(R,N,$,H,Z,X){r("xRange",y,R,N,$,H,Z,X);var qe=we($),Re=qe||we(H),Ie=Re||we(Z),xe=Ie;return N==="="&&xe&&(N=""),qe?N===">"||N==="<"?R="<0.0.0":R="*":N&&xe?(Re&&(H=0),Z=0,N===">"?(N=">=",Re?($=+$+1,H=0,Z=0):(H=+H+1,Z=0)):N==="<="&&(N="<",Re?$=+$+1:H=+H+1),R=N+$+"."+H+"."+Z):Re?R=">="+$+".0.0 <"+(+$+1)+".0.0":Ie&&(R=">="+$+"."+H+".0 <"+$+"."+(+H+1)+".0"),r("xRange return",R),R})}function fr(y,E){return r("replaceStars",y,E),y.trim().replace(s[fe],"")}function ls(y,E,x,R,N,$,H,Z,X,qe,Re,Ie,xe){return we(x)?E="":we(R)?E=">="+x+".0.0":we(N)?E=">="+x+"."+R+".0":E=">="+E,we(X)?Z="":we(qe)?Z="<"+(+X+1)+".0.0":we(Re)?Z="<"+X+"."+(+qe+1)+".0":Ie?Z="<="+X+"."+qe+"."+Re+"-"+Ie:Z="<="+Z,(E+" "+Z).trim()}ce.prototype.test=function(y){if(!y)return!1;typeof y=="string"&&(y=new Q(y,this.options));for(var E=0;E<this.set.length;E++)if(us(this.set[E],y,this.options))return!0;return!1};function us(y,E,x){for(var R=0;R<y.length;R++)if(!y[R].test(E))return!1;if(E.prerelease.length&&!x.includePrerelease){for(R=0;R<y.length;R++)if(r(y[R].semver),y[R].semver!==_t&&y[R].semver.prerelease.length>0){var N=y[R].semver;if(N.major===E.major&&N.minor===E.minor&&N.patch===E.patch)return!0}return!1}return!0}t.satisfies=er;function er(y,E,x){try{E=new ce(E,x)}catch{return!1}return E.test(y)}t.maxSatisfying=ds;function ds(y,E,x){var R=null,N=null;try{var $=new ce(E,x)}catch{return null}return y.forEach(function(H){$.test(H)&&(!R||N.compare(H)===-1)&&(R=H,N=new Q(R,x))}),R}t.minSatisfying=fs;function fs(y,E,x){var R=null,N=null;try{var $=new ce(E,x)}catch{return null}return y.forEach(function(H){$.test(H)&&(!R||N.compare(H)===1)&&(R=H,N=new Q(R,x))}),R}t.minVersion=Qr;function Qr(y,E){y=new ce(y,E);var x=new Q("0.0.0");if(y.test(x)||(x=new Q("0.0.0-0"),y.test(x)))return x;x=null;for(var R=0;R<y.set.length;++R){var N=y.set[R];N.forEach(function($){var H=new Q($.semver.version);switch($.operator){case">":H.prerelease.length===0?H.patch++:H.prerelease.push(0),H.raw=H.format();case"":case">=":(!x||Et(x,H))&&(x=H);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+$.operator)}})}return x&&y.test(x)?x:null}t.validRange=ps;function ps(y,E){try{return new ce(y,E).range||"*"}catch{return null}}t.ltr=hs;function hs(y,E,x){return Lr(y,E,"<",x)}t.gtr=ms;function ms(y,E,x){return Lr(y,E,">",x)}t.outside=Lr;function Lr(y,E,x,R){y=new Q(y,R),E=new ce(E,R);var N,$,H,Z,X;switch(x){case">":N=Et,$=Tt,H=Bt,Z=">",X=">=";break;case"<":N=Bt,$=Or,H=Et,Z="<",X="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(er(y,E,R))return!1;for(var qe=0;qe<E.set.length;++qe){var Re=E.set[qe],Ie=null,xe=null;if(Re.forEach(function(Xe){Xe.semver===_t&&(Xe=new Te(">=0.0.0")),Ie=Ie||Xe,xe=xe||Xe,N(Xe.semver,Ie.semver,R)?Ie=Xe:H(Xe.semver,xe.semver,R)&&(xe=Xe)}),Ie.operator===Z||Ie.operator===X||(!xe.operator||xe.operator===Z)&&$(y,xe.semver)||xe.operator===X&&H(y,xe.semver))return!1}return!0}t.prerelease=gs;function gs(y,E){var x=je(y,E);return x&&x.prerelease.length?x.prerelease:null}t.intersects=Xr;function Xr(y,E,x){return y=new ce(y,x),E=new ce(E,x),y.intersects(E)}t.coerce=vs;function vs(y){if(y instanceof Q)return y;if(typeof y!="string")return null;var E=y.match(s[oe]);return E==null?null:je(E[1]+"."+(E[2]||"0")+"."+(E[3]||"0"))}}),HZ=O((t,e)=>{var r=kb().wrap,n=1<<0,i=1<<1,o=1<<2,s=1<<3,a=[],c=0,l=!1,u=[],d,f;function p(_,k){var T=_.length,A=k.length,M=[];if(T===0&&A===0)return M;for(var j=0;j<T;j++)M[j]=_[j];if(A===0)return M;for(var J=0;J<A;J++){var Y=!0;for(j=0;j<T;j++)if(_[j].uid===k[J].uid){Y=!1;break}Y&&M.push(k[J])}return M}process._fatalException?(h=!1,d=function(_){var k=a.length;if(h||k===0)return!1;var T=!1;h=!0;for(var A=0;A<k;++A){var M=a[A];if((M.flags&s)!=0){var j=m&&m[M.uid];T=M.error(j,_)||T}}return h=!1,u.length>0&&(a=u.pop()),m=void 0,T&&!l},f=function(_,k,T){var A=[];l=!0;for(var M=0;M<T;++M){var j=k[M];if(A[j.uid]=j.data,(j.flags&n)!=0){var J=j.create(j.data);J!==void 0&&(A[j.uid]=J)}}return l=!1,function(){m=A,u.push(a),a=p(k,a),l=!0;for(var Y=0;Y<T;++Y)(k[Y].flags&i)>0&&k[Y].before(this,A[k[Y].uid]);l=!1;var oe=_.apply(this,arguments);for(l=!0,Y=0;Y<T;++Y)(k[Y].flags&o)>0&&k[Y].after(this,A[k[Y].uid]);return l=!1,a=u.pop(),m=void 0,oe}},r(process,"_fatalException",function(_){return function(k){return d(k)||_(k)}})):(g=!1,d=function(_){if(g)throw _;for(var k=!1,T=a.length,A=0;A<T;++A){var M=a[A];(M.flags&s)!=0&&(k=M.error(null,_)||k)}if(!k&&l)throw _},f=function(_,k,T){var A=[];l=!0;for(var M=0;M<T;++M){var j=k[M];if(A[j.uid]=j.data,(j.flags&n)!=0){var J=j.create(j.data);J!==void 0&&(A[j.uid]=J)}}return l=!1,function(){var Y=!1,oe=!1;u.push(a),a=p(k,a),l=!0;for(var re=0;re<T;++re)(k[re].flags&i)>0&&k[re].before(this,A[k[re].uid]);l=!1;var F;try{F=_.apply(this,arguments)}catch(L){Y=!0;for(var re=0;re<T;++re)if((a[re].flags&s)!=0)try{oe=a[re].error(A[k[re].uid],L)||oe}catch(W){throw g=!0,W}if(!oe)throw process.removeListener("uncaughtException",d),process._originalNextTick(function(){process.addListener("uncaughtException",d)}),L}finally{if(!Y||oe){for(l=!0,re=0;re<T;++re)(k[re].flags&o)>0&&k[re].after(this,A[k[re].uid]);l=!1}a=u.pop()}return F}},process.addListener("uncaughtException",d));var h,m,g;function v(_,k,T){l=!0;for(var A=0;A<T;++A){var M=k[A];M.create&&M.create(M.data)}return l=!1,function(){u.push(a),a=p(k,a);var j=_.apply(this,arguments);return a=u.pop(),j}}function w(_){var k=a.length;if(k===0)return _;for(var T=a.slice(),A=0;A<k;++A)if(T[A].flags>0)return f(_,T,k);return v(_,T,k)}function b(_,k){typeof _.create=="function"&&(this.create=_.create,this.flags|=n),typeof _.before=="function"&&(this.before=_.before,this.flags|=i),typeof _.after=="function"&&(this.after=_.after,this.flags|=o),typeof _.error=="function"&&(this.error=_.error,this.flags|=s),this.uid=++c,this.data=k===void 0?null:k}b.prototype.create=void 0,b.prototype.before=void 0,b.prototype.after=void 0,b.prototype.error=void 0,b.prototype.data=void 0,b.prototype.uid=0,b.prototype.flags=0;function C(_,k){if(typeof _!="object"||!_)throw new TypeError("callbacks argument must be an object");return _ instanceof b?_:new b(_,k)}function S(_,k){var T;_ instanceof b?T=_:T=C(_,k);for(var A=!1,M=0;M<a.length;M++)if(T===a[M]){A=!0;break}return A||a.push(T),T}function P(_){for(var k=0;k<a.length;k++)if(_===a[k]){a.splice(k,1);break}}process.createAsyncListener=C,process.addAsyncListener=S,process.removeAsyncListener=P,e.exports=w}),VZ=O((t,e)=>{"use strict";e.exports=(r,n)=>class extends r{constructor(i){var o,s;super(c);var a=this;try{i.apply(o,s)}catch(l){s[1](l)}return a;function c(l,u){o=this,s=[d,f];function d(p){return n(a,!1),l(p)}function f(p){return n(a,!1),u(p)}}}}}),WZ=O(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var t=kb(),e=BZ(),r=t.wrap,n=t.massWrap,i=HZ(),o=require("util"),s=e.gte(process.version,"6.0.0"),a=e.gte(process.version,"7.0.0"),c=e.gte(process.version,"8.0.0"),l=e.gte(process.version,"11.0.0"),u=require("net");a&&!u._normalizeArgs?u._normalizeArgs=function(F){if(F.length===0)return[{},null];var L=F[0],q={};typeof L=="object"&&L!==null?q=L:re(L)?q.path=L:(q.port=L,F.length>1&&typeof F[1]=="string"&&(q.host=F[1]));var W=F[F.length-1];return typeof W!="function"?[q,null]:[q,W]}:!a&&!u._normalizeConnectArgs&&(u._normalizeConnectArgs=function(F){var L={};function q(z){return(z=Number(z))>=0?z:!1}typeof F[0]=="object"&&F[0]!==null?L=F[0]:typeof F[0]=="string"&&q(F[0])===!1?L.path=F[0]:(L.port=F[0],typeof F[1]=="string"&&(L.host=F[1]));var W=F[F.length-1];return typeof W=="function"?[L,W]:[L]}),"_setUpListenHandle"in u.Server.prototype?r(u.Server.prototype,"_setUpListenHandle",d):r(u.Server.prototype,"_listen2",d);function d(F){return function(){this.on("connection",function(L){L._handle&&(L._handle.onread=i(L._handle.onread))});try{return F.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=i(this._handle.onconnection))}}}function f(F){if(F&&F._handle){var L=F._handle;L._originalOnread||(L._originalOnread=L.onread),L.onread=i(L._originalOnread)}}r(u.Socket.prototype,"connect",function(F){return function(){var L;c&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?L=arguments[0]:L=a?u._normalizeArgs(arguments):u._normalizeConnectArgs(arguments),L[1]&&(L[1]=i(L[1]));var q=F.apply(this,L);return f(this),q}});var p=require("http");r(p.Agent.prototype,"addRequest",function(F){return function(L){var q=L.onSocket;return L.onSocket=i(function(W){return f(W),q.apply(this,arguments)}),F.apply(this,arguments)}});var h=require("child_process");function m(F){Array.isArray(F.stdio)&&F.stdio.forEach(function(L){L&&L._handle&&(L._handle.onread=i(L._handle.onread),r(L._handle,"close",Y))}),F._handle&&(F._handle.onexit=i(F._handle.onexit))}h.ChildProcess?r(h.ChildProcess.prototype,"spawn",function(F){return function(){var L=F.apply(this,arguments);return m(this),L}}):n(h,["execFile","fork","spawn"],function(F){return function(){var L=F.apply(this,arguments);return m(L),L}}),process._fatalException||(process._originalNextTick=process.nextTick);var g=[];process._nextDomainTick&&g.push("_nextDomainTick"),process._tickDomainCallback&&g.push("_tickDomainCallback"),n(process,g,J),r(process,"nextTick",Y);var v=["setTimeout","setInterval"];global.setImmediate&&v.push("setImmediate");var w=require("timers"),b=global.setTimeout===w.setTimeout;n(w,v,Y),b&&n(global,v,Y);var C=require("dns");n(C,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],J),C.resolveNaptr&&r(C,"resolveNaptr",J);var S=require("fs");n(S,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],J),S.lchown&&r(S,"lchown",J),S.lchmod&&r(S,"lchmod",J),S.ftruncate&&r(S,"ftruncate",J);var P;try{P=require("zlib")}catch{}P&&P.Deflate&&P.Deflate.prototype&&(_=Object.getPrototypeOf(P.Deflate.prototype),_._transform?r(_,"_transform",J):_.write&&_.flush&&_.end&&n(_,["write","flush","end"],J));var _,k;try{k=require("crypto")}catch{}k&&(T=["pbkdf2","randomBytes"],l||T.push("pseudoRandomBytes"),n(k,T,J));var T,A=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";A&&(M=process.addAsyncListener({create:function(){A=!1}}),global.Promise.resolve(!0).then(function(){A=!1}),process.removeAsyncListener(M));var M;A&&j();function j(){var F=global.Promise;function L(te){if(!(this instanceof L))return F(te);if(typeof te!="function")return new F(te);var _e,ke,Pe=new F(De);Pe.__proto__=L.prototype;try{te.apply(_e,ke)}catch(pe){ke[1](pe)}return Pe;function De(pe,yt){_e=this,ke=[It,ve];function It(fe){return W(Pe,!1),pe(fe)}function ve(fe){return W(Pe,!1),yt(fe)}}}if(o.inherits(L,F),r(F.prototype,"then",ie),F.prototype.chain&&r(F.prototype,"chain",ie),s)global.Promise=VZ()(F,W);else{var q=["all","race","reject","resolve","accept","defer"];q.forEach(function(te){typeof F[te]=="function"&&(L[te]=F[te])}),global.Promise=L}function W(te,_e){(!te.__asl_wrapper||_e)&&(te.__asl_wrapper=i(z))}function z(te,_e,ke,Pe){var De;try{return De=_e.call(te,ke),{returnVal:De,error:!1}}catch(pe){return{errorVal:pe,error:!0}}finally{De instanceof F?Pe.__asl_wrapper=function(){var pe=De.__asl_wrapper||z;return pe.apply(this,arguments)}:W(Pe,!0)}}function ie(te){return function(){var _e=this,ke=te.apply(_e,Array.prototype.map.call(arguments,Pe));return ke.__asl_wrapper=function(De,pe,yt,It){return _e.__asl_wrapper?(_e.__asl_wrapper(De,function(){},null,ke),ke.__asl_wrapper(De,pe,yt,It)):z(De,pe,yt,It)},ke;function Pe(De){return typeof De!="function"?De:i(function(pe){var yt=(_e.__asl_wrapper||z)(this,De,pe,ke);if(yt.error)throw yt.errorVal;return yt.returnVal})}}}}function J(F){var L=function(){var q,W=arguments.length-1;if(typeof arguments[W]=="function"){q=Array(arguments.length);for(var z=0;z<arguments.length-1;z++)q[z]=arguments[z];q[W]=i(arguments[W])}return F.apply(this,q||arguments)};switch(F.length){case 1:return function(q){return arguments.length!==1?L.apply(this,arguments):(typeof q=="function"&&(q=i(q)),F.call(this,q))};case 2:return function(q,W){return arguments.length!==2?L.apply(this,arguments):(typeof W=="function"&&(W=i(W)),F.call(this,q,W))};case 3:return function(q,W,z){return arguments.length!==3?L.apply(this,arguments):(typeof z=="function"&&(z=i(z)),F.call(this,q,W,z))};case 4:return function(q,W,z,ie){return arguments.length!==4?L.apply(this,arguments):(typeof ie=="function"&&(ie=i(ie)),F.call(this,q,W,z,ie))};case 5:return function(q,W,z,ie,te){return arguments.length!==5?L.apply(this,arguments):(typeof te=="function"&&(te=i(te)),F.call(this,q,W,z,ie,te))};case 6:return function(q,W,z,ie,te,_e){return arguments.length!==6?L.apply(this,arguments):(typeof _e=="function"&&(_e=i(_e)),F.call(this,q,W,z,ie,te,_e))};default:return L}}function Y(F){var L=function(){var q;if(typeof arguments[0]=="function"){q=Array(arguments.length),q[0]=i(arguments[0]);for(var W=1;W<arguments.length;W++)q[W]=arguments[W]}return F.apply(this,q||arguments)};switch(F.length){case 1:return function(q){return arguments.length!==1?L.apply(this,arguments):(typeof q=="function"&&(q=i(q)),F.call(this,q))};case 2:return function(q,W){return arguments.length!==2?L.apply(this,arguments):(typeof q=="function"&&(q=i(q)),F.call(this,q,W))};case 3:return function(q,W,z){return arguments.length!==3?L.apply(this,arguments):(typeof q=="function"&&(q=i(q)),F.call(this,q,W,z))};case 4:return function(q,W,z,ie){return arguments.length!==4?L.apply(this,arguments):(typeof q=="function"&&(q=i(q)),F.call(this,q,W,z,ie))};case 5:return function(q,W,z,ie,te){return arguments.length!==5?L.apply(this,arguments):(typeof q=="function"&&(q=i(q)),F.call(this,q,W,z,ie,te))};case 6:return function(q,W,z,ie,te,_e){return arguments.length!==6?L.apply(this,arguments):(typeof q=="function"&&(q=i(q)),F.call(this,q,W,z,ie,te,_e))};default:return L}}function oe(F){return(F=Number(F))>=0?F:!1}function re(F){return typeof F=="string"&&oe(F)===!1}}),GZ=O((t,e)=>{"use strict";var r=require("assert"),n=Ib(),i="cls@contexts",o="error@context";process.addAsyncListener||WZ();function s(d){this.name=d,this.active=null,this._set=[],this.id=null}s.prototype.set=function(d,f){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[d]=f,f},s.prototype.get=function(d){if(this.active)return this.active[d]},s.prototype.createContext=function(){return Object.create(this.active)},s.prototype.run=function(d){var f=this.createContext();this.enter(f);try{return d(f),f}catch(p){throw p&&(p[o]=f),p}finally{this.exit(f)}},s.prototype.runAndReturn=function(d){var f;return this.run(function(p){f=d(p)}),f},s.prototype.bind=function(d,f){f||(this.active?f=this.active:f=this.createContext());var p=this;return function(){p.enter(f);try{return d.apply(this,arguments)}catch(h){throw h&&(h[o]=f),h}finally{p.exit(f)}}},s.prototype.enter=function(d){r.ok(d,"context must be provided for entering"),this._set.push(this.active),this.active=d},s.prototype.exit=function(d){if(r.ok(d,"context must be provided for exiting"),this.active===d){r.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var f=this._set.lastIndexOf(d);r.ok(f>=0,"context not currently entered; can't exit"),r.ok(f,"can't remove top context"),this._set.splice(f,1)},s.prototype.bindEmitter=function(d){r.ok(d.on&&d.addListener&&d.emit,"can only bind real EEs");var f=this,p="context@"+this.name;function h(g){!g||(g[i]||(g[i]=Object.create(null)),g[i][p]={namespace:f,context:f.active})}function m(g){if(!(g&&g[i]))return g;var v=g,w=g[i];return Object.keys(w).forEach(function(b){var C=w[b];v=C.namespace.bind(v,C.context)}),v}n(d,h,m)},s.prototype.fromException=function(d){return d[o]};function a(d){return process.namespaces[d]}function c(d){r.ok(d,"namespace must be given a name!");var f=new s(d);return f.id=process.addAsyncListener({create:function(){return f.active},before:function(p,h){h&&f.enter(h)},after:function(p,h){h&&f.exit(h)},error:function(p){p&&f.exit(p)}}),process.namespaces[d]=f,f}function l(d){var f=a(d);r.ok(f,"can't delete nonexistent namespace!"),r.ok(f.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(f.id),process.namespaces[d]=null}function u(){process.namespaces&&Object.keys(process.namespaces).forEach(function(d){l(d)}),process.namespaces=Object.create(null)}process.namespaces||u(),e.exports={getNamespace:a,createNamespace:c,destroyNamespace:l,reset:u}}),Dc=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CorrelationContextManager=void 0;var e=Jt(),r=Pb(),n=dm(),i=Z1(),o=oF(),s=function(){function c(){}return c.getCurrentContext=function(){if(!c.enabled)return null;var l=c.session.get(c.CONTEXT_NAME);return l===void 0?null:l},c.generateContextObject=function(l,u,d,f,p,h){return u=u||l,this.enabled?{operation:{name:d,id:l,parentId:u,traceparent:p,tracestate:h},customProperties:new a(f)}:null},c.spanToContextObject=function(l,u,d){var f=new n;return f.traceId=l.traceId,f.spanId=l.spanId,f.traceFlag=n.formatOpenTelemetryTraceFlags(l.traceFlags)||n.DEFAULT_TRACE_FLAG,f.parentId=u,c.generateContextObject(f.traceId,f.parentId,d,null,f)},c.runWithContext=function(l,u){var d;return c.enabled?c.session.bind(u,(d={},d[c.CONTEXT_NAME]=l,d))():u()},c.wrapEmitter=function(l){c.enabled&&c.session.bindEmitter(l)},c.wrapCallback=function(l,u){var d;return c.enabled?c.session.bind(l,u?(d={},d[c.CONTEXT_NAME]=u,d):void 0):l},c.enable=function(l){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}c.hasEverEnabled||(this.forceClsHooked=l,this.hasEverEnabled=!0,typeof this.cls>"u"&&(c.forceClsHooked===!0||c.forceClsHooked===void 0&&c.shouldUseClsHooked()?this.cls=UZ():this.cls=GZ()),c.session=this.cls.createNamespace("AI-CLS-Session"),r.registerContextPreservation(function(u){return c.session.bind(u)})),this.enabled=!0}},c.startOperation=function(l,u){var d=l&&l.traceContext||null,f=l&&l.traceId?l:null,p=l&&l.headers;if(f){var h=new n("00-"+f.traceId+"-"+f.spanId+"-01"),m=new i(f.traceState?f.traceState.serialize():null),g=c.generateContextObject(f.traceId,"|"+f.traceId+"."+f.spanId+".",typeof u=="string"?u:"",void 0,h,m);return g}if(d){var h=new n(d.traceparent),m=new i(d.tracestate),v=typeof u=="object"?new o(u):null,g=c.generateContextObject(h.traceId,h.parentId,typeof u=="string"?u:v.getOperationName({}),v&&v.getCorrelationContextHeader()||void 0,h,m);return g}if(p){var h=new n(p.traceparent?p.traceparent.toString():null),m=new i(p.tracestate?p.tracestate.toString():null),v=new o(l),g=c.generateContextObject(h.traceId,h.parentId,v.getOperationName({}),v.getCorrelationContextHeader(),h,m);return g}return e.warn("startOperation was called with invalid arguments",arguments),null},c.disable=function(){this.enabled=!1},c.reset=function(){c.hasEverEnabled&&(c.session=null,c.session=this.cls.createNamespace("AI-CLS-Session"))},c.isNodeVersionCompatible=function(){var l=process.versions.node.split(".");return parseInt(l[0])>3||parseInt(l[0])>2&&parseInt(l[1])>2},c.shouldUseClsHooked=function(){var l=process.versions.node.split(".");return parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=2},c.canUseClsHooked=function(){var l=process.versions.node.split("."),u=parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=0,d=parseInt(l[0])<8||parseInt(l[0])<=8&&parseInt(l[1])<2,f=parseInt(l[0])>4||parseInt(l[0])>=4&&parseInt(l[1])>=7;return!(u&&d)&&f},c.enabled=!1,c.hasEverEnabled=!1,c.forceClsHooked=void 0,c.CONTEXT_NAME="ApplicationInsights-Context",c}();t.CorrelationContextManager=s;var a=function(){function c(l){this.props=[],this.addHeaderData(l)}return c.prototype.addHeaderData=function(l){var u=l?l.split(", "):[];this.props=u.map(function(d){var f=d.split("=");return{key:f[0],value:f[1]}}).concat(this.props)},c.prototype.serializeToHeader=function(){return this.props.map(function(l){return l.key+"="+l.value}).join(", ")},c.prototype.getProperty=function(l){for(var u=0;u<this.props.length;++u){var d=this.props[u];if(d.key===l)return d.value}},c.prototype.setProperty=function(l,u){if(c.bannedCharacters.test(l)||c.bannedCharacters.test(u)){e.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+l+" and value: "+u);return}for(var d=0;d<this.props.length;++d){var f=this.props[d];if(f.key===l){f.value=u;return}}this.props.push({key:l,value:u})},c.bannedCharacters=/[,=]/,c}()}),zZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.enable=void 0;var e=kr(),r=Pt(),n=[],i=function(a){var c=a.data.message;n.forEach(function(l){c instanceof Error?l.trackException({exception:c}):(c.lastIndexOf(`
`)==c.length-1&&(c=c.substring(0,c.length-1)),l.trackTrace({message:c,severity:a.data.stderr?e.SeverityLevel.Warning:e.SeverityLevel.Information}))})};function o(a,c){a?(n.length===0&&r.channel.subscribe("console",i),n.push(c)):(n=n.filter(function(l){return l!=c}),n.length===0&&r.channel.unsubscribe("console",i))}t.enable=o;function s(){r.channel.unsubscribe("console",i),n=[]}t.dispose=s}),KZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.enable=void 0;var e=kr(),r=Pt(),n=[],i={10:e.SeverityLevel.Verbose,20:e.SeverityLevel.Verbose,30:e.SeverityLevel.Information,40:e.SeverityLevel.Warning,50:e.SeverityLevel.Error,60:e.SeverityLevel.Critical},o=function(c){var l=c.data.result;n.forEach(function(u){var d=i[c.data.level];l instanceof Error?u.trackException({exception:l}):u.trackTrace({message:l,severity:d})})};function s(c,l){c?(n.length===0&&r.channel.subscribe("bunyan",o),n.push(l)):(n=n.filter(function(u){return u!=l}),n.length===0&&r.channel.unsubscribe("bunyan",o))}t.enable=s;function a(){r.channel.unsubscribe("bunyan",o),n=[]}t.dispose=a}),YZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.enable=void 0;var e=kr(),r=Pt(),n=[],i={syslog:function(c){var l={emerg:e.SeverityLevel.Critical,alert:e.SeverityLevel.Critical,crit:e.SeverityLevel.Critical,error:e.SeverityLevel.Error,warning:e.SeverityLevel.Warning,notice:e.SeverityLevel.Information,info:e.SeverityLevel.Information,debug:e.SeverityLevel.Verbose};return l[c]===void 0?e.SeverityLevel.Information:l[c]},npm:function(c){var l={error:e.SeverityLevel.Error,warn:e.SeverityLevel.Warning,info:e.SeverityLevel.Information,verbose:e.SeverityLevel.Verbose,debug:e.SeverityLevel.Verbose,silly:e.SeverityLevel.Verbose};return l[c]===void 0?e.SeverityLevel.Information:l[c]},unknown:function(c){return e.SeverityLevel.Information}},o=function(c){var l=c.data.message;n.forEach(function(u){if(l instanceof Error)u.trackException({exception:l,properties:c.data.meta});else{var d=i[c.data.levelKind](c.data.level);u.trackTrace({message:l,severity:d,properties:c.data.meta})}})};function s(c,l){c?(n.length===0&&r.channel.subscribe("winston",o),n.push(l)):(n=n.filter(function(u){return u!=l}),n.length===0&&r.channel.unsubscribe("winston",o))}t.enable=s;function a(){r.channel.unsubscribe("winston",o),n=[]}t.dispose=a}),JZ=O((t,e)=>{"use strict";var r=Pb(),n=function(){function i(o){if(i.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=o,i.INSTANCE=this}return i.prototype.enable=function(o,s){r.IsInitialized&&(zZ().enable(o&&s,this._client),KZ().enable(o,this._client),YZ().enable(o,this._client))},i.prototype.isInitialized=function(){return this._isInitialized},i.prototype.dispose=function(){i.INSTANCE=null,this.enable(!1,!1)},i._methodNames=["debug","info","log","warn","error"],i}();e.exports=n}),QZ=O((t,e)=>{"use strict";var r=function(){function n(i){if(n.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");n.INSTANCE=this,this._client=i;var o=process.versions.node.split(".");n._canUseUncaughtExceptionMonitor=parseInt(o[0])>13||parseInt(o[0])===13&&parseInt(o[1])>=7}return n.prototype.isInitialized=function(){return this._isInitialized},n.prototype.enable=function(i){var o=this;if(i){this._isInitialized=!0;var s=this;if(!this._exceptionListenerHandle){var a=function(c,l,u){u===void 0&&(u=new Error(n._FALLBACK_ERROR_MESSAGE)),o._client.trackException({exception:u}),o._client.flush({isAppCrashing:!0}),c&&l&&process.listeners(l).length===1&&(console.error(u),process.exit(1))};n._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=a.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=a.bind(this,!0,n.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=a.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(n._canUseUncaughtExceptionMonitor?process.removeListener(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},n.prototype.dispose=function(){n.INSTANCE=null,this.enable(!1),this._isInitialized=!1},n.INSTANCE=null,n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",n.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",n.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",n._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",n._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",n._canUseUncaughtExceptionMonitor=!1,n}();e.exports=r}),$o=O(t=>{"use strict";var e;Object.defineProperty(t,"__esModule",{value:!0}),t.HeartBeatMetricName=t.DependencyTypeName=t.SpanAttribute=t.TelemetryTypeStringToQuickPulseDocumentType=t.TelemetryTypeStringToQuickPulseType=t.QuickPulseType=t.QuickPulseDocumentType=t.PerformanceToQuickPulseCounter=t.MetricId=t.PerformanceCounter=t.QuickPulseCounter=t.DEFAULT_LIVEMETRICS_HOST=t.DEFAULT_LIVEMETRICS_ENDPOINT=t.DEFAULT_BREEZE_ENDPOINT=void 0,t.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",t.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",t.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var r;(function(o){o.COMMITTED_BYTES="\\Memory\\Committed Bytes",o.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",o.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",o.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",o.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",o.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",o.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",o.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",o.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(r=t.QuickPulseCounter||(t.QuickPulseCounter={}));var n;(function(o){o.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",o.AVAILABLE_BYTES="\\Memory\\Available Bytes",o.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",o.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",o.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",o.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(n=t.PerformanceCounter||(t.PerformanceCounter={}));var i;(function(o){o.REQUESTS_DURATION="requests/duration",o.DEPENDENCIES_DURATION="dependencies/duration",o.EXCEPTIONS_COUNT="exceptions/count",o.TRACES_COUNT="traces/count"})(i=t.MetricId||(t.MetricId={})),t.PerformanceToQuickPulseCounter=(e={},e[n.PROCESSOR_TIME]=r.PROCESSOR_TIME,e[n.REQUEST_RATE]=r.REQUEST_RATE,e[n.REQUEST_DURATION]=r.REQUEST_DURATION,e[r.COMMITTED_BYTES]=r.COMMITTED_BYTES,e[r.REQUEST_FAILURE_RATE]=r.REQUEST_FAILURE_RATE,e[r.DEPENDENCY_RATE]=r.DEPENDENCY_RATE,e[r.DEPENDENCY_FAILURE_RATE]=r.DEPENDENCY_FAILURE_RATE,e[r.DEPENDENCY_DURATION]=r.DEPENDENCY_DURATION,e[r.EXCEPTION_RATE]=r.EXCEPTION_RATE,e),t.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},t.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},t.TelemetryTypeStringToQuickPulseType={EventData:t.QuickPulseType.Event,ExceptionData:t.QuickPulseType.Exception,MessageData:t.QuickPulseType.Trace,MetricData:t.QuickPulseType.Metric,RequestData:t.QuickPulseType.Request,RemoteDependencyData:t.QuickPulseType.Dependency,AvailabilityData:t.QuickPulseType.Availability,PageViewData:t.QuickPulseType.PageView},t.TelemetryTypeStringToQuickPulseDocumentType={EventData:t.QuickPulseDocumentType.Event,ExceptionData:t.QuickPulseDocumentType.Exception,MessageData:t.QuickPulseDocumentType.Trace,MetricData:t.QuickPulseDocumentType.Metric,RequestData:t.QuickPulseDocumentType.Request,RemoteDependencyData:t.QuickPulseDocumentType.Dependency,AvailabilityData:t.QuickPulseDocumentType.Availability,PageViewData:t.QuickPulseDocumentType.PageView},t.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},t.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},t.HeartBeatMetricName="HeartBeat"}),Tb=O((t,e)=>{"use strict";var r=require("os"),n=$o(),i=function(){function o(s,a,c){a===void 0&&(a=6e4),c===void 0&&(c=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,o.INSTANCE||(o.INSTANCE=this),this._isInitialized=!1,this._client=s,this._collectionInterval=a,this._enableLiveMetricsCounters=c}return o.prototype.enable=function(s,a){var c=this;this._isEnabled=s,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),s?this._handle||(this._lastCpus=r.cpus(),this._lastRequests={totalRequestCount:o._totalRequestCount,totalFailedRequestCount:o._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:o._totalDependencyCount,totalFailedDependencyCount:o._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:o._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=a||this._collectionInterval,this._handle=setInterval(function(){return c.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},o.countRequest=function(s,a){var c;if(o.isEnabled()){if(typeof s=="string")c=+new Date("1970-01-01T"+s+"Z");else if(typeof s=="number")c=s;else return;o._intervalRequestExecutionTime+=c,a===!1&&o._totalFailedRequestCount++,o._totalRequestCount++}},o.countException=function(){o._totalExceptionCount++},o.countDependency=function(s,a){var c;if(o.isEnabled()){if(typeof s=="string")c=+new Date("1970-01-01T"+s+"Z");else if(typeof s=="number")c=s;else return;o._intervalDependencyExecutionTime+=c,a===!1&&o._totalFailedDependencyCount++,o._totalDependencyCount++}},o.prototype.isInitialized=function(){return this._isInitialized},o.isEnabled=function(){return o.INSTANCE&&o.INSTANCE._isEnabled},o.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},o.prototype._trackCpu=function(){var s=r.cpus();if(s&&s.length&&this._lastCpus&&s.length===this._lastCpus.length){for(var a=0,c=0,l=0,u=0,d=0,f=0;!!s&&f<s.length;f++){var p=s[f],h=this._lastCpus[f],m="% cpu("+f+") ",g=p.model,v=p.speed,w=p.times,b=h.times,C=w.user-b.user||0;a+=C;var S=w.sys-b.sys||0;c+=S;var P=w.nice-b.nice||0;l+=P;var _=w.idle-b.idle||0;u+=_;var k=w.irq-b.irq||0;d+=k}var T=void 0;if(typeof process.cpuUsage=="function"){var A=process.cpuUsage(),M=process.hrtime(),j=A.user-this._lastAppCpuUsage.user+(A.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime<"u"&&this._lastHrtime.length===2){var J=(M[0]-this._lastHrtime[0])*1e6+(M[1]-this._lastHrtime[1])/1e3||0;T=100*j/(J*s.length)}this._lastAppCpuUsage=A,this._lastHrtime=M}var Y=a+c+l+u+d||1;this._client.trackMetric({name:n.PerformanceCounter.PROCESSOR_TIME,value:(Y-u)/Y*100}),this._client.trackMetric({name:n.PerformanceCounter.PROCESS_TIME,value:T||a/Y*100})}this._lastCpus=s},o.prototype._trackMemory=function(){var s=r.freemem(),a=process.memoryUsage().rss,c=r.totalmem()-s;this._client.trackMetric({name:n.PerformanceCounter.PRIVATE_BYTES,value:a}),this._client.trackMetric({name:n.PerformanceCounter.AVAILABLE_BYTES,value:s}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.COMMITTED_BYTES,value:c})},o.prototype._trackNetwork=function(){var s=this._lastRequests,a={totalRequestCount:o._totalRequestCount,totalFailedRequestCount:o._totalFailedRequestCount,time:+new Date},c=a.totalRequestCount-s.totalRequestCount||0,l=a.totalFailedRequestCount-s.totalFailedRequestCount||0,u=a.time-s.time,d=u/1e3,f=(o._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/c||0;if(this._lastIntervalRequestExecutionTime=o._intervalRequestExecutionTime,u>0){var p=c/d,h=l/d;this._client.trackMetric({name:n.PerformanceCounter.REQUEST_RATE,value:p}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:n.PerformanceCounter.REQUEST_DURATION,value:f}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.REQUEST_FAILURE_RATE,value:h})}this._lastRequests=a},o.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var s=this._lastDependencies,a={totalDependencyCount:o._totalDependencyCount,totalFailedDependencyCount:o._totalFailedDependencyCount,time:+new Date},c=a.totalDependencyCount-s.totalDependencyCount||0,l=a.totalFailedDependencyCount-s.totalFailedDependencyCount||0,u=a.time-s.time,d=u/1e3,f=(o._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/c||0;if(this._lastIntervalDependencyExecutionTime=o._intervalDependencyExecutionTime,u>0){var p=c/d,h=l/d;this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_RATE,value:p}),this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:h}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_DURATION,value:f})}this._lastDependencies=a}},o.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var s=this._lastExceptions,a={totalExceptionCount:o._totalExceptionCount,time:+new Date},c=a.totalExceptionCount-s.totalExceptionCount||0,l=a.time-s.time,u=l/1e3;if(l>0){var d=c/u;this._client.trackMetric({name:n.QuickPulseCounter.EXCEPTION_RATE,value:d})}this._lastExceptions=a}},o.prototype.dispose=function(){o.INSTANCE=null,this.enable(!1),this._isInitialized=!1},o._totalRequestCount=0,o._totalFailedRequestCount=0,o._totalDependencyCount=0,o._totalFailedDependencyCount=0,o._totalExceptionCount=0,o._intervalDependencyExecutionTime=0,o._intervalRequestExecutionTime=0,o}();e.exports=i}),XZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AggregatedMetricCounter=void 0;var e=function(){function r(n){this.dimensions=n,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return r}();t.AggregatedMetricCounter=e}),ZZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreaggregatedMetricPropertyNames=void 0,t.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}}),lF=O((t,e)=>{"use strict";var r=t&&t.__assign||function(){return r=Object.assign||function(a){for(var c,l=1,u=arguments.length;l<u;l++){c=arguments[l];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},r.apply(this,arguments)},n=$o(),i=XZ(),o=ZZ(),s=function(){function a(c,l){l===void 0&&(l=6e4),a.INSTANCE||(a.INSTANCE=this),this._isInitialized=!1,a._dependencyCountersCollection=[],a._requestCountersCollection=[],a._exceptionCountersCollection=[],a._traceCountersCollection=[],this._client=c,this._collectionInterval=l}return a.prototype.enable=function(c,l){var u=this;this._isEnabled=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),c?this._handle||(this._collectionInterval=l||this._collectionInterval,this._handle=setInterval(function(){return u.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},a.countException=function(c){if(a.isEnabled()){var l=a._getAggregatedCounter(c,this._exceptionCountersCollection);l.totalCount++}},a.countTrace=function(c){if(a.isEnabled()){var l=a._getAggregatedCounter(c,this._traceCountersCollection);l.totalCount++}},a.countRequest=function(c,l){if(a.isEnabled()){var u,d=a._getAggregatedCounter(l,this._requestCountersCollection);if(typeof c=="string")u=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")u=c;else return;d.intervalExecutionTime+=u,d.totalCount++}},a.countDependency=function(c,l){if(a.isEnabled()){var u=a._getAggregatedCounter(l,this._dependencyCountersCollection),d;if(typeof c=="string")d=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")d=c;else return;u.intervalExecutionTime+=d,u.totalCount++}},a.prototype.isInitialized=function(){return this._isInitialized},a.isEnabled=function(){return a.INSTANCE&&a.INSTANCE._isEnabled},a.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},a._getAggregatedCounter=function(c,l){for(var u=!1,d=0;d<l.length;d++){if(c===l[d].dimensions)return l[d];if(Object.keys(c).length===Object.keys(l[d].dimensions).length){for(var f in c)if(c[f]!=l[d].dimensions[f]){u=!0;break}if(!u)return l[d];u=!1}}var p=new i.AggregatedMetricCounter(c);return l.push(p),p},a.prototype._trackRequestMetrics=function(){for(var c=0;c<a._requestCountersCollection.length;c++){var l=a._requestCountersCollection[c];l.time=+new Date;var u=l.totalCount-l.lastTotalCount||0,d=l.time-l.lastTime,f=(l.intervalExecutionTime-l.lastIntervalExecutionTime)/u||0;l.lastIntervalExecutionTime=l.intervalExecutionTime,d>0&&u>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:l.dimensions,value:f,count:u,aggregationInterval:d,metricType:n.MetricId.REQUESTS_DURATION}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackDependencyMetrics=function(){for(var c=0;c<a._dependencyCountersCollection.length;c++){var l=a._dependencyCountersCollection[c];l.time=+new Date;var u=l.totalCount-l.lastTotalCount||0,d=l.time-l.lastTime,f=(l.intervalExecutionTime-l.lastIntervalExecutionTime)/u||0;l.lastIntervalExecutionTime=l.intervalExecutionTime,d>0&&u>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:l.dimensions,value:f,count:u,aggregationInterval:d,metricType:n.MetricId.DEPENDENCIES_DURATION}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackExceptionMetrics=function(){for(var c=0;c<a._exceptionCountersCollection.length;c++){var l=a._exceptionCountersCollection[c],u=l.totalCount-l.lastTotalCount||0,d=l.time-l.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:l.dimensions,value:u,count:u,aggregationInterval:d,metricType:n.MetricId.EXCEPTIONS_COUNT}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackTraceMetrics=function(){for(var c=0;c<a._traceCountersCollection.length;c++){var l=a._traceCountersCollection[c],u=l.totalCount-l.lastTotalCount||0,d=l.time-l.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:l.dimensions,value:u,count:u,aggregationInterval:d,metricType:n.MetricId.TRACES_COUNT}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackPreAggregatedMetric=function(c){var l={};for(var u in c.dimensions)l[o.PreaggregatedMetricPropertyNames[u]]=c.dimensions[u];l=r(r({},l),{"_MS.MetricId":c.metricType,"_MS.AggregationIntervalMs":String(c.aggregationInterval),"_MS.IsAutocollected":"True"});var d={name:c.name,value:c.value,count:c.count,properties:l,kind:"Aggregation"};this._client.trackMetric(d)},a.prototype.dispose=function(){a.INSTANCE=null,this.enable(!1),this._isInitialized=!1},a}();e.exports=s}),fm=O((t,e)=>{"use strict";var r=require("os"),n=require("fs"),i=require("path"),o=kr(),s=Jt(),a=function(){function c(l){this.keys=new o.ContextTagKeys,this.tags={},this._loadApplicationContext(l),this._loadDeviceContext(),this._loadInternalContext()}return c.prototype._loadApplicationContext=function(l){if(l=l||i.resolve(__dirname,"../../../../package.json"),!c.appVersion[l]){c.appVersion[l]="unknown";try{var u=JSON.parse(n.readFileSync(l,"utf8"));u&&typeof u.version=="string"&&(c.appVersion[l]=u.version)}catch(d){s.info("unable to read app version: ",d)}}this.tags[this.keys.applicationVersion]=c.appVersion[l]},c.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=r&&r.hostname(),this.tags[this.keys.deviceOSVersion]=r&&r.type()+" "+r.release(),this.tags[this.keys.cloudRole]=c.DefaultRoleName,this.tags["ai.device.osArchitecture"]=r&&r.arch(),this.tags["ai.device.osPlatform"]=r&&r.platform()},c.prototype._loadInternalContext=function(){var l=i.resolve(__dirname,"../../package.json");if(!c.sdkVersion){c.sdkVersion="unknown";try{var u=JSON.parse(n.readFileSync(l,"utf8"));u&&typeof u.version=="string"&&(c.sdkVersion=u.version)}catch(d){s.info("unable to read app version: ",d)}}this.tags[this.keys.internalSdkVersion]="node:"+c.sdkVersion},c.DefaultRoleName="Web",c.appVersion={},c.sdkVersion=null,c}();e.exports=a}),eee=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var u=function(d,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(p[m]=h[m])},u(d,f)};return function(d,f){u(d,f);function p(){this.constructor=d}d.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}}(),n=require("url"),i=kr(),o=bn(),s=Wu(),a=iF(),c=Ac(),l=function(u){r(d,u);function d(f,p){var h=u.call(this)||this;return p&&p.method&&f&&(h.method=p.method,h.url=d._getUrlFromRequestOptions(f,p),h.startTime=+new Date),h}return d.prototype.onError=function(f){this._setStatus(void 0,f)},d.prototype.onResponse=function(f){this._setStatus(f.statusCode,void 0),this.correlationId=o.getCorrelationContextTarget(f,s.requestContextTargetKey)},d.prototype.getDependencyTelemetry=function(f,p){var h=n.parse(this.url);h.search=void 0,h.hash=void 0;var m=this.method.toUpperCase()+" "+h.pathname,g=i.RemoteDependencyDataConstants.TYPE_HTTP,v=h.hostname;h.port&&(v+=":"+h.port),this.correlationId?(g=i.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==c.correlationIdPrefix&&(v+=" | "+this.correlationId)):g=i.RemoteDependencyDataConstants.TYPE_HTTP;var w={id:p,name:m,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:g,target:v};if(f&&f.time?w.time=f.time:this.startTime&&(w.time=new Date(this.startTime)),f){for(var b in f)w[b]||(w[b]=f[b]);if(f.properties)for(var b in f.properties)w.properties[b]=f.properties[b]}return w},d._getUrlFromRequestOptions=function(f,p){if(typeof f=="string")if(f.indexOf("http://")===0||f.indexOf("https://")===0)f=n.parse(f);else{var h=n.parse(f);h.host==="443"?f=n.parse("https://"+f):f=n.parse("http://"+f)}else{if(f&&typeof n.URL=="function"&&f instanceof n.URL)return n.format(f);var m=f;f={},m&&Object.keys(m).forEach(function(w){f[w]=m[w]})}if(f.path){var g=n.parse(f.path);f.pathname=g.pathname,f.search=g.search}if(f.host&&f.port){var v=n.parse("http://"+f.host);!v.port&&f.port&&(f.hostname=f.host,delete f.host)}return f.protocol=f.protocol||p.agent&&p.agent.protocol||p.protocol||void 0,f.hostname=f.hostname||"localhost",n.format(f)},d}(a);e.exports=l}),tee=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(s){for(var a,c=1,l=arguments.length;c<l;c++){a=arguments[c];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(s[u]=a[u])}return s},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.spanToTelemetryContract=void 0;var r=ft(),n=$o();function i(s){var a=e({},s);return Object.keys(n.SpanAttribute).forEach(function(c){delete a[c]}),a}function o(s){var a="|"+s.spanContext().traceId+"."+s.spanContext().spanId+".",c=Math.round(s._duration[0]*1e3+s._duration[1]/1e6),l=s.attributes["peer.address"]?s.attributes["peer.address"].toString():"",u=s.attributes.component?s.attributes.component.toString():"",d=u.toUpperCase()===n.DependencyTypeName.Http||!!s.attributes[n.SpanAttribute.HttpUrl],f=u.toLowerCase()===n.DependencyTypeName.Grpc;if(d){var p=s.attributes[n.SpanAttribute.HttpMethod]||"GET",h=new URL(s.attributes[n.SpanAttribute.HttpUrl].toString()),m=s.attributes[n.SpanAttribute.HttpHost]||h.host,g=s.attributes[n.SpanAttribute.HttpPort]||h.port||null,v=h.pathname||"/",w=p+" "+v,b=n.DependencyTypeName.Http,C=g?(m+":"+g).toString():m.toString(),S=h.toString(),P=s.attributes[n.SpanAttribute.HttpStatusCode]||s.status.code||0,_=P<400;return{id:a,name:w,dependencyTypeName:b,target:C,data:S,success:_,duration:c,url:S,resultCode:String(P),properties:i(s.attributes)}}else if(f){var p=s.attributes[n.SpanAttribute.GrpcMethod]||"rpc",k=s.attributes[n.SpanAttribute.GrpcService],T=k?p+" "+k:s.name;return{id:a,duration:c,name:T,target:k.toString(),data:k.toString()||T,url:k.toString()||T,dependencyTypeName:n.DependencyTypeName.Grpc,resultCode:String(s.status.code||0),success:s.status.code===0,properties:i(s.attributes)}}else{var A=s.name,M=s.links&&s.links.map(function(j){return{operation_Id:j.context.traceId,id:j.context.spanId}});return{id:a,duration:c,name:A,target:l,data:l||A,url:l||A,dependencyTypeName:s.kind===r.SpanKind.INTERNAL?n.DependencyTypeName.InProc:u||s.name,resultCode:String(s.status.code||0),success:s.status.code===0,properties:e(e({},i(s.attributes)),{"_MS.links":M||void 0})}}}t.spanToTelemetryContract=o}),ree=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=ft(),r=Pt(),n=dm(),i=tee(),o=x1(),s=[],a=function(l){var u=l.data,d=i.spanToTelemetryContract(u),f=u.spanContext(),p=new n;p.traceId=f.traceId,p.spanId=f.spanId,p.traceFlag=n.formatOpenTelemetryTraceFlags(f.traceFlags),p.parentId=u.parentSpanId?"|"+f.traceId+"."+u.parentSpanId+".":null,o.AsyncScopeManager.with(u,function(){s.forEach(function(h){u.kind===e.SpanKind.SERVER?h.trackRequest(d):(u.kind===e.SpanKind.CLIENT||u.kind===e.SpanKind.INTERNAL)&&h.trackDependency(d)})})};t.subscriber=a;function c(l,u){l?(s.length===0&&r.channel.subscribe("azure-coretracing",t.subscriber),s.push(u)):(s=s.filter(function(d){return d!=u}),s.length===0&&r.channel.unsubscribe("azure-coretracing",t.subscriber))}t.enable=c}),nee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=Pt(),r=[],n=function(o){o.data.event.commandName!=="ismaster"&&r.forEach(function(s){var a=o.data.startedData&&o.data.startedData.databaseName||"Unknown database";s.trackDependency({target:a,data:o.data.event.commandName,name:o.data.event.commandName,duration:o.data.event.duration,success:o.data.succeeded,resultCode:o.data.succeeded?"0":"1",time:o.data.startedData.time,dependencyTypeName:"mongodb"})})};t.subscriber=n;function i(o,s){o?(r.length===0&&e.channel.subscribe("mongodb",t.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&e.channel.unsubscribe("mongodb",t.subscriber))}t.enable=i}),iee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=Pt(),r=[],n=function(o){r.forEach(function(s){var a=o.data.query||{},c=a.sql||"Unknown query",l=!o.data.err,u=a._connection||{},d=u.config||{},f=d.socketPath?d.socketPath:(d.host||"localhost")+":"+d.port;s.trackDependency({target:f,data:c,name:c,duration:o.data.duration,success:l,resultCode:l?"0":"1",time:o.data.time,dependencyTypeName:"mysql"})})};t.subscriber=n;function i(o,s){o?(r.length===0&&e.channel.subscribe("mysql",t.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&e.channel.unsubscribe("mysql",t.subscriber))}t.enable=i}),oee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=Pt(),r=[],n=function(o){r.forEach(function(s){o.data.commandObj.command!=="info"&&s.trackDependency({target:o.data.address,name:o.data.commandObj.command,data:o.data.commandObj.command,duration:o.data.duration,success:!o.data.err,resultCode:o.data.err?"1":"0",time:o.data.time,dependencyTypeName:"redis"})})};t.subscriber=n;function i(o,s){o?(r.length===0&&e.channel.subscribe("redis",t.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&e.channel.unsubscribe("redis",t.subscriber))}t.enable=i}),see=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=Pt(),r=[],n=function(o){r.forEach(function(s){var a=o.data.query,c=a.preparable&&a.preparable.text||a.plan||a.text||"unknown query",l=!o.data.error,u=o.data.database.host+":"+o.data.database.port;s.trackDependency({target:u,data:c,name:c,duration:o.data.duration,success:l,resultCode:l?"0":"1",time:o.data.time,dependencyTypeName:"postgres"})})};t.subscriber=n;function i(o,s){o?(r.length===0&&e.channel.subscribe("postgres",t.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&e.channel.unsubscribe("postgres",t.subscriber))}t.enable=i}),Gu=O((t,e)=>{"use strict";var r=t&&t.__spreadArrays||function(){for(var h=0,m=0,g=arguments.length;m<g;m++)h+=arguments[m].length;for(var v=Array(h),w=0,m=0;m<g;m++)for(var b=arguments[m],C=0,S=b.length;C<S;C++,w++)v[w]=b[C];return v},n=require("http"),i=require("https"),o=Jt(),s=bn(),a=Wu(),c=eee(),l=Dc(),u=Ac(),d=dm(),f=Pb(),p=function(){function h(m){if(h.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");h.INSTANCE=this,this._client=m}return h.prototype.enable=function(m){this._isEnabled=m,this._isEnabled&&!this._isInitialized&&this._initialize(),f.IsInitialized&&(ree().enable(!0,this._client),nee().enable(m,this._client),iee().enable(m,this._client),oee().enable(m,this._client),see().enable(m,this._client))},h.prototype.isInitialized=function(){return this._isInitialized},h.prototype._initialize=function(){var m=this;this._isInitialized=!0;var g=n.request,v=i.request,w=function(b,C){var S=!C[h.disableCollectionRequestOption]&&!b[h.alreadyAutoCollectedFlag];C.headers&&C.headers["user-agent"]&&C.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(S=!1),b[h.alreadyAutoCollectedFlag]=!0,b&&C&&S&&(l.CorrelationContextManager.wrapEmitter(b),h.trackRequest(m._client,{options:C,request:b}))};n.request=function(b){for(var C=[],S=1;S<arguments.length;S++)C[S-1]=arguments[S];var P=g.call.apply(g,r([n,b],C));return w(P,b),P},i.request=function(b){for(var C=[],S=1;S<arguments.length;S++)C[S-1]=arguments[S];var P=v.call.apply(v,r([i,b],C));return w(P,b),P},n.get=function(b){for(var C,S=[],P=1;P<arguments.length;P++)S[P-1]=arguments[P];var _=(C=n.request).call.apply(C,r([n,b],S));return _.end(),_},i.get=function(b){for(var C,S=[],P=1;P<arguments.length;P++)S[P-1]=arguments[P];var _=(C=i.request).call.apply(C,r([i,b],S));return _.end(),_}},h.trackRequest=function(m,g){if(!g.options||!g.request||!m){o.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!g.options,!g.request,!m);return}var v=new c(g.options,g.request),w=l.CorrelationContextManager.getCurrentContext(),b,C;if(w&&w.operation&&w.operation.traceparent&&d.isValidTraceId(w.operation.traceparent.traceId))w.operation.traceparent.updateSpanId(),b=w.operation.traceparent.getBackCompatRequestId();else if(u.w3cEnabled){var S=new d;C=S.toString(),b=S.getBackCompatRequestId()}else b=w&&w.operation&&w.operation.parentId+h.requestNumber+++".";if(s.canIncludeCorrelationHeader(m,v.getUrl())&&g.request.getHeader&&g.request.setHeader&&m.config&&m.config.correlationId){var P=g.request.getHeader(a.requestContextHeader);try{s.safeIncludeCorrelationHeader(m,g.request,P)}catch(T){o.warn("Request-Context header could not be set. Correlation of requests may be lost",T)}if(w&&w.operation)try{if(g.request.setHeader(a.requestIdHeader,b),m.config.ignoreLegacyHeaders||(g.request.setHeader(a.parentIdHeader,w.operation.id),g.request.setHeader(a.rootIdHeader,b)),C||w.operation.traceparent)g.request.setHeader(a.traceparentHeader,C||w.operation.traceparent.toString());else if(u.w3cEnabled){var S=new d().toString();g.request.setHeader(a.traceparentHeader,S)}if(w.operation.tracestate){var _=w.operation.tracestate.toString();_&&g.request.setHeader(a.traceStateHeader,_)}var k=w.customProperties.serializeToHeader();k&&g.request.setHeader(a.correlationContextHeader,k)}catch(T){o.warn("Correlation headers could not be set. Correlation of requests may be lost.",T)}}g.request.on&&(g.request.on("response",function(T){v.onResponse(T);var A=v.getDependencyTelemetry(g,b);A.contextObjects=A.contextObjects||{},A.contextObjects["http.RequestOptions"]=g.options,A.contextObjects["http.ClientRequest"]=g.request,A.contextObjects["http.ClientResponse"]=T,m.trackDependency(A)}),g.request.on("error",function(T){v.onError(T);var A=v.getDependencyTelemetry(g,b);A.contextObjects=A.contextObjects||{},A.contextObjects["http.RequestOptions"]=g.options,A.contextObjects["http.ClientRequest"]=g.request,A.contextObjects.Error=T,m.trackDependency(A)}),g.request.on("abort",function(){v.onError(new Error);var T=v.getDependencyTelemetry(g,b);T.contextObjects=T.contextObjects||{},T.contextObjects["http.RequestOptions"]=g.options,T.contextObjects["http.ClientRequest"]=g.request,m.trackDependency(T)}))},h.prototype.dispose=function(){h.INSTANCE=null,this.enable(!1),this._isInitialized=!1},h.disableCollectionRequestOption="disableAppInsightsAutoCollection",h.requestNumber=1,h.alreadyAutoCollectedFlag="_appInsightsAutoCollected",h}();e.exports=p}),aee=O((t,e)=>{"use strict";var r=require("os"),n=$o(),i=bn(),o=fm(),s=Gu(),a="http://169.254.169.254/metadata/instance/compute",c="api-version=2017-12-01",l="format=json",u="ENETUNREACH",d=function(){function f(p){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",f.INSTANCE||(f.INSTANCE=this),this._isInitialized=!1,this._client=p}return f.prototype.enable=function(p,h){var m=this;this._isEnabled=p,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),p?this._handle||(this._handle=setInterval(function(){return m.trackHeartBeat(h,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},f.prototype.isInitialized=function(){return this._isInitialized},f.isEnabled=function(){return f.INSTANCE&&f.INSTANCE._isEnabled},f.prototype.trackHeartBeat=function(p,h){var m=this,g=!1,v={},w=o.sdkVersion;v.sdk=w,v.osType=r.type(),process.env.WEBSITE_SITE_NAME?(v.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",v.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",v.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?v.azfunction_appId=process.env.WEBSITE_HOSTNAME:p&&(this._isVM===void 0?(g=!0,this._getAzureComputeMetadata(p,function(){m._isVM&&Object.keys(m._vmData).length>0&&(v.azInst_vmId=m._vmData.vmId||"",v.azInst_subscriptionId=m._vmData.subscriptionId||"",v.azInst_osType=m._vmData.osType||"",m._azInst_vmId=m._vmData.vmId||"",m._azInst_subscriptionId=m._vmData.subscriptionId||"",m._azInst_osType=m._vmData.osType||""),m._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:v}),h()})):this._isVM&&(v.azInst_vmId=this._azInst_vmId,v.azInst_subscriptionId=this._azInst_subscriptionId,v.azInst_osType=this._azInst_osType)),g||(this._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:v}),h())},f.prototype.dispose=function(){f.INSTANCE=null,this.enable(!1),this._isInitialized=!1},f.prototype._getAzureComputeMetadata=function(p,h){var m,g=this,v=a+"?"+c+"&"+l,w=(m={method:"GET"},m[s.disableCollectionRequestOption]=!0,m.headers={Metadata:"True"},m),b=i.makeRequest(p,v,w,function(C){if(C.statusCode===200){g._isVM=!0;var S="";C.on("data",function(P){S+=P}),C.on("end",function(){g._vmData=g._isJSON(S)?JSON.parse(S):{},h()})}else h()});b&&(b.on("error",function(C){C&&C.message&&C.message.indexOf(u)>-1&&(g._isVM=!1),h()}),b.end())},f.prototype._isJSON=function(p){try{return JSON.parse(p)&&!!p}catch{return!1}},f}();e.exports=d}),uF=O((t,e)=>{"use strict";var r=require("http"),n=require("https"),i=Jt(),o=bn(),s=Wu(),a=oF(),c=Dc(),l=Tb(),u=function(){function d(f){if(d.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");d.INSTANCE=this,this._client=f}return d.prototype.enable=function(f){this._isEnabled=f,(this._isAutoCorrelating||this._isEnabled||l.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},d.prototype.useAutoCorrelation=function(f,p){f&&!this._isAutoCorrelating?c.CorrelationContextManager.enable(p):!f&&this._isAutoCorrelating&&c.CorrelationContextManager.disable(),this._isAutoCorrelating=f},d.prototype.isInitialized=function(){return this._isInitialized},d.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},d.prototype._generateCorrelationContext=function(f){if(this._isAutoCorrelating)return c.CorrelationContextManager.generateContextObject(f.getOperationId(this._client.context.tags),f.getRequestId(),f.getOperationName(this._client.context.tags),f.getCorrelationContextHeader(),f.getTraceparent(),f.getTracestate())},d.prototype._initialize=function(){var f=this;this._isInitialized=!0;var p=function(v){if(v){if(typeof v!="function")throw new Error("onRequest handler must be a function");return function(w,b){c.CorrelationContextManager.wrapEmitter(w),c.CorrelationContextManager.wrapEmitter(b);var C=w&&!w[d.alreadyAutoCollectedFlag];if(w&&C){var S=new a(w),P=f._generateCorrelationContext(S);c.CorrelationContextManager.runWithContext(P,function(){f._isEnabled&&(w[d.alreadyAutoCollectedFlag]=!0,d.trackRequest(f._client,{request:w,response:b},S)),typeof v=="function"&&v(w,b)})}else typeof v=="function"&&v(w,b)}}},h=function(v){var w=v.addListener.bind(v);v.addListener=function(b,C){switch(b){case"request":case"checkContinue":return w(b,p(C));default:return w(b,C)}},v.on=v.addListener},m=r.createServer;r.createServer=function(v,w){if(w&&typeof w=="function"){var b=m(v,p(w));return h(b),b}else{var b=m(p(v));return h(b),b}};var g=n.createServer;n.createServer=function(v,w){var b=g(v,p(w));return h(b),b}},d.trackRequestSync=function(f,p){if(!p.request||!p.response||!f){i.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!p.request,!p.response,!f);return}d.addResponseCorrelationIdHeader(f,p.response);var h=c.CorrelationContextManager.getCurrentContext(),m=new a(p.request,h&&h.operation.parentId);h&&(h.operation.id=m.getOperationId(f.context.tags)||h.operation.id,h.operation.name=m.getOperationName(f.context.tags)||h.operation.name,h.operation.parentId=m.getRequestId()||h.operation.parentId,h.customProperties.addHeaderData(m.getCorrelationContextHeader())),d.endRequest(f,m,p,p.duration,p.error)},d.trackRequest=function(f,p,h){if(!p.request||!p.response||!f){i.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!p.request,!p.response,!f);return}var m=c.CorrelationContextManager.getCurrentContext(),g=h||new a(p.request,m&&m.operation.parentId);o.canIncludeCorrelationHeader(f,g.getUrl())&&d.addResponseCorrelationIdHeader(f,p.response),m&&!h&&(m.operation.id=g.getOperationId(f.context.tags)||m.operation.id,m.operation.name=g.getOperationName(f.context.tags)||m.operation.name,m.operation.parentId=g.getOperationParentId(f.context.tags)||m.operation.parentId,m.customProperties.addHeaderData(g.getCorrelationContextHeader())),p.response.once&&p.response.once("finish",function(){d.endRequest(f,g,p,null,null)}),p.request.on&&p.request.on("error",function(v){d.endRequest(f,g,p,null,v)}),p.request.on&&p.request.on("aborted",function(){var v="The request has been aborted and the network socket has closed.";d.endRequest(f,g,p,null,v)})},d.addResponseCorrelationIdHeader=function(f,p){if(f.config&&f.config.correlationId&&p.getHeader&&p.setHeader&&!p.headersSent){var h=p.getHeader(s.requestContextHeader);o.safeIncludeCorrelationHeader(f,p,h)}},d.endRequest=function(f,p,h,m,g){g?p.onError(g,m):p.onResponse(h.response,m);var v=p.getRequestTelemetry(h);if(v.tagOverrides=p.getRequestTags(f.context.tags),h.tagOverrides)for(var w in h.tagOverrides)v.tagOverrides[w]=h.tagOverrides[w];var b=p.getLegacyRootId();b&&(v.properties.ai_legacyRootId=b),v.contextObjects=v.contextObjects||{},v.contextObjects["http.ServerRequest"]=h.request,v.contextObjects["http.ServerResponse"]=h.response,f.trackRequest(v)},d.prototype.dispose=function(){d.INSTANCE=null,this.enable(!1),this._isInitialized=!1,c.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},d.alreadyAutoCollectedFlag="_appInsightsAutoCollected",d}();e.exports=u}),cee=O((t,e)=>{"use strict";var r=t&&t.__assign||function(){return r=Object.assign||function(u){for(var d,f=1,p=arguments.length;f<p;f++){d=arguments[f];for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(u[h]=d[h])}return u},r.apply(this,arguments)},n=require("os"),i=kr(),o=$o(),s=bn(),a=Jt(),c=s.w3cTraceId(),l=function(){function u(){}return u.createQuickPulseEnvelope=function(d,f,p,h){var m=n&&typeof n.hostname=="function"&&n.hostname()||"Unknown",g=h.tags&&h.keys&&h.keys.cloudRoleInstance&&h.tags[h.keys.cloudRoleInstance]||m,v=h.tags&&h.keys&&h.keys.cloudRole&&h.tags[h.keys.cloudRole]||null,w={Documents:f.length>0?f:null,InstrumentationKey:p.instrumentationKey||"",Metrics:d.length>0?d:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:h.tags[h.keys.internalSdkVersion],StreamId:c,MachineName:m,Instance:g,RoleName:v};return w},u.createQuickPulseMetric=function(d){var f;return f={Name:d.name,Value:d.value,Weight:d.count||1},f},u.telemetryEnvelopeToQuickPulseDocument=function(d){switch(d.data.baseType){case i.TelemetryTypeString.Event:return u.createQuickPulseEventDocument(d);case i.TelemetryTypeString.Exception:return u.createQuickPulseExceptionDocument(d);case i.TelemetryTypeString.Trace:return u.createQuickPulseTraceDocument(d);case i.TelemetryTypeString.Dependency:return u.createQuickPulseDependencyDocument(d);case i.TelemetryTypeString.Request:return u.createQuickPulseRequestDocument(d)}return null},u.createQuickPulseEventDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData.name,h=r(r({},f),{Name:p});return h},u.createQuickPulseTraceDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData.severityLevel||0,h=r(r({},f),{Message:d.data.baseData.message,SeverityLevel:i.SeverityLevel[p]});return h},u.createQuickPulseExceptionDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData.exceptions,h="",m="",g="";p&&p.length>0&&(p[0].parsedStack&&p[0].parsedStack.length>0?p[0].parsedStack.forEach(function(w){h+=w.assembly+`
`}):p[0].stack&&p[0].stack.length>0&&(h=p[0].stack),m=p[0].message,g=p[0].typeName);var v=r(r({},f),{Exception:h,ExceptionMessage:m,ExceptionType:g});return v},u.createQuickPulseRequestDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData,h=r(r({},f),{Name:p.name,Success:p.success,Duration:p.duration,ResponseCode:p.responseCode,OperationName:p.name});return h},u.createQuickPulseDependencyDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData,h=r(r({},f),{Name:p.name,Target:p.target,Success:p.success,Duration:p.duration,ResultCode:p.resultCode,CommandName:p.data,OperationName:f.OperationId,DependencyTypeName:p.type});return h},u.createQuickPulseDocument=function(d){var f,p,h,m;d.data.baseType?(p=o.TelemetryTypeStringToQuickPulseType[d.data.baseType],f=o.TelemetryTypeStringToQuickPulseDocumentType[d.data.baseType]):a.warn("Document type invalid; not sending live metric document",d.data.baseType),h=d.tags[u.keys.operationId],m=u.aggregateProperties(d);var g={DocumentType:f,__type:p,OperationId:h,Version:"1.0",Properties:m};return g},u.aggregateProperties=function(d){var f=[],p=d.data.baseData.measurements||{};for(var h in p)if(p.hasOwnProperty(h)){var m=p[h],g={key:h,value:m};f.push(g)}var v=d.data.baseData.properties||{};for(var h in v)if(v.hasOwnProperty(h)){var m=v[h],g={key:h,value:m};f.push(g)}return f},u.keys=new i.ContextTagKeys,u}();e.exports=l}),lee=O((t,e)=>{"use strict";var r=function(){return(Date.now()+621355968e5)*1e4};e.exports={getTransmissionTime:r}}),uee=O((t,e)=>{"use strict";var r=t&&t.__awaiter||function(d,f,p,h){function m(g){return g instanceof p?g:new p(function(v){v(g)})}return new(p||(p=Promise))(function(g,v){function w(S){try{C(h.next(S))}catch(P){v(P)}}function b(S){try{C(h.throw(S))}catch(P){v(P)}}function C(S){S.done?g(S.value):m(S.value).then(w,b)}C((h=h.apply(d,f||[])).next())})},n=t&&t.__generator||function(d,f){var p={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},h,m,g,v;return v={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function w(C){return function(S){return b([C,S])}}function b(C){if(h)throw new TypeError("Generator is already executing.");for(;p;)try{if(h=1,m&&(g=C[0]&2?m.return:C[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,C[1])).done)return g;switch(m=0,g&&(C=[C[0]&2,g.value]),C[0]){case 0:case 1:g=C;break;case 4:return p.label++,{value:C[1],done:!1};case 5:p.label++,m=C[1],C=[0];continue;case 7:C=p.ops.pop(),p.trys.pop();continue;default:if(g=p.trys,!(g=g.length>0&&g[g.length-1])&&(C[0]===6||C[0]===2)){p=0;continue}if(C[0]===3&&(!g||C[1]>g[0]&&C[1]<g[3])){p.label=C[1];break}if(C[0]===6&&p.label<g[1]){p.label=g[1],g=C;break}if(g&&p.label<g[2]){p.label=g[2],p.ops.push(C);break}g[2]&&p.ops.pop(),p.trys.pop();continue}C=f.call(d,p)}catch(S){C=[6,S],m=0}finally{h=g=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},i=require("https"),o=Gu(),s=Jt(),a=lee(),c=bn(),l={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},u=function(){function d(f){this._config=f,this._consecutiveErrors=0}return d.prototype.ping=function(f,p,h){var m=[{name:l.streamId,value:f.StreamId},{name:l.machineName,value:f.MachineName},{name:l.roleName,value:f.RoleName},{name:l.instanceName,value:f.Instance},{name:l.invariantVersion,value:f.InvariantVersion.toString()}];this._submitData(f,p,h,"ping",m)},d.prototype.post=function(f,p,h){return r(this,void 0,void 0,function(){return n(this,function(m){switch(m.label){case 0:return[4,this._submitData([f],p,h,"post")];case 1:return m.sent(),[2]}})})},d.prototype._submitData=function(f,p,h,m,g){return r(this,void 0,void 0,function(){var v,w,b,C,S,P=this;return n(this,function(_){return v=JSON.stringify(f),w=(C={},C[o.disableCollectionRequestOption]=!0,C.host=p&&p.length>0?p:this._config.quickPulseHost,C.method=l.method,C.path="/QuickPulseService.svc/"+m+"?ikey="+this._config.instrumentationKey,C.headers=(S={Expect:"100-continue"},S[l.time]=a.getTransmissionTime(),S["Content-Type"]="application/json",S["Content-Length"]=Buffer.byteLength(v),S),C),g&&g.length>0&&g.forEach(function(k){return w.headers[k.name]=k.value}),this._config.httpsAgent?w.agent=this._config.httpsAgent:w.agent=c.tlsRestrictedAgent,b=i.request(w,function(k){if(k.statusCode==200){var T=k.headers[l.subscribed]==="true",A=k.headers[l.endpointRedirect]?k.headers[l.endpointRedirect].toString():null,M=k.headers[l.pollingIntervalHint]?parseInt(k.headers[l.pollingIntervalHint].toString()):null;P._consecutiveErrors=0,h(T,k,A,M)}else P._onError("StatusCode:"+k.statusCode+" StatusMessage:"+k.statusMessage),h()}),b.on("error",function(k){P._onError(k),h()}),b.write(v),b.end(),[2]})})},d.prototype._onError=function(f){this._consecutiveErrors++;var p="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%d.MAX_QPS_FAILURES_BEFORE_WARN==0?(p="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",s.warn(d.TAG,p,f)):s.info(d.TAG,p,f)},d.TAG="QuickPulseSender",d.MAX_QPS_FAILURES_BEFORE_WARN=25,d}();e.exports=u}),dee=O((t,e)=>{"use strict";var r=t&&t.__awaiter||function(u,d,f,p){function h(m){return m instanceof f?m:new f(function(g){g(m)})}return new(f||(f=Promise))(function(m,g){function v(C){try{b(p.next(C))}catch(S){g(S)}}function w(C){try{b(p.throw(C))}catch(S){g(S)}}function b(C){C.done?m(C.value):h(C.value).then(v,w)}b((p=p.apply(u,d||[])).next())})},n=t&&t.__generator||function(u,d){var f={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},p,h,m,g;return g={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function v(b){return function(C){return w([b,C])}}function w(b){if(p)throw new TypeError("Generator is already executing.");for(;f;)try{if(p=1,h&&(m=b[0]&2?h.return:b[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,b[1])).done)return m;switch(h=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return f.label++,{value:b[1],done:!1};case 5:f.label++,h=b[1],b=[0];continue;case 7:b=f.ops.pop(),f.trys.pop();continue;default:if(m=f.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){f=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){f.label=b[1];break}if(b[0]===6&&f.label<m[1]){f.label=m[1],m=b;break}if(m&&f.label<m[2]){f.label=m[2],f.ops.push(b);break}m[2]&&f.ops.pop(),f.trys.pop();continue}b=d.call(u,f)}catch(C){b=[6,C],h=0}finally{p=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},i=Jt(),o=cee(),s=uee(),a=$o(),c=fm(),l=function(){function u(d,f){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=d,this.context=f||new c,this._sender=new s(this.config),this._isEnabled=!1}return u.prototype.addCollector=function(d){this._collectors.push(d)},u.prototype.trackMetric=function(d){this._addMetric(d)},u.prototype.addDocument=function(d){var f=o.telemetryEnvelopeToQuickPulseDocument(d);f&&this._documents.push(f)},u.prototype.enable=function(d){d&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!d&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},u.prototype.enableCollectors=function(d){this._collectors.forEach(function(f){f.enable(d)})},u.prototype._addMetric=function(d){var f=d.value,p=d.count||1,h=a.PerformanceToQuickPulseCounter[d.name];h&&(this._metrics[h]?(this._metrics[h].Value=(this._metrics[h].Value*this._metrics[h].Weight+f*p)/(this._metrics[h].Weight+p),this._metrics[h].Weight+=p):(this._metrics[h]=o.createQuickPulseMetric(d),this._metrics[h].Name=h,this._metrics[h].Weight=1))},u.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},u.prototype._goQuickPulse=function(){return r(this,void 0,void 0,function(){var d,f,p,h,m=this;return n(this,function(g){switch(g.label){case 0:return d=Object.keys(this._metrics).map(function(v){return m._metrics[v]}),f=o.createQuickPulseEnvelope(d,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(f)]:[3,2];case 1:return g.sent(),[3,3];case 2:this._ping(f),g.label=3;case 3:return p=this._pollingIntervalHint>0?this._pollingIntervalHint:u.PING_INTERVAL,h=this._isCollectingData?u.POST_INTERVAL:p,this._isCollectingData&&Date.now()-this._lastSuccessTime>=u.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,h=u.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=u.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(h=u.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),h),this._handle.unref(),[2]}})})},u.prototype._ping=function(d){this._sender.ping(d,this._redirectedHost,this._quickPulseDone.bind(this))},u.prototype._post=function(d){return r(this,void 0,void 0,function(){return n(this,function(f){switch(f.label){case 0:return[4,this._sender.post(d,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return f.sent(),[2]}})})},u.prototype._quickPulseDone=function(d,f,p,h){d!=null?(this._isCollectingData!==d&&(i.info("Live Metrics sending data",d),this.enableCollectors(d)),this._isCollectingData=d,p&&p.length>0&&(this._redirectedHost=p,i.info("Redirecting endpoint to: ",p)),h&&h>0&&(this._pollingIntervalHint=h),f&&f.statusCode<300&&f.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},u.MAX_POST_WAIT_TIME=2e4,u.MAX_PING_WAIT_TIME=6e4,u.FALLBACK_INTERVAL=6e4,u.PING_INTERVAL=5e3,u.POST_INTERVAL=1e3,u}();e.exports=l}),fee=O((t,e)=>{"use strict";var r=$o(),n=function(){function i(){}return i.parse=function(o){if(!o)return{};var s=o.split(i._FIELDS_SEPARATOR),a=s.reduce(function(l,u){var d=u.split(i._FIELD_KEY_VALUE_SEPARATOR);if(d.length===2){var f=d[0].toLowerCase(),p=d[1];l[f]=p}return l},{});if(Object.keys(a).length>0){if(a.endpointsuffix){var c=a.location?a.location+".":"";a.ingestionendpoint=a.ingestionendpoint||"https://"+c+"dc."+a.endpointsuffix,a.liveendpoint=a.liveendpoint||"https://"+c+"live."+a.endpointsuffix}a.ingestionendpoint=a.ingestionendpoint||r.DEFAULT_BREEZE_ENDPOINT,a.liveendpoint=a.liveendpoint||r.DEFAULT_LIVEMETRICS_ENDPOINT}return a},i._FIELDS_SEPARATOR=";",i._FIELD_KEY_VALUE_SEPARATOR="=",i}();e.exports=n}),dF=O((t,e)=>{"use strict";var r=Ac(),n=fee(),i=Jt(),o=$o(),s=require("url"),a=function(){function c(l){var u=this;this.endpointBase=o.DEFAULT_BREEZE_ENDPOINT;var d=process.env[c.ENV_connectionString],f=n.parse(l),p=n.parse(d),h=!f.instrumentationkey&&Object.keys(f).length>0?null:l;this.instrumentationKey=f.instrumentationkey||h||p.instrumentationkey||c._getInstrumentationKey(),c._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(f.ingestionendpoint||p.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(m){return u.correlationId=m},this.proxyHttpUrl=process.env[c.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[c.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=f.ingestionendpoint||p.ingestionendpoint||process.env[c.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=f.liveendpoint||p.liveendpoint||process.env[c.ENV_quickPulseHost]||o.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=s.parse(this._quickPulseHost).host)}return Object.defineProperty(c.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(l){r.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=l,this.correlationId=r.correlationIdPrefix,r.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(l){this._quickPulseHost=l},enumerable:!1,configurable:!0}),c._getInstrumentationKey=function(){var l=process.env[c.ENV_iKey]||process.env[c.ENV_azurePrefix+c.ENV_iKey]||process.env[c.legacy_ENV_iKey]||process.env[c.ENV_azurePrefix+c.legacy_ENV_iKey];if(!l||l=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return l},c._validateInstrumentationKey=function(l){var u="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",d=new RegExp(u);return d.test(l)},c.ENV_azurePrefix="APPSETTING_",c.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",c.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",c.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",c.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",c.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",c.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",c.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",c.ENV_http_proxy="http_proxy",c.ENV_https_proxy="https_proxy",c}();e.exports=a}),pee=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(s){for(var a,c=1,l=arguments.length;c<l;c++){a=arguments[c];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(s[u]=a[u])}return s},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoCollectNativePerformance=void 0;var r=dF(),n=fm(),i=Jt(),o=function(){function s(a){this._disabledMetrics={},s.INSTANCE&&s.INSTANCE.dispose(),s.INSTANCE=this,this._client=a}return s.isNodeVersionCompatible=function(){var a=process.versions.node.split(".");return parseInt(a[0])>=6},s.prototype.enable=function(a,c,l){var u=this;if(c===void 0&&(c={}),l===void 0&&(l=6e4),!!s.isNodeVersionCompatible()){if(s._metricsAvailable==null&&a&&!this._isInitialized)try{var d=require("applicationinsights-native-metrics");s._emitter=new d,s._metricsAvailable=!0,i.info("Native metrics module successfully loaded!")}catch{s._metricsAvailable=!1;return}this._isEnabled=a,this._disabledMetrics=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&s._emitter?(s._emitter.enable(!0,l),this._handle||(this._handle=setInterval(function(){return u._trackNativeMetrics()},l),this._handle.unref())):s._emitter&&(s._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},s.prototype.dispose=function(){this.enable(!1)},s.parseEnabled=function(a){var c=process.env[r.ENV_nativeMetricsDisableAll],l=process.env[r.ENV_nativeMetricsDisablers];if(c)return{isEnabled:!1,disabledMetrics:{}};if(l){var u=l.split(","),d={};if(u.length>0)for(var f=0,p=u;f<p.length;f++){var h=p[f];d[h]=!0}return typeof a=="object"?{isEnabled:!0,disabledMetrics:e(e({},a),d)}:{isEnabled:a,disabledMetrics:d}}return typeof a=="boolean"?{isEnabled:a,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:a}},s.prototype._trackNativeMetrics=function(){var a=!0;typeof this._isEnabled!="object"&&(a=this._isEnabled),a&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},s.prototype._trackGarbageCollection=function(){var a;if(!this._disabledMetrics.gc){var c=s._emitter.getGCData();for(var l in c){var u=c[l].metrics,d=l+" Garbage Collection Duration",f=Math.sqrt(u.sumSquares/u.count-Math.pow(u.total/u.count,2))||0;this._client.trackMetric({name:d,value:u.total,count:u.count,max:u.max,min:u.min,stdDev:f,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)})}}},s.prototype._trackEventLoop=function(){var a;if(!this._disabledMetrics.loop){var c=s._emitter.getLoopData(),l=c.loopUsage;if(l.count!=0){var u="Event Loop CPU Time",d=Math.sqrt(l.sumSquares/l.count-Math.pow(l.total/l.count,2))||0;this._client.trackMetric({name:u,value:l.total,count:l.count,min:l.min,max:l.max,stdDev:d,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)})}}},s.prototype._trackHeapUsage=function(){var a,c,l;if(!this._disabledMetrics.heap){var u=process.memoryUsage(),d=u.heapUsed,f=u.heapTotal,p=u.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:d,count:1,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)}),this._client.trackMetric({name:"Memory Total (Heap)",value:f,count:1,tagOverrides:(c={},c[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,c)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:p-f,count:1,tagOverrides:(l={},l[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,l)})}},s}();t.AutoCollectNativePerformance=o}),hee=O((t,e)=>{"use strict";var r=Jt(),n=function(){function i(o,s,a,c){this._buffer=[],this._lastSend=0,this._isDisabled=o,this._getBatchSize=s,this._getBatchIntervalMs=a,this._sender=c}return i.prototype.setUseDiskRetryCaching=function(o,s,a){this._sender.setDiskRetryMode(o,s,a)},i.prototype.send=function(o){var s=this;if(!this._isDisabled()){if(!o){r.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(o),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){s._timeoutHandle=null,s.triggerSend(!1)},this._getBatchIntervalMs()))}},i.prototype.triggerSend=function(o,s){var a=this._buffer.length<1;a||(o?(this._sender.saveOnCrash(this._buffer),typeof s=="function"&&s("data saved on crash")):this._sender.send(this._buffer,s)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,a&&typeof s=="function"&&s("no data to send")},i}();e.exports=n}),mee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.azureRoleEnvironmentTelemetryProcessor=void 0;function e(r,n){process.env.WEBSITE_SITE_NAME&&(r.tags[n.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}t.azureRoleEnvironmentTelemetryProcessor=e}),gee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSamplingHashCode=t.samplingTelemetryProcessor=void 0;var e=kr();function r(i,o){var s=i.sampleRate,a=!1;return s==null||s>=100||i.data&&e.TelemetryType.Metric===e.baseTypeToTelemetryType(i.data.baseType)?!0:(o.correlationContext&&o.correlationContext.operation?a=n(o.correlationContext.operation.id)<s:a=Math.random()*100<s,a)}t.samplingTelemetryProcessor=r;function n(i){var o=-2147483648,s=2147483647,a=5381;if(!i)return 0;for(;i.length<8;)i=i+i;for(var c=0;c<i.length;c++)a=((a<<5)+a|0)+i.charCodeAt(c)|0;return a=a<=o?s:Math.abs(a),a/s*100}t.getSamplingHashCode=n}),vee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performanceMetricsTelemetryProcessor=void 0;var e=Tb(),r=kr();function n(i,o){switch(o&&o.addDocument(i),i.data.baseType){case r.TelemetryTypeString.Exception:e.countException();break;case r.TelemetryTypeString.Request:var s=i.data.baseData;e.countRequest(s.duration,s.success);break;case r.TelemetryTypeString.Dependency:var a=i.data.baseData;e.countDependency(a.duration,a.success);break}return!0}t.performanceMetricsTelemetryProcessor=n}),yee=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(s){for(var a,c=1,l=arguments.length;c<l;c++){a=arguments[c];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(s[u]=a[u])}return s},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.preAggregatedMetricsTelemetryProcessor=void 0;var r=kr(),n=lF(),i=kr();function o(s,a){if(n.isEnabled())switch(s.data.baseType){case i.TelemetryTypeString.Exception:var c=s.data.baseData;c.properties=e(e({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var l={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole]};n.countException(l);break;case i.TelemetryTypeString.Trace:var u=s.data.baseData;u.properties=e(e({},u.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var d={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole],traceSeverityLevel:r.SeverityLevel[u.severity]};n.countTrace(d);break;case i.TelemetryTypeString.Request:var f=s.data.baseData;f.properties=e(e({},f.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var p={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole],operationSynthetic:s.tags[a.keys.operationSyntheticSource],requestSuccess:f.success,requestResultCode:f.responseCode};n.countRequest(f.duration,p);break;case i.TelemetryTypeString.Dependency:var h=s.data.baseData;h.properties=e(e({},h.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var m={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole],operationSynthetic:s.tags[a.keys.operationSyntheticSource],dependencySuccess:h.success,dependencyType:h.type,dependencyTarget:h.target,dependencyResultCode:h.resultCode};n.countDependency(h.duration,m);break}return!0}t.preAggregatedMetricsTelemetryProcessor=o}),wee=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(mee(),t),r(gee(),t),r(vee(),t),r(yee(),t)}),Cee=O((t,e)=>{"use strict";var r=t&&t.__awaiter||function(p,h,m,g){function v(w){return w instanceof m?w:new m(function(b){b(w)})}return new(m||(m=Promise))(function(w,b){function C(_){try{P(g.next(_))}catch(k){b(k)}}function S(_){try{P(g.throw(_))}catch(k){b(k)}}function P(_){_.done?w(_.value):v(_.value).then(C,S)}P((g=g.apply(p,h||[])).next())})},n=t&&t.__generator||function(p,h){var m={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},g,v,w,b;return b={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function C(P){return function(_){return S([P,_])}}function S(P){if(g)throw new TypeError("Generator is already executing.");for(;m;)try{if(g=1,v&&(w=P[0]&2?v.return:P[0]?v.throw||((w=v.return)&&w.call(v),0):v.next)&&!(w=w.call(v,P[1])).done)return w;switch(v=0,w&&(P=[P[0]&2,w.value]),P[0]){case 0:case 1:w=P;break;case 4:return m.label++,{value:P[1],done:!1};case 5:m.label++,v=P[1],P=[0];continue;case 7:P=m.ops.pop(),m.trys.pop();continue;default:if(w=m.trys,!(w=w.length>0&&w[w.length-1])&&(P[0]===6||P[0]===2)){m=0;continue}if(P[0]===3&&(!w||P[1]>w[0]&&P[1]<w[3])){m.label=P[1];break}if(P[0]===6&&m.label<w[1]){m.label=w[1],w=P;break}if(w&&m.label<w[2]){m.label=w[2],m.ops.push(P);break}w[2]&&m.ops.pop(),m.trys.pop();continue}P=h.call(p,m)}catch(_){P=[6,_],v=0}finally{g=w=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}},i=require("fs"),o=require("os"),s=require("path"),a=require("zlib"),c=require("child_process"),l=Jt(),u=Gu(),d=bn(),f=function(){function p(h,m,g){if(this._redirectedHost=null,this._config=h,this._onSuccess=m,this._onError=g,this._enableDiskRetryMode=!1,this._resendInterval=p.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=p.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=s.join(o.tmpdir(),p.TEMPDIR_PREFIX+this._config.instrumentationKey),!p.OS_PROVIDES_FILE_PROTECTION)if(p.USE_ICACLS){try{p.OS_PROVIDES_FILE_PROTECTION=i.existsSync(p.ICACLS_PATH)}catch{}p.OS_PROVIDES_FILE_PROTECTION||l.warn(p.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else p.OS_PROVIDES_FILE_PROTECTION=!0}return p.prototype.setDiskRetryMode=function(h,m,g){var v=this;this._enableDiskRetryMode=p.OS_PROVIDES_FILE_PROTECTION&&h,typeof m=="number"&&m>=0&&(this._resendInterval=Math.floor(m)),typeof g=="number"&&g>=0&&(this._maxBytesOnDisk=Math.floor(g)),h&&!p.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,l.warn(p.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){v._fileCleanupTask()},p.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},p.prototype.send=function(h,m){return r(this,void 0,void 0,function(){var g,v,w,b,C=this;return n(this,function(S){return h&&(g=this._redirectedHost||this._config.endpointUrl,v={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},w="",h.forEach(function(P){var _=C._stringify(P);typeof _=="string"&&(w+=_+`
`)}),w.length>0&&(w=w.substring(0,w.length-1)),b=Buffer.from?Buffer.from(w):new Buffer(w),a.gzip(b,function(P,_){var k=_;P?(l.warn(P),k=b,v.headers["Content-Length"]=b.length.toString()):(v.headers["Content-Encoding"]="gzip",v.headers["Content-Length"]=_.length.toString()),l.info(p.TAG,v),v[u.disableCollectionRequestOption]=!0;var T=function(M){M.setEncoding("utf-8");var j="";M.on("data",function(J){j+=J}),M.on("end",function(){if(C._numConsecutiveFailures=0,C._enableDiskRetryMode){if(M.statusCode===200)C._resendTimer||(C._resendTimer=setTimeout(function(){C._resendTimer=null,C._sendFirstFileOnDisk()},C._resendInterval),C._resendTimer.unref());else if(C._isRetriable(M.statusCode))try{var J=JSON.parse(j),Y=[];J.errors.forEach(function(re){C._isRetriable(re.statusCode)&&Y.push(h[re.index])}),Y.length>0&&C._storeToDisk(Y)}catch{C._storeToDisk(h)}}if(M.statusCode===307||M.statusCode===308)if(C._numConsecutiveRedirects++,C._numConsecutiveRedirects<10){var oe=M.headers.location?M.headers.location.toString():null;oe&&(C._redirectedHost=oe,C.send(h,m))}else typeof m=="function"&&m("Error sending telemetry because of circular redirects.");else C._numConsecutiveRedirects=0,typeof m=="function"&&m(j),l.info(p.TAG,j),typeof C._onSuccess=="function"&&C._onSuccess(j)})},A=d.makeRequest(C._config,g,v,T);A.on("error",function(M){if(C._numConsecutiveFailures++,!C._enableDiskRetryMode||C._numConsecutiveFailures>0&&C._numConsecutiveFailures%p.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var j="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";C._enableDiskRetryMode&&(j="Ingestion endpoint could not be reached "+C._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),l.warn(p.TAG,j,d.dumpObj(M))}else{var j="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";l.info(p.TAG,j,d.dumpObj(M))}C._onErrorHelper(M),typeof m=="function"&&(M&&m(d.dumpObj(M)),m("Error sending telemetry")),C._enableDiskRetryMode&&C._storeToDisk(h)}),A.write(k),A.end()})),[2]})})},p.prototype.saveOnCrash=function(h){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(h))},p.prototype._isRetriable=function(h){return h===206||h===408||h===429||h===439||h===500||h===503},p.prototype._runICACLS=function(h,m){var g=c.spawn(p.ICACLS_PATH,h,{windowsHide:!0});g.on("error",function(v){return m(v)}),g.on("close",function(v,w){return m(v===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+v+")"))})},p.prototype._runICACLSSync=function(h){if(c.spawnSync){var m=c.spawnSync(p.ICACLS_PATH,h,{windowsHide:!0});if(m.error)throw m.error;if(m.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+m.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},p.prototype._getACLIdentity=function(h){if(p.ACL_IDENTITY)return h(null,p.ACL_IDENTITY);var m=c.spawn(p.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),g="";m.stdout.on("data",function(v){return g+=v}),m.on("error",function(v){return h(v,null)}),m.on("close",function(v,w){return p.ACL_IDENTITY=g&&g.trim(),h(v===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+v+")"),p.ACL_IDENTITY)})},p.prototype._getACLIdentitySync=function(){if(p.ACL_IDENTITY)return p.ACL_IDENTITY;if(c.spawnSync){var h=c.spawnSync(p.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(h.error)throw h.error;if(h.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+h.status+")");return p.ACL_IDENTITY=h.stdout&&h.stdout.toString().trim(),p.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},p.prototype._getACLArguments=function(h,m){return[h,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",m+":(OI)(CI)F","/inheritance:r"]},p.prototype._applyACLRules=function(h,m){var g=this;if(!p.USE_ICACLS)return m(null);if(p.ACLED_DIRECTORIES[h]===void 0)p.ACLED_DIRECTORIES[h]=!1,this._getACLIdentity(function(v,w){if(v)return p.ACLED_DIRECTORIES[h]=!1,m(v);g._runICACLS(g._getACLArguments(h,w),function(b){return p.ACLED_DIRECTORIES[h]=!b,m(b)})});else return m(p.ACLED_DIRECTORIES[h]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},p.prototype._applyACLRulesSync=function(h){if(p.USE_ICACLS){if(p.ACLED_DIRECTORIES[h]===void 0){this._runICACLSSync(this._getACLArguments(h,this._getACLIdentitySync())),p.ACLED_DIRECTORIES[h]=!0;return}else if(!p.ACLED_DIRECTORIES[h])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},p.prototype._confirmDirExists=function(h,m){var g=this;i.lstat(h,function(v,w){v&&v.code==="ENOENT"?i.mkdir(h,function(b){b&&b.code!=="EEXIST"?m(b):g._applyACLRules(h,m)}):!v&&w.isDirectory()?g._applyACLRules(h,m):m(v||new Error("Path existed but was not a directory"))})},p.prototype._getShallowDirectorySize=function(h,m){i.readdir(h,function(g,v){if(g)return m(g,-1);var w=null,b=0,C=0;if(v.length===0){m(null,0);return}for(var S=0;S<v.length;S++)i.stat(s.join(h,v[S]),function(P,_){C++,P?w=P:_.isFile()&&(b+=_.size),C===v.length&&(w?m(w,-1):m(w,b))})})},p.prototype._getShallowDirectorySizeSync=function(h){for(var m=i.readdirSync(h),g=0,v=0;v<m.length;v++)g+=i.statSync(s.join(h,m[v])).size;return g},p.prototype._storeToDisk=function(h){var m=this;l.info(p.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(g){if(g){l.warn(p.TAG,"Error while checking/creating directory: "+(g&&g.message)),m._onErrorHelper(g);return}m._getShallowDirectorySize(m._tempDir,function(v,w){if(v||w<0){l.warn(p.TAG,"Error while checking directory size: "+(v&&v.message)),m._onErrorHelper(v);return}else if(w>m._maxBytesOnDisk){l.warn(p.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+w);return}var b=new Date().getTime()+".ai.json",C=s.join(m._tempDir,b);l.info(p.TAG,"saving data to disk at: "+C),i.writeFile(C,m._stringify(h),{mode:384},function(S){return m._onErrorHelper(S)})})})},p.prototype._storeToDiskSync=function(h){try{l.info(p.TAG,"Checking existence of data storage directory: "+this._tempDir),i.existsSync(this._tempDir)||i.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var m=this._getShallowDirectorySizeSync(this._tempDir);if(m>this._maxBytesOnDisk){l.info(p.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+m);return}var g=new Date().getTime()+".ai.json",v=s.join(this._tempDir,g);l.info(p.TAG,"saving data before crash to disk at: "+v),i.writeFileSync(v,h,{mode:384})}catch(w){l.warn(p.TAG,"Error while saving data to disk: "+(w&&w.message)),this._onErrorHelper(w)}},p.prototype._sendFirstFileOnDisk=function(){var h=this;i.exists(this._tempDir,function(m){m&&i.readdir(h._tempDir,function(g,v){if(g)h._onErrorHelper(g);else if(v=v.filter(function(C){return s.basename(C).indexOf(".ai.json")>-1}),v.length>0){var w=v[0],b=s.join(h._tempDir,w);i.readFile(b,function(C,S){C?h._onErrorHelper(C):i.unlink(b,function(P){if(P)h._onErrorHelper(P);else try{var _=JSON.parse(S.toString());h.send(_)}catch(k){l.warn("Failed to read persisted file",k)}})})}})})},p.prototype._onErrorHelper=function(h){typeof this._onError=="function"&&this._onError(h)},p.prototype._stringify=function(h){try{return JSON.stringify(h)}catch(m){l.warn("Failed to serialize payload",m,h)}},p.prototype._fileCleanupTask=function(){var h=this;i.exists(this._tempDir,function(m){m&&i.readdir(h._tempDir,function(g,v){g?h._onErrorHelper(g):(v=v.filter(function(w){return s.basename(w).indexOf(".ai.json")>-1}),v.length>0&&v.forEach(function(w){var b=new Date(parseInt(w.split(".ai.json")[0])),C=new Date(+new Date-p.FILE_RETEMPTION_PERIOD)>b;if(C){var S=s.join(h._tempDir,w);i.unlink(S,function(P){P&&h._onErrorHelper(P)})}}))})})},p.TAG="Sender",p.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",p.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",p.ACLED_DIRECTORIES={},p.ACL_IDENTITY=null,p.WAIT_BETWEEN_RESEND=60*1e3,p.MAX_BYTES_ON_DISK=50*1024*1024,p.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,p.CLEANUP_TIMEOUT=60*60*1e3,p.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,p.TEMPDIR_PREFIX="appInsights-node",p.OS_PROVIDES_FILE_PROTECTION=!1,p.USE_ICACLS=o.type()==="Windows_NT",p}();e.exports=f}),bee=O((t,e)=>{"use strict";var r=kr(),n=bn(),i=Dc(),o=function(){function a(){}return a.createEnvelope=function(c,l,u,d,f){var p=null;switch(l){case r.TelemetryType.Trace:p=a.createTraceData(c);break;case r.TelemetryType.Dependency:p=a.createDependencyData(c);break;case r.TelemetryType.Event:p=a.createEventData(c);break;case r.TelemetryType.Exception:p=a.createExceptionData(c);break;case r.TelemetryType.Request:p=a.createRequestData(c);break;case r.TelemetryType.Metric:p=a.createMetricData(c);break;case r.TelemetryType.Availability:p=a.createAvailabilityData(c);break;case r.TelemetryType.PageView:p=a.createPageViewData(c);break}if(u&&r.domainSupportsProperties(p.baseData)){if(p&&p.baseData)if(!p.baseData.properties)p.baseData.properties=u;else for(var h in u)p.baseData.properties[h]||(p.baseData.properties[h]=u[h]);p.baseData.properties=n.validateStringMap(p.baseData.properties)}var m=f&&f.instrumentationKey||"",g=new r.Envelope;return g.data=p,g.iKey=m,g.name="Microsoft.ApplicationInsights."+m.replace(/-/g,"")+"."+p.baseType.substr(0,p.baseType.length-4),g.tags=this.getTags(d,c.tagOverrides),g.time=new Date().toISOString(),g.ver=1,g.sampleRate=f?f.samplingPercentage:100,l===r.TelemetryType.Metric&&(g.sampleRate=100),g},a.createTraceData=function(c){var l=new r.MessageData;l.message=c.message,l.properties=c.properties,isNaN(c.severity)?l.severityLevel=r.SeverityLevel.Information:l.severityLevel=c.severity;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Trace),u.baseData=l,u},a.createDependencyData=function(c){var l=new r.RemoteDependencyData;typeof c.name=="string"&&(l.name=c.name.length>1024?c.name.slice(0,1021)+"...":c.name),l.data=c.data,l.target=c.target,l.duration=n.msToTimeSpan(c.duration),l.success=c.success,l.type=c.dependencyTypeName,l.properties=c.properties,l.resultCode=c.resultCode?c.resultCode+"":"",c.id?l.id=c.id:l.id=n.w3cTraceId();var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Dependency),u.baseData=l,u},a.createEventData=function(c){var l=new r.EventData;l.name=c.name,l.properties=c.properties,l.measurements=c.measurements;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Event),u.baseData=l,u},a.createExceptionData=function(c){var l=new r.ExceptionData;l.properties=c.properties,isNaN(c.severity)?l.severityLevel=r.SeverityLevel.Error:l.severityLevel=c.severity,l.measurements=c.measurements,l.exceptions=[];var u=c.exception.stack,d=new r.ExceptionDetails;d.message=c.exception.message,d.typeName=c.exception.name,d.parsedStack=this.parseStack(u),d.hasFullStack=n.isArray(d.parsedStack)&&d.parsedStack.length>0,l.exceptions.push(d);var f=new r.Data;return f.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Exception),f.baseData=l,f},a.createRequestData=function(c){var l=new r.RequestData;c.id?l.id=c.id:l.id=n.w3cTraceId(),l.name=c.name,l.url=c.url,l.source=c.source,l.duration=n.msToTimeSpan(c.duration),l.responseCode=c.resultCode?c.resultCode+"":"",l.success=c.success,l.properties=c.properties;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Request),u.baseData=l,u},a.createMetricData=function(c){var l=new r.MetricData;l.metrics=[];var u=new r.DataPoint;u.count=isNaN(c.count)?1:c.count,u.kind=r.DataPointType.Aggregation,u.max=isNaN(c.max)?c.value:c.max,u.min=isNaN(c.min)?c.value:c.min,u.name=c.name,u.stdDev=isNaN(c.stdDev)?0:c.stdDev,u.value=c.value,l.metrics.push(u),l.properties=c.properties;var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Metric),d.baseData=l,d},a.createAvailabilityData=function(c){var l=new r.AvailabilityData;c.id?l.id=c.id:l.id=n.w3cTraceId(),l.name=c.name,l.duration=n.msToTimeSpan(c.duration),l.success=c.success,l.runLocation=c.runLocation,l.message=c.message,l.measurements=c.measurements,l.properties=c.properties;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Availability),u.baseData=l,u},a.createPageViewData=function(c){var l=new r.PageViewData;l.name=c.name,l.duration=n.msToTimeSpan(c.duration),l.url=c.url,l.measurements=c.measurements,l.properties=c.properties;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.PageView),u.baseData=l,u},a.getTags=function(c,l){var u=i.CorrelationContextManager.getCurrentContext(),d={};if(c&&c.tags)for(var f in c.tags)d[f]=c.tags[f];if(l)for(var f in l)d[f]=l[f];return u&&(d[c.keys.operationId]=d[c.keys.operationId]||u.operation.id,d[c.keys.operationName]=d[c.keys.operationName]||u.operation.name,d[c.keys.operationParentId]=d[c.keys.operationParentId]||u.operation.parentId),d},a.parseStack=function(c){var l=void 0;if(typeof c=="string"){var u=c.split(`
`);l=[];for(var d=0,f=0,p=0;p<=u.length;p++){var h=u[p];if(s.regex.test(h)){var m=new s(u[p],d++);f+=m.sizeInBytes,l.push(m)}}var g=32*1024;if(f>g)for(var v=0,w=l.length-1,b=0,C=v,S=w;v<w;){var P=l[v].sizeInBytes,_=l[w].sizeInBytes;if(b+=P+_,b>g){var k=S-C+1;l.splice(C,k);break}C=v,S=w,v++,w--}}return l},a}(),s=function(){function a(c,l){this.sizeInBytes=0,this.level=l,this.method="<no_method>",this.assembly=n.trim(c);var u=c.match(a.regex);u&&u.length>=5&&(this.method=n.trim(u[2])||this.method,this.fileName=n.trim(u[4])||"<no_filename>",this.line=parseInt(u[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=a.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return a.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,a.baseSize=58,a}();e.exports=o}),Eee=O((t,e)=>{"use strict";var r=require("url"),n=dF(),i=fm(),o=kr(),s=hee(),a=wee(),c=Dc(),l=Cee(),u=bn(),d=Jt(),f=bee(),p=function(){function h(m){this._telemetryProcessors=[],this._enableAzureProperties=!1;var g=new n(m);this.config=g,this.context=new i,this.commonProperties={};var v=new l(this.config);this.channel=new s(function(){return g.disableAppInsights},function(){return g.maxBatchSize},function(){return g.maxBatchIntervalMs},v)}return h.prototype.trackAvailability=function(m){this.track(m,o.TelemetryType.Availability)},h.prototype.trackPageView=function(m){this.track(m,o.TelemetryType.PageView)},h.prototype.trackTrace=function(m){this.track(m,o.TelemetryType.Trace)},h.prototype.trackMetric=function(m){this.track(m,o.TelemetryType.Metric)},h.prototype.trackException=function(m){m&&m.exception&&!u.isError(m.exception)&&(m.exception=new Error(m.exception.toString())),this.track(m,o.TelemetryType.Exception)},h.prototype.trackEvent=function(m){this.track(m,o.TelemetryType.Event)},h.prototype.trackRequest=function(m){this.track(m,o.TelemetryType.Request)},h.prototype.trackDependency=function(m){m&&!m.target&&m.data&&(m.target=r.parse(m.data).host),this.track(m,o.TelemetryType.Dependency)},h.prototype.flush=function(m){this.channel.triggerSend(m?!!m.isAppCrashing:!1,m?m.callback:void 0)},h.prototype.track=function(m,g){if(m&&o.telemetryTypeToBaseType(g)){var v=f.createEnvelope(m,g,this.commonProperties,this.context,this.config);m.time&&(v.time=m.time.toISOString()),this._enableAzureProperties&&a.azureRoleEnvironmentTelemetryProcessor(v,this.context);var w=this.runTelemetryProcessors(v,m.contextObjects);w=w&&a.samplingTelemetryProcessor(v,{correlationContext:c.CorrelationContextManager.getCurrentContext()}),a.preAggregatedMetricsTelemetryProcessor(v,this.context),w&&(a.performanceMetricsTelemetryProcessor(v,this.quickPulseClient),this.channel.send(v))}else d.warn("track() requires telemetry object and telemetryType to be specified.")},h.prototype.setAutoPopulateAzureProperties=function(m){this._enableAzureProperties=m},h.prototype.addTelemetryProcessor=function(m){this._telemetryProcessors.push(m)},h.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},h.prototype.runTelemetryProcessors=function(m,g){var v=!0,w=this._telemetryProcessors.length;if(w===0)return v;g=g||{},g.correlationContext=c.CorrelationContextManager.getCurrentContext();for(var b=0;b<w;++b)try{var C=this._telemetryProcessors[b];if(C&&C.apply(null,[m,g])===!1){v=!1;break}}catch(S){v=!0,d.warn("One of telemetry processors failed, telemetry item will be sent.",S,m)}return v&&(m&&m.tags&&(m.tags=u.validateStringMap(m.tags)),m&&m.data&&m.data.baseData&&m.data.baseData.properties&&(m.data.baseData.properties=u.validateStringMap(m.data.baseData.properties))),v},h}();e.exports=p}),_ee=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var c=function(l,u){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(d[p]=f[p])},c(l,u)};return function(l,u){c(l,u);function d(){this.constructor=l}l.prototype=u===null?Object.create(u):(d.prototype=u.prototype,new d)}}(),n=Eee(),i=uF(),o=Gu(),s=Jt(),a=function(c){r(l,c);function l(){return c!==null&&c.apply(this,arguments)||this}return l.prototype.trackNodeHttpRequestSync=function(u){u&&u.request&&u.response&&u.duration?i.trackRequestSync(this,u):s.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},l.prototype.trackNodeHttpRequest=function(u){(u.duration||u.error)&&s.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),u&&u.request&&u.response?i.trackRequest(this,u):s.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},l.prototype.trackNodeHttpDependency=function(u){u&&u.request?o.trackRequest(this,u):s.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},l}(n);e.exports=a}),See=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),xee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.Configuration=t.wrapWithCorrelationContext=t.startOperation=t.getCorrelationContext=t.start=t.setup=t.liveMetricsClient=t.defaultClient=t.DistributedTracingModes=void 0;var e=Dc(),r=JZ(),n=QZ(),i=Tb(),o=lF(),s=aee(),a=Gu(),c=uF(),l=Ac(),u=Jt(),d=dee(),f=pee();t.TelemetryClient=_ee(),t.Contracts=kr(),t.azureFunctionsTypes=See();var p;(function(ve){ve[ve.AI=0]="AI",ve[ve.AI_AND_W3C=1]="AI_AND_W3C"})(p=t.DistributedTracingModes||(t.DistributedTracingModes={}));var h=!0,m=!1,g=!0,v=!0,w=!0,b=!1,C=!0,S=!0,P=!0,_=!0,k,T=!1,A=!0,M,j=void 0,J=void 0,Y,oe,re,F,L,q,W,z,ie=!1,te;function _e(ve){return t.defaultClient?u.info("The default client is already setup"):(t.defaultClient=new t.TelemetryClient(ve),Y=new r(t.defaultClient),oe=new n(t.defaultClient),re=new i(t.defaultClient),F=new o(t.defaultClient),L=new s(t.defaultClient),W=new c(t.defaultClient),z=new a(t.defaultClient),q||(q=new f.AutoCollectNativePerformance(t.defaultClient))),t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(P,j,J),yt}t.setup=_e;function ke(){return t.defaultClient?(ie=!0,Y.enable(h,m),oe.enable(g),re.enable(v),F.enable(w),L.enable(b,t.defaultClient.config),q.enable(A,M),W.useAutoCorrelation(_,k),W.enable(C),z.enable(S),t.liveMetricsClient&&T&&t.liveMetricsClient.enable(T)):u.warn("Start cannot be called before setup"),yt}t.start=ke;function Pe(){return _?e.CorrelationContextManager.getCurrentContext():null}t.getCorrelationContext=Pe;function De(ve,fe){return e.CorrelationContextManager.startOperation(ve,fe)}t.startOperation=De;function pe(ve,fe){return e.CorrelationContextManager.wrapCallback(ve,fe)}t.wrapWithCorrelationContext=pe;var yt=function(){function ve(){}return ve.setDistributedTracingMode=function(fe){return l.w3cEnabled=fe===p.AI_AND_W3C,ve},ve.setAutoCollectConsole=function(fe,be){return be===void 0&&(be=!1),h=fe,m=be,ie&&Y.enable(fe,be),ve},ve.setAutoCollectExceptions=function(fe){return g=fe,ie&&oe.enable(fe),ve},ve.setAutoCollectPerformance=function(fe,be){be===void 0&&(be=!0),v=fe;var je=f.AutoCollectNativePerformance.parseEnabled(be);return A=je.isEnabled,M=je.disabledMetrics,ie&&(re.enable(fe),q.enable(je.isEnabled,je.disabledMetrics)),ve},ve.setAutoCollectPreAggregatedMetrics=function(fe){return w=fe,ie&&F.enable(fe),ve},ve.setAutoCollectHeartbeat=function(fe){return b=fe,ie&&L.enable(fe,t.defaultClient.config),ve},ve.setAutoCollectRequests=function(fe){return C=fe,ie&&W.enable(fe),ve},ve.setAutoCollectDependencies=function(fe){return S=fe,ie&&z.enable(fe),ve},ve.setAutoDependencyCorrelation=function(fe,be){return _=fe,k=be,ie&&W.useAutoCorrelation(fe,be),ve},ve.setUseDiskRetryCaching=function(fe,be,je){return P=fe,j=be,J=je,t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(fe,be,je),ve},ve.setInternalLogging=function(fe,be){return fe===void 0&&(fe=!1),be===void 0&&(be=!0),u.enableDebug=fe,u.disableWarnings=!be,ve},ve.setSendLiveMetrics=function(fe){return fe===void 0&&(fe=!1),t.defaultClient?(!t.liveMetricsClient&&fe?(t.liveMetricsClient=new d(t.defaultClient.config,null),te=new i(t.liveMetricsClient,1e3,!0),t.liveMetricsClient.addCollector(te),t.defaultClient.quickPulseClient=t.liveMetricsClient):t.liveMetricsClient&&t.liveMetricsClient.enable(fe),T=fe,ve):(u.warn("Live metrics client cannot be setup without the default client"),ve)},ve.start=ke,ve}();t.Configuration=yt;function It(){l.w3cEnabled=!0,t.defaultClient=null,ie=!1,Y&&Y.dispose(),oe&&oe.dispose(),re&&re.dispose(),F&&F.dispose(),L&&L.dispose(),q&&q.dispose(),W&&W.dispose(),z&&z.dispose(),t.liveMetricsClient&&(t.liveMetricsClient.enable(!1),T=!1,t.liveMetricsClient=void 0)}t.dispose=It}),fF={};nQ(fF,{default:()=>Aee});pF.exports=iQ(fF);var Ab=Uu(require("os")),Rc=Uu(require("vscode")),bt=Uu(require("vscode")),pm=Uu(require("vscode"));function zu(){let t="telemetry",e="enableTelemetry";try{let r=pm.env.telemetryConfiguration;return r.isUsageEnabled&&r.isErrorsEnabled&&r.isCrashEnabled?"on":r.isErrorsEnabled&&r.isCrashEnabled?"error":"off"}catch{return pm.env.isTelemetryEnabled!==void 0?pm.env.isTelemetryEnabled?"on":"off":pm.workspace.getConfiguration(t).get(e)?"on":"off"}}function Db(t,e){for(let r of Object.keys(t))for(let n of e)n.lookup.test(r)&&(n.replacementString!==void 0?t[r]=n.replacementString:delete t[r])}var Pee=class{constructor(t,e,r,n,i){this.extensionId=t,this.extensionVersion=e,this.telemetryAppender=r,this.osShim=n,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!i,this.updateUserOptStatus(),bt.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(bt.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(bt.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(bt.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let t=zu();this.userOptIn=t==="on",this.errorOptIn=t==="error"||this.userOptIn,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(t){if(!t)return"none";let e="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach(r=>{t.indexOf(`${r}`)===0&&(e=r)}),e}get extension(){return this._extension===void 0&&(this._extension=bt.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(t,e){if(t===null||typeof t!="object"||typeof e!="function")return t;let r={};for(let n in t)r[n]=e(n,t[n]);return r}shouldSendErrorTelemetry(){return this.errorOptIn===!1?!1:this.firstParty?!(bt.env.remoteName&&this.cleanRemoteName(bt.env.remoteName)==="other"):!0}getCommonProperties(){let t=Object.create(null);if(t["common.os"]=this.osShim.platform,t["common.nodeArch"]=this.osShim.architecture,t["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),t["common.extname"]=this.extensionId,t["common.extversion"]=this.extensionVersion,bt&&bt.env){switch(t["common.vscodemachineid"]=bt.env.machineId,t["common.vscodesessionid"]=bt.env.sessionId,t["common.vscodeversion"]=bt.version,t["common.isnewappinstall"]=bt.env.isNewAppInstall?bt.env.isNewAppInstall.toString():"false",t["common.product"]=bt.env.appHost,bt.env.uiKind){case bt.UIKind.Web:t["common.uikind"]="web";break;case bt.UIKind.Desktop:t["common.uikind"]="desktop";break;default:t["common.uikind"]="unknown"}t["common.remotename"]=this.cleanRemoteName(bt.env.remoteName)}return t}anonymizeFilePaths(t,e){let r;if(t==null)return"";let n=[];bt.env.appRoot!==""&&n.push(new RegExp(bt.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&n.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let i=t;if(e){let o=[];for(let l of n)for(;(r=l.exec(t))&&r;)o.push([r.index,l.lastIndex]);let s=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,a=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,c=0;for(i="";(r=a.exec(t))&&r;)r[0]&&!s.test(r[0])&&o.every(([l,u])=>r.index<l||r.index>=u)&&(i+=t.substring(c,r.index)+"<REDACTED: user-file-path>",c=a.lastIndex);c<t.length&&(i+=t.substr(c))}for(let o of n)i=i.replace(o,"");return i}removePropertiesWithPossibleUserInfo(t){if(typeof t!="object")return;let e=Object.create(null);for(let r of Object.keys(t)){let n=t[r];if(!n)continue;let i=/@[a-zA-Z0-9-.]+/,o=/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/,s=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;o.test(n.toLowerCase())?e[r]="<REDACTED: secret>":i.test(n)?e[r]="<REDACTED: email>":s.test(n)?e[r]="<REDACTED: token>":e[r]=n}return e}get telemetryLevel(){switch(zu()){case"on":return"all";case"error":return"error";case"off":return"off"}}sendTelemetryEvent(t,e,r){if(this.userOptIn&&t!==""){e=Mo(Mo({},e),this.getCommonProperties());let n=this.cloneAndChange(e,(i,o)=>this.anonymizeFilePaths(o,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${t}`,{properties:this.removePropertiesWithPossibleUserInfo(n),measurements:r})}}sendRawTelemetryEvent(t,e,r){this.userOptIn&&t!==""&&(e=Mo(Mo({},e),this.getCommonProperties()),this.telemetryAppender.logEvent(`${this.extensionId}/${t}`,{properties:e,measurements:r}))}sendTelemetryErrorEvent(t,e,r,n){if(this.errorOptIn&&t!==""){e=Mo(Mo({},e),this.getCommonProperties());let i=this.cloneAndChange(e,(o,s)=>this.shouldSendErrorTelemetry()?this.anonymizeFilePaths(s,this.firstParty):n===void 0||n.indexOf(o)!==-1?"REDACTED":this.anonymizeFilePaths(s,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${t}`,{properties:this.removePropertiesWithPossibleUserInfo(i),measurements:r})}}sendTelemetryException(t,e,r){if(this.shouldSendErrorTelemetry()&&this.errorOptIn&&t){e=Mo(Mo({},e),this.getCommonProperties());let n=this.cloneAndChange(e,(i,o)=>this.anonymizeFilePaths(o,this.firstParty));t.stack&&(t.stack=this.anonymizeFilePaths(t.stack,this.firstParty)),this.telemetryAppender.logException(t,{properties:this.removePropertiesWithPossibleUserInfo(n),measurements:r})}}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(t=>t.dispose()))}},kee=class{constructor(t,e){this._isInstantiated=!1,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=e,this._key=t,zu()!=="off"&&this.instantiateAppender()}logEvent(t,e){if(!this._telemetryClient){!this._isInstantiated&&zu()==="on"&&this._eventQueue.push({eventName:t,data:e});return}this._telemetryClient.logEvent(t,e)}logException(t,e){if(!this._telemetryClient){!this._isInstantiated&&zu()!=="off"&&this._exceptionQueue.push({exception:t,data:e});return}this._telemetryClient.logException(t,e)}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:t,data:e})=>this.logEvent(t,e)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:t,data:e})=>this.logException(t,e)),this._exceptionQueue=[]}instantiateAppender(){this._isInstantiated||this._clientFactory(this._key).then(t=>{this._telemetryClient=t,this._isInstantiated=!0,this._flushQueues()}).catch(t=>{console.error(t)})}},Iee=async(t,e)=>{let r;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let n=await Promise.resolve().then(()=>Uu(xee()));n.defaultClient?(r=new n.TelemetryClient(t),r.channel.setUseDiskRetryCaching(!0)):(n.setup(t).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),r=n.defaultClient),Rc&&Rc.env&&(r.context.tags[r.context.keys.userId]=Rc.env.machineId,r.context.tags[r.context.keys.sessionId]=Rc.env.sessionId,r.context.tags[r.context.keys.cloudRole]=Rc.env.appName,r.context.tags[r.context.keys.cloudRoleInstance]=Rc.env.appName),t&&t.indexOf("AIF-")===0&&(r.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1")}catch(n){return Promise.reject(`Failed to initialize app insights!
`+n.message)}return e!=null&&e.length&&Tee(r,e),{logEvent:(n,i)=>{try{r==null||r.trackEvent({name:n,properties:i==null?void 0:i.properties,measurements:i==null?void 0:i.measurements})}catch(o){throw new Error(`Failed to log event to app insights!
`+o.message)}},logException:(n,i)=>{try{r==null||r.trackException({exception:n,properties:i==null?void 0:i.properties,measurements:i==null?void 0:i.measurements})}catch(o){throw new Error(`Failed to log exception to app insights!
`+o.message)}},flush:async()=>{try{r==null||r.flush()}catch(n){throw new Error(`Failed to flush app insights!
`+n.message)}}}};function Tee(t,e){t.addTelemetryProcessor(r=>(Array.isArray(r.tags)?r.tags.forEach(n=>Db(n,e)):r.tags&&Db(r.tags,e),r.data.baseData&&Db(r.data.baseData,e),!0))}var Aee=class extends Pee{constructor(t,e,r,n,i){let o=new kee(r,s=>Iee(s,i));r&&r.indexOf("AIF-")===0&&(n=!0),super(t,e,o,{release:Ab.release(),platform:Ab.platform(),architecture:Ab.arch()},n)}}});var Rb=I(na=>{"use strict";Object.defineProperty(na,"__esModule",{value:!0});var hm=require("vscode"),Ku=class{constructor(e,r,n){this.extensionName=e,this.extensionVersion=r,this.targetPopulation=n}static trimVersionSuffix(e){let r=/\-[a-zA-Z0-9]+$/;return e.split(r)[0]}getFilterValue(e){switch(e){case Wi.ApplicationVersion:return Ku.trimVersionSuffix(hm.version);case Wi.Build:return hm.env.appName;case Wi.ClientId:return hm.env.machineId;case Wi.ExtensionName:return this.extensionName;case Wi.ExtensionVersion:return Ku.trimVersionSuffix(this.extensionVersion);case Wi.Language:return hm.env.language;case Wi.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,r=Object.values(Wi);for(let n of r)e.set(n,this.getFilterValue(n));return e}};na.VSCodeFilterProvider=Ku;var Wi;(function(t){t.Market="X-MSEdge-Market",t.CorpNet="X-FD-Corpnet",t.ApplicationVersion="X-VSCode-AppVersion",t.Build="X-VSCode-Build",t.ClientId="X-MSEdge-ClientId",t.ExtensionName="X-VSCode-ExtensionName",t.ExtensionVersion="X-VSCode-ExtensionVersion",t.Language="X-VSCode-Language",t.TargetPopulation="X-VSCode-TargetPopulation"})(Wi=na.Filters||(na.Filters={}));var Dee;(function(t){t.Team="team",t.Internal="internal",t.Insiders="insider",t.Public="public"})(Dee=na.TargetPopulation||(na.TargetPopulation={}))});var gF=I(Ob=>{"use strict";Object.defineProperty(Ob,"__esModule",{value:!0});var mF=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}};Ob.BaseFeatureProvider=mF});var yF=I(Nb=>{"use strict";Object.defineProperty(Nb,"__esModule",{value:!0});var Ree=gF(),vF=class extends Ree.BaseFeatureProvider{constructor(e,r){super(e);this.telemetry=e,this.filterProviders=r,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let r of this.filterProviders){let n=r.getFilters();for(let i of n.keys()){let o=n.get(i);e.set(i,o)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;let r=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",r]])),this.cachedTelemetryEvents.push(e)}};Nb.FilteredFeatureProvider=vF});var CF=I(Lb=>{"use strict";Object.defineProperty(Lb,"__esModule",{value:!0});var Oee=yF(),wF=class extends Oee.FilteredFeatureProvider{constructor(e,r,n){super(r,n);this.httpClient=e,this.telemetry=r,this.filterProviders=n}async fetch(){let e=this.getFilters(),r={};for(let a of e.keys()){let c=e.get(a);r[a]=c}let n=await this.httpClient.get({headers:r});e.keys.length>0&&this.PostEventToTelemetry(r);let i=n.data,o=i.Configs,s=[];for(let a of o)if(!!a.Parameters)for(let c of Object.keys(a.Parameters)){let l=c+(a.Parameters[c]?"":"cf");s.includes(l)||s.push(l)}return{features:s,assignmentContext:i.AssignmentContext,configs:o}}};Lb.TasApiFeatureProvider=wF});var Fb=I((Gbe,bF)=>{"use strict";bF.exports=function(e,r){return function(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return e.apply(r,i)}}});var gr=I((zbe,SF)=>{"use strict";var Nee=Fb(),ia=Object.prototype.toString;function Mb(t){return ia.call(t)==="[object Array]"}function qb(t){return typeof t=="undefined"}function Lee(t){return t!==null&&!qb(t)&&t.constructor!==null&&!qb(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function Fee(t){return ia.call(t)==="[object ArrayBuffer]"}function Mee(t){return typeof FormData!="undefined"&&t instanceof FormData}function qee(t){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function $ee(t){return typeof t=="string"}function jee(t){return typeof t=="number"}function EF(t){return t!==null&&typeof t=="object"}function mm(t){if(ia.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Uee(t){return ia.call(t)==="[object Date]"}function Bee(t){return ia.call(t)==="[object File]"}function Hee(t){return ia.call(t)==="[object Blob]"}function _F(t){return ia.call(t)==="[object Function]"}function Vee(t){return EF(t)&&_F(t.pipe)}function Wee(t){return typeof URLSearchParams!="undefined"&&t instanceof URLSearchParams}function Gee(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function zee(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function $b(t,e){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),Mb(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function jb(){var t={};function e(i,o){mm(t[o])&&mm(i)?t[o]=jb(t[o],i):mm(i)?t[o]=jb({},i):Mb(i)?t[o]=i.slice():t[o]=i}for(var r=0,n=arguments.length;r<n;r++)$b(arguments[r],e);return t}function Kee(t,e,r){return $b(e,function(i,o){r&&typeof i=="function"?t[o]=Nee(i,r):t[o]=i}),t}function Yee(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}SF.exports={isArray:Mb,isArrayBuffer:Fee,isBuffer:Lee,isFormData:Mee,isArrayBufferView:qee,isString:$ee,isNumber:jee,isObject:EF,isPlainObject:mm,isUndefined:qb,isDate:Uee,isFile:Bee,isBlob:Hee,isFunction:_F,isStream:Vee,isURLSearchParams:Wee,isStandardBrowserEnv:zee,forEach:$b,merge:jb,extend:Kee,trim:Gee,stripBOM:Yee}});var gm=I((Kbe,PF)=>{"use strict";var Oc=gr();function xF(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}PF.exports=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(Oc.isURLSearchParams(r))i=r.toString();else{var o=[];Oc.forEach(r,function(c,l){c===null||typeof c=="undefined"||(Oc.isArray(c)?l=l+"[]":c=[c],Oc.forEach(c,function(d){Oc.isDate(d)?d=d.toISOString():Oc.isObject(d)&&(d=JSON.stringify(d)),o.push(xF(l)+"="+xF(d))}))}),i=o.join("&")}if(i){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var IF=I((Ybe,kF)=>{"use strict";var Jee=gr();function vm(){this.handlers=[]}vm.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};vm.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};vm.prototype.forEach=function(e){Jee.forEach(this.handlers,function(n){n!==null&&e(n)})};kF.exports=vm});var AF=I((Jbe,TF)=>{"use strict";var Qee=gr();TF.exports=function(e,r){Qee.forEach(e,function(i,o){o!==r&&o.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[o])})}});var ym=I((Qbe,DF)=>{"use strict";DF.exports=function(e,r,n,i,o){return e.config=r,n&&(e.code=n),e.request=i,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}});var wm=I((Xbe,RF)=>{"use strict";var Xee=ym();RF.exports=function(e,r,n,i,o){var s=new Error(e);return Xee(s,r,n,i,o)}});var Ub=I((Zbe,OF)=>{"use strict";var Zee=wm();OF.exports=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(Zee("Request failed with status code "+n.status,n.config,null,n.request,n))}});var LF=I((eEe,NF)=>{"use strict";var Cm=gr();NF.exports=Cm.isStandardBrowserEnv()?function(){return{write:function(r,n,i,o,s,a){var c=[];c.push(r+"="+encodeURIComponent(n)),Cm.isNumber(i)&&c.push("expires="+new Date(i).toGMTString()),Cm.isString(o)&&c.push("path="+o),Cm.isString(s)&&c.push("domain="+s),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var MF=I((tEe,FF)=>{"use strict";FF.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}});var $F=I((rEe,qF)=>{"use strict";qF.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}});var Bb=I((nEe,jF)=>{"use strict";var ete=MF(),tte=$F();jF.exports=function(e,r){return e&&!ete(r)?tte(e,r):r}});var BF=I((iEe,UF)=>{"use strict";var Hb=gr(),rte=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];UF.exports=function(e){var r={},n,i,o;return e&&Hb.forEach(e.split(`
`),function(a){if(o=a.indexOf(":"),n=Hb.trim(a.substr(0,o)).toLowerCase(),i=Hb.trim(a.substr(o+1)),n){if(r[n]&&rte.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r}});var WF=I((oEe,VF)=>{"use strict";var HF=gr();VF.exports=HF.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(o){var s=o;return e&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(s){var a=HF.isString(s)?i(s):s;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}()});var Nc=I((sEe,GF)=>{"use strict";function Vb(t){this.message=t}Vb.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Vb.prototype.__CANCEL__=!0;GF.exports=Vb});var KF=I((aEe,zF)=>{"use strict";var bm=gr(),nte=Ub(),ite=LF(),ote=gm(),ste=Bb(),ate=BF(),cte=WF(),Wb=wm(),lte=Lc(),ute=Nc();zF.exports=function(e){return new Promise(function(n,i){var o=e.data,s=e.headers,a=e.responseType,c;function l(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}bm.isFormData(o)&&delete s["Content-Type"];var u=new XMLHttpRequest;if(e.auth){var d=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.Authorization="Basic "+btoa(d+":"+f)}var p=ste(e.baseURL,e.url);u.open(e.method.toUpperCase(),ote(p,e.params,e.paramsSerializer),!0),u.timeout=e.timeout;function h(){if(!!u){var g="getAllResponseHeaders"in u?ate(u.getAllResponseHeaders()):null,v=!a||a==="text"||a==="json"?u.responseText:u.response,w={data:v,status:u.status,statusText:u.statusText,headers:g,config:e,request:u};nte(function(C){n(C),l()},function(C){i(C),l()},w),u=null}}if("onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(h)},u.onabort=function(){!u||(i(Wb("Request aborted",e,"ECONNABORTED",u)),u=null)},u.onerror=function(){i(Wb("Network Error",e,null,u)),u=null},u.ontimeout=function(){var v="timeout of "+e.timeout+"ms exceeded",w=e.transitional||lte.transitional;e.timeoutErrorMessage&&(v=e.timeoutErrorMessage),i(Wb(v,e,w.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",u)),u=null},bm.isStandardBrowserEnv()){var m=(e.withCredentials||cte(p))&&e.xsrfCookieName?ite.read(e.xsrfCookieName):void 0;m&&(s[e.xsrfHeaderName]=m)}"setRequestHeader"in u&&bm.forEach(s,function(v,w){typeof o=="undefined"&&w.toLowerCase()==="content-type"?delete s[w]:u.setRequestHeader(w,v)}),bm.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&a!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(c=function(g){!u||(i(!g||g&&g.type?new ute("canceled"):g),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c))),o||(o=null),u.send(o)})}});var Em=I((cEe,YF)=>{YF.exports={version:"0.22.0"}});var tM=I((lEe,eM)=>{"use strict";var Yu=gr(),JF=Ub(),dte=Bb(),fte=gm(),pte=require("http"),hte=require("https"),mte=Ga().http,gte=Ga().https,QF=require("url"),vte=require("zlib"),yte=Em().version,_m=wm(),Gb=ym(),wte=Lc(),Cte=Nc(),XF=/https:?/;function ZF(t,e,r){if(t.hostname=e.host,t.host=e.host,t.port=e.port,t.path=r,e.auth){var n=Buffer.from(e.auth.username+":"+e.auth.password,"utf8").toString("base64");t.headers["Proxy-Authorization"]="Basic "+n}t.beforeRedirect=function(o){o.headers.host=o.host,ZF(o,e,o.href)}}eM.exports=function(e){return new Promise(function(n,i){var o;function s(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}var a=function(z){s(),n(z)},c=function(z){s(),i(z)},l=e.data,u=e.headers,d={};if(Object.keys(u).forEach(function(z){d[z.toLowerCase()]=z}),"user-agent"in d?u[d["user-agent"]]||delete u[d["user-agent"]]:u["User-Agent"]="axios/"+yte,l&&!Yu.isStream(l)){if(!Buffer.isBuffer(l))if(Yu.isArrayBuffer(l))l=Buffer.from(new Uint8Array(l));else if(Yu.isString(l))l=Buffer.from(l,"utf-8");else return c(_m("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));d["content-length"]||(u["Content-Length"]=l.length)}var f=void 0;if(e.auth){var p=e.auth.username||"",h=e.auth.password||"";f=p+":"+h}var m=dte(e.baseURL,e.url),g=QF.parse(m),v=g.protocol||"http:";if(!f&&g.auth){var w=g.auth.split(":"),b=w[0]||"",C=w[1]||"";f=b+":"+C}f&&d.authorization&&delete u[d.authorization];var S=XF.test(v),P=S?e.httpsAgent:e.httpAgent,_={path:fte(g.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:u,agent:P,agents:{http:e.httpAgent,https:e.httpsAgent},auth:f};e.socketPath?_.socketPath=e.socketPath:(_.hostname=g.hostname,_.port=g.port);var k=e.proxy;if(!k&&k!==!1){var T=v.slice(0,-1)+"_proxy",A=process.env[T]||process.env[T.toUpperCase()];if(A){var M=QF.parse(A),j=process.env.no_proxy||process.env.NO_PROXY,J=!0;if(j){var Y=j.split(",").map(function(z){return z.trim()});J=!Y.some(function(z){return z?z==="*"||z[0]==="."&&g.hostname.substr(g.hostname.length-z.length)===z?!0:g.hostname===z:!1})}if(J&&(k={host:M.hostname,port:M.port,protocol:M.protocol},M.auth)){var oe=M.auth.split(":");k.auth={username:oe[0],password:oe[1]}}}}k&&(_.headers.host=g.hostname+(g.port?":"+g.port:""),ZF(_,k,v+"//"+g.hostname+(g.port?":"+g.port:"")+_.path));var re,F=S&&(k?XF.test(k.protocol):!0);e.transport?re=e.transport:e.maxRedirects===0?re=F?hte:pte:(e.maxRedirects&&(_.maxRedirects=e.maxRedirects),re=F?gte:mte),e.maxBodyLength>-1&&(_.maxBodyLength=e.maxBodyLength),e.insecureHTTPParser&&(_.insecureHTTPParser=e.insecureHTTPParser);var L=re.request(_,function(z){if(!L.aborted){var ie=z,te=z.req||L;if(z.statusCode!==204&&te.method!=="HEAD"&&e.decompress!==!1)switch(z.headers["content-encoding"]){case"gzip":case"compress":case"deflate":ie=ie.pipe(vte.createUnzip()),delete z.headers["content-encoding"];break}var _e={status:z.statusCode,statusText:z.statusMessage,headers:z.headers,config:e,request:te};if(e.responseType==="stream")_e.data=ie,JF(a,c,_e);else{var ke=[],Pe=0;ie.on("data",function(pe){ke.push(pe),Pe+=pe.length,e.maxContentLength>-1&&Pe>e.maxContentLength&&(ie.destroy(),c(_m("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,te)))}),ie.on("error",function(pe){L.aborted||c(Gb(pe,e,null,te))}),ie.on("end",function(){var pe=Buffer.concat(ke);e.responseType!=="arraybuffer"&&(pe=pe.toString(e.responseEncoding),(!e.responseEncoding||e.responseEncoding==="utf8")&&(pe=Yu.stripBOM(pe))),_e.data=pe,JF(a,c,_e)})}}});if(L.on("error",function(z){L.aborted&&z.code!=="ERR_FR_TOO_MANY_REDIRECTS"||c(Gb(z,e,null,L))}),e.timeout){var q=parseInt(e.timeout,10);if(isNaN(q)){c(_m("error trying to parse `config.timeout` to int",e,"ERR_PARSE_TIMEOUT",L));return}L.setTimeout(q,function(){L.abort();var z=e.transitional||wte.transitional;c(_m("timeout of "+q+"ms exceeded",e,z.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",L))})}(e.cancelToken||e.signal)&&(o=function(W){L.aborted||(L.abort(),c(!W||W&&W.type?new Cte("canceled"):W))},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o))),Yu.isStream(l)?l.on("error",function(z){c(Gb(z,e,null,L))}).pipe(L):L.end(l)})}});var Lc=I((uEe,iM)=>{"use strict";var Qt=gr(),rM=AF(),bte=ym(),Ete={"Content-Type":"application/x-www-form-urlencoded"};function nM(t,e){!Qt.isUndefined(t)&&Qt.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function _te(){var t;return typeof XMLHttpRequest!="undefined"?t=KF():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(t=tM()),t}function Ste(t,e,r){if(Qt.isString(t))try{return(e||JSON.parse)(t),Qt.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Sm={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:_te(),transformRequest:[function(e,r){return rM(r,"Accept"),rM(r,"Content-Type"),Qt.isFormData(e)||Qt.isArrayBuffer(e)||Qt.isBuffer(e)||Qt.isStream(e)||Qt.isFile(e)||Qt.isBlob(e)?e:Qt.isArrayBufferView(e)?e.buffer:Qt.isURLSearchParams(e)?(nM(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Qt.isObject(e)||r&&r["Content-Type"]==="application/json"?(nM(r,"application/json"),Ste(e)):e}],transformResponse:[function(e){var r=this.transitional||Sm.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,o=!n&&this.responseType==="json";if(o||i&&Qt.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(o)throw s.name==="SyntaxError"?bte(s,this,"E_JSON_PARSE"):s}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Qt.forEach(["delete","get","head"],function(e){Sm.headers[e]={}});Qt.forEach(["post","put","patch"],function(e){Sm.headers[e]=Qt.merge(Ete)});iM.exports=Sm});var sM=I((dEe,oM)=>{"use strict";var xte=gr(),Pte=Lc();oM.exports=function(e,r,n){var i=this||Pte;return xte.forEach(n,function(s){e=s.call(i,e,r)}),e}});var zb=I((fEe,aM)=>{"use strict";aM.exports=function(e){return!!(e&&e.__CANCEL__)}});var uM=I((pEe,lM)=>{"use strict";var cM=gr(),Kb=sM(),kte=zb(),Ite=Lc(),Tte=Nc();function Yb(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Tte("canceled")}lM.exports=function(e){Yb(e),e.headers=e.headers||{},e.data=Kb.call(e,e.data,e.headers,e.transformRequest),e.headers=cM.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),cM.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||Ite.adapter;return r(e).then(function(i){return Yb(e),i.data=Kb.call(e,i.data,i.headers,e.transformResponse),i},function(i){return kte(i)||(Yb(e),i&&i.response&&(i.response.data=Kb.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var Jb=I((hEe,dM)=>{"use strict";var Yr=gr();dM.exports=function(e,r){r=r||{};var n={};function i(u,d){return Yr.isPlainObject(u)&&Yr.isPlainObject(d)?Yr.merge(u,d):Yr.isPlainObject(d)?Yr.merge({},d):Yr.isArray(d)?d.slice():d}function o(u){if(Yr.isUndefined(r[u])){if(!Yr.isUndefined(e[u]))return i(void 0,e[u])}else return i(e[u],r[u])}function s(u){if(!Yr.isUndefined(r[u]))return i(void 0,r[u])}function a(u){if(Yr.isUndefined(r[u])){if(!Yr.isUndefined(e[u]))return i(void 0,e[u])}else return i(void 0,r[u])}function c(u){if(u in r)return i(e[u],r[u]);if(u in e)return i(void 0,e[u])}var l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return Yr.forEach(Object.keys(e).concat(Object.keys(r)),function(d){var f=l[d]||o,p=f(d);Yr.isUndefined(p)&&f!==c||(n[d]=p)}),n}});var hM=I((mEe,pM)=>{"use strict";var Ate=Em().version,Qb={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Qb[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var fM={};Qb.transitional=function(e,r,n){function i(o,s){return"[Axios v"+Ate+"] Transitional option '"+o+"'"+s+(n?". "+n:"")}return function(o,s,a){if(e===!1)throw new Error(i(s," has been removed"+(r?" in "+r:"")));return r&&!fM[s]&&(fM[s]=!0,console.warn(i(s," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(o,s,a):!0}};function Dte(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var o=n[i],s=e[o];if(s){var a=t[o],c=a===void 0||s(a,o,t);if(c!==!0)throw new TypeError("option "+o+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+o)}}pM.exports={assertOptions:Dte,validators:Qb}});var CM=I((gEe,wM)=>{"use strict";var mM=gr(),Rte=gm(),gM=IF(),vM=uM(),xm=Jb(),yM=hM(),Fc=yM.validators;function Ju(t){this.defaults=t,this.interceptors={request:new gM,response:new gM}}Ju.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=xm(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&yM.assertOptions(r,{silentJSONParsing:Fc.transitional(Fc.boolean),forcedJSONParsing:Fc.transitional(Fc.boolean),clarifyTimeoutError:Fc.transitional(Fc.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(e)===!1||(i=i&&f.synchronous,n.unshift(f.fulfilled,f.rejected))});var o=[];this.interceptors.response.forEach(function(f){o.push(f.fulfilled,f.rejected)});var s;if(!i){var a=[vM,void 0];for(Array.prototype.unshift.apply(a,n),a=a.concat(o),s=Promise.resolve(e);a.length;)s=s.then(a.shift(),a.shift());return s}for(var c=e;n.length;){var l=n.shift(),u=n.shift();try{c=l(c)}catch(d){u(d);break}}try{s=vM(c)}catch(d){return Promise.reject(d)}for(;o.length;)s=s.then(o.shift(),o.shift());return s};Ju.prototype.getUri=function(e){return e=xm(this.defaults,e),Rte(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};mM.forEach(["delete","get","head","options"],function(e){Ju.prototype[e]=function(r,n){return this.request(xm(n||{},{method:e,url:r,data:(n||{}).data}))}});mM.forEach(["post","put","patch"],function(e){Ju.prototype[e]=function(r,n,i){return this.request(xm(i||{},{method:e,url:r,data:n}))}});wM.exports=Ju});var EM=I((vEe,bM)=>{"use strict";var Ote=Nc();function Mc(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var r=this;this.promise.then(function(n){if(!!r._listeners){var i,o=r._listeners.length;for(i=0;i<o;i++)r._listeners[i](n);r._listeners=null}}),this.promise.then=function(n){var i,o=new Promise(function(s){r.subscribe(s),i=s}).then(n);return o.cancel=function(){r.unsubscribe(i)},o},t(function(i){r.reason||(r.reason=new Ote(i),e(r.reason))})}Mc.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Mc.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};Mc.prototype.unsubscribe=function(e){if(!!this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};Mc.source=function(){var e,r=new Mc(function(i){e=i});return{token:r,cancel:e}};bM.exports=Mc});var SM=I((yEe,_M)=>{"use strict";_M.exports=function(e){return function(n){return e.apply(null,n)}}});var PM=I((wEe,xM)=>{"use strict";xM.exports=function(e){return typeof e=="object"&&e.isAxiosError===!0}});var TM=I((CEe,Xb)=>{"use strict";var kM=gr(),Nte=Fb(),Pm=CM(),Lte=Jb(),Fte=Lc();function IM(t){var e=new Pm(t),r=Nte(Pm.prototype.request,e);return kM.extend(r,Pm.prototype,e),kM.extend(r,e),r.create=function(i){return IM(Lte(t,i))},r}var pi=IM(Fte);pi.Axios=Pm;pi.Cancel=Nc();pi.CancelToken=EM();pi.isCancel=zb();pi.VERSION=Em().version;pi.all=function(e){return Promise.all(e)};pi.spread=SM();pi.isAxiosError=PM();Xb.exports=pi;Xb.exports.default=pi});var DM=I((bEe,AM)=>{AM.exports=TM()});var OM=I(Zb=>{"use strict";Object.defineProperty(Zb,"__esModule",{value:!0});var Mte=DM(),RM=class{constructor(e){this.endpoint=e}get(e){return Mte.default.get(this.endpoint,Object.assign(Object.assign({},e),{proxy:!1}))}};Zb.AxiosHttpClient=RM});var LM=I(eE=>{"use strict";Object.defineProperty(eE,"__esModule",{value:!0});var NM=class{constructor(){this.storage=new Map}async getValue(e,r){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(r||void 0)}setValue(e,r){this.storage.set(e,r)}};eE.MemoryKeyValueStorage=NM});var MM=I(tE=>{"use strict";Object.defineProperty(tE,"__esModule",{value:!0});var qte=LM(),FM=class{constructor(e,r,n,i,o,s){this.telemetry=e,this.featuresTelemetryPropertyName=r,this.assignmentContextTelemetryPropertyName=n,this.telemetryEventName=i,this.storageKey=o,this.storage=s,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(s=new qte.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((a,c)=>{this.resolveInitialFetchPromise=a})}get features(){return this._features}set features(e){this._features=e,this.telemetry&&(this.telemetry.setSharedProperty(this.featuresTelemetryPropertyName,this.features.features.join(";")),this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext))}async getFeaturesAsync(e=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch{}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});this.fetchPromise=Promise.all(this.featureProviders.map(async r=>await r.getFeatures()));try{let r=await this.fetchPromise;this.updateFeatures(r,e)}catch{}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,r=!1){let n={features:[],assignmentContext:"",configs:[]};for(let i of e){for(let o of i.features)n.features.includes(o)||n.features.push(o);for(let o of i.configs){let s=n.configs.find(a=>a.Id===o.Id);s?s.Parameters=Object.assign(Object.assign({},s.Parameters),o.Parameters):n.configs.push(o)}n.assignmentContext+=i.assignmentContext}(r||!this.featuresConsumed)&&(this.features=n),this.storage&&this.storage.setValue(this.storageKey,n)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),e!==void 0&&e.configs===void 0&&(e.configs=[])),this.features.features.length===0&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){let r=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),r.features.includes(e)}getTreatmentVariable(e,r){var n;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${r}`),(n=this.features.configs.find(o=>o.Id===e))===null||n===void 0?void 0:n.Parameters[r]}async getTreatmentVariableAsync(e,r,n){if(n){let i=this.featuresConsumed,o=this.getTreatmentVariable(e,r);if(o===void 0)this.featuresConsumed=i;else return o}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,r)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(!(e==null||this.featureProviders==null))for(let r of e)this.featureProviders.push(r)}};tE.ExperimentationServiceBase=FM});var $M=I(rE=>{"use strict";Object.defineProperty(rE,"__esModule",{value:!0});var qM=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(e&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};rE.PollingService=qM});var UM=I(nE=>{"use strict";Object.defineProperty(nE,"__esModule",{value:!0});var $te=MM(),jte=$M(),jM=class extends $te.ExperimentationServiceBase{constructor(e,r,n,i,o,s,a,c){super(e,i,o,s,a,c);if(this.telemetry=e,this.filterProviders=r,this.refreshRateMs=n,this.featuresTelemetryPropertyName=i,this.assignmentContextTelemetryPropertyName=o,this.telemetryEventName=s,this.storageKey=a,this.storage=c,n<1e3&&n!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");n>0&&(this.pollingService=new jte.PollingService(n),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let r=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),r}else return await super.getFeaturesAsync(e)}};nE.ExperimentationServiceAutoPolling=jM});var BM=I(oE=>{"use strict";Object.defineProperty(oE,"__esModule",{value:!0});var Ute=CF(),Bte=OM(),Hte=UM(),iE=class extends Hte.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],e.refetchInterval!=null?e.refetchInterval:0,e.featuresTelemetryPropertyName,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage);this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new Ute.TasApiFeatureProvider(new Bte.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};oE.ExperimentationService=iE;iE.REFRESH_RATE_IN_MINUTES=30});var HM=I(sE=>{"use strict";Object.defineProperty(sE,"__esModule",{value:!0});var Vte=BM();sE.ExperimentationService=Vte.ExperimentationService});var WM=I(aE=>{"use strict";Object.defineProperty(aE,"__esModule",{value:!0});var VM=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,r){return await this.mementoGlobalStorage.get(e)||r}setValue(e,r){this.mementoGlobalStorage.update(e,r)}};aE.MementoKeyValueStorage=VM});var zM=I(cE=>{"use strict";Object.defineProperty(cE,"__esModule",{value:!0});var GM=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}};cE.default=GM});var YM=I(km=>{"use strict";Object.defineProperty(km,"__esModule",{value:!0});var Wte=Rb(),Gte=HM(),lE=require("vscode"),zte=WM(),Kte=zM(),Yte="https://default.exp-tas.com/vscode/ab",Jte="query-expfeature",Qte="VSCode.ABExp.Features",Xte="abexp.assignmentcontext",Zte="VSCode.ABExp.FeatureData",ere=1e3*60*30;function KM(t,e,r,n,i,...o){if(!i)throw new Error("Memento storage was not provided.");let s=lE.workspace.getConfiguration("telemetry");if(!(lE.env.isTelemetryEnabled===void 0?s.get("enableTelemetry",!0):lE.env.isTelemetryEnabled))return new Kte.default;let l=[new Wte.VSCodeFilterProvider(t,e,r),...o],u=new zte.MementoKeyValueStorage(i);return new Gte.ExperimentationService({filterProviders:l,telemetry:n,storageKey:Zte,keyValueStorage:u,featuresTelemetryPropertyName:Qte,assignmentContextTelemetryPropertyName:Xte,telemetryEventName:Jte,endpoint:Yte,refetchInterval:ere})}km.getExperimentationService=KM;async function tre(t,e,r,n,i,...o){let s=KM(t,e,r,n,i,...o);return await s.initializePromise,s}km.getExperimentationServiceAsync=tre});var QM=I(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});var JM=YM();Qu.getExperimentationService=JM.getExperimentationService;Qu.getExperimentationServiceAsync=JM.getExperimentationServiceAsync;var rre=Rb();Qu.TargetPopulation=rre.TargetPopulation});var Ye=I(Ut=>{"use strict";var EE=Symbol.for("yaml.alias"),Eq=Symbol.for("yaml.document"),qm=Symbol.for("yaml.map"),_q=Symbol.for("yaml.pair"),_E=Symbol.for("yaml.scalar"),$m=Symbol.for("yaml.seq"),wi=Symbol.for("yaml.node.type"),Pre=t=>!!t&&typeof t=="object"&&t[wi]===EE,kre=t=>!!t&&typeof t=="object"&&t[wi]===Eq,Ire=t=>!!t&&typeof t=="object"&&t[wi]===qm,Tre=t=>!!t&&typeof t=="object"&&t[wi]===_q,Sq=t=>!!t&&typeof t=="object"&&t[wi]===_E,Are=t=>!!t&&typeof t=="object"&&t[wi]===$m;function xq(t){if(t&&typeof t=="object")switch(t[wi]){case qm:case $m:return!0}return!1}function Dre(t){if(t&&typeof t=="object")switch(t[wi]){case EE:case qm:case _E:case $m:return!0}return!1}var Rre=t=>(Sq(t)||xq(t))&&!!t.anchor,Pq=class{constructor(e){Object.defineProperty(this,wi,{value:e})}clone(){let e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}};Ut.ALIAS=EE;Ut.DOC=Eq;Ut.MAP=qm;Ut.NODE_TYPE=wi;Ut.NodeBase=Pq;Ut.PAIR=_q;Ut.SCALAR=_E;Ut.SEQ=$m;Ut.hasAnchor=Rre;Ut.isAlias=Pre;Ut.isCollection=xq;Ut.isDocument=kre;Ut.isMap=Ire;Ut.isNode=Dre;Ut.isPair=Tre;Ut.isScalar=Sq;Ut.isSeq=Are});var cd=I(kq=>{"use strict";var Ir=Ye(),aa=Symbol("break visit"),Ore=Symbol("skip children"),ad=Symbol("remove node");function jm(t,e){typeof e=="object"&&(e.Collection||e.Node||e.Value)&&(e=Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e)),Ir.isDocument(t)?Bc(null,t.contents,e,Object.freeze([t]))===ad&&(t.contents=null):Bc(null,t,e,Object.freeze([]))}jm.BREAK=aa;jm.SKIP=Ore;jm.REMOVE=ad;function Bc(t,e,r,n){let i;if(typeof r=="function"?i=r(t,e,n):Ir.isMap(e)?r.Map&&(i=r.Map(t,e,n)):Ir.isSeq(e)?r.Seq&&(i=r.Seq(t,e,n)):Ir.isPair(e)?r.Pair&&(i=r.Pair(t,e,n)):Ir.isScalar(e)?r.Scalar&&(i=r.Scalar(t,e,n)):Ir.isAlias(e)&&r.Alias&&(i=r.Alias(t,e,n)),Ir.isNode(i)||Ir.isPair(i)){let o=n[n.length-1];if(Ir.isCollection(o))o.items[t]=i;else if(Ir.isPair(o))t==="key"?o.key=i:o.value=i;else if(Ir.isDocument(o))o.contents=i;else{let s=Ir.isAlias(o)?"alias":"scalar";throw new Error(`Cannot replace node with ${s} parent`)}return Bc(t,i,r,n)}if(typeof i!="symbol"){if(Ir.isCollection(e)){n=Object.freeze(n.concat(e));for(let o=0;o<e.items.length;++o){let s=Bc(o,e.items[o],r,n);if(typeof s=="number")o=s-1;else{if(s===aa)return aa;s===ad&&(e.items.splice(o,1),o-=1)}}}else if(Ir.isPair(e)){n=Object.freeze(n.concat(e));let o=Bc("key",e.key,r,n);if(o===aa)return aa;o===ad&&(e.key=null);let s=Bc("value",e.value,r,n);if(s===aa)return aa;s===ad&&(e.value=null)}}return i}kq.visit=jm});var SE=I(Tq=>{"use strict";var Iq=Ye(),Nre=cd(),Lre={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},Fre=t=>t.replace(/[!,[\]{}]/g,e=>Lre[e]),Jr=class{constructor(e,r){this.marker=null,this.yaml=Object.assign({},Jr.defaultYaml,e),this.tags=Object.assign({},Jr.defaultTags,r)}clone(){let e=new Jr(this.yaml,this.tags);return e.marker=this.marker,e}atDocument(){let e=new Jr(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Jr.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Jr.defaultTags);break}return e}add(e,r){this.atNextDocument&&(this.yaml={explicit:Jr.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Jr.defaultTags),this.atNextDocument=!1);let n=e.trim().split(/[ \t]+/),i=n.shift();switch(i){case"%TAG":{if(n.length!==2&&(r(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;let[o,s]=n;return this.tags[o]=s,!0}case"%YAML":{if(this.yaml.explicit=!0,n.length<1)return r(0,"%YAML directive should contain exactly one part"),!1;let[o]=n;return o==="1.1"||o==="1.2"?(this.yaml.version=o,!0):(r(6,`Unsupported YAML version ${o}`,!0),!1)}default:return r(0,`Unknown directive ${i}`,!0),!1}}tagName(e,r){if(e==="!")return"!";if(e[0]!=="!")return r(`Not a valid tag: ${e}`),null;if(e[1]==="<"){let s=e.slice(2,-1);return s==="!"||s==="!!"?(r(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&r("Verbatim tags must end with a >"),s)}let[,n,i]=e.match(/^(.*!)([^!]*)$/);i||r(`The ${e} tag has no suffix`);let o=this.tags[n];return o?o+decodeURIComponent(i):n==="!"?e:(r(`Could not resolve tag: ${e}`),null)}tagString(e){for(let[r,n]of Object.entries(this.tags))if(e.startsWith(n))return r+Fre(e.substring(n.length));return e[0]==="!"?e:`!<${e}>`}toString(e){let r=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags),i;if(e&&n.length>0&&Iq.isNode(e.contents)){let o={};Nre.visit(e.contents,(s,a)=>{Iq.isNode(a)&&a.tag&&(o[a.tag]=!0)}),i=Object.keys(o)}else i=[];for(let[o,s]of n)o==="!!"&&s==="tag:yaml.org,2002:"||(!e||i.some(a=>a.startsWith(s)))&&r.push(`%TAG ${o} ${s}`);return r.join(`
`)}};Jr.defaultYaml={explicit:!1,version:"1.2"};Jr.defaultTags={"!!":"tag:yaml.org,2002:"};Tq.Directives=Jr});var Um=I(ld=>{"use strict";var Aq=Ye(),Mre=cd();function qre(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){let r=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(r)}return!0}function Dq(t){let e=new Set;return Mre.visit(t,{Value(r,n){n.anchor&&e.add(n.anchor)}}),e}function Rq(t,e){for(let r=1;;++r){let n=`${t}${r}`;if(!e.has(n))return n}}function $re(t,e){let r=[],n=new Map,i=null;return{onAnchor(o){r.push(o),i||(i=Dq(t));let s=Rq(e,i);return i.add(s),s},setAnchors(){for(let o of r){let s=n.get(o);if(typeof s=="object"&&s.anchor&&(Aq.isScalar(s.node)||Aq.isCollection(s.node)))s.node.anchor=s.anchor;else{let a=new Error("Failed to resolve repeated object (this should not happen)");throw a.source=o,a}}},sourceObjects:n}}ld.anchorIsValid=qre;ld.anchorNames=Dq;ld.createNodeAnchors=$re;ld.findNewAnchor=Rq});var dd=I(Lq=>{"use strict";var jre=Um(),Oq=cd(),ud=Ye(),Nq=class extends ud.NodeBase{constructor(e){super(ud.ALIAS);this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let r;return Oq.visit(e,{Node:(n,i)=>{if(i===this)return Oq.visit.BREAK;i.anchor===this.source&&(r=i)}}),r}toJSON(e,r){if(!r)return{source:this.source};let{anchors:n,doc:i,maxAliasCount:o}=r,s=this.resolve(i);if(!s){let c=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(c)}let a=n.get(s);if(!a||a.res===void 0){let c="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(c)}if(o>=0&&(a.count+=1,a.aliasCount===0&&(a.aliasCount=Bm(i,s,n)),a.count*a.aliasCount>o)){let c="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(c)}return a.res}toString(e,r,n){let i=`*${this.source}`;if(e){if(jre.anchorIsValid(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){let o=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(o)}if(e.implicitKey)return`${i} `}return i}};function Bm(t,e,r){if(ud.isAlias(e)){let n=e.resolve(t),i=r&&n&&r.get(n);return i?i.count*i.aliasCount:0}else if(ud.isCollection(e)){let n=0;for(let i of e.items){let o=Bm(t,i,r);o>n&&(n=o)}return n}else if(ud.isPair(e)){let n=Bm(t,e.key,r),i=Bm(t,e.value,r);return Math.max(n,i)}return 1}Lq.Alias=Nq});var Hc=I(Mq=>{"use strict";var Ure=Ye();function Fq(t,e,r){if(Array.isArray(t))return t.map((n,i)=>Fq(n,String(i),r));if(t&&typeof t.toJSON=="function"){if(!r||!Ure.hasAnchor(t))return t.toJSON(e,r);let n={aliasCount:0,count:1,res:void 0};r.anchors.set(t,n),r.onCreate=o=>{n.res=o,delete r.onCreate};let i=t.toJSON(e,r);return r.onCreate&&r.onCreate(i),i}return typeof t=="bigint"&&!(r&&r.keep)?Number(t):t}Mq.toJS=Fq});var kt=I(xE=>{"use strict";var qq=Ye(),Bre=Hc(),Hre=t=>!t||typeof t!="function"&&typeof t!="object",ca=class extends qq.NodeBase{constructor(e){super(qq.SCALAR);this.value=e}toJSON(e,r){return r&&r.keep?this.value:Bre.toJS(this.value,e,r)}toString(){return String(this.value)}};ca.BLOCK_FOLDED="BLOCK_FOLDED";ca.BLOCK_LITERAL="BLOCK_LITERAL";ca.PLAIN="PLAIN";ca.QUOTE_DOUBLE="QUOTE_DOUBLE";ca.QUOTE_SINGLE="QUOTE_SINGLE";xE.Scalar=ca;xE.isScalarValue=Hre});var fd=I(jq=>{"use strict";var Vre=dd(),la=Ye(),$q=kt(),Wre="tag:yaml.org,2002:";function Gre(t,e,r){if(e){let n=r.filter(o=>o.tag===e),i=n.find(o=>!o.format)||n[0];if(!i)throw new Error(`Tag ${e} not found`);return i}return r.find(n=>n.identify&&n.identify(t)&&!n.format)}function zre(t,e,r){var n,i;if(la.isDocument(t)&&(t=t.contents),la.isNode(t))return t;if(la.isPair(t)){let p=(i=(n=r.schema[la.MAP]).createNode)===null||i===void 0?void 0:i.call(n,r.schema,null,r);return p.items.push(t),p}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt=="function"&&t instanceof BigInt)&&(t=t.valueOf());let{aliasDuplicateObjects:o,onAnchor:s,onTagObj:a,schema:c,sourceObjects:l}=r,u;if(o&&t&&typeof t=="object"){if(u=l.get(t),u)return u.anchor||(u.anchor=s(t)),new Vre.Alias(u.anchor);u={anchor:null,node:null},l.set(t,u)}e&&e.startsWith("!!")&&(e=Wre+e.slice(2));let d=Gre(t,e,c.tags);if(!d){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){let p=new $q.Scalar(t);return u&&(u.node=p),p}d=t instanceof Map?c[la.MAP]:Symbol.iterator in Object(t)?c[la.SEQ]:c[la.MAP]}a&&(a(d),delete r.onTagObj);let f=(d==null?void 0:d.createNode)?d.createNode(r.schema,t,r):new $q.Scalar(t);return e&&(f.tag=e),u&&(u.node=f),f}jq.createNode=zre});var pd=I(Hm=>{"use strict";var Kre=fd(),Bn=Ye();function PE(t,e,r){let n=r;for(let i=e.length-1;i>=0;--i){let o=e[i];if(typeof o=="number"&&Number.isInteger(o)&&o>=0){let s=[];s[o]=n,n=s}else n=new Map([[o,n]])}return Kre.createNode(n,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}var Uq=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done,kE=class extends Bn.NodeBase{constructor(e,r){super(e);Object.defineProperty(this,"schema",{value:r,configurable:!0,enumerable:!1,writable:!0})}clone(e){let r=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(r.schema=e),r.items=r.items.map(n=>Bn.isNode(n)||Bn.isPair(n)?n.clone(e):n),this.range&&(r.range=this.range.slice()),r}addIn(e,r){if(Uq(e))this.add(r);else{let[n,...i]=e,o=this.get(n,!0);if(Bn.isCollection(o))o.addIn(i,r);else if(o===void 0&&this.schema)this.set(n,PE(this.schema,i,r));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`)}}deleteIn(e){let[r,...n]=e;if(n.length===0)return this.delete(r);let i=this.get(r,!0);if(Bn.isCollection(i))return i.deleteIn(n);throw new Error(`Expected YAML collection at ${r}. Remaining path: ${n}`)}getIn(e,r){let[n,...i]=e,o=this.get(n,!0);return i.length===0?!r&&Bn.isScalar(o)?o.value:o:Bn.isCollection(o)?o.getIn(i,r):void 0}hasAllNullValues(e){return this.items.every(r=>{if(!Bn.isPair(r))return!1;let n=r.value;return n==null||e&&Bn.isScalar(n)&&n.value==null&&!n.commentBefore&&!n.comment&&!n.tag})}hasIn(e){let[r,...n]=e;if(n.length===0)return this.has(r);let i=this.get(r,!0);return Bn.isCollection(i)?i.hasIn(n):!1}setIn(e,r){let[n,...i]=e;if(i.length===0)this.set(n,r);else{let o=this.get(n,!0);if(Bn.isCollection(o))o.setIn(i,r);else if(o===void 0&&this.schema)this.set(n,PE(this.schema,i,r));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`)}}};kE.maxFlowStringSingleLineLength=60;Hm.Collection=kE;Hm.collectionFromPath=PE;Hm.isEmptyPath=Uq});var hd=I(Vm=>{"use strict";var Yre=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function Bq(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}var Jre=(t,e,r)=>r.includes(`
`)?`
`+Bq(r,e):(t.endsWith(" ")?"":" ")+r;Vm.indentComment=Bq;Vm.lineComment=Jre;Vm.stringifyComment=Yre});var Vq=I(md=>{"use strict";var Qre="flow",IE="block",Wm="quoted";function Xre(t,e,r="flow",{indentAtStart:n,lineWidth:i=80,minContentWidth:o=20,onFold:s,onOverflow:a}={}){if(!i||i<0)return t;let c=Math.max(1+o,1+i-e.length);if(t.length<=c)return t;let l=[],u={},d=i-e.length;typeof n=="number"&&(n>i-Math.max(2,o)?l.push(0):d=i-n);let f,p,h=!1,m=-1,g=-1,v=-1;r===IE&&(m=Hq(t,m),m!==-1&&(d=m+c));for(let b;b=t[m+=1];){if(r===Wm&&b==="\\"){switch(g=m,t[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}v=m}if(b===`
`)r===IE&&(m=Hq(t,m)),d=m+c,f=void 0;else{if(b===" "&&p&&p!==" "&&p!==`
`&&p!=="	"){let C=t[m+1];C&&C!==" "&&C!==`
`&&C!=="	"&&(f=m)}if(m>=d)if(f)l.push(f),d=f+c,f=void 0;else if(r===Wm){for(;p===" "||p==="	";)p=b,b=t[m+=1],h=!0;let C=m>v+1?m-2:g-1;if(u[C])return t;l.push(C),u[C]=!0,d=C+c,f=void 0}else h=!0}p=b}if(h&&a&&a(),l.length===0)return t;s&&s();let w=t.slice(0,l[0]);for(let b=0;b<l.length;++b){let C=l[b],S=l[b+1]||t.length;C===0?w=`
${e}${t.slice(0,S)}`:(r===Wm&&u[C]&&(w+=`${t[C]}\\`),w+=`
${e}${t.slice(C+1,S)}`)}return w}function Hq(t,e){let r=t[e+1];for(;r===" "||r==="	";){do r=t[e+=1];while(r&&r!==`
`);r=t[e+1]}return e}md.FOLD_BLOCK=IE;md.FOLD_FLOW=Qre;md.FOLD_QUOTED=Wm;md.foldFlowLines=Xre});var yd=I(Wq=>{"use strict";var Ci=kt(),Bo=Vq(),Gm=t=>({indentAtStart:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),zm=t=>/^(%|---|\.\.\.)/m.test(t);function Zre(t,e,r){if(!e||e<0)return!1;let n=e-r,i=t.length;if(i<=n)return!1;for(let o=0,s=0;o<i;++o)if(t[o]===`
`){if(o-s>n)return!0;if(s=o+1,i-s<=n)return!1}return!0}function gd(t,e){let r=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return r;let{implicitKey:n}=e,i=e.options.doubleQuotedMinMultiLineLength,o=e.indent||(zm(t)?"  ":""),s="",a=0;for(let c=0,l=r[c];l;l=r[++c])if(l===" "&&r[c+1]==="\\"&&r[c+2]==="n"&&(s+=r.slice(a,c)+"\\ ",c+=1,a=c,l="\\"),l==="\\")switch(r[c+1]){case"u":{s+=r.slice(a,c);let u=r.substr(c+2,4);switch(u){case"0000":s+="\\0";break;case"0007":s+="\\a";break;case"000b":s+="\\v";break;case"001b":s+="\\e";break;case"0085":s+="\\N";break;case"00a0":s+="\\_";break;case"2028":s+="\\L";break;case"2029":s+="\\P";break;default:u.substr(0,2)==="00"?s+="\\x"+u.substr(2):s+=r.substr(c,6)}c+=5,a=c+1}break;case"n":if(n||r[c+2]==='"'||r.length<i)c+=1;else{for(s+=r.slice(a,c)+`

`;r[c+2]==="\\"&&r[c+3]==="n"&&r[c+4]!=='"';)s+=`
`,c+=2;s+=o,r[c+2]===" "&&(s+="\\"),c+=1,a=c+1}break;default:c+=1}return s=a?s+r.slice(a):r,n?s:Bo.foldFlowLines(s,o,Bo.FOLD_QUOTED,Gm(e))}function TE(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return gd(t,e);let r=e.indent||(zm(t)?"  ":""),n="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${r}`)+"'";return e.implicitKey?n:Bo.foldFlowLines(n,r,Bo.FOLD_FLOW,Gm(e))}function vd(t,e){let{singleQuote:r}=e.options,n;if(r===!1)n=gd;else{let i=t.includes('"'),o=t.includes("'");i&&!o?n=TE:o&&!i?n=gd:n=r?TE:gd}return n(t,e)}function Km({comment:t,type:e,value:r},n,i,o){let{blockQuote:s,commentString:a,lineWidth:c}=n.options;if(!s||/\n[\t ]+$/.test(r)||/^\s*$/.test(r))return vd(r,n);let l=n.indent||(n.forceBlockIndent||zm(r)?"  ":""),u=s==="literal"?!0:s==="folded"||e===Ci.Scalar.BLOCK_FOLDED?!1:e===Ci.Scalar.BLOCK_LITERAL?!0:!Zre(r,c,l.length);if(!r)return u?`|
`:`>
`;let d,f;for(f=r.length;f>0;--f){let P=r[f-1];if(P!==`
`&&P!=="	"&&P!==" ")break}let p=r.substring(f),h=p.indexOf(`
`);h===-1?d="-":r===p||h!==p.length-1?(d="+",o&&o()):d="",p&&(r=r.slice(0,-p.length),p[p.length-1]===`
`&&(p=p.slice(0,-1)),p=p.replace(/\n+(?!\n|$)/g,`$&${l}`));let m=!1,g,v=-1;for(g=0;g<r.length;++g){let P=r[g];if(P===" ")m=!0;else if(P===`
`)v=g;else break}let w=r.substring(0,v<g?v+1:g);w&&(r=r.substring(w.length),w=w.replace(/\n+/g,`$&${l}`));let C=(u?"|":">")+(m?l?"2":"1":"")+d;if(t&&(C+=" "+a(t.replace(/ ?[\r\n]+/g," ")),i&&i()),u)return r=r.replace(/\n+/g,`$&${l}`),`${C}
${l}${w}${r}${p}`;r=r.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${l}`);let S=Bo.foldFlowLines(`${w}${r}${p}`,l,Bo.FOLD_BLOCK,Gm(n));return`${C}
${l}${S}`}function ene(t,e,r,n){let{type:i,value:o}=t,{actualString:s,implicitKey:a,indent:c,inFlow:l}=e;if(a&&/[\n[\]{},]/.test(o)||l&&/[[\]{},]/.test(o))return vd(o,e);if(!o||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(o))return a||l||o.indexOf(`
`)===-1?vd(o,e):Km(t,e,r,n);if(!a&&!l&&i!==Ci.Scalar.PLAIN&&o.indexOf(`
`)!==-1)return Km(t,e,r,n);if(c===""&&zm(o))return e.forceBlockIndent=!0,Km(t,e,r,n);let u=o.replace(/\n+/g,`$&
${c}`);if(s){let d=h=>{var m;return h.default&&h.tag!=="tag:yaml.org,2002:str"&&((m=h.test)===null||m===void 0?void 0:m.test(u))},{compat:f,tags:p}=e.doc.schema;if(p.some(d)||(f==null?void 0:f.some(d)))return vd(o,e)}return a?u:Bo.foldFlowLines(u,c,Bo.FOLD_FLOW,Gm(e))}function tne(t,e,r,n){let{implicitKey:i,inFlow:o}=e,s=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)}),{type:a}=t;a!==Ci.Scalar.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(s.value)&&(a=Ci.Scalar.QUOTE_DOUBLE);let c=u=>{switch(u){case Ci.Scalar.BLOCK_FOLDED:case Ci.Scalar.BLOCK_LITERAL:return i||o?vd(s.value,e):Km(s,e,r,n);case Ci.Scalar.QUOTE_DOUBLE:return gd(s.value,e);case Ci.Scalar.QUOTE_SINGLE:return TE(s.value,e);case Ci.Scalar.PLAIN:return ene(s,e,r,n);default:return null}},l=c(a);if(l===null){let{defaultKeyType:u,defaultStringType:d}=e.options,f=i&&u||d;if(l=c(f),l===null)throw new Error(`Unsupported default string type ${f}`)}return l}Wq.stringifyString=tne});var Vc=I(AE=>{"use strict";var rne=Um(),Ho=Ye(),nne=hd(),ine=yd();function one(t,e){let r=Object.assign({blockQuote:!0,commentString:nne.stringifyComment,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e),n;switch(r.collectionStyle){case"block":n=!1;break;case"flow":n=!0;break;default:n=null}return{anchors:new Set,doc:t,indent:"",indentStep:typeof r.indent=="number"?" ".repeat(r.indent):"  ",inFlow:n,options:r}}function sne(t,e){if(e.tag){let i=t.filter(o=>o.tag===e.tag);if(i.length>0)return i.find(o=>o.format===e.format)||i[0]}let r,n;if(Ho.isScalar(e)){n=e.value;let i=t.filter(o=>o.identify&&o.identify(n));r=i.find(o=>o.format===e.format)||i.find(o=>!o.format)}else n=e,r=t.find(i=>i.nodeClass&&n instanceof i.nodeClass);if(!r){let i=n&&n.constructor?n.constructor.name:typeof n;throw new Error(`Tag not resolved for ${i} value`)}return r}function ane(t,e,{anchors:r,doc:n}){if(!n.directives)return"";let i=[],o=(Ho.isScalar(t)||Ho.isCollection(t))&&t.anchor;o&&rne.anchorIsValid(o)&&(r.add(o),i.push(`&${o}`));let s=t.tag||(e.default?null:e.tag);return s&&i.push(n.directives.tagString(s)),i.join(" ")}function cne(t,e,r,n){var i;if(Ho.isPair(t))return t.toString(e,r,n);if(Ho.isAlias(t)){if(e.doc.directives)return t.toString(e);if((i=e.resolvedAliases)===null||i===void 0?void 0:i.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let o,s=Ho.isNode(t)?t:e.doc.createNode(t,{onTagObj:l=>o=l});o||(o=sne(e.doc.schema.tags,s));let a=ane(s,o,e);a.length>0&&(e.indentAtStart=(e.indentAtStart||0)+a.length+1);let c=typeof o.stringify=="function"?o.stringify(s,e,r,n):Ho.isScalar(s)?ine.stringifyString(s,e,r,n):s.toString(e,r,n);return a?Ho.isScalar(s)||c[0]==="{"||c[0]==="["?`${a} ${c}`:`${a}
${e.indent}${c}`:c}AE.createStringifyContext=one;AE.stringify=cne});var Yq=I(Kq=>{"use strict";var Vo=Ye(),Gq=kt(),zq=Vc(),wd=hd();function lne({key:t,value:e},r,n,i){let{allNullValues:o,doc:s,indent:a,indentStep:c,options:{commentString:l,indentSeq:u,simpleKeys:d}}=r,f=Vo.isNode(t)&&t.comment||null;if(d){if(f)throw new Error("With simple keys, key nodes cannot have comments");if(Vo.isCollection(t)){let P="With simple keys, collection cannot be used as a key value";throw new Error(P)}}let p=!d&&(!t||f&&e==null&&!r.inFlow||Vo.isCollection(t)||(Vo.isScalar(t)?t.type===Gq.Scalar.BLOCK_FOLDED||t.type===Gq.Scalar.BLOCK_LITERAL:typeof t=="object"));r=Object.assign({},r,{allNullValues:!1,implicitKey:!p&&(d||!o),indent:a+c});let h=!1,m=!1,g=zq.stringify(t,r,()=>h=!0,()=>m=!0);if(!p&&!r.inFlow&&g.length>1024){if(d)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");p=!0}if(r.inFlow){if(o||e==null)return h&&n&&n(),p?`? ${g}`:g}else if(o&&!d||e==null&&p)return g=`? ${g}`,f&&!h?g+=wd.lineComment(g,r.indent,l(f)):m&&i&&i(),g;h&&(f=null),p?(f&&(g+=wd.lineComment(g,r.indent,l(f))),g=`? ${g}
${a}:`):(g=`${g}:`,f&&(g+=wd.lineComment(g,r.indent,l(f))));let v="",w=null;if(Vo.isNode(e)){if(e.spaceBefore&&(v=`
`),e.commentBefore){let P=l(e.commentBefore);v+=`
${wd.indentComment(P,r.indent)}`}w=e.comment}else e&&typeof e=="object"&&(e=s.createNode(e));r.implicitKey=!1,!p&&!f&&Vo.isScalar(e)&&(r.indentAtStart=g.length+1),m=!1,!u&&c.length>=2&&!r.inFlow&&!p&&Vo.isSeq(e)&&!e.flow&&!e.tag&&!e.anchor&&(r.indent=r.indent.substr(2));let b=!1,C=zq.stringify(e,r,()=>b=!0,()=>m=!0),S=" ";return v||f?S=C===""&&!r.inFlow?v:`${v}
${r.indent}`:!p&&Vo.isCollection(e)?(!(C[0]==="["||C[0]==="{")||C.includes(`
`))&&(S=`
${r.indent}`):(C===""||C[0]===`
`)&&(S=""),g+=S+C,r.inFlow?b&&n&&n():w&&!b?g+=wd.lineComment(g,r.indent,l(w)):m&&i&&i(),g}Kq.stringifyPair=lne});var RE=I(DE=>{"use strict";function une(t,...e){t==="debug"&&console.log(...e)}function dne(t,e){(t==="debug"||t==="warn")&&(typeof process!="undefined"&&process.emitWarning?process.emitWarning(e):console.warn(e))}DE.debug=une;DE.warn=dne});var LE=I(Qq=>{"use strict";var fne=RE(),pne=Vc(),Wc=Ye(),hne=kt(),OE=Hc(),Jq="<<";function mne(t,e,{key:r,value:n}){if(t&&t.doc.schema.merge&&gne(r))if(n=Wc.isAlias(n)?n.resolve(t.doc):n,Wc.isSeq(n))for(let i of n.items)NE(t,e,i);else if(Array.isArray(n))for(let i of n)NE(t,e,i);else NE(t,e,n);else{let i=OE.toJS(r,"",t);if(e instanceof Map)e.set(i,OE.toJS(n,i,t));else if(e instanceof Set)e.add(i);else{let o=vne(r,i,t),s=OE.toJS(n,o,t);o in e?Object.defineProperty(e,o,{value:s,writable:!0,enumerable:!0,configurable:!0}):e[o]=s}}return e}var gne=t=>t===Jq||Wc.isScalar(t)&&t.value===Jq&&(!t.type||t.type===hne.Scalar.PLAIN);function NE(t,e,r){let n=t&&Wc.isAlias(r)?r.resolve(t.doc):r;if(!Wc.isMap(n))throw new Error("Merge sources must be maps or map aliases");let i=n.toJSON(null,t,Map);for(let[o,s]of i)e instanceof Map?e.has(o)||e.set(o,s):e instanceof Set?e.add(o):Object.prototype.hasOwnProperty.call(e,o)||Object.defineProperty(e,o,{value:s,writable:!0,enumerable:!0,configurable:!0});return e}function vne(t,e,r){if(e===null)return"";if(typeof e!="object")return String(e);if(Wc.isNode(t)&&r&&r.doc){let n=pne.createStringifyContext(r.doc,{});n.anchors=new Set;for(let o of r.anchors.keys())n.anchors.add(o.anchor);n.inFlow=!0,n.inStringifyKey=!0;let i=t.toString(n);if(!r.mapKeyWarned){let o=JSON.stringify(i);o.length>40&&(o=o.substring(0,36)+'..."'),fne.warn(r.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${o}. Set mapAsMap: true to use object keys.`),r.mapKeyWarned=!0}return i}return JSON.stringify(e)}Qq.addPairToJSMap=mne});var Yi=I(FE=>{"use strict";var Xq=fd(),yne=Yq(),wne=LE(),Ym=Ye();function Cne(t,e,r){let n=Xq.createNode(t,void 0,r),i=Xq.createNode(e,void 0,r);return new Cd(n,i)}var Cd=class{constructor(e,r=null){Object.defineProperty(this,Ym.NODE_TYPE,{value:Ym.PAIR}),this.key=e,this.value=r}clone(e){let{key:r,value:n}=this;return Ym.isNode(r)&&(r=r.clone(e)),Ym.isNode(n)&&(n=n.clone(e)),new Cd(r,n)}toJSON(e,r){let n=r&&r.mapAsMap?new Map:{};return wne.addPairToJSMap(r,n,this)}toString(e,r,n){return e&&e.doc?yne.stringifyPair(this,e,r,n):JSON.stringify(this)}};FE.Pair=Cd;FE.createPair=Cne});var Jm=I(Zq=>{"use strict";var bne={intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"};Zq.defaultOptions=bne});var ME=I(t$=>{"use strict";var Ene=pd(),ua=Ye(),e$=Vc(),bd=hd();function _ne(t,e,r){var n;return(((n=e.inFlow)!==null&&n!==void 0?n:t.flow)?xne:Sne)(t,e,r)}function Sne({comment:t,items:e},r,{blockItemPrefix:n,flowChars:i,itemIndent:o,onChompKeep:s,onComment:a}){let{indent:c,options:{commentString:l}}=r,u=Object.assign({},r,{indent:o,type:null}),d=!1,f=[];for(let h=0;h<e.length;++h){let m=e[h],g=null;if(ua.isNode(m))!d&&m.spaceBefore&&f.push(""),Qm(r,f,m.commentBefore,d),m.comment&&(g=m.comment);else if(ua.isPair(m)){let w=ua.isNode(m.key)?m.key:null;w&&(!d&&w.spaceBefore&&f.push(""),Qm(r,f,w.commentBefore,d))}d=!1;let v=e$.stringify(m,u,()=>g=null,()=>d=!0);g&&(v+=bd.lineComment(v,o,l(g))),d&&g&&(d=!1),f.push(n+v)}let p;if(f.length===0)p=i.start+i.end;else{p=f[0];for(let h=1;h<f.length;++h){let m=f[h];p+=m?`
${c}${m}`:`
`}}return t?(p+=`
`+bd.indentComment(l(t),c),a&&a()):d&&s&&s(),p}function xne({comment:t,items:e},r,{flowChars:n,itemIndent:i,onComment:o}){let{indent:s,indentStep:a,options:{commentString:c}}=r;i+=a;let l=Object.assign({},r,{indent:i,inFlow:!0,type:null}),u=!1,d=0,f=[];for(let g=0;g<e.length;++g){let v=e[g],w=null;if(ua.isNode(v))v.spaceBefore&&f.push(""),Qm(r,f,v.commentBefore,!1),v.comment&&(w=v.comment);else if(ua.isPair(v)){let C=ua.isNode(v.key)?v.key:null;C&&(C.spaceBefore&&f.push(""),Qm(r,f,C.commentBefore,!1),C.comment&&(u=!0));let S=ua.isNode(v.value)?v.value:null;S?(S.comment&&(w=S.comment),S.commentBefore&&(u=!0)):v.value==null&&C&&C.comment&&(w=C.comment)}w&&(u=!0);let b=e$.stringify(v,l,()=>w=null);g<e.length-1&&(b+=","),w&&(b+=bd.lineComment(b,i,c(w))),!u&&(f.length>d||b.includes(`
`))&&(u=!0),f.push(b),d=f.length}let p,{start:h,end:m}=n;if(f.length===0)p=h+m;else if(u||(u=f.reduce((v,w)=>v+w.length+2,2)>Ene.Collection.maxFlowStringSingleLineLength),u){p=h;for(let g of f)p+=g?`
${a}${s}${g}`:`
`;p+=`
${s}${m}`}else p=`${h} ${f.join(" ")} ${m}`;return t&&(p+=bd.lineComment(p,c(t),s),o&&o()),p}function Qm({indent:t,options:{commentString:e}},r,n,i){if(n&&i&&(n=n.replace(/^\n+/,"")),n){let o=bd.indentComment(e(n),t);r.push(o.trimStart())}}t$.stringifyCollection=_ne});var da=I($E=>{"use strict";var Pne=ME(),kne=LE(),Ine=pd(),Wo=Ye(),qE=Yi(),Tne=kt();function Ed(t,e){let r=Wo.isScalar(e)?e.value:e;for(let n of t)if(Wo.isPair(n)&&(n.key===e||n.key===r||Wo.isScalar(n.key)&&n.key.value===r))return n}var r$=class extends Ine.Collection{constructor(e){super(Wo.MAP,e);this.items=[]}static get tagName(){return"tag:yaml.org,2002:map"}add(e,r){let n;Wo.isPair(e)?n=e:!e||typeof e!="object"||!("key"in e)?n=new qE.Pair(e,e.value):n=new qE.Pair(e.key,e.value);let i=Ed(this.items,n.key),o=this.schema&&this.schema.sortMapEntries;if(i){if(!r)throw new Error(`Key ${n.key} already set`);Wo.isScalar(i.value)&&Tne.isScalarValue(n.value)?i.value.value=n.value:i.value=n.value}else if(o){let s=this.items.findIndex(a=>o(n,a)<0);s===-1?this.items.push(n):this.items.splice(s,0,n)}else this.items.push(n)}delete(e){let r=Ed(this.items,e);return r?this.items.splice(this.items.indexOf(r),1).length>0:!1}get(e,r){let n=Ed(this.items,e),i=n&&n.value;return!r&&Wo.isScalar(i)?i.value:i}has(e){return!!Ed(this.items,e)}set(e,r){this.add(new qE.Pair(e,r),!0)}toJSON(e,r,n){let i=n?new n:r&&r.mapAsMap?new Map:{};r&&r.onCreate&&r.onCreate(i);for(let o of this.items)kne.addPairToJSMap(r,i,o);return i}toString(e,r,n){if(!e)return JSON.stringify(this);for(let i of this.items)if(!Wo.isPair(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),Pne.stringifyCollection(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:n,onComment:r})}};$E.YAMLMap=r$;$E.findPair=Ed});var Gc=I(i$=>{"use strict";var Ane=Ye(),Dne=Yi(),n$=da();function Rne(t,e,r){let{keepUndefined:n,replacer:i}=r,o=new n$.YAMLMap(t),s=(a,c)=>{if(typeof i=="function")c=i.call(e,a,c);else if(Array.isArray(i)&&!i.includes(a))return;(c!==void 0||n)&&o.items.push(Dne.createPair(a,c,r))};if(e instanceof Map)for(let[a,c]of e)s(a,c);else if(e&&typeof e=="object")for(let a of Object.keys(e))s(a,e[a]);return typeof t.sortMapEntries=="function"&&o.items.sort(t.sortMapEntries),o}var One={collection:"map",createNode:Rne,default:!0,nodeClass:n$.YAMLMap,tag:"tag:yaml.org,2002:map",resolve(t,e){return Ane.isMap(t)||e("Expected a mapping for this tag"),t}};i$.map=One});var fa=I(s$=>{"use strict";var Nne=ME(),Lne=pd(),Xm=Ye(),Fne=kt(),Mne=Hc(),o$=class extends Lne.Collection{constructor(e){super(Xm.SEQ,e);this.items=[]}static get tagName(){return"tag:yaml.org,2002:seq"}add(e){this.items.push(e)}delete(e){let r=Zm(e);return typeof r!="number"?!1:this.items.splice(r,1).length>0}get(e,r){let n=Zm(e);if(typeof n!="number")return;let i=this.items[n];return!r&&Xm.isScalar(i)?i.value:i}has(e){let r=Zm(e);return typeof r=="number"&&r<this.items.length}set(e,r){let n=Zm(e);if(typeof n!="number")throw new Error(`Expected a valid index, not ${e}.`);let i=this.items[n];Xm.isScalar(i)&&Fne.isScalarValue(r)?i.value=r:this.items[n]=r}toJSON(e,r){let n=[];r&&r.onCreate&&r.onCreate(n);let i=0;for(let o of this.items)n.push(Mne.toJS(o,String(i++),r));return n}toString(e,r,n){return e?Nne.stringifyCollection(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:n,onComment:r}):JSON.stringify(this)}};function Zm(t){let e=Xm.isScalar(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}s$.YAMLSeq=o$});var zc=I(c$=>{"use strict";var qne=fd(),$ne=Ye(),a$=fa();function jne(t,e,r){let{replacer:n}=r,i=new a$.YAMLSeq(t);if(e&&Symbol.iterator in Object(e)){let o=0;for(let s of e){if(typeof n=="function"){let a=e instanceof Set?s:String(o++);s=n.call(e,a,s)}i.items.push(qne.createNode(s,void 0,r))}}return i}var Une={collection:"seq",createNode:jne,default:!0,nodeClass:a$.YAMLSeq,tag:"tag:yaml.org,2002:seq",resolve(t,e){return $ne.isSeq(t)||e("Expected a sequence for this tag"),t}};c$.seq=Une});var _d=I(l$=>{"use strict";var Bne=yd(),Hne={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,r,n){return e=Object.assign({actualString:!0},e),Bne.stringifyString(t,e,r,n)}};l$.string=Hne});var eg=I(f$=>{"use strict";var u$=kt(),d$={identify:t=>t==null,createNode:()=>new u$.Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new u$.Scalar(null),stringify:({source:t},e)=>t&&d$.test.test(t)?t:e.options.nullStr};f$.nullTag=d$});var jE=I(h$=>{"use strict";var Vne=kt(),p$={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new Vne.Scalar(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},r){if(t&&p$.test.test(t)){let n=t[0]==="t"||t[0]==="T";if(e===n)return t}return e?r.options.trueStr:r.options.falseStr}};h$.boolTag=p$});var Kc=I(m$=>{"use strict";function Wne({format:t,minFractionDigits:e,tag:r,value:n}){if(typeof n=="bigint")return String(n);let i=typeof n=="number"?n:Number(n);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let o=JSON.stringify(n);if(!t&&e&&(!r||r==="tag:yaml.org,2002:float")&&/^\d/.test(o)){let s=o.indexOf(".");s<0&&(s=o.length,o+=".");let a=e-(o.length-s-1);for(;a-- >0;)o+="0"}return o}m$.stringifyNumber=Wne});var BE=I(tg=>{"use strict";var Gne=kt(),UE=Kc(),zne={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:UE.stringifyNumber},Kne={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){let e=Number(t.value);return isFinite(e)?e.toExponential():UE.stringifyNumber(t)}},Yne={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){let e=new Gne.Scalar(parseFloat(t)),r=t.indexOf(".");return r!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-r-1),e},stringify:UE.stringifyNumber};tg.float=Yne;tg.floatExp=Kne;tg.floatNaN=zne});var VE=I(ng=>{"use strict";var g$=Kc(),rg=t=>typeof t=="bigint"||Number.isInteger(t),HE=(t,e,r,{intAsBigInt:n})=>n?BigInt(t):parseInt(t.substring(e),r);function v$(t,e,r){let{value:n}=t;return rg(n)&&n>=0?r+n.toString(e):g$.stringifyNumber(t)}var Jne={identify:t=>rg(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,r)=>HE(t,2,8,r),stringify:t=>v$(t,8,"0o")},Qne={identify:rg,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,r)=>HE(t,0,10,r),stringify:g$.stringifyNumber},Xne={identify:t=>rg(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,r)=>HE(t,2,16,r),stringify:t=>v$(t,16,"0x")};ng.int=Qne;ng.intHex=Xne;ng.intOct=Jne});var w$=I(y$=>{"use strict";var Zne=Gc(),eie=eg(),tie=zc(),rie=_d(),nie=jE(),WE=BE(),GE=VE(),iie=[Zne.map,tie.seq,rie.string,eie.nullTag,nie.boolTag,GE.intOct,GE.int,GE.intHex,WE.floatNaN,WE.floatExp,WE.float];y$.schema=iie});var E$=I(b$=>{"use strict";var oie=kt(),sie=Gc(),aie=zc();function C$(t){return typeof t=="bigint"||Number.isInteger(t)}var ig=({value:t})=>JSON.stringify(t),cie=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:ig},{identify:t=>t==null,createNode:()=>new oie.Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:ig},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:t=>t==="true",stringify:ig},{identify:C$,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:r})=>r?BigInt(t):parseInt(t,10),stringify:({value:t})=>C$(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:ig}],lie={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},uie=[sie.map,aie.seq].concat(cie,lie);b$.schema=uie});var KE=I(_$=>{"use strict";var zE=kt(),die=yd(),fie={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof Buffer=="function")return Buffer.from(t,"base64");if(typeof atob=="function"){let r=atob(t.replace(/[\n\r]/g,"")),n=new Uint8Array(r.length);for(let i=0;i<r.length;++i)n[i]=r.charCodeAt(i);return n}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:r},n,i,o){let s=r,a;if(typeof Buffer=="function")a=s instanceof Buffer?s.toString("base64"):Buffer.from(s.buffer).toString("base64");else if(typeof btoa=="function"){let c="";for(let l=0;l<s.length;++l)c+=String.fromCharCode(s[l]);a=btoa(c)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e||(e=zE.Scalar.BLOCK_LITERAL),e!==zE.Scalar.QUOTE_DOUBLE){let c=Math.max(n.options.lineWidth-n.indent.length,n.options.minContentWidth),l=Math.ceil(a.length/c),u=new Array(l);for(let d=0,f=0;d<l;++d,f+=c)u[d]=a.substr(f,c);a=u.join(e===zE.Scalar.BLOCK_LITERAL?`
`:" ")}return die.stringifyString({comment:t,type:e,value:a},n,i,o)}};_$.binary=fie});var ag=I(sg=>{"use strict";var og=Ye(),YE=Yi(),pie=kt(),hie=fa();function S$(t,e){if(og.isSeq(t))for(let r=0;r<t.items.length;++r){let n=t.items[r];if(!og.isPair(n)){if(og.isMap(n)){n.items.length>1&&e("Each pair must have its own sequence indicator");let i=n.items[0]||new YE.Pair(new pie.Scalar(null));if(n.commentBefore&&(i.key.commentBefore=i.key.commentBefore?`${n.commentBefore}
${i.key.commentBefore}`:n.commentBefore),n.comment){let o=i.value||i.key;o.comment=o.comment?`${n.comment}
${o.comment}`:n.comment}n=i}t.items[r]=og.isPair(n)?n:new YE.Pair(n)}}else e("Expected a sequence for this tag");return t}function x$(t,e,r){let{replacer:n}=r,i=new hie.YAMLSeq(t);i.tag="tag:yaml.org,2002:pairs";let o=0;if(e&&Symbol.iterator in Object(e))for(let s of e){typeof n=="function"&&(s=n.call(e,String(o++),s));let a,c;if(Array.isArray(s))if(s.length===2)a=s[0],c=s[1];else throw new TypeError(`Expected [key, value] tuple: ${s}`);else if(s&&s instanceof Object){let l=Object.keys(s);if(l.length===1)a=l[0],c=s[a];else throw new TypeError(`Expected { key: value } tuple: ${s}`)}else a=s;i.items.push(YE.createPair(a,c,r))}return i}var mie={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:S$,createNode:x$};sg.createPairs=x$;sg.pairs=mie;sg.resolvePairs=S$});var XE=I(QE=>{"use strict";var gie=fa(),JE=Hc(),P$=Ye(),Sd=da(),k$=ag(),Go=class extends gie.YAMLSeq{constructor(){super();this.add=Sd.YAMLMap.prototype.add.bind(this),this.delete=Sd.YAMLMap.prototype.delete.bind(this),this.get=Sd.YAMLMap.prototype.get.bind(this),this.has=Sd.YAMLMap.prototype.has.bind(this),this.set=Sd.YAMLMap.prototype.set.bind(this),this.tag=Go.tag}toJSON(e,r){if(!r)return super.toJSON(e);let n=new Map;r&&r.onCreate&&r.onCreate(n);for(let i of this.items){let o,s;if(P$.isPair(i)?(o=JE.toJS(i.key,"",r),s=JE.toJS(i.value,o,r)):o=JE.toJS(i,"",r),n.has(o))throw new Error("Ordered maps must not include duplicate keys");n.set(o,s)}return n}};Go.tag="tag:yaml.org,2002:omap";var vie={collection:"seq",identify:t=>t instanceof Map,nodeClass:Go,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){let r=k$.resolvePairs(t,e),n=[];for(let{key:i}of r.items)P$.isScalar(i)&&(n.includes(i.value)?e(`Ordered maps must not include duplicate keys: ${i.value}`):n.push(i.value));return Object.assign(new Go,r)},createNode(t,e,r){let n=k$.createPairs(t,e,r),i=new Go;return i.items=n.items,i}};QE.YAMLOMap=Go;QE.omap=vie});var R$=I(ZE=>{"use strict";var I$=kt();function T$({value:t,source:e},r){return e&&(t?A$:D$).test.test(e)?e:t?r.options.trueStr:r.options.falseStr}var A$={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new I$.Scalar(!0),stringify:T$},D$={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new I$.Scalar(!1),stringify:T$};ZE.falseTag=D$;ZE.trueTag=A$});var O$=I(cg=>{"use strict";var yie=kt(),e0=Kc(),wie={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:e0.stringifyNumber},Cie={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){let e=Number(t.value);return isFinite(e)?e.toExponential():e0.stringifyNumber(t)}},bie={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){let e=new yie.Scalar(parseFloat(t.replace(/_/g,""))),r=t.indexOf(".");if(r!==-1){let n=t.substring(r+1).replace(/_/g,"");n[n.length-1]==="0"&&(e.minFractionDigits=n.length)}return e},stringify:e0.stringifyNumber};cg.float=bie;cg.floatExp=Cie;cg.floatNaN=wie});var L$=I(Pd=>{"use strict";var N$=Kc(),xd=t=>typeof t=="bigint"||Number.isInteger(t);function lg(t,e,r,{intAsBigInt:n}){let i=t[0];if((i==="-"||i==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),n){switch(r){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}let s=BigInt(t);return i==="-"?BigInt(-1)*s:s}let o=parseInt(t,r);return i==="-"?-1*o:o}function t0(t,e,r){let{value:n}=t;if(xd(n)){let i=n.toString(e);return n<0?"-"+r+i.substr(1):r+i}return N$.stringifyNumber(t)}var Eie={identify:xd,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,r)=>lg(t,2,2,r),stringify:t=>t0(t,2,"0b")},_ie={identify:xd,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,r)=>lg(t,1,8,r),stringify:t=>t0(t,8,"0")},Sie={identify:xd,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,r)=>lg(t,0,10,r),stringify:N$.stringifyNumber},xie={identify:xd,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,r)=>lg(t,2,16,r),stringify:t=>t0(t,16,"0x")};Pd.int=Sie;Pd.intBin=Eie;Pd.intHex=xie;Pd.intOct=_ie});var n0=I(r0=>{"use strict";var ug=Ye(),dg=Yi(),fg=da(),zo=class extends fg.YAMLMap{constructor(e){super(e);this.tag=zo.tag}add(e){let r;ug.isPair(e)?r=e:typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?r=new dg.Pair(e.key,null):r=new dg.Pair(e,null),fg.findPair(this.items,r.key)||this.items.push(r)}get(e,r){let n=fg.findPair(this.items,e);return!r&&ug.isPair(n)?ug.isScalar(n.key)?n.key.value:n.key:n}set(e,r){if(typeof r!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof r}`);let n=fg.findPair(this.items,e);n&&!r?this.items.splice(this.items.indexOf(n),1):!n&&r&&this.items.push(new dg.Pair(e))}toJSON(e,r){return super.toJSON(e,r,Set)}toString(e,r,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),r,n);throw new Error("Set items must all have null values")}};zo.tag="tag:yaml.org,2002:set";var Pie={collection:"map",identify:t=>t instanceof Set,nodeClass:zo,default:!1,tag:"tag:yaml.org,2002:set",resolve(t,e){if(ug.isMap(t)){if(t.hasAllNullValues(!0))return Object.assign(new zo,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t},createNode(t,e,r){let{replacer:n}=r,i=new zo(t);if(e&&Symbol.iterator in Object(e))for(let o of e)typeof n=="function"&&(o=n.call(e,o,o)),i.items.push(dg.createPair(o,null,r));return i}};r0.YAMLSet=zo;r0.set=Pie});var o0=I(pg=>{"use strict";var kie=Kc();function i0(t,e){let r=t[0],n=r==="-"||r==="+"?t.substring(1):t,i=s=>e?BigInt(s):Number(s),o=n.replace(/_/g,"").split(":").reduce((s,a)=>s*i(60)+i(a),i(0));return r==="-"?i(-1)*o:o}function F$(t){let{value:e}=t,r=s=>s;if(typeof e=="bigint")r=s=>BigInt(s);else if(isNaN(e)||!isFinite(e))return kie.stringifyNumber(t);let n="";e<0&&(n="-",e*=r(-1));let i=r(60),o=[e%i];return e<60?o.unshift(0):(e=(e-o[0])/i,o.unshift(e%i),e>=60&&(e=(e-o[0])/i,o.unshift(e))),n+o.map(s=>s<10?"0"+String(s):String(s)).join(":").replace(/000000\d*$/,"")}var Iie={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:r})=>i0(t,r),stringify:F$},Tie={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>i0(t,!1),stringify:F$},M$={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){let e=t.match(M$.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");let[,r,n,i,o,s,a]=e.map(Number),c=e[7]?Number((e[7]+"00").substr(1,3)):0,l=Date.UTC(r,n-1,i,o||0,s||0,a||0,c),u=e[8];if(u&&u!=="Z"){let d=i0(u,!1);Math.abs(d)<30&&(d*=60),l-=6e4*d}return new Date(l)},stringify:({value:t})=>t.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")};pg.floatTime=Tie;pg.intTime=Iie;pg.timestamp=M$});var j$=I($$=>{"use strict";var Aie=Gc(),Die=eg(),Rie=zc(),Oie=_d(),Nie=KE(),q$=R$(),s0=O$(),hg=L$(),Lie=XE(),Fie=ag(),Mie=n0(),a0=o0(),qie=[Aie.map,Rie.seq,Oie.string,Die.nullTag,q$.trueTag,q$.falseTag,hg.intBin,hg.intOct,hg.int,hg.intHex,s0.floatNaN,s0.floatExp,s0.float,Nie.binary,Lie.omap,Fie.pairs,Mie.set,a0.intTime,a0.floatTime,a0.timestamp];$$.schema=qie});var J$=I(u0=>{"use strict";var U$=Gc(),$ie=eg(),B$=zc(),jie=_d(),Uie=jE(),c0=BE(),l0=VE(),Bie=w$(),Hie=E$(),H$=KE(),V$=XE(),W$=ag(),G$=j$(),z$=n0(),mg=o0(),K$=new Map([["core",Bie.schema],["failsafe",[U$.map,B$.seq,jie.string]],["json",Hie.schema],["yaml11",G$.schema],["yaml-1.1",G$.schema]]),Y$={binary:H$.binary,bool:Uie.boolTag,float:c0.float,floatExp:c0.floatExp,floatNaN:c0.floatNaN,floatTime:mg.floatTime,int:l0.int,intHex:l0.intHex,intOct:l0.intOct,intTime:mg.intTime,map:U$.map,null:$ie.nullTag,omap:V$.omap,pairs:W$.pairs,seq:B$.seq,set:z$.set,timestamp:mg.timestamp},Vie={"tag:yaml.org,2002:binary":H$.binary,"tag:yaml.org,2002:omap":V$.omap,"tag:yaml.org,2002:pairs":W$.pairs,"tag:yaml.org,2002:set":z$.set,"tag:yaml.org,2002:timestamp":mg.timestamp};function Wie(t,e){let r=K$.get(e);if(!r)if(Array.isArray(t))r=[];else{let n=Array.from(K$.keys()).filter(i=>i!=="yaml11").map(i=>JSON.stringify(i)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${n} or define customTags array`)}if(Array.isArray(t))for(let n of t)r=r.concat(n);else typeof t=="function"&&(r=t(r.slice()));return r.map(n=>{if(typeof n!="string")return n;let i=Y$[n];if(i)return i;let o=Object.keys(Y$).map(s=>JSON.stringify(s)).join(", ");throw new Error(`Unknown custom tag "${n}"; use one of ${o}`)})}u0.coreKnownTags=Vie;u0.getTags=Wie});var f0=I(Q$=>{"use strict";var d0=Ye(),Gie=Gc(),zie=zc(),Kie=_d(),gg=J$(),Yie=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0,vg=class{constructor({compat:e,customTags:r,merge:n,resolveKnownTags:i,schema:o,sortMapEntries:s,toStringDefaults:a}){this.compat=Array.isArray(e)?gg.getTags(e,"compat"):e?gg.getTags(null,e):null,this.merge=!!n,this.name=typeof o=="string"&&o||"core",this.knownTags=i?gg.coreKnownTags:{},this.tags=gg.getTags(r,this.name),this.toStringOptions=a||null,Object.defineProperty(this,d0.MAP,{value:Gie.map}),Object.defineProperty(this,d0.SCALAR,{value:Kie.string}),Object.defineProperty(this,d0.SEQ,{value:zie.seq}),this.sortMapEntries=s===!0?Yie:s||null}clone(){let e=Object.create(vg.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}};Q$.Schema=vg});var Z$=I(X$=>{"use strict";var Jie=Ye(),p0=Vc(),yg=hd();function Qie(t,e){let r=[],n=e.directives===!0;if(e.directives!==!1&&t.directives){let l=t.directives.toString(t);l?(r.push(l),n=!0):t.directives.marker&&(n=!0)}n&&r.push("---");let i=p0.createStringifyContext(t,e),{commentString:o}=i.options;if(t.commentBefore){r.length!==1&&r.unshift("");let l=o(t.commentBefore);r.unshift(yg.indentComment(l,""))}let s=!1,a=null;if(t.contents){if(Jie.isNode(t.contents)){if(t.contents.spaceBefore&&n&&r.push(""),t.contents.commentBefore){let d=o(t.contents.commentBefore);r.push(yg.indentComment(d,""))}i.forceBlockIndent=!!t.comment,a=t.contents.comment}let l=a?void 0:()=>s=!0,u=p0.stringify(t.contents,i,()=>a=null,l);a&&(u+=yg.lineComment(u,"",o(a))),(u[0]==="|"||u[0]===">")&&r[r.length-1]==="---"?r[r.length-1]=`--- ${u}`:r.push(u)}else r.push(p0.stringify(t.contents,i));let c=t.comment;return c&&s&&(c=c.replace(/^\n+/,"")),c&&((!s||a)&&r[r.length-1]!==""&&r.push(""),r.push(yg.indentComment(o(c),""))),r.join(`
`)+`
`}X$.stringifyDocument=Qie});var tj=I(ej=>{"use strict";function kd(t,e,r,n){if(n&&typeof n=="object")if(Array.isArray(n))for(let i=0,o=n.length;i<o;++i){let s=n[i],a=kd(t,n,String(i),s);a===void 0?delete n[i]:a!==s&&(n[i]=a)}else if(n instanceof Map)for(let i of Array.from(n.keys())){let o=n.get(i),s=kd(t,n,i,o);s===void 0?n.delete(i):s!==o&&n.set(i,s)}else if(n instanceof Set)for(let i of Array.from(n)){let o=kd(t,n,i,i);o===void 0?n.delete(i):o!==i&&(n.delete(i),n.add(o))}else for(let[i,o]of Object.entries(n)){let s=kd(t,n,i,o);s===void 0?delete n[i]:s!==o&&(n[i]=s)}return t.call(e,r,n)}ej.applyReviver=kd});var Id=I(rj=>{"use strict";var Xie=dd(),Yc=pd(),En=Ye(),Zie=Yi(),eoe=Hc(),toe=Jm(),roe=f0(),noe=Vc(),ioe=Z$(),h0=Um(),ooe=tj(),soe=fd(),m0=SE(),wg=class{constructor(e,r,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,En.NODE_TYPE,{value:En.DOC});let i=null;typeof r=="function"||Array.isArray(r)?i=r:n===void 0&&r&&(n=r,r=void 0);let o=Object.assign({},toe.defaultOptions,n);this.options=o;let{version:s}=o;(n==null?void 0:n.directives)?(this.directives=n.directives.atDocument(),this.directives.yaml.explicit&&(s=this.directives.yaml.version)):this.directives=new m0.Directives({version:s}),this.setSchema(s,n),e===void 0?this.contents=null:this.contents=this.createNode(e,i,n)}clone(){let e=Object.create(wg.prototype,{[En.NODE_TYPE]:{value:En.DOC}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=En.isNode(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){Jc(this.contents)&&this.contents.add(e)}addIn(e,r){Jc(this.contents)&&this.contents.addIn(e,r)}createAlias(e,r){if(!e.anchor){let n=h0.anchorNames(this);e.anchor=!r||n.has(r)?h0.findNewAnchor(r||"a",n):r}return new Xie.Alias(e.anchor)}createNode(e,r,n){let i;if(typeof r=="function")e=r.call({"":e},"",e),i=r;else if(Array.isArray(r)){let g=w=>typeof w=="number"||w instanceof String||w instanceof Number,v=r.filter(g).map(String);v.length>0&&(r=r.concat(v)),i=r}else n===void 0&&r&&(n=r,r=void 0);let{aliasDuplicateObjects:o,anchorPrefix:s,flow:a,keepUndefined:c,onTagObj:l,tag:u}=n||{},{onAnchor:d,setAnchors:f,sourceObjects:p}=h0.createNodeAnchors(this,s||"a"),h={aliasDuplicateObjects:o!=null?o:!0,keepUndefined:c!=null?c:!1,onAnchor:d,onTagObj:l,replacer:i,schema:this.schema,sourceObjects:p},m=soe.createNode(e,u,h);return a&&En.isCollection(m)&&(m.flow=!0),f(),m}createPair(e,r,n={}){let i=this.createNode(e,null,n),o=this.createNode(r,null,n);return new Zie.Pair(i,o)}delete(e){return Jc(this.contents)?this.contents.delete(e):!1}deleteIn(e){return Yc.isEmptyPath(e)?this.contents==null?!1:(this.contents=null,!0):Jc(this.contents)?this.contents.deleteIn(e):!1}get(e,r){return En.isCollection(this.contents)?this.contents.get(e,r):void 0}getIn(e,r){return Yc.isEmptyPath(e)?!r&&En.isScalar(this.contents)?this.contents.value:this.contents:En.isCollection(this.contents)?this.contents.getIn(e,r):void 0}has(e){return En.isCollection(this.contents)?this.contents.has(e):!1}hasIn(e){return Yc.isEmptyPath(e)?this.contents!==void 0:En.isCollection(this.contents)?this.contents.hasIn(e):!1}set(e,r){this.contents==null?this.contents=Yc.collectionFromPath(this.schema,[e],r):Jc(this.contents)&&this.contents.set(e,r)}setIn(e,r){Yc.isEmptyPath(e)?this.contents=r:this.contents==null?this.contents=Yc.collectionFromPath(this.schema,Array.from(e),r):Jc(this.contents)&&this.contents.setIn(e,r)}setSchema(e,r={}){typeof e=="number"&&(e=String(e));let n;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new m0.Directives({version:"1.1"}),n={merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":this.directives?this.directives.yaml.version="1.2":this.directives=new m0.Directives({version:"1.2"}),n={merge:!1,resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,n=null;break;default:{let i=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${i}`)}}if(r.schema instanceof Object)this.schema=r.schema;else if(n)this.schema=new roe.Schema(Object.assign(n,r));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:r,mapAsMap:n,maxAliasCount:i,onAnchor:o,reviver:s}={}){let a={anchors:new Map,doc:this,keep:!e,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100,stringify:noe.stringify},c=eoe.toJS(this.contents,r||"",a);if(typeof o=="function")for(let{count:l,res:u}of a.anchors.values())o(u,l);return typeof s=="function"?ooe.applyReviver(s,{"":c},"",c):c}toJSON(e,r){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:r})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){let r=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${r}`)}return ioe.stringifyDocument(this,e)}};function Jc(t){if(En.isCollection(t))return!0;throw new Error("Expected a YAML collection as document contents")}rj.Document=wg});var Ad=I(Td=>{"use strict";var Cg=class extends Error{constructor(e,r,n,i){super();this.name=e,this.code=n,this.message=i,this.pos=r}},nj=class extends Cg{constructor(e,r,n){super("YAMLParseError",e,r,n)}},ij=class extends Cg{constructor(e,r,n){super("YAMLWarning",e,r,n)}},aoe=(t,e)=>r=>{if(r.pos[0]===-1)return;r.linePos=r.pos.map(a=>e.linePos(a));let{line:n,col:i}=r.linePos[0];r.message+=` at line ${n}, column ${i}`;let o=i-1,s=t.substring(e.lineStarts[n-1],e.lineStarts[n]).replace(/[\n\r]+$/,"");if(o>=60&&s.length>80){let a=Math.min(o-39,s.length-79);s="\u2026"+s.substring(a),o-=a-1}if(s.length>80&&(s=s.substring(0,79)+"\u2026"),n>1&&/^ *$/.test(s.substring(0,o))){let a=t.substring(e.lineStarts[n-2],e.lineStarts[n-1]);a.length>80&&(a=a.substring(0,79)+`\u2026
`),s=a+s}if(/[^ ]/.test(s)){let a=1,c=r.linePos[1];c&&c.line===n&&c.col>i&&(a=Math.min(c.col-i,80-o));let l=" ".repeat(o)+"^".repeat(a);r.message+=`:

${s}
${l}
`}};Td.YAMLError=Cg;Td.YAMLParseError=nj;Td.YAMLWarning=ij;Td.prettifyError=aoe});var Dd=I(oj=>{"use strict";function coe(t,{flow:e,indicator:r,next:n,offset:i,onError:o,startOnNewline:s}){let a=!1,c=s,l=s,u="",d="",f=!1,p=!1,h=null,m=null,g=null,v=null,w=null;for(let S of t)switch(p&&(S.type!=="space"&&S.type!=="newline"&&S.type!=="comma"&&o(S.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),p=!1),S.type){case"space":!e&&c&&r!=="doc-start"&&S.source[0]==="	"&&o(S,"TAB_AS_INDENT","Tabs are not allowed as indentation"),l=!0;break;case"comment":{l||o(S,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let P=S.source.substring(1)||" ";u?u+=d+P:u=P,d="",c=!1;break}case"newline":c?u?u+=S.source:a=!0:d+=S.source,c=!0,f=!0,l=!0;break;case"anchor":h&&o(S,"MULTIPLE_ANCHORS","A node can have at most one anchor"),h=S,w===null&&(w=S.offset),c=!1,l=!1,p=!0;break;case"tag":{m&&o(S,"MULTIPLE_TAGS","A node can have at most one tag"),m=S,w===null&&(w=S.offset),c=!1,l=!1,p=!0;break}case r:(h||m)&&o(S,"BAD_PROP_ORDER",`Anchors and tags must be after the ${S.source} indicator`),v&&o(S,"UNEXPECTED_TOKEN",`Unexpected ${S.source} in ${e||"collection"}`),v=S,c=!1,l=!1;break;case"comma":if(e){g&&o(S,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),g=S,c=!1,l=!1;break}default:o(S,"UNEXPECTED_TOKEN",`Unexpected ${S.type} token`),c=!1,l=!1}let b=t[t.length-1],C=b?b.offset+b.source.length:i;return p&&n&&n.type!=="space"&&n.type!=="newline"&&n.type!=="comma"&&(n.type!=="scalar"||n.source!=="")&&o(n.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:g,found:v,spaceBefore:a,comment:u,hasNewline:f,anchor:h,tag:m,end:C,start:w!=null?w:C}}oj.resolveProps=coe});var bg=I(sj=>{"use strict";function g0(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(let e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(let e of t.items){for(let r of e.start)if(r.type==="newline")return!0;if(e.sep){for(let r of e.sep)if(r.type==="newline")return!0}if(g0(e.key)||g0(e.value))return!0}return!1;default:return!0}}sj.containsNewline=g0});var v0=I(aj=>{"use strict";var loe=bg();function uoe(t,e,r){if((e==null?void 0:e.type)==="flow-collection"){let n=e.end[0];n.indent===t&&(n.source==="]"||n.source==="}")&&loe.containsNewline(e)&&r(n,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}aj.flowIndentCheck=uoe});var y0=I(lj=>{"use strict";var cj=Ye();function doe(t,e,r){let{uniqueKeys:n}=t.options;if(n===!1)return!1;let i=typeof n=="function"?n:(o,s)=>o===s||cj.isScalar(o)&&cj.isScalar(s)&&o.value===s.value&&!(o.value==="<<"&&t.schema.merge);return e.some(o=>i(o.key,r))}lj.mapIncludes=doe});var mj=I(hj=>{"use strict";var uj=Yi(),foe=da(),dj=Dd(),poe=bg(),fj=v0(),hoe=y0(),pj="All mapping items must start at the same column";function moe({composeNode:t,composeEmptyNode:e},r,n,i){var o;let s=new foe.YAMLMap(r.schema);r.atRoot&&(r.atRoot=!1);let a=n.offset;for(let c of n.items){let{start:l,key:u,sep:d,value:f}=c,p=dj.resolveProps(l,{indicator:"explicit-key-ind",next:u||(d==null?void 0:d[0]),offset:a,onError:i,startOnNewline:!0}),h=!p.found;if(h){if(u&&(u.type==="block-seq"?i(a,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in u&&u.indent!==n.indent&&i(a,"BAD_INDENT",pj)),!p.anchor&&!p.tag&&!d){p.comment&&(s.comment?s.comment+=`
`+p.comment:s.comment=p.comment);continue}}else((o=p.found)===null||o===void 0?void 0:o.indent)!==n.indent&&i(a,"BAD_INDENT",pj);h&&poe.containsNewline(u)&&i(u,"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line");let m=p.end,g=u?t(r,u,p,i):e(r,m,l,null,p,i);r.schema.compat&&fj.flowIndentCheck(n.indent,u,i),hoe.mapIncludes(r,s.items,g)&&i(m,"DUPLICATE_KEY","Map keys must be unique");let v=dj.resolveProps(d||[],{indicator:"map-value-ind",next:f,offset:g.range[2],onError:i,startOnNewline:!u||u.type==="block-scalar"});if(a=v.end,v.found){h&&((f==null?void 0:f.type)==="block-map"&&!v.hasNewline&&i(a,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),r.options.strict&&p.start<v.found.offset-1024&&i(g.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));let w=f?t(r,f,v,i):e(r,a,d,null,v,i);r.schema.compat&&fj.flowIndentCheck(n.indent,f,i),a=w.range[2];let b=new uj.Pair(g,w);r.options.keepSourceTokens&&(b.srcToken=c),s.items.push(b)}else{h&&i(g.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),v.comment&&(g.comment?g.comment+=`
`+v.comment:g.comment=v.comment);let w=new uj.Pair(g);r.options.keepSourceTokens&&(w.srcToken=c),s.items.push(w)}}return s.range=[n.offset,a,a],s}hj.resolveBlockMap=moe});var vj=I(gj=>{"use strict";var goe=fa(),voe=Dd(),yoe=v0();function woe({composeNode:t,composeEmptyNode:e},r,n,i){let o=new goe.YAMLSeq(r.schema);r.atRoot&&(r.atRoot=!1);let s=n.offset;for(let{start:a,value:c}of n.items){let l=voe.resolveProps(a,{indicator:"seq-item-ind",next:c,offset:s,onError:i,startOnNewline:!0});if(s=l.end,!l.found)if(l.anchor||l.tag||c)c&&c.type==="block-seq"?i(s,"BAD_INDENT","All sequence items must start at the same column"):i(s,"MISSING_CHAR","Sequence item without - indicator");else{l.comment&&(o.comment=l.comment);continue}let u=c?t(r,c,l,i):e(r,s,a,null,l,i);r.schema.compat&&yoe.flowIndentCheck(n.indent,c,i),s=u.range[2],o.items.push(u)}return o.range=[n.offset,s,s],o}gj.resolveBlockSeq=woe});var Qc=I(yj=>{"use strict";function Coe(t,e,r,n){let i="";if(t){let o=!1,s="";for(let a of t){let{source:c,type:l}=a;switch(l){case"space":o=!0;break;case"comment":{r&&!o&&n(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let u=c.substring(1)||" ";i?i+=s+u:i=u,s="";break}case"newline":i&&(s+=c),o=!0;break;default:n(a,"UNEXPECTED_TOKEN",`Unexpected ${l} at node end`)}e+=c.length}}return{comment:i,offset:e}}yj.resolveEnd=Coe});var Ej=I(bj=>{"use strict";var boe=Ye(),Eoe=Yi(),wj=da(),_oe=fa(),Soe=Qc(),Cj=Dd(),xoe=bg(),Poe=y0(),w0="Block collections are not allowed within flow collections",C0=t=>t&&(t.type==="block-map"||t.type==="block-seq");function koe({composeNode:t,composeEmptyNode:e},r,n,i){let o=n.start.source==="{",s=o?"flow map":"flow sequence",a=o?new wj.YAMLMap(r.schema):new _oe.YAMLSeq(r.schema);a.flow=!0;let c=r.atRoot;c&&(r.atRoot=!1);let l=n.offset+n.start.source.length;for(let h=0;h<n.items.length;++h){let m=n.items[h],{start:g,key:v,sep:w,value:b}=m,C=Cj.resolveProps(g,{flow:s,indicator:"explicit-key-ind",next:v||(w==null?void 0:w[0]),offset:l,onError:i,startOnNewline:!1});if(!C.found){if(!C.anchor&&!C.tag&&!w&&!b){h===0&&C.comma?i(C.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`):h<n.items.length-1&&i(C.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${s}`),C.comment&&(a.comment?a.comment+=`
`+C.comment:a.comment=C.comment),l=C.end;continue}!o&&r.options.strict&&xoe.containsNewline(v)&&i(v,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(h===0)C.comma&&i(C.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`);else if(C.comma||i(C.start,"MISSING_CHAR",`Missing , between ${s} items`),C.comment){let S="";e:for(let P of g)switch(P.type){case"comma":case"space":break;case"comment":S=P.source.substring(1);break e;default:break e}if(S){let P=a.items[a.items.length-1];boe.isPair(P)&&(P=P.value||P.key),P.comment?P.comment+=`
`+S:P.comment=S,C.comment=C.comment.substring(S.length+1)}}if(!o&&!w&&!C.found){let S=b?t(r,b,C,i):e(r,C.end,w,null,C,i);a.items.push(S),l=S.range[2],C0(b)&&i(S.range,"BLOCK_IN_FLOW",w0)}else{let S=C.end,P=v?t(r,v,C,i):e(r,S,g,null,C,i);C0(v)&&i(P.range,"BLOCK_IN_FLOW",w0);let _=Cj.resolveProps(w||[],{flow:s,indicator:"map-value-ind",next:b,offset:P.range[2],onError:i,startOnNewline:!1});if(_.found){if(!o&&!C.found&&r.options.strict){if(w)for(let A of w){if(A===_.found)break;if(A.type==="newline"){i(A,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}C.start<_.found.offset-1024&&i(_.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else b&&("source"in b&&b.source&&b.source[0]===":"?i(b,"MISSING_CHAR",`Missing space after : in ${s}`):i(_.start,"MISSING_CHAR",`Missing , or : between ${s} items`));let k=b?t(r,b,_,i):_.found?e(r,_.end,w,null,_,i):null;k?C0(b)&&i(k.range,"BLOCK_IN_FLOW",w0):_.comment&&(P.comment?P.comment+=`
`+_.comment:P.comment=_.comment);let T=new Eoe.Pair(P,k);if(r.options.keepSourceTokens&&(T.srcToken=m),o){let A=a;Poe.mapIncludes(r,A.items,P)&&i(S,"DUPLICATE_KEY","Map keys must be unique"),A.items.push(T)}else{let A=new wj.YAMLMap(r.schema);A.flow=!0,A.items.push(T),a.items.push(A)}l=k?k.range[2]:_.end}}let u=o?"}":"]",[d,...f]=n.end,p=l;if(d&&d.source===u)p=d.offset+d.source.length;else{let h=s[0].toUpperCase()+s.substring(1),m=c?`${h} must end with a ${u}`:`${h} in block collection must be sufficiently indented and end with a ${u}`;i(l,c?"MISSING_CHAR":"BAD_INDENT",m),d&&d.source.length!==1&&f.unshift(d)}if(f.length>0){let h=Soe.resolveEnd(f,p,r.options.strict,i);h.comment&&(a.comment?a.comment+=`
`+h.comment:a.comment=h.comment),a.range=[n.offset,p,h.offset]}else a.range=[n.offset,p,p];return a}bj.resolveFlowCollection=koe});var xj=I(Sj=>{"use strict";var _j=Ye(),Ioe=kt(),Toe=mj(),Aoe=vj(),Doe=Ej();function Roe(t,e,r,n,i){let o;switch(r.type){case"block-map":{o=Toe.resolveBlockMap(t,e,r,i);break}case"block-seq":{o=Aoe.resolveBlockSeq(t,e,r,i);break}case"flow-collection":{o=Doe.resolveFlowCollection(t,e,r,i);break}}if(!n)return o;let s=e.directives.tagName(n.source,f=>i(n,"TAG_RESOLVE_FAILED",f));if(!s)return o;let a=o.constructor;if(s==="!"||s===a.tagName)return o.tag=a.tagName,o;let c=_j.isMap(o)?"map":"seq",l=e.schema.tags.find(f=>f.collection===c&&f.tag===s);if(!l){let f=e.schema.knownTags[s];if(f&&f.collection===c)e.schema.tags.push(Object.assign({},f,{default:!1})),l=f;else return i(n,"TAG_RESOLVE_FAILED",`Unresolved tag: ${s}`,!0),o.tag=s,o}let u=l.resolve(o,f=>i(n,"TAG_RESOLVE_FAILED",f),e.options),d=_j.isNode(u)?u:new Ioe.Scalar(u);return d.range=o.range,d.tag=s,(l==null?void 0:l.format)&&(d.format=l.format),d}Sj.composeCollection=Roe});var E0=I(Pj=>{"use strict";var b0=kt();function Ooe(t,e,r){let n=t.offset,i=Noe(t,e,r);if(!i)return{value:"",type:null,comment:"",range:[n,n,n]};let o=i.mode===">"?b0.Scalar.BLOCK_FOLDED:b0.Scalar.BLOCK_LITERAL,s=t.source?Loe(t.source):[],a=s.length;for(let m=s.length-1;m>=0;--m){let g=s[m][1];if(g===""||g==="\r")a=m;else break}if(!t.source||a===0){let m=i.chomp==="+"?`
`.repeat(Math.max(0,s.length-1)):"",g=n+i.length;return t.source&&(g+=t.source.length),{value:m,type:o,comment:i.comment,range:[n,g,g]}}let c=t.indent+i.indent,l=t.offset+i.length,u=0;for(let m=0;m<a;++m){let[g,v]=s[m];if(v===""||v==="\r")i.indent===0&&g.length>c&&(c=g.length);else{if(g.length<c){let w="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";r(l+g.length,"MISSING_CHAR",w)}i.indent===0&&(c=g.length),u=m;break}l+=g.length+v.length+1}let d="",f="",p=!1;for(let m=0;m<u;++m)d+=s[m][0].slice(c)+`
`;for(let m=u;m<a;++m){let[g,v]=s[m];l+=g.length+v.length+1;let w=v[v.length-1]==="\r";if(w&&(v=v.slice(0,-1)),v&&g.length<c){let C=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;r(l-v.length-(w?2:1),"BAD_INDENT",C),g=""}o===b0.Scalar.BLOCK_LITERAL?(d+=f+g.slice(c)+v,f=`
`):g.length>c||v[0]==="	"?(f===" "?f=`
`:!p&&f===`
`&&(f=`

`),d+=f+g.slice(c)+v,f=`
`,p=!0):v===""?f===`
`?d+=`
`:f=`
`:(d+=f+v,f=" ",p=!1)}switch(i.chomp){case"-":break;case"+":for(let m=a;m<s.length;++m)d+=`
`+s[m][0].slice(c);d[d.length-1]!==`
`&&(d+=`
`);break;default:d+=`
`}let h=n+i.length+t.source.length;return{value:d,type:o,comment:i.comment,range:[n,h,h]}}function Noe({offset:t,props:e},r,n){if(e[0].type!=="block-scalar-header")return n(e[0],"IMPOSSIBLE","Block scalar header not found"),null;let{source:i}=e[0],o=i[0],s=0,a="",c=-1;for(let f=1;f<i.length;++f){let p=i[f];if(!a&&(p==="-"||p==="+"))a=p;else{let h=Number(p);!s&&h?s=h:c===-1&&(c=t+f)}}c!==-1&&n(c,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let l=!1,u="",d=i.length;for(let f=1;f<e.length;++f){let p=e[f];switch(p.type){case"space":l=!0;case"newline":d+=p.source.length;break;case"comment":r&&!l&&n(p,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),d+=p.source.length,u=p.source.substring(1);break;case"error":n(p,"UNEXPECTED_TOKEN",p.message),d+=p.source.length;break;default:{let h=`Unexpected token in block scalar header: ${p.type}`;n(p,"UNEXPECTED_TOKEN",h);let m=p.source;m&&typeof m=="string"&&(d+=m.length)}}}return{mode:o,indent:s,chomp:a,comment:u,length:d}}function Loe(t){let e=t.split(/\n( *)/),r=e[0],n=r.match(/^( *)/),o=[n&&n[1]?[n[1],r.slice(n[1].length)]:["",r]];for(let s=1;s<e.length;s+=2)o.push([e[s],e[s+1]]);return o}Pj.resolveBlockScalar=Ooe});var S0=I(Ij=>{"use strict";var _0=kt(),Foe=Qc();function Moe(t,e,r){let{offset:n,type:i,source:o,end:s}=t,a,c,l=(f,p,h)=>r(n+f,p,h);switch(i){case"scalar":a=_0.Scalar.PLAIN,c=qoe(o,l);break;case"single-quoted-scalar":a=_0.Scalar.QUOTE_SINGLE,c=$oe(o,l);break;case"double-quoted-scalar":a=_0.Scalar.QUOTE_DOUBLE,c=joe(o,l);break;default:return r(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[n,n+o.length,n+o.length]}}let u=n+o.length,d=Foe.resolveEnd(s,u,e,r);return{value:c,type:a,comment:d.comment,range:[n,u,d.offset]}}function qoe(t,e){let r="";switch(t[0]){case"	":r="a tab character";break;case",":r="flow indicator character ,";break;case"%":r="directive indicator character %";break;case"|":case">":{r=`block scalar indicator ${t[0]}`;break}case"@":case"`":{r=`reserved character ${t[0]}`;break}}return r&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${r}`),kj(t)}function $oe(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),kj(t.slice(1,-1)).replace(/''/g,"'")}function kj(t){let e,r;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),r=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,r=/[ \t]*(.*?)[ \t]*\r?\n/sy}let n=e.exec(t);if(!n)return t;let i=n[1],o=" ",s=e.lastIndex;for(r.lastIndex=s;n=r.exec(t);)n[1]===""?o===`
`?i+=o:o=`
`:(i+=o+n[1],o=" "),s=r.lastIndex;let a=/[ \t]*(.*)/sy;return a.lastIndex=s,n=a.exec(t),i+o+(n&&n[1]||"")}function joe(t,e){let r="";for(let n=1;n<t.length-1;++n){let i=t[n];if(!(i==="\r"&&t[n+1]===`
`))if(i===`
`){let{fold:o,offset:s}=Uoe(t,n);r+=o,n=s}else if(i==="\\"){let o=t[++n],s=Boe[o];if(s)r+=s;else if(o===`
`)for(o=t[n+1];o===" "||o==="	";)o=t[++n+1];else if(o==="\r"&&t[n+1]===`
`)for(o=t[++n+1];o===" "||o==="	";)o=t[++n+1];else if(o==="x"||o==="u"||o==="U"){let a={x:2,u:4,U:8}[o];r+=Hoe(t,n+1,a,e),n+=a}else{let a=t.substr(n-1,2);e(n-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),r+=a}}else if(i===" "||i==="	"){let o=n,s=t[n+1];for(;s===" "||s==="	";)s=t[++n+1];s!==`
`&&!(s==="\r"&&t[n+2]===`
`)&&(r+=n>o?t.slice(o,n+1):i)}else r+=i}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),r}function Uoe(t,e){let r="",n=t[e+1];for(;(n===" "||n==="	"||n===`
`||n==="\r")&&!(n==="\r"&&t[e+2]!==`
`);)n===`
`&&(r+=`
`),e+=1,n=t[e+1];return r||(r=" "),{fold:r,offset:e}}var Boe={"0":"\0",a:"\x07",b:"\b",e:"",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"\x85",_:"\xA0",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function Hoe(t,e,r,n){let i=t.substr(e,r),s=i.length===r&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(s)){let a=t.substr(e-2,r+2);return n(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),a}return String.fromCodePoint(s)}Ij.resolveFlowScalar=Moe});var Dj=I(Aj=>{"use strict";var Xc=Ye(),Tj=kt(),Voe=E0(),Woe=S0();function Goe(t,e,r,n){let{value:i,type:o,comment:s,range:a}=e.type==="block-scalar"?Voe.resolveBlockScalar(e,t.options.strict,n):Woe.resolveFlowScalar(e,t.options.strict,n),c=r?t.directives.tagName(r.source,d=>n(r,"TAG_RESOLVE_FAILED",d)):null,l=r&&c?zoe(t.schema,i,c,r,n):e.type==="scalar"?Koe(t,i,e,n):t.schema[Xc.SCALAR],u;try{let d=l.resolve(i,f=>n(r||e,"TAG_RESOLVE_FAILED",f),t.options);u=Xc.isScalar(d)?d:new Tj.Scalar(d)}catch(d){let f=d instanceof Error?d.message:String(d);n(r||e,"TAG_RESOLVE_FAILED",f),u=new Tj.Scalar(i)}return u.range=a,u.source=i,o&&(u.type=o),c&&(u.tag=c),l.format&&(u.format=l.format),s&&(u.comment=s),u}function zoe(t,e,r,n,i){var o;if(r==="!")return t[Xc.SCALAR];let s=[];for(let c of t.tags)if(!c.collection&&c.tag===r)if(c.default&&c.test)s.push(c);else return c;for(let c of s)if((o=c.test)===null||o===void 0?void 0:o.test(e))return c;let a=t.knownTags[r];return a&&!a.collection?(t.tags.push(Object.assign({},a,{default:!1,test:void 0})),a):(i(n,"TAG_RESOLVE_FAILED",`Unresolved tag: ${r}`,r!=="tag:yaml.org,2002:str"),t[Xc.SCALAR])}function Koe({directives:t,schema:e},r,n,i){let o=e.tags.find(s=>{var a;return s.default&&((a=s.test)===null||a===void 0?void 0:a.test(r))})||e[Xc.SCALAR];if(e.compat){let s=e.compat.find(a=>{var c;return a.default&&((c=a.test)===null||c===void 0?void 0:c.test(r))})||e[Xc.SCALAR];if(o.tag!==s.tag){let a=t.tagString(o.tag),c=t.tagString(s.tag),l=`Value may be parsed as either ${a} or ${c}`;i(n,"TAG_RESOLVE_FAILED",l,!0)}}return o}Aj.composeScalar=Goe});var Oj=I(Rj=>{"use strict";function Yoe(t,e,r){if(e){r===null&&(r=e.length);for(let n=r-1;n>=0;--n){let i=e[n];switch(i.type){case"space":case"comment":case"newline":t-=i.source.length;continue}for(i=e[++n];(i==null?void 0:i.type)==="space";)t+=i.source.length,i=e[++n];break}}return t}Rj.emptyScalarPosition=Yoe});var Mj=I(x0=>{"use strict";var Joe=dd(),Qoe=xj(),Nj=Dj(),Xoe=Qc(),Zoe=Oj(),ese={composeNode:Lj,composeEmptyNode:Fj};function Lj(t,e,r,n){let{spaceBefore:i,comment:o,anchor:s,tag:a}=r,c;switch(e.type){case"alias":c=tse(t,e,n),(s||a)&&n(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=Nj.composeScalar(t,e,a,n),s&&(c.anchor=s.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=Qoe.composeCollection(ese,t,e,a,n),s&&(c.anchor=s.source.substring(1));break;default:throw console.log(e),new Error(`Unsupporten token type: ${e.type}`)}return s&&c.anchor===""&&n(s,"BAD_ALIAS","Anchor cannot be an empty string"),i&&(c.spaceBefore=!0),o&&(e.type==="scalar"&&e.source===""?c.comment=o:c.commentBefore=o),t.options.keepSourceTokens&&(c.srcToken=e),c}function Fj(t,e,r,n,{spaceBefore:i,comment:o,anchor:s,tag:a},c){let l={type:"scalar",offset:Zoe.emptyScalarPosition(e,r,n),indent:-1,source:""},u=Nj.composeScalar(t,l,a,c);return s&&(u.anchor=s.source.substring(1),u.anchor===""&&c(s,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(u.spaceBefore=!0),o&&(u.comment=o),u}function tse({options:t},{offset:e,source:r,end:n},i){let o=new Joe.Alias(r.substring(1));o.source===""&&i(e,"BAD_ALIAS","Alias cannot be an empty string");let s=e+r.length,a=Xoe.resolveEnd(n,s,t.strict,i);return o.range=[e,s,a.offset],a.comment&&(o.comment=a.comment),o}x0.composeEmptyNode=Fj;x0.composeNode=Lj});var jj=I($j=>{"use strict";var rse=Id(),qj=Mj(),nse=Qc(),ise=Dd();function ose(t,e,{offset:r,start:n,value:i,end:o},s){let a=Object.assign({directives:e},t),c=new rse.Document(void 0,a),l={atRoot:!0,directives:c.directives,options:c.options,schema:c.schema},u=ise.resolveProps(n,{indicator:"doc-start",next:i||(o==null?void 0:o[0]),offset:r,onError:s,startOnNewline:!0});u.found&&(c.directives.marker=!0,i&&(i.type==="block-map"||i.type==="block-seq")&&!u.hasNewline&&s(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),c.contents=i?qj.composeNode(l,i,u,s):qj.composeEmptyNode(l,u.end,n,null,u,s);let d=c.contents.range[2],f=nse.resolveEnd(o,d,!1,s);return f.comment&&(c.comment=f.comment),c.range=[r,d,f.offset],c}$j.composeDoc=ose});var P0=I(Vj=>{"use strict";var sse=SE(),ase=Id(),Rd=Ad(),Uj=Ye(),cse=Jm(),lse=jj(),use=Qc();function Od(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];let{offset:e,source:r}=t;return[e,e+(typeof r=="string"?r.length:1)]}function Bj(t){var e;let r="",n=!1,i=!1;for(let o=0;o<t.length;++o){let s=t[o];switch(s[0]){case"#":r+=(r===""?"":i?`

`:`
`)+(s.substring(1)||" "),n=!0,i=!1;break;case"%":((e=t[o+1])===null||e===void 0?void 0:e[0])!=="#"&&(o+=1),n=!1;break;default:n||(i=!0),n=!1}}return{comment:r,afterEmptyLine:i}}var Hj=class{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(r,n,i,o)=>{let s=Od(r);o?this.warnings.push(new Rd.YAMLWarning(s,n,i)):this.errors.push(new Rd.YAMLParseError(s,n,i))},this.directives=new sse.Directives({version:e.version||cse.defaultOptions.version}),this.options=e}decorate(e,r){let{comment:n,afterEmptyLine:i}=Bj(this.prelude);if(n){let o=e.contents;if(r)e.comment=e.comment?`${e.comment}
${n}`:n;else if(i||e.directives.marker||!o)e.commentBefore=n;else if(Uj.isCollection(o)&&!o.flow&&o.items.length>0){let s=o.items[0];Uj.isPair(s)&&(s=s.key);let a=s.commentBefore;s.commentBefore=a?`${n}
${a}`:n}else{let s=o.commentBefore;o.commentBefore=s?`${n}
${s}`:n}}r?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:Bj(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,r=!1,n=-1){for(let i of e)yield*this.next(i);yield*this.end(r,n)}*next(e){switch(process.env.LOG_STREAM&&console.dir(e,{depth:null}),e.type){case"directive":this.directives.add(e.source,(r,n,i)=>{let o=Od(e);o[0]+=r,this.onError(o,"BAD_DIRECTIVE",n,i)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{let r=lse.composeDoc(this.options,this.directives,e,this.onError);this.atDirectives&&!r.directives.marker&&this.onError(e,"MISSING_CHAR","Missing directives-end indicator line"),this.decorate(r,!1),this.doc&&(yield this.doc),this.doc=r,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{let r=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,n=new Rd.YAMLParseError(Od(e),"UNEXPECTED_TOKEN",r);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){let n="Unexpected doc-end without preceding document";this.errors.push(new Rd.YAMLParseError(Od(e),"UNEXPECTED_TOKEN",n));break}let r=use.resolveEnd(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),r.comment){let n=this.doc.comment;this.doc.comment=n?`${n}
${r.comment}`:r.comment}this.doc.range[2]=r.offset;break}default:this.errors.push(new Rd.YAMLParseError(Od(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,r=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){let n=Object.assign({directives:this.directives},this.options),i=new ase.Document(void 0,n);this.atDirectives&&this.onError(r,"MISSING_CHAR","Missing directives-end indicator line"),i.range=[0,r,r],this.decorate(i,!1),yield i}}};Vj.Composer=Hj});var zj=I(Eg=>{"use strict";var dse=E0(),fse=S0(),pse=Ad(),Wj=yd();function hse(t,e=!0,r){if(t){let n=(i,o,s)=>{let a=typeof i=="number"?i:Array.isArray(i)?i[0]:i.offset;if(r)r(a,o,s);else throw new pse.YAMLParseError([a,a+1],o,s)};switch(t.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return fse.resolveFlowScalar(t,e,n);case"block-scalar":return dse.resolveBlockScalar(t,e,n)}}return null}function mse(t,e){var r;let{implicitKey:n=!1,indent:i,inFlow:o=!1,offset:s=-1,type:a="PLAIN"}=e,c=Wj.stringifyString({type:a,value:t},{implicitKey:n,indent:i>0?" ".repeat(i):"",inFlow:o,options:{blockQuote:!0,lineWidth:-1}}),l=(r=e.end)!==null&&r!==void 0?r:[{type:"newline",offset:-1,indent:i,source:`
`}];switch(c[0]){case"|":case">":{let u=c.indexOf(`
`),d=c.substring(0,u),f=c.substring(u+1)+`
`,p=[{type:"block-scalar-header",offset:s,indent:i,source:d}];return Gj(p,l)||p.push({type:"newline",offset:-1,indent:i,source:`
`}),{type:"block-scalar",offset:s,indent:i,props:p,source:f}}case'"':return{type:"double-quoted-scalar",offset:s,indent:i,source:c,end:l};case"'":return{type:"single-quoted-scalar",offset:s,indent:i,source:c,end:l};default:return{type:"scalar",offset:s,indent:i,source:c,end:l}}}function gse(t,e,r={}){let{afterKey:n=!1,implicitKey:i=!1,inFlow:o=!1,type:s}=r,a="indent"in t?t.indent:null;if(n&&typeof a=="number"&&(a+=2),!s)switch(t.type){case"single-quoted-scalar":s="QUOTE_SINGLE";break;case"double-quoted-scalar":s="QUOTE_DOUBLE";break;case"block-scalar":{let l=t.props[0];if(l.type!=="block-scalar-header")throw new Error("Invalid block scalar header");s=l.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:s="PLAIN"}let c=Wj.stringifyString({type:s,value:e},{implicitKey:i||a===null,indent:a!==null&&a>0?" ".repeat(a):"",inFlow:o,options:{blockQuote:!0,lineWidth:-1}});switch(c[0]){case"|":case">":vse(t,c);break;case'"':k0(t,c,"double-quoted-scalar");break;case"'":k0(t,c,"single-quoted-scalar");break;default:k0(t,c,"scalar")}}function vse(t,e){let r=e.indexOf(`
`),n=e.substring(0,r),i=e.substring(r+1)+`
`;if(t.type==="block-scalar"){let o=t.props[0];if(o.type!=="block-scalar-header")throw new Error("Invalid block scalar header");o.source=n,t.source=i}else{let{offset:o}=t,s="indent"in t?t.indent:-1,a=[{type:"block-scalar-header",offset:o,indent:s,source:n}];Gj(a,"end"in t?t.end:void 0)||a.push({type:"newline",offset:-1,indent:s,source:`
`});for(let c of Object.keys(t))c!=="type"&&c!=="offset"&&delete t[c];Object.assign(t,{type:"block-scalar",indent:s,props:a,source:i})}}function Gj(t,e){if(e)for(let r of e)switch(r.type){case"space":case"comment":t.push(r);break;case"newline":return t.push(r),!0}return!1}function k0(t,e,r){switch(t.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":t.type=r,t.source=e;break;case"block-scalar":{let n=t.props.slice(1),i=e.length;t.props[0].type==="block-scalar-header"&&(i-=t.props[0].source.length);for(let o of n)o.offset+=i;delete t.props,Object.assign(t,{type:r,source:e,end:n});break}case"block-map":case"block-seq":{let n=t.offset+e.length,i={type:"newline",offset:n,indent:t.indent,source:`
`};delete t.items,Object.assign(t,{type:r,source:e,end:[i]});break}default:{let n="indent"in t?t.indent:-1,i="end"in t&&Array.isArray(t.end)?t.end.filter(o=>o.type==="space"||o.type==="comment"||o.type==="newline"):[];for(let o of Object.keys(t))o!=="type"&&o!=="offset"&&delete t[o];Object.assign(t,{type:r,indent:n,source:e,end:i})}}}Eg.createScalarToken=mse;Eg.resolveAsScalar=hse;Eg.setScalarValue=gse});var Yj=I(Kj=>{"use strict";var yse=t=>"type"in t?_g(t):Sg(t);function _g(t){switch(t.type){case"block-scalar":{let e="";for(let r of t.props)e+=_g(r);return e+t.source}case"block-map":case"block-seq":{let e="";for(let r of t.items)e+=Sg(r);return e}case"flow-collection":{let e=t.start.source;for(let r of t.items)e+=Sg(r);for(let r of t.end)e+=r.source;return e}case"document":{let e=Sg(t);if(t.end)for(let r of t.end)e+=r.source;return e}default:{let e=t.source;if("end"in t&&t.end)for(let r of t.end)e+=r.source;return e}}}function Sg({start:t,key:e,sep:r,value:n}){let i="";for(let o of t)i+=o.source;if(e&&(i+=_g(e)),r)for(let o of r)i+=o.source;return n&&(i+=_g(n)),i}Kj.stringify=yse});var Zj=I(Xj=>{"use strict";var I0=Symbol("break visit"),wse=Symbol("skip children"),Jj=Symbol("remove item");function pa(t,e){"type"in t&&t.type==="document"&&(t={start:t.start,value:t.value}),Qj(Object.freeze([]),t,e)}pa.BREAK=I0;pa.SKIP=wse;pa.REMOVE=Jj;pa.itemAtPath=(t,e)=>{let r=t;for(let[n,i]of e){let o=r&&r[n];if(o&&"items"in o)r=o.items[i];else return}return r};pa.parentCollection=(t,e)=>{let r=pa.itemAtPath(t,e.slice(0,-1)),n=e[e.length-1][0],i=r&&r[n];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function Qj(t,e,r){let n=r(e,t);if(typeof n=="symbol")return n;for(let i of["key","value"]){let o=e[i];if(o&&"items"in o){for(let s=0;s<o.items.length;++s){let a=Qj(Object.freeze(t.concat([[i,s]])),o.items[s],r);if(typeof a=="number")s=a-1;else{if(a===I0)return I0;a===Jj&&(o.items.splice(s,1),s-=1)}}typeof n=="function"&&i==="key"&&(n=n(e,t))}}return typeof n=="function"?n(e,t):n}Xj.visit=pa});var xg=I(Tr=>{"use strict";var T0=zj(),Cse=Yj(),bse=Zj(),A0="\uFEFF",D0="",R0="",O0="",Ese=t=>!!t&&"items"in t,_se=t=>!!t&&(t.type==="scalar"||t.type==="single-quoted-scalar"||t.type==="double-quoted-scalar"||t.type==="block-scalar");function Sse(t){switch(t){case A0:return"<BOM>";case D0:return"<DOC>";case R0:return"<FLOW_END>";case O0:return"<SCALAR>";default:return JSON.stringify(t)}}function xse(t){switch(t){case A0:return"byte-order-mark";case D0:return"doc-mode";case R0:return"flow-error-end";case O0:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}Tr.createScalarToken=T0.createScalarToken;Tr.resolveAsScalar=T0.resolveAsScalar;Tr.setScalarValue=T0.setScalarValue;Tr.stringify=Cse.stringify;Tr.visit=bse.visit;Tr.BOM=A0;Tr.DOCUMENT=D0;Tr.FLOW_END=R0;Tr.SCALAR=O0;Tr.isCollection=Ese;Tr.isScalar=_se;Tr.prettyToken=Sse;Tr.tokenType=xse});var L0=I(nU=>{"use strict";var Nd=xg();function _n(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}var eU="0123456789ABCDEFabcdef".split(""),Pse="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),tU=",[]{}".split(""),kse=` ,[]{}
\r	`.split(""),N0=t=>!t||kse.includes(t),rU=class{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,r=!1){e&&(this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null),this.atEnd=!r;let n=this.next||"stream";for(;n&&(r||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let e=this.pos,r=this.buffer[e];for(;r===" "||r==="	";)r=this.buffer[++e];return!r||r==="#"||r===`
`?!0:r==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let r=this.buffer[e];if(this.indentNext>0){let n=0;for(;r===" ";)r=this.buffer[++n+e];if(r==="\r"){let i=this.buffer[n+e+1];if(i===`
`||!i&&!this.atEnd)return e+n+1}return r===`
`||n>=this.indentNext||!r&&!this.atEnd?e+n:-1}if(r==="-"||r==="."){let n=this.buffer.substr(e,3);if((n==="---"||n==="...")&&_n(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===Nd.BOM&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let r=e.length,n=e.indexOf("#");if(n!==-1){let o=e[n-1];(o===" "||o==="	")&&(r=n-1)}for(;;){let o=e[r-1];if(o===" "||o==="	")r-=1;else break}let i=(yield*this.pushCount(r))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){let r=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-r),yield*this.pushNewline(),"stream"}return yield Nd.DOCUMENT,yield*this.parseLineStart()}*parseLineStart(){let e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");let r=this.peek(3);if(r==="---"&&_n(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if(r==="..."&&_n(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!_n(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){let[e,r]=this.peek(2);if(!r&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&_n(r)){let n=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=n,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);let e=this.getLine();if(e===null)return this.setNext("doc");let r=yield*this.pushIndicators();switch(e[r]){case"#":yield*this.pushCount(e.length-r);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(N0),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return r+=yield*this.parseBlockScalarHeader(),r+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-r),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,r,n=-1;do e=yield*this.pushNewline(),r=yield*this.pushSpaces(!0),e>0&&(this.indentValue=n=r);while(e+r>0);let i=this.getLine();if(i===null)return this.setNext("flow");if((n!==-1&&n<this.indentNext&&i[0]!=="#"||n===0&&(i.startsWith("---")||i.startsWith("..."))&&_n(i[3]))&&!(n===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}")))return this.flowLevel=0,yield Nd.FLOW_END,yield*this.parseLineStart();let o=0;for(;i[o]===",";)o+=yield*this.pushCount(1),o+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(o+=yield*this.pushIndicators(),i[o]){case void 0:return"flow";case"#":return yield*this.pushCount(i.length-o),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(N0),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{let s=this.charAt(1);if(this.flowKey||_n(s)||s===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){let e=this.charAt(0),r=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;r!==-1&&this.buffer[r+1]==="'";)r=this.buffer.indexOf("'",r+2);else for(;r!==-1;){let o=0;for(;this.buffer[r-1-o]==="\\";)o+=1;if(o%2==0)break;r=this.buffer.indexOf('"',r+1)}let n=this.buffer.substring(0,r),i=n.indexOf(`
`,this.pos);if(i!==-1){for(;i!==-1;){let o=this.continueScalar(i+1);if(o===-1)break;i=n.indexOf(`
`,o)}i!==-1&&(r=i-(n[i-1]==="\r"?2:1))}if(r===-1){if(!this.atEnd)return this.setNext("quoted-scalar");r=this.buffer.length}return yield*this.pushToIndex(r+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){let r=this.buffer[++e];if(r==="+")this.blockScalarKeep=!0;else if(r>"0"&&r<="9")this.blockScalarIndent=Number(r)-1;else if(r!=="-")break}return yield*this.pushUntil(r=>_n(r)||r==="#")}*parseBlockScalar(){let e=this.pos-1,r=0,n;e:for(let i=this.pos;n=this.buffer[i];++i)switch(n){case" ":r+=1;break;case`
`:e=i,r=0;break;case"\r":{let o=this.buffer[i+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!n&&!this.atEnd)return this.setNext("block-scalar");if(r>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=r:this.indentNext+=this.blockScalarIndent;do{let i=this.continueScalar(e+1);if(i===-1)break;e=this.buffer.indexOf(`
`,i)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}if(!this.blockScalarKeep)do{let i=e-1,o=this.buffer[i];for(o==="\r"&&(o=this.buffer[--i]);o===" "||o==="	";)o=this.buffer[--i];if(o===`
`&&i>=this.pos)e=i;else break}while(!0);return yield Nd.SCALAR,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){let e=this.flowLevel>0,r=this.pos-1,n=this.pos-1,i;for(;i=this.buffer[++n];)if(i===":"){let o=this.buffer[n+1];if(_n(o)||e&&o===",")break;r=n}else if(_n(i)){let o=this.buffer[n+1];if(i==="\r"&&(o===`
`?(n+=1,i=`
`,o=this.buffer[n+1]):r=n),o==="#"||e&&tU.includes(o))break;if(i===`
`){let s=this.continueScalar(n+1);if(s===-1)break;n=Math.max(n,s-2)}}else{if(e&&tU.includes(i))break;r=n}return!i&&!this.atEnd?this.setNext("plain-scalar"):(yield Nd.SCALAR,yield*this.pushToIndex(r+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,r){let n=this.buffer.slice(this.pos,e);return n?(yield n,this.pos+=n.length,n.length):(r&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(N0))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case":":case"?":case"-":if(_n(this.charAt(1)))return this.flowLevel===0?this.indentNext=this.indentValue+1:this.flowKey&&(this.flowKey=!1),(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,r=this.buffer[e];for(;!_n(r)&&r!==">";)r=this.buffer[++e];return yield*this.pushToIndex(r===">"?e+1:e,!1)}else{let e=this.pos+1,r=this.buffer[e];for(;r;)if(Pse.includes(r))r=this.buffer[++e];else if(r==="%"&&eU.includes(this.buffer[e+1])&&eU.includes(this.buffer[e+2]))r=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){let e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let r=this.pos-1,n;do n=this.buffer[++r];while(n===" "||e&&n==="	");let i=r-this.pos;return i>0&&(yield this.buffer.substr(this.pos,i),this.pos=r),i}*pushUntil(e){let r=this.pos,n=this.buffer[r];for(;!e(n);)n=this.buffer[++r];return yield*this.pushToIndex(r,!1)}};nU.Lexer=rU});var F0=I(oU=>{"use strict";var iU=class{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let r=0,n=this.lineStarts.length;for(;r<n;){let o=r+n>>1;this.lineStarts[o]<e?r=o+1:n=o}if(this.lineStarts[r]===e)return{line:r+1,col:1};if(r===0)return{line:0,col:e};let i=this.lineStarts[r-1];return{line:r,col:e-i+1}}}};oU.LineCounter=iU});var q0=I(uU=>{"use strict";var sU=xg(),Ise=L0();function bi(t,e){for(let r=0;r<t.length;++r)if(t[r].type===e)return!0;return!1}function M0(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return!0}return!1}function aU(t){switch(t==null?void 0:t.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Pg(t){switch(t.type){case"document":return t.start;case"block-map":{let e=t.items[t.items.length-1];return e.sep||e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function Ld(t){var e;if(t.length===0)return[];let r=t.length;e:for(;--r>=0;)switch(t[r].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;((e=t[++r])===null||e===void 0?void 0:e.type)==="space";);return t.splice(r,t.length)}function cU(t){if(t.start.type==="flow-seq-start")for(let e of t.items)e.sep&&!e.value&&!bi(e.start,"explicit-key-ind")&&!bi(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,aU(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}var lU=class{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Ise.Lexer,this.onNewLine=e}*parse(e,r=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(let n of this.lexer.lex(e,r))yield*this.next(n);r||(yield*this.end())}*next(e){if(this.source=e,process.env.LOG_TOKENS&&console.log("|",sU.prettyToken(e)),this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}let r=sU.tokenType(e);if(r)if(r==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=r,yield*this.step(),r){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{let n=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:n,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){let e=this.peek(1);if(this.type==="doc-end"&&(!e||e.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){let r=e||this.stack.pop();if(r)if(this.stack.length===0)yield r;else{let n=this.peek(1);switch(r.type==="block-scalar"?r.indent="indent"in n?n.indent:0:r.type==="flow-collection"&&n.type==="document"&&(r.indent=0),r.type==="flow-collection"&&cU(r),n.type){case"document":n.value=r;break;case"block-scalar":n.props.push(r);break;case"block-map":{let i=n.items[n.items.length-1];if(i.value){n.items.push({start:[],key:r,sep:[]}),this.onKeyLine=!0;return}else if(i.sep)i.value=r;else{Object.assign(i,{key:r,sep:[]}),this.onKeyLine=!bi(i.start,"explicit-key-ind");return}break}case"block-seq":{let i=n.items[n.items.length-1];i.value?n.items.push({start:[],value:r}):i.value=r;break}case"flow-collection":{let i=n.items[n.items.length-1];!i||i.value?n.items.push({start:[],key:r,sep:[]}):i.sep?i.value=r:Object.assign(i,{key:r,sep:[]});return}default:yield*this.pop(),yield*this.pop(r)}if((n.type==="document"||n.type==="block-map"||n.type==="block-seq")&&(r.type==="block-map"||r.type==="block-seq")){let i=r.items[r.items.length-1];i&&!i.sep&&!i.value&&i.start.length>0&&!M0(i.start)&&(r.indent===0||i.start.every(o=>o.type!=="comment"||o.indent<r.indent))&&(n.type==="document"?n.end=i.start:n.items.push({start:i.start}),r.items.splice(-1,1))}}else{let n="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:n}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{let e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{M0(e.start)?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}let r=this.startBlockValue(e);r?this.stack.push(r):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){let r=Pg(this.peek(2)),n=Ld(r),i;e.end?(i=e.end,i.push(this.sourceToken),delete e.end):i=[this.sourceToken];let o={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:n,key:e,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=o}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let r=this.source.indexOf(`
`)+1;for(;r!==0;)this.onNewLine(this.offset+r),r=this.source.indexOf(`
`,r)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){var r;let n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){let i="end"in n.value?n.value.end:void 0,o=Array.isArray(i)?i[i.length-1]:void 0;(o==null?void 0:o.type)==="comment"?i==null||i.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,e.indent)){let i=e.items[e.items.length-2],o=(r=i==null?void 0:i.value)===null||r===void 0?void 0:r.end;if(Array.isArray(o)){Array.prototype.push.apply(o,n.start),o.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=e.indent){let i=!this.onKeyLine&&this.indent===e.indent&&(n.sep||M0(n.start));switch(this.type){case"anchor":case"tag":i||n.value?(e.items.push({start:[this.sourceToken]}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!bi(n.start,"explicit-key-ind")?n.start.push(this.sourceToken):i||n.value?e.items.push({start:[this.sourceToken]}):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}),this.onKeyLine=!0;return;case"map-value-ind":if(!n.sep)Object.assign(n,{key:null,sep:[this.sourceToken]});else if(n.value||i&&!bi(n.start,"explicit-key-ind"))e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(bi(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]});else if(bi(n.start,"explicit-key-ind")&&aU(n.key)&&!bi(n.sep,"newline")){let o=Ld(n.start),s=n.key,a=n.sep;a.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:s,sep:a}]})}else n.sep.push(this.sourceToken);this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let o=this.flowScalar(this.type);i||n.value?(e.items.push({start:[],key:o,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(o):(Object.assign(n,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{let o=this.startBlockValue(e);if(o){i&&o.type!=="block-seq"&&bi(n.start,"explicit-key-ind")&&e.items.push({start:[]}),this.stack.push(o);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){var r;let n=e.items[e.items.length-1];switch(this.type){case"newline":if(n.value){let i="end"in n.value?n.value.end:void 0,o=Array.isArray(i)?i[i.length-1]:void 0;(o==null?void 0:o.type)==="comment"?i==null||i.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,e.indent)){let i=e.items[e.items.length-2],o=(r=i==null?void 0:i.value)===null||r===void 0?void 0:r.end;if(Array.isArray(o)){Array.prototype.push.apply(o,n.start),o.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;n.value||bi(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>e.indent){let i=this.startBlockValue(e);if(i){this.stack.push(i);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){let r=e.items[e.items.length-1];if(this.type==="flow-error-end"){let n;do yield*this.pop(),n=this.peek(1);while(n&&n.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!r||r.sep?e.items.push({start:[this.sourceToken]}):r.start.push(this.sourceToken);return;case"map-value-ind":!r||r.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):Object.assign(r,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!r||r.value?e.items.push({start:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):r.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let i=this.flowScalar(this.type);!r||r.value?e.items.push({start:[],key:i,sep:[]}):r.sep?this.stack.push(i):Object.assign(r,{key:i,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}let n=this.startBlockValue(e);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{let n=this.peek(2);if(n.type==="block-map"&&(this.type==="map-value-ind"||this.type==="newline"&&!n.items[n.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&n.type!=="flow-collection"){let i=Pg(n),o=Ld(i);cU(e);let s=e.end.splice(1,e.end.length);s.push(this.sourceToken);let a={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:o,key:e,sep:s}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let r=this.source.indexOf(`
`)+1;for(;r!==0;)this.onNewLine(this.offset+r),r=this.source.indexOf(`
`,r)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;let r=Pg(e),n=Ld(r);return n.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n}]}}case"map-value-ind":{this.onKeyLine=!0;let r=Pg(e),n=Ld(r);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,r){return this.type!=="comment"||this.indent<=r?!1:e.every(n=>n.type==="newline"||n.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}};uU.Parser=lU});var mU=I(Md=>{"use strict";var dU=P0(),Tse=Id(),Fd=Ad(),Ase=RE(),Dse=F0(),fU=q0();function pU(t){let e=t.prettyErrors!==!1;return{lineCounter:t.lineCounter||e&&new Dse.LineCounter||null,prettyErrors:e}}function Rse(t,e={}){let{lineCounter:r,prettyErrors:n}=pU(e),i=new fU.Parser(r==null?void 0:r.addNewLine),o=new dU.Composer(e),s=Array.from(o.compose(i.parse(t)));if(n&&r)for(let a of s)a.errors.forEach(Fd.prettifyError(t,r)),a.warnings.forEach(Fd.prettifyError(t,r));return s.length>0?s:Object.assign([],{empty:!0},o.streamInfo())}function hU(t,e={}){let{lineCounter:r,prettyErrors:n}=pU(e),i=new fU.Parser(r==null?void 0:r.addNewLine),o=new dU.Composer(e),s=null;for(let a of o.compose(i.parse(t),!0,t.length))if(!s)s=a;else if(s.options.logLevel!=="silent"){s.errors.push(new Fd.YAMLParseError(a.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return n&&r&&(s.errors.forEach(Fd.prettifyError(t,r)),s.warnings.forEach(Fd.prettifyError(t,r))),s}function Ose(t,e,r){let n;typeof e=="function"?n=e:r===void 0&&e&&typeof e=="object"&&(r=e);let i=hU(t,r);if(!i)return null;if(i.warnings.forEach(o=>Ase.warn(i.options.logLevel,o)),i.errors.length>0){if(i.options.logLevel!=="silent")throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:n},r))}function Nse(t,e,r){let n=null;if(typeof e=="function"||Array.isArray(e)?n=e:r===void 0&&e&&(r=e),typeof r=="string"&&(r=r.length),typeof r=="number"){let i=Math.round(r);r=i<1?void 0:i>8?{indent:8}:{indent:i}}if(t===void 0){let{keepUndefined:i}=r||e||{};if(!i)return}return new Tse.Document(t,n,r).toString(r)}Md.parse=Ose;Md.parseAllDocuments=Rse;Md.parseDocument=hU;Md.stringify=Nse});var j0=I(Je=>{"use strict";var Lse=P0(),Fse=Id(),Mse=f0(),$0=Ad(),qse=dd(),Ko=Ye(),$se=Yi(),jse=kt(),Use=da(),Bse=fa(),Hse=Jm(),Vse=xg(),Wse=L0(),Gse=F0(),zse=q0(),kg=mU(),Kse=cd();Je.Composer=Lse.Composer;Je.Document=Fse.Document;Je.Schema=Mse.Schema;Je.YAMLError=$0.YAMLError;Je.YAMLParseError=$0.YAMLParseError;Je.YAMLWarning=$0.YAMLWarning;Je.Alias=qse.Alias;Je.isAlias=Ko.isAlias;Je.isCollection=Ko.isCollection;Je.isDocument=Ko.isDocument;Je.isMap=Ko.isMap;Je.isNode=Ko.isNode;Je.isPair=Ko.isPair;Je.isScalar=Ko.isScalar;Je.isSeq=Ko.isSeq;Je.Pair=$se.Pair;Je.Scalar=jse.Scalar;Je.YAMLMap=Use.YAMLMap;Je.YAMLSeq=Bse.YAMLSeq;Je.defaultOptions=Hse.defaultOptions;Je.CST=Vse;Je.Lexer=Wse.Lexer;Je.LineCounter=Gse.LineCounter;Je.Parser=zse.Parser;Je.parse=kg.parse;Je.parseAllDocuments=kg.parseAllDocuments;Je.parseDocument=kg.parseDocument;Je.stringify=kg.stringify;Je.visit=Kse.visit});var gU=I((F_e,Yse)=>{Yse.exports={Aacute:"\xC1",aacute:"\xE1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223E",acd:"\u223F",acE:"\u223E\u0333",Acirc:"\xC2",acirc:"\xE2",acute:"\xB4",Acy:"\u0410",acy:"\u0430",AElig:"\xC6",aelig:"\xE6",af:"\u2061",Afr:"\u{1D504}",afr:"\u{1D51E}",Agrave:"\xC0",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03B1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2A3F",amp:"&",AMP:"&",andand:"\u2A55",And:"\u2A53",and:"\u2227",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",ange:"\u29A4",angle:"\u2220",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angmsd:"\u2221",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angst:"\xC5",angzarr:"\u237C",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1D538}",aopf:"\u{1D552}",apacir:"\u2A6F",ap:"\u2248",apE:"\u2A70",ape:"\u224A",apid:"\u224B",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224A",Aring:"\xC5",aring:"\xE5",Ascr:"\u{1D49C}",ascr:"\u{1D4B6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224D",Atilde:"\xC3",atilde:"\xE3",Auml:"\xC4",auml:"\xE4",awconint:"\u2233",awint:"\u2A11",backcong:"\u224C",backepsilon:"\u03F6",backprime:"\u2035",backsim:"\u223D",backsimeq:"\u22CD",Backslash:"\u2216",Barv:"\u2AE7",barvee:"\u22BD",barwed:"\u2305",Barwed:"\u2306",barwedge:"\u2305",bbrk:"\u23B5",bbrktbrk:"\u23B6",bcong:"\u224C",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201E",becaus:"\u2235",because:"\u2235",Because:"\u2235",bemptyv:"\u29B0",bepsi:"\u03F6",bernou:"\u212C",Bernoullis:"\u212C",Beta:"\u0392",beta:"\u03B2",beth:"\u2136",between:"\u226C",Bfr:"\u{1D505}",bfr:"\u{1D51F}",bigcap:"\u22C2",bigcirc:"\u25EF",bigcup:"\u22C3",bigodot:"\u2A00",bigoplus:"\u2A01",bigotimes:"\u2A02",bigsqcup:"\u2A06",bigstar:"\u2605",bigtriangledown:"\u25BD",bigtriangleup:"\u25B3",biguplus:"\u2A04",bigvee:"\u22C1",bigwedge:"\u22C0",bkarow:"\u290D",blacklozenge:"\u29EB",blacksquare:"\u25AA",blacktriangle:"\u25B4",blacktriangledown:"\u25BE",blacktriangleleft:"\u25C2",blacktriangleright:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bNot:"\u2AED",bnot:"\u2310",Bopf:"\u{1D539}",bopf:"\u{1D553}",bot:"\u22A5",bottom:"\u22A5",bowtie:"\u22C8",boxbox:"\u29C9",boxdl:"\u2510",boxdL:"\u2555",boxDl:"\u2556",boxDL:"\u2557",boxdr:"\u250C",boxdR:"\u2552",boxDr:"\u2553",boxDR:"\u2554",boxh:"\u2500",boxH:"\u2550",boxhd:"\u252C",boxHd:"\u2564",boxhD:"\u2565",boxHD:"\u2566",boxhu:"\u2534",boxHu:"\u2567",boxhU:"\u2568",boxHU:"\u2569",boxminus:"\u229F",boxplus:"\u229E",boxtimes:"\u22A0",boxul:"\u2518",boxuL:"\u255B",boxUl:"\u255C",boxUL:"\u255D",boxur:"\u2514",boxuR:"\u2558",boxUr:"\u2559",boxUR:"\u255A",boxv:"\u2502",boxV:"\u2551",boxvh:"\u253C",boxvH:"\u256A",boxVh:"\u256B",boxVH:"\u256C",boxvl:"\u2524",boxvL:"\u2561",boxVl:"\u2562",boxVL:"\u2563",boxvr:"\u251C",boxvR:"\u255E",boxVr:"\u255F",boxVR:"\u2560",bprime:"\u2035",breve:"\u02D8",Breve:"\u02D8",brvbar:"\xA6",bscr:"\u{1D4B7}",Bscr:"\u212C",bsemi:"\u204F",bsim:"\u223D",bsime:"\u22CD",bsolb:"\u29C5",bsol:"\\",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bump:"\u224E",bumpE:"\u2AAE",bumpe:"\u224F",Bumpeq:"\u224E",bumpeq:"\u224F",Cacute:"\u0106",cacute:"\u0107",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",cap:"\u2229",Cap:"\u22D2",capcup:"\u2A47",capdot:"\u2A40",CapitalDifferentialD:"\u2145",caps:"\u2229\uFE00",caret:"\u2041",caron:"\u02C7",Cayleys:"\u212D",ccaps:"\u2A4D",Ccaron:"\u010C",ccaron:"\u010D",Ccedil:"\xC7",ccedil:"\xE7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2A4C",ccupssm:"\u2A50",Cdot:"\u010A",cdot:"\u010B",cedil:"\xB8",Cedilla:"\xB8",cemptyv:"\u29B2",cent:"\xA2",centerdot:"\xB7",CenterDot:"\xB7",cfr:"\u{1D520}",Cfr:"\u212D",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03A7",chi:"\u03C7",circ:"\u02C6",circeq:"\u2257",circlearrowleft:"\u21BA",circlearrowright:"\u21BB",circledast:"\u229B",circledcirc:"\u229A",circleddash:"\u229D",CircleDot:"\u2299",circledR:"\xAE",circledS:"\u24C8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cir:"\u25CB",cirE:"\u29C3",cire:"\u2257",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201D",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",colon:":",Colon:"\u2237",Colone:"\u2A74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2A6D",Congruent:"\u2261",conint:"\u222E",Conint:"\u222F",ContourIntegral:"\u222E",copf:"\u{1D554}",Copf:"\u2102",coprod:"\u2210",Coproduct:"\u2210",copy:"\xA9",COPY:"\xA9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21B5",cross:"\u2717",Cross:"\u2A2F",Cscr:"\u{1D49E}",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",cuesc:"\u22DF",cularr:"\u21B6",cularrp:"\u293D",cupbrcap:"\u2A48",cupcap:"\u2A46",CupCap:"\u224D",cup:"\u222A",Cup:"\u22D3",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curarrm:"\u293C",curlyeqprec:"\u22DE",curlyeqsucc:"\u22DF",curlyvee:"\u22CE",curlywedge:"\u22CF",curren:"\xA4",curvearrowleft:"\u21B6",curvearrowright:"\u21B7",cuvee:"\u22CE",cuwed:"\u22CF",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232D",dagger:"\u2020",Dagger:"\u2021",daleth:"\u2138",darr:"\u2193",Darr:"\u21A1",dArr:"\u21D3",dash:"\u2010",Dashv:"\u2AE4",dashv:"\u22A3",dbkarow:"\u290F",dblac:"\u02DD",Dcaron:"\u010E",dcaron:"\u010F",Dcy:"\u0414",dcy:"\u0434",ddagger:"\u2021",ddarr:"\u21CA",DD:"\u2145",dd:"\u2146",DDotrahd:"\u2911",ddotseq:"\u2A77",deg:"\xB0",Del:"\u2207",Delta:"\u0394",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",Dfr:"\u{1D507}",dfr:"\u{1D521}",dHar:"\u2965",dharl:"\u21C3",dharr:"\u21C2",DiacriticalAcute:"\xB4",DiacriticalDot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",DiacriticalGrave:"`",DiacriticalTilde:"\u02DC",diam:"\u22C4",diamond:"\u22C4",Diamond:"\u22C4",diamondsuit:"\u2666",diams:"\u2666",die:"\xA8",DifferentialD:"\u2146",digamma:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231E",dlcrop:"\u230D",dollar:"$",Dopf:"\u{1D53B}",dopf:"\u{1D555}",Dot:"\xA8",dot:"\u02D9",DotDot:"\u20DC",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22A1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222F",DoubleDot:"\xA8",DoubleDownArrow:"\u21D3",DoubleLeftArrow:"\u21D0",DoubleLeftRightArrow:"\u21D4",DoubleLeftTee:"\u2AE4",DoubleLongLeftArrow:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",DoubleLongRightArrow:"\u27F9",DoubleRightArrow:"\u21D2",DoubleRightTee:"\u22A8",DoubleUpArrow:"\u21D1",DoubleUpDownArrow:"\u21D5",DoubleVerticalBar:"\u2225",DownArrowBar:"\u2913",downarrow:"\u2193",DownArrow:"\u2193",Downarrow:"\u21D3",DownArrowUpArrow:"\u21F5",DownBreve:"\u0311",downdownarrows:"\u21CA",downharpoonleft:"\u21C3",downharpoonright:"\u21C2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVectorBar:"\u2956",DownLeftVector:"\u21BD",DownRightTeeVector:"\u295F",DownRightVectorBar:"\u2957",DownRightVector:"\u21C1",DownTeeArrow:"\u21A7",DownTee:"\u22A4",drbkarow:"\u2910",drcorn:"\u231F",drcrop:"\u230C",Dscr:"\u{1D49F}",dscr:"\u{1D4B9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29F6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",dtrif:"\u25BE",duarr:"\u21F5",duhar:"\u296F",dwangle:"\u29A6",DZcy:"\u040F",dzcy:"\u045F",dzigrarr:"\u27FF",Eacute:"\xC9",eacute:"\xE9",easter:"\u2A6E",Ecaron:"\u011A",ecaron:"\u011B",Ecirc:"\xCA",ecirc:"\xEA",ecir:"\u2256",ecolon:"\u2255",Ecy:"\u042D",ecy:"\u044D",eDDot:"\u2A77",Edot:"\u0116",edot:"\u0117",eDot:"\u2251",ee:"\u2147",efDot:"\u2252",Efr:"\u{1D508}",efr:"\u{1D522}",eg:"\u2A9A",Egrave:"\xC8",egrave:"\xE8",egs:"\u2A96",egsdot:"\u2A98",el:"\u2A99",Element:"\u2208",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",elsdot:"\u2A97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25FB",emptyv:"\u2205",EmptyVerySmallSquare:"\u25AB",emsp13:"\u2004",emsp14:"\u2005",emsp:"\u2003",ENG:"\u014A",eng:"\u014B",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1D53C}",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",Epsilon:"\u0395",epsilon:"\u03B5",epsiv:"\u03F5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2A96",eqslantless:"\u2A95",Equal:"\u2A75",equals:"=",EqualTilde:"\u2242",equest:"\u225F",Equilibrium:"\u21CC",equiv:"\u2261",equivDD:"\u2A78",eqvparsl:"\u29E5",erarr:"\u2971",erDot:"\u2253",escr:"\u212F",Escr:"\u2130",esdot:"\u2250",Esim:"\u2A73",esim:"\u2242",Eta:"\u0397",eta:"\u03B7",ETH:"\xD0",eth:"\xF0",Euml:"\xCB",euml:"\xEB",euro:"\u20AC",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",exponentiale:"\u2147",ExponentialE:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",Ffr:"\u{1D509}",ffr:"\u{1D523}",filig:"\uFB01",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",Fopf:"\u{1D53D}",fopf:"\u{1D557}",forall:"\u2200",ForAll:"\u2200",fork:"\u22D4",forkv:"\u2AD9",Fouriertrf:"\u2131",fpartint:"\u2A0D",frac12:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",fscr:"\u{1D4BB}",Fscr:"\u2131",gacute:"\u01F5",Gamma:"\u0393",gamma:"\u03B3",Gammad:"\u03DC",gammad:"\u03DD",gap:"\u2A86",Gbreve:"\u011E",gbreve:"\u011F",Gcedil:"\u0122",Gcirc:"\u011C",gcirc:"\u011D",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",ge:"\u2265",gE:"\u2267",gEl:"\u2A8C",gel:"\u22DB",geq:"\u2265",geqq:"\u2267",geqslant:"\u2A7E",gescc:"\u2AA9",ges:"\u2A7E",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",Gfr:"\u{1D50A}",gfr:"\u{1D524}",gg:"\u226B",Gg:"\u22D9",ggg:"\u22D9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gla:"\u2AA5",gl:"\u2277",glE:"\u2A92",glj:"\u2AA4",gnap:"\u2A8A",gnapprox:"\u2A8A",gne:"\u2A88",gnE:"\u2269",gneq:"\u2A88",gneqq:"\u2269",gnsim:"\u22E7",Gopf:"\u{1D53E}",gopf:"\u{1D558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22DB",GreaterFullEqual:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2A7E",GreaterTilde:"\u2273",Gscr:"\u{1D4A2}",gscr:"\u210A",gsim:"\u2273",gsime:"\u2A8E",gsiml:"\u2A90",gtcc:"\u2AA7",gtcir:"\u2A7A",gt:">",GT:">",Gt:"\u226B",gtdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrapprox:"\u2A86",gtrarr:"\u2978",gtrdot:"\u22D7",gtreqless:"\u22DB",gtreqqless:"\u2A8C",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",Hacek:"\u02C7",hairsp:"\u200A",half:"\xBD",hamilt:"\u210B",HARDcy:"\u042A",hardcy:"\u044A",harrcir:"\u2948",harr:"\u2194",hArr:"\u21D4",harrw:"\u21AD",Hat:"^",hbar:"\u210F",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22B9",hfr:"\u{1D525}",Hfr:"\u210C",HilbertSpace:"\u210B",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",hookrightarrow:"\u21AA",hopf:"\u{1D559}",Hopf:"\u210D",horbar:"\u2015",HorizontalLine:"\u2500",hscr:"\u{1D4BD}",Hscr:"\u210B",hslash:"\u210F",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224E",HumpEqual:"\u224F",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xCD",iacute:"\xED",ic:"\u2063",Icirc:"\xCE",icirc:"\xEE",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xA1",iff:"\u21D4",ifr:"\u{1D526}",Ifr:"\u2111",Igrave:"\xCC",igrave:"\xEC",ii:"\u2148",iiiint:"\u2A0C",iiint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Imacr:"\u012A",imacr:"\u012B",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",Im:"\u2111",imof:"\u22B7",imped:"\u01B5",Implies:"\u21D2",incare:"\u2105",in:"\u2208",infin:"\u221E",infintie:"\u29DD",inodot:"\u0131",intcal:"\u22BA",int:"\u222B",Int:"\u222C",integers:"\u2124",Integral:"\u222B",intercal:"\u22BA",Intersection:"\u22C2",intlarhk:"\u2A17",intprod:"\u2A3C",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012E",iogon:"\u012F",Iopf:"\u{1D540}",iopf:"\u{1D55A}",Iota:"\u0399",iota:"\u03B9",iprod:"\u2A3C",iquest:"\xBF",iscr:"\u{1D4BE}",Iscr:"\u2110",isin:"\u2208",isindot:"\u22F5",isinE:"\u22F9",isins:"\u22F4",isinsv:"\u22F3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xCF",iuml:"\xEF",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1D50D}",jfr:"\u{1D527}",jmath:"\u0237",Jopf:"\u{1D541}",jopf:"\u{1D55B}",Jscr:"\u{1D4A5}",jscr:"\u{1D4BF}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039A",kappa:"\u03BA",kappav:"\u03F0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041A",kcy:"\u043A",Kfr:"\u{1D50E}",kfr:"\u{1D528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040C",kjcy:"\u045C",Kopf:"\u{1D542}",kopf:"\u{1D55C}",Kscr:"\u{1D4A6}",kscr:"\u{1D4C0}",lAarr:"\u21DA",Lacute:"\u0139",lacute:"\u013A",laemptyv:"\u29B4",lagran:"\u2112",Lambda:"\u039B",lambda:"\u03BB",lang:"\u27E8",Lang:"\u27EA",langd:"\u2991",langle:"\u27E8",lap:"\u2A85",Laplacetrf:"\u2112",laquo:"\xAB",larrb:"\u21E4",larrbfs:"\u291F",larr:"\u2190",Larr:"\u219E",lArr:"\u21D0",larrfs:"\u291D",larrhk:"\u21A9",larrlp:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",latail:"\u2919",lAtail:"\u291B",lat:"\u2AAB",late:"\u2AAD",lates:"\u2AAD\uFE00",lbarr:"\u290C",lBarr:"\u290E",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",Lcaron:"\u013D",lcaron:"\u013E",Lcedil:"\u013B",lcedil:"\u013C",lceil:"\u2308",lcub:"{",Lcy:"\u041B",lcy:"\u043B",ldca:"\u2936",ldquo:"\u201C",ldquor:"\u201E",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",le:"\u2264",lE:"\u2266",LeftAngleBracket:"\u27E8",LeftArrowBar:"\u21E4",leftarrow:"\u2190",LeftArrow:"\u2190",Leftarrow:"\u21D0",LeftArrowRightArrow:"\u21C6",leftarrowtail:"\u21A2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVectorBar:"\u2959",LeftDownVector:"\u21C3",LeftFloor:"\u230A",leftharpoondown:"\u21BD",leftharpoonup:"\u21BC",leftleftarrows:"\u21C7",leftrightarrow:"\u2194",LeftRightArrow:"\u2194",Leftrightarrow:"\u21D4",leftrightarrows:"\u21C6",leftrightharpoons:"\u21CB",leftrightsquigarrow:"\u21AD",LeftRightVector:"\u294E",LeftTeeArrow:"\u21A4",LeftTee:"\u22A3",LeftTeeVector:"\u295A",leftthreetimes:"\u22CB",LeftTriangleBar:"\u29CF",LeftTriangle:"\u22B2",LeftTriangleEqual:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVectorBar:"\u2958",LeftUpVector:"\u21BF",LeftVectorBar:"\u2952",LeftVector:"\u21BC",lEg:"\u2A8B",leg:"\u22DA",leq:"\u2264",leqq:"\u2266",leqslant:"\u2A7D",lescc:"\u2AA8",les:"\u2A7D",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessapprox:"\u2A85",lessdot:"\u22D6",lesseqgtr:"\u22DA",lesseqqgtr:"\u2A8B",LessEqualGreater:"\u22DA",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2AA1",lesssim:"\u2272",LessSlantEqual:"\u2A7D",LessTilde:"\u2272",lfisht:"\u297C",lfloor:"\u230A",Lfr:"\u{1D50F}",lfr:"\u{1D529}",lg:"\u2276",lgE:"\u2A91",lHar:"\u2962",lhard:"\u21BD",lharu:"\u21BC",lharul:"\u296A",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",llarr:"\u21C7",ll:"\u226A",Ll:"\u22D8",llcorner:"\u231E",Lleftarrow:"\u21DA",llhard:"\u296B",lltri:"\u25FA",Lmidot:"\u013F",lmidot:"\u0140",lmoustache:"\u23B0",lmoust:"\u23B0",lnap:"\u2A89",lnapprox:"\u2A89",lne:"\u2A87",lnE:"\u2268",lneq:"\u2A87",lneqq:"\u2268",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",lobrk:"\u27E6",longleftarrow:"\u27F5",LongLeftArrow:"\u27F5",Longleftarrow:"\u27F8",longleftrightarrow:"\u27F7",LongLeftRightArrow:"\u27F7",Longleftrightarrow:"\u27FA",longmapsto:"\u27FC",longrightarrow:"\u27F6",LongRightArrow:"\u27F6",Longrightarrow:"\u27F9",looparrowleft:"\u21AB",looparrowright:"\u21AC",lopar:"\u2985",Lopf:"\u{1D543}",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25CA",lozenge:"\u25CA",lozf:"\u29EB",lpar:"(",lparlt:"\u2993",lrarr:"\u21C6",lrcorner:"\u231F",lrhar:"\u21CB",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",lscr:"\u{1D4C1}",Lscr:"\u2112",lsh:"\u21B0",Lsh:"\u21B0",lsim:"\u2272",lsime:"\u2A8D",lsimg:"\u2A8F",lsqb:"[",lsquo:"\u2018",lsquor:"\u201A",Lstrok:"\u0141",lstrok:"\u0142",ltcc:"\u2AA6",ltcir:"\u2A79",lt:"<",LT:"<",Lt:"\u226A",ltdot:"\u22D6",lthree:"\u22CB",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltri:"\u25C3",ltrie:"\u22B4",ltrif:"\u25C2",ltrPar:"\u2996",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",macr:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21A6",mapsto:"\u21A6",mapstodown:"\u21A7",mapstoleft:"\u21A4",mapstoup:"\u21A5",marker:"\u25AE",mcomma:"\u2A29",Mcy:"\u041C",mcy:"\u043C",mdash:"\u2014",mDDot:"\u223A",measuredangle:"\u2221",MediumSpace:"\u205F",Mellintrf:"\u2133",Mfr:"\u{1D510}",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",midast:"*",midcir:"\u2AF0",mid:"\u2223",middot:"\xB7",minusb:"\u229F",minus:"\u2212",minusd:"\u2238",minusdu:"\u2A2A",MinusPlus:"\u2213",mlcp:"\u2ADB",mldr:"\u2026",mnplus:"\u2213",models:"\u22A7",Mopf:"\u{1D544}",mopf:"\u{1D55E}",mp:"\u2213",mscr:"\u{1D4C2}",Mscr:"\u2133",mstpos:"\u223E",Mu:"\u039C",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20D2",nap:"\u2249",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",napprox:"\u2249",natural:"\u266E",naturals:"\u2115",natur:"\u266E",nbsp:"\xA0",nbump:"\u224E\u0338",nbumpe:"\u224F\u0338",ncap:"\u2A43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",Ncy:"\u041D",ncy:"\u043D",ndash:"\u2013",nearhk:"\u2924",nearr:"\u2197",neArr:"\u21D7",nearrow:"\u2197",ne:"\u2260",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226B",NestedLessLess:"\u226A",NewLine:`
`,nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1D511}",nfr:"\u{1D52B}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",nGg:"\u22D9\u0338",ngsim:"\u2275",nGt:"\u226B\u20D2",ngt:"\u226F",ngtr:"\u226F",nGtv:"\u226B\u0338",nharr:"\u21AE",nhArr:"\u21CE",nhpar:"\u2AF2",ni:"\u220B",nis:"\u22FC",nisd:"\u22FA",niv:"\u220B",NJcy:"\u040A",njcy:"\u045A",nlarr:"\u219A",nlArr:"\u21CD",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nleftarrow:"\u219A",nLeftarrow:"\u21CD",nleftrightarrow:"\u21AE",nLeftrightarrow:"\u21CE",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",nless:"\u226E",nLl:"\u22D8\u0338",nlsim:"\u2274",nLt:"\u226A\u20D2",nlt:"\u226E",nltri:"\u22EA",nltrie:"\u22EC",nLtv:"\u226A\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xA0",nopf:"\u{1D55F}",Nopf:"\u2115",Not:"\u2AEC",not:"\xAC",NotCongruent:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226F",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",notin:"\u2209",notindot:"\u22F5\u0338",notinE:"\u22F9\u0338",notinva:"\u2209",notinvb:"\u22F7",notinvc:"\u22F6",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangle:"\u22EA",NotLeftTriangleEqual:"\u22EC",NotLess:"\u226E",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",notni:"\u220C",notniva:"\u220C",notnivb:"\u22FE",notnivc:"\u22FD",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",NotReverseElement:"\u220C",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangle:"\u22EB",NotRightTriangleEqual:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",NotSubset:"\u2282\u20D2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",nparallel:"\u2226",npar:"\u2226",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",npr:"\u2280",nprcue:"\u22E0",nprec:"\u2280",npreceq:"\u2AAF\u0338",npre:"\u2AAF\u0338",nrarrc:"\u2933\u0338",nrarr:"\u219B",nrArr:"\u21CF",nrarrw:"\u219D\u0338",nrightarrow:"\u219B",nRightarrow:"\u21CF",nrtri:"\u22EB",nrtrie:"\u22ED",nsc:"\u2281",nsccue:"\u22E1",nsce:"\u2AB0\u0338",Nscr:"\u{1D4A9}",nscr:"\u{1D4C3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22E2",nsqsupe:"\u22E3",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsube:"\u2288",nsubset:"\u2282\u20D2",nsubseteq:"\u2288",nsubseteqq:"\u2AC5\u0338",nsucc:"\u2281",nsucceq:"\u2AB0\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20D2",nsupseteq:"\u2289",nsupseteqq:"\u2AC6\u0338",ntgl:"\u2279",Ntilde:"\xD1",ntilde:"\xF1",ntlg:"\u2278",ntriangleleft:"\u22EA",ntrianglelefteq:"\u22EC",ntriangleright:"\u22EB",ntrianglerighteq:"\u22ED",Nu:"\u039D",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224D\u20D2",nvdash:"\u22AC",nvDash:"\u22AD",nVdash:"\u22AE",nVDash:"\u22AF",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvHarr:"\u2904",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwarhk:"\u2923",nwarr:"\u2196",nwArr:"\u21D6",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xD3",oacute:"\xF3",oast:"\u229B",Ocirc:"\xD4",ocirc:"\xF4",ocir:"\u229A",Ocy:"\u041E",ocy:"\u043E",odash:"\u229D",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2A38",odot:"\u2299",odsold:"\u29BC",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29BF",Ofr:"\u{1D512}",ofr:"\u{1D52C}",ogon:"\u02DB",Ograve:"\xD2",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",ohm:"\u03A9",oint:"\u222E",olarr:"\u21BA",olcir:"\u29BE",olcross:"\u29BB",oline:"\u203E",olt:"\u29C0",Omacr:"\u014C",omacr:"\u014D",Omega:"\u03A9",omega:"\u03C9",Omicron:"\u039F",omicron:"\u03BF",omid:"\u29B6",ominus:"\u2296",Oopf:"\u{1D546}",oopf:"\u{1D560}",opar:"\u29B7",OpenCurlyDoubleQuote:"\u201C",OpenCurlyQuote:"\u2018",operp:"\u29B9",oplus:"\u2295",orarr:"\u21BB",Or:"\u2A54",or:"\u2228",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oS:"\u24C8",Oscr:"\u{1D4AA}",oscr:"\u2134",Oslash:"\xD8",oslash:"\xF8",osol:"\u2298",Otilde:"\xD5",otilde:"\xF5",otimesas:"\u2A36",Otimes:"\u2A37",otimes:"\u2297",Ouml:"\xD6",ouml:"\xF6",ovbar:"\u233D",OverBar:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",OverParenthesis:"\u23DC",para:"\xB6",parallel:"\u2225",par:"\u2225",parsim:"\u2AF3",parsl:"\u2AFD",part:"\u2202",PartialD:"\u2202",Pcy:"\u041F",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",perp:"\u22A5",pertenk:"\u2031",Pfr:"\u{1D513}",pfr:"\u{1D52D}",Phi:"\u03A6",phi:"\u03C6",phiv:"\u03D5",phmmat:"\u2133",phone:"\u260E",Pi:"\u03A0",pi:"\u03C0",pitchfork:"\u22D4",piv:"\u03D6",planck:"\u210F",planckh:"\u210E",plankv:"\u210F",plusacir:"\u2A23",plusb:"\u229E",pluscir:"\u2A22",plus:"+",plusdo:"\u2214",plusdu:"\u2A25",pluse:"\u2A72",PlusMinus:"\xB1",plusmn:"\xB1",plussim:"\u2A26",plustwo:"\u2A27",pm:"\xB1",Poincareplane:"\u210C",pointint:"\u2A15",popf:"\u{1D561}",Popf:"\u2119",pound:"\xA3",prap:"\u2AB7",Pr:"\u2ABB",pr:"\u227A",prcue:"\u227C",precapprox:"\u2AB7",prec:"\u227A",preccurlyeq:"\u227C",Precedes:"\u227A",PrecedesEqual:"\u2AAF",PrecedesSlantEqual:"\u227C",PrecedesTilde:"\u227E",preceq:"\u2AAF",precnapprox:"\u2AB9",precneqq:"\u2AB5",precnsim:"\u22E8",pre:"\u2AAF",prE:"\u2AB3",precsim:"\u227E",prime:"\u2032",Prime:"\u2033",primes:"\u2119",prnap:"\u2AB9",prnE:"\u2AB5",prnsim:"\u22E8",prod:"\u220F",Product:"\u220F",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prop:"\u221D",Proportional:"\u221D",Proportion:"\u2237",propto:"\u221D",prsim:"\u227E",prurel:"\u22B0",Pscr:"\u{1D4AB}",pscr:"\u{1D4C5}",Psi:"\u03A8",psi:"\u03C8",puncsp:"\u2008",Qfr:"\u{1D514}",qfr:"\u{1D52E}",qint:"\u2A0C",qopf:"\u{1D562}",Qopf:"\u211A",qprime:"\u2057",Qscr:"\u{1D4AC}",qscr:"\u{1D4C6}",quaternions:"\u210D",quatint:"\u2A16",quest:"?",questeq:"\u225F",quot:'"',QUOT:'"',rAarr:"\u21DB",race:"\u223D\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221A",raemptyv:"\u29B3",rang:"\u27E9",Rang:"\u27EB",rangd:"\u2992",range:"\u29A5",rangle:"\u27E9",raquo:"\xBB",rarrap:"\u2975",rarrb:"\u21E5",rarrbfs:"\u2920",rarrc:"\u2933",rarr:"\u2192",Rarr:"\u21A0",rArr:"\u21D2",rarrfs:"\u291E",rarrhk:"\u21AA",rarrlp:"\u21AC",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21A3",rarrw:"\u219D",ratail:"\u291A",rAtail:"\u291C",ratio:"\u2236",rationals:"\u211A",rbarr:"\u290D",rBarr:"\u290F",RBarr:"\u2910",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201D",rdquor:"\u201D",rdsh:"\u21B3",real:"\u211C",realine:"\u211B",realpart:"\u211C",reals:"\u211D",Re:"\u211C",rect:"\u25AD",reg:"\xAE",REG:"\xAE",ReverseElement:"\u220B",ReverseEquilibrium:"\u21CB",ReverseUpEquilibrium:"\u296F",rfisht:"\u297D",rfloor:"\u230B",rfr:"\u{1D52F}",Rfr:"\u211C",rHar:"\u2964",rhard:"\u21C1",rharu:"\u21C0",rharul:"\u296C",Rho:"\u03A1",rho:"\u03C1",rhov:"\u03F1",RightAngleBracket:"\u27E9",RightArrowBar:"\u21E5",rightarrow:"\u2192",RightArrow:"\u2192",Rightarrow:"\u21D2",RightArrowLeftArrow:"\u21C4",rightarrowtail:"\u21A3",RightCeiling:"\u2309",RightDoubleBracket:"\u27E7",RightDownTeeVector:"\u295D",RightDownVectorBar:"\u2955",RightDownVector:"\u21C2",RightFloor:"\u230B",rightharpoondown:"\u21C1",rightharpoonup:"\u21C0",rightleftarrows:"\u21C4",rightleftharpoons:"\u21CC",rightrightarrows:"\u21C9",rightsquigarrow:"\u219D",RightTeeArrow:"\u21A6",RightTee:"\u22A2",RightTeeVector:"\u295B",rightthreetimes:"\u22CC",RightTriangleBar:"\u29D0",RightTriangle:"\u22B3",RightTriangleEqual:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVectorBar:"\u2954",RightUpVector:"\u21BE",RightVectorBar:"\u2953",RightVector:"\u21C0",ring:"\u02DA",risingdotseq:"\u2253",rlarr:"\u21C4",rlhar:"\u21CC",rlm:"\u200F",rmoustache:"\u23B1",rmoust:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",robrk:"\u27E7",ropar:"\u2986",ropf:"\u{1D563}",Ropf:"\u211D",roplus:"\u2A2E",rotimes:"\u2A35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rrarr:"\u21C9",Rrightarrow:"\u21DB",rsaquo:"\u203A",rscr:"\u{1D4C7}",Rscr:"\u211B",rsh:"\u21B1",Rsh:"\u21B1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22CC",rtimes:"\u22CA",rtri:"\u25B9",rtrie:"\u22B5",rtrif:"\u25B8",rtriltri:"\u29CE",RuleDelayed:"\u29F4",ruluhar:"\u2968",rx:"\u211E",Sacute:"\u015A",sacute:"\u015B",sbquo:"\u201A",scap:"\u2AB8",Scaron:"\u0160",scaron:"\u0161",Sc:"\u2ABC",sc:"\u227B",sccue:"\u227D",sce:"\u2AB0",scE:"\u2AB4",Scedil:"\u015E",scedil:"\u015F",Scirc:"\u015C",scirc:"\u015D",scnap:"\u2ABA",scnE:"\u2AB6",scnsim:"\u22E9",scpolint:"\u2A13",scsim:"\u227F",Scy:"\u0421",scy:"\u0441",sdotb:"\u22A1",sdot:"\u22C5",sdote:"\u2A66",searhk:"\u2925",searr:"\u2198",seArr:"\u21D8",searrow:"\u2198",sect:"\xA7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1D516}",sfr:"\u{1D530}",sfrown:"\u2322",sharp:"\u266F",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xAD",Sigma:"\u03A3",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",sim:"\u223C",simdot:"\u2A6A",sime:"\u2243",simeq:"\u2243",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2A33",smeparsl:"\u29E4",smid:"\u2223",smile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",SOFTcy:"\u042C",softcy:"\u044C",solbar:"\u233F",solb:"\u29C4",sol:"/",Sopf:"\u{1D54A}",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\uFE00",sqcup:"\u2294",sqcups:"\u2294\uFE00",Sqrt:"\u221A",sqsub:"\u228F",sqsube:"\u2291",sqsubset:"\u228F",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",square:"\u25A1",Square:"\u25A1",SquareIntersection:"\u2293",SquareSubset:"\u228F",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25AA",squ:"\u25A1",squf:"\u25AA",srarr:"\u2192",Sscr:"\u{1D4AE}",sscr:"\u{1D4C8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22C6",Star:"\u22C6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03F5",straightphi:"\u03D5",strns:"\xAF",sub:"\u2282",Sub:"\u22D0",subdot:"\u2ABD",subE:"\u2AC5",sube:"\u2286",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subne:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",subset:"\u2282",Subset:"\u22D0",subseteq:"\u2286",subseteqq:"\u2AC5",SubsetEqual:"\u2286",subsetneq:"\u228A",subsetneqq:"\u2ACB",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",succapprox:"\u2AB8",succ:"\u227B",succcurlyeq:"\u227D",Succeeds:"\u227B",SucceedsEqual:"\u2AB0",SucceedsSlantEqual:"\u227D",SucceedsTilde:"\u227F",succeq:"\u2AB0",succnapprox:"\u2ABA",succneqq:"\u2AB6",succnsim:"\u22E9",succsim:"\u227F",SuchThat:"\u220B",sum:"\u2211",Sum:"\u2211",sung:"\u266A",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",sup:"\u2283",Sup:"\u22D1",supdot:"\u2ABE",supdsub:"\u2AD8",supE:"\u2AC6",supe:"\u2287",supedot:"\u2AC4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supne:"\u228B",supplus:"\u2AC0",supset:"\u2283",Supset:"\u22D1",supseteq:"\u2287",supseteqq:"\u2AC6",supsetneq:"\u228B",supsetneqq:"\u2ACC",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swarhk:"\u2926",swarr:"\u2199",swArr:"\u21D9",swarrow:"\u2199",swnwar:"\u292A",szlig:"\xDF",Tab:"	",target:"\u2316",Tau:"\u03A4",tau:"\u03C4",tbrk:"\u23B4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20DB",telrec:"\u2315",Tfr:"\u{1D517}",tfr:"\u{1D531}",there4:"\u2234",therefore:"\u2234",Therefore:"\u2234",Theta:"\u0398",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",thickapprox:"\u2248",thicksim:"\u223C",ThickSpace:"\u205F\u200A",ThinSpace:"\u2009",thinsp:"\u2009",thkap:"\u2248",thksim:"\u223C",THORN:"\xDE",thorn:"\xFE",tilde:"\u02DC",Tilde:"\u223C",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",timesbar:"\u2A31",timesb:"\u22A0",times:"\xD7",timesd:"\u2A30",tint:"\u222D",toea:"\u2928",topbot:"\u2336",topcir:"\u2AF1",top:"\u22A4",Topf:"\u{1D54B}",topf:"\u{1D565}",topfork:"\u2ADA",tosa:"\u2929",tprime:"\u2034",trade:"\u2122",TRADE:"\u2122",triangle:"\u25B5",triangledown:"\u25BF",triangleleft:"\u25C3",trianglelefteq:"\u22B4",triangleq:"\u225C",triangleright:"\u25B9",trianglerighteq:"\u22B5",tridot:"\u25EC",trie:"\u225C",triminus:"\u2A3A",TripleDot:"\u20DB",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",Tscr:"\u{1D4AF}",tscr:"\u{1D4C9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040B",tshcy:"\u045B",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226C",twoheadleftarrow:"\u219E",twoheadrightarrow:"\u21A0",Uacute:"\xDA",uacute:"\xFA",uarr:"\u2191",Uarr:"\u219F",uArr:"\u21D1",Uarrocir:"\u2949",Ubrcy:"\u040E",ubrcy:"\u045E",Ubreve:"\u016C",ubreve:"\u016D",Ucirc:"\xDB",ucirc:"\xFB",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21C5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296E",ufisht:"\u297E",Ufr:"\u{1D518}",ufr:"\u{1D532}",Ugrave:"\xD9",ugrave:"\xF9",uHar:"\u2963",uharl:"\u21BF",uharr:"\u21BE",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",Umacr:"\u016A",umacr:"\u016B",uml:"\xA8",UnderBar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",UnionPlus:"\u228E",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1D54C}",uopf:"\u{1D566}",UpArrowBar:"\u2912",uparrow:"\u2191",UpArrow:"\u2191",Uparrow:"\u21D1",UpArrowDownArrow:"\u21C5",updownarrow:"\u2195",UpDownArrow:"\u2195",Updownarrow:"\u21D5",UpEquilibrium:"\u296E",upharpoonleft:"\u21BF",upharpoonright:"\u21BE",uplus:"\u228E",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",upsi:"\u03C5",Upsi:"\u03D2",upsih:"\u03D2",Upsilon:"\u03A5",upsilon:"\u03C5",UpTeeArrow:"\u21A5",UpTee:"\u22A5",upuparrows:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",Uring:"\u016E",uring:"\u016F",urtri:"\u25F9",Uscr:"\u{1D4B0}",uscr:"\u{1D4CA}",utdot:"\u22F0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25B5",utrif:"\u25B4",uuarr:"\u21C8",Uuml:"\xDC",uuml:"\xFC",uwangle:"\u29A7",vangrt:"\u299C",varepsilon:"\u03F5",varkappa:"\u03F0",varnothing:"\u2205",varphi:"\u03D5",varpi:"\u03D6",varpropto:"\u221D",varr:"\u2195",vArr:"\u21D5",varrho:"\u03F1",varsigma:"\u03C2",varsubsetneq:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vartheta:"\u03D1",vartriangleleft:"\u22B2",vartriangleright:"\u22B3",vBar:"\u2AE8",Vbar:"\u2AEB",vBarv:"\u2AE9",Vcy:"\u0412",vcy:"\u0432",vdash:"\u22A2",vDash:"\u22A8",Vdash:"\u22A9",VDash:"\u22AB",Vdashl:"\u2AE6",veebar:"\u22BB",vee:"\u2228",Vee:"\u22C1",veeeq:"\u225A",vellip:"\u22EE",verbar:"|",Verbar:"\u2016",vert:"|",Vert:"\u2016",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200A",Vfr:"\u{1D519}",vfr:"\u{1D533}",vltri:"\u22B2",vnsub:"\u2282\u20D2",vnsup:"\u2283\u20D2",Vopf:"\u{1D54D}",vopf:"\u{1D567}",vprop:"\u221D",vrtri:"\u22B3",Vscr:"\u{1D4B1}",vscr:"\u{1D4CB}",vsubnE:"\u2ACB\uFE00",vsubne:"\u228A\uFE00",vsupnE:"\u2ACC\uFE00",vsupne:"\u228B\uFE00",Vvdash:"\u22AA",vzigzag:"\u299A",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2A5F",wedge:"\u2227",Wedge:"\u22C0",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1D51A}",wfr:"\u{1D534}",Wopf:"\u{1D54E}",wopf:"\u{1D568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1D4B2}",wscr:"\u{1D4CC}",xcap:"\u22C2",xcirc:"\u25EF",xcup:"\u22C3",xdtri:"\u25BD",Xfr:"\u{1D51B}",xfr:"\u{1D535}",xharr:"\u27F7",xhArr:"\u27FA",Xi:"\u039E",xi:"\u03BE",xlarr:"\u27F5",xlArr:"\u27F8",xmap:"\u27FC",xnis:"\u22FB",xodot:"\u2A00",Xopf:"\u{1D54F}",xopf:"\u{1D569}",xoplus:"\u2A01",xotime:"\u2A02",xrarr:"\u27F6",xrArr:"\u27F9",Xscr:"\u{1D4B3}",xscr:"\u{1D4CD}",xsqcup:"\u2A06",xuplus:"\u2A04",xutri:"\u25B3",xvee:"\u22C1",xwedge:"\u22C0",Yacute:"\xDD",yacute:"\xFD",YAcy:"\u042F",yacy:"\u044F",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042B",ycy:"\u044B",yen:"\xA5",Yfr:"\u{1D51C}",yfr:"\u{1D536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1D550}",yopf:"\u{1D56A}",Yscr:"\u{1D4B4}",yscr:"\u{1D4CE}",YUcy:"\u042E",yucy:"\u044E",yuml:"\xFF",Yuml:"\u0178",Zacute:"\u0179",zacute:"\u017A",Zcaron:"\u017D",zcaron:"\u017E",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017B",zdot:"\u017C",zeetrf:"\u2128",ZeroWidthSpace:"\u200B",Zeta:"\u0396",zeta:"\u03B6",zfr:"\u{1D537}",Zfr:"\u2128",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21DD",zopf:"\u{1D56B}",Zopf:"\u2124",Zscr:"\u{1D4B5}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"}});var U0=I((M_e,vU)=>{"use strict";vU.exports=gU()});var Ig=I((q_e,yU)=>{yU.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/});var bU=I(($_e,CU)=>{"use strict";var wU={};function Jse(t){var e,r,n=wU[t];if(n)return n;for(n=wU[t]=[],e=0;e<128;e++)r=String.fromCharCode(e),/^[0-9a-z]$/i.test(r)?n.push(r):n.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2));for(e=0;e<t.length;e++)n[t.charCodeAt(e)]=t[e];return n}function Tg(t,e,r){var n,i,o,s,a,c="";for(typeof e!="string"&&(r=e,e=Tg.defaultChars),typeof r=="undefined"&&(r=!0),a=Jse(e),n=0,i=t.length;n<i;n++){if(o=t.charCodeAt(n),r&&o===37&&n+2<i&&/^[0-9a-f]{2}$/i.test(t.slice(n+1,n+3))){c+=t.slice(n,n+3),n+=2;continue}if(o<128){c+=a[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&n+1<i&&(s=t.charCodeAt(n+1),s>=56320&&s<=57343)){c+=encodeURIComponent(t[n]+t[n+1]),n++;continue}c+="%EF%BF%BD";continue}c+=encodeURIComponent(t[n])}return c}Tg.defaultChars=";/?:@&=+$,-_.!~*'()#";Tg.componentChars="-_.!~*'()";CU.exports=Tg});var SU=I((j_e,_U)=>{"use strict";var EU={};function Qse(t){var e,r,n=EU[t];if(n)return n;for(n=EU[t]=[],e=0;e<128;e++)r=String.fromCharCode(e),n.push(r);for(e=0;e<t.length;e++)r=t.charCodeAt(e),n[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2);return n}function Ag(t,e){var r;return typeof e!="string"&&(e=Ag.defaultChars),r=Qse(e),t.replace(/(%[a-f0-9]{2})+/gi,function(n){var i,o,s,a,c,l,u,d="";for(i=0,o=n.length;i<o;i+=3){if(s=parseInt(n.slice(i+1,i+3),16),s<128){d+=r[s];continue}if((s&224)==192&&i+3<o&&(a=parseInt(n.slice(i+4,i+6),16),(a&192)==128)){u=s<<6&1984|a&63,u<128?d+="\uFFFD\uFFFD":d+=String.fromCharCode(u),i+=3;continue}if((s&240)==224&&i+6<o&&(a=parseInt(n.slice(i+4,i+6),16),c=parseInt(n.slice(i+7,i+9),16),(a&192)==128&&(c&192)==128)){u=s<<12&61440|a<<6&4032|c&63,u<2048||u>=55296&&u<=57343?d+="\uFFFD\uFFFD\uFFFD":d+=String.fromCharCode(u),i+=6;continue}if((s&248)==240&&i+9<o&&(a=parseInt(n.slice(i+4,i+6),16),c=parseInt(n.slice(i+7,i+9),16),l=parseInt(n.slice(i+10,i+12),16),(a&192)==128&&(c&192)==128&&(l&192)==128)){u=s<<18&1835008|a<<12&258048|c<<6&4032|l&63,u<65536||u>1114111?d+="\uFFFD\uFFFD\uFFFD\uFFFD":(u-=65536,d+=String.fromCharCode(55296+(u>>10),56320+(u&1023))),i+=9;continue}d+="\uFFFD"}return d})}Ag.defaultChars=";/?:@&=+$,#";Ag.componentChars="";_U.exports=Ag});var PU=I((U_e,xU)=>{"use strict";xU.exports=function(e){var r="";return r+=e.protocol||"",r+=e.slashes?"//":"",r+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?r+="["+e.hostname+"]":r+=e.hostname||"",r+=e.port?":"+e.port:"",r+=e.pathname||"",r+=e.search||"",r+=e.hash||"",r}});var OU=I((B_e,RU)=>{"use strict";function Dg(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var Xse=/^([a-z0-9.+-]+:)/i,Zse=/:[0-9]*$/,eae=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,tae=["<",">",'"',"`"," ","\r",`
`,"	"],rae=["{","}","|","\\","^","`"].concat(tae),nae=["'"].concat(rae),kU=["%","/","?",";","#"].concat(nae),IU=["/","?","#"],iae=255,TU=/^[+a-z0-9A-Z_-]{0,63}$/,oae=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,AU={javascript:!0,"javascript:":!0},DU={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function sae(t,e){if(t&&t instanceof Dg)return t;var r=new Dg;return r.parse(t,e),r}Dg.prototype.parse=function(t,e){var r,n,i,o,s,a=t;if(a=a.trim(),!e&&t.split("#").length===1){var c=eae.exec(a);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}var l=Xse.exec(a);if(l&&(l=l[0],i=l.toLowerCase(),this.protocol=l,a=a.substr(l.length)),(e||l||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(s=a.substr(0,2)==="//",s&&!(l&&AU[l])&&(a=a.substr(2),this.slashes=!0)),!AU[l]&&(s||l&&!DU[l])){var u=-1;for(r=0;r<IU.length;r++)o=a.indexOf(IU[r]),o!==-1&&(u===-1||o<u)&&(u=o);var d,f;for(u===-1?f=a.lastIndexOf("@"):f=a.lastIndexOf("@",u),f!==-1&&(d=a.slice(0,f),a=a.slice(f+1),this.auth=d),u=-1,r=0;r<kU.length;r++)o=a.indexOf(kU[r]),o!==-1&&(u===-1||o<u)&&(u=o);u===-1&&(u=a.length),a[u-1]===":"&&u--;var p=a.slice(0,u);a=a.slice(u),this.parseHost(p),this.hostname=this.hostname||"";var h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){var m=this.hostname.split(/\./);for(r=0,n=m.length;r<n;r++){var g=m[r];if(!!g&&!g.match(TU)){for(var v="",w=0,b=g.length;w<b;w++)g.charCodeAt(w)>127?v+="x":v+=g[w];if(!v.match(TU)){var C=m.slice(0,r),S=m.slice(r+1),P=g.match(oae);P&&(C.push(P[1]),S.unshift(P[2])),S.length&&(a=S.join(".")+a),this.hostname=C.join(".");break}}}}this.hostname.length>iae&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var _=a.indexOf("#");_!==-1&&(this.hash=a.substr(_),a=a.slice(0,_));var k=a.indexOf("?");return k!==-1&&(this.search=a.substr(k),a=a.slice(0,k)),a&&(this.pathname=a),DU[i]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Dg.prototype.parseHost=function(t){var e=Zse.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};RU.exports=sae});var B0=I((H_e,qd)=>{"use strict";qd.exports.encode=bU();qd.exports.decode=SU();qd.exports.format=PU();qd.exports.parse=OU()});var H0=I((V_e,NU)=>{NU.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/});var V0=I((W_e,LU)=>{LU.exports=/[\0-\x1F\x7F-\x9F]/});var MU=I((G_e,FU)=>{FU.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/});var W0=I((z_e,qU)=>{qU.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/});var $U=I(Zc=>{"use strict";Zc.Any=H0();Zc.Cc=V0();Zc.Cf=MU();Zc.P=Ig();Zc.Z=W0()});var ze=I(Nt=>{"use strict";function aae(t){return Object.prototype.toString.call(t)}function cae(t){return aae(t)==="[object String]"}var lae=Object.prototype.hasOwnProperty;function jU(t,e){return lae.call(t,e)}function uae(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(r){if(!!r){if(typeof r!="object")throw new TypeError(r+"must be object");Object.keys(r).forEach(function(n){t[n]=r[n]})}}),t}function dae(t,e,r){return[].concat(t.slice(0,e),r,t.slice(e+1))}function UU(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)==65535||(t&65535)==65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function BU(t){if(t>65535){t-=65536;var e=55296+(t>>10),r=56320+(t&1023);return String.fromCharCode(e,r)}return String.fromCharCode(t)}var HU=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,fae=/&([a-z#][a-z0-9]{1,31});/gi,pae=new RegExp(HU.source+"|"+fae.source,"gi"),hae=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,VU=U0();function mae(t,e){var r=0;return jU(VU,e)?VU[e]:e.charCodeAt(0)===35&&hae.test(e)&&(r=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10),UU(r))?BU(r):t}function gae(t){return t.indexOf("\\")<0?t:t.replace(HU,"$1")}function vae(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(pae,function(e,r,n){return r||mae(e,n)})}var yae=/[&<>"]/,wae=/[&<>"]/g,Cae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function bae(t){return Cae[t]}function Eae(t){return yae.test(t)?t.replace(wae,bae):t}var _ae=/[.?*+^$[\]\\(){}|-]/g;function Sae(t){return t.replace(_ae,"\\$&")}function xae(t){switch(t){case 9:case 32:return!0}return!1}function Pae(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var kae=Ig();function Iae(t){return kae.test(t)}function Tae(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Aae(t){return t=t.trim().replace(/\s+/g," "),"\u1E9E".toLowerCase()==="\u1E7E"&&(t=t.replace(/ẞ/g,"\xDF")),t.toLowerCase().toUpperCase()}Nt.lib={};Nt.lib.mdurl=B0();Nt.lib.ucmicro=$U();Nt.assign=uae;Nt.isString=cae;Nt.has=jU;Nt.unescapeMd=gae;Nt.unescapeAll=vae;Nt.isValidEntityCode=UU;Nt.fromCodePoint=BU;Nt.escapeHtml=Eae;Nt.arrayReplaceAt=dae;Nt.isSpace=xae;Nt.isWhiteSpace=Pae;Nt.isMdAsciiPunct=Tae;Nt.isPunctChar=Iae;Nt.escapeRE=Sae;Nt.normalizeReference=Aae});var GU=I((J_e,WU)=>{"use strict";WU.exports=function(e,r,n){var i,o,s,a,c=-1,l=e.posMax,u=e.pos;for(e.pos=r+1,i=1;e.pos<l;){if(s=e.src.charCodeAt(e.pos),s===93&&(i--,i===0)){o=!0;break}if(a=e.pos,e.md.inline.skipToken(e),s===91){if(a===e.pos-1)i++;else if(n)return e.pos=u,-1}}return o&&(c=e.pos),e.pos=u,c}});var YU=I((Q_e,KU)=>{"use strict";var zU=ze().unescapeAll;KU.exports=function(e,r,n){var i,o,s=0,a=r,c={ok:!1,pos:0,lines:0,str:""};if(e.charCodeAt(r)===60){for(r++;r<n;){if(i=e.charCodeAt(r),i===10||i===60)return c;if(i===62)return c.pos=r+1,c.str=zU(e.slice(a+1,r)),c.ok=!0,c;if(i===92&&r+1<n){r+=2;continue}r++}return c}for(o=0;r<n&&(i=e.charCodeAt(r),!(i===32||i<32||i===127));){if(i===92&&r+1<n){if(e.charCodeAt(r+1)===32)break;r+=2;continue}if(i===40&&(o++,o>32))return c;if(i===41){if(o===0)break;o--}r++}return a===r||o!==0||(c.str=zU(e.slice(a,r)),c.lines=s,c.pos=r,c.ok=!0),c}});var QU=I((X_e,JU)=>{"use strict";var Dae=ze().unescapeAll;JU.exports=function(e,r,n){var i,o,s=0,a=r,c={ok:!1,pos:0,lines:0,str:""};if(r>=n||(o=e.charCodeAt(r),o!==34&&o!==39&&o!==40))return c;for(r++,o===40&&(o=41);r<n;){if(i=e.charCodeAt(r),i===o)return c.pos=r+1,c.lines=s,c.str=Dae(e.slice(a+1,r)),c.ok=!0,c;if(i===40&&o===41)return c;i===10?s++:i===92&&r+1<n&&(r++,e.charCodeAt(r)===10&&s++),r++}return c}});var XU=I(Rg=>{"use strict";Rg.parseLinkLabel=GU();Rg.parseLinkDestination=YU();Rg.parseLinkTitle=QU()});var eB=I((eSe,ZU)=>{"use strict";var Rae=ze().assign,Oae=ze().unescapeAll,ha=ze().escapeHtml,Ei={};Ei.code_inline=function(t,e,r,n,i){var o=t[e];return"<code"+i.renderAttrs(o)+">"+ha(t[e].content)+"</code>"};Ei.code_block=function(t,e,r,n,i){var o=t[e];return"<pre"+i.renderAttrs(o)+"><code>"+ha(t[e].content)+`</code></pre>
`};Ei.fence=function(t,e,r,n,i){var o=t[e],s=o.info?Oae(o.info).trim():"",a="",c="",l,u,d,f,p;return s&&(d=s.split(/(\s+)/g),a=d[0],c=d.slice(2).join("")),r.highlight?l=r.highlight(o.content,a,c)||ha(o.content):l=ha(o.content),l.indexOf("<pre")===0?l+`
`:s?(u=o.attrIndex("class"),f=o.attrs?o.attrs.slice():[],u<0?f.push(["class",r.langPrefix+a]):(f[u]=f[u].slice(),f[u][1]+=" "+r.langPrefix+a),p={attrs:f},"<pre><code"+i.renderAttrs(p)+">"+l+`</code></pre>
`):"<pre><code"+i.renderAttrs(o)+">"+l+`</code></pre>
`};Ei.image=function(t,e,r,n,i){var o=t[e];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,r,n),i.renderToken(t,e,r)};Ei.hardbreak=function(t,e,r){return r.xhtmlOut?`<br />
`:`<br>
`};Ei.softbreak=function(t,e,r){return r.breaks?r.xhtmlOut?`<br />
`:`<br>
`:`
`};Ei.text=function(t,e){return ha(t[e].content)};Ei.html_block=function(t,e){return t[e].content};Ei.html_inline=function(t,e){return t[e].content};function el(){this.rules=Rae({},Ei)}el.prototype.renderAttrs=function(e){var r,n,i;if(!e.attrs)return"";for(i="",r=0,n=e.attrs.length;r<n;r++)i+=" "+ha(e.attrs[r][0])+'="'+ha(e.attrs[r][1])+'"';return i};el.prototype.renderToken=function(e,r,n){var i,o="",s=!1,a=e[r];return a.hidden?"":(a.block&&a.nesting!==-1&&r&&e[r-1].hidden&&(o+=`
`),o+=(a.nesting===-1?"</":"<")+a.tag,o+=this.renderAttrs(a),a.nesting===0&&n.xhtmlOut&&(o+=" /"),a.block&&(s=!0,a.nesting===1&&r+1<e.length&&(i=e[r+1],(i.type==="inline"||i.hidden||i.nesting===-1&&i.tag===a.tag)&&(s=!1))),o+=s?`>
`:">",o)};el.prototype.renderInline=function(t,e,r){for(var n,i="",o=this.rules,s=0,a=t.length;s<a;s++)n=t[s].type,typeof o[n]!="undefined"?i+=o[n](t,s,e,r,this):i+=this.renderToken(t,s,e);return i};el.prototype.renderInlineAsText=function(t,e,r){for(var n="",i=0,o=t.length;i<o;i++)t[i].type==="text"?n+=t[i].content:t[i].type==="image"?n+=this.renderInlineAsText(t[i].children,e,r):t[i].type==="softbreak"&&(n+=`
`);return n};el.prototype.render=function(t,e,r){var n,i,o,s="",a=this.rules;for(n=0,i=t.length;n<i;n++)o=t[n].type,o==="inline"?s+=this.renderInline(t[n].children,e,r):typeof a[o]!="undefined"?s+=a[t[n].type](t,n,e,r,this):s+=this.renderToken(t,n,e,r);return s};ZU.exports=el});var Og=I((tSe,tB)=>{"use strict";function Hn(){this.__rules__=[],this.__cache__=null}Hn.prototype.__find__=function(t){for(var e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};Hn.prototype.__compile__=function(){var t=this,e=[""];t.__rules__.forEach(function(r){!r.enabled||r.alt.forEach(function(n){e.indexOf(n)<0&&e.push(n)})}),t.__cache__={},e.forEach(function(r){t.__cache__[r]=[],t.__rules__.forEach(function(n){!n.enabled||r&&n.alt.indexOf(r)<0||t.__cache__[r].push(n.fn)})})};Hn.prototype.at=function(t,e,r){var n=this.__find__(t),i=r||{};if(n===-1)throw new Error("Parser rule not found: "+t);this.__rules__[n].fn=e,this.__rules__[n].alt=i.alt||[],this.__cache__=null};Hn.prototype.before=function(t,e,r,n){var i=this.__find__(t),o=n||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:r,alt:o.alt||[]}),this.__cache__=null};Hn.prototype.after=function(t,e,r,n){var i=this.__find__(t),o=n||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:r,alt:o.alt||[]}),this.__cache__=null};Hn.prototype.push=function(t,e,r){var n=r||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:n.alt||[]}),this.__cache__=null};Hn.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);var r=[];return t.forEach(function(n){var i=this.__find__(n);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!0,r.push(n)},this),this.__cache__=null,r};Hn.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(r){r.enabled=!1}),this.enable(t,e)};Hn.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);var r=[];return t.forEach(function(n){var i=this.__find__(n);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!1,r.push(n)},this),this.__cache__=null,r};Hn.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};tB.exports=Hn});var nB=I((rSe,rB)=>{"use strict";var Nae=/\r\n?|\n/g,Lae=/\0/g;rB.exports=function(e){var r;r=e.src.replace(Nae,`
`),r=r.replace(Lae,"\uFFFD"),e.src=r}});var oB=I((nSe,iB)=>{"use strict";iB.exports=function(e){var r;e.inlineMode?(r=new e.Token("inline","",0),r.content=e.src,r.map=[0,1],r.children=[],e.tokens.push(r)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}});var aB=I((iSe,sB)=>{"use strict";sB.exports=function(e){var r=e.tokens,n,i,o;for(i=0,o=r.length;i<o;i++)n=r[i],n.type==="inline"&&e.md.inline.parse(n.content,e.md,e.env,n.children)}});var lB=I((oSe,cB)=>{"use strict";var Fae=ze().arrayReplaceAt;function Mae(t){return/^<a[>\s]/i.test(t)}function qae(t){return/^<\/a\s*>/i.test(t)}cB.exports=function(e){var r,n,i,o,s,a,c,l,u,d,f,p,h,m,g,v,w=e.tokens,b;if(!!e.md.options.linkify){for(n=0,i=w.length;n<i;n++)if(!(w[n].type!=="inline"||!e.md.linkify.pretest(w[n].content)))for(o=w[n].children,h=0,r=o.length-1;r>=0;r--){if(a=o[r],a.type==="link_close"){for(r--;o[r].level!==a.level&&o[r].type!=="link_open";)r--;continue}if(a.type==="html_inline"&&(Mae(a.content)&&h>0&&h--,qae(a.content)&&h++),!(h>0)&&a.type==="text"&&e.md.linkify.test(a.content)){for(u=a.content,b=e.md.linkify.match(u),c=[],p=a.level,f=0,l=0;l<b.length;l++)m=b[l].url,g=e.md.normalizeLink(m),!!e.md.validateLink(g)&&(v=b[l].text,b[l].schema?b[l].schema==="mailto:"&&!/^mailto:/i.test(v)?v=e.md.normalizeLinkText("mailto:"+v).replace(/^mailto:/,""):v=e.md.normalizeLinkText(v):v=e.md.normalizeLinkText("http://"+v).replace(/^http:\/\//,""),d=b[l].index,d>f&&(s=new e.Token("text","",0),s.content=u.slice(f,d),s.level=p,c.push(s)),s=new e.Token("link_open","a",1),s.attrs=[["href",g]],s.level=p++,s.markup="linkify",s.info="auto",c.push(s),s=new e.Token("text","",0),s.content=v,s.level=p,c.push(s),s=new e.Token("link_close","a",-1),s.level=--p,s.markup="linkify",s.info="auto",c.push(s),f=b[l].lastIndex);f<u.length&&(s=new e.Token("text","",0),s.content=u.slice(f),s.level=p,c.push(s)),w[n].children=o=Fae(o,r,c)}}}}});var fB=I((sSe,dB)=>{"use strict";var uB=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,$ae=/\((c|tm|r|p)\)/i,jae=/\((c|tm|r|p)\)/ig,Uae={c:"\xA9",r:"\xAE",p:"\xA7",tm:"\u2122"};function Bae(t,e){return Uae[e.toLowerCase()]}function Hae(t){var e,r,n=0;for(e=t.length-1;e>=0;e--)r=t[e],r.type==="text"&&!n&&(r.content=r.content.replace(jae,Bae)),r.type==="link_open"&&r.info==="auto"&&n--,r.type==="link_close"&&r.info==="auto"&&n++}function Vae(t){var e,r,n=0;for(e=t.length-1;e>=0;e--)r=t[e],r.type==="text"&&!n&&uB.test(r.content)&&(r.content=r.content.replace(/\+-/g,"\xB1").replace(/\.{2,}/g,"\u2026").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1\u2014").replace(/(^|\s)--(?=\s|$)/mg,"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1\u2013")),r.type==="link_open"&&r.info==="auto"&&n--,r.type==="link_close"&&r.info==="auto"&&n++}dB.exports=function(e){var r;if(!!e.md.options.typographer)for(r=e.tokens.length-1;r>=0;r--)e.tokens[r].type==="inline"&&($ae.test(e.tokens[r].content)&&Hae(e.tokens[r].children),uB.test(e.tokens[r].content)&&Vae(e.tokens[r].children))}});var wB=I((aSe,yB)=>{"use strict";var pB=ze().isWhiteSpace,hB=ze().isPunctChar,mB=ze().isMdAsciiPunct,Wae=/['"]/,gB=/['"]/g,vB="\u2019";function Ng(t,e,r){return t.substr(0,e)+r+t.substr(e+1)}function Gae(t,e){var r,n,i,o,s,a,c,l,u,d,f,p,h,m,g,v,w,b,C,S,P;for(C=[],r=0;r<t.length;r++){for(n=t[r],c=t[r].level,w=C.length-1;w>=0&&!(C[w].level<=c);w--);if(C.length=w+1,n.type!=="text")continue;i=n.content,s=0,a=i.length;e:for(;s<a&&(gB.lastIndex=s,o=gB.exec(i),!!o);){if(g=v=!0,s=o.index+1,b=o[0]==="'",u=32,o.index-1>=0)u=i.charCodeAt(o.index-1);else for(w=r-1;w>=0&&!(t[w].type==="softbreak"||t[w].type==="hardbreak");w--)if(!!t[w].content){u=t[w].content.charCodeAt(t[w].content.length-1);break}if(d=32,s<a)d=i.charCodeAt(s);else for(w=r+1;w<t.length&&!(t[w].type==="softbreak"||t[w].type==="hardbreak");w++)if(!!t[w].content){d=t[w].content.charCodeAt(0);break}if(f=mB(u)||hB(String.fromCharCode(u)),p=mB(d)||hB(String.fromCharCode(d)),h=pB(u),m=pB(d),m?g=!1:p&&(h||f||(g=!1)),h?v=!1:f&&(m||p||(v=!1)),d===34&&o[0]==='"'&&u>=48&&u<=57&&(v=g=!1),g&&v&&(g=f,v=p),!g&&!v){b&&(n.content=Ng(n.content,o.index,vB));continue}if(v){for(w=C.length-1;w>=0&&(l=C[w],!(C[w].level<c));w--)if(l.single===b&&C[w].level===c){l=C[w],b?(S=e.md.options.quotes[2],P=e.md.options.quotes[3]):(S=e.md.options.quotes[0],P=e.md.options.quotes[1]),n.content=Ng(n.content,o.index,P),t[l.token].content=Ng(t[l.token].content,l.pos,S),s+=P.length-1,l.token===r&&(s+=S.length-1),i=n.content,a=i.length,C.length=w;continue e}}g?C.push({token:r,pos:o.index,single:b,level:c}):v&&b&&(n.content=Ng(n.content,o.index,vB))}}}yB.exports=function(e){var r;if(!!e.md.options.typographer)for(r=e.tokens.length-1;r>=0;r--)e.tokens[r].type!=="inline"||!Wae.test(e.tokens[r].content)||Gae(e.tokens[r].children,e)}});var Lg=I((cSe,CB)=>{"use strict";function tl(t,e,r){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=r,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}tl.prototype.attrIndex=function(e){var r,n,i;if(!this.attrs)return-1;for(r=this.attrs,n=0,i=r.length;n<i;n++)if(r[n][0]===e)return n;return-1};tl.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};tl.prototype.attrSet=function(e,r){var n=this.attrIndex(e),i=[e,r];n<0?this.attrPush(i):this.attrs[n]=i};tl.prototype.attrGet=function(e){var r=this.attrIndex(e),n=null;return r>=0&&(n=this.attrs[r][1]),n};tl.prototype.attrJoin=function(e,r){var n=this.attrIndex(e);n<0?this.attrPush([e,r]):this.attrs[n][1]=this.attrs[n][1]+" "+r};CB.exports=tl});var _B=I((lSe,EB)=>{"use strict";var zae=Lg();function bB(t,e,r){this.src=t,this.env=r,this.tokens=[],this.inlineMode=!1,this.md=e}bB.prototype.Token=zae;EB.exports=bB});var xB=I((uSe,SB)=>{"use strict";var Kae=Og(),G0=[["normalize",nB()],["block",oB()],["inline",aB()],["linkify",lB()],["replacements",fB()],["smartquotes",wB()]];function z0(){this.ruler=new Kae;for(var t=0;t<G0.length;t++)this.ruler.push(G0[t][0],G0[t][1])}z0.prototype.process=function(t){var e,r,n;for(n=this.ruler.getRules(""),e=0,r=n.length;e<r;e++)n[e](t)};z0.prototype.State=_B();SB.exports=z0});var IB=I((dSe,kB)=>{"use strict";var K0=ze().isSpace;function Y0(t,e){var r=t.bMarks[e]+t.tShift[e],n=t.eMarks[e];return t.src.substr(r,n-r)}function PB(t){var e=[],r=0,n=t.length,i,o=!1,s=0,a="";for(i=t.charCodeAt(r);r<n;)i===124&&(o?(a+=t.substring(s,r-1),s=r):(e.push(a+t.substring(s,r)),a="",s=r+1)),o=i===92,r++,i=t.charCodeAt(r);return e.push(a+t.substring(s)),e}kB.exports=function(e,r,n,i){var o,s,a,c,l,u,d,f,p,h,m,g,v,w,b,C,S,P;if(r+2>n||(u=r+1,e.sCount[u]<e.blkIndent)||e.sCount[u]-e.blkIndent>=4||(a=e.bMarks[u]+e.tShift[u],a>=e.eMarks[u])||(S=e.src.charCodeAt(a++),S!==124&&S!==45&&S!==58)||a>=e.eMarks[u]||(P=e.src.charCodeAt(a++),P!==124&&P!==45&&P!==58&&!K0(P))||S===45&&K0(P))return!1;for(;a<e.eMarks[u];){if(o=e.src.charCodeAt(a),o!==124&&o!==45&&o!==58&&!K0(o))return!1;a++}for(s=Y0(e,r+1),d=s.split("|"),h=[],c=0;c<d.length;c++){if(m=d[c].trim(),!m){if(c===0||c===d.length-1)continue;return!1}if(!/^:?-+:?$/.test(m))return!1;m.charCodeAt(m.length-1)===58?h.push(m.charCodeAt(0)===58?"center":"right"):m.charCodeAt(0)===58?h.push("left"):h.push("")}if(s=Y0(e,r).trim(),s.indexOf("|")===-1||e.sCount[r]-e.blkIndent>=4||(d=PB(s),d.length&&d[0]===""&&d.shift(),d.length&&d[d.length-1]===""&&d.pop(),f=d.length,f===0||f!==h.length))return!1;if(i)return!0;for(w=e.parentType,e.parentType="table",C=e.md.block.ruler.getRules("blockquote"),p=e.push("table_open","table",1),p.map=g=[r,0],p=e.push("thead_open","thead",1),p.map=[r,r+1],p=e.push("tr_open","tr",1),p.map=[r,r+1],c=0;c<d.length;c++)p=e.push("th_open","th",1),h[c]&&(p.attrs=[["style","text-align:"+h[c]]]),p=e.push("inline","",0),p.content=d[c].trim(),p.children=[],p=e.push("th_close","th",-1);for(p=e.push("tr_close","tr",-1),p=e.push("thead_close","thead",-1),u=r+2;u<n&&!(e.sCount[u]<e.blkIndent);u++){for(b=!1,c=0,l=C.length;c<l;c++)if(C[c](e,u,n,!0)){b=!0;break}if(b||(s=Y0(e,u).trim(),!s)||e.sCount[u]-e.blkIndent>=4)break;for(d=PB(s),d.length&&d[0]===""&&d.shift(),d.length&&d[d.length-1]===""&&d.pop(),u===r+2&&(p=e.push("tbody_open","tbody",1),p.map=v=[r+2,0]),p=e.push("tr_open","tr",1),p.map=[u,u+1],c=0;c<f;c++)p=e.push("td_open","td",1),h[c]&&(p.attrs=[["style","text-align:"+h[c]]]),p=e.push("inline","",0),p.content=d[c]?d[c].trim():"",p.children=[],p=e.push("td_close","td",-1);p=e.push("tr_close","tr",-1)}return v&&(p=e.push("tbody_close","tbody",-1),v[1]=u),p=e.push("table_close","table",-1),g[1]=u,e.parentType=w,e.line=u,!0}});var AB=I((fSe,TB)=>{"use strict";TB.exports=function(e,r,n){var i,o,s;if(e.sCount[r]-e.blkIndent<4)return!1;for(o=i=r+1;i<n;){if(e.isEmpty(i)){i++;continue}if(e.sCount[i]-e.blkIndent>=4){i++,o=i;continue}break}return e.line=o,s=e.push("code_block","code",0),s.content=e.getLines(r,o,4+e.blkIndent,!1)+`
`,s.map=[r,e.line],!0}});var RB=I((pSe,DB)=>{"use strict";DB.exports=function(e,r,n,i){var o,s,a,c,l,u,d,f=!1,p=e.bMarks[r]+e.tShift[r],h=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||p+3>h||(o=e.src.charCodeAt(p),o!==126&&o!==96)||(l=p,p=e.skipChars(p,o),s=p-l,s<3)||(d=e.src.slice(l,p),a=e.src.slice(p,h),o===96&&a.indexOf(String.fromCharCode(o))>=0))return!1;if(i)return!0;for(c=r;c++,!(c>=n||(p=l=e.bMarks[c]+e.tShift[c],h=e.eMarks[c],p<h&&e.sCount[c]<e.blkIndent));)if(e.src.charCodeAt(p)===o&&!(e.sCount[c]-e.blkIndent>=4)&&(p=e.skipChars(p,o),!(p-l<s)&&(p=e.skipSpaces(p),!(p<h)))){f=!0;break}return s=e.sCount[r],e.line=c+(f?1:0),u=e.push("fence","code",0),u.info=a,u.content=e.getLines(r+1,c,s,!0),u.markup=d,u.map=[r,e.line],!0}});var LB=I((hSe,NB)=>{"use strict";var OB=ze().isSpace;NB.exports=function(e,r,n,i){var o,s,a,c,l,u,d,f,p,h,m,g,v,w,b,C,S,P,_,k,T=e.lineMax,A=e.bMarks[r]+e.tShift[r],M=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||e.src.charCodeAt(A++)!==62)return!1;if(i)return!0;for(c=p=e.sCount[r]+1,e.src.charCodeAt(A)===32?(A++,c++,p++,o=!1,C=!0):e.src.charCodeAt(A)===9?(C=!0,(e.bsCount[r]+p)%4==3?(A++,c++,p++,o=!1):o=!0):C=!1,h=[e.bMarks[r]],e.bMarks[r]=A;A<M&&(s=e.src.charCodeAt(A),OB(s));){s===9?p+=4-(p+e.bsCount[r]+(o?1:0))%4:p++;A++}for(m=[e.bsCount[r]],e.bsCount[r]=e.sCount[r]+1+(C?1:0),u=A>=M,w=[e.sCount[r]],e.sCount[r]=p-c,b=[e.tShift[r]],e.tShift[r]=A-e.bMarks[r],P=e.md.block.ruler.getRules("blockquote"),v=e.parentType,e.parentType="blockquote",f=r+1;f<n&&(k=e.sCount[f]<e.blkIndent,A=e.bMarks[f]+e.tShift[f],M=e.eMarks[f],!(A>=M));f++){if(e.src.charCodeAt(A++)===62&&!k){for(c=p=e.sCount[f]+1,e.src.charCodeAt(A)===32?(A++,c++,p++,o=!1,C=!0):e.src.charCodeAt(A)===9?(C=!0,(e.bsCount[f]+p)%4==3?(A++,c++,p++,o=!1):o=!0):C=!1,h.push(e.bMarks[f]),e.bMarks[f]=A;A<M&&(s=e.src.charCodeAt(A),OB(s));){s===9?p+=4-(p+e.bsCount[f]+(o?1:0))%4:p++;A++}u=A>=M,m.push(e.bsCount[f]),e.bsCount[f]=e.sCount[f]+1+(C?1:0),w.push(e.sCount[f]),e.sCount[f]=p-c,b.push(e.tShift[f]),e.tShift[f]=A-e.bMarks[f];continue}if(u)break;for(S=!1,a=0,l=P.length;a<l;a++)if(P[a](e,f,n,!0)){S=!0;break}if(S){e.lineMax=f,e.blkIndent!==0&&(h.push(e.bMarks[f]),m.push(e.bsCount[f]),b.push(e.tShift[f]),w.push(e.sCount[f]),e.sCount[f]-=e.blkIndent);break}h.push(e.bMarks[f]),m.push(e.bsCount[f]),b.push(e.tShift[f]),w.push(e.sCount[f]),e.sCount[f]=-1}for(g=e.blkIndent,e.blkIndent=0,_=e.push("blockquote_open","blockquote",1),_.markup=">",_.map=d=[r,0],e.md.block.tokenize(e,r,f),_=e.push("blockquote_close","blockquote",-1),_.markup=">",e.lineMax=T,e.parentType=v,d[1]=e.line,a=0;a<b.length;a++)e.bMarks[a+r]=h[a],e.tShift[a+r]=b[a],e.sCount[a+r]=w[a],e.bsCount[a+r]=m[a];return e.blkIndent=g,!0}});var MB=I((mSe,FB)=>{"use strict";var Yae=ze().isSpace;FB.exports=function(e,r,n,i){var o,s,a,c,l=e.bMarks[r]+e.tShift[r],u=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||(o=e.src.charCodeAt(l++),o!==42&&o!==45&&o!==95))return!1;for(s=1;l<u;){if(a=e.src.charCodeAt(l++),a!==o&&!Yae(a))return!1;a===o&&s++}return s<3?!1:(i||(e.line=r+1,c=e.push("hr","hr",0),c.map=[r,e.line],c.markup=Array(s+1).join(String.fromCharCode(o))),!0)}});var BB=I((gSe,UB)=>{"use strict";var qB=ze().isSpace;function $B(t,e){var r,n,i,o;return n=t.bMarks[e]+t.tShift[e],i=t.eMarks[e],r=t.src.charCodeAt(n++),r!==42&&r!==45&&r!==43||n<i&&(o=t.src.charCodeAt(n),!qB(o))?-1:n}function jB(t,e){var r,n=t.bMarks[e]+t.tShift[e],i=n,o=t.eMarks[e];if(i+1>=o||(r=t.src.charCodeAt(i++),r<48||r>57))return-1;for(;;){if(i>=o)return-1;if(r=t.src.charCodeAt(i++),r>=48&&r<=57){if(i-n>=10)return-1;continue}if(r===41||r===46)break;return-1}return i<o&&(r=t.src.charCodeAt(i),!qB(r))?-1:i}function Jae(t,e){var r,n,i=t.level+2;for(r=e+2,n=t.tokens.length-2;r<n;r++)t.tokens[r].level===i&&t.tokens[r].type==="paragraph_open"&&(t.tokens[r+2].hidden=!0,t.tokens[r].hidden=!0,r+=2)}UB.exports=function(e,r,n,i){var o,s,a,c,l,u,d,f,p,h,m,g,v,w,b,C,S,P,_,k,T,A,M,j,J,Y,oe,re,F=!1,L=!0;if(e.sCount[r]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[r]-e.listIndent>=4&&e.sCount[r]<e.blkIndent)return!1;if(i&&e.parentType==="paragraph"&&e.sCount[r]>=e.blkIndent&&(F=!0),(M=jB(e,r))>=0){if(d=!0,J=e.bMarks[r]+e.tShift[r],v=Number(e.src.slice(J,M-1)),F&&v!==1)return!1}else if((M=$B(e,r))>=0)d=!1;else return!1;if(F&&e.skipSpaces(M)>=e.eMarks[r])return!1;if(g=e.src.charCodeAt(M-1),i)return!0;for(m=e.tokens.length,d?(re=e.push("ordered_list_open","ol",1),v!==1&&(re.attrs=[["start",v]])):re=e.push("bullet_list_open","ul",1),re.map=h=[r,0],re.markup=String.fromCharCode(g),b=r,j=!1,oe=e.md.block.ruler.getRules("list"),P=e.parentType,e.parentType="list";b<n;){for(A=M,w=e.eMarks[b],u=C=e.sCount[b]+M-(e.bMarks[r]+e.tShift[r]);A<w;){if(o=e.src.charCodeAt(A),o===9)C+=4-(C+e.bsCount[b])%4;else if(o===32)C++;else break;A++}if(s=A,s>=w?l=1:l=C-u,l>4&&(l=1),c=u+l,re=e.push("list_item_open","li",1),re.markup=String.fromCharCode(g),re.map=f=[r,0],d&&(re.info=e.src.slice(J,M-1)),T=e.tight,k=e.tShift[r],_=e.sCount[r],S=e.listIndent,e.listIndent=e.blkIndent,e.blkIndent=c,e.tight=!0,e.tShift[r]=s-e.bMarks[r],e.sCount[r]=C,s>=w&&e.isEmpty(r+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,r,n,!0),(!e.tight||j)&&(L=!1),j=e.line-r>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=S,e.tShift[r]=k,e.sCount[r]=_,e.tight=T,re=e.push("list_item_close","li",-1),re.markup=String.fromCharCode(g),b=r=e.line,f[1]=b,s=e.bMarks[r],b>=n||e.sCount[b]<e.blkIndent||e.sCount[r]-e.blkIndent>=4)break;for(Y=!1,a=0,p=oe.length;a<p;a++)if(oe[a](e,b,n,!0)){Y=!0;break}if(Y)break;if(d){if(M=jB(e,b),M<0)break;J=e.bMarks[b]+e.tShift[b]}else if(M=$B(e,b),M<0)break;if(g!==e.src.charCodeAt(M-1))break}return d?re=e.push("ordered_list_close","ol",-1):re=e.push("bullet_list_close","ul",-1),re.markup=String.fromCharCode(g),h[1]=b,e.line=b,e.parentType=P,L&&Jae(e,m),!0}});var VB=I((vSe,HB)=>{"use strict";var Qae=ze().normalizeReference,Fg=ze().isSpace;HB.exports=function(e,r,n,i){var o,s,a,c,l,u,d,f,p,h,m,g,v,w,b,C,S=0,P=e.bMarks[r]+e.tShift[r],_=e.eMarks[r],k=r+1;if(e.sCount[r]-e.blkIndent>=4||e.src.charCodeAt(P)!==91)return!1;for(;++P<_;)if(e.src.charCodeAt(P)===93&&e.src.charCodeAt(P-1)!==92){if(P+1===_||e.src.charCodeAt(P+1)!==58)return!1;break}for(c=e.lineMax,b=e.md.block.ruler.getRules("reference"),h=e.parentType,e.parentType="reference";k<c&&!e.isEmpty(k);k++)if(!(e.sCount[k]-e.blkIndent>3)&&!(e.sCount[k]<0)){for(w=!1,u=0,d=b.length;u<d;u++)if(b[u](e,k,c,!0)){w=!0;break}if(w)break}for(v=e.getLines(r,k,e.blkIndent,!1).trim(),_=v.length,P=1;P<_;P++){if(o=v.charCodeAt(P),o===91)return!1;if(o===93){p=P;break}else o===10?S++:o===92&&(P++,P<_&&v.charCodeAt(P)===10&&S++)}if(p<0||v.charCodeAt(p+1)!==58)return!1;for(P=p+2;P<_;P++)if(o=v.charCodeAt(P),o===10)S++;else if(!Fg(o))break;if(m=e.md.helpers.parseLinkDestination(v,P,_),!m.ok||(l=e.md.normalizeLink(m.str),!e.md.validateLink(l)))return!1;for(P=m.pos,S+=m.lines,s=P,a=S,g=P;P<_;P++)if(o=v.charCodeAt(P),o===10)S++;else if(!Fg(o))break;for(m=e.md.helpers.parseLinkTitle(v,P,_),P<_&&g!==P&&m.ok?(C=m.str,P=m.pos,S+=m.lines):(C="",P=s,S=a);P<_&&(o=v.charCodeAt(P),!!Fg(o));)P++;if(P<_&&v.charCodeAt(P)!==10&&C)for(C="",P=s,S=a;P<_&&(o=v.charCodeAt(P),!!Fg(o));)P++;return P<_&&v.charCodeAt(P)!==10||(f=Qae(v.slice(1,p)),!f)?!1:(i||(typeof e.env.references=="undefined"&&(e.env.references={}),typeof e.env.references[f]=="undefined"&&(e.env.references[f]={title:C,href:l}),e.parentType=h,e.line=r+S+1),!0)}});var GB=I((ySe,WB)=>{"use strict";WB.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]});var Q0=I((wSe,J0)=>{"use strict";var Xae="[a-zA-Z_:][a-zA-Z0-9:._-]*",Zae="[^\"'=<>`\\x00-\\x20]+",ece="'[^']*'",tce='"[^"]*"',rce="(?:"+Zae+"|"+ece+"|"+tce+")",nce="(?:\\s+"+Xae+"(?:\\s*=\\s*"+rce+")?)",zB="<[A-Za-z][A-Za-z0-9\\-]*"+nce+"*\\s*\\/?>",KB="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",ice="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",oce="<[?][\\s\\S]*?[?]>",sce="<![A-Z]+\\s+[^>]*>",ace="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",cce=new RegExp("^(?:"+zB+"|"+KB+"|"+ice+"|"+oce+"|"+sce+"|"+ace+")"),lce=new RegExp("^(?:"+zB+"|"+KB+")");J0.exports.HTML_TAG_RE=cce;J0.exports.HTML_OPEN_CLOSE_TAG_RE=lce});var JB=I((CSe,YB)=>{"use strict";var uce=GB(),dce=Q0().HTML_OPEN_CLOSE_TAG_RE,rl=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+uce.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(dce.source+"\\s*$"),/^$/,!1]];YB.exports=function(e,r,n,i){var o,s,a,c,l=e.bMarks[r]+e.tShift[r],u=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(l)!==60)return!1;for(c=e.src.slice(l,u),o=0;o<rl.length&&!rl[o][0].test(c);o++);if(o===rl.length)return!1;if(i)return rl[o][2];if(s=r+1,!rl[o][1].test(c)){for(;s<n&&!(e.sCount[s]<e.blkIndent);s++)if(l=e.bMarks[s]+e.tShift[s],u=e.eMarks[s],c=e.src.slice(l,u),rl[o][1].test(c)){c.length!==0&&s++;break}}return e.line=s,a=e.push("html_block","",0),a.map=[r,s],a.content=e.getLines(r,s,e.blkIndent,!0),!0}});var ZB=I((bSe,XB)=>{"use strict";var QB=ze().isSpace;XB.exports=function(e,r,n,i){var o,s,a,c,l=e.bMarks[r]+e.tShift[r],u=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||(o=e.src.charCodeAt(l),o!==35||l>=u))return!1;for(s=1,o=e.src.charCodeAt(++l);o===35&&l<u&&s<=6;)s++,o=e.src.charCodeAt(++l);return s>6||l<u&&!QB(o)?!1:(i||(u=e.skipSpacesBack(u,l),a=e.skipCharsBack(u,35,l),a>l&&QB(e.src.charCodeAt(a-1))&&(u=a),e.line=r+1,c=e.push("heading_open","h"+String(s),1),c.markup="########".slice(0,s),c.map=[r,e.line],c=e.push("inline","",0),c.content=e.src.slice(l,u).trim(),c.map=[r,e.line],c.children=[],c=e.push("heading_close","h"+String(s),-1),c.markup="########".slice(0,s)),!0)}});var t2=I((ESe,e2)=>{"use strict";e2.exports=function(e,r,n){var i,o,s,a,c,l,u,d,f,p=r+1,h,m=e.md.block.ruler.getRules("paragraph");if(e.sCount[r]-e.blkIndent>=4)return!1;for(h=e.parentType,e.parentType="paragraph";p<n&&!e.isEmpty(p);p++)if(!(e.sCount[p]-e.blkIndent>3)){if(e.sCount[p]>=e.blkIndent&&(l=e.bMarks[p]+e.tShift[p],u=e.eMarks[p],l<u&&(f=e.src.charCodeAt(l),(f===45||f===61)&&(l=e.skipChars(l,f),l=e.skipSpaces(l),l>=u)))){d=f===61?1:2;break}if(!(e.sCount[p]<0)){for(o=!1,s=0,a=m.length;s<a;s++)if(m[s](e,p,n,!0)){o=!0;break}if(o)break}}return d?(i=e.getLines(r,p,e.blkIndent,!1).trim(),e.line=p+1,c=e.push("heading_open","h"+String(d),1),c.markup=String.fromCharCode(f),c.map=[r,e.line],c=e.push("inline","",0),c.content=i,c.map=[r,e.line-1],c.children=[],c=e.push("heading_close","h"+String(d),-1),c.markup=String.fromCharCode(f),e.parentType=h,!0):!1}});var n2=I((_Se,r2)=>{"use strict";r2.exports=function(e,r){var n,i,o,s,a,c,l=r+1,u=e.md.block.ruler.getRules("paragraph"),d=e.lineMax;for(c=e.parentType,e.parentType="paragraph";l<d&&!e.isEmpty(l);l++)if(!(e.sCount[l]-e.blkIndent>3)&&!(e.sCount[l]<0)){for(i=!1,o=0,s=u.length;o<s;o++)if(u[o](e,l,d,!0)){i=!0;break}if(i)break}return n=e.getLines(r,l,e.blkIndent,!1).trim(),e.line=l,a=e.push("paragraph_open","p",1),a.map=[r,e.line],a=e.push("inline","",0),a.content=n,a.map=[r,e.line],a.children=[],a=e.push("paragraph_close","p",-1),e.parentType=c,!0}});var s2=I((SSe,o2)=>{"use strict";var i2=Lg(),Mg=ze().isSpace;function _i(t,e,r,n){var i,o,s,a,c,l,u,d;for(this.src=t,this.md=e,this.env=r,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",o=this.src,d=!1,s=a=l=u=0,c=o.length;a<c;a++){if(i=o.charCodeAt(a),!d)if(Mg(i)){l++,i===9?u+=4-u%4:u++;continue}else d=!0;(i===10||a===c-1)&&(i!==10&&a++,this.bMarks.push(s),this.eMarks.push(a),this.tShift.push(l),this.sCount.push(u),this.bsCount.push(0),d=!1,l=0,u=0,s=a+1)}this.bMarks.push(o.length),this.eMarks.push(o.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}_i.prototype.push=function(t,e,r){var n=new i2(t,e,r);return n.block=!0,r<0&&this.level--,n.level=this.level,r>0&&this.level++,this.tokens.push(n),n};_i.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};_i.prototype.skipEmptyLines=function(e){for(var r=this.lineMax;e<r&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};_i.prototype.skipSpaces=function(e){for(var r,n=this.src.length;e<n&&(r=this.src.charCodeAt(e),!!Mg(r));e++);return e};_i.prototype.skipSpacesBack=function(e,r){if(e<=r)return e;for(;e>r;)if(!Mg(this.src.charCodeAt(--e)))return e+1;return e};_i.prototype.skipChars=function(e,r){for(var n=this.src.length;e<n&&this.src.charCodeAt(e)===r;e++);return e};_i.prototype.skipCharsBack=function(e,r,n){if(e<=n)return e;for(;e>n;)if(r!==this.src.charCodeAt(--e))return e+1;return e};_i.prototype.getLines=function(e,r,n,i){var o,s,a,c,l,u,d,f=e;if(e>=r)return"";for(u=new Array(r-e),o=0;f<r;f++,o++){for(s=0,d=c=this.bMarks[f],f+1<r||i?l=this.eMarks[f]+1:l=this.eMarks[f];c<l&&s<n;){if(a=this.src.charCodeAt(c),Mg(a))a===9?s+=4-(s+this.bsCount[f])%4:s++;else if(c-d<this.tShift[f])s++;else break;c++}s>n?u[o]=new Array(s-n+1).join(" ")+this.src.slice(c,l):u[o]=this.src.slice(c,l)}return u.join("")};_i.prototype.Token=i2;o2.exports=_i});var c2=I((xSe,a2)=>{"use strict";var fce=Og(),qg=[["table",IB(),["paragraph","reference"]],["code",AB()],["fence",RB(),["paragraph","reference","blockquote","list"]],["blockquote",LB(),["paragraph","reference","blockquote","list"]],["hr",MB(),["paragraph","reference","blockquote","list"]],["list",BB(),["paragraph","reference","blockquote"]],["reference",VB()],["html_block",JB(),["paragraph","reference","blockquote"]],["heading",ZB(),["paragraph","reference","blockquote"]],["lheading",t2()],["paragraph",n2()]];function $g(){this.ruler=new fce;for(var t=0;t<qg.length;t++)this.ruler.push(qg[t][0],qg[t][1],{alt:(qg[t][2]||[]).slice()})}$g.prototype.tokenize=function(t,e,r){for(var n,i,o=this.ruler.getRules(""),s=o.length,a=e,c=!1,l=t.md.options.maxNesting;a<r&&(t.line=a=t.skipEmptyLines(a),!(a>=r||t.sCount[a]<t.blkIndent));){if(t.level>=l){t.line=r;break}for(i=0;i<s&&(n=o[i](t,a,r,!1),!n);i++);t.tight=!c,t.isEmpty(t.line-1)&&(c=!0),a=t.line,a<r&&t.isEmpty(a)&&(c=!0,a++,t.line=a)}};$g.prototype.parse=function(t,e,r,n){var i;!t||(i=new this.State(t,e,r,n),this.tokenize(i,i.line,i.lineMax))};$g.prototype.State=s2();a2.exports=$g});var u2=I((PSe,l2)=>{"use strict";function pce(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}l2.exports=function(e,r){for(var n=e.pos;n<e.posMax&&!pce(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(r||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}});var f2=I((kSe,d2)=>{"use strict";var hce=ze().isSpace;d2.exports=function(e,r){var n,i,o,s=e.pos;if(e.src.charCodeAt(s)!==10)return!1;if(n=e.pending.length-1,i=e.posMax,!r)if(n>=0&&e.pending.charCodeAt(n)===32)if(n>=1&&e.pending.charCodeAt(n-1)===32){for(o=n-1;o>=1&&e.pending.charCodeAt(o-1)===32;)o--;e.pending=e.pending.slice(0,o),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(s++;s<i&&hce(e.src.charCodeAt(s));)s++;return e.pos=s,!0}});var h2=I((ISe,p2)=>{"use strict";var mce=ze().isSpace,X0=[];for(Z0=0;Z0<256;Z0++)X0.push(0);var Z0;"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){X0[t.charCodeAt(0)]=1});p2.exports=function(e,r){var n,i=e.pos,o=e.posMax;if(e.src.charCodeAt(i)!==92)return!1;if(i++,i<o){if(n=e.src.charCodeAt(i),n<256&&X0[n]!==0)return r||(e.pending+=e.src[i]),e.pos+=2,!0;if(n===10){for(r||e.push("hardbreak","br",0),i++;i<o&&(n=e.src.charCodeAt(i),!!mce(n));)i++;return e.pos=i,!0}}return r||(e.pending+="\\"),e.pos++,!0}});var g2=I((TSe,m2)=>{"use strict";m2.exports=function(e,r){var n,i,o,s,a,c,l,u,d=e.pos,f=e.src.charCodeAt(d);if(f!==96)return!1;for(n=d,d++,i=e.posMax;d<i&&e.src.charCodeAt(d)===96;)d++;if(o=e.src.slice(n,d),l=o.length,e.backticksScanned&&(e.backticks[l]||0)<=n)return r||(e.pending+=o),e.pos+=l,!0;for(a=c=d;(a=e.src.indexOf("`",c))!==-1;){for(c=a+1;c<i&&e.src.charCodeAt(c)===96;)c++;if(u=c-a,u===l)return r||(s=e.push("code_inline","code",0),s.markup=o,s.content=e.src.slice(d,a).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),e.pos=c,!0;e.backticks[u]=a}return e.backticksScanned=!0,r||(e.pending+=o),e.pos+=l,!0}});var t_=I((ASe,e_)=>{"use strict";e_.exports.tokenize=function(e,r){var n,i,o,s,a,c=e.pos,l=e.src.charCodeAt(c);if(r||l!==126||(i=e.scanDelims(e.pos,!0),s=i.length,a=String.fromCharCode(l),s<2))return!1;for(s%2&&(o=e.push("text","",0),o.content=a,s--),n=0;n<s;n+=2)o=e.push("text","",0),o.content=a+a,e.delimiters.push({marker:l,length:0,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0};function v2(t,e){var r,n,i,o,s,a=[],c=e.length;for(r=0;r<c;r++)i=e[r],i.marker===126&&i.end!==-1&&(o=e[i.end],s=t.tokens[i.token],s.type="s_open",s.tag="s",s.nesting=1,s.markup="~~",s.content="",s=t.tokens[o.token],s.type="s_close",s.tag="s",s.nesting=-1,s.markup="~~",s.content="",t.tokens[o.token-1].type==="text"&&t.tokens[o.token-1].content==="~"&&a.push(o.token-1));for(;a.length;){for(r=a.pop(),n=r+1;n<t.tokens.length&&t.tokens[n].type==="s_close";)n++;n--,r!==n&&(s=t.tokens[n],t.tokens[n]=t.tokens[r],t.tokens[r]=s)}}e_.exports.postProcess=function(e){var r,n=e.tokens_meta,i=e.tokens_meta.length;for(v2(e,e.delimiters),r=0;r<i;r++)n[r]&&n[r].delimiters&&v2(e,n[r].delimiters)}});var n_=I((DSe,r_)=>{"use strict";r_.exports.tokenize=function(e,r){var n,i,o,s=e.pos,a=e.src.charCodeAt(s);if(r||a!==95&&a!==42)return!1;for(i=e.scanDelims(e.pos,a===42),n=0;n<i.length;n++)o=e.push("text","",0),o.content=String.fromCharCode(a),e.delimiters.push({marker:a,length:i.length,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0};function y2(t,e){var r,n,i,o,s,a,c=e.length;for(r=c-1;r>=0;r--)n=e[r],!(n.marker!==95&&n.marker!==42)&&n.end!==-1&&(i=e[n.end],a=r>0&&e[r-1].end===n.end+1&&e[r-1].marker===n.marker&&e[r-1].token===n.token-1&&e[n.end+1].token===i.token+1,s=String.fromCharCode(n.marker),o=t.tokens[n.token],o.type=a?"strong_open":"em_open",o.tag=a?"strong":"em",o.nesting=1,o.markup=a?s+s:s,o.content="",o=t.tokens[i.token],o.type=a?"strong_close":"em_close",o.tag=a?"strong":"em",o.nesting=-1,o.markup=a?s+s:s,o.content="",a&&(t.tokens[e[r-1].token].content="",t.tokens[e[n.end+1].token].content="",r--))}r_.exports.postProcess=function(e){var r,n=e.tokens_meta,i=e.tokens_meta.length;for(y2(e,e.delimiters),r=0;r<i;r++)n[r]&&n[r].delimiters&&y2(e,n[r].delimiters)}});var C2=I((RSe,w2)=>{"use strict";var gce=ze().normalizeReference,i_=ze().isSpace;w2.exports=function(e,r){var n,i,o,s,a,c,l,u,d,f="",p="",h=e.pos,m=e.posMax,g=e.pos,v=!0;if(e.src.charCodeAt(e.pos)!==91||(a=e.pos+1,s=e.md.helpers.parseLinkLabel(e,e.pos,!0),s<0))return!1;if(c=s+1,c<m&&e.src.charCodeAt(c)===40){for(v=!1,c++;c<m&&(i=e.src.charCodeAt(c),!(!i_(i)&&i!==10));c++);if(c>=m)return!1;if(g=c,l=e.md.helpers.parseLinkDestination(e.src,c,e.posMax),l.ok){for(f=e.md.normalizeLink(l.str),e.md.validateLink(f)?c=l.pos:f="",g=c;c<m&&(i=e.src.charCodeAt(c),!(!i_(i)&&i!==10));c++);if(l=e.md.helpers.parseLinkTitle(e.src,c,e.posMax),c<m&&g!==c&&l.ok)for(p=l.str,c=l.pos;c<m&&(i=e.src.charCodeAt(c),!(!i_(i)&&i!==10));c++);}(c>=m||e.src.charCodeAt(c)!==41)&&(v=!0),c++}if(v){if(typeof e.env.references=="undefined")return!1;if(c<m&&e.src.charCodeAt(c)===91?(g=c+1,c=e.md.helpers.parseLinkLabel(e,c),c>=0?o=e.src.slice(g,c++):c=s+1):c=s+1,o||(o=e.src.slice(a,s)),u=e.env.references[gce(o)],!u)return e.pos=h,!1;f=u.href,p=u.title}return r||(e.pos=a,e.posMax=s,d=e.push("link_open","a",1),d.attrs=n=[["href",f]],p&&n.push(["title",p]),e.md.inline.tokenize(e),d=e.push("link_close","a",-1)),e.pos=c,e.posMax=m,!0}});var E2=I((OSe,b2)=>{"use strict";var vce=ze().normalizeReference,o_=ze().isSpace;b2.exports=function(e,r){var n,i,o,s,a,c,l,u,d,f,p,h,m,g="",v=e.pos,w=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91||(c=e.pos+2,a=e.md.helpers.parseLinkLabel(e,e.pos+1,!1),a<0))return!1;if(l=a+1,l<w&&e.src.charCodeAt(l)===40){for(l++;l<w&&(i=e.src.charCodeAt(l),!(!o_(i)&&i!==10));l++);if(l>=w)return!1;for(m=l,d=e.md.helpers.parseLinkDestination(e.src,l,e.posMax),d.ok&&(g=e.md.normalizeLink(d.str),e.md.validateLink(g)?l=d.pos:g=""),m=l;l<w&&(i=e.src.charCodeAt(l),!(!o_(i)&&i!==10));l++);if(d=e.md.helpers.parseLinkTitle(e.src,l,e.posMax),l<w&&m!==l&&d.ok)for(f=d.str,l=d.pos;l<w&&(i=e.src.charCodeAt(l),!(!o_(i)&&i!==10));l++);else f="";if(l>=w||e.src.charCodeAt(l)!==41)return e.pos=v,!1;l++}else{if(typeof e.env.references=="undefined")return!1;if(l<w&&e.src.charCodeAt(l)===91?(m=l+1,l=e.md.helpers.parseLinkLabel(e,l),l>=0?s=e.src.slice(m,l++):l=a+1):l=a+1,s||(s=e.src.slice(c,a)),u=e.env.references[vce(s)],!u)return e.pos=v,!1;g=u.href,f=u.title}return r||(o=e.src.slice(c,a),e.md.inline.parse(o,e.md,e.env,h=[]),p=e.push("image","img",0),p.attrs=n=[["src",g],["alt",""]],p.children=h,p.content=o,f&&n.push(["title",f])),e.pos=l,e.posMax=w,!0}});var S2=I((NSe,_2)=>{"use strict";var yce=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,wce=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/;_2.exports=function(e,r){var n,i,o,s,a,c,l=e.pos;if(e.src.charCodeAt(l)!==60)return!1;for(a=e.pos,c=e.posMax;;){if(++l>=c||(s=e.src.charCodeAt(l),s===60))return!1;if(s===62)break}return n=e.src.slice(a+1,l),wce.test(n)?(i=e.md.normalizeLink(n),e.md.validateLink(i)?(r||(o=e.push("link_open","a",1),o.attrs=[["href",i]],o.markup="autolink",o.info="auto",o=e.push("text","",0),o.content=e.md.normalizeLinkText(n),o=e.push("link_close","a",-1),o.markup="autolink",o.info="auto"),e.pos+=n.length+2,!0):!1):yce.test(n)?(i=e.md.normalizeLink("mailto:"+n),e.md.validateLink(i)?(r||(o=e.push("link_open","a",1),o.attrs=[["href",i]],o.markup="autolink",o.info="auto",o=e.push("text","",0),o.content=e.md.normalizeLinkText(n),o=e.push("link_close","a",-1),o.markup="autolink",o.info="auto"),e.pos+=n.length+2,!0):!1):!1}});var P2=I((LSe,x2)=>{"use strict";var Cce=Q0().HTML_TAG_RE;function bce(t){var e=t|32;return e>=97&&e<=122}x2.exports=function(e,r){var n,i,o,s,a=e.pos;return!e.md.options.html||(o=e.posMax,e.src.charCodeAt(a)!==60||a+2>=o)||(n=e.src.charCodeAt(a+1),n!==33&&n!==63&&n!==47&&!bce(n))||(i=e.src.slice(a).match(Cce),!i)?!1:(r||(s=e.push("html_inline","",0),s.content=e.src.slice(a,a+i[0].length)),e.pos+=i[0].length,!0)}});var A2=I((FSe,T2)=>{"use strict";var k2=U0(),Ece=ze().has,_ce=ze().isValidEntityCode,I2=ze().fromCodePoint,Sce=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,xce=/^&([a-z][a-z0-9]{1,31});/i;T2.exports=function(e,r){var n,i,o,s=e.pos,a=e.posMax;if(e.src.charCodeAt(s)!==38)return!1;if(s+1<a){if(n=e.src.charCodeAt(s+1),n===35){if(o=e.src.slice(s).match(Sce),o)return r||(i=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),e.pending+=_ce(i)?I2(i):I2(65533)),e.pos+=o[0].length,!0}else if(o=e.src.slice(s).match(xce),o&&Ece(k2,o[1]))return r||(e.pending+=k2[o[1]]),e.pos+=o[0].length,!0}return r||(e.pending+="&"),e.pos++,!0}});var O2=I((MSe,R2)=>{"use strict";function D2(t,e){var r,n,i,o,s,a,c,l,u={},d=e.length;if(!!d){var f=0,p=-2,h=[];for(r=0;r<d;r++)if(i=e[r],h.push(0),(e[f].marker!==i.marker||p!==i.token-1)&&(f=r),p=i.token,i.length=i.length||0,!!i.close){for(u.hasOwnProperty(i.marker)||(u[i.marker]=[-1,-1,-1,-1,-1,-1]),s=u[i.marker][(i.open?3:0)+i.length%3],n=f-h[f]-1,a=n;n>s;n-=h[n]+1)if(o=e[n],o.marker===i.marker&&o.open&&o.end<0&&(c=!1,(o.close||i.open)&&(o.length+i.length)%3==0&&(o.length%3!=0||i.length%3!=0)&&(c=!0),!c)){l=n>0&&!e[n-1].open?h[n-1]+1:0,h[r]=r-n+l,h[n]=l,i.open=!1,o.end=r,o.close=!1,a=-1,p=-2;break}a!==-1&&(u[i.marker][(i.open?3:0)+(i.length||0)%3]=a)}}}R2.exports=function(e){var r,n=e.tokens_meta,i=e.tokens_meta.length;for(D2(e,e.delimiters),r=0;r<i;r++)n[r]&&n[r].delimiters&&D2(e,n[r].delimiters)}});var L2=I((qSe,N2)=>{"use strict";N2.exports=function(e){var r,n,i=0,o=e.tokens,s=e.tokens.length;for(r=n=0;r<s;r++)o[r].nesting<0&&i--,o[r].level=i,o[r].nesting>0&&i++,o[r].type==="text"&&r+1<s&&o[r+1].type==="text"?o[r+1].content=o[r].content+o[r+1].content:(r!==n&&(o[n]=o[r]),n++);r!==n&&(o.length=n)}});var j2=I(($Se,$2)=>{"use strict";var s_=Lg(),F2=ze().isWhiteSpace,M2=ze().isPunctChar,q2=ze().isMdAsciiPunct;function $d(t,e,r,n){this.src=t,this.env=r,this.md=e,this.tokens=n,this.tokens_meta=Array(n.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1}$d.prototype.pushPending=function(){var t=new s_("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};$d.prototype.push=function(t,e,r){this.pending&&this.pushPending();var n=new s_(t,e,r),i=null;return r<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),n.level=this.level,r>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(n),this.tokens_meta.push(i),n};$d.prototype.scanDelims=function(t,e){var r=t,n,i,o,s,a,c,l,u,d,f=!0,p=!0,h=this.posMax,m=this.src.charCodeAt(t);for(n=t>0?this.src.charCodeAt(t-1):32;r<h&&this.src.charCodeAt(r)===m;)r++;return o=r-t,i=r<h?this.src.charCodeAt(r):32,l=q2(n)||M2(String.fromCharCode(n)),d=q2(i)||M2(String.fromCharCode(i)),c=F2(n),u=F2(i),u?f=!1:d&&(c||l||(f=!1)),c?p=!1:l&&(u||d||(p=!1)),e?(s=f,a=p):(s=f&&(!p||l),a=p&&(!f||d)),{can_open:s,can_close:a,length:o}};$d.prototype.Token=s_;$2.exports=$d});var H2=I((jSe,B2)=>{"use strict";var U2=Og(),a_=[["text",u2()],["newline",f2()],["escape",h2()],["backticks",g2()],["strikethrough",t_().tokenize],["emphasis",n_().tokenize],["link",C2()],["image",E2()],["autolink",S2()],["html_inline",P2()],["entity",A2()]],c_=[["balance_pairs",O2()],["strikethrough",t_().postProcess],["emphasis",n_().postProcess],["text_collapse",L2()]];function jd(){var t;for(this.ruler=new U2,t=0;t<a_.length;t++)this.ruler.push(a_[t][0],a_[t][1]);for(this.ruler2=new U2,t=0;t<c_.length;t++)this.ruler2.push(c_[t][0],c_[t][1])}jd.prototype.skipToken=function(t){var e,r,n=t.pos,i=this.ruler.getRules(""),o=i.length,s=t.md.options.maxNesting,a=t.cache;if(typeof a[n]!="undefined"){t.pos=a[n];return}if(t.level<s)for(r=0;r<o&&(t.level++,e=i[r](t,!0),t.level--,!e);r++);else t.pos=t.posMax;e||t.pos++,a[n]=t.pos};jd.prototype.tokenize=function(t){for(var e,r,n=this.ruler.getRules(""),i=n.length,o=t.posMax,s=t.md.options.maxNesting;t.pos<o;){if(t.level<s)for(r=0;r<i&&(e=n[r](t,!1),!e);r++);if(e){if(t.pos>=o)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};jd.prototype.parse=function(t,e,r,n){var i,o,s,a=new this.State(t,e,r,n);for(this.tokenize(a),o=this.ruler2.getRules(""),s=o.length,i=0;i<s;i++)o[i](a)};jd.prototype.State=j2();B2.exports=jd});var W2=I((USe,V2)=>{"use strict";V2.exports=function(t){var e={};e.src_Any=H0().source,e.src_Cc=V0().source,e.src_Z=W0().source,e.src_P=Ig().source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");var r="[><\uFF5C]";return e.src_pseudo_letter="(?:(?!"+r+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+r+"|"+e.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+r+`|[()[\\]{}.,"'?!\\-]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-]).|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]).|"+(t&&t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+e.src_ZCc+").|\\!+(?!"+e.src_ZCc+"|[!]).|\\?(?!"+e.src_ZCc+"|[?]).)+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+r+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}});var Q2=I((BSe,J2)=>{"use strict";function l_(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(r){!r||Object.keys(r).forEach(function(n){t[n]=r[n]})}),t}function jg(t){return Object.prototype.toString.call(t)}function Pce(t){return jg(t)==="[object String]"}function kce(t){return jg(t)==="[object Object]"}function Ice(t){return jg(t)==="[object RegExp]"}function G2(t){return jg(t)==="[object Function]"}function Tce(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var z2={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function Ace(t){return Object.keys(t||{}).reduce(function(e,r){return e||z2.hasOwnProperty(r)},!1)}var Dce={"http:":{validate:function(t,e,r){var n=t.slice(e);return r.re.http||(r.re.http=new RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(n)?n.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,r){var n=t.slice(e);return r.re.no_http||(r.re.no_http=new RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(n)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:n.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,r){var n=t.slice(e);return r.re.mailto||(r.re.mailto=new RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(n)?n.match(r.re.mailto)[0].length:0}}},Rce="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Oce="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function Nce(t){t.__index__=-1,t.__text_cache__=""}function Lce(t){return function(e,r){var n=e.slice(r);return t.test(n)?n.match(t)[0].length:0}}function K2(){return function(t,e){e.normalize(t)}}function Ug(t){var e=t.re=W2()(t.__opts__),r=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||r.push(Rce),r.push(e.src_xn),e.src_tlds=r.join("|");function n(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(n(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(n(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(n(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(n(e.tpl_host_fuzzy_test),"i");var i=[];t.__compiled__={};function o(a,c){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+c)}Object.keys(t.__schemas__).forEach(function(a){var c=t.__schemas__[a];if(c!==null){var l={validate:null,link:null};if(t.__compiled__[a]=l,kce(c)){Ice(c.validate)?l.validate=Lce(c.validate):G2(c.validate)?l.validate=c.validate:o(a,c),G2(c.normalize)?l.normalize=c.normalize:c.normalize?o(a,c):l.normalize=K2();return}if(Pce(c)){i.push(a);return}o(a,c)}}),i.forEach(function(a){!t.__compiled__[t.__schemas__[a]]||(t.__compiled__[a].validate=t.__compiled__[t.__schemas__[a]].validate,t.__compiled__[a].normalize=t.__compiled__[t.__schemas__[a]].normalize)}),t.__compiled__[""]={validate:null,normalize:K2()};var s=Object.keys(t.__compiled__).filter(function(a){return a.length>0&&t.__compiled__[a]}).map(Tce).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+s+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+s+")","ig"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),Nce(t)}function Fce(t,e){var r=t.__index__,n=t.__last_index__,i=t.__text_cache__.slice(r,n);this.schema=t.__schema__.toLowerCase(),this.index=r+e,this.lastIndex=n+e,this.raw=i,this.text=i,this.url=i}function Y2(t,e){var r=new Fce(t,e);return t.__compiled__[r.schema].normalize(r,t),r}function Sn(t,e){if(!(this instanceof Sn))return new Sn(t,e);e||Ace(t)&&(e=t,t={}),this.__opts__=l_({},z2,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=l_({},Dce,t),this.__compiled__={},this.__tlds__=Oce,this.__tlds_replaced__=!1,this.re={},Ug(this)}Sn.prototype.add=function(e,r){return this.__schemas__[e]=r,Ug(this),this};Sn.prototype.set=function(e){return this.__opts__=l_(this.__opts__,e),this};Sn.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var r,n,i,o,s,a,c,l,u;if(this.re.schema_test.test(e)){for(c=this.re.schema_search,c.lastIndex=0;(r=c.exec(e))!==null;)if(o=this.testSchemaAt(e,r[2],c.lastIndex),o){this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test),l>=0&&(this.__index__<0||l<this.__index__)&&(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=n.index+n[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=n.index+n[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(u=e.indexOf("@"),u>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(s=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=a))),this.__index__>=0};Sn.prototype.pretest=function(e){return this.re.pretest.test(e)};Sn.prototype.testSchemaAt=function(e,r,n){return this.__compiled__[r.toLowerCase()]?this.__compiled__[r.toLowerCase()].validate(e,n,this):0};Sn.prototype.match=function(e){var r=0,n=[];this.__index__>=0&&this.__text_cache__===e&&(n.push(Y2(this,r)),r=this.__last_index__);for(var i=r?e.slice(r):e;this.test(i);)n.push(Y2(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};Sn.prototype.tlds=function(e,r){return e=Array.isArray(e)?e:[e],r?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(n,i,o){return n!==o[i-1]}).reverse(),Ug(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,Ug(this),this)};Sn.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};Sn.prototype.onCompile=function(){};J2.exports=Sn});var Z2=I((HSe,X2)=>{"use strict";X2.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}});var tH=I((VSe,eH)=>{"use strict";eH.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}}});var nH=I((WSe,rH)=>{"use strict";rH.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}}});var aH=I((GSe,sH)=>{"use strict";var Ud=ze(),Mce=XU(),qce=eB(),$ce=xB(),jce=c2(),Uce=H2(),Bce=Q2(),ma=B0(),iH=require("punycode"),Hce={default:Z2(),zero:tH(),commonmark:nH()},Vce=/^(vbscript|javascript|file|data):/,Wce=/^data:image\/(gif|png|jpeg|webp);/;function Gce(t){var e=t.trim().toLowerCase();return Vce.test(e)?!!Wce.test(e):!0}var oH=["http:","https:","mailto:"];function zce(t){var e=ma.parse(t,!0);if(e.hostname&&(!e.protocol||oH.indexOf(e.protocol)>=0))try{e.hostname=iH.toASCII(e.hostname)}catch{}return ma.encode(ma.format(e))}function Kce(t){var e=ma.parse(t,!0);if(e.hostname&&(!e.protocol||oH.indexOf(e.protocol)>=0))try{e.hostname=iH.toUnicode(e.hostname)}catch{}return ma.decode(ma.format(e),ma.decode.defaultChars+"%")}function xn(t,e){if(!(this instanceof xn))return new xn(t,e);e||Ud.isString(t)||(e=t||{},t="default"),this.inline=new Uce,this.block=new jce,this.core=new $ce,this.renderer=new qce,this.linkify=new Bce,this.validateLink=Gce,this.normalizeLink=zce,this.normalizeLinkText=Kce,this.utils=Ud,this.helpers=Ud.assign({},Mce),this.options={},this.configure(t),e&&this.set(e)}xn.prototype.set=function(t){return Ud.assign(this.options,t),this};xn.prototype.configure=function(t){var e=this,r;if(Ud.isString(t)&&(r=t,t=Hce[r],!t))throw new Error('Wrong `markdown-it` preset "'+r+'", check name');if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(n){t.components[n].rules&&e[n].ruler.enableOnly(t.components[n].rules),t.components[n].rules2&&e[n].ruler2.enableOnly(t.components[n].rules2)}),this};xn.prototype.enable=function(t,e){var r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.enable(t,!0))},this),r=r.concat(this.inline.ruler2.enable(t,!0));var n=t.filter(function(i){return r.indexOf(i)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this};xn.prototype.disable=function(t,e){var r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.disable(t,!0))},this),r=r.concat(this.inline.ruler2.disable(t,!0));var n=t.filter(function(i){return r.indexOf(i)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this};xn.prototype.use=function(t){var e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};xn.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");var r=new this.core.State(t,this,e);return this.core.process(r),r.tokens};xn.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};xn.prototype.parseInline=function(t,e){var r=new this.core.State(t,this,e);return r.inlineMode=!0,this.core.process(r),r.tokens};xn.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};sH.exports=xn});var lH=I((zSe,cH)=>{"use strict";cH.exports=aH()});var NV=I((RIe,cue)=>{cue.exports={name:"remote-containers",displayName:"Remote - Containers",description:"Open any folder or repository inside a Docker container and take advantage of Visual Studio Code's full feature set.",version:"0.234.0",preview:!0,publisher:"ms-vscode-remote",icon:"resources/remote-containers.png",repository:{type:"git",url:"https://github.com/Microsoft/vscode-remote-release.git"},bugs:{url:"https://github.com/Microsoft/vscode-remote-release/issues"},license:"SEE LICENSE IN LICENSE.txt",engines:{vscode:"^1.64.0"},extensionKind:["ui"],capabilities:{untrustedWorkspaces:{supported:"limited",description:"Opening a folder in a container requires workspace trust."},virtualWorkspaces:!0},categories:["Other"],keywords:["remote","docker","containers","remote development","dev container","development container"],aiKey:"AIF-d9b70cd4-b9f9-4d70-929b-a071c400b217",activationEvents:["onStartupFinished","onCommand:remote-containers.reopenInContainer","onCommand:remote-containers.rebuildAndReopenInContainer","onCommand:remote-containers.rebuildNoCacheAndReopenInContainer","onCommand:remote-containers.reopenLocally","onCommand:remote-containers.reopenInWSL","onCommand:remote-containers.reopenInSSH","onCommand:remote-containers.openFolder","onCommand:remote-containers.openRepositoryInVolume","onCommand:remote-containers.openRepositoryInUniqueVolume","onCommand:remote-containers.openRepositoryFromRemoteHub","onCommand:remote-containers.openPullRequestInVolume","onCommand:remote-containers.inspectVolume","onCommand:remote-containers.inspectVolumeFromViewlet","onCommand:remote-containers.inspectInBasicDevContainer","onCommand:remote-containers.cloneInVolumeFromViewlet","onCommand:remote-containers.pruneVolumes","onCommand:remote-containers.openWorkspace","onCommand:remote-containers.attachToRunningContainer","onCommand:remote-containers.attachToRunningContainerFromViewlet","onCommand:remote-containers.attachToK8sContainerFromViewlet","onCommand:remote-containers.checkoutPRInVolume","onCommand:remote-containers.rebuildContainer","onCommand:remote-containers.rebuildContainerNoCache","onCommand:remote-containers.createDevContainerFile","onCommand:remote-containers.openDevContainerFile","onCommand:remote-containers.openAttachDevContainerFile","onCommand:remote-containers.settings","onCommand:remote-containers.getHelp","onCommand:remote-containers.getStarted","onCommand:remote-containers.trySample","onCommand:remote-containers.reportIssue","onCommand:remote-containers.provideFeedback","onCommand:remote-containers.revealLogTerminal","onCommand:remote-containers.openLogFile","onCommand:remote-containers.openLastLogFile","onCommand:remote-containers.addExtensionToConfig","onCommand:remote-containers.showReopenInContainerNotificationReset","onCommand:remote-containers.showRecoveryContainerNotificationReset","onCommand:remote-containers.labelPortAndUpdateConfig","onCommand:remote-containers.installDocker","onCommand:remote-containers.installUserCLI","onCommand:remote-containers.configureContainerFeatures","workspaceContains:.devcontainer/devcontainer.json","workspaceContains:.devcontainer.json","onResolveRemoteAuthority:dev-container","onResolveRemoteAuthority:attached-container","onResolveRemoteAuthority:k8s-container","onDebugResolve:extensionHost","onView:targetsContainers"],main:"./dist/extension/extension",enabledApiProposals:["resolvers","workspaceTrust","terminalDimensions","contribViewsRemote"],contributes:{virtualWorkspaces:{menus:{continueOn:[{command:"remote-containers.openRepositoryFromRemoteHub",group:"0_local@2",when:"!isWeb && remoteHub:hasVirtualFolders"}]}},languages:[{id:"jsonc",filenames:["devcontainer-features.json"]}],jsonValidation:[{fileMatch:"devcontainer-features.json",url:"./schemas/devcontainer-features.schema.json"}],configuration:{title:"Remote - Containers",properties:{"remote.containers.defaultExtensions":{scope:"application",type:"array",description:"Configures the list of extensions to always install while creating a container.",default:[],items:{type:"string",pattern:"([a-z0-9A-Z][a-z0-9\\-A-Z]*)\\.([a-z0-9A-Z][a-z0-9\\-A-Z]*)",errorMessage:"Expected format '${publisher}.${name}'. Example: 'vscode.csharp'."}},"remote.containers.workspaceMountConsistency":{scope:"application",type:"string",enum:["consistent","cached","delegated"],enumDescriptions:["Perfect consistency.","The host\u2019s view is authoritative.","The container\u2019s view is authoritative."],description:"The consistency level used for the workspace mount (existing containers must be rebuilt to take effect).",default:"cached"},"remote.containers.cacheVolume":{scope:"application",type:"boolean",description:"Controls whether a Docker volume should be used to cache the VS Code server and extensions. Currently only applies to single container and not Docker Compose configurations.",default:!0},"remote.containers.copyGitConfig":{scope:"machine",type:"boolean",markdownDescription:"Controls whether the Git configuration (`~/.gitconfig`) should be copied into the container. This is done after installing any `#dotfiles.repository#` and will not overwrite an existing Git configuration file.",default:!0},"remote.containers.gitCredentialHelperConfigLocation":{scope:"machine",type:"string",enum:["system","global","none"],enumDescriptions:["Write to system config (`/etc/gitconfig`, requires root access).","Write to user config (`~/.gitconfig`).","Do not set a credential helper."],description:"Where to write the configuration for the Git credential helper.",default:"global"},"remote.containers.logLevel":{scope:"application",type:"string",description:"The log level for the extension.",default:"debug",enum:["info","debug","trace"]},"remote.containers.dockerPath":{scope:"application",type:"string",description:"Docker (or Podman) executable name or path.",default:"docker"},"remote.containers.dockerComposePath":{scope:"application",type:"string",description:"Docker Compose executable name or path.",default:"docker-compose"},"remote.containers.executeInWSL":{scope:"application",type:"boolean",description:"Controls whether CLI commands should always be executed in WSL. The default is to only execute in WSL for workspace folders in WSL. This setting has no effect on other platforms than Windows.",default:!1},"remote.containers.executeInWSLDistro":{scope:"application",type:"string",markdownDescription:"WSL distro to use when not reopening a WSL folder. The default is to use the default WSL distro (see `wsl -l`). This setting has no effect when `#remote.containers.executeInWSL#` is not enabled or on other platforms than Windows."},"dotfiles.repository":{scope:"machine",type:"string",description:"URL of a dotfiles Git repository (e.g., https://github.com/owner/repository.git) or owner/repository of a GitHub repository."},"dotfiles.installCommand":{scope:"machine",type:"string",description:"The command to run after cloning the dotfiles repository. Defaults to run the first file of `install.sh`, `install`, `bootstrap.sh`, `bootstrap`, `setup.sh` and `setup` found in the dotfiles repository's root folder."},"dotfiles.targetPath":{scope:"machine",type:"string",description:"The path to clone the dotfiles repository to. Defaults to `~/dotfiles`.",default:"~/dotfiles"},"remote.containers.dotfiles.repository":{scope:"machine",type:"string",description:"URL of a dotfiles Git repository (e.g., https://github.com/owner/repository.git) or owner/repository of a GitHub repository for DevContainers. This overrides the common setting for the dotfiles repository."},"remote.containers.dotfiles.installCommand":{scope:"machine",type:"string",description:"The command to run after cloning the dotfiles repository for DevContainers. This overrides the common setting for the dotfiles install command."},"remote.containers.dotfiles.targetPath":{scope:"machine",type:"string",description:"The path to clone the dotfiles repository to for DevContainers. This overrides the common setting for the dotfiles target path."},"remote.containers.repositoryConfigurationPaths":{scope:"application",type:"array",markdownDescription:"List of additional paths to search for [repository configurations](https://github.com/microsoft/vscode-dev-containers/tree/main/repository-containers).",default:[],items:{type:"string"}}}},commands:[{command:"remote-containers.reopenInContainer",title:"Reopen in Container",category:"Remote-Containers"},{command:"remote-containers.rebuildAndReopenInContainer",title:"Rebuild and Reopen in Container",category:"Remote-Containers"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",title:"Rebuild Without Cache and Reopen in Container",category:"Remote-Containers"},{command:"remote-containers.reopenLocally",title:"Reopen Folder Locally",category:"Remote-Containers"},{command:"remote-containers.reopenInWSL",title:"Reopen Folder in WSL",category:"Remote-Containers"},{command:"remote-containers.reopenInSSH",title:"Reopen Folder in SSH",category:"Remote-Containers"},{command:"remote-containers.openFolder",title:"Open Folder in Container...",category:"Remote-Containers",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.startAndOpenFolder",title:"Open Folder in Container",category:"Remote-Containers",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.openRepositoryInVolume",title:"Clone Repository in Named Container Volume...",category:"Remote-Containers"},{command:"remote-containers.openRepositoryInUniqueVolume",title:"Clone Repository in Container Volume...",icon:"$(repo-clone)",category:"Remote-Containers"},{command:"remote-containers.openRepositoryFromRemoteHub",title:"Clone Repository in a Container Volume",icon:"$(repo-clone)",category:"Remote-Containers"},{command:"remote-containers.openPullRequestInVolume",title:"Clone GitHub Pull Request in Container Volume...",category:"Remote-Containers"},{command:"remote-containers.inspectVolume",title:"Explore a Volume in a Development Container...",category:"Remote-Containers"},{command:"remote-containers.openWorkspace",title:"Open Workspace in Container...",category:"Remote-Containers"},{command:"remote-containers.attachToRunningContainer",title:"Attach to Running Container...",category:"Remote-Containers"},{command:"remote-containers.attachToRunningContainerFromViewlet",title:"Attach Visual Studio Code",category:"Remote-Containers"},{command:"remote-containers.inspectVolumeFromViewlet",title:"Explore in a Development Container",category:"Remote-Containers"},{command:"remote-containers.cloneInVolumeFromViewlet",title:"Clone into existing Volume",category:"Remote-Containers"},{command:"remote-containers.pruneVolumes",title:"Remove Unused Volumes...",category:"Remote-Containers",icon:"$(clear-all)"},{command:"remote-containers.explorerVolumesRefresh",title:"Refresh",category:"Remote-Containers",icon:"$(refresh)"},{command:"remote-containers.attachToK8sContainerFromViewlet",title:"Attach Visual Studio Code",category:"Remote-Containers"},{command:"remote-containers.rebuildContainer",title:"Rebuild Container",category:"Remote-Containers",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.rebuildContainerNoCache",title:"Rebuild Container Without Cache",category:"Remote-Containers",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.createDevContainerFile",title:"Add Development Container Configuration Files...",category:"Remote-Containers"},{command:"remote-containers.settings",title:"Settings for Remote-Containers",category:"Remote-Containers"},{command:"remote-containers.getHelp",title:"Help for Remote-Containers",category:"Remote-Containers"},{command:"remote-containers.getStarted",title:"Getting Started with Remote-Containers",category:"Remote-Containers"},{command:"remote-containers.trySample",title:"Try a Development Container Sample...",category:"Remote-Containers"},{command:"remote-containers.reportIssue",title:"Report Issue with Remote-Containers...",category:"Remote-Containers"},{command:"remote-containers.provideFeedback",title:"Provide Feedback",category:"Remote-Containers"},{command:"remote-containers.openDevContainerFile",title:"Open Container Configuration File",category:"Remote-Containers",icon:{light:"resources/light/gear.svg",dark:"resources/dark/gear.svg"}},{command:"remote-containers.openAttachConfigByNameFile",title:"Open Named Container Configuration File",category:"Remote-Containers"},{command:"remote-containers.openAttachDevContainerFile",title:"Open Attached Container Configuration File...",category:"Remote-Containers"},{command:"remote-containers.revealLogTerminal",title:"Show Container Log",category:"Remote-Containers"},{command:"remote-containers.openLogFile",title:"Show All Logs...",category:"Remote-Containers Developer"},{command:"remote-containers.openLastLogFile",title:"Show Previous Log",category:"Remote-Containers"},{command:"remote-containers.attachToContainer",title:"Attach to Container",category:"Remote-Containers",icon:{light:"resources/light/empty-window.svg",dark:"resources/dark/empty-window.svg"}},{command:"remote-containers.attachToContainerNewWindow",title:"Attach in New Window",category:"Remote-Containers"},{command:"remote-containers.stopContainer",title:"Stop Container",category:"Remote-Containers"},{command:"remote-containers.startContainer",title:"Start Container",category:"Remote-Containers",icon:{light:"resources/light/vm-start.svg",dark:"resources/dark/vm-start.svg"}},{command:"remote-containers.removeContainer",title:"Remove Container",category:"Remote-Containers",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.removeRecentFolder",title:"Remove Recent Folder",category:"Remote-Containers",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.showDetails",title:"Show Details",category:"Remote-Containers"},{command:"remote-containers.explorerTargetsRefresh",title:"Refresh",category:"Remote-Containers",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.explorerDetailsRefresh",title:"Refresh",category:"Remote-Containers",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.inspectDockerResource",title:"Inspect",category:"Remote-Containers"},{command:"remote-containers.inspectInBasicDevContainer",title:"Explore in Development Container",category:"Remote-Containers"},{command:"remote-containers.cloneInVolume",title:"Clone Repository in Volume",category:"Remote-Containers"},{command:"remote-containers.removeVolume",title:"Remove",category:"Remote-Containers"},{command:"remote-containers.newContainer",title:"New Container",category:"Remote-Containers",icon:{light:"resources/light/plus.svg",dark:"resources/dark/plus.svg"}},{command:"remote-containers.showContainerLog",title:"Show Container Log",category:"Remote-Containers"},{command:"remote-containers.addExtensionToConfig",title:"Add to devcontainer.json",category:"Remote-Containers"},{command:"remote-containers.checkoutPRInVolume",title:"Checkout Pull Request in Dev Container",category:"Remote-Containers"},{command:"remote-containers.showReopenInContainerNotificationReset",title:"Reset Don't Show Reopen Notification",category:"Remote-Containers"},{command:"remote-containers.showRecoveryContainerNotificationReset",title:"Reset Don't Show Recovery Container Notification",category:"Remote-Containers"},{command:"remote-containers.labelPortAndUpdateConfig",title:"Set Label and Update devcontainer.json",category:"Remote-Containers",icon:"$(tag)"},{command:"remote-containers.installDocker",title:"Install Docker",category:"Remote-Containers"},{command:"remote-containers.installUserCLI",title:"Install devcontainer CLI",category:"Remote-Containers"},{command:"remote-containers.configureContainerFeatures",title:"Configure Container Features...",category:"Remote-Containers"}],menus:{commandPalette:[{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && remoteName == dev-container && isRecoveryContainer"},{command:"remote-containers.rebuildAndReopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildAndReopenInContainer",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.reopenLocally",when:"canReopenLocally"},{command:"remote-containers.reopenInWSL",when:"canReopenInWSL"},{command:"remote-containers.reopenInSSH",when:"canReopenInSSH"},{command:"remote-containers.openFolder",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openRepositoryInVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openPullRequestInVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openWorkspace",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.attachToRunningContainer",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.attachToRunningContainerFromViewlet",when:"false"},{command:"remote-containers.inspectVolumeFromViewlet",when:"false"},{command:"remote-containers.openRepositoryFromRemoteHub",when:"false"},{command:"remote-containers.cloneInVolumeFromViewlet",when:"false"},{command:"remote-containers.inspectInBasicDevContainer",when:"false"},{command:"remote-containers.cloneInVolume",when:"false"},{command:"remote-containers.removeVolume",when:"false"},{command:"remote-containers.attachToK8sContainerFromViewlet",when:"false"},{command:"remote-containers.checkoutPRInVolume",when:"false"},{command:"remote-containers.rebuildContainer",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainerNoCache",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.createDevContainerFile",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",when:"remoteName =~ /^(dev-container|wsl|ssh-remote)$/"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.openDevContainerFile",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.openAttachConfigByNameFile",when:"remoteName == attached-container"},{command:"remote-containers.openAttachDevContainerFile",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.getStarted",when:"false"},{command:"remote-containers.trySample",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.trySample",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.provideFeedback",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.attachToContainer",when:"false"},{command:"remote-containers.attachToContainerNewWindow",when:"false"},{command:"remote-containers.stopContainer",when:"false"},{command:"remote-containers.removeContainer",when:"false"},{command:"remote-containers.startContainer",when:"false"},{command:"remote-containers.removeRecentFolder",when:"false"},{command:"remote-containers.showDetails",when:"false"},{command:"remote-containers.explorerTargetsRefresh",when:"false"},{command:"remote-containers.explorerVolumesRefresh",when:"false"},{command:"remote-containers.explorerDetailsRefresh",when:"false"},{command:"remote-containers.inspectDockerResource",when:"false"},{command:"remote-containers.startAndOpenFolder",when:"false"},{command:"remote-containers.newContainer",when:"false"},{command:"remote-containers.showContainerLog",when:"false"},{command:"remote-containers.labelPortAndUpdateConfig",when:"false"},{command:"remote-containers.addExtensionToConfig",when:"false"},{command:"remote-containers.configureContainerFeatures",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.configureContainerFeatures",when:"remoteName =~ /^(dev-container|wsl|ssh-remote)$/"}],"statusBar/remoteIndicator":[{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@1",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@1",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_2_actions@2",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_2_actions@2",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@4",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@4",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_2_actions@5",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_2_actions@5",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@6",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@6",when:"remoteName =~ /^(dev-container|wsl|ssh-remote)$/"},{command:"remote-containers.trySample",group:"remote_30_dev-container_2_actions@7",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.trySample",group:"remote_30_dev-container_2_actions@7",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.getStarted",group:"remote_30_dev-container_2_actions@8",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.getStarted",group:"remote_30_dev-container_2_actions@8",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.reopenInWSL",group:"remote_30_dev-container_1_actions@1",when:"canReopenInWSL"},{command:"remote-containers.reopenInSSH",group:"remote_30_dev-container_1_actions@1",when:"canReopenInSSH"},{command:"remote-containers.reopenLocally",group:"remote_30_dev-container_1_actions@2",when:"canReopenLocally"},{command:"remote-containers.rebuildContainer",group:"remote_30_dev-container_1_actions@3",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.openDevContainerFile",group:"remote_30_dev-container_1_actions@4",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.revealLogTerminal",group:"remote_30_dev-container_1_actions@5",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_1_actions@6",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/ && remoteConnectionState == connected"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_1_actions@8",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/ && remoteConnectionState == connected"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_1_actions@9",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.settings",group:"remote_30_dev-container_9_help@1",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.reportIssue",group:"remote_30_dev-container_9_help@2",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.getHelp",group:"remote_30_dev-container_9_help@4",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"}],"view/title":[{command:"remote-containers.explorerTargetsRefresh",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation"},{command:"remote-containers.newContainer",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation"},{command:"remote-containers.explorerDetailsRefresh",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.attachToContainer",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.rebuildContainer",when:"view == detailsContainers && remoteName == dev-container",group:"navigation"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && remoteName =~ /^(dev|attached)-container$/",group:"navigation"},{command:"remote-containers.pruneVolumes",when:"view == devVolumes",group:"navigation@2"},{command:"remote-containers.explorerVolumesRefresh",when:"view == devVolumes",group:"navigation@3"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"view == devVolumes",group:"navigation@1"}],"view/item/context":[{command:"remote-containers.attachToRunningContainerFromViewlet",when:"view == dockerContainers && viewItem =~ /^runningContainer$/i && vscode-docker:aciContext != true",group:"containers_1_general@2"},{command:"remote-containers.inspectVolumeFromViewlet",when:"view == dockerVolumes && viewItem == volume && vscode-docker:aciContext != true",group:"volumes_1_general@2"},{command:"remote-containers.checkoutPRInVolume",when:"view =~ /pr:/ && viewItem =~ /pullrequest(:local)?:nonactive|description/"},{command:"remote-containers.attachToK8sContainerFromViewlet",group:"2@4",when:"remoteName =~ /^(wsl)?$/ && view == extension.vsKubernetesExplorer && viewItem =~ /vsKubernetes\\.resource\\.pod/i"},{command:"remote-containers.startAndOpenFolder",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"1_folder@1"},{command:"remote-containers.startAndOpenFolder",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"inline@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"2_folder@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"inline@2"},{command:"workbench.action.closeFolder",when:"view == targetsContainers && viewItem =~ /active.*Folder/",group:"1_folder@1"},{command:"remote-containers.reopenLocally",when:"canReopenLocally && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInWSL",when:"canReopenInWSL && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInSSH",when:"canReopenInSSH && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.attachToContainer",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"1_container@1"},{command:"remote-containers.attachToContainer",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"inline@1"},{command:"remote-containers.attachToContainerNewWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"1_container@2"},{command:"remote-containers.stopContainer",when:"view == targetsContainers && viewItem =~ /^(active|running)(Dev|)Container/",group:"2_container@2"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"2_container@3"},{command:"remote-containers.rebuildContainer",when:"view == targetsContainers && viewItem =~ /activeDevContainer/",group:"2_container@1"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"inline@2"},{command:"remote-containers.startContainer",when:"view == targetsContainers && viewItem =~ /^exited(Dev|)Container/",group:"1_container@3"},{command:"remote-containers.showDetails",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@4"},{command:"remote-containers.inspectDockerResource",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@5"},{command:"remote-containers.showContainerLog",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@6"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && viewItem == devContainer"},{command:"remote-containers.inspectDockerResource",when:"view == detailsContainers && viewItem =~ /^(image|volume)$/"},{command:"remote-containers.cloneInVolume",when:"view == devVolumes && viewItem =~ /^(devVolume)$/",group:"1_volumes@1"},{command:"remote-containers.inspectInBasicDevContainer",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@1"},{command:"remote-containers.inspectDockerResource",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@2"},{command:"remote-containers.removeVolume",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"3_volumes-destructive@1"}],"ports/item/port/inline":[{command:"remote-containers.labelPortAndUpdateConfig",group:"0_manage@4",when:"remoteName =~ /^(dev|attached)-container$/ && tunnelType == Forwarded"}],"extension/context":[{command:"remote-containers.addExtensionToConfig",group:"2_configure",when:"!isBuiltinExtension && remoteName =~ /^(dev-container|attached-container|wsl|ssh-remote)?$/"}]},resourceLabelFormatters:[{scheme:"vscode-remote",authority:"dev-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Dev Container"}},{scheme:"vscode-remote",authority:"attached-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Container"}},{scheme:"vscode-remote",authority:"exec+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Exec"}},{scheme:"vscode-remote",authority:"k8s-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Kubernetes"}}],views:{remote:[{id:"targetsContainers",name:"Containers",group:"targets@2",remoteName:["dev-container","attached-container","exec","k8s-container"]},{id:"detailsContainers",name:"Details (Containers)",when:"remote-containers:showDetails",group:"details@1",remoteName:["dev-container","attached-container"]},{id:"devVolumes",name:"DevVolumes",group:"details@2",remoteName:["dev-container","attached-container"]}]},viewsWelcome:[{view:"targetsContainers",when:"remote-containers:needsDockerStartOrInstall",contents:"Get started with containers by [installing Docker](command:remote-containers.installDocker) or by visiting the [help view](command:~remote.helpPanel.focus). [Refresh](command:remote-containers.explorerTargetsRefresh) after installation and startup."},{view:"targetsContainers",when:"remote-containers:needsSSHCredentials",contents:"[Refresh](command:remote-containers.explorerTargetsRefresh) to provide SSH credentials."},{view:"targetsContainers",when:"remote-containers:noContainersWithFolder",contents:`Get started with containers by running one of the [Remote-Containers](command:remote-containers.newContainer) commands.
You can [reopen the current folder in a container](command:remote-containers.reopenInContainer), or open another folder in a container.
[Open Folder in Container](command:remote-containers.openFolder)
If you're new to containers and want to [try a sample](command:remote-containers.trySample), there are several to choose from.`},{view:"targetsContainers",when:"remote-containers:noContainersWithoutFolder",contents:`Get started with containers by running one of the [Remote-Containers](command:remote-containers.newContainer) commands.
You can open an existing folder in a container.
[Open Folder in Container](command:remote-containers.openFolder)
If you're new to containers and want to [try a sample](command:remote-containers.trySample), there are several to choose from.`},{view:"devVolumes",when:"remote-containers:noDevVolumes",contents:`If there's a repository you want to work with you can clone that directly in a container volume.
[Clone Repository in Container Volume](command:remote-containers.openRepositoryInUniqueVolume)
`}],remoteHelp:{getStarted:"https://aka.ms/vscode-remote/containers/tutorial-sandbox",feedback:"https://aka.ms/vscode-remote/containers/provide-feedback",documentation:"https://aka.ms/vscode-remote/containers",issues:"https://aka.ms/vscode-remote/containers/issues",remoteName:["dev-container","attached-container","exec","k8s-container"]}},scripts:{"vscode:prepublish":"npm-run-all clean definitions compile-prod dev-containers-user-cli-prepare",compile:"npm-run-all clean-dist definitions compile-dev",watch:"npm-run-all clean-dist definitions compile-watch",precommit:"node build/hygiene.js",package:"vsce package --yarn",definitions:"npm-run-all definitions-clean definitions-copy",lint:"eslint -c .eslintrc.js --rulesdir ./build/eslint --ext .ts ./src ./test","compile-prod":"node esbuild.js --production","compile-dev":"node esbuild.js","compile-watch":"node esbuild.js --watch","type-check":"npm-run-all clean-built tsc-b","tsc-b":"tsc -b","type-check-watch":"npm-run-all clean-built tsc-b-w","tsc-b-w":"tsc -b -w","definitions-clean":"rimraf dist/node_modules/vscode-dev-containers","definitions-copy":'copyfiles --all "node_modules/vscode-dev-containers/**/*" dist',"dev-containers-cli-publish":"npm-run-all dev-containers-cli-prepare dev-containers-cli-npm-publish","dev-containers-cli-package":"npm-run-all dev-containers-cli-prepare dev-containers-cli-npm-pack","dev-containers-cli-prepare":"npm-run-all clean dev-containers-cli-compile dev-containers-cli-copy-module dev-containers-cli-copy-definitions","dev-containers-cli-compile":"npm-run-all compile-prod","dev-containers-cli-copy-module":'copyfiles ThirdPartyNotices.txt dist/node/devContainersCLI.js dist/spec-node/devContainersSpecCLI.js "scripts/**/*" dev-containers-cli',"dev-containers-cli-copy-definitions":'copyfiles --all "node_modules/vscode-dev-containers/**/*" dev-containers-cli/dist',"dev-containers-cli-npm-publish":"cd dev-containers-cli && npm publish","dev-containers-cli-npm-pack":"cd dev-containers-cli && npm pack","dev-containers-user-cli-package":"npm-run-all dev-containers-user-cli-prepare dev-containers-user-cli-npm-pack","dev-containers-user-cli-prepare":"npm-run-all dev-containers-user-cli-copy-module dev-containers-user-cli-copy-definitions","dev-containers-user-cli-clean-prepare":"npm-run-all clean dev-containers-user-prepare","dev-containers-user-cli-copy-module":'copyfiles ThirdPartyNotices.txt dist/node/devContainersUserCLI.js dist/spec-node/devContainersSpecCLI.js "scripts/**/*" dev-containers-user-cli',"dev-containers-user-cli-copy-definitions":'copyfiles --all "node_modules/vscode-dev-containers/**/*" dev-containers-user-cli/dist',"dev-containers-user-cli-npm-pack":"cd dev-containers-user-cli && npm pack",clean:"npm-run-all clean-dist clean-built","clean-dist":"rimraf dist dev-containers-cli/dist dev-containers-cli/scripts dev-containers-user-cli/dist dev-containers-user-cli/scripts","clean-built":"rimraf built",test:"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit test/core/**/*.test.ts","test-no-env":"mocha -r ts-node/register --exit test/core/**/*.test.ts","test-dev-containers":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/**/*.test.ts",copytestconfigsforalpine:"/bin/bash -c 'cd test/configs && for f in *; do if [[ -d $f ]] && [[ $f != *alpine* ]]; then cp -r -T $f $f-alpine ; fi ; done'"},devDependencies:{"@types/chai":"^4.3.0","@types/follow-redirects":"^1.13.1","@types/js-yaml":"^4.0.5","@types/markdown-it":"^12.2.3","@types/minimist":"^1.2.2","@types/mocha":"^9.1.0","@types/node":"^16.11.7","@types/pull-stream":"^3.6.2","@types/semver":"^7.3.9","@types/shell-quote":"^1.7.1","@types/stats-lite":"^2.2.0","@types/tar":"^6.1.1","@types/uuid":"^8.3.4","@types/vscode":"^1.63.1","@types/yargs":"^17.0.8","@typescript-eslint/eslint-plugin":"^4.31.2","@typescript-eslint/parser":"^4.31.2",ajv:"^8.9.0",chai:"^4.3.4",copyfiles:"^2.4.1",esbuild:"^0.13.14",eslint:"^7.32.0","event-stream":"^4.0.1","gulp-eslint":"^6.0.0","gulp-filter":"^7.0.0",husky:"^7.0.4",jsonc:"^2.0.0",mocha:"^9.2.1","mocha-junit-reporter":"^2.0.2","npm-run-all":"^4.1.5","p-all":"^4.0.0",rimraf:"^3.0.2","ts-node":"^10.4.0",typescript:"^4.5.5","typescript-formatter":"^7.2.2",vinyl:"^2.2.1","vinyl-fs":"^3.0.3",vsce:"^2.6.7"},dependencies:{"@vscode/extension-telemetry":"^0.5.0",applicationinsights:"^2.2.0","dev-containers-cli":"/home/runner/work/vscode-remote-containers/vscode-remote-containers/node_modules/dev-containers-cli","find-process":"^1.4.7","follow-redirects":"^1.14.8","js-yaml":"^4.1.0","jsonc-parser":"^3.0.0","markdown-it":"^12.3.2",minimist:"^1.2.6",muxrpc:"^6.5.4","node-pty":"^0.10.1","pull-pushable":"^2.2.0","pull-stream":"^3.6.14","pull-stream-to-stream":"^2.0.0",semver:"^7.3.5","shell-quote":"^1.7.3","stats-lite":"^2.2.0","stream-to-pull-stream":"^1.7.3",tar:"^6.1.11",uuid:"^8.3.2","vscode-dev-containers":"https://github.com/microsoft/vscode-dev-containers/releases/download/v0.234.0/vscode-dev-containers-0.234.0.tgz","vscode-tas-client":"^0.1.27","vscode-uri":"^3.0.3",yaml:"^2.0.0-10",yargs:"~17.0.1"}}});D3(exports,{activate:()=>lue,attachToContainer:()=>ov,deactivate:()=>pue});var U=K(require("vscode")),LV=K(require("os")),cv=K(require("fs")),Ft=K(require("path")),FV=K(require("querystring"));var pt=K(require("fs")),Jn=K(require("util"));function ht(t){return new Promise(e=>pt.stat(t,(r,n)=>e(!r&&n.isFile())))}function pl(t){return new Promise(e=>pt.stat(t,(r,n)=>e(!r&&n.isDirectory())))}var Oe=(0,Jn.promisify)(pt.readFile),hl=(0,Jn.promisify)(pt.writeFile),Fue=(0,Jn.promisify)(pt.appendFile),In=(0,Jn.promisify)(pt.rename),en=(0,Jn.promisify)(pt.readdir),X_=(0,Jn.promisify)(pt.unlink),Mr=t=>new Promise((e,r)=>pt.mkdir(t,{recursive:!0},n=>n?r(n):e())),Z_=(0,Jn.promisify)(pt.rmdir),ro=(0,Jn.promisify)(pt.rm),Mue=(0,Jn.promisify)(pt.copyFile),ml;(function(i){i[i.Unknown=0]="Unknown",i[i.File=1]="File",i[i.Directory=2]="Directory",i[i.SymbolicLink=64]="SymbolicLink"})(ml||(ml={}));var Me=K(require("vscode")),P_=K(require("path"));var Kr=K(require("path")),zJ=K(require("crypto")),c1=K(Ba());var ni=K(yk()),Gde=ni.default.v1,zde=ni.default.v3,Br=ni.default.v4,Kde=ni.default.v5,Yde=ni.default.NIL,Jde=ni.default.version,Qde=ni.default.validate,Xde=ni.default.stringify,Zde=ni.default.parse;var Ck=K(require("os")),Fl=K(require("fs")),bk=K(require("path"));async function wk(t,e){return{sendTelemetryEvent:async()=>{},isCachedFlightEnabled:async()=>!1,product:await e,package:await t,getTelemetryLevel:()=>"off"}}var se;(function(a){a[a.Trace=1]="Trace",a[a.Debug=2]="Debug",a[a.Info=3]="Info",a[a.Warning=4]="Warning",a[a.Error=5]="Error",a[a.Critical=6]="Critical",a[a.Off=7]="Off"})(se||(se={}));var Yy={info:3,debug:2,trace:1},u4=Object.keys(Yy).reduce((t,e)=>(t[Yy[e]]=e,t),[]);function Ek(t){return Yy[t]||3}function vo(t){return u4[t]||3}var it={write:()=>{},raw:()=>{},start:()=>Date.now(),stop:()=>{},event:()=>{}},yo=/(\x9B|\x1B\[)[0-?]*[ -\/]*[@-~]/g;function _k(t,e){let r=!!e;return{event:n=>{r&&(r=!1,t.forEach(i=>i.event({type:"text",level:3,timestamp:Date.now(),text:e}))),t.forEach(i=>i.event(n))}}}function Sk(t,e){let r=p4(t);return{event(n){let i=f4(n,e());i&&r.write(i)},join:r.join}}function xk(t,e,r){return{event(n){let i=d4(n,e(),r.getTime());i&&t(i)}}}function ir(t,e=2){return{event:t.event,write(r,n=e){t.event({type:"text",level:n,timestamp:Date.now(),text:r})},raw(r,n=e){t.event({type:"raw",level:n,timestamp:Date.now(),text:r})},start(r,n=e){let i=Date.now();return t.event({type:"start",level:n,timestamp:i,text:r}),i},stop(r,n,i=e){t.event({type:"stop",level:i,timestamp:Date.now(),text:r,startTimestamp:n})},get dimensions(){return t.dimensions},onDidChangeDimensions:t.onDidChangeDimensions}}function d4(t,e,r){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":return`[${Ml(Ik,`${t.timestamp-r} ms`)}] ${dp(t.text)}`;case"raw":return t.text;case"start":return 1>=e?`${Ml(v4,`[${t.timestamp-r} ms] Start`)}: ${dp(t.text)}`:`[${Ml(Ik,`${t.timestamp-r} ms`)}] Start: ${dp(t.text)}`;case"stop":return 1>=e?`${Ml(g4,`[${t.timestamp-r} ms] Stop`)} (${t.timestamp-t.startTimestamp} ms): ${dp(t.text)}`:void 0;default:throw Pk(t)}}function dp(t){return w4(t).replace(/\r?\n/g,`\r
`).replace(/(\r?\n)?$/,`\r
`)}function f4(t,e){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":case"raw":return`[${new Date(t.timestamp).toISOString()}] ${Jy(t.text)}`;case"start":return`[${new Date(t.timestamp).toISOString()}] Start: ${Jy(t.text)}`;case"stop":return 2>=e?`[${new Date(t.timestamp).toISOString()}] Stop (${t.timestamp-t.startTimestamp} ms): ${Jy(t.text)}`:void 0;default:throw Pk(t)}}function Jy(t){return t.replace(yo,"").replace(/(\r?\n)?$/,Ck.EOL)}function Pk(t){return new Error(`Unknown log event type: ${t.type}`)}function p4(t){let e=[],r=!1,n,i;function o(){r=!1,i&&!e.length&&(n=void 0,i(),i=void 0)}function s(a,c=!1){if(a&&e.push(a),!c&&!r&&e.length){r=!0;let l=e.join("");e.length=0,Fl.appendFile(t,l,u=>{u&&(u.code==="ENOENT"?Fl.mkdir(bk.dirname(t),{recursive:!0},d=>{d?(o(),console.error(d)):Fl.appendFile(t,l,f=>{o(),f&&console.error(f),s()})}):(o(),console.error(u))),o(),s()})}}return{write:s,join:()=>n||(r?n=new Promise(a=>i=a):Promise.resolve())}}var h4="38;2;143;99;79",kk="38;2;99;143;79",m4="38;2;86;156;214",g4=h4,v4=kk,Ik=kk,y4=m4;function Ml(t,e){return e.split(`
`).map(r=>`[1m[${t}m${r}[39m[22m`).join(`
`)}function w4(t){let e,r=0,n=[];for(yo.lastIndex=0;e=yo.exec(t);)n.push(Tk(t.substring(r,e.index))),n.push(e[0]),r=yo.lastIndex;return n.push(Tk(t.substr(r))),n.join("")}function Tk(t){let e=/(?<=^|[^A-Za-z0-9_\-\.])[0-9]+(\.[0-9]+)*(?=$|[^A-Za-z0-9_\-\.])/g,r,n=0,i=[];for(;r=e.exec(t);)i.push(t.substring(n,r.index)),i.push(Ml(y4,r[0])),n=e.lastIndex;return i.push(t.substr(n)),i.join("")}function Ne(t){return t.split(/\r?\n/).map(e=>`[1m[31m${e}[39m[22m`).join(`\r
`)+`\r
`}function Qy(t){return t.split(/\r?\n/).map(e=>`[1m[33m${e}[39m[22m`).join(`\r
`)+`\r
`}var ye=class extends Error{constructor(e){super(e.originalError&&e.originalError.message||e.description);this.manageContainer=!1;this.actions=[];this.data={};var r;Object.assign(this,e),((r=this.originalError)==null?void 0:r.stack)&&(this.stack=this.originalError.stack)}};var he=K(require("path")),ih=K(require("fs")),iR=K(Ga()),iC=K(require("string_decoder")),oh=K(Ba());"use strict";function $l(t,e){e===void 0&&(e=!1);var r=t.length,n=0,i="",o=0,s=16,a=0,c=0,l=0,u=0,d=0;function f(b,C){for(var S=0,P=0;S<b||!C;){var _=t.charCodeAt(n);if(_>=48&&_<=57)P=P*16+_-48;else if(_>=65&&_<=70)P=P*16+_-65+10;else if(_>=97&&_<=102)P=P*16+_-97+10;else break;n++,S++}return S<b&&(P=-1),P}function p(b){n=b,i="",o=0,s=16,d=0}function h(){var b=n;if(t.charCodeAt(n)===48)n++;else for(n++;n<t.length&&za(t.charCodeAt(n));)n++;if(n<t.length&&t.charCodeAt(n)===46)if(n++,n<t.length&&za(t.charCodeAt(n)))for(n++;n<t.length&&za(t.charCodeAt(n));)n++;else return d=3,t.substring(b,n);var C=n;if(n<t.length&&(t.charCodeAt(n)===69||t.charCodeAt(n)===101))if(n++,(n<t.length&&t.charCodeAt(n)===43||t.charCodeAt(n)===45)&&n++,n<t.length&&za(t.charCodeAt(n))){for(n++;n<t.length&&za(t.charCodeAt(n));)n++;C=n}else d=3;return t.substring(b,C)}function m(){for(var b="",C=n;;){if(n>=r){b+=t.substring(C,n),d=2;break}var S=t.charCodeAt(n);if(S===34){b+=t.substring(C,n),n++;break}if(S===92){if(b+=t.substring(C,n),n++,n>=r){d=2;break}var P=t.charCodeAt(n++);switch(P){case 34:b+='"';break;case 92:b+="\\";break;case 47:b+="/";break;case 98:b+="\b";break;case 102:b+="\f";break;case 110:b+=`
`;break;case 114:b+="\r";break;case 116:b+="	";break;case 117:var _=f(4,!0);_>=0?b+=String.fromCharCode(_):d=4;break;default:d=5}C=n;continue}if(S>=0&&S<=31)if(jl(S)){b+=t.substring(C,n),d=2;break}else d=6;n++}return b}function g(){if(i="",d=0,o=n,c=a,u=l,n>=r)return o=r,s=17;var b=t.charCodeAt(n);if(ow(b)){do n++,i+=String.fromCharCode(b),b=t.charCodeAt(n);while(ow(b));return s=15}if(jl(b))return n++,i+=String.fromCharCode(b),b===13&&t.charCodeAt(n)===10&&(n++,i+=`
`),a++,l=n,s=14;switch(b){case 123:return n++,s=1;case 125:return n++,s=2;case 91:return n++,s=3;case 93:return n++,s=4;case 58:return n++,s=6;case 44:return n++,s=5;case 34:return n++,i=m(),s=10;case 47:var C=n-1;if(t.charCodeAt(n+1)===47){for(n+=2;n<r&&!jl(t.charCodeAt(n));)n++;return i=t.substring(C,n),s=12}if(t.charCodeAt(n+1)===42){n+=2;for(var S=r-1,P=!1;n<S;){var _=t.charCodeAt(n);if(_===42&&t.charCodeAt(n+1)===47){n+=2,P=!0;break}n++,jl(_)&&(_===13&&t.charCodeAt(n)===10&&n++,a++,l=n)}return P||(n++,d=1),i=t.substring(C,n),s=13}return i+=String.fromCharCode(b),n++,s=16;case 45:if(i+=String.fromCharCode(b),n++,n===r||!za(t.charCodeAt(n)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=h(),s=11;default:for(;n<r&&v(b);)n++,b=t.charCodeAt(n);if(o!==n){switch(i=t.substring(o,n),i){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return i+=String.fromCharCode(b),n++,s=16}}function v(b){if(ow(b)||jl(b))return!1;switch(b){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function w(){var b;do b=g();while(b>=12&&b<=15);return b}return{setPosition:p,getPosition:function(){return n},scan:e?w:g,getToken:function(){return s},getTokenValue:function(){return i},getTokenOffset:function(){return o},getTokenLength:function(){return n-o},getTokenStartLine:function(){return c},getTokenStartCharacter:function(){return o-u},getTokenError:function(){return d}}}function ow(t){return t===32||t===9||t===11||t===12||t===160||t===5760||t>=8192&&t<=8203||t===8239||t===8287||t===12288||t===65279}function jl(t){return t===10||t===13||t===8232||t===8233}function za(t){return t>=48&&t<=57}"use strict";function sw(t,e,r){var n,i,o,s,a;if(e){for(s=e.offset,a=s+e.length,o=s;o>0&&!Ul(t,o-1);)o--;for(var c=a;c<t.length&&!Ul(t,c);)c++;i=t.substring(o,c),n=X4(i,r)}else i=t,n=0,o=0,s=0,a=t.length;var l=Z4(r,t),u=!1,d=0,f;r.insertSpaces?f=aw(" ",r.tabSize||4):f="	";var p=$l(i,!1),h=!1;function m(){return l+aw(f,n+d)}function g(){var j=p.scan();for(u=!1;j===15||j===14;)u=u||j===14,j=p.scan();return h=j===16||p.getTokenError()!==0,j}var v=[];function w(j,J,Y){!h&&(!e||J<a&&Y>s)&&t.substring(J,Y)!==j&&v.push({offset:J,length:Y-J,content:j})}var b=g();if(b!==17){var C=p.getTokenOffset()+o,S=aw(f,n);w(S,o,C)}for(;b!==17;){for(var P=p.getTokenOffset()+p.getTokenLength()+o,_=g(),k="",T=!1;!u&&(_===12||_===13);){var A=p.getTokenOffset()+o;w(" ",P,A),P=p.getTokenOffset()+p.getTokenLength()+o,T=_===12,k=T?m():"",_=g()}if(_===2)b!==1&&(d--,k=m());else if(_===4)b!==3&&(d--,k=m());else{switch(b){case 3:case 1:d++,k=m();break;case 5:case 12:k=m();break;case 13:u?k=m():T||(k=" ");break;case 6:T||(k=" ");break;case 10:if(_===6){T||(k="");break}case 7:case 8:case 9:case 11:case 2:case 4:_===12||_===13?T||(k=" "):_!==5&&_!==17&&(h=!0);break;case 16:h=!0;break}u&&(_===12||_===13)&&(k=m())}_===17&&(k=r.insertFinalNewline?l:"");var M=p.getTokenOffset()+o;w(k,P,M),b=_}return v}function aw(t,e){for(var r="",n=0;n<e;n++)r+=t;return r}function X4(t,e){for(var r=0,n=0,i=e.tabSize||4;r<t.length;){var o=t.charAt(r);if(o===" ")n++;else if(o==="	")n+=i;else break;r++}return Math.floor(n/i)}function Z4(t,e){for(var r=0;r<e.length;r++){var n=e.charAt(r);if(n==="\r")return r+1<e.length&&e.charAt(r+1)===`
`?`\r
`:"\r";if(n===`
`)return`
`}return t&&t.eol||`
`}function Ul(t,e){return`\r
`.indexOf(t.charAt(e))!==-1}"use strict";var Bl;(function(t){t.DEFAULT={allowTrailingComma:!1}})(Bl||(Bl={}));function Jk(t,e){var r=[],n=new Object,i=void 0,o={value:{},offset:0,length:0,type:"object",parent:void 0},s=!1;function a(c,l,u,d){o.value=c,o.offset=l,o.length=u,o.type=d,o.colonOffset=void 0,i=o}try{Cp(t,{onObjectBegin:function(c,l){if(e<=c)throw n;i=void 0,s=e>c,r.push("")},onObjectProperty:function(c,l,u){if(e<l||(a(c,l,u,"property"),r[r.length-1]=c,e<=l+u))throw n},onObjectEnd:function(c,l){if(e<=c)throw n;i=void 0,r.pop()},onArrayBegin:function(c,l){if(e<=c)throw n;i=void 0,r.push(0)},onArrayEnd:function(c,l){if(e<=c)throw n;i=void 0,r.pop()},onLiteralValue:function(c,l,u){if(e<l||(a(c,l,u,Xk(c)),e<=l+u))throw n},onSeparator:function(c,l,u){if(e<=l)throw n;if(c===":"&&i&&i.type==="property")i.colonOffset=l,s=!1,i=void 0;else if(c===","){var d=r[r.length-1];typeof d=="number"?r[r.length-1]=d+1:(s=!0,r[r.length-1]=""),i=void 0}}})}catch(c){if(c!==n)throw c}return{path:r,previousNode:i,isAtPropertyKey:s,matches:function(c){for(var l=0,u=0;l<c.length&&u<r.length;u++)if(c[l]===r[u]||c[l]==="*")l++;else if(c[l]!=="**")return!1;return l===c.length}}}function Qk(t,e,r){e===void 0&&(e=[]),r===void 0&&(r=Bl.DEFAULT);var n=null,i=[],o=[];function s(c){Array.isArray(i)?i.push(c):n!==null&&(i[n]=c)}var a={onObjectBegin:function(){var c={};s(c),o.push(i),i=c,n=null},onObjectProperty:function(c){n=c},onObjectEnd:function(){i=o.pop()},onArrayBegin:function(){var c=[];s(c),o.push(i),i=c,n=null},onArrayEnd:function(){i=o.pop()},onLiteralValue:s,onError:function(c,l,u){e.push({error:c,offset:l,length:u})}};return Cp(t,a,r),i[0]}function yp(t,e,r){e===void 0&&(e=[]),r===void 0&&(r=Bl.DEFAULT);var n={type:"array",offset:-1,length:-1,children:[],parent:void 0};function i(c){n.type==="property"&&(n.length=c-n.offset,n=n.parent)}function o(c){return n.children.push(c),c}var s={onObjectBegin:function(c){n=o({type:"object",offset:c,length:-1,parent:n,children:[]})},onObjectProperty:function(c,l,u){n=o({type:"property",offset:l,length:-1,parent:n,children:[]}),n.children.push({type:"string",value:c,offset:l,length:u,parent:n})},onObjectEnd:function(c,l){i(c+l),n.length=c+l-n.offset,n=n.parent,i(c+l)},onArrayBegin:function(c,l){n=o({type:"array",offset:c,length:-1,parent:n,children:[]})},onArrayEnd:function(c,l){n.length=c+l-n.offset,n=n.parent,i(c+l)},onLiteralValue:function(c,l,u){o({type:Xk(c),offset:l,length:u,parent:n,value:c}),i(l+u)},onSeparator:function(c,l,u){n.type==="property"&&(c===":"?n.colonOffset=l:c===","&&i(l))},onError:function(c,l,u){e.push({error:c,offset:l,length:u})}};Cp(t,s,r);var a=n.children[0];return a&&delete a.parent,a}function Hl(t,e){if(!!t){for(var r=t,n=0,i=e;n<i.length;n++){var o=i[n];if(typeof o=="string"){if(r.type!=="object"||!Array.isArray(r.children))return;for(var s=!1,a=0,c=r.children;a<c.length;a++){var l=c[a];if(Array.isArray(l.children)&&l.children[0].value===o){r=l.children[1],s=!0;break}}if(!s)return}else{var u=o;if(r.type!=="array"||u<0||!Array.isArray(r.children)||u>=r.children.length)return;r=r.children[u]}}return r}}function wp(t){switch(t.type){case"array":return t.children.map(wp);case"object":for(var e=Object.create(null),r=0,n=t.children;r<n.length;r++){var i=n[r],o=i.children[1];o&&(e[i.children[0].value]=wp(o))}return e;case"null":case"string":case"number":case"boolean":return t.value;default:return}}function Cp(t,e,r){r===void 0&&(r=Bl.DEFAULT);var n=$l(t,!1);function i(T){return T?function(){return T(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}function o(T){return T?function(A){return T(A,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}var s=i(e.onObjectBegin),a=o(e.onObjectProperty),c=i(e.onObjectEnd),l=i(e.onArrayBegin),u=i(e.onArrayEnd),d=o(e.onLiteralValue),f=o(e.onSeparator),p=i(e.onComment),h=o(e.onError),m=r&&r.disallowComments,g=r&&r.allowTrailingComma;function v(){for(;;){var T=n.scan();switch(n.getTokenError()){case 4:w(14);break;case 5:w(15);break;case 3:w(13);break;case 1:m||w(11);break;case 2:w(12);break;case 6:w(16);break}switch(T){case 12:case 13:m?w(10):p();break;case 16:w(1);break;case 15:case 14:break;default:return T}}}function w(T,A,M){if(A===void 0&&(A=[]),M===void 0&&(M=[]),h(T),A.length+M.length>0)for(var j=n.getToken();j!==17;){if(A.indexOf(j)!==-1){v();break}else if(M.indexOf(j)!==-1)break;j=v()}}function b(T){var A=n.getTokenValue();return T?d(A):a(A),v(),!0}function C(){switch(n.getToken()){case 11:var T=n.getTokenValue(),A=Number(T);isNaN(A)&&(w(2),A=0),d(A);break;case 7:d(null);break;case 8:d(!0);break;case 9:d(!1);break;default:return!1}return v(),!0}function S(){return n.getToken()!==10?(w(3,[],[2,5]),!1):(b(!1),n.getToken()===6?(f(":"),v(),k()||w(4,[],[2,5])):w(5,[],[2,5]),!0)}function P(){s(),v();for(var T=!1;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(T||w(4,[],[]),f(","),v(),n.getToken()===2&&g)break}else T&&w(6,[],[]);S()||w(4,[],[2,5]),T=!0}return c(),n.getToken()!==2?w(7,[2],[]):v(),!0}function _(){l(),v();for(var T=!1;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(T||w(4,[],[]),f(","),v(),n.getToken()===4&&g)break}else T&&w(6,[],[]);k()||w(4,[],[4,5]),T=!0}return u(),n.getToken()!==4?w(8,[4],[]):v(),!0}function k(){switch(n.getToken()){case 3:return _();case 1:return P();case 10:return b(!0);default:return C()}}return v(),n.getToken()===17?r.allowEmptyContent?!0:(w(4,[],[]),!1):k()?(n.getToken()!==17&&w(9,[],[]),!0):(w(4,[],[]),!1)}function Xk(t){switch(typeof t){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(t){if(Array.isArray(t))return"array"}else return"null";return"object"}default:return"null"}}"use strict";function Zk(t,e,r,n){for(var i,o=e.slice(),s=[],a=yp(t,s),c=void 0,l=void 0;o.length>0&&(l=o.pop(),c=Hl(a,o),c===void 0&&r!==void 0);)typeof l=="string"?r=(i={},i[l]=r,i):r=[r];if(c)if(c.type==="object"&&typeof l=="string"&&Array.isArray(c.children)){var u=Hl(c,[l]);if(u!==void 0)if(r===void 0){if(!u.parent)throw new Error("Malformed AST");var d=c.children.indexOf(u.parent),f=void 0,p=u.parent.offset+u.parent.length;if(d>0){var h=c.children[d-1];f=h.offset+h.length}else if(f=c.offset+1,c.children.length>1){var m=c.children[1];p=m.offset}return Ls(t,{offset:f,length:p-f,content:""},n)}else return Ls(t,{offset:u.offset,length:u.length,content:JSON.stringify(r)},n);else{if(r===void 0)return[];var g=JSON.stringify(l)+": "+JSON.stringify(r),v=n.getInsertionIndex?n.getInsertionIndex(c.children.map(function(T){return T.children[0].value})):c.children.length,w=void 0;if(v>0){var h=c.children[v-1];w={offset:h.offset+h.length,length:0,content:","+g}}else c.children.length===0?w={offset:c.offset+1,length:0,content:g}:w={offset:c.offset+1,length:0,content:g+","};return Ls(t,w,n)}}else if(c.type==="array"&&typeof l=="number"&&Array.isArray(c.children)){var b=l;if(b===-1){var g=""+JSON.stringify(r),w=void 0;if(c.children.length===0)w={offset:c.offset+1,length:0,content:g};else{var h=c.children[c.children.length-1];w={offset:h.offset+h.length,length:0,content:","+g}}return Ls(t,w,n)}else if(r===void 0&&c.children.length>=0){var C=l,S=c.children[C],w=void 0;if(c.children.length===1)w={offset:c.offset+1,length:c.length-2,content:""};else if(c.children.length-1===C){var h=c.children[C-1],P=h.offset+h.length,_=c.offset+c.length;w={offset:P,length:_-2-P,content:""}}else w={offset:S.offset,length:c.children[C+1].offset-S.offset,content:""};return Ls(t,w,n)}else if(r!==void 0){var w=void 0,g=""+JSON.stringify(r);if(!n.isArrayInsertion&&c.children.length>l){var k=c.children[l];w={offset:k.offset,length:k.length,content:g}}else if(c.children.length===0||l===0)w={offset:c.offset+1,length:0,content:c.children.length===0?g:g+","};else{var v=l>c.children.length?c.children.length:l,h=c.children[v-1];w={offset:h.offset+h.length,length:0,content:","+g}}return Ls(t,w,n)}else throw new Error("Can not "+(r===void 0?"remove":n.isArrayInsertion?"insert":"modify")+" Array index "+b+" as length is not sufficient")}else throw new Error("Can not add "+(typeof l!="number"?"index":"property")+" to parent of type "+c.type);else{if(r===void 0)throw new Error("Can not delete in empty document");return Ls(t,{offset:a?a.offset:0,length:a?a.length:0,content:JSON.stringify(r)},n)}}function Ls(t,e,r){if(!r.formattingOptions)return[e];var n=bp(t,e),i=e.offset,o=e.offset+e.content.length;if(e.length===0||e.content.length===0){for(;i>0&&!Ul(n,i-1);)i--;for(;o<n.length&&!Ul(n,o);)o++}for(var s=sw(n,{offset:i,length:o-i},r.formattingOptions),a=s.length-1;a>=0;a--){var c=s[a];n=bp(n,c),i=Math.min(i,c.offset),o=Math.max(o,c.offset+c.length),o+=c.content.length-c.length}var l=t.length-(n.length-o)-i;return[{offset:i,length:l,content:n.substring(i,o)}]}function bp(t,e){return t.substring(0,e.offset)+e.content+t.substring(e.offset+e.length)}"use strict";var eI=Jk,Ve=Qk,Ep=yp,wo=Hl;var _p=wp;function st(t,e,r,n){return Zk(t,e,r,n)}function St(t,e){for(var r=e.length-1;r>=0;r--)t=bp(t,e[r]);return t}var oR=K(require("crypto")),sR=K(require("util"));var eK=K(require("path")),Yw=K(require("string_decoder"));var Gt=K(require("path")),TD=K(require("fs")),oc=K(require("child_process")),zw=K(require("string_decoder"));var bD=K(require("path"));var tI;tI=(()=>{"use strict";var t={470:n=>{function i(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function o(a,c){for(var l,u="",d=0,f=-1,p=0,h=0;h<=a.length;++h){if(h<a.length)l=a.charCodeAt(h);else{if(l===47)break;l=47}if(l===47){if(!(f===h-1||p===1))if(f!==h-1&&p===2){if(u.length<2||d!==2||u.charCodeAt(u.length-1)!==46||u.charCodeAt(u.length-2)!==46){if(u.length>2){var m=u.lastIndexOf("/");if(m!==u.length-1){m===-1?(u="",d=0):d=(u=u.slice(0,m)).length-1-u.lastIndexOf("/"),f=h,p=0;continue}}else if(u.length===2||u.length===1){u="",d=0,f=h,p=0;continue}}c&&(u.length>0?u+="/..":u="..",d=2)}else u.length>0?u+="/"+a.slice(f+1,h):u=a.slice(f+1,h),d=h-f-1;f=h,p=0}else l===46&&p!==-1?++p:p=-1}return u}var s={resolve:function(){for(var a,c="",l=!1,u=arguments.length-1;u>=-1&&!l;u--){var d;u>=0?d=arguments[u]:(a===void 0&&(a=process.cwd()),d=a),i(d),d.length!==0&&(c=d+"/"+c,l=d.charCodeAt(0)===47)}return c=o(c,!l),l?c.length>0?"/"+c:"/":c.length>0?c:"."},normalize:function(a){if(i(a),a.length===0)return".";var c=a.charCodeAt(0)===47,l=a.charCodeAt(a.length-1)===47;return(a=o(a,!c)).length!==0||c||(a="."),a.length>0&&l&&(a+="/"),c?"/"+a:a},isAbsolute:function(a){return i(a),a.length>0&&a.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var a,c=0;c<arguments.length;++c){var l=arguments[c];i(l),l.length>0&&(a===void 0?a=l:a+="/"+l)}return a===void 0?".":s.normalize(a)},relative:function(a,c){if(i(a),i(c),a===c||(a=s.resolve(a))===(c=s.resolve(c)))return"";for(var l=1;l<a.length&&a.charCodeAt(l)===47;++l);for(var u=a.length,d=u-l,f=1;f<c.length&&c.charCodeAt(f)===47;++f);for(var p=c.length-f,h=d<p?d:p,m=-1,g=0;g<=h;++g){if(g===h){if(p>h){if(c.charCodeAt(f+g)===47)return c.slice(f+g+1);if(g===0)return c.slice(f+g)}else d>h&&(a.charCodeAt(l+g)===47?m=g:g===0&&(m=0));break}var v=a.charCodeAt(l+g);if(v!==c.charCodeAt(f+g))break;v===47&&(m=g)}var w="";for(g=l+m+1;g<=u;++g)g!==u&&a.charCodeAt(g)!==47||(w.length===0?w+="..":w+="/..");return w.length>0?w+c.slice(f+m):(f+=m,c.charCodeAt(f)===47&&++f,c.slice(f))},_makeLong:function(a){return a},dirname:function(a){if(i(a),a.length===0)return".";for(var c=a.charCodeAt(0),l=c===47,u=-1,d=!0,f=a.length-1;f>=1;--f)if((c=a.charCodeAt(f))===47){if(!d){u=f;break}}else d=!1;return u===-1?l?"/":".":l&&u===1?"//":a.slice(0,u)},basename:function(a,c){if(c!==void 0&&typeof c!="string")throw new TypeError('"ext" argument must be a string');i(a);var l,u=0,d=-1,f=!0;if(c!==void 0&&c.length>0&&c.length<=a.length){if(c.length===a.length&&c===a)return"";var p=c.length-1,h=-1;for(l=a.length-1;l>=0;--l){var m=a.charCodeAt(l);if(m===47){if(!f){u=l+1;break}}else h===-1&&(f=!1,h=l+1),p>=0&&(m===c.charCodeAt(p)?--p==-1&&(d=l):(p=-1,d=h))}return u===d?d=h:d===-1&&(d=a.length),a.slice(u,d)}for(l=a.length-1;l>=0;--l)if(a.charCodeAt(l)===47){if(!f){u=l+1;break}}else d===-1&&(f=!1,d=l+1);return d===-1?"":a.slice(u,d)},extname:function(a){i(a);for(var c=-1,l=0,u=-1,d=!0,f=0,p=a.length-1;p>=0;--p){var h=a.charCodeAt(p);if(h!==47)u===-1&&(d=!1,u=p+1),h===46?c===-1?c=p:f!==1&&(f=1):c!==-1&&(f=-1);else if(!d){l=p+1;break}}return c===-1||u===-1||f===0||f===1&&c===u-1&&c===l+1?"":a.slice(c,u)},format:function(a){if(a===null||typeof a!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);return function(c,l){var u=l.dir||l.root,d=l.base||(l.name||"")+(l.ext||"");return u?u===l.root?u+d:u+"/"+d:d}(0,a)},parse:function(a){i(a);var c={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return c;var l,u=a.charCodeAt(0),d=u===47;d?(c.root="/",l=1):l=0;for(var f=-1,p=0,h=-1,m=!0,g=a.length-1,v=0;g>=l;--g)if((u=a.charCodeAt(g))!==47)h===-1&&(m=!1,h=g+1),u===46?f===-1?f=g:v!==1&&(v=1):f!==-1&&(v=-1);else if(!m){p=g+1;break}return f===-1||h===-1||v===0||v===1&&f===h-1&&f===p+1?h!==-1&&(c.base=c.name=p===0&&d?a.slice(1,h):a.slice(p,h)):(p===0&&d?(c.name=a.slice(1,f),c.base=a.slice(1,h)):(c.name=a.slice(p,f),c.base=a.slice(p,h)),c.ext=a.slice(f,h)),p>0?c.dir=a.slice(0,p-1):d&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};s.posix=s,n.exports=s},447:(n,i,o)=>{var s;if(o.r(i),o.d(i,{URI:()=>w,Utils:()=>J}),typeof process=="object")s=process.platform==="win32";else if(typeof navigator=="object"){var a=navigator.userAgent;s=a.indexOf("Windows")>=0}var c,l,u=(c=function(F,L){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,W){q.__proto__=W}||function(q,W){for(var z in W)Object.prototype.hasOwnProperty.call(W,z)&&(q[z]=W[z])})(F,L)},function(F,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function q(){this.constructor=F}c(F,L),F.prototype=L===null?Object.create(L):(q.prototype=L.prototype,new q)}),d=/^\w[\w\d+.-]*$/,f=/^\//,p=/^\/\//;function h(F,L){if(!F.scheme&&L)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(F.authority,'", path: "').concat(F.path,'", query: "').concat(F.query,'", fragment: "').concat(F.fragment,'"}'));if(F.scheme&&!d.test(F.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(F.path){if(F.authority){if(!f.test(F.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(p.test(F.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}var m="",g="/",v=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,w=function(){function F(L,q,W,z,ie,te){te===void 0&&(te=!1),typeof L=="object"?(this.scheme=L.scheme||m,this.authority=L.authority||m,this.path=L.path||m,this.query=L.query||m,this.fragment=L.fragment||m):(this.scheme=function(_e,ke){return _e||ke?_e:"file"}(L,te),this.authority=q||m,this.path=function(_e,ke){switch(_e){case"https":case"http":case"file":ke?ke[0]!==g&&(ke=g+ke):ke=g}return ke}(this.scheme,W||m),this.query=z||m,this.fragment=ie||m,h(this,te))}return F.isUri=function(L){return L instanceof F||!!L&&typeof L.authority=="string"&&typeof L.fragment=="string"&&typeof L.path=="string"&&typeof L.query=="string"&&typeof L.scheme=="string"&&typeof L.fsPath=="string"&&typeof L.with=="function"&&typeof L.toString=="function"},Object.defineProperty(F.prototype,"fsPath",{get:function(){return k(this,!1)},enumerable:!1,configurable:!0}),F.prototype.with=function(L){if(!L)return this;var q=L.scheme,W=L.authority,z=L.path,ie=L.query,te=L.fragment;return q===void 0?q=this.scheme:q===null&&(q=m),W===void 0?W=this.authority:W===null&&(W=m),z===void 0?z=this.path:z===null&&(z=m),ie===void 0?ie=this.query:ie===null&&(ie=m),te===void 0?te=this.fragment:te===null&&(te=m),q===this.scheme&&W===this.authority&&z===this.path&&ie===this.query&&te===this.fragment?this:new C(q,W,z,ie,te)},F.parse=function(L,q){q===void 0&&(q=!1);var W=v.exec(L);return W?new C(W[2]||m,j(W[4]||m),j(W[5]||m),j(W[7]||m),j(W[9]||m),q):new C(m,m,m,m,m)},F.file=function(L){var q=m;if(s&&(L=L.replace(/\\/g,g)),L[0]===g&&L[1]===g){var W=L.indexOf(g,2);W===-1?(q=L.substring(2),L=g):(q=L.substring(2,W),L=L.substring(W)||g)}return new C("file",q,L,m,m)},F.from=function(L){var q=new C(L.scheme,L.authority,L.path,L.query,L.fragment);return h(q,!0),q},F.prototype.toString=function(L){return L===void 0&&(L=!1),T(this,L)},F.prototype.toJSON=function(){return this},F.revive=function(L){if(L){if(L instanceof F)return L;var q=new C(L);return q._formatted=L.external,q._fsPath=L._sep===b?L.fsPath:null,q}return L},F}(),b=s?1:void 0,C=function(F){function L(){var q=F!==null&&F.apply(this,arguments)||this;return q._formatted=null,q._fsPath=null,q}return u(L,F),Object.defineProperty(L.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=k(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),L.prototype.toString=function(q){return q===void 0&&(q=!1),q?T(this,!0):(this._formatted||(this._formatted=T(this,!1)),this._formatted)},L.prototype.toJSON=function(){var q={$mid:1};return this._fsPath&&(q.fsPath=this._fsPath,q._sep=b),this._formatted&&(q.external=this._formatted),this.path&&(q.path=this.path),this.scheme&&(q.scheme=this.scheme),this.authority&&(q.authority=this.authority),this.query&&(q.query=this.query),this.fragment&&(q.fragment=this.fragment),q},L}(w),S=((l={})[58]="%3A",l[47]="%2F",l[63]="%3F",l[35]="%23",l[91]="%5B",l[93]="%5D",l[64]="%40",l[33]="%21",l[36]="%24",l[38]="%26",l[39]="%27",l[40]="%28",l[41]="%29",l[42]="%2A",l[43]="%2B",l[44]="%2C",l[59]="%3B",l[61]="%3D",l[32]="%20",l);function P(F,L){for(var q=void 0,W=-1,z=0;z<F.length;z++){var ie=F.charCodeAt(z);if(ie>=97&&ie<=122||ie>=65&&ie<=90||ie>=48&&ie<=57||ie===45||ie===46||ie===95||ie===126||L&&ie===47)W!==-1&&(q+=encodeURIComponent(F.substring(W,z)),W=-1),q!==void 0&&(q+=F.charAt(z));else{q===void 0&&(q=F.substr(0,z));var te=S[ie];te!==void 0?(W!==-1&&(q+=encodeURIComponent(F.substring(W,z)),W=-1),q+=te):W===-1&&(W=z)}}return W!==-1&&(q+=encodeURIComponent(F.substring(W))),q!==void 0?q:F}function _(F){for(var L=void 0,q=0;q<F.length;q++){var W=F.charCodeAt(q);W===35||W===63?(L===void 0&&(L=F.substr(0,q)),L+=S[W]):L!==void 0&&(L+=F[q])}return L!==void 0?L:F}function k(F,L){var q;return q=F.authority&&F.path.length>1&&F.scheme==="file"?"//".concat(F.authority).concat(F.path):F.path.charCodeAt(0)===47&&(F.path.charCodeAt(1)>=65&&F.path.charCodeAt(1)<=90||F.path.charCodeAt(1)>=97&&F.path.charCodeAt(1)<=122)&&F.path.charCodeAt(2)===58?L?F.path.substr(1):F.path[1].toLowerCase()+F.path.substr(2):F.path,s&&(q=q.replace(/\//g,"\\")),q}function T(F,L){var q=L?_:P,W="",z=F.scheme,ie=F.authority,te=F.path,_e=F.query,ke=F.fragment;if(z&&(W+=z,W+=":"),(ie||z==="file")&&(W+=g,W+=g),ie){var Pe=ie.indexOf("@");if(Pe!==-1){var De=ie.substr(0,Pe);ie=ie.substr(Pe+1),(Pe=De.indexOf(":"))===-1?W+=q(De,!1):(W+=q(De.substr(0,Pe),!1),W+=":",W+=q(De.substr(Pe+1),!1)),W+="@"}(Pe=(ie=ie.toLowerCase()).indexOf(":"))===-1?W+=q(ie,!1):(W+=q(ie.substr(0,Pe),!1),W+=ie.substr(Pe))}if(te){if(te.length>=3&&te.charCodeAt(0)===47&&te.charCodeAt(2)===58)(pe=te.charCodeAt(1))>=65&&pe<=90&&(te="/".concat(String.fromCharCode(pe+32),":").concat(te.substr(3)));else if(te.length>=2&&te.charCodeAt(1)===58){var pe;(pe=te.charCodeAt(0))>=65&&pe<=90&&(te="".concat(String.fromCharCode(pe+32),":").concat(te.substr(2)))}W+=q(te,!0)}return _e&&(W+="?",W+=q(_e,!1)),ke&&(W+="#",W+=L?ke:P(ke,!1)),W}function A(F){try{return decodeURIComponent(F)}catch{return F.length>3?F.substr(0,3)+A(F.substr(3)):F}}var M=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function j(F){return F.match(M)?F.replace(M,function(L){return A(L)}):F}var J,Y=o(470),oe=function(F,L,q){if(q||arguments.length===2)for(var W,z=0,ie=L.length;z<ie;z++)!W&&z in L||(W||(W=Array.prototype.slice.call(L,0,z)),W[z]=L[z]);return F.concat(W||Array.prototype.slice.call(L))},re=Y.posix||Y;(function(F){F.joinPath=function(L){for(var q=[],W=1;W<arguments.length;W++)q[W-1]=arguments[W];return L.with({path:re.join.apply(re,oe([L.path],q,!1))})},F.resolvePath=function(L){for(var q=[],W=1;W<arguments.length;W++)q[W-1]=arguments[W];var z=L.path||"/";return L.with({path:re.resolve.apply(re,oe([z],q,!1))})},F.dirname=function(L){var q=re.dirname(L.path);return q.length===1&&q.charCodeAt(0)===46?L:L.with({path:q})},F.basename=function(L){return re.basename(L.path)},F.extname=function(L){return re.extname(L.path)}})(J||(J={}))}},e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}return r.d=(n,i)=>{for(var o in i)r.o(i,o)&&!r.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:i[o]})},r.o=(n,i)=>Object.prototype.hasOwnProperty.call(n,i),r.r=n=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r(447)})();var{URI:Ce,Utils:cn}=tI;var rI=K(require("path"));function Ue(t,e){if(Vl(e)){let r=t.dirname(e);return{isWorkspaceFile:!0,workspaceOrFolderPath:e,rootFolderPath:r,configFolderPath:r}}return{isWorkspaceFile:!1,workspaceOrFolderPath:e,rootFolderPath:e,configFolderPath:e}}function Vl(t){return rI.extname(t)===".code-workspace"}async function Ka(t,e){if(!!e.isWorkspaceFile)try{let r=e.rootFolderPath,n=(await t.readFile(e.workspaceOrFolderPath)).toString(),o=Ve(n).folders;if(o&&o.length>0){for(let s of o){let a=s.path,c;if(a){if(t.path.isAbsolute(a))return`Workspace contains an absolute folder path '${a}'.`;c=t.path.resolve(r,a)}else{let l=s.uri;return l?Ce.parse(l).scheme!=="file"?`Workspace contains folder '${l}' not on the local file system.`:`Workspace contains an absolute folder path '${l}'.`:"Workspace contains a folder that defines neither a path nor a URI."}if(!e6(t,c,r))return`Folder '${c}' is not a subfolder of shared root folder '${r}'.`}return}return"Workspace does not define any folders"}catch(r){return`Problems loading workspace file ${e.workspaceOrFolderPath}: ${r&&(r.message||r.toString())}`}}function e6(t,e,r){return e===r?!0:!e||!r||r.length>e.length||e.length>r.length&&e.charAt(r.length)!==t.path.sep?!1:t6(t.platform,r,e.substr(0,r.length))}function t6(t,e,r){return t==="linux"?e===r:e.toLowerCase()===r.toLowerCase()}var Wr=K(require("path")),Up=K(Ba()),mD=K(require("crypto")),Bp=K(kp()),gD=K(require("util")),vD=K(require("string_decoder"));var Wl=K(require("path"));async function pw(t,e,r){let n=await oT(t,"agent-extra-socket",r);if(!n)return;let i=await hw(e,"agent-socket");if(!i)return;let o=await hw(e,"homedir");try{let{stdout:a}=await e.exec(`ls '${o}/private-keys-v1.d' 2>/dev/null`);if(a.trim())return}catch{}let s=(async()=>{await e.exec(`mkdir -p -m 700 '${Wl.posix.dirname(i)}'`);let a=await oT(t,"homedir",r),c=await hw(e,"homedir");a&&c&&(await Qa({cliHost:t},{shellServer:e},t.path.join(a,"pubring.kbx"),Wl.posix.join(c,"pubring.kbx"),"gpg"),await Qa({cliHost:t},{shellServer:e},t.path.join(a,"pubring.gpg"),Wl.posix.join(c,"pubring.gpg"),"gpg"),await Qa({cliHost:t},{shellServer:e},t.path.join(a,"trustdb.gpg"),Wl.posix.join(c,"trustdb.gpg"),"gpg")),await P6(t,r)})();return{cliHost:t,remoteGpgSocket:i,localGpgSocket:n,ready:s}}async function oT(t,e,r){try{let{stdout:n}=await Se({exec:t.exec,cmd:"gpgconf",args:["--list-dir",e],output:r,print:!0}),i=n.toString().trim();if(i.indexOf(`
`)!==-1){let o=new RegExp(`^${e}:(.*)$`,"m").exec(i);o&&(i=o[1])}return t.platform==="win32"&&/^\/.\//.test(i)&&(i=`${i.charAt(1)}:${i.substr(2).replace(/\//g,"\\")}`),i}catch{return}}async function hw(t,e){try{let{stdout:r}=await t.exec(`gpgconf --list-dir ${e}`),n=r.trim();if(n.indexOf(`
`)!==-1){let i=new RegExp(`^${e}:(.*)$`,"m").exec(n);if(i)return i[1]}return n}catch{return}}async function P6(t,e){try{await Se({exec:t.exec,cmd:"gpg-connect-agent",args:["updatestartuptty","/bye"],output:e})}catch{}}async function mw(t,e,r){if(!("exec"in t)){for(let n=e,i="";n!==i;i=n,n=t.path.dirname(n))if(await t.isFile(t.path.join(n,".git","config")))return n;return}try{let{stdout:n}=await Se({exec:t.exec,cmd:"git",args:["rev-parse","--show-cdup"],cwd:e,output:r}),i=n.toString().trim();return t.path.resolve(e,i)}catch{return}}async function gw(t,e,r){try{return await Se({exec:t.exec,cmd:"git",args:["ls-remote",e],cwd:".",output:r}),!0}catch{return!1}}async function vw({exec:t},e,r){try{let{stdout:n,stderr:i}=await Se({exec:t,cmd:"git",args:["credential",e],env:{GIT_TERMINAL_PROMPT:"0"},stdin:Buffer.from(r),output:it});return{stdout:n.toString(),stderr:i.toString(),code:0}}catch(n){if(!(n&&n.stdout&&n.stderr))throw n;let{stdout:i,stderr:o,code:s}=n;return{stdout:i.toString(),stderr:o.toString(),code:s||0}}}async function sT(t,e,r){if(!("exec"in t)){let i=await mw(t,e.rootFolderPath,r);if(!i)return;try{return(await t.readFile(t.path.join(i,".git","config"))).toString().split(/^\[/m).filter(a=>a.startsWith("remote")).map(a=>(/^\s*url\s*=\s*(\S+)/m.exec(a)||[])[1]).filter(Boolean)}catch(o){if((o==null?void 0:o.code)!=="ENOENT")throw o;return[]}}let n;try{let{stdout:i}=await Se({exec:t.exec,cmd:"git",args:["remote","-v"],cwd:e.rootFolderPath,output:r});n=i.toString()}catch{return}return Array.from(new Set(k6(/^[^\s]+\s+([^\s]+)/gm,n,1)))}function k6(t,e,r){return{[Symbol.iterator]:function*(){let n;for(;n=t.exec(e);)yield n[r],t.lastIndex===n.index&&t.lastIndex++}}}async function aT(t,e,r){return await I6(t,e,r)||T6(t,e,r)}async function I6(t,e,r){try{let{stdout:n}=await Se({exec:t.exec,cmd:"git",args:["status","--porcelain"],cwd:e.rootFolderPath,output:r});return!!n.toString().trim()}catch{return}}async function T6(t,e,r){let n=await A6(t,e,r);if(!!n)try{let{stdout:i}=await Se({exec:t.exec,cmd:"git",args:["log",`${n}..HEAD`],cwd:e.rootFolderPath,output:r});return!!i.toString().trim()}catch{return}}async function A6(t,e,r){try{let{stdout:n}=await Se({exec:t.exec,cmd:"git",args:["rev-parse","--abbrev-ref","--symbolic-full-name","@{u}"],cwd:e.rootFolderPath,output:r});return n.toString().trim()}catch{return}}async function Ip(t,e,r,n,i,o){let{extensionPath:s}=t;if(await e.isFolder(e.path.join(r,".git")))return{gitClone:void 0,gitUnshallow:void 0};await e.mkdirp(r);let a=n.tokenEnvVar?ae(V({},n.env),{GIT_ASKPASS:e.path.join(s,"scripts","gitAskPass.sh"),GIT_TOKEN:e.env[n.tokenEnvVar]}):n.env,c=[];n.fullClone||c.push("--depth","1"),n.branch&&c.push("--branch",n.branch),n.recurseSubmodules&&c.push("--recurse-submodules");let l=Co({ptyExec:e.ptyExec,cmd:"git",args:["clone",...c,n.url,"."],cwd:r,env:a,output:ir(i,se.Info)}),u=n.fullClone?l:(async()=>(await l,await Co({ptyExec:e.ptyExec,cmd:"git",args:["config","remote.origin.fetch","+refs/heads/*:refs/remotes/origin/*"],cwd:r,env:a,output:o}),Co({ptyExec:e.ptyExec,cmd:"git",args:["fetch","--unshallow","--tags"],cwd:r,env:a,output:o})))();return{gitClone:l,gitUnshallow:u}}var bo=K(require("stream"));async function cT(t,e){let{stdout:r}=await t.exec(`cat /proc/${e}/environ`,{logOutput:!1});return r.split("\0").map(n=>{let i=n.indexOf("=");return i!==-1?[n.slice(0,i),n.slice(i+1)]:[]}).reduce((n,[i,o])=>(i&&(n[i]=o),n),{})}async function yw(t){let e='for pid in `cd /proc && ls -d [0-9]*`; do { echo $pid ; readlink /proc/$pid/cwd ; readlink /proc/$pid/ns/mnt ; cat /proc/$pid/stat | tr "\n" " " ; echo ; xargs -0 < /proc/$pid/environ ; xargs -0 < /proc/$pid/cmdline ; } ; echo --- ; done ; readlink /proc/self/ns/mnt 2>/dev/null',{stdout:r}=await t.exec(e,{logOutput:!1}),n=6,i=r.split(`
---
`),o=i.pop().trim();return{processes:i.map(a=>a.split(`
`)).filter(a=>a.length>=n).map(([a,c,l,u,d,f])=>{let p=/.*\) [^ ]* ([^ ]*) ([^ ]*)/.exec(u)||[];return{pid:a,ppid:p[1],pgrp:p[2],cwd:c,mntNS:l,cmd:f,env:d.split(" ").reduce((h,m)=>{let g=m.indexOf("=");return g!==-1&&(h[m.substr(0,g)]=m.substr(g+1)),h},{})}}),mntNS:o}}function lT(t){let e={};return t.forEach(r=>e[r.pid]={process:r,childProcesses:[]}),t.filter(r=>r.ppid).forEach(r=>{var n;return(n=e[r.ppid])==null?void 0:n.childProcesses.push(e[r.pid])}),e}function ww(t,e="  ",r="  "){return`${r}${t.process.pid}: ${t.process.cmd}
${t.childProcesses.map(n=>ww(n,e,r+e))}`}var Cw=K(require("events")),Tp=class{constructor(){this.nodeEmitter=new Cw.EventEmitter;this.event=e=>(this.nodeEmitter.on("event",e),{dispose:()=>{this.nodeEmitter.off("event",e)}})}fire(e){this.nodeEmitter.emit("event",e)}dispose(){this.nodeEmitter.removeAllListeners()}},bw=class{constructor(){this.nodeEmitter=new Cw.EventEmitter;this.event=e=>{let r=n=>n.results.push(e(n.data));return this.nodeEmitter.on("event",r),{dispose:()=>{this.nodeEmitter.off("event",r)}}}}fire(e){let r=[];return this.nodeEmitter.emit("event",{data:e,results:r}),r}dispose(){this.nodeEmitter.removeAllListeners()}};var q9=aD(),yD=Nw(),Fw=fD(),$9=hD();async function Ql(t,e){var S,P,_,k;let{cliHost:r,output:n}=t,i="Launching Remote-Containers helper.",o=n.start(i);if(ii)return n.stop(i,o),{remoteEnv:{},ready:Promise.resolve(),reconnect:()=>Promise.resolve()};let s=r.type==="local",a=s?r:await Vp(process.cwd(),t.loadNativeModule,n),l=(await(0,gD.promisify)(mD.randomBytes)(20)).toString("hex"),u={},d=CD(t.cliHost)||CD(a),f=d?Wr.posix.join(((S=e.env)==null?void 0:S.TMPDIR)||"/tmp",`vscode-ssh-auth-${l}.sock`):void 0;d?(u[f]=d,n.write(`ssh-agent: SSH_AUTH_SOCK in container (${f}) forwarded to ${d.cliHost!==a?"remote":"local"} host (${d.socketPath}).`)):n.write("ssh-agent: SSH_AUTH_SOCK not set on host.");let p=await pw(r,e.shellServer,n)||(s?void 0:await pw(a,e.shellServer,n));p&&(u[p.remoteGpgSocket]={cliHost:p.cliHost,socketPath:p.localGpgSocket});let h=Wr.posix.join(((P=e.env)==null?void 0:P.TMPDIR)||"/tmp",`vscode-remote-containers-ipc-${l}.sock`),m=Wr.posix.join(((_=e.env)==null?void 0:_.TMPDIR)||"/tmp",`vscode-remote-containers-server-${l}.js`),g=Wr.posix.join(((k=e.env)==null?void 0:k.TMPDIR)||"/tmp",`vscode-remote-containers-${l}.js`),v=wD(t,e,"Container",void 0,!1,!1,m,g,u,h,a),w=v.then(T=>T.ready),b=v.then(T=>T.mrpcExec),C=v.then(T=>T.mrpcPtyExec);return w.catch(console.error),t.onAdoptProcess(T=>V9(e.shellServer,h,f,T).catch(console.error)),n.stop(i,o),{remoteContainersCLI:g,remoteEnv:f?{SSH_AUTH_SOCK:f,REMOTE_CONTAINERS_IPC:h}:{REMOTE_CONTAINERS_IPC:h},mrpcExec:b,mrpcPtyExec:C,ready:w,reconnect:()=>v.then(T=>T.reconnect())}}async function Xl(t,e,r,n,i){let{passwdUser:o,homeFolder:s,nodeExecutable:a,mrpcExec:c,mrpcPtyExec:l,setBaseEnv:u,connect:d,reconnect:f,terminate:p}=await wD(t,{remoteExec:e,platform:i},"Host",r,!0,n,void 0);return{passwdUser:o,homeFolder:s,nodeExecutable:a,exec:c,ptyExec:l,setBaseEnv:u,connect:d,reconnect:f,terminate:p}}async function wD(t,{remoteExec:e,platform:r,nodeExecutable:n},i,o,s,a,c,l,u,d,f){let{product:p,output:h}=t,m=l&&Oe(Wr.join(t.extensionPath,"dist","common","remoteContainersCLI.js"),{encoding:"utf8"}),g=Oe(Wr.join(t.extensionPath,"dist","common","remoteContainersServer.js"),{encoding:"utf8"}),v=await Ni(e,h,void 0,r,i),w=s?await $w(v,await qw(v)):void 0,b=(await v.exec({posix:"echo ~",win32:"echo $env:userprofile"})).stdout.trim().split(`
`)[0],C=!0;if(!n||!c){let k=v.path.join(b,".vscode-remote-containers");n||(n=await W9(t,v,k,b,p,a)),c||(c=v.path.join(k,"dist",`vscode-remote-containers-server-${t.package.version}.js`),await Zl(v,c)?C=!1:await v.exec(`mkdir -p '${v.path.dirname(c)}'`))}if(l){let k=`EOF-${l}`;await v.exec(`cat <<'${k}' >${l}
${await m}
${k}
`)}if(C){let k=`EOF-${c}`,T=`${c}_${Date.now()}`;await v.exec(`cat <<'${k}' >${T}
${await g}
${k}
mv ${T} ${c}`)}let S=()=>j9(t,i,v,n,c,u,d,f),P=await S(),_;return{ready:P.ready,passwdUser:w,nodeExecutable:n,homeFolder:b,mrpcExec:U9(()=>P.mrpc,i,o||b),mrpcPtyExec:B9(()=>P.mrpc,i,o||b),mrpcExecToEnd:H9(()=>P.mrpc,i,o||b),setBaseEnv:k=>new Promise((T,A)=>{_=k,P.mrpc.setBaseEnv(k,M=>M?A(M):T())}),connect:P.mrpc.connect,reconnect:async()=>{let k=`${i}: Reconnecting exec server`,T=h.start(k);await P.process.terminate().catch(()=>{}),v=await Ni(e,h,void 0,void 0,i),P=await S(),_&&await new Promise((A,M)=>{P.mrpc.setBaseEnv(_,j=>j?M(j):A())}),h.stop(k,T)},terminate:()=>P.process.terminate()}}async function j9(t,e,r,n,i,o,s,a){let{cliHost:c,output:l}=t,u=Object.keys(o||{}),d=ae(V({},u.reduce((_,k)=>(_[k]="duplex",_),{})),{rpc:"async",connected:"async",ready:"async"}),f={exec:"async",stdin:"sink",stdout:"source",stderr:"source",exit:"async",terminate:"async",dispose:"async",ptyExec:"async",ptyIn:"sink",ptyOut:"source",ptyResize:"async",ptyExit:"async",ptyTerminate:"async",ptyDispose:"async",execToEnd:"async",setBaseEnv:"async",connect:"duplex"},p=r.process,h=`echo -n ${Gr} >&2 ; ${s?`rm -f '${s}' ; `:""}REMOTE_CONTAINERS_SOCKETS='${JSON.stringify(u)}' REMOTE_CONTAINERS_IPC='${s||""}' '${n}' '${i}'
`;p.stdin.write(h);let m,g=new Promise(_=>m=_),v=new vD.StringDecoder;p.stderr.on("data",_=>{let k=v.write(_).replace(/^.*DeprecationWarning: Buffer\(\) is deprecated.*$\r?\n?/mg,"").trim();if(m){let T=k.indexOf(Gr);T!==-1&&(m(),m=void 0,k=k.substr(0,T)+k.substr(T+1))}k&&l.write(Ne(`${e} server: ${k}`))}),p.exit.then(({code:_,signal:k})=>{l.write(`${e} server terminated (code: ${_}, signal: ${k}).`)},_=>{l.write(`${e} server did not launch or terminated: ${_&&_.message||String(_)}`)});let b=(c==null?void 0:c.type)==="local",C,S=new Promise(_=>C=_),P=q9(f,d)(ae(V({},u.reduce((_,k)=>{let T=o[k];return _[k]=()=>T.cliHost.connect(T.socketPath),_},{})),{rpc:async(_,k)=>{try{let T=JSON.parse(_),A=await vw(b?a:c,T.command,T.stdin).catch(M=>{if(b)throw M});!b&&(A==null?void 0:A.code)!==0&&(A=await vw(a,T.command,T.stdin),A.code===0&&(b=!0)),k(void 0,JSON.stringify(A))}catch(T){console.error(T),k(T)}},connected:_=>{_()},ready:_=>{C(),_()}}));return(0,Bp.default)(yD.source(p.stdout),P.createStream(),yD.sink(p.stdin)),await Promise.race([g,p.exit.then(({code:_,signal:k})=>{throw new Error(`${e} server terminated (code: ${_}, signal: ${k}).`)})]),{ready:S,mrpc:P,process:p}}function U9(t,e,r){return async n=>{let{cmd:i,args:o,cwd:s,env:a,output:c}=n,l=`Run in ${e}: ${i} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),d=t(),f=await new Promise((p,h)=>{d.exec({cmd:i,args:o,cwd:s||r,env:a},(m,g)=>{m?h(m):p(g)})});return{stdin:Fw.sink(d.stdin(f,p=>{p&&p.message!=="unexpected end of parent stream"&&console.error(p)})),stdout:Fw.source(d.stdout(f)),stderr:Fw.source(d.stderr(f)),exit:new Promise((p,h)=>{d.exit(f,(m,g)=>{var v;c.stop(l,u),m?(((v=m.message)==null?void 0:v.endsWith("ENOENT"))&&!m.code&&(m.code="ENOENT"),h(m)):p(g)})}),terminate:async()=>new Promise((p,h)=>{d.terminate(f,m=>{m?h(m):p()})})}}}function B9(t,e,r){return async n=>{let{cmd:i,args:o,cwd:s,env:a,output:c}=n,l=`Run in ${e}: ${i} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),d=t(),f=await new Promise((g,v)=>{var w,b;d.ptyExec({cmd:i,args:o,cwd:s||r,env:a,rows:(w=c.dimensions)==null?void 0:w.rows,cols:(b=c.dimensions)==null?void 0:b.columns},(C,S)=>{C?v(C):g(S)})}),p=[c.onDidChangeDimensions&&c.onDidChangeDimensions(g=>d.ptyResize(f,g.columns,g.rows))],h=$9();(0,Bp.default)(h,d.ptyIn(f,g=>{g&&g.message!=="unexpected end of parent stream"&&console.error(g)}));let m=new Tp;return(0,Bp.default)(d.ptyOut(f),g=>{g(null,function v(w,b){if(w!==!0){if(w)throw w;m.fire(b),g(null,v)}})}),{write:g=>h.push(g),onData:m.event,resize:(g,v)=>d.ptyResize(f,g,v),exit:new Promise((g,v)=>{d.ptyExit(f,(w,b)=>{p.forEach(C=>C==null?void 0:C.dispose()),c.stop(l,u),w?v(w):g(b)})}),terminate:async()=>new Promise((g,v)=>{d.ptyTerminate(f,w=>{w?v(w):g()})})}}}function H9(t,e,r){return async n=>{let{cmd:i,args:o,cwd:s,env:a,output:c}=n,l=`Run in ${e}: ${i} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),d=t();return new Promise((f,p)=>{d.execToEnd({cmd:i,args:o,cwd:s||r,env:a},(h,m)=>{if(c.stop(l,u),h||!m)p({stdin:new bo.Writable,stdout:bo.Readable.from([]),stderr:bo.Readable.from([]),exit:Promise.reject(h),terminate:async()=>{}});else{let g=bo.Readable.from([Buffer.from(m.stdout.data)]),v=new Promise(C=>g.on("end",C)),w=bo.Readable.from([Buffer.from(m.stderr.data)]),b=new Promise(C=>w.on("end",C));f({stdin:new bo.Writable,stdout:g,stderr:w,exit:Promise.all([v,b]).then(()=>({code:m.code,signal:m.signal})),terminate:async()=>{}})}})})}}var Mw="\\\\.\\pipe\\openssh-ssh-agent";function CD(t){if(t.env.SSH_AUTH_SOCK)return{cliHost:t,socketPath:t.env.SSH_AUTH_SOCK};if(t.platform==="win32")return{cliHost:t,socketPath:Mw}}var Hp=new Set;async function V9(t,e,r,n){let i=await n.processId;if(i&&i>0){let o=await cT(t,i),s=o.REMOTE_CONTAINERS_IPC;s&&s!==e&&!Hp.has(s)&&s.indexOf("vscode-remote-containers-ipc")!==-1&&(Hp.add(s),await t.exec(`rm '${s}' && ln -s '${e}' '${s}'`));let a=o.SSH_AUTH_SOCK;a&&r&&a!==r&&!Hp.has(a)&&a.indexOf("vscode-ssh-auth")!==-1&&(Hp.add(a),await t.exec(`rm '${a}' && ln -s '${r}' '${a}'`))}}async function W9(t,e,r,n,i,o){let s=(i==null?void 0:i.commit)||"b3318bc0524af3d74034b8bb8a64df0ccf35549a",a=(i==null?void 0:i.commit)?i.quality||"insider":"stable",{localCacheFolder:c,output:l,alternateDownload:u}=t,d=Wr.posix.join(r,"bin",s),f=Wr.posix.join(d,"node");try{await e.exec(`test -x '${f}'`)}catch{if(i)try{let v=Wr.posix.join(jw(n,i),"bin",s),w=Wr.posix.join(v,"node");await e.exec(`test -x '${w}'`);let b=Wr.posix.join(v,"node_modules","node-pty","package.json");return await e.exec(`test -f '${b}'`),w}catch{}let p;if((await e.exec("uname -s")).stdout.trim().split(`
`)[0]==="Darwin")p=Uw;else{let v=await Hw(e);p=Bw(v,!1)}let m={localCacheFolder:c,build:p,commit:s,quality:a,web:!1,output:l,alternateDownload:u},g=tu(m);if(await ht(g)||await Wp(m),p===Uw)await eu({output:l},e,g,d,o);else{let v=[];await Up.t({file:g,filter:b=>/^[^/]*\/(LICENSE$|node$|node_modules\/node-pty\/)/.test(b),onentry:b=>{new Up.WriteEntry.Tar(b).on("data",S=>v.push(S))}});let w=Buffer.concat(v);await eu({output:l},e,w,d,o,!1)}}return f}var Ww=K(require("path"));var G9=K(require("http")),z9=K(require("https"));function Vw(t,e={}){return new Promise((r,n)=>{let i=t.startsWith("https:")?z9:G9,o;if(Object.keys(e).length>0){let a=new URL(t);o={headers:e,host:a.host,path:a.pathname}}i.get(o!=null?o:t,a=>{var c;if(a.statusCode<200||a.statusCode>299){if(a.statusCode===302){let l=(c=a.headers)==null?void 0:c.location;l&&r(Vw(l,e))}n(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`))}else{a.on("error",n);let l=[];a.on("data",u=>l.push(u)),a.on("end",()=>r(Buffer.concat(l)))}}).on("error",n)})}async function un(t){let e=await Oe(Ww.join(t,"package.json"),"utf8");return JSON.parse(e)}async function ru(t){let e=await Oe(Ww.join(t,"product.json"),"utf8"),r=JSON.parse(e);return r.commit||(r.commit=await K9(r.quality)),r.serverDataFolderName||(r.serverDataFolderName=".vscode-server-oss"),r}async function K9(t="insider"){let e=`https://update.code.visualstudio.com/api/update/server-linux-x64/${t}/latest`,r=await Vw(e);return JSON.parse(r.toString()).version}var nu=!0;function iu(t,e=!1){let{serverApplicationName:r}=t;return!e&&r?["bin",r]:["server.sh"]}var ED=/^\\\\wsl(\.localhost|\$)?\\/;function Wt(t){return ED.test(t.toLowerCase())}function Eo(t){let e=t.toLowerCase(),r=ED.exec(e);if(!r)return"";let n=e.indexOf("\\",r[0].length);return t.substring(r[0].length,n)}async function Gp(t){let{stdout:e}=await Se({exec:So(void 0),cmd:"wsl",args:["-l","-v"],output:t}),r=e.toString(e[1]===0?"utf16le":"utf8").trim();return(/^\*\s*(\S+)/m.exec(r)||[])[1]}async function Li(t,e,r){let{stdout:n}=await Se({exec:So(void 0),cmd:"wsl",args:["-d",t,"-e","wslpath","-u",e],output:r});return n.toString().trim()}async function Y9(t,e){let{stdout:r}=await Se({exec:So(void 0),cmd:"wsl",args:["-d",t,"-e","/bin/sh","-c","echo ~"],output:e});return r.toString().trim()}async function tc(t,e){let r=Eo(t),n=await Li(r,t,e);return Ce.parse(`vscode-remote://wsl+${r}${n}`)}function rc(t){if(t.scheme==="vscode-remote"){let e=zp(t.authority);if(e){let r=t.path;return Vl(r)&&(r=bD.posix.dirname(r)),{wslDistro:e,wslPath:r}}}}function zp(t){return(/wsl\+(.*)/.exec(t)||[])[1]}async function _D(t,e,r,n,i,o,s,a){var h;let{distro:c,cwd:l}=await Gw(t,e,s),u=nc("wsl",["-d",c,"-e"],l),d=await Xl({extensionPath:r,localCacheFolder:n,package:await un(r),product:i,loadNativeModule:o,output:s,alternateDownload:a},u,l,!1),f=await ic({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:s},{shell:((h=d.passwdUser)==null?void 0:h.shell)||"/bin/sh",remoteExec:d.exec});delete f.WSL_INTEROP,await d.setBaseEnv(f);let p=_o("wsl",l,f,d.exec,d.ptyExec,d.connect,d.nodeExecutable,s);return p.toCommonURI=async m=>{try{return Ce.file((await Se({exec:d.exec,cmd:"wslpath",args:["-w",m],output:s})).stdout.toString().trim())}catch{return}},p}async function Gw(t,{defaultDistro:e},r){let n,i;return typeof t=="object"?(n=t.wslDistro,i=t.wslPath):t&&Wt(t)?(n=Eo(t),i=await Li(n,t,r)):(n=e||await Gp(r)||(()=>{throw new Error("No default WSL distro found.")})(),i=t?await Li(n,t,r):await Y9(n,r)),{distro:n,cwd:i}}var PD=K(require("path")),Kp=K(require("net")),Yp=K(require("os"));var SD=K(require("os"));async function xD(t,e,r,n,i,o,s,a,c,l){var v;let u=t.substr(6),d=u.indexOf(":"),f=[(l==null?void 0:l.settings.executablePath)||"ssh"];(l==null?void 0:l.settings.configFilePath)&&f.push("-F",J9(l==null?void 0:l.settings.configFilePath)),d!==-1?f.push("-p",u.substr(d+1),u.substr(0,d)):f.push(u);let p=nc(f[0],f.slice(1),void 0,await(l==null?void 0:l.sshAskpassEnv)||{}),h=await Xl({extensionPath:n,localCacheFolder:i,package:await un(n),product:o,loadNativeModule:s,output:a,alternateDownload:c},p,e,!1),m=await ic({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:a},{shell:((v=h.passwdUser)==null?void 0:v.shell)||"/bin/sh",remoteExec:h.exec});await h.setBaseEnv(m);let g=_o("ssh",e||h.homeFolder,m,h.exec,h.ptyExec,h.connect,h.nodeExecutable,a);return g.toCommonURI=()=>Promise.resolve(void 0),g.reconnect=()=>h.reconnect(),g.terminate=()=>h.terminate(),g}function J9(t){return t.replace(/^~($|\/|\\)/,`${SD.homedir()}$1`)}function ou(t,e){let r=Q9(t);if(!r)return;let n=r.hostName;if(r.user||r.hostName.toLowerCase()!==r.hostName||r.port||r.hostName.match(/[\/\\\+]/)){let i=JSON.stringify(r);n=Buffer.from(i,"utf8").toString("hex")}return Ce.parse(`vscode-remote://ssh-remote+${n}${e}`)}function Q9(t){if(!t.startsWith("ssh://"))return;let e=t.substr(6),r=e.match(/^(?:(.*)@)?(.+?)(?::(\d+))?$/);if(r){let[,n,i,o]=r;return{hostName:i,user:n,port:o?parseInt(o,10):void 0}}return{hostName:e}}var kD=Nw(),qs;(function(i){i[i.Unknown=0]="Unknown",i[i.File=1]="File",i[i.Directory=2]="Directory",i[i.SymbolicLink=64]="SymbolicLink"})(qs||(qs={}));async function Ln(t,e,r,n,i,o,s,a,c,l){return(t==null?void 0:t.startsWith("ssh://"))&&!(l==null?void 0:l.localDocker)?xD(t,e,n,i,o,s,r,a,c,l):typeof e=="object"||n.executeInWSL==="forWSLPath"&&e&&Wt(e)||n.executeInWSL==="always"?_D(e,n,i,o,s,r,a,c):Vp(e||process.cwd(),r,a)}async function Vp(t,e,r){let n=So(t),i=await ID(t,e);return X9(t,n,i,Z9)}function _o(t,e,r,n,i,o,s,a){let c;return{type:t,platform:"linux",exec:n,ptyExec:i,cwd:e,env:r,path:PD.posix,async homedir(){var l;return typeof c=="undefined"&&(c=this.env.HOME||((l=Jp((await this.readFile("/etc/passwd")).toString(),(await this.getuid()).toString()))==null?void 0:l.home)||"/"),c},async tmpdir(){return this.env.TMPDIR||"/tmp"},isFile:async l=>{try{return await Se({exec:n,cmd:"test",args:["-f",l],output:it}),!0}catch(u){if((u==null?void 0:u.code)!==1)throw u;return!1}},isFolder:async l=>{try{return await Se({exec:n,cmd:"test",args:["-d",l],output:it}),!0}catch(u){if((u==null?void 0:u.code)!==1)throw u;return!1}},readFile:async l=>{try{return(await Se({exec:n,cmd:"cat",args:[l],output:it})).stdout}catch(u){let d=new Error(`Could not read file: ${l}`);throw d.originalError=u,d.code="ENOENT",d}},writeFile:async(l,u)=>{await Se({exec:n,cmd:"/bin/sh",args:["-c",`cat >'${l}'`],stdin:u,output:it})},rename:async(l,u)=>{await Se({exec:n,cmd:"mv",args:[l,u],output:it})},rm:async(l,{recursive:u,force:d})=>{await Se({exec:n,cmd:"rm",args:[...u?["-r"]:[],...d?["-f"]:[],l],output:it})},mkdirp:async l=>{await Se({exec:n,cmd:"mkdir",args:["-p",l],output:it})},readDir:async l=>(await Se({exec:n,cmd:"ls",args:["-a",l],output:it})).stdout.toString().trim().split(`
`).filter(u=>u!=="."&&u!==".."),readDirWithTypes:async l=>{let u={f:1,"*":1,"/":2,"@":64};return(await Se({exec:n,cmd:"ls",args:["-aF",l],output:it})).stdout.toString().trim().split(`
`).map(d=>"/*@=%|>".indexOf(d[d.length-1])!==-1?[d.substr(0,d.length-1),d[d.length-1]]:[d,"f"]).filter(([d])=>d!=="."&&d!=="..").map(([d,f])=>[d,u[f]||0])},getuid:async()=>{let l=await Se({exec:n,cmd:"id",args:["-u"],output:it});return parseInt(l.stdout.toString().trim(),10)},getgid:async()=>{let l=await Se({exec:n,cmd:"id",args:["-g"],output:it});return parseInt(l.stdout.toString().trim(),10)},toCommonURI:()=>Promise.resolve(void 0),connect:o,nodeExecutable:s}}function X9(t,e,r,n){return{type:"local",platform:process.platform,exec:e,ptyExec:r,cwd:t,env:process.env,path:PD,homedir:async()=>Yp.homedir(),tmpdir:async()=>Yp.tmpdir(),isFile:ht,isFolder:pl,readFile:Oe,writeFile:hl,rename:In,rm:ro,mkdirp:async i=>{await Mr(i)},readDir:en,getuid:async()=>process.getuid(),getgid:async()=>process.getgid(),toCommonURI:async i=>Ce.file(i),connect:n}}function Z9(t){if(process.platform!=="win32"||t.startsWith("\\\\.\\pipe\\"))return kD.duplex(Kp.connect(t));let e=new Kp.Socket;return(async()=>{let r=await Oe(t),n=r.indexOf(10),i=parseInt(r.slice(0,n).toString(),10),o=r.slice(n+1);e.connect(i,"127.0.0.1",()=>{e.write(o,s=>{s&&(console.error(s),e.destroy())})})})().catch(r=>{console.error(r),e.destroy()}),kD.duplex(e)}function AD(t,e,r){return t==="linux"?e===r:e.toLowerCase()===r.toLowerCase()}var Kw=Gt.join(__dirname,"..","..","node_modules",".bin","ts-node"),ii=Gt.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;async function Se(t){let{exec:e,cmd:r,args:n,cwd:i,env:o,stdin:s,output:a,print:c}=t,l=await e({cmd:r,args:n,cwd:i,env:o,output:a});return new Promise((u,d)=>{let f=[],p=[],h=c==="continuous"?new zw.StringDecoder:void 0;l.stdout.on("data",v=>{f.push(v),c==="continuous"&&a.write(h.write(v))}),l.stdout.on("error",v=>{if((v==null?void 0:v.code)!=="ENOTCONN")throw v});let m=c==="continuous"?new zw.StringDecoder:void 0;l.stderr.on("data",v=>{p.push(v),c==="continuous"&&a.write(Ne(m.write(v)))}),l.stderr.on("error",v=>{if((v==null?void 0:v.code)!=="ENOTCONN")throw v});let g=[];l.exit.then(({code:v})=>{try{g.forEach(C=>C.dispose());let w=Buffer.concat(f),b=Buffer.concat(p);(c===!0||v&&c==="onerror")&&(a.write(w.toString().replace(/\r?\n/g,`\r
`)),a.write(Ne(b.toString()))),c&&v&&a.write(`Exit code ${v}`),v?d({message:`Command failed: ${r} ${(n||[]).join(" ")}`,stdout:w,stderr:b,code:v}):u({stdout:w,stderr:b})}catch(w){d(w)}},d),s instanceof Buffer?(l.stdin.write(s,v=>{v&&d(v)}),l.stdin.end()):s instanceof TD.ReadStream?s.pipe(l.stdin):typeof s=="function"&&g.push(s(v=>l.stdin.write(v)))})}async function Co(t){let{ptyExec:e,cmd:r,args:n,cwd:i,env:o,output:s,resolveOn:a,onDidInput:c}=t,l=await e({cmd:r,args:n,cwd:i,env:o,output:s});return new Promise((u,d)=>{let f="",p=[c&&c(h=>l.write(h))];l.onData(h=>{f+=h,s.raw(h),a&&a.exec(f)&&u({cmdOutput:f})}),l.exit.then(({code:h,signal:m})=>{try{p.forEach(g=>g==null?void 0:g.dispose()),h||m?d({message:`Command failed: ${r} ${(n||[]).join(" ")}`,cmdOutput:f,code:h,signal:m}):u({cmdOutput:f})}catch(g){d(g)}},h=>{p.forEach(m=>m==null?void 0:m.dispose()),d(h)})})}function So(t){return async function(e){let{cmd:r,args:n,output:i}=e,o=`Run: ${r} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,s=i.start(o),a=e.cwd||t,c=e.env?V(V({},process.env),e.env):process.env,l=await Qp(r,a,c,i),u=oc.spawn(l,n,{cwd:a,env:c,windowsHide:!0});return{stdin:u.stdin,stdout:u.stdout,stderr:u.stderr,exit:new Promise((d,f)=>{u.once("error",p=>{i.stop(o,s),f(p)}),u.once("close",(p,h)=>{i.stop(o,s),d({code:p,signal:h})})}),async terminate(){u.kill("SIGKILL")}}}}async function ID(t,e){let r=await e("node-pty");if(!r)throw new Error("Missing node-pty");return async function(n){var m,g;let{cmd:i,args:o,output:s}=n,a=`Run: ${i} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,c=s.start(a),l=!1,u=n.cwd||t,d=n.env?V(V({},process.env),n.env):process.env,f=await Qp(i,u,d,s),p=r.spawn(f,o||[],{cwd:u,env:d,cols:(m=s.dimensions)==null?void 0:m.columns,rows:(g=s.dimensions)==null?void 0:g.rows,useConpty:l}),h=[s.onDidChangeDimensions&&s.onDidChangeDimensions(v=>p.resize(v.columns,v.rows))];return{onData:p.onData.bind(p),write:p.write.bind(p),resize:p.resize.bind(p),exit:new Promise(v=>{p.onExit(({exitCode:w,signal:b})=>{if(h.forEach(C=>C==null?void 0:C.dispose()),s.stop(a,c),v({code:w,signal:b}),process.platform==="win32")try{p.kill()}catch{}})}),async terminate(){p.kill("SIGKILL")}}}}function nc(t,e,r,n){return async function(i){let{env:o,cmd:s,args:a,output:c}=i,l=i.cwd||r,u=l?`cd '${l}' && `:"",d=Object.keys(o||{}).map(C=>`${C}='${o[C]}' `).join(""),f=(a||[]).map(C=>` '${C.replace(/'/g,`'"'"'`)}'`).join(""),p=`${u}${d}${s}${f}`,h=p!==s?["/bin/sh","-c",p]:[p],m=[...e,...h],g=`Run: ${t} ${m.join(" ").replace(/\n.*/g,"")}`,v=c.start(g),w=await Qp(t,process.cwd(),process.env,c),b=oc.spawn(w,m,{windowsHide:!0,env:n?V(V({},process.env),n):void 0});return{stdin:b.stdin,stdout:b.stdout,stderr:b.stderr,exit:new Promise((C,S)=>{b.once("error",P=>{c.stop(g,v),S(P)}),b.once("close",(P,_)=>{c.stop(g,v),C({code:P,signal:_})})}),async terminate(){b.kill("SIGKILL")}}}}async function DD(t,e,r,n){let i=await n("node-pty");if(!i)throw new Error("Missing node-pty");return async function(o){var P,_;let{env:s,cmd:a,args:c,output:l}=o,u=o.cwd||r,d=u?`cd '${u}' && `:"",f=Object.keys(s||{}).map(k=>`${k}='${s[k]}' `).join(""),p=(c||[]).map(k=>` '${k.replace(/'/g,`'"'"'`)}'`).join(""),h=`${d}${f}${a}${p}`,m=[...e,"/bin/sh","-c",h],g=`Run: ${t} ${m.join(" ").replace(/\n.*/g,"")}`,v=l.start(g),w=!1,b=await Qp(t,process.cwd(),process.env,l),C=i.spawn(b,m,{cols:(P=l.dimensions)==null?void 0:P.columns,rows:(_=l.dimensions)==null?void 0:_.rows,useConpty:w}),S=[l.onDidChangeDimensions&&l.onDidChangeDimensions(k=>C.resize(k.columns,k.rows))];return{onData:C.onData.bind(C),write:C.write.bind(C),resize:C.resize.bind(C),exit:new Promise(k=>{C.onExit(({exitCode:T,signal:A})=>{if(S.forEach(M=>M==null?void 0:M.dispose()),l.stop(g,v),k({code:T,signal:A}),process.platform==="win32")try{C.kill()}catch{}})}),async terminate(){C.kill("SIGKILL")}}}}async function Qp(t,e=process.cwd(),r,n){if(process.platform!=="win32")return t;if(Gt.isAbsolute(t))return await su(t)||t;if(/[/\\]/.test(t)){let a=Gt.join(e,t);return await su(a)||a}let i,o;if(r){for(let a of Object.keys(r))if(a.toLowerCase()==="path"){let c=r[a];typeof c=="string"&&(i=c,o=c.split(Gt.delimiter).filter(Boolean),o.push(Gt.join(r.ProgramW6432||"C:\\Program Files","Docker\\Docker\\resources\\bin")));break}}if(o===void 0||o.length===0){n.write(`findLocalWindowsExecutable: No PATH to look up exectuable '${t}'.`);let a=Gt.join(e,t);return await su(a)||a}for(let a of o){let c;Gt.isAbsolute(a)?c=Gt.join(a,t):c=Gt.join(e,a,t);let l=await su(c);if(l)return l}n.write(`findLocalWindowsExecutable: Exectuable '${t}' not found on PATH '${i}'.`);let s=Gt.join(e,t);return await su(s)||s}var RD=process.env.PATHEXT,OD=RD?RD.toLowerCase().split(";"):[".com",".exe",".bat",".cmd"];async function su(t){if(OD.indexOf(Gt.extname(t))!==-1)return await ht(t)?t:void 0;for(let e of OD){let r=t+e;if(await ht(r))return r}}function $s(t){let e=/^'?v?(\d+(\.\d+)*)/.exec(t);if(!!e)return e[1].split(".").map(r=>parseInt(r,10))}function sc(t,e){for(let r=0,n=Math.max(t.length,e.length);r<n;r++){let i=t[r]||0,o=e[r]||0;if(i!==o)return i<o}return!1}var ND=ii?(t,e,r)=>oc.spawn(Kw,[t,...e||[]],ae(V({},r),{windowsHide:!0})):oc.fork;async function LD(t,e){if(!e){try{return require(t)}catch{}return}try{return require(`${e}/node_modules.asar/${t}`)}catch{}try{return require(`${e}/node_modules/${t}`)}catch{}}function au(t){let{output:e}=t,r=[];return{output:ir(ae(V({},e),{get dimensions(){return e.dimensions},event:i=>r?r.push(i):e.event(i)})),flush:()=>{r&&(r.forEach(i=>e.event(i)),r=void 0)}}}function FD(t,e,r){return ir(ae(V({},t),{get dimensions(){return t.dimensions},event:i=>{i.channel===e&&t.event(i),r.event(i)}}))}function Xp(t,e){return typeof e!="string"&&"win32"in e?t==="win32"?e.win32:e.posix:e}async function Zl(t,e){return Xp(t.platform,{posix:async()=>{try{return await t.exec(`test -f '${e}'`),!0}catch{return!1}},win32:async()=>(await t.exec(`Test-Path '${e}' -PathType Leaf`)).stdout.trim()==="True"})()}var Gr="\u2404";async function Ni(t,e,r,n="linux",i="Container"){let o=typeof t=="function",s=n==="win32",a=o?await t({env:r?{VSCODE_REMOTE_CONTAINERS_SESSION:r}:{},cmd:s?"powershell":"/bin/sh",args:s?["-NoProfile","-Command","-"]:[],output:e}):t;if(!o){let f=s?`powershell -NoProfile -Command "powershell -NoProfile -Command -"
`:`/bin/sh -c 'echo ${Gr}; /bin/sh'
`;a.stdin.write(f),await new Promise(h=>{let m="",g=new Yw.StringDecoder;a.stdout.on("data",function v(w){m+=g.write(w),m.includes(f)&&(a.stdout.off("data",v),h())})})}let c=tK(a),l;async function u(f,p){let h=l=(async()=>{try{await l}catch{}return d(Xp(n,f),p)})();try{return await Promise.race([h,c.unexpectedExit])}finally{c.disposeStdioListeners(),l===h&&(l=void 0)}}async function d(f,p){let h=`Run in ${i.toLowerCase()}: ${f.replace(/\n.*/g,"")}`,m;if((p==null?void 0:p.logOutput)!=="silent"&&(m=e.start(h,p==null?void 0:p.logLevel)),a.stdin.destroyed){e.write("Stdin closed!");let{code:_,signal:k}=await a.exit;return Promise.reject({message:`Shell server terminated (code: ${_}, signal: ${k})`,code:_,signal:k})}n==="win32"?a.stdin.write(`[Console]::Write('${Gr}'); ( ${f} ); [Console]::Write("${Gr}$LastExitCode ${Gr}"); [Console]::Error.Write('${Gr}')
`):a.stdin.write(`echo -n ${Gr}; ( ${f} ); echo -n ${Gr}$?${Gr}; echo -n ${Gr} >&2
`);let[g,v]=MD(a.stdout,[1,2],(p==null?void 0:p.logOutput)==="continuous"?(_,k,T)=>{k===1&&T===0&&e.write(_,p==null?void 0:p.logLevel)}:()=>{}),w=MD(a.stderr,[1],(p==null?void 0:p.logOutput)==="continuous"?(_,k,T)=>{k===0&&T===0&&e.write(_,p==null?void 0:p.logLevel)}:()=>{})[0];(p==null?void 0:p.stdin)&&(await g,a.stdin.write(p==null?void 0:p.stdin));let[b,C]=await v,[S]=await w,P=parseInt(C,10)||0;return((p==null?void 0:p.logOutput)===void 0||(p==null?void 0:p.logOutput)===!0)&&(e.write(b,p==null?void 0:p.logLevel),e.write(S,p==null?void 0:p.logLevel),P&&e.write(`Exit code ${P}`,p==null?void 0:p.logLevel)),(p==null?void 0:p.logOutput)==="continuous"&&P&&e.write(`Exit code ${P}`,p==null?void 0:p.logLevel),(p==null?void 0:p.logOutput)!=="silent"&&e.stop(h,m,p==null?void 0:p.logLevel),P?Promise.reject({message:`Command in ${i.toLowerCase()} failed: ${f}`,code:P,stdout:b,stderr:S}):{stdout:b,stderr:S}}return{exec:u,process:a,platform:n,path:Xp(n,eK)}}function MD(t,e,r){let n=e.map(()=>{let u,d=new Promise((f,p)=>u={resolve:f,reject:p});return V({promise:d},u)}),i=new Yw.StringDecoder("utf8"),o=[],s=0,a=[];function c(u){let d=i.write(u);l(d)}function l(u){let d=u.indexOf(Gr);if(d!==-1){let f=u.substr(0,d);o.push(f),r(f,s,a.length),a.push(o.join("")),o.length=0,a.length===e[s]&&(n[s].resolve(a),s++,a=[],s===e.length&&t.off("data",c)),d+1<u.length&&l(u.substr(d+1))}else o.push(u),r(u,s,a.length)}return t.on("data",c),n.map(u=>u.promise)}function tK(t){let e,r=new Promise((c,l)=>e=l),n=[],i=[],o=c=>n.push(c),s=c=>i.push(c);return t.stdout.on("data",o),t.stderr.on("data",s),t.exit.then(({code:c,signal:l})=>{e(`Shell server terminated (code: ${c}, signal: ${l})
${Buffer.concat(n).toString()}
${Buffer.concat(i).toString()}`)},c=>{e(`Shell server failed: ${c&&(c.stack||c.message)}`)}),{unexpectedExit:r,disposeStdioListeners:()=>{t.stdout.off("data",o),t.stderr.off("data",s),n.length=0,i.length=0}}}var qD=K(require("path"));var rK=["install.sh","install","bootstrap.sh","bootstrap","script/bootstrap","setup.sh","setup","script/setup"];async function Jw(t,e,r,n,i){let{repository:o,installCommand:s,targetPath:a}=t.dotfilesConfiguration;if(o=i["remote.containers.dotfiles.repository"]||i["dotfiles.repository"]||o,s=i["remote.containers.dotfiles.installCommand"]||i["dotfiles.installCommand"]||s,a=i["remote.containers.dotfiles.targetPath"]||i["dotfiles.targetPath"]||a,!o)return;await n;let c=await r;o.indexOf(":")===-1&&!/^\.{0,2}\//.test(o)&&(o=`https://github.com/${o}.git`);let l=e.shellServer,u=iK(e),d=Object.keys(c).filter(f=>!(f.startsWith("BASH_FUNC_")&&f.endsWith("%%"))).reduce((f,p)=>`${f}${p}=${nK(c[p])} `,"");try{t.output.event({type:"progress",name:"Installing Dotfiles",status:"running"}),s?await l.exec(`# Clone & install dotfiles
${Zp(u)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${d}git clone ${o} ${a} || exit $?
if [ -x ${s} ]
then
	echo Executing script ${s}
	cd ${a} && ${d}${s}
else
	echo Error: ${s} not executable
	exit 126
fi
`,{logOutput:"continuous",logLevel:se.Info}):await l.exec(`# Clone & install dotfiles
${Zp(u)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${d}git clone ${o} ${a} || exit $?
cd ${a}
for f in ${rK.join(" ")}
do
	if [ -e $f ]
	then
		installCommand=$f
		break
	fi
done
if [ -z "$installCommand" ]
then
	dotfiles=$(ls -d ${a}/.* 2>/dev/null | grep -v -E '/(.|..|.git)$')
	if [ ! -z "$dotfiles" ]
	then
		echo Linking dotfiles: $dotfiles
		ln -sf $dotfiles ~ 2>/dev/null
	else
		echo No dotfiles found.
	fi
else
	if [ -x "$installCommand" ]
	then
		echo Executing script '${a}'/"$installCommand"
		${d}./"$installCommand"
	else
		echo Error: '${a}'/"$installCommand" not executable
		exit 126
	fi
fi
`,{logOutput:"continuous",logLevel:se.Info}),t.output.event({type:"progress",name:"Installing Dotfiles",status:"succeeded"})}catch{t.output.event({type:"progress",name:"Installing Dotfiles",status:"failed"})}}function nK(t){return`'${(t||"").replace(/'+/g,`'"$&"'`)}'`}function iK(t){return qD.posix.join(dn(t),".dotfilesMarker")}var ZD=K(require("net")),eR=K(XD());async function rC({forwardedPorts:t,output:e,getLogLevel:r},n,i,o){e.write(`Port forwarding for container port ${i} starts listening on local port.`,se.Debug);let s=o?{VSCODE_REMOTE_CONTAINERS_SESSION:o}:void 0;return new Promise((a,c)=>{let l=new Set,u=ZD.createServer({pauseOnConnect:!0},d=>{let f=d.remotePort,p=u.address().port;e.write(`Port forwarding connection from ${f} > ${p} > ${i} in the container.`),r()===se.Trace&&(async()=>{let h=await(0,eR.default)("port",f);e.write(`Port forwarding process for ${f} > ${p} > ${i} in the container:
${JSON.stringify(h,void 0,"  ")}`)})().catch(console.error),fK(e,n,[n.nodeExecutable,"-e",`
				const net = require('net');
				const fs = require('fs');
				process.stdin.pause();
				const client = net.createConnection({ port: ${i} }, () => {
					console.error('Connection established');
					client.pipe(process.stdout);
					process.stdin.pipe(client);
				});
				client.on('close', function (hadError) {
					console.error(hadError ? 'Remote close with error' : 'Remote close');
					process.exit(hadError ? 1 : 0);
				});
				client.on('error', function (err) {
					process.stderr.write(err && (err.stack || err.message) || String(err));
				});
				process.stdin.on('close', function (hadError) {
					console.error(hadError ? 'Remote stdin close with error' : 'Remote stdin close');
					process.exit(hadError ? 1 : 0);
				});
				process.on('uncaughtException', function (err) {
					fs.writeSync(process.stderr.fd, \`Uncaught Exception: \${String(err && (err.stack || err.message) || err)}\\n\`);
				});
			`],s).then(h=>{let m;h.exit.then(({code:g,signal:v})=>{m||(l.delete(d),d.end()),e.write(`Port forwarding ${f} > ${p} > ${i} terminated${m?` by extension (${m})`:""} with code ${g} and signal ${v}.`)},g=>{l.delete(d),d.end(),e.write(`Port forwarding ${f} > ${p} > ${i} terminated with error: ${g&&g.message||String(g)}`)}),h.stderr.on("data",g=>{e.write(`Port forwarding ${f} > ${p} > ${i} stderr: ${g.toString("utf8")}`,se.Debug)}),d.on("close",g=>{e.write(`Port forwarding ${f} > ${p} > ${i}: Local close${g?" with error":""}`,se.Debug),l.delete(d),m="closed",h.stdin.end(),setTimeout(()=>{m="killed",h.terminate().catch(console.error)},5e3)}),h.stdout.pipe(d),d.pipe(h.stdin),l.add(d)}).catch(console.error)});u.on("listening",()=>{let d={targetPort:i,server:u,connections:l};u.on("close",()=>{t.delete(d)}),t.add(d),e.write(`Port forwarding local port ${u.address().port} to container port ${i}`),a(u)}),u.on("error",d=>{if(d&&(d.code==="EADDRINUSE"||d.code==="EACCES")){u.listen(0,"127.0.0.1");return}c(d)}),u.on("close",()=>{c(new Error("Closed"))}),u.listen(i,"127.0.0.1")})}async function fK(t,e,r,n){return e.remoteExec({env:n,cmd:r[0],args:r.slice(1),output:t})}var ac=K(require("path"));function rh(t,e){let r,n=t.platform==="win32",i=ae(V({},t),{get env(){return r||(r=tR(n,t.env))}}),o=mK.bind(void 0,n,i);return t.containerWorkspaceFolder&&(i.containerWorkspaceFolder=rR(o,t.containerWorkspaceFolder)),nh(o,e)}function nC(t,e,r,n){let i=t==="win32";return nh(gK.bind(void 0,i,e,tR(i,r)),n)}function nh(t,e){if(typeof e=="string")return rR(t,e);if(Array.isArray(e))return e.map(r=>nh(t,r));if(e&&typeof e=="object"){let r=Object.create(null);return Object.keys(e).forEach(n=>{r[n]=nh(t,e[n])}),r}return e}var pK=/\$\{(.*?)\}/g;function tR(t,e){if(t){let r=Object.create(null);return Object.keys(e).forEach(n=>{r[n.toLowerCase()]=e[n]}),r}return e}function rR(t,e){return e.replace(pK,hK.bind(void 0,t))}function hK(t,e,r){let n,i=r.split(":");return i.length>1&&(r=i[0],n=i[1]),t(e,r,n)}function mK(t,e,r,n,i){switch(n){case"env":case"localEnv":return nR(t,e.env,i,r,e.configFile);case"localWorkspaceFolder":return e.localWorkspaceFolder!==void 0?e.localWorkspaceFolder:r;case"localWorkspaceFolderBasename":return e.localWorkspaceFolder!==void 0?(t?ac.win32:ac.posix).basename(e.localWorkspaceFolder):r;case"containerWorkspaceFolder":return e.containerWorkspaceFolder!==void 0?e.containerWorkspaceFolder:r;case"containerWorkspaceFolderBasename":return e.containerWorkspaceFolder!==void 0?ac.posix.basename(e.containerWorkspaceFolder):r;default:return r}}function gK(t,e,r,n,i,o){switch(i){case"containerEnv":return nR(t,r,o,n,e);default:return n}}function nR(t,e,r,n,i){if(r){t&&(r=r.toLowerCase());let o=e[r];return typeof o=="string"?o:""}throw new ye({description:`'${n}'${i?` in ${ac.posix.basename(i.path)}`:""} can not be resolved because no environment variable name is given.`})}async function oi(t){return new Promise(e=>setTimeout(e,t))}var Po=0,aR=/Extension host agent listening on (\d+)/;var or;(function(a){a[a.Begin=0]="Begin",a[a.CloningRepository=1]="CloningRepository",a[a.BuildingImage=2]="BuildingImage",a[a.StartingContainer=3]="StartingContainer",a[a.InstallingServer=4]="InstallingServer",a[a.StartingServer=5]="StartingServer",a[a.End=6]="End"})(or||(or={}));var oC="updateContentCommand";async function sh(t){let{params:e,createdAt:r,startedAt:n,sharedDataFolder:i,sharedDataFolderIsLocalCacheFolder:o,remoteWorkspaceFolder:s,containerUser:a,containerGroup:c,containerEnv:l,remoteExec:u,remotePtyExec:d,remoteExecAsRoot:f,rootShellServer:p}=t,h;if(p&&a==="root"?h=p:h=await Ni(u,e.output,e.sessionId),!l){let j=(await h.exec("echo $PATH")).stdout.trim();l=j?{PATH:j}:{}}a||(a=await qw(h)),!f&&a==="root"&&(f=u);let m=await Hw(h),g=await $w(h,a);g||e.output.write(Qy(`User ${a} not found in /etc/passwd.`));let v=await vK(l,g),w=await cR(l,g),b=jw(w,e.product),{commit:C,quality:S}=e.product,P=C&&await yK(b,C,S||"insider",e.web),_=Bw(m,S==="stable"),k=C&&i&&await lR(he.posix,i,_,C,S||"insider",e.web),T=P&&await CK(P),A;p?A=Promise.resolve(p):a==="root"&&(A=Promise.resolve(h));let M={createdAt:r,startedAt:n,osRelease:m,build:_,user:a,gid:c||(g==null?void 0:g.gid),env:l,shell:v,homeFolder:w,userDataFolder:b,sharedDataFolderIsLocalCacheFolder:o,sharedDataFolder:i,installFolder:P,sharedInstallFolder:k,remoteWorkspaceFolder:s,nodeExecutable:T,remoteExec:u,remotePtyExec:d,remoteExecAsRoot:f,shellServer:h};return(A||f)&&(M.launchRootShellServer=()=>A||(A=Ni(f,e.output))),M}async function qw(t){return(await t.exec("id -un")).stdout.trim()}async function cR(t,e){return t.HOME||e&&e.home||"/root"}async function vK(t,e){return t.SHELL||e&&e.shell||"/bin/sh"}async function $w(t,e){let{stdout:r}=await t.exec("cat /etc/passwd",{logOutput:!1});return Jp(r,e)}function Jp(t,e){return t.split(/\r?\n/).map(n=>n.split(":")).map(n=>({name:n[0],uid:n[2],gid:n[3],home:n[5],shell:n[6]})).find(n=>n.name===e||n.uid===e)}async function yK(t,e,r,n){return he.posix.join(t,"bin",`${e}${r==="stable"?"":`-${r}`}${n?"-web":""}`)}async function lR(t,e,r,n,i,o){return t.join(e,"bin",r.id,`${n}${i==="stable"?"":`-${i}`}${o?"-web":""}`)}function uR(t){return he.posix.join(t.userDataFolder,"extensions")}function dn(t){return he.posix.join(typeof t=="string"?t:t.userDataFolder,"data/Machine")}function ah(t){return he.posix.join(t.userDataFolder,"data/Machine/settings.json")}function wK(t){return he.posix.join(t,".vscode-remote")}function jw(t,e){return he.posix.join(t,e.serverDataFolderName)}function cc(t){return he.posix.join("/var",/^\.*(.*)$/.exec(t)[1])}async function CK(t){return he.posix.join(t,"node")}async function ch(t,e,r,n,i=Po){var w;await dR(t,e),await jK(t,e),await UK(t,e);let o=await fR(t,e,r,n),{serverDownloaded:s}=await pR(t,e),a,c,l=Promise.resolve(),u;if(!t.cliMode&&e.nodeExecutable){let b=await Ql(t,e);a=b.remoteContainersCLI,c=b.remoteEnv,l=b.ready,u=b.mrpcExec;let C=t.cliHost.reconnect;C&&(t.cliHost.reconnect=async()=>{await C(),b.reconnect().catch(S=>t.output.write(Ne(S&&(S.stack||S.message)||String(S))))})}let f=t.computeExtensionHostEnv||e.installFolder&&t.cliMode||t.postCreate.enabled?ic(t,e,r,u).then(b=>V(V(V(V({},b),c),t.cliMode?{}:{REMOTE_CONTAINERS:"true"}),r.remoteEnv?nC(t.cliHost.platform,r.configFilePath,e.env,r.remoteEnv):{})):Promise.resolve({}),p=(w=o["remote.containers.gitCredentialHelperConfigLocation"])!=null?w:t.credentialHelperConfigLocation;!t.cliMode&&e.nodeExecutable&&(await js(t,e,[".ssh","known_hosts"],"ssh"),p!=="none"&&await lc(e,a,t.output,"system"));let h,m,g,v;if(e.installFolder){let C=await CR(t,e,i,u,async()=>gR(t,e,async()=>{var _,k,T;return Array.from(new Set([...((k=(_=r.customizations)==null?void 0:_.vscode)==null?void 0:k.extensions)||[],...((T=await n())==null?void 0:T.allFeatures.filter(A=>(nu||A.included)&&A.value).reduce((A,M)=>{var j,J;return A.concat(((J=(j=M.customizations)==null?void 0:j.vscode)==null?void 0:J.extensions)||[])},[]))||[]]))}),f),S=C.serverPort;g=C.connectionToken,v=C.webConnectionToken,h=S,t.forwardServerPort&&e.nodeExecutable&&(m=await rC(t,e,S,t.sessionId),h=m.address().port,t.backgroundTasks.push(async()=>SR(t,e,r)))}if(t.postCreate.enabled){let b,C=!1,S=new Promise(_=>b=()=>{C=!0,_()}),P=(async()=>{var _;if((r.waitFor||oC)==="initializeCommand"&&b(),!(t.postCreate.skipNonBlocking&&C)&&(await aC(t,e,r,"onCreateCommand",f,l,!1,b),!(t.postCreate.skipNonBlocking&&C)&&(await aC(t,e,r,"updateContentCommand",f,l,!!t.prebuild,b),!(t.postCreate.skipNonBlocking&&C)))){if(!t.prebuild){if(await aC(t,e,r,"postCreateCommand",f,l,!1,b),t.postCreate.skipNonBlocking&&C||(await Jw(t,e,f,l,o),!t.cliMode&&e.nodeExecutable&&(((_=o["remote.containers.copyGitConfig"])!=null?_:t.isCopyGitConfigEnabled)&&(await js(t,e,[".gitconfig"],"git"),await dh(t,e,f.then(k=>V(V({},e.env),k)))),await lc(e,a,t.output,p)),await OK(t,e,r,f,l,b),t.postCreate.skipNonBlocking&&C))return;await NK(t,e,r,f,l,b)}t.postCreate.done()}})();t.backgroundTasks.push(P),await Promise.race([S,P])}return{hostOrContainerPort:h,hostPortServer:m,connectionToken:g,webConnectionToken:v,remoteEnv:t.computeExtensionHostEnv?await f:{},serverDownloaded:s}}async function lh(t,e,r,n,i=Po,o){var b;await dR(t,e);let s=await fR(t,e,r,n),{serverDownloaded:a}=await pR(t,e),c,l,u=Promise.resolve(),d;if(!t.cliMode&&e.nodeExecutable){let C=await Ql(t,e);c=C.remoteContainersCLI,l=C.remoteEnv,u=C.ready,d=C.mrpcExec;let S=t.cliHost.reconnect;S&&(t.cliHost.reconnect=async()=>{await S(),C.reconnect().catch(P=>t.output.write(Ne(P&&(P.stack||P.message)||String(P))))})}let p=t.computeExtensionHostEnv||e.installFolder&&t.cliMode||t.postCreate.enabled?ic(t,e,r,d).then(C=>V(V(V(V({},C),l),t.cliMode?{}:{REMOTE_CONTAINERS:"true"}),r.remoteEnv?nC(t.cliHost.platform,r.configFilePath,e.env,r.remoteEnv):{})):Promise.resolve({}),h=(b=s["remote.containers.gitCredentialHelperConfigLocation"])!=null?b:t.credentialHelperConfigLocation;!t.cliMode&&e.nodeExecutable&&(await js(t,e,[".ssh","known_hosts"],"ssh"),h!=="none"&&await lc(e,c,t.output,"system"));let m,g,v,w;if(e.installFolder){let S=await CR(t,e,i,d,async()=>gR(t,e,async()=>{var k,T,A;return Array.from(new Set([...((T=(k=r.customizations)==null?void 0:k.vscode)==null?void 0:T.extensions)||[],...((A=await n())==null?void 0:A.allFeatures.filter(M=>(nu||M.included)&&M.value).reduce((M,j)=>{var J,Y;return M.concat(((Y=(J=j.customizations)==null?void 0:J.vscode)==null?void 0:Y.extensions)||[])},[]))||[]]))}),p),P=S.serverPort;v=S.connectionToken,w=S.webConnectionToken,m=P,t.forwardServerPort&&e.nodeExecutable&&(g=await rC(t,e,P,t.sessionId),m=g.address().port,t.backgroundTasks.push(async()=>SR(t,e,r)))}if(t.postCreate.enabled){let C,S=new Promise(_=>C=()=>{_()}),P=(async()=>{var T;let _=V(V({},l),t.cliMode?{}:{REMOTE_CONTAINERS:"true"}),k=["onCreateCommand","updateContentCommand","postCreateCommand","postStartCommand","postAttachCommand"];if(t.prebuild){let A=k.indexOf("updateContentCommand");if((!k.slice(0,A+1).some(J=>r[J])?"prebuild":await o(!1,!1,!0,_))!=="prebuild")throw new Error('"prebuild" expected')}else{let A=!0,M=!0,j=k.indexOf(r.waitFor||oC),J=k.indexOf("postCreateCommand"),Y=j<=J&&!k.slice(0,j+1).some(F=>r[F]),oe=!k.slice(0,J+1).some(F=>r[F]),re=Y?"skipNonBlocking":oe?"stopForPersonalization":await o(A,M,!1,_);if(re==="skipNonBlocking"){if(C(),t.postCreate.skipNonBlocking)return;A=!1,re=!k.slice(j+1,J+1).some(L=>r[L])?"stopForPersonalization":await o(A,M,!1,_)}if(re==="stopForPersonalization"){await Jw(t,e,p,u,s),!t.cliMode&&e.nodeExecutable&&(((T=s["remote.containers.copyGitConfig"])!=null?T:t.isCopyGitConfigEnabled)&&(await js(t,e,[".gitconfig"],"git"),await dh(t,e,p.then(q=>V(V({},e.env),q)))),await lc(e,c,t.output,h)),M=!1;let F=j>J&&!k.slice(J+1,j+1).some(q=>r[q]),L=!k.slice(J+1).some(q=>r[q]);re=F?"skipNonBlocking":L?"done":await o(A,M,!1,_)}if(re==="skipNonBlocking"){if(C(),t.postCreate.skipNonBlocking)return;A=!1,re=!k.slice(j+1).some(L=>r[L])?"done":await o(A,M,!1,_)}if(re!=="done")throw new Error('"done" expected')}})();P.then(()=>{t.postCreate.done()},_=>{t.postCreate.done(_)}),t.backgroundTasks.push(P),await Promise.race([S,P])}return{hostOrContainerPort:m,hostPortServer:g,connectionToken:v,webConnectionToken:w,remoteEnv:t.computeExtensionHostEnv?await p:{},serverDownloaded:a}}async function dR(t,e){let r=wK(e.homeFolder);!await ph(e.shellServer,e.userDataFolder)&&await ph(e.shellServer,r)&&await Fi(t,e,["/bin/sh","-c",`cp -r '${r}' '${e.userDataFolder}'`])}async function fR(t,e,r,n){var a,c,l;let i=dn(e),o=he.posix.join(i,".writeMachineSettingsMarker"),s=ah(e);if(await fh(e.shellServer,o)){let u=Object.assign({},...((a=await n())==null?void 0:a.allFeatures.filter(d=>{var f,p;return(nu||d.included)&&d.value&&((p=(f=d.customizations)==null?void 0:f.vscode)==null?void 0:p.settings)}).map(d=>{var f,p;return(p=(f=d.customizations)==null?void 0:f.vscode)==null?void 0:p.settings}))||[],(l=(c=r.customizations)==null?void 0:c.vscode)==null?void 0:l.settings);if(bK(u,r.portsAttributes),EK(u,r.otherPortsAttributes),Object.keys(u).length)return await e.shellServer.exec(`mkdir -p '${he.posix.dirname(s)}' && cat >'${s}' <<'settingsJSON'
${JSON.stringify(u,null,"	")}
settingsJSON
`),u}try{let{stdout:u}=await e.shellServer.exec(`cat ${s}`);return Ve(u)||{}}catch{return{}}}function bK(t,e){if(!t||!e)return;let r="remote.portsAttributes";if(!t[r]){t[r]=e;return}for(let n in e)t[r][n]||(t[r][n]=e[n])}function EK(t,e){if(!t||!e)return;let r="remote.otherPortsAttributes";t[r]||(t[r]=e)}async function uh(t,e,r,n){let i=typeof t.gid=="string"?`${t.user}:${t.gid}`:t.user,o=await e();if((await o.exec(`stat -c %u ${r}`)).stdout.trim()==="0"){let c=he.posix.dirname(r);c!=="/"&&await o.exec(`chown ${i} ${c}`),r!=="/"&&await o.exec(`chown -R ${i} ${r}`)}else if(n&&(await o.exec(`stat -c %u ${n}`)).stdout.trim()==="0"){let u=he.posix.dirname(n);u!=="/"&&await o.exec(`chown -R ${i} ${u}`)}}async function lc(t,e,r,n){if((e||ii)&&n!=="none"){let i=n==="system"?t.launchRootShellServer&&await t.launchRootShellServer():t.shellServer;i?await i.exec(`command -v git >/dev/null 2>&1 && git config --${n} --replace-all credential.helper '!f() { ${t.nodeExecutable} ${e} $*; }; f' || true`):r.write("Cannot configure system wide Git credential helper without root access.")}}async function js(t,e,r,n){let{cliHost:i}=t,o=i.path.join(await i.homedir(),...r),s=he.posix.join(e.homeFolder,...r);await Qa(t,e,o,s,n)}async function dh(t,e,r){let{cliHost:n}=t,{env:i}=n,o=["git","config"],s=i.XDG_CONFIG_HOME?[i.XDG_CONFIG_HOME]:[await n.homedir(),".config"],a=n.path.join(...s,...o),c=(async()=>{let l=await r,u=l.XDG_CONFIG_HOME?[l.XDG_CONFIG_HOME]:[e.homeFolder,".config"];return he.posix.join(...u,...o)})();await Qa(t,e,a,c,"git")}async function Qa(t,e,r,n,i){let o=await _K(t.cliHost,r);if(o)try{let s=await n;await e.shellServer.exec(`# Test for ${s} and ${i}
[ -e ${s} ] && echo ${s} exists && exit 1
command -v ${i} >/dev/null 2>&1 || (echo ${i} not found && exit 1) || exit 1
mkdir -p ${he.posix.dirname(s)}`),await e.shellServer.exec(`# Copy ${r} to ${s}
${lC(o.byteLength)} >${s}`,{stdin:o})}catch(s){if(s&&s.code!==1)throw s}}async function _K(t,e){try{return await t.readFile(e)}catch(r){if(r&&(r.code==="ENOENT"||r.code==="EISDIR"))return;throw r}}async function pR(t,e){let{commit:r}=t.product,{installFolder:n,shellServer:i,launchRootShellServer:o,build:s}=e;if(!(r&&n))return{serverDownloaded:void 0};SK(e.osRelease,s),s.preview&&t.output.write(`\r
[1mSupport for ${s.label} is in preview.[22m\r
\r
`);let a=await ph(i,n),c;a||s===yR[s.arch]&&(o?c=(await o()).exec("apk info | grep -e '^libstdc++$' || (apk update && apk add libstdc++)"):c=i.exec(`apk info | grep -e '^libstdc++$' || (echo "ERROR: libstdc++ not found. Please install." >&2 && exit 1)`));let l=e.sharedInstallFolder;if(l&&await ph(i,l))return a||await i.exec(`mkdir -p '${he.posix.dirname(n)}' && ln -snf '${l}' '${n}'`),o&&(async()=>{await(await o()).exec(`touch '${l}'`)})().catch(console.error),await c,{serverDownloaded:!1};if(a)return{serverDownloaded:!1};t.progress(4),t.output.write(`Installing VS Code Server for commit ${r}\r
`);let u=!!(l&&o),d=u?l:n,f=u?await o():i,p={localCacheFolder:t.localCacheFolder,build:s,commit:r,quality:t.product.quality||"insider",web:t.web,output:t.output,alternateDownload:t.alternateDownload},h=tu(p),m=await ht(h);m||await Wp(p);try{e.sharedDataFolderIsLocalCacheFolder?await hR(p):await eu(t,f,h,d)}catch(g){if(g&&g.stderr&&/unexpected end of file|not in gzip format/i.test(g.stderr.toString()))await Wp(p),e.sharedDataFolderIsLocalCacheFolder?await hR(p):await eu(t,f,h,d);else throw g}return u&&(await i.exec(`mkdir -p '${he.posix.dirname(n)}' && ln -snf '${l}' '${n}'`),(async()=>{await f.exec(`cd '${he.posix.dirname(l)}' && ls -t | tail -n +10 | xargs rm -rf`)})().catch(console.error)),await c,{serverDownloaded:!m}}function SK(t,e){let r=t.version;if(e.minVersion&&r){let n=$s(r.trim());if(n&&sc(n,e.minVersion)){let i=`${e.label} ${e.minVersion.join(".")} or later required.`;throw new ye({description:i,data:{reload:!1}})}}}async function Wp(t){let{build:e,commit:r,quality:n,web:i,output:o}=t,s="Downloading VS Code Server",a=o.start(s);o.write(`${r} ${e.id} ${n} ${i?"web":""}`);let c=tu(t);await Mr(he.dirname(c));let l=`https://update.code.visualstudio.com/commit:${r}/server-${e.id}${i?"-web":""}/${n}`;try{let u=`${c}_${Date.now()}`;await new Promise((d,f)=>{let p=ih.createWriteStream(u);iR.https.get(l,m=>{if(m.statusCode<200||m.statusCode>299){f(new ye({description:"Downloading the VS Code Server failed. Please try again later.",originalError:`Failed to download VS Code Server (${l}): HTTP ${m.statusCode} - ${m.statusMessage}`}));return}m.on("error",f),m.pipe(p),m.on("end",d)}).on("error",f)}),await In(u,c)}catch(u){if(t.alternateDownload){o.write(u&&(u.originalError||u.message)),o.write("Retrying to download VS Code Server.");let d=`${c}_${Date.now()}`;await t.alternateDownload(l,d),await In(d,c)}else throw u||new Error("Failed to download VS Code Server.")}finally{o.stop(s,a)}}async function eu(t,e,r,n,i,o=!0){let s="Installing VS Code Server",a=t.output.start(s);try{let c=`${n}_${Date.now()}`;if(await e.exec(`mkdir -p ${c}`),i)typeof r=="string"&&r.endsWith(".zip")?await e.exec(`unzip ${r} -d ${c}`):await e.exec(`cat ${r} | tar --no-same-owner -x${o?"z":""} -C ${c}`);else{let l=typeof r=="string"?await Oe(r):r;await e.exec(`${lC(l.byteLength)} | tar --no-same-owner -x${o?"z":""} -C ${c}`,{stdin:l})}await e.exec(`mv -n ${he.posix.join(c,"*",".")} ${n} && rmdir ${c}`)}finally{t.output.stop(s,a)}}async function hR(t){let{localCacheFolder:e,build:r,commit:n,quality:i,web:o,output:s}=t,a="Unpacking VS Code Server",c=s.start(a);s.write(`${n} ${r.id} ${i} ${o?"web":""}`);try{let l=await lR(he,e,r,n,i,o),u=`${l}_${Date.now()}`;await Mr(u);let d=tu(t);await(await So(void 0)({cmd:"tar",args:["--no-same-owner","-xzf",d,"--strip-components","1","-C",u],cwd:process.cwd(),output:s})).exit,await ro(l,{recursive:!0,force:!0}),await In(u,l)}finally{s.stop(a,c)}}function tu(t){let{localCacheFolder:e,build:r,commit:n,quality:i,web:o}=t,s=he.join(e,"serverCache",n),a=`vscode-server-${r.id}${i==="stable"?"":`-${i}`}${o?"-web":""}${r.archiveExt||".tar.gz"}`;return he.join(s,a)}async function mR(t,e){let r={VSCODE_AGENT_FOLDER:e.userDataFolder},{stdout:n}=await Fi(t,e,[he.posix.join(e.installFolder,...iu(t.product)),...bR(e.userDataFolder),..._R(t.getTelemetryLevel()),"--list-extensions"],e.installFolder,{remoteEnv:r});return n.toString().split(`
`).filter(i=>!!i)}async function gR(t,e,r){let n="Preparing Extensions",i=t.output.start(n),{sharedDataFolder:o}=e,s=o?AK(o):void 0,a=vR(e),c=await xK(t,e,r);if(e.sharedDataFolderIsLocalCacheFolder)e.shellServer.exec(`mkdir -p '${s}' && ln -s -T '${s}' '${a}' || true`),e.launchRootShellServer&&(await e.launchRootShellServer()).exec(`chown -R ${e.user} ${s}`);else{let l=TK(t.localCacheFolder),u=await PK(t,e,l,s,a,[...c.builtinExtensions,...c.extensions]);kK(t,e,l,s,a,u).catch(console.error)}return t.output.stop(n,i),c}async function xK(t,e,r){let n=dn(e),i=he.posix.join(n,".installExtensionsMarker"),o=!await fh(e.shellServer,i),s=o?[]:t.installBuiltinExtensions||[],a=await t.getAdditionalExtensionsToInstall(o),c=o?[]:await r();for(let u of a)c.indexOf(u)===-1&&c.push(u);let l=[].concat(...s.map(u=>["--install-builtin-extension",u]),...c.map(u=>["--install-extension",u]));return t.cliMode&&l.length&&l.push("--do-not-sync"),{builtinExtensions:s,extensions:c,args:l}}async function PK(t,e,r,n,i,o){t.output.write(`Extensions cache, install extensions: ${o.join(", ")||"None"}`);let{shellServer:s}=e,a=(await s.exec(`test -d ${i} && ls ${i} || true`)).stdout.trim().split(`
`).filter(c=>!!c);if(n){let c=(await s.exec(`test -d ${n} && ls ${n} || true`)).stdout.trim().split(`
`).filter(u=>!!u),l=c.filter(u=>o.some(d=>u.toLowerCase().startsWith(d.toLowerCase()))&&a.indexOf(u)===-1);if(t.output.write(`Extensions cache, link in container: ${l.join(", ")||"None"}`),l.length){await s.exec(`mkdir -p '${i}' && ln -s '${n}'/* '${i}' || true`);let{launchRootShellServer:u}=e;u&&(async()=>{await(await u()).exec(`cd ${n} && touch ${l.map(f=>`'${f}'`).join(" ")}`)})().catch(console.error)}return{remoteExtensions:[...new Set([...a,...c])],cachedExtensions:c}}else{await Mr(r);let c=await en(r),l=c.filter(u=>o.some(d=>u.toLowerCase().startsWith(d.toLowerCase()))&&a.indexOf(u)===-1);if(t.output.write(`Extensions cache, copy to remote: ${l.join(", ")||"None"}`),l.length){let u=he.basename(r),d=oh.c({cwd:he.dirname(r)},l.map(h=>he.join(u,h))),f=he.posix.join(i,`tmp-${Date.now()}`),p=await new Promise(h=>{let m=[];d.on("data",g=>m.push(g)),d.on("end",()=>h(Buffer.concat(m)))});await s.exec(`# Copy extensions to remote
mkdir -p ${f}
${lC(p.byteLength)} | tar --no-same-owner -x --strip-components 1 -C ${f}
mv ${f}/* ${i} && rmdir ${f}`,{stdin:p})}return{remoteExtensions:a.concat(l),cachedExtensions:c}}}async function kK(t,e,r,n,i,o){if(n&&!e.launchRootShellServer)return;let s=1e4,a=6e4;for(await oi(s);;)o=await IK(t,e,r,n,i,o),await oi(a)}async function IK(t,e,r,n,i,{remoteExtensions:o,cachedExtensions:s}){let{shellServer:a,launchRootShellServer:c,remoteExec:l}=e,u=(await a.exec(`ls ${i} || true`,{logOutput:"silent"})).stdout.trim().split(`
`).filter(f=>!!f);if(!n){let f=o.filter(p=>u.indexOf(p)===-1);t.output.write(`Extensions cache, remote removals: ${f.join(", ")||"None"}`);for(let p of f)try{await X_(he.join(r,p))}catch(h){if(!(h&&h.code==="ENOENT"))throw h}}let d=u.filter(f=>o.indexOf(f)===-1&&s.indexOf(f)===-1);if(t.output.write(`Extensions cache, copy to ${n?"shared cache":"local"}: ${d.join(", ")||"None"}`,se.Trace),d.length)if(n){let f=await c();await f.exec(`mkdir -p '${n}' && cd '${i}' && cp ${d.map(p=>`'${p}'`).join(" ")} '${n}'`),await f.exec(`cd '${n}' && ls -t | tail -n +50 | xargs rm -f`)}else{let f=he.posix.basename(i),p=await l({cmd:"tar",cwd:he.posix.dirname(i),args:["c",...d.map(v=>he.posix.join(f,v))],output:t.output}),h=he.join(he.dirname(r),`${he.basename(r)}-${Date.now()}`);await Mr(h);let m=oh.x({cwd:h,strip:1}),g=new Promise((v,w)=>{m.on("error",w),m.on("finish",v)});p.stdout.pipe(m),await g;for(let v of await en(h))await In(he.join(h,v),he.join(r,v));await Z_(h)}return{remoteExtensions:u,cachedExtensions:s}}var sC="extensionsCache";function TK(t){return he.join(t,sC)}function AK(t){return he.posix.join(t,sC)}function vR(t){return he.posix.join(t.userDataFolder,sC)}var DK={x64:{label:"x86-64",id:"linux-x64",arch:"x64",stable:!0,preview:!1},armhf:{label:"ARM",id:"linux-armhf",arch:"armhf",stable:!0,preview:!0},arm64:{label:"ARM64",id:"linux-arm64",arch:"arm64",stable:!0,preview:!0}},yR={x64:{label:"Alpine Linux",id:"linux-alpine",arch:"x64",stable:!0,preview:!0,minVersion:[3,9]},arm64:{label:"Alpine Linux ARM64",id:"alpine-arm64",arch:"arm64",stable:!0,preview:!0,minVersion:[3,9]}},Uw={label:"Mac",id:"darwin",arch:"x64",stable:!0,preview:!0,archiveExt:".zip"},RK={x86_64:"x64",armv7l:"armhf",arm64:"arm64",aarch64:"arm64"};function Bw(t,e){let r=RK[t.hardware];if(t.id==="alpine"){let i=r&&yR[r];if(!i)throw new ye({description:`Alpine Linux is not supported on the hardware architecture '${t.hardware}' of the container.`,data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return i}let n=r&&DK[r];if(!n||e&&!n.stable)throw new ye({description:`The hardware architecture '${t.hardware}' of the container is not supported.`,data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return n}async function Hw(t){let e="unknown",r="unknown",n="unknown";try{e=(await t.exec("uname -m")).stdout.trim();let{stdout:i}=await t.exec("(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null");r=(i.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",n=(i.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound"}catch(i){console.error(i)}return{hardware:e,id:r,version:n}}async function aC(t,e,r,n,i,o,s,a){let c=he.posix.join(dn(e),`.${n}Marker`),l=!!e.createdAt&&await wR(e.shellServer,c,e.createdAt)||s;await cC(t,e,r,n,i,o,l,a)}async function OK(t,e,r,n,i,o){let s=he.posix.join(dn(e),".postStartCommandMarker"),a=!!e.startedAt&&await wR(e.shellServer,s,e.startedAt);await cC(t,e,r,"postStartCommand",n,i,a,o)}async function wR(t,e,r){try{return await t.exec(`mkdir -p '${he.posix.dirname(e)}' && CONTENT="$(cat '${e}' 2>/dev/null || echo ENOENT)" && [ "\${CONTENT:-${r}}" != '${r}' ] && echo '${r}' > '${e}'`),!0}catch{return!1}}async function NK(t,e,r,n,i,o){await cC(t,e,r,"postAttachCommand",n,i,!0,o)}async function cC({postCreate:t},e,r,n,i,o,s,a){let c=r[n];if(s&&c&&(typeof c=="string"?c.trim():c.length)){await o;let l=`Running ${n}...`,u=typeof c=="string"?c:c.join(" "),d=ir({event(f){t.output.event(f),f.type==="raw"&&f.text.includes("::endstep::")&&t.output.event({type:"progress",name:l,status:"running",stepDetail:""}),f.type==="raw"&&f.text.includes("::step::")&&t.output.event({type:"progress",name:l,status:"running",stepDetail:`${f.text.split("::step::")[1].split(`\r
`)[0]}`})},get dimensions(){return t.output.dimensions},onDidChangeDimensions:t.output.onDidChangeDimensions},se.Info);try{d.event({type:"progress",name:l,status:"running",stepDetail:u});let f=e.remoteWorkspaceFolder||e.homeFolder;d.raw(`[1mRunning the ${n} from devcontainer.json...[0m\r
\r
`),await $K(ae(V({},t),{output:d}),e,typeof c=="string"?["/bin/sh","-c",c]:c,f,{remoteEnv:await i,print:"continuous"}),d.raw(`\r
`),d.event({type:"progress",name:l,status:"succeeded"})}catch(f){if(d.event({type:"progress",name:l,status:"failed"}),f&&(f.code===130||f.signal===2))d.raw(`\r
[1m${n} interrupted.[0m\r
\r
`);else throw(f==null?void 0:f.code)&&d.write(Ne(`${n} failed with exit code ${f.code}. Skipping any further user-provided commands.`)),new ye({description:`The ${n} in the devcontainer.json failed.`,originalError:f})}}n===(r.waitFor||oC)&&a()}async function fh(t,e){try{return await t.exec(Zp(e)),!0}catch{return!1}}function Zp(t){return`test ! -f '${t}' && set -o noclobber && mkdir -p '${he.posix.dirname(t)}' && { > '${t}' ; } 2> /dev/null`}async function ph(t,e){try{return await LK(t,e),!0}catch{return!1}}async function LK(t,e){return t.exec(`test -d ${e}`)}async function CR(t,e,r,n,i,o){let{userDataFolder:s,installFolder:a,sharedInstallFolder:c,shellServer:l}=e,{processes:u,mntNS:d}=await yw(l),f=`(${he.posix.join(...iu(t.product,!1))}|${he.posix.join(...iu(t.product,!0))})`.replace(".","\\."),p=new RegExp(`${he.posix.join(he.posix.dirname(a).replace(".","\\."),"[^/]*",f)}`),h=u.filter(Y=>Y.mntNS===d&&p.test(Y.cmd));t.output.write(`Running extension host agents:
${JSON.stringify(h,void 0,"  ")}`,se.Trace);let{current:m,others:g}=h.reduce((Y,oe)=>(Y[(oe.cwd===a||oe.cwd===c)&&p.test(oe.cmd)?"current":"others"].push(oe),Y),{current:[],others:[]});if(!t.cliMode&&g.length){t.output.write(`Terminating old extension host agent.\r
`);try{await l.exec(`kill -9 ${g.map(Y=>Y.pgrp?`-${Y.pgrp}`:Y.pid).join(" ")}`)}catch{}}let{commit:v,quality:w}=t.product,b=he.posix.join(dn(e),`.connection-token-${v}${w==="stable"?"":`-${w}`}${t.web?"-web":""}`),C=he.posix.join(dn(e),`.devport-${v}${w==="stable"?"":`-${w}`}${t.web?"-web":""}`);if(m.length){t.output.write(`Extension host agent is already running.\r
`);try{let{stdout:Y}=await l.exec(`cat '${C}' 2>/dev/null`),oe=Y.toString().trim(),re=parseInt(oe,10),F=new RegExp(` '?${ER(t.product)}'? `).test(m[0].cmd)?(await l.exec(`cat '${b}'`)).stdout.toString().trim():void 0,L=(/'?--connectionToken'? '?([^ ']+)'? /.exec(m[0].cmd)||[])[1];return{serverPort:re,connectionToken:F,webConnectionToken:L}}catch(Y){console.error(Y),t.output.write(`Agent port not found. Terminating old extension host agent.\r
`);try{await l.exec(`kill -9 ${m.map(oe=>oe.pgrp?`-${oe.pgrp}`:oe.pid).join(" ")}`)}catch{}}}let S=!!t.webConnectionToken,P;if(!S){let Y=`${b}-${Br()}`,{stdout:oe}=await l.exec(`cat '${b}' 2>/dev/null || (umask 377 && echo '${Br()}' >'${Y}' && mv -n '${Y}' '${b}' && rm -f '${Y}' && cat '${b}')`);P=oe.toString().trim()}t.progress(5);let _="Starting VS Code Server",k=t.output.start(_),T=[he.posix.join(a,...iu(t.product,S)),"--log",vo(t.getLogLevel()),"--force-disable-user-env",...bR(e.userDataFolder),...FK(t),..._R(t.getTelemetryLevel()),"--accept-server-license-terms","--host","127.0.0.1","--port",String(r),...t.webConnectionToken?["--connectionToken",t.webConnectionToken]:[],...P?[ER(t.product),b]:[],"--extensions-download-dir",vR(e),...(await i()).args,"--start-server",...t.isLocalContainer?["--disable-websocket-compression"]:[""],...t.cliMode?["--enable-remote-auto-shutdown"]:[]],M=(await Fi(t,{remoteExec:e.remoteExec},T,a,{remoteEnv:V({SHELL:e.shell,VSCODE_AGENT_FOLDER:s},t.cliMode?await o:{}),resolveOn:aR,print:"continuous"})).cmdOutput;t.output.stop(_,k);let j=(aR.exec(M)||[])[1];if(!j)throw new Error("Port not found");return await l.exec(`echo ${j} >'${C}'`),{serverPort:parseInt(j,10),connectionToken:P,webConnectionToken:t.webConnectionToken}}function bR(t){return["--server-data-dir",t]}function ER(t){return t.serverApplicationName?"--connection-token-file":"--connection-secret"}function FK(t){return t.isLocalContainer?["--use-host-proxy"]:[]}function _R(t){return t?["--telemetry-level",t]:[]}var MK=/^([a-z0-9\-]+):(\d{1,5})$/;function qK(t){let e=t.match(MK);if(!(!e||e.length!==3))return{host:e[1],port:Number(e[2])}}async function SR(t,e,r){let n=await t.getTunnels();await Promise.all((r.forwardPorts||[]).filter(i=>!n.find(o=>o.remoteAddress.port===i)).map(async i=>{let o,s;if(typeof i=="number")o=i;else{let a=qK(i);if(!a)return;s=a.host,o=a.port}return t.openTunnel(e,o,s)}))}async function $K(t,{remotePtyExec:e},r,n,i={}){let o=i.print||(i.silent?"off":"end"),s=await e({env:i.remoteEnv,cwd:n,cmd:r[0],args:r.slice(1),output:i.silent?it:t.output}),a="",c,l=new Promise(f=>{c=f});s.onData(f=>{a+=f,o==="continuous"&&t.output.raw(f),i.resolveOn&&i.resolveOn.exec(a)&&c()});let u=t.onDidInput&&t.onDidInput(f=>s.write(f)),d=await Promise.race([s.exit,l]);return u&&u.dispose(),o==="end"&&t.output.raw(a),d&&(d.code||d.signal)?Promise.reject({message:`Command failed: ${r.join(" ")}`,cmdOutput:a,code:d.code,signal:d.signal}):{cmdOutput:a}}async function Fi(t,{remoteExec:e},r,n,i={}){let o=i.print||(i.silent?"off":"end"),s=await e({env:i.remoteEnv,cwd:n,cmd:r[0],args:r.slice(1),output:i.silent?it:t.output}),a=[],c=[],l=new iC.StringDecoder,u=new iC.StringDecoder,d="",f="",p,h,m=new Promise((C,S)=>{p=C,h=S});s.stdout.on("data",C=>{a.push(C);let S=l.write(C);o==="continuous"&&t.output.write(S.replace(/\r?\n/g,`\r
`)),d+=S,i.resolveOn&&i.resolveOn.exec(d)&&p()}),s.stderr.on("data",C=>{c.push(C),f+=u.write(C)}),i.stdin instanceof Buffer?(s.stdin.write(i.stdin,C=>{C&&h(C)}),s.stdin.end()):i.stdin instanceof ih.ReadStream&&i.stdin.pipe(s.stdin);let g=await Promise.race([s.exit,m]),v=Buffer.concat(a),w=Buffer.concat(c);o==="end"&&(t.output.write(d.replace(/\r?\n/g,`\r
`)),t.output.write(Ne(f)));let b=`${d}
${f}`;return g&&(g.code||g.signal)?Promise.reject({message:`Command failed: ${r.join(" ")}`,cmdOutput:b,stdout:v,stderr:w,code:g.code,signal:g.signal}):{cmdOutput:b,stdout:v,stderr:w}}function lC(t){let e=8*1024,r=t%e,n=(t-r)/e;return`(dd iflag=fullblock bs=${e} count=${n} 2>/dev/null; dd iflag=fullblock bs=${r} count=1 2>/dev/null)`}async function jK(t,e){let r=he.posix.join(cc(t.product.serverDataFolderName),".patchEtcEnvironmentMarker");if(t.allowSystemConfigChange&&e.launchRootShellServer&&!await Zl(e.shellServer,r)){let n=await e.launchRootShellServer();await fh(n,r)&&await n.exec(`cat >> /etc/environment <<'etcEnvrionmentEOF'
${Object.keys(e.env).map(i=>`
${i}="${e.env[i]}"`).join("")}
etcEnvrionmentEOF
`)}}async function UK(t,e){let r=he.posix.join(cc(t.product.serverDataFolderName),".patchEtcProfileMarker");if(t.allowSystemConfigChange&&e.launchRootShellServer&&!await Zl(e.shellServer,r)){let n=await e.launchRootShellServer();await fh(n,r)&&await n.exec("sed -i -E 's/((^|\\s)PATH=)([^\\$]*)$/\\1${PATH:-\\3}/g' /etc/profile || true")}}async function ic(t,e,r,n){let i=await xR(t,e,r,n,"cat /proc/self/environ","\0");return i||(t.output.write("userEnvProbe: falling back to printenv"),await xR(t,e,r,n,"printenv",`
`)||{})}async function xR(t,e,r,n,i,o){var a;let{userEnvProbe:s}=r||{};if(t.output.write(`userEnvProbe: ${s||t.defaultUserEnvProbe}${s?"":" (default)"}`),s||(s=t.defaultUserEnvProbe),s==="none")return{};try{let l=(await(0,sR.promisify)(oR.randomBytes)(16)).toString("hex"),u=new RegExp(l+"([^]*)"+l),d=e.shell;t.output.write(`userEnvProbe shell: ${d}`);let f=he.posix.basename(d),p=`echo -n ${l}; ${i}; echo -n ${l}`,h;/^pwsh(-preview)?$/.test(f)?h=s==="loginInteractiveShell"||s==="loginShell"?["-Login","-Command"]:["-Command"]:h=[s==="loginInteractiveShell"?"-lic":s==="loginShell"?"-lc":s==="interactiveShell"?"-ic":"-c"];let m=ir(t.output,se.Trace),g=Fi({output:m},{remoteExec:await n||e.remoteExec},[d,...h,p],e.installFolder);Promise.race([g,oi(2e3)]).then(async T=>{if(!T){let A,M=e.shellServer||await Ni(e.remoteExec,t.output);try{({processes:A}=await yw(M))}finally{e.shellServer||await M.process.terminate()}let j=A.find(J=>J.cmd.startsWith(d)&&J.cmd.indexOf(l)!==-1);if(j){let Y=lT(A)[j.pid];t.output.write(`userEnvProbe is taking longer than 2 seconds. Process tree:
${ww(Y)}`)}else t.output.write("userEnvProbe is taking longer than 2 seconds. Process not found.")}},()=>{}).catch(T=>t.output.write(Ne(T&&(T.stack||T.message)||"Error reading process tree.")));let v=await Promise.race([g,oi(1e4)]);if(!v)return t.output.write(Ne("userEnvProbe is taking longer than 10 seconds. Avoid waiting for user input in your shell's startup scripts. Continuing.")),{};let w=v.stdout.toString(),b=u.exec(w),C=b?b[1]:"";if(!C||C.trim()==="-n")return;let S=C.split(o).reduce((T,A)=>{let M=A.indexOf("=");return M!==-1&&(T[A.substring(0,M)]=A.substring(M+1)),T},{});t.output.write(`userEnvProbe parsed: ${JSON.stringify(S,void 0,"  ")}`,se.Trace),delete S.PWD;let P=S.PATH,_=(a=e.env)==null?void 0:a.PATH,k=!(t.allowSystemConfigChange&&e.launchRootShellServer)&&P&&_;if(k){let T=e.user;S.PATH=BK(P,_,T==="root"||T==="0")}return t.output.write(`userEnvProbe PATHs:
Probe:     ${typeof P=="string"?`'${P}'`:"None"}
Container: ${typeof _=="string"?`'${_}'`:"None"}${k?`
Merged:    ${typeof S.PATH=="string"?`'${S.PATH}'`:"None"}`:""}`),S}catch(c){return t.output.write(Ne(c&&(c.stack||c.message)||"Error reading shell environment.")),{}}}function BK(t,e,r){let n=t.split(":"),i=0;for(let o of e.split(":")){let s=n.indexOf(o);s===-1?(r||!/\/sbin(\/|$)/.test(o))&&n.splice(i++,0,o):i=s+1}return n.join(":")}async function PR(t){for(let e of t)await(typeof e=="function"?e():e)}var vO=K(require("crypto")),hu=K(require("path"));function kR(t){return typeof t=="undefined"||t===null}function HK(t){return typeof t=="object"&&t!==null}function VK(t){return Array.isArray(t)?t:kR(t)?[]:[t]}function WK(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function GK(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function zK(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var KK=kR,YK=HK,JK=VK,QK=GK,XK=zK,ZK=WK,Rt={isNothing:KK,isObject:YK,toArray:JK,repeat:QK,isNegativeZero:XK,extend:ZK};function IR(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function cu(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=IR(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}cu.prototype=Object.create(Error.prototype);cu.prototype.constructor=cu;cu.prototype.toString=function(e){return this.name+": "+IR(this,e)};var _r=cu;function uC(t,e,r,n,i){var o="",s="",a=Math.floor(i/2)-1;return n-e>a&&(o=" ... ",e=n-a+o.length),r-n>a&&(s=" ...",r=n+a-s.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+o.length}}function dC(t,e){return Rt.repeat(" ",e-t.length)+t}function e8(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var a="",c,l,u=Math.min(t.line+e.linesAfter,i.length).toString().length,d=e.maxLength-(e.indent+u+3);for(c=1;c<=e.linesBefore&&!(s-c<0);c++)l=uC(t.buffer,n[s-c],i[s-c],t.position-(n[s]-n[s-c]),d),a=Rt.repeat(" ",e.indent)+dC((t.line-c+1).toString(),u)+" | "+l.str+`
`+a;for(l=uC(t.buffer,n[s],i[s],t.position,d),a+=Rt.repeat(" ",e.indent)+dC((t.line+1).toString(),u)+" | "+l.str+`
`,a+=Rt.repeat("-",e.indent+u+3+l.pos)+`^
`,c=1;c<=e.linesAfter&&!(s+c>=i.length);c++)l=uC(t.buffer,n[s+c],i[s+c],t.position-(n[s]-n[s+c]),d),a+=Rt.repeat(" ",e.indent)+dC((t.line+c+1).toString(),u)+" | "+l.str+`
`;return a.replace(/\n$/,"")}var t8=e8,r8=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],n8=["scalar","sequence","mapping"];function i8(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function o8(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(r8.indexOf(r)===-1)throw new _r('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=i8(e.styleAliases||null),n8.indexOf(this.kind)===-1)throw new _r('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var sr=o8;function TR(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function s8(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function fC(t){return this.extend(t)}fC.prototype.extend=function(e){var r=[],n=[];if(e instanceof sr)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new _r("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof sr))throw new _r("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new _r("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new _r("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof sr))throw new _r("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(fC.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=TR(i,"implicit"),i.compiledExplicit=TR(i,"explicit"),i.compiledTypeMap=s8(i.compiledImplicit,i.compiledExplicit),i};var a8=fC,c8=new sr("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),l8=new sr("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),u8=new sr("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),d8=new a8({explicit:[c8,l8,u8]});function f8(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function p8(){return null}function h8(t){return t===null}var m8=new sr("tag:yaml.org,2002:null",{kind:"scalar",resolve:f8,construct:p8,predicate:h8,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function g8(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function v8(t){return t==="true"||t==="True"||t==="TRUE"}function y8(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var w8=new sr("tag:yaml.org,2002:bool",{kind:"scalar",resolve:g8,construct:v8,predicate:y8,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function C8(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function b8(t){return 48<=t&&t<=55}function E8(t){return 48<=t&&t<=57}function _8(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!C8(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!b8(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!E8(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function S8(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function x8(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1==0&&!Rt.isNegativeZero(t)}var P8=new sr("tag:yaml.org,2002:int",{kind:"scalar",resolve:_8,construct:S8,predicate:x8,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),k8=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function I8(t){return!(t===null||!k8.test(t)||t[t.length-1]==="_")}function T8(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var A8=/^[-+]?[0-9]+e/;function D8(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Rt.isNegativeZero(t))return"-0.0";return r=t.toString(10),A8.test(r)?r.replace("e",".e"):r}function R8(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!=0||Rt.isNegativeZero(t))}var O8=new sr("tag:yaml.org,2002:float",{kind:"scalar",resolve:I8,construct:T8,predicate:R8,represent:D8,defaultStyle:"lowercase"}),N8=d8.extend({implicit:[m8,w8,P8,O8]}),L8=N8,AR=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),DR=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function F8(t){return t===null?!1:AR.exec(t)!==null||DR.exec(t)!==null}function M8(t){var e,r,n,i,o,s,a,c=0,l=null,u,d,f;if(e=AR.exec(t),e===null&&(e=DR.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],s=+e[5],a=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(u=+e[10],d=+(e[11]||0),l=(u*60+d)*6e4,e[9]==="-"&&(l=-l)),f=new Date(Date.UTC(r,n,i,o,s,a,c)),l&&f.setTime(f.getTime()-l),f}function q8(t){return t.toISOString()}var $8=new sr("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:F8,construct:M8,instanceOf:Date,represent:q8});function j8(t){return t==="<<"||t===null}var U8=new sr("tag:yaml.org,2002:merge",{kind:"scalar",resolve:j8}),pC=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function B8(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=pC;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8==0}function H8(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=pC,s=0,a=[];for(e=0;e<i;e++)e%4==0&&e&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):r===18?(a.push(s>>10&255),a.push(s>>2&255)):r===12&&a.push(s>>4&255),new Uint8Array(a)}function V8(t){var e="",r=0,n,i,o=t.length,s=pC;for(n=0;n<o;n++)n%3==0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function W8(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var G8=new sr("tag:yaml.org,2002:binary",{kind:"scalar",resolve:B8,construct:H8,predicate:W8,represent:V8}),z8=Object.prototype.hasOwnProperty,K8=Object.prototype.toString;function Y8(t){if(t===null)return!0;var e=[],r,n,i,o,s,a=t;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],s=!1,K8.call(i)!=="[object Object]")return!1;for(o in i)if(z8.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function J8(t){return t!==null?t:[]}var Q8=new sr("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Y8,construct:J8}),X8=Object.prototype.toString;function Z8(t){if(t===null)return!0;var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],X8.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function e5(t){if(t===null)return[];var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var t5=new sr("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Z8,construct:e5}),r5=Object.prototype.hasOwnProperty;function n5(t){if(t===null)return!0;var e,r=t;for(e in r)if(r5.call(r,e)&&r[e]!==null)return!1;return!0}function i5(t){return t!==null?t:{}}var o5=new sr("tag:yaml.org,2002:set",{kind:"mapping",resolve:n5,construct:i5}),RR=L8.extend({implicit:[$8,U8],explicit:[G8,Q8,t5,o5]}),ko=Object.prototype.hasOwnProperty,hh=1,OR=2,NR=3,mh=4,hC=1,s5=2,LR=3,a5=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,c5=/[\x85\u2028\u2029]/,l5=/[,\[\]\{\}]/,FR=/^(?:!|!!|![a-z\-]+!)$/i,MR=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function qR(t){return Object.prototype.toString.call(t)}function si(t){return t===10||t===13}function Us(t){return t===9||t===32}function Sr(t){return t===9||t===32||t===10||t===13}function uc(t){return t===44||t===91||t===93||t===123||t===125}function u5(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function d5(t){return t===120?2:t===117?4:t===85?8:0}function f5(t){return 48<=t&&t<=57?t-48:-1}function $R(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function p5(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var jR=new Array(256),UR=new Array(256);for(Bs=0;Bs<256;Bs++)jR[Bs]=$R(Bs)?1:0,UR[Bs]=$R(Bs);var Bs;function h5(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||RR,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function BR(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=t8(r),new _r(e,r)}function me(t,e){throw BR(t,e)}function gh(t,e){t.onWarning&&t.onWarning.call(null,BR(t,e))}var HR={YAML:function(e,r,n){var i,o,s;e.version!==null&&me(e,"duplication of %YAML directive"),n.length!==1&&me(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&me(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&me(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&gh(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&me(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],FR.test(i)||me(e,"ill-formed tag handle (first argument) of the TAG directive"),ko.call(e.tagMap,i)&&me(e,'there is a previously declared suffix for "'+i+'" tag handle'),MR.test(o)||me(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{me(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function Io(t,e,r,n){var i,o,s,a;if(e<r){if(a=t.input.slice(e,r),n)for(i=0,o=a.length;i<o;i+=1)s=a.charCodeAt(i),s===9||32<=s&&s<=1114111||me(t,"expected valid JSON character");else a5.test(a)&&me(t,"the stream contains non-printable characters");t.result+=a}}function VR(t,e,r,n){var i,o,s,a;for(Rt.isObject(r)||me(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,a=i.length;s<a;s+=1)o=i[s],ko.call(e,o)||(e[o]=r[o],n[o]=!0)}function dc(t,e,r,n,i,o,s,a,c){var l,u;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),l=0,u=i.length;l<u;l+=1)Array.isArray(i[l])&&me(t,"nested arrays are not supported inside keys"),typeof i=="object"&&qR(i[l])==="[object Object]"&&(i[l]="[object Object]");if(typeof i=="object"&&qR(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(l=0,u=o.length;l<u;l+=1)VR(t,e,o[l],r);else VR(t,e,o,r);else!t.json&&!ko.call(r,i)&&ko.call(e,i)&&(t.line=s||t.line,t.lineStart=a||t.lineStart,t.position=c||t.position,me(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function mC(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):me(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function xt(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Us(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(si(i))for(mC(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&gh(t,"deficient indentation"),n}function vh(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||Sr(r)))}function gC(t,e){e===1?t.result+=" ":e>1&&(t.result+=Rt.repeat(`
`,e-1))}function m5(t,e,r){var n,i,o,s,a,c,l,u,d=t.kind,f=t.result,p;if(p=t.input.charCodeAt(t.position),Sr(p)||uc(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(i=t.input.charCodeAt(t.position+1),Sr(i)||r&&uc(i)))return!1;for(t.kind="scalar",t.result="",o=s=t.position,a=!1;p!==0;){if(p===58){if(i=t.input.charCodeAt(t.position+1),Sr(i)||r&&uc(i))break}else if(p===35){if(n=t.input.charCodeAt(t.position-1),Sr(n))break}else{if(t.position===t.lineStart&&vh(t)||r&&uc(p))break;if(si(p))if(c=t.line,l=t.lineStart,u=t.lineIndent,xt(t,!1,-1),t.lineIndent>=e){a=!0,p=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=c,t.lineStart=l,t.lineIndent=u;break}}a&&(Io(t,o,s,!1),gC(t,t.line-c),o=s=t.position,a=!1),Us(p)||(s=t.position+1),p=t.input.charCodeAt(++t.position)}return Io(t,o,s,!1),t.result?!0:(t.kind=d,t.result=f,!1)}function g5(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(Io(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else si(r)?(Io(t,n,i,!0),gC(t,xt(t,!1,e)),n=i=t.position):t.position===t.lineStart&&vh(t)?me(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);me(t,"unexpected end of the stream within a single quoted scalar")}function v5(t,e){var r,n,i,o,s,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return Io(t,r,t.position,!0),t.position++,!0;if(a===92){if(Io(t,r,t.position,!0),a=t.input.charCodeAt(++t.position),si(a))xt(t,!1,e);else if(a<256&&jR[a])t.result+=UR[a],t.position++;else if((s=d5(a))>0){for(i=s,o=0;i>0;i--)a=t.input.charCodeAt(++t.position),(s=u5(a))>=0?o=(o<<4)+s:me(t,"expected hexadecimal character");t.result+=p5(o),t.position++}else me(t,"unknown escape sequence");r=n=t.position}else si(a)?(Io(t,r,n,!0),gC(t,xt(t,!1,e)),r=n=t.position):t.position===t.lineStart&&vh(t)?me(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}me(t,"unexpected end of the stream within a double quoted scalar")}function y5(t,e){var r=!0,n,i,o,s=t.tag,a,c=t.anchor,l,u,d,f,p,h=Object.create(null),m,g,v,w;if(w=t.input.charCodeAt(t.position),w===91)u=93,p=!1,a=[];else if(w===123)u=125,p=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),w=t.input.charCodeAt(++t.position);w!==0;){if(xt(t,!0,e),w=t.input.charCodeAt(t.position),w===u)return t.position++,t.tag=s,t.anchor=c,t.kind=p?"mapping":"sequence",t.result=a,!0;r?w===44&&me(t,"expected the node content, but found ','"):me(t,"missed comma between flow collection entries"),g=m=v=null,d=f=!1,w===63&&(l=t.input.charCodeAt(t.position+1),Sr(l)&&(d=f=!0,t.position++,xt(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,fc(t,e,hh,!1,!0),g=t.tag,m=t.result,xt(t,!0,e),w=t.input.charCodeAt(t.position),(f||t.line===n)&&w===58&&(d=!0,w=t.input.charCodeAt(++t.position),xt(t,!0,e),fc(t,e,hh,!1,!0),v=t.result),p?dc(t,a,h,g,m,v,n,i,o):d?a.push(dc(t,null,h,g,m,v,n,i,o)):a.push(m),xt(t,!0,e),w=t.input.charCodeAt(t.position),w===44?(r=!0,w=t.input.charCodeAt(++t.position)):r=!1}me(t,"unexpected end of the stream within a flow collection")}function w5(t,e){var r,n,i=hC,o=!1,s=!1,a=e,c=0,l=!1,u,d;if(d=t.input.charCodeAt(t.position),d===124)n=!1;else if(d===62)n=!0;else return!1;for(t.kind="scalar",t.result="";d!==0;)if(d=t.input.charCodeAt(++t.position),d===43||d===45)hC===i?i=d===43?LR:s5:me(t,"repeat of a chomping mode identifier");else if((u=f5(d))>=0)u===0?me(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?me(t,"repeat of an indentation width identifier"):(a=e+u-1,s=!0);else break;if(Us(d)){do d=t.input.charCodeAt(++t.position);while(Us(d));if(d===35)do d=t.input.charCodeAt(++t.position);while(!si(d)&&d!==0)}for(;d!==0;){for(mC(t),t.lineIndent=0,d=t.input.charCodeAt(t.position);(!s||t.lineIndent<a)&&d===32;)t.lineIndent++,d=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>a&&(a=t.lineIndent),si(d)){c++;continue}if(t.lineIndent<a){i===LR?t.result+=Rt.repeat(`
`,o?1+c:c):i===hC&&o&&(t.result+=`
`);break}for(n?Us(d)?(l=!0,t.result+=Rt.repeat(`
`,o?1+c:c)):l?(l=!1,t.result+=Rt.repeat(`
`,c+1)):c===0?o&&(t.result+=" "):t.result+=Rt.repeat(`
`,c):t.result+=Rt.repeat(`
`,o?1+c:c),o=!0,s=!0,c=0,r=t.position;!si(d)&&d!==0;)d=t.input.charCodeAt(++t.position);Io(t,r,t.position,!1)}return!0}function WR(t,e){var r,n=t.tag,i=t.anchor,o=[],s,a=!1,c;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),c=t.input.charCodeAt(t.position);c!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,me(t,"tab characters must not be used in indentation")),!(c!==45||(s=t.input.charCodeAt(t.position+1),!Sr(s))));){if(a=!0,t.position++,xt(t,!0,-1)&&t.lineIndent<=e){o.push(null),c=t.input.charCodeAt(t.position);continue}if(r=t.line,fc(t,e,NR,!1,!0),o.push(t.result),xt(t,!0,-1),c=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&c!==0)me(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function C5(t,e,r){var n,i,o,s,a,c,l=t.tag,u=t.anchor,d={},f=Object.create(null),p=null,h=null,m=null,g=!1,v=!1,w;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=d),w=t.input.charCodeAt(t.position);w!==0;){if(!g&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,me(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(w===63||w===58)&&Sr(n))w===63?(g&&(dc(t,d,f,p,h,null,s,a,c),p=h=m=null),v=!0,g=!0,i=!0):g?(g=!1,i=!0):me(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,w=n;else{if(s=t.line,a=t.lineStart,c=t.position,!fc(t,r,OR,!1,!0))break;if(t.line===o){for(w=t.input.charCodeAt(t.position);Us(w);)w=t.input.charCodeAt(++t.position);if(w===58)w=t.input.charCodeAt(++t.position),Sr(w)||me(t,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(dc(t,d,f,p,h,null,s,a,c),p=h=m=null),v=!0,g=!1,i=!1,p=t.tag,h=t.result;else if(v)me(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=l,t.anchor=u,!0}else if(v)me(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=l,t.anchor=u,!0}if((t.line===o||t.lineIndent>e)&&(g&&(s=t.line,a=t.lineStart,c=t.position),fc(t,e,mh,!0,i)&&(g?h=t.result:m=t.result),g||(dc(t,d,f,p,h,m,s,a,c),p=h=m=null),xt(t,!0,-1),w=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&w!==0)me(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return g&&dc(t,d,f,p,h,null,s,a,c),v&&(t.tag=l,t.anchor=u,t.kind="mapping",t.result=d),v}function b5(t){var e,r=!1,n=!1,i,o,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&me(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(o=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):me(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Sr(s);)s===33&&(n?me(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),FR.test(i)||me(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),l5.test(o)&&me(t,"tag suffix cannot contain flow indicator characters")}o&&!MR.test(o)&&me(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{me(t,"tag name is malformed: "+o)}return r?t.tag=o:ko.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:me(t,'undeclared tag handle "'+i+'"'),!0}function E5(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&me(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Sr(r)&&!uc(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&me(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function _5(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Sr(n)&&!uc(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&me(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),ko.call(t.anchorMap,r)||me(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],xt(t,!0,-1),!0}function fc(t,e,r,n,i){var o,s,a,c=1,l=!1,u=!1,d,f,p,h,m,g;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=a=mh===r||NR===r,n&&xt(t,!0,-1)&&(l=!0,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)),c===1)for(;b5(t)||E5(t);)xt(t,!0,-1)?(l=!0,a=o,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)):a=!1;if(a&&(a=l||i),(c===1||mh===r)&&(hh===r||OR===r?m=e:m=e+1,g=t.position-t.lineStart,c===1?a&&(WR(t,g)||C5(t,g,m))||y5(t,m)?u=!0:(s&&w5(t,m)||g5(t,m)||v5(t,m)?u=!0:_5(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&me(t,"alias node should not have any properties")):m5(t,m,hh===r)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):c===0&&(u=a&&WR(t,g))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&me(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),d=0,f=t.implicitTypes.length;d<f;d+=1)if(h=t.implicitTypes[d],h.resolve(t.result)){t.result=h.construct(t.result),t.tag=h.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(ko.call(t.typeMap[t.kind||"fallback"],t.tag))h=t.typeMap[t.kind||"fallback"][t.tag];else for(h=null,p=t.typeMap.multi[t.kind||"fallback"],d=0,f=p.length;d<f;d+=1)if(t.tag.slice(0,p[d].tag.length)===p[d].tag){h=p[d];break}h||me(t,"unknown tag !<"+t.tag+">"),t.result!==null&&h.kind!==t.kind&&me(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+h.kind+'", not "'+t.kind+'"'),h.resolve(t.result,t.tag)?(t.result=h.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):me(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function S5(t){var e=t.position,r,n,i,o=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(xt(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(o=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!Sr(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&me(t,"directive name must not be less than one character in length");s!==0;){for(;Us(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!si(s));break}if(si(s))break;for(r=t.position;s!==0&&!Sr(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&mC(t),ko.call(HR,n)?HR[n](t,n,i):gh(t,'unknown document directive "'+n+'"')}if(xt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,xt(t,!0,-1)):o&&me(t,"directives end mark is expected"),fc(t,t.lineIndent-1,mh,!1,!0),xt(t,!0,-1),t.checkLineBreaks&&c5.test(t.input.slice(e,t.position))&&gh(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&vh(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,xt(t,!0,-1));return}if(t.position<t.length-1)me(t,"end of the stream or a document separator is expected");else return}function GR(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new h5(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,me(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)S5(r);return r.documents}function x5(t,e,r){e!==null&&typeof e=="object"&&typeof r=="undefined"&&(r=e,e=null);var n=GR(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function P5(t,e){var r=GR(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new _r("expected a single document in the stream, but found more")}}var k5=x5,I5=P5,zR={loadAll:k5,load:I5},KR=Object.prototype.toString,YR=Object.prototype.hasOwnProperty,vC=65279,T5=9,lu=10,A5=13,D5=32,R5=33,O5=34,yC=35,N5=37,L5=38,F5=39,M5=42,JR=44,q5=45,yh=58,$5=61,j5=62,U5=63,B5=64,QR=91,XR=93,H5=96,ZR=123,V5=124,eO=125,ar={};ar[0]="\\0";ar[7]="\\a";ar[8]="\\b";ar[9]="\\t";ar[10]="\\n";ar[11]="\\v";ar[12]="\\f";ar[13]="\\r";ar[27]="\\e";ar[34]='\\"';ar[92]="\\\\";ar[133]="\\N";ar[160]="\\_";ar[8232]="\\L";ar[8233]="\\P";var W5=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],G5=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function z5(t,e){var r,n,i,o,s,a,c;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)s=n[i],a=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),c=t.compiledTypeMap.fallback[s],c&&YR.call(c.styleAliases,a)&&(a=c.styleAliases[a]),r[s]=a;return r}function K5(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new _r("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Rt.repeat("0",n-e.length)+e}var Y5=1,uu=2;function J5(t){this.schema=t.schema||RR,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Rt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=z5(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?uu:Y5,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function tO(t,e){for(var r=Rt.repeat(" ",e),n=0,i=-1,o="",s,a=t.length;n<a;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=a):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function wC(t,e){return`
`+Rt.repeat(" ",t.indent*e)}function Q5(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function wh(t){return t===D5||t===T5}function du(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==vC||65536<=t&&t<=1114111}function rO(t){return du(t)&&t!==vC&&t!==A5&&t!==lu}function nO(t,e,r){var n=rO(t),i=n&&!wh(t);return(r?n:n&&t!==JR&&t!==QR&&t!==XR&&t!==ZR&&t!==eO)&&t!==yC&&!(e===yh&&!i)||rO(e)&&!wh(e)&&t===yC||e===yh&&i}function X5(t){return du(t)&&t!==vC&&!wh(t)&&t!==q5&&t!==U5&&t!==yh&&t!==JR&&t!==QR&&t!==XR&&t!==ZR&&t!==eO&&t!==yC&&t!==L5&&t!==M5&&t!==R5&&t!==V5&&t!==$5&&t!==j5&&t!==F5&&t!==O5&&t!==N5&&t!==B5&&t!==H5}function Z5(t){return!wh(t)&&t!==yh}function fu(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function iO(t){var e=/^\n* /;return e.test(t)}var oO=1,CC=2,sO=3,aO=4,pc=5;function eY(t,e,r,n,i,o,s,a){var c,l=0,u=null,d=!1,f=!1,p=n!==-1,h=-1,m=X5(fu(t,0))&&Z5(fu(t,t.length-1));if(e||s)for(c=0;c<t.length;l>=65536?c+=2:c++){if(l=fu(t,c),!du(l))return pc;m=m&&nO(l,u,a),u=l}else{for(c=0;c<t.length;l>=65536?c+=2:c++){if(l=fu(t,c),l===lu)d=!0,p&&(f=f||c-h-1>n&&t[h+1]!==" ",h=c);else if(!du(l))return pc;m=m&&nO(l,u,a),u=l}f=f||p&&c-h-1>n&&t[h+1]!==" "}return!d&&!f?m&&!s&&!i(t)?oO:o===uu?pc:CC:r>9&&iO(t)?pc:s?o===uu?pc:CC:f?aO:sO}function tY(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===uu?'""':"''";if(!t.noCompatMode&&(W5.indexOf(e)!==-1||G5.test(e)))return t.quotingType===uu?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),a=n||t.flowLevel>-1&&r>=t.flowLevel;function c(l){return Q5(t,l)}switch(eY(e,a,t.indent,s,c,t.quotingType,t.forceQuotes&&!n,i)){case oO:return e;case CC:return"'"+e.replace(/'/g,"''")+"'";case sO:return"|"+cO(e,t.indent)+lO(tO(e,o));case aO:return">"+cO(e,t.indent)+lO(tO(rY(e,s),o));case pc:return'"'+nY(e)+'"';default:throw new _r("impossible error: invalid scalar style")}}()}function cO(t,e){var r=iO(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function lO(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function rY(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var l=t.indexOf(`
`);return l=l!==-1?l:t.length,r.lastIndex=l,uO(t.slice(0,l),e)}(),i=t[0]===`
`||t[0]===" ",o,s;s=r.exec(t);){var a=s[1],c=s[2];o=c[0]===" ",n+=a+(!i&&!o&&c!==""?`
`:"")+uO(c,e),i=o}return n}function uO(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,s=0,a=0,c="";n=r.exec(t);)a=n.index,a-i>e&&(o=s>i?s:a,c+=`
`+t.slice(i,o),i=o+1),s=a;return c+=`
`,t.length-i>e&&s>i?c+=t.slice(i,s)+`
`+t.slice(s+1):c+=t.slice(i),c.slice(1)}function nY(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=fu(t,i),n=ar[r],!n&&du(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||K5(r);return e}function iY(t,e,r){var n="",i=t.tag,o,s,a;for(o=0,s=r.length;o<s;o+=1)a=r[o],t.replacer&&(a=t.replacer.call(r,String(o),a)),(Mi(t,e,a,!1,!1)||typeof a=="undefined"&&Mi(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function dO(t,e,r,n){var i="",o=t.tag,s,a,c;for(s=0,a=r.length;s<a;s+=1)c=r[s],t.replacer&&(c=t.replacer.call(r,String(s),c)),(Mi(t,e+1,c,!0,!0,!1,!0)||typeof c=="undefined"&&Mi(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=wC(t,e)),t.dump&&lu===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function oY(t,e,r){var n="",i=t.tag,o=Object.keys(r),s,a,c,l,u;for(s=0,a=o.length;s<a;s+=1)u="",n!==""&&(u+=", "),t.condenseFlow&&(u+='"'),c=o[s],l=r[c],t.replacer&&(l=t.replacer.call(r,c,l)),!!Mi(t,e,c,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),!!Mi(t,e,l,!1,!1)&&(u+=t.dump,n+=u));t.tag=i,t.dump="{"+n+"}"}function sY(t,e,r,n){var i="",o=t.tag,s=Object.keys(r),a,c,l,u,d,f;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new _r("sortKeys must be a boolean or a function");for(a=0,c=s.length;a<c;a+=1)f="",(!n||i!=="")&&(f+=wC(t,e)),l=s[a],u=r[l],t.replacer&&(u=t.replacer.call(r,l,u)),!!Mi(t,e+1,l,!0,!0,!0)&&(d=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,d&&(t.dump&&lu===t.dump.charCodeAt(0)?f+="?":f+="? "),f+=t.dump,d&&(f+=wC(t,e)),!!Mi(t,e+1,u,!0,d)&&(t.dump&&lu===t.dump.charCodeAt(0)?f+=":":f+=": ",f+=t.dump,i+=f));t.tag=o,t.dump=i||"{}"}function fO(t,e,r){var n,i,o,s,a,c;for(i=r?t.explicitTypes:t.implicitTypes,o=0,s=i.length;o<s;o+=1)if(a=i[o],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(r?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(c=t.styleMap[a.tag]||a.defaultStyle,KR.call(a.represent)==="[object Function]")n=a.represent(e,c);else if(YR.call(a.represent,c))n=a.represent[c](e,c);else throw new _r("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');t.dump=n}return!0}return!1}function Mi(t,e,r,n,i,o,s){t.tag=null,t.dump=r,fO(t,r,!1)||fO(t,r,!0);var a=KR.call(t.dump),c=n,l;n&&(n=t.flowLevel<0||t.flowLevel>e);var u=a==="[object Object]"||a==="[object Array]",d,f;if(u&&(d=t.duplicates.indexOf(r),f=d!==-1),(t.tag!==null&&t.tag!=="?"||f||t.indent!==2&&e>0)&&(i=!1),f&&t.usedDuplicates[d])t.dump="*ref_"+d;else{if(u&&f&&!t.usedDuplicates[d]&&(t.usedDuplicates[d]=!0),a==="[object Object]")n&&Object.keys(t.dump).length!==0?(sY(t,e,t.dump,i),f&&(t.dump="&ref_"+d+t.dump)):(oY(t,e,t.dump),f&&(t.dump="&ref_"+d+" "+t.dump));else if(a==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?dO(t,e-1,t.dump,i):dO(t,e,t.dump,i),f&&(t.dump="&ref_"+d+t.dump)):(iY(t,e,t.dump),f&&(t.dump="&ref_"+d+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&tY(t,t.dump,e,o,c);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new _r("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(l=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?l="!"+l:l.slice(0,18)==="tag:yaml.org,2002:"?l="!!"+l.slice(18):l="!<"+l+">",t.dump=l+" "+t.dump)}return!0}function aY(t,e){var r=[],n=[],i,o;for(bC(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function bC(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)bC(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)bC(t[n[i]],e,r)}function cY(t,e){e=e||{};var r=new J5(e);r.noRefs||aY(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Mi(r,0,n,!0,!0)?r.dump+`
`:""}var lY=cY,uY={dump:lY};function EC(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var xr=zR.load,Oge=zR.loadAll,Nge=uY.dump;var Lge=EC("safeLoad","load"),Fge=EC("safeLoadAll","loadAll"),Mge=EC("safeDump","dump");var _h=K(require("path"));var xC=K(require("path")),gO=K(require("os"));var pO=K(require("crypto"));var hO=K(require("util"));var Fn={async readDocument(t){switch(t.scheme){case"file":try{return(await Oe(t.fsPath)).toString()}catch(e){if(e&&e.code==="ENOENT")return;throw e}default:throw new Error(`Unsupported scheme: ${t.toString()}`)}},async applyEdits(t,e,r){switch(t.scheme){case"file":let n=St(r,e);await hl(t.fsPath,n);break;default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}},Ch=class{constructor(e){this.fileHost=e}async readDocument(e){switch(e.scheme){case Ch.scheme:try{return(await this.fileHost.readFile(Ee(e,this.fileHost.platform))).toString()}catch{return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,r,n){switch(e.scheme){case Ch.scheme:let i=St(n,r);await this.fileHost.writeFile(Ee(e,this.fileHost.platform),Buffer.from(i));break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},wt=Ch;wt.scheme="vscode-fileHost";var Vs=class{constructor(e){this.shellServer=e}async readDocument(e){switch(e.scheme){case Vs.scheme:try{let{stdout:r}=await this.shellServer.exec(`cat ${e.path}`);return r}catch{return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,r,n){switch(e.scheme){case Vs.scheme:try{if(!Vs.nonce){let s=await(0,hO.promisify)(pO.randomBytes)(20);Vs.nonce=s.toString("hex")}let i=St(n,r),o=`EOF-${Vs.nonce}`;await this.shellServer.exec(`cat <<'${o}' >${e.path}
${i}
${o}
`)}catch(i){console.log(i)}break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},Hs=Vs;Hs.scheme="vscode-remote";var mO=class{constructor(e){this.documents=e}async readDocument(e){let r=this.documents[e.scheme];if(!r)throw new Error(`Unsupported scheme: ${e.toString()}`);return r.readDocument(e)}async applyEdits(e,r,n){let i=this.documents[e.scheme];if(!i)throw new Error(`Unsupported scheme: ${e.toString()}`);return i.applyEdits(e,r,n)}};function zt(t,e){let r={file:Fn,[wt.scheme]:new wt(t)};return e&&(r[Hs.scheme]=new Hs(e)),new mO(r)}var _C=new Map;async function SC(t,e){let r=t.toString(),n=_C.get(r);if(n||_C.set(r,n=[]),n.push(e),n.length===1){for(;n.length;)await n[0](),n.shift();_C.delete(r)}}var To;(function(s){s[s.Slash=47]="Slash",s[s.Colon=58]="Colon",s[s.A=65]="A",s[s.Z=90]="Z",s[s.a=97]="a",s[s.z=122]="z"})(To||(To={}));function Ee(t,e){let r;return t.authority&&t.path.length>1&&(t.scheme==="file"||t.scheme===wt.scheme)?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,e==="win32"&&(r=r.replace(/\//g,"\\")),r}function hc(t,e){return[t.join(e,".devcontainer","devcontainer.json"),t.join(e,".devcontainer.json")]}async function bh(t,e){let r=hc(t.path,e);for(let n of r)if(await t.isFile(n))return Ce.file(n).with({scheme:wt.scheme})}async function Eh(t){let e=hc(xC,t);for(let r of e)if(await ht(r))return r}var qi=`{${gO.EOL}}`;async function pn(t,e,r,n){e.scheme==="file"&&await Mr(xC.dirname(e.fsPath)),await t.applyEdits(e,r,n)}function mc(t){let e=xC.posix.dirname(t.path);return t.with({path:e})}function pu(t){if(!(t.extensions||t.settings||t.devPort!==void 0))return t;let e=V({},t),r=e.customizations||(e.customizations={}),n=r.vscode||(r.vscode={});return e.extensions&&(n.extensions=(n.extensions||[]).concat(e.extensions),delete e.extensions),e.settings&&(n.settings=V(V({},e.settings),n.settings||{}),delete e.settings),e.devPort!==void 0&&n.devPort===void 0&&(n.devPort=e.devPort,delete e.devPort),e}function Ws(t,e,r){return $i(t,e.configFilePath,r)}function $i(t,e,r){let n=mc(e);return e.with({path:_h.posix.resolve(n.path,t.platform==="win32"&&e.scheme!==Hs.scheme?(_h.win32.isAbsolute(r)?"/":"")+r.replace(/\\/g,"/"):r)})}function mt(t){return"dockerFile"in t||"build"in t&&"dockerfile"in t.build}function Ao(t){return t&&(mt(t)||"image"in t||"dockerComposeFile"in t)}function hr(t,e){return Ws(t,e,dY(e))}function dY(t){return"dockerFile"in t?t.dockerFile:t.build.dockerfile}async function qt(t,e,r,n){if(Array.isArray(e.dockerComposeFile)){if(e.dockerComposeFile.length)return e.dockerComposeFile.map(i=>Ee(Ws(t,e,i),t.platform))}else if(typeof e.dockerComposeFile=="string")return[Ee(Ws(t,e,e.dockerComposeFile),t.platform)];if(n){let i=r==null?void 0:r.COMPOSE_FILE;if(i)return i.split(t.path.delimiter).map(a=>t.path.resolve(n,a));try{let a=t.path.join(n,".env"),c=await t.readFile(a),l=/^COMPOSE_FILE=(.+)$/m.exec(c.toString()),u=l&&l[1].trim();if(u)return u.split(t.path.delimiter).map(d=>t.path.resolve(n,d))}catch(a){if(!(a&&(a.code==="ENOENT"||a.code==="EISDIR")))throw a}let o=[t.path.resolve(n,"docker-compose.yml")],s=t.path.resolve(n,"docker-compose.override.yml");return await t.isFile(s)&&o.push(s),o}return[]}function fY(){return{contentHashes:{}}}async function yO(t,e,r){let n=t.configurationTracking,i=n.getConfigurationState();if(i){let o=i.contentHashes,s=Object.keys(o),c=(await PC(t,e,r)).contentHashes,l=Object.keys(c),u=new Set(l);s.forEach(p=>u.delete(p));let d=new Set(s);l.forEach(p=>d.delete(p));let f=[];for(let p of s)p in c&&c[p]!==o[p]&&f.push(p);if(u.size||d.size||f.length){let p=await PC(t,e,r);(async()=>{await n.containerOutdated([...u,...d,...f].sort())==="ignore"&&await t.configurationTracking.updateConfigurationState(p)})().catch(console.error)}}else await wO(t,e,r)}async function Sh(t,e,r){let n="Updating configuration state",i=t.common.output.start(n);await wO(t,e,r),t.common.output.stop(n,i)}async function wO(t,e,r){let n=await PC(t,e,r);await t.configurationTracking.updateConfigurationState(n)}async function PC(t,e,r){let n=fY();xh(n,hu.posix.basename(r.configFilePath.path),JSON.stringify(ae(V({},r),{forwardPorts:void 0,configFilePath:void 0,postStartCommand:void 0,postAttachCommand:void 0})));let i=mc(r.configFilePath).path;if(mt(r)){let o=hr(t.common.cliHost,r),s=await e.readDocument(o);s!==void 0&&xh(n,hu.posix.relative(i,o.path),s)}if("dockerComposeFile"in r){let o=await qt(t.common.cliHost,r,t.common.cliHost.env,t.common.cliHost.cwd),s=await Promise.all(o.map(async a=>{let c=Ce.file(a).with({scheme:wt.scheme});return{uri:c,content:await e.readDocument(c)}}));for(let{uri:a,content:c}of s)c!==void 0&&xh(n,hu.posix.relative(i,a.path),c);for(let a=s.length-1;a>=0;a--){let{uri:c,content:l}=s[a];if(l){let u=xr(l),d=u&&u.services,f=d&&d[r.service],p=f&&f.build,h=p&&(typeof p=="string"?p:p.context);if(h){let m=$i(t.common.cliHost,c,h),g=CO(m,p.dockerfile||"Dockerfile"),v=await e.readDocument(g);v!==void 0&&xh(n,hu.posix.relative(i,g.path),v)}if(f&&(f.image||f.build))break}}}return n}function xh(t,e,r){let n=vO.createHash("sha256").update(r).digest("hex");t.contentHashes[e]=n}var qn=K(require("path")),XL=K(require("crypto"));var jt=K(require("path"));var PO=K(require("net")),DC=K(require("path"));var kC=K(require("path")),IC=K(require("http")),bO=K(require("os")),EO=K(require("crypto"));async function _O(t,e){let r=await TC(t),n=new SO(r,e);return n.listen(),n}var SO=class{constructor(e,r){this.ipcHandlePath=e;this.server=IC.createServer((n,i)=>{Promise.resolve(r(n,i)).catch(o=>console.error(o&&o.message||o))}),this.server.on("error",n=>console.error(n))}listen(){this.server.listen(this.ipcHandlePath)}dispose(){this.server.close()}};async function xO(t){return new Promise((e,r)=>{let n=[];t.setEncoding("utf8"),t.on("data",i=>n.push(i)),t.on("error",i=>r(i)),t.on("end",()=>{let i=JSON.parse(n.join(""));e(i)})})}async function pY(t){return new Promise((e,r)=>{EO.randomBytes(t,(n,i)=>{n?r(n):e(i)})})}async function TC(t){let r=(await pY(20)).toString("hex"),n=`${t}-${r}`;return process.platform==="win32"?`\\\\.\\pipe\\${n}-sock`:process.env.XDG_RUNTIME_DIR?kC.join(process.env.XDG_RUNTIME_DIR,`${n}.sock`):kC.join(bO.tmpdir(),`${n}.sock`)}var AC=class{constructor(){this.messages=[]}push(e){this.messages.push(e),this.dequeueRequest&&(this.dequeueRequest.resolve(this.messages),this.dequeueRequest=void 0,this.messages=[])}async dequeue(e){if(this.messages.length){let r=this.messages;return this.messages=[],r}return this.dequeueRequest&&this.dequeueRequest.resolve([]),new Promise((r,n)=>{this.dequeueRequest={resolve:r,reject:n},typeof e=="number"&&setTimeout(n,e)})}};async function ai(t,e,r){let n=await TC("ssh-askpass");return await new Promise((i,o)=>{PO.createServer(s=>{s.setEncoding("utf8");let a="";s.on("data",async c=>{if(a+=c,a.endsWith(`
`))try{r.write(`SSH askpass request: ${a}`,se.Trace);let l=await e(JSON.parse(a));s.write(l,u=>{u&&console.error(u)}),s.end()}catch(l){console.error(l)}}),s.on("error",c=>console.error(c))}).on("error",s=>{o(s)}).listen(n,()=>{i()})}),{DISPLAY:process.env.DISPLAY||"1",ELECTRON_RUN_AS_NODE:"1",SSH_ASKPASS:DC.join(t,"scripts",`ssh-askpass.${process.platform==="win32"?"bat":"sh"}`),VSCODE_SSH_ASKPASS_NODE:process.execPath,VSCODE_SSH_ASKPASS_EXTRA_ARGS:process.versions.electron?"--ms-enable-electron-run-as-node":"",VSCODE_SSH_ASKPASS_MAIN:DC.join(t,"dist","common","sshAskpass.js"),VSCODE_SSH_ASKPASS_HANDLE:n}}var hY=0;function Ot(t){return t.VSCODE_SSH_ASKPASS_HANDLE?{VSCODE_SSH_ASKPASS_COUNTER:String(++hY)}:{}}async function Pr(t,e){return(await Do(t,[e]))[0]}async function Do(t,e){let r=await kh(t,"container",e);for(let n of r){n.Ports=[];let i=n.NetworkSettings.Ports;for(let o in i){let[s,a]=o.split("/");for(let c of i[o]||[]){let{HostIp:l,HostPort:u}=c;n.Ports.push({IP:l,PrivatePort:parseInt(s),PublicPort:parseInt(u),Type:a})}}}return r}async function gc(t,e){return(await kh(t,"image",[e]))[0]}async function Ph(t,e){return(await kh(t,"volume",[e]))[0]}async function mu(t,e){return kh(t,"volume",e)}async function kh(t,e,r){if(!r.length)return[];let n=vu(t),i=await Se(ae(V({},n),{args:(n.args||[]).concat(["inspect","--type",e,...r])}));try{return JSON.parse(i.stdout.toString())}catch(o){throw console.error({stdout:i.stdout.toString(),stderr:i.stderr.toString()}),o}}async function ji(t,e=!1,r=[]){let n=[];e&&n.push("-a");for(let o of r)n.push("--filter",`label=${o}`);return(await Ke(t,"ps","-q",...n)).stdout.toString().split(/\r?\n/).filter(o=>!!o)}async function ci(t,e=[]){let r=[];for(let i of e)r.push("--filter",`label=${i}`);return(await Ke(t,"volume","ls","-q",...r)).stdout.toString().split(/\r?\n/).filter(i=>!!i)}async function RC(t){return(await Ke(t,"volume","ls","-q","-f","dangling=true")).stdout.toString().split(/\r?\n/).filter(r=>!!r)}async function kO(t){return(await Ke(t,"volume","prune","-f")).stdout.toString()}async function Ih(t,e,r){let n=[];for(let i of r||[])n.push("--label",i);await Ke(t,"volume","create",...n,e)}async function Th(t,e){let{exec:r,cmd:n,args:i,env:o,output:s}=vu(t),a=[];for(let f in e)for(let p of e[f])a.push("--filter",`${f}=${p}`);let c=await NC(t)?"json":"{{json .}}",l=(i||[]).concat(["events","--format",c,...a]),u=await r({cmd:n,args:l,env:o,output:s}),d=[];return u.stderr.on("data",f=>d.push(f)),u.exit.then(({code:f,signal:p})=>{d.length&&s.write(Ne(Buffer.concat(d).toString())),(f||p&&p!=="SIGKILL")&&s.write(Ne(`Docker events terminated (code: ${f}, signal: ${p}).`))},f=>{s.write(Ne(f&&(f.stack||f.message)))}),u}async function Ke(t,...e){let r=vu(t);return Se(ae(V({},r),{args:(r.args||[]).concat(e)}))}async function OC(t){var e;try{let{stdout:r}=await Ke(t,"context","ls","--format","{{json .}}"),n=`[${r.toString().trim().split(/\r?\n/).join(",")}]`;return(e=JSON.parse(n).find(s=>s.Current))==null?void 0:e.Name}catch{return}}async function NC(t){if(("cliHost"in t?t.cliHost:t.common.cliHost).platform!=="linux")return!1;try{let{stdout:r}=await Ke(t,"-v");return r.toString().toLowerCase().indexOf("podman")!==-1}catch{return!1}}async function Ah(t,...e){let r=yu(t);return Co(ae(V({},r),{args:(r.args||[]).concat(e)}))}async function Gs(t,...e){let r=vu(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return Se(ae(V({},r),{args:(r.args||[]).concat(e)}))}async function IO(t,...e){let r=yu(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return Co(ae(V({},r),{args:(r.args||[]).concat(e)}))}function vc(t,e,r){return async function(n){let{exec:i,cmd:o,args:s,env:a}=vu(t),{argsPrefix:c,args:l}=AO(e,r,n,!1);return i({cmd:o,args:(s||[]).concat(l),env:a,output:TO(n.output,o,c)})}}async function gu(t,e,r,n){if(!await n("node-pty"))throw new Error("Missing node-pty");return async function(o){let{ptyExec:s,cmd:a,args:c,env:l}=yu(t),{argsPrefix:u,args:d}=AO(e,r,o,!0);return s({cmd:a,args:(c||[]).concat(d),env:l,output:TO(o.output,a,u)})}}function TO(t,e,r){return mY(t,`Run: ${e} ${(r||[]).join(" ").replace(/\n.*/g,"")}`,"Run in container:")}function mY(t,e,r){let n=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");return ir(ae(V({},t),{get dimensions(){return t.dimensions},event:o=>t.event("text"in o?ae(V({},o),{text:o.text.replace(n,r)}):o)}))}function AO(t,e,r,n){let{env:i,cwd:o,cmd:s,args:a}=r,c=["exec","-i"];n&&c.push("-t"),e&&c.push("-u",e),i&&Object.keys(i).forEach(u=>c.push("-e",`${u}=${i[u]}`)),o&&c.push("-w",o),c.push(t);let l=c.slice();return c.push(s),a&&c.push(...a),{argsPrefix:l,args:c}}function vu(t,e){return"dockerEnv"in t?{exec:t.common.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:V(V({},t.dockerEnv),Ot(t.dockerEnv)),output:t.common.output}:"cliHost"in t?{exec:t.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:V(V({},t.env),Ot(t.env)),output:t.output}:ae(V({},t),{env:V(V({},t.env),Ot(t.env))})}function yu(t,e){return"dockerEnv"in t?{ptyExec:t.common.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:V(V({},t.dockerEnv),Ot(t.dockerEnv)),output:t.common.output}:"cliHost"in t?{ptyExec:t.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:V(V({},t.env),Ot(t.env)),output:t.output}:ae(V({},t),{env:V(V({},t.env),Ot(t.env))})}function LC(t){return t.toLowerCase().replace(/[^a-z0-9\._-]+/g,"").replace(/(\.[\._-]|_[\.-]|__[\._-]|-+[\._])[\._-]*/g,(e,r)=>r.substr(0,r.length-1))}var Vh=K(require("path")),PL=K(_L()),kL=K(require("url")),bJ=K(Ba());var SL=K(Ga()),xL=K(require("url"));function Du(t,e){return new Promise((r,n)=>{let i=new xL.URL(t.url),o={hostname:i.hostname,port:i.port,path:i.pathname+i.search,method:t.type,headers:t.headers},s=SL.https.request(o,a=>{if(a.statusCode<200||a.statusCode>299)n(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`)),e&&e.write(`HTTP request failed with status code ${a.statusCode}: : ${a.statusMessage}`,se.Error);else{a.on("error",n);let c=[];a.on("data",l=>c.push(l)),a.on("end",()=>r(Buffer.concat(c)))}});s.on("error",n),t.data&&s.write(t.data),s.end()})}var IL="devcontainer-features.tgz";function Wh(t){return t?{allFeatures:t.featureSets.map(r=>r.features).flat()}:void 0}function Qs(t){let e=typeof t=="string"?Vh.join(t,"dist"):t.distFolder;return Vh.join(e,"node_modules","vscode-dev-containers","container-features")}function Gh(t){let{type:e}=t;switch(e){case"local-cache":return"local-cache";case"direct-tarball":return Buffer.from(t.tarballUri).toString("base64");case"github-repo":return`github-${t.owner}-${t.repo}-${t.isLatest?"latest":t.tag}`;case"file-path":return Buffer.from(t.filePath).toString("base64")}}function KC(t){if(!t)return"n/a";let{type:e}=t;switch(e){case"local-cache":return"(cache)";case"direct-tarball":return"(tarball)";case"github-repo":return`${t.owner}/${t.repo}`;case"file-path":return"(file-path)"}}function YC(t,e){let r=new RegExp("^[a-zA-Z0-9_-]*$");if(!t.includes("/"))return e.write(`[${t}] - No slash, must be locally cached feature.`,se.Trace),{id:t,sourceInformation:{type:"local-cache"}};if(t.startsWith("http://")||t.startsWith("https://")){e.write(`[${t}] - Direct URI`,se.Trace),t=t.replace(/\/+$/,"");let d=t.lastIndexOf("#"),f=t.substring(d+1);if(f===""||!r.test(f)){e.write(`Parse error. Specify a feature id with alphanumeric, dash, or underscore characters. Provided: ${f}.`,se.Error);return}let p=new kL.URL(t.substring(0,d)).toString();return e.write(`[${t}] - uri: ${p} , id: ${f}`,se.Trace),{id:f,sourceInformation:{type:"direct-tarball",tarballUri:p}}}if(t.startsWith("/")||t.startsWith("./")||t.startsWith("../"))return;let n="latest",i=t.split("@");if(i.length>2){e.write("Parse error. Use the '@' symbol only to designate a version tag.",se.Error);return}i.length===2&&(e.write(`[${t}] has version ${i[1]}`,se.Trace),n=i[1]);let s=i[0].split("/");if(s.length!==3||s.some(d=>d==="")||!r.test(s[2])){e.write("Invalid parse for GitHub/registry feature identifier. Follow format: '<publisher>/<feature-set>/<feature>'",se.Error);return}let a=s[0],c=s[1],l=s[2],u=JC({owner:a,repo:c,tag:n});return{id:l,sourceInformation:u}}function JC(t){let{owner:e,repo:r,tag:n}=t;return n==="latest"?{type:"github-repo",apiUri:`https://api.github.com/repos/${e}/${r}/releases/latest`,unauthenticatedUri:`https://github.com/${e}/${r}/releases/latest/download/${IL}`,owner:e,repo:r,isLatest:!0}:{type:"github-repo",apiUri:`https://api.github.com/repos/${e}/${r}/releases/tags/${n}`,unauthenticatedUri:`https://github.com/${e}/${r}/releases/download/${n}/${IL}`,owner:e,repo:r,tag:n,isLatest:!1}}async function EJ(t,e){if(t.length===0){e.write("Parsed featureSet is empty.",se.Error);return}let r=Ve(t.toString());if(!(r==null?void 0:r.features)||r.features.length===0){e.write("Parsed featureSet contains no features.",se.Error);return}return e.write(`Loaded devcontainer-features.json declares ${r.features.length} features and ${r.sourceInformation?"contains":"does not contain"} explicit source info.`,se.Trace),_J(r)}async function QC(t,e){let r=await Oe(Vh.join(t,"devcontainer-features.json"));return EJ(r,e)}function _J(t){return t.features.find(e=>e.extensions||e.settings)?ae(V({},t),{features:t.features.map(e=>{if(!(e.extensions||e.settings))return e;let r=V({},e),n=r.customizations||(r.customizations={}),i=n.vscode||(n.vscode={});return r.extensions&&(i.extensions=(i.extensions||[]).concat(r.extensions),delete r.extensions),r.settings&&(i.settings=V(V({},r.settings),i.settings||{}),delete r.settings),r})}):t}var XC=(t,e)=>`${t}-${Gh(e)}`;async function ZC(t,e,r,n){var d;let{output:i}=t,o=await n(),s=o["com.visualstudio.code.devcontainers.id"],a=o.version,c=e.features||{},l={};for(let f of Object.keys(c)){let{id:p,sourceInformation:h}=(d=YC(f,i))!=null?d:{};if(p&&h){let m=XC(p,h);l[m]=c[f]}else{i.write(`Failed to read user declared feature ${f}. Skipping.`,se.Error);continue}}let u={};for(let f of r.featureSets)for(let p of f.features){SJ(p);let h=XC(p.id,f.sourceInformation);s&&(p.exclude||[]).some(m=>TL(m,s,a))?p.included=!1:"include"in p?p.included=!!s&&(p.include||[]).some(m=>TL(m,s,a)):p.included=!0,u[h]=u[h]||p.included,p.value=l[h]||!1}t.output.write(`Feature configuration:
`+JSON.stringify(ae(V({},r),{imageDetails:void 0}),void 0,"  "),se.Trace);for(let f of r.featureSets)f.features=f.features.filter(p=>{let h=XC(p.id,f.sourceInformation);return h in u&&p.included===u[h]?(delete u[p.id],!0):!1});return r}function SJ(t){if(t.values){let e=t.options||(t.options={});e.version={type:"string",[t.customValues?"proposals":"enum"]:t.values,default:t.values[0],description:t.hint}}delete t.type,delete t.values,delete t.customValues,delete t.hint}function TL(t,e,r){let n=t.indexOf("@"),[i,o]=n!==-1?[t.slice(0,n),t.slice(n+1)]:[t,void 0];return e===i&&(!o||!r||PL.satisfies(r,o))}function Hi(t){var e;return((e=t.options)==null?void 0:e.version)?"version":void 0}function Ru(t){var r,n;let e=Hi(t);if(!e)return!!t.value;if(typeof t.value=="object"){let i=t.value[e];return i===void 0&&t.options?(r=t.options[e])==null?void 0:r.default:i}return t.value===void 0&&t.options?(n=t.options[e])==null?void 0:n.default:t.value}function AL(t){var r;let e=Hi(t);return e?t.options&&((r=t.options[e])==null?void 0:r.default):!0}var eb="com.docker.compose.project",DL="com.docker.compose.service";async function RL(t,e,r,n,i,o,s,a,c,l,u,d,f){return xJ(t,e,r,n,i,o,OL(n),s,a,c,l,u,d,f)}async function xJ(t,e,r,n,i,o,s,a,c,l,u,d,f,p){var v,w;let{common:h}=t,{cliHost:m}=e,g;try{let b=await qt(m,n,m.env,m.cwd),C=m.path.join(m.cwd,".env"),S=Array.isArray(n.dockerComposeFile)&&n.dockerComposeFile.length===0&&await m.isFile(C)?C:void 0,P=await Ou(e,r,b),_=!c,k,T=async()=>k||(k=(async()=>{let z=V(V({},e.env),Ot(e.env)),ie={cliHost:m,env:z,extensionPath:h.extensionPath,appRoot:h.appRoot,package:h.package,output:h.postCreate.output},te=await Jh(ie,o,f,h.getLogLevel(),p,h.cliMode);return Wh(te.featuresConfiguration)})());g=await _c(t,a.Id,s,n.remoteUser),u&&c&&g.user!=="root"&&(g.launchRootShellServer?await uh(g,g.launchRootShellServer,s,n.configFilePath.path):h.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."));let A=zt(m,g.shellServer);_||await Sh(t,A,n);let M={cwd:i,dockerCLI:t.dockerCLI,dockerComposeCLI:await t.dockerComposeCLI(),env:h.env,containerId:a.Id,user:g.user,sessionId:h.sessionId,shutdownAction:n.shutdownAction,projectName:P,composeFiles:b,envFile:S,buildContainerRunArgs:l,service:n.service,runServices:n.runServices,logLevel:h.getLogLevel(),delay:1e4},{shutdownArgs:j,doneWithDocuments:J}=await Kh(t,A,"dockerCompose",M,_?n:void 0);h.backgroundTasks.push(J);let Y=((w=(v=n.customizations)==null?void 0:v.vscode)==null?void 0:w.devPort)||Po,{hostOrContainerPort:oe,hostPortServer:re,connectionToken:F,webConnectionToken:L,remoteEnv:q,serverDownloaded:W}=await lh(h,g,n,T,Y,Yh(t,e,o,a.Id,f,p));return j.hostPortServer=re,bc(h,g,oe,F,L,a,r),{params:h,properties:g,config:n,resolvedAuthority:{host:Oo,port:oe,connectionToken:F,extensionHostEnv:q},webConnectionToken:L,tunnelInformation:h.isLocalContainer?Ec(a):{},dockerParams:t,dockerContainerId:a.Id,serverDownloaded:W}}catch(b){let C=b instanceof ye?b:new ye({description:"An error occurred setting up the container.",originalError:b});throw a&&(C.manageContainer=!0,C.params=t.common,C.containerId=a.Id,C.dockerParams=t),g&&(C.containerProperties=g),C.config=n,C}}function OL(t){return t.workspaceFolder||"/"}async function NL(t,e,r){if(Wt(t)){let n=Eo(t),i=[];for(let o=0;o<e.length;o++){let s=await Li(n,e[o],r);i.push(s)}return i}return e}async function LL(t,e,r){try{let n=[].concat(...e.map(o=>["-f",o]));r&&n.push("--env-file",r);let i=await t.dockerComposeCLI();($s(i.version)||[])[0]>=2&&n.push("--profile","*");try{let{stdout:o}=await Gs(t,...n,"config"),s=o.toString();return t.output.write(s),xr(s)||{}}catch(o){if(!Buffer.isBuffer(o==null?void 0:o.stderr)||(o==null?void 0:o.stderr.toString().indexOf("UnicodeEncodeError"))===-1)throw o;if(t.cliHost.platform==="win32"){let{cmdOutput:c}=await IO(ae(V({},t),{output:ir({event:t.output.event,dimensions:{columns:999999,rows:1}},se.Info)}),...n,"config");return xr(c.replace(yo,""))||{}}let{stdout:s}=await Gs(ae(V({},t),{env:ae(V({},t.env),{LANG:"en_US.UTF-8",LC_CTYPE:"en_US.UTF-8"})}),...n,"config"),a=s.toString();return t.output.write(a),xr(a)||{}}}catch(n){throw n instanceof ye?n:new ye({description:"An error occurred retrieving the Docker Compose configuration.",originalError:n,data:{fileWithError:e[0]}})}}async function FL(t,e,r){let n=await ji(t,!0,[`${eb}=${e}`,`${DL}=${r}`]);return n&&n[0]}async function ML(t,e,r){var n;return(n=t.find(i=>{let o=i.Config.Labels||{};return o[eb]===e&&o[DL]===r}))==null?void 0:n.Id}async function Ou(t,e,r){let{cliHost:n}="cliHost"in t?t:t.common,i=await PJ(t),o=zh(n.env.COMPOSE_PROJECT_NAME||"",i);if(o)return o;try{let c=n.path.join(n.cwd,".env"),l=await n.readFile(c),u=/^COMPOSE_PROJECT_NAME=(.+)$/m.exec(l.toString()),d=u&&u[1].trim(),f=zh(d||"",i);if(f)return f}catch(c){if(!(c&&(c.code==="ENOENT"||c.code==="EISDIR")))throw c}let s=e.configFolderPath,a=r[0]?n.path.dirname(r[0]):n.cwd;return AD(n.platform,a,n.path.join(s,".devcontainer"))?zh(`${n.path.basename(s)}_devcontainer`,i):zh(n.path.basename(a),i)}function tb(t){let e=(t.Config.Labels||{})[eb];return e||void 0}function zh(t,e){return e?t.toLowerCase().replace(/[^-_a-z0-9]/g,""):t.toLowerCase().replace(/[^a-z0-9]/g,"")}async function PJ(t){try{let e=$s((await t.dockerComposeCLI()).version);return e?!sc(e,[1,21,0]):!0}catch{return!0}}function li(t,e,r){let n;return()=>n||(n=(async()=>{let i=!1,o;try{o=(await Gs(ae(V({},t),{cmd:r}),"version","--short")).stdout}catch(s){if((s==null?void 0:s.code)!=="ENOENT")throw s;o=(await Gs(ae(V({},t),{cmd:e}),"compose","version","--short")).stdout,i=!0}return{version:o.toString().trim(),cmd:i?e:r,args:i?["compose"]:[]}})())}var ui=K(require("url")),qL=K(require("https"));var rb;(function(e){e[e.CannotAccessRepository=2]="CannotAccessRepository"})(rb||(rb={}));function di(t){return t.toLowerCase().indexOf("github.com")>=0?DJ(t):t.toLowerCase().indexOf("visualstudio.com")>=0?TJ(t):t.toLowerCase().indexOf("dev.azure.com")>=0?IJ(t):t.toLowerCase().indexOf("gitlab.com")>=0?AJ(t):kJ(t)}function Vi(t){let e="owner",r="repository";return{repository:"unknown",repositoryUrl:t,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function kJ(t){var s;let e="unknown-owner",r,n=t,i;i=(s=ui.parse(t))==null?void 0:s.path;let o=i==null?void 0:i.split("/");return!o||o.length<1?Vi(t):(r=o[o.length-1],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),{repository:"unknown",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`})}function IJ(t){var o,s;let e,r,n=t,i;if(Qh(t)){let a=`http://${t}`;i=(o=ui.parse(a))==null?void 0:o.path;let c=i==null?void 0:i.split("/");if(!c||c.length<5)return Vi(t);e=c[3],r=c[4]}else{i=(s=ui.parse(t))==null?void 0:s.path;let a=i==null?void 0:i.split("/");if(!a||a.length<5)return Vi(t);e=a[2],r=a[4],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf(".")))}return{repository:"ado",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function TJ(t){var o,s;let e,r,n=t,i;if(Qh(t)){let a=`http://${t}`;i=(o=ui.parse(a))==null?void 0:o.path;let c=i==null?void 0:i.split("/");if(!c||c.length<5)return Vi(t);e=c[3],r=c[4]}else{i=(s=ui.parse(t))==null?void 0:s.path;let a=i==null?void 0:i.split("/");if(!a||a.length<5)return Vi(t);e=a[2],r=a[4],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf(".")))}return{repository:"vso",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function AJ(t){var o,s;let e,r,n=t,i;if(Qh(t)){let a=`http://${t}`;i=(o=ui.parse(a))==null?void 0:o.path,i&&(i=i.replace("/:","/"));let c=i==null?void 0:i.split("/");if(!c||c.length<3)return Vi(t);e=c[1],r=c[2]}else{i=(s=ui.parse(t))==null?void 0:s.path;let a=i==null?void 0:i.split("/");if(!a||a.length<2)return Vi(t);e=a[1],r=a[2]}return r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),{repository:"gitlab",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function DJ(t){var c,l;let e,r,n=t,i,o,s;if(Qh(t)){let u=`http://${t}`;s=(c=ui.parse(u))==null?void 0:c.path,s&&(s=s.replace("/:","/"))}else s=(l=ui.parse(t))==null?void 0:l.path;let a=s==null?void 0:s.split("/");if(!a||a.length<=2)return Vi(t);if(e=a[1],r=a[2],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),a.length>=3){if(a[3]==="commit"||a[3]==="tree"){let u=t.match(/\/tree\/|\/commit\//);u&&u.index&&(n=t.substring(0,u.index),i=t.substring(u.index+u[0].length))}if(a[3]==="pull"){o=a[4];let u=t.match(/\/pull\//);u&&u.index&&(n=t.substring(0,u.index))}}return{repository:"github",repositoryUrl:n,ref:i,commit:a[3]==="commit",repositoryOwner:e,repositoryName:r,pullRequestId:o,fullRepositoryName:`${e}/${r}`}}function Qh(t){return t=t.toLowerCase(),t.indexOf("://")<0?t.indexOf("@")<t.indexOf(":"):!1}var Xh=class extends Error{constructor(e,r){super();this.code=e,this.description=r}},Zh=class{constructor(e){this.inputUrl=e,this.gitUrlInfo=di(this.inputUrl)}repositoryName(){return this.gitUrlInfo.repositoryName}repositoryOwner(){return this.gitUrlInfo.repositoryOwner}async postClone(e,r,n,i){}installExtension(){return null}},$L=class extends Zh{constructor(e){super(e)}async parseUrl(e){var o,s,a;let r=(o=this.gitUrlInfo)==null?void 0:o.repositoryOwner,n=(s=this.gitUrlInfo)==null?void 0:s.repositoryName,i=(a=this.gitUrlInfo)==null?void 0:a.pullRequestId;return this.getPullRequestInfo(e,r,n,i)}async getPullRequestInfo(e,r,n,i){var u,d,f,p,h,m,g,v,w,b,C;let o=await this.fetchPullRequestInfo(e,r,n,i),s=(d=(u=o.head)==null?void 0:u.repo)==null?void 0:d.clone_url,a=(p=(f=o.base)==null?void 0:f.repo)==null?void 0:p.clone_url;if(!a)throw new Xh(2,"Cannot access the head repository of the Pull Request.");let c=(h=o.head)==null?void 0:h.ref,l=((v=(g=(m=o.head)==null?void 0:m.repo)==null?void 0:g.owner)==null?void 0:v.login)===r?null:(C=(b=(w=o.head)==null?void 0:w.repo)==null?void 0:b.owner)==null?void 0:C.login;return{urlToClone:a,prRepositoryUrl:s,ref:c,sourceOwner:l}}async fetchPullRequestInfo(e,r,n,i){let o=`/repos/${r}/${n}/pulls/${i}`,s={"user-agent":"vscode-remote-containers"};e&&(s.authorization=`token ${e}`);let a={hostname:"api.github.com",port:443,path:o,method:"GET",headers:s};return new Promise((c,l)=>{let u="",d=qL.request(a,f=>{if(f.statusCode<200||f.statusCode>=300)return l(new Error(`Status Code: ${f.statusCode}`));f.on("data",p=>{u+=p}),f.on("end",()=>{let p=JSON.parse(u.toString());c(p)})});d.on("error",l),d.end()})}cloneOptions(e){return{url:e.urlToClone,fullClone:!0}}async postClone(e,r,n,i){if(e.sourceOwner){let l=e.prRepositoryUrl.replace(/\.[^/.]+$/,"");await Se({exec:r.exec,cmd:"git",args:["remote","add",e.sourceOwner,l],cwd:n,output:i}),await Se({exec:r.exec,cmd:"git",args:["fetch",e.sourceOwner,e.ref],cwd:n,output:i});try{await Se({exec:r.exec,cmd:"git",args:["checkout","-t",`${e.sourceOwner}/${e.ref}`],cwd:n,output:i})}catch(u){if(!(u.stderr&&u.stderr.startsWith(`fatal: A branch named '${e.ref}' already exists`)))throw u}await Se({exec:r.exec,cmd:"git",args:["config","--local",`remote.${e.sourceOwner}.github-pr-remote`,"true"],cwd:n,output:i})}else await Se({exec:r.exec,cmd:"git",args:["checkout",e.ref],cwd:n,output:i});let o=this.gitUrlInfo.repositoryOwner,s=this.gitUrlInfo.repositoryName,a=this.gitUrlInfo.pullRequestId,c=`${o}#${s}#${a}`;await Se({exec:r.exec,cmd:"git",args:["config","--local",`branch.${e.ref}.github-pr-owner-number`,c],cwd:n,output:i})}installExtension(){return"GitHub.vscode-pull-request-github"}},jL=class extends Zh{constructor(e){super(e)}async parseUrl(e){var r,n;return{urlToClone:(r=this.gitUrlInfo)==null?void 0:r.repositoryUrl,ref:(n=this.gitUrlInfo)==null?void 0:n.ref}}cloneOptions(e){let r=this.gitUrlInfo.commit;return{url:e.urlToClone,branch:!r&&e.ref||void 0,fullClone:r}}async postClone(e,r,n,i){this.gitUrlInfo.commit&&await Se({exec:r.exec,cmd:"git",args:["checkout",e.ref],cwd:n,output:i})}},nb=class extends Zh{constructor(e,r){super(e);this.branch=r}async parseUrl(e){return{urlToClone:this.inputUrl,ref:this.branch}}cloneOptions(e){return{url:e.urlToClone,branch:e.ref||void 0}}};function Sc(t,e){if(e)return new nb(t,e);let r=di(t);if(r.repository==="github"){if(r.pullRequestId)return new $L(t);if(r.ref)return new jL(t)}return new nb(t)}var Nu=jt.join(__dirname,"..","node_modules","vscode-dev-containers","repository-containers");async function UL(t,e,r,n){if(e&&!/\/\.?devcontainer\.json$/.test(e.path))throw new Error(`Filename must be devcontainer.json or .devcontainer.json (${Ee(e,t.common.cliHost.platform)}).`);let i=t.parsedAuthority;if(!i||Yt(i))return RJ(t,i,e,r,n);if(yn(i))return i.inspectVolume?BL(t,i):OJ(t,i,e);if(Fu(i))return BL(t,i);throw new Error(`Unexpected authority: ${JSON.stringify(i)}`)}async function RJ(t,e,r,n,i){let{common:o,dockerCLI:s,dockerComposeCLI:a,dockerComposePath:c}=t,{cliHost:l,env:u,output:d}=o,f=l.cwd,p=t.originalCwd||f,h=e&&Ue(l.path,Vl(e.hostPath)?l.path.join(f,jt.basename(e.hostPath)):f),m;h&&(m=await LJ(t,h),m&&(o.backgroundTasks.push(m==null?void 0:m.gitUnshallow),await m.gitClone()));let g={cliHost:l,dockerCLI:s,dockerComposeCLI:a,dockerComposePath:c,env:u,output:d},v=i||[`${ub}=${p}`,`${em}=${o.product.quality}`];return ib(t,g,v,p,f,r,n,h,e==null?void 0:e.settings,[],o.cliMode?"never":"on")}async function OJ(t,e,r){let{repositoryPath:n,volumeName:i,folder:o}=e,s=vn(n);i=await GL(t,s,i);let{labels:a,remoteWorkspaceFolder:c}=zL(s,n,o,i),l=[...a,`${em}=${t.common.product.quality}`],{containerId:u,shellServer:d,config:f}=await s.cloneAndInitializeRepository(t,e,s,i,r),p=Ue(jt.posix,o?s.workspaceFolder(o):s.fullRepositoryName),h=[`type=volume,source=${i},target=${jt.posix.dirname(p.rootFolderPath)},external=true`],m=await KL(t,u,c),g={},{HOME:v,USERPROFILE:w}=t.common.env;v!==void 0&&(g.HOME=v),w!==void 0&&(g.USERPROFILE=w);let b=lb(s,i,o),C=m.cliHost,S,P=mt(f)||"image"in f;if(P||"dockerComposeFile"in f&&f.workspaceFolder){let _=P?ae(V({},f),{configFilePath:void 0,workspaceFolder:void 0,workspaceMount:""}):ae(V({},f),{configFilePath:void 0,workspaceFolder:p.rootFolderPath}),k=C.path.join(await C.tmpdir(),`devcontainer-${Br()}.json`),T=`EOF-${k}`,A=`${k}_${Date.now()}`;await d.exec(`cat <<'${T}' >${A}
${JSON.stringify(_)}
${T}
mv ${A} ${k}`),S=Ce.from({scheme:wt.scheme,path:k})}try{return await ib(t,m,l,t.common.cliHost.cwd,C.cwd,r,S,p,e.settings,h,"off",b,!0,void 0,g)}finally{Promise.all(t.common.backgroundTasks.filter(_=>typeof _!="function").map(_=>_.catch(()=>{}))).then(()=>Ke(t,"rm","-f",u))}}async function BL(t,e){let{common:r,dockerCLI:n,dockerComposeCLI:i,dockerComposePath:o}=t,{cliHost:s,env:a,output:c}=r,{volumeName:l}=e,u,d,f=Fu(e);f?(u=tm,d="Inspect Volume"):(u=vn(e.repositoryPath).volumeDestination,d="Recovery Container");let p=[`${db}=${l}`,`${em}=${r.product.quality}`],h=await WL(t),m=[`type=volume,source=${l},target=${u},external=true`],g={cliHost:s,dockerCLI:n,dockerComposeCLI:i,dockerComposePath:o,env:a,output:c},v=Ue(s.path,h);return ib(t,g,p,h,h,void 0,void 0,v,e.settings,m,"never",void 0,!f,d)}async function ib(t,e,r,n,i,o,s,a,c,l,u,d,f,p,h){let{common:m,userRepositoryConfigurationPaths:g}=t,{output:v,extensionPath:w,appRoot:b,postCreate:C}=m,{cliHost:S}=e;t.cacheMount==="bind"&&await Mr(m.localCacheFolder);let P=t.cacheMount==="volume"?[...l,"type=volume,source=vscode,target=/vscode,external=true"]:t.cacheMount==="bind"?[...l,`type=bind,source=${m.localCacheFolder},target=/vscode`]:l;if(t.cacheMount==="volume"){let q="vscode";(await ci(e)).indexOf(q)===-1&&await Ih(e,q)}let _=o||(a?await fi(S,a,g,!s,v):void 0);if((_==null?void 0:_.scheme)==="file"&&S.type!=="local"){let q=jt.dirname(_.fsPath),W=jt.basename(_.fsPath),z=W===".devcontainer.json"?q:jt.dirname(q),ie=S.path.join(await S.tmpdir(),`devcontainer-config-${Br()}`);await Xs(z,S,ie,v),_=Ce.from({scheme:wt.scheme,path:S.path.join(ie,...W===".devcontainer.json"?[W]:[jt.basename(q),W])})}typeof t.removeOnStartup=="string"&&await zr(t,t.removeOnStartup)&&await Ke(t,"rm","-f",t.removeOnStartup);let k=t.removeOnStartup===!0||!await JL(e,r),T=V(V(V({},h),e.env),Ot(e.env)),A={cliHost:S,env:T,extensionPath:w,appRoot:b,package:m.package,postCreate:C,output:m.postCreate.output},M=m.postCreate.output.dimensions||m.output.dimensions,j=await Mu(A,["up",...e.cliHost.type==="local"&&m.persistedFolder?["--user-data-folder",m.persistedFolder]:[],...e.dockerCLI!=="docker"?["--docker-path",e.dockerCLI]:[],...e.dockerComposePath!=="docker-compose"?["--docker-compose-path",e.dockerComposePath]:[],"--container-data-folder",dn(t.common.product.serverDataFolderName),"--container-system-data-folder",cc(t.common.product.serverDataFolderName),"--workspace-folder",i,...t.workspaceMountConsistencyDefault?["--workspace-mount-consistency",t.workspaceMountConsistencyDefault]:[],...[].concat(...r.map(q=>["--id-label",q])),"--log-level",vo(m.getLogLevel()),"--log-format","json",..._?["--config",Ee(_,S.platform)]:[],...s?["--override-config",Ee(s,S.platform)]:[],"--default-user-env-probe",m.defaultUserEnvProbe,...t.buildNoCache?["--build-no-cache"]:[],...t.removeOnStartup===!0?["--remove-existing-container"]:[],...t.expectExistingContainer?["--expect-existing-container"]:[],...[].concat(...P.map(q=>["--mount",q])),"--skip-post-create","--update-remote-user-uid-default",u,"--mount-workspace-git-root",String(!m.cliMode),...M?["--terminal-columns",String(M.columns),"--terminal-rows",String(M.rows)]:[]]);if((j==null?void 0:j.outcome)!=="success")throw new ye({description:`devcontainer command failed: ${j?JSON.stringify(j):"data missing"}`});let J=await zr(t,j.containerId);if(!J)return QL(m.output,"Dev container not found.");let Y=await ob(A,i,_,m.getLogLevel(),s,m.cliMode),oe=Y.configuration,re=xc(c),F=p||(oe.name?`Dev Container: ${oe.name}${re}`:`Dev Container${re}`);m.setWorkspaceName(F);let L;if(mt(oe)||"image"in oe)L=await YL(t,e,a,oe,Y.workspace,n,i,J,k,f,r,_,s);else if("dockerComposeFile"in oe){if(!a)throw new ye({description:"A Dev Container using Docker Compose requires a workspace folder."});L=await RL(t,e,a,oe,n,i,J,k,d,f,r,_,s)}else throw new ye({description:`Dev container config (${oe.configFilePath}) is missing one of "image", "dockerFile" or "dockerComposeFile" properties.`});return L}async function ob(t,e,r,n,i,o=!1){let{cliHost:s,output:a}=t,c=await Mu(t,["read-configuration","--workspace-folder",e,"--log-level",vo(n),"--log-format","json",...r?["--config",Ee(r,s.platform)]:[],...i?["--override-config",Ee(i,s.platform)]:[],"--mount-workspace-git-root",String(!o),...a.dimensions?["--terminal-columns",String(a.dimensions.columns),"--terminal-rows",String(a.dimensions.rows)]:[]]);return c.configuration.configFilePath=Ce.revive(c.configuration.configFilePath).with({scheme:s.type==="local"?"file":wt.scheme}),c}async function fi(t,e,r,n,i){let o=await sb(t,e,r,n,i);return o==null?void 0:o.uri}async function sb(t,e,r,n,i){let o=await sT(t,e,it),s=o&&await Lu(o,r);if(s)return{uri:s,location:"user"};let a=await bh(t,e.configFolderPath);if(a)return{uri:a,location:"workspace"};let c=o&&await Lu(o,[Nu]);if(c)return{uri:c,location:"builtin"};n&&i&&((o==null?void 0:o.length)?i.write(`No dev container config found. Additional locations checked:
${[...ab(o,r),...ab(o,[Nu])].map(l=>`- ${jt.join(l,".devcontainer","devcontainer.json")}`).join(`
`)}`):i.write("No dev container config found. No repository connection string found."))}async function Lu(t,e){let r=ab(t,e);for(let n of r){let i=await Eh(n);if(i)return Ce.file(i)}}function ab(t,e){let r=[],n=new Set(t.map(NJ).filter(i=>!!i));for(let i of n)for(let o of e){let s=jt.join(o,i);r.push(s)}return r}function HL(t,e,r){let n=t.path.relative(e.rootFolderPath,Ee(r,t.platform));return n&&!n.startsWith("..")&&!t.path.isAbsolute(n)}function VL(t){if(t.scheme!=="file")return;let e=jt.relative(Nu,t.fsPath);if(e&&!e.startsWith("..")&&!jt.isAbsolute(e))return e}function NJ(t){let e;if(t.startsWith("https://"))e=t.substr(8);else{let r=/[^@:]+@([^:]+):(.+)/.exec(t);if(r)e=`${r[1]}/${r[2]}`;else return}if(!(e.toLowerCase().startsWith("github.com")&&(e=(/^[^/]+\/[^/]+\/[^/]+/.exec(e)||[])[0],!e)))return e.endsWith(".git")&&(e=e.substr(0,e.length-4)),e}async function LJ(t,e){var p;let{common:r,gitClone:n}=t,{cliHost:i}=r;if(!n)return;let o=au(r),s=au(r),a=Sc(n.url,n.branch),c=await a.parseUrl(n.tokenEnvVar?i.env[n.tokenEnvVar]:void 0),l=a.cloneOptions(c),u=ae(V(V({},n),l),{env:V(V({},n.env),l.env)}),d=await Ip(r,r.cliHost,e.rootFolderPath,u,o.output,s.output),f=(p=d.gitClone)==null?void 0:p.then(()=>a.postClone(c,i,e.rootFolderPath,o.output));return{gitClone:async()=>{o.flush(),await f},gitUnshallow:async()=>{o.flush(),s.flush(),await d.gitUnshallow}}}function vn(t){return{repositoryPath:t,fullRepositoryName:rm(t),repositoryName:FJ(t),workspaceFolder:ZL,volumeDestination:fb(),oldVolumeName:MJ(t),alreadyCloned:!1,imageName:qJ(t),uniqueVolumeName:$J(t),getWorkspaceConfiguration:(e,r)=>jJ(e,r),getOldWorkspacePath:r1,cloneAndInitializeRepository:UJ,getConfigurationFromImage:t1,gitUrlHandler:Sc(t),gitUrlInfo:di(t)}}function rm(t){let e=di(t);return e==null?void 0:e.fullRepositoryName}function FJ(t){let e=di(t);return e==null?void 0:e.repositoryName}function fb(){return"/workspaces"}function MJ(t){let e=rm(t);return`vsc-${qn.posix.basename(e)}-${pb(t)}`}function qJ(t){let e=rm(t),r=pb(t),n=qn.posix.basename(e);return LC(`vsc-${n}-${r}`)}function $J(t){let e=di(t),r="";e&&e.repositoryName&&(r=e.repositoryName,e.ref?r=`${r}-${e.ref.replace(/\//g,"-")}`:e.pullRequestId&&(r=`${r}-pull-${e.pullRequestId}`));let n=pb(t);return`${r}-${n}`}function pb(t){return XL.createHash("md5").update(t).digest("hex")}function jJ(t,e){let r=ZL(t),n=`type=volume,src=${e},dst=${fb()}`;return{workspaceFolder:r,workspaceMount:n}}function ZL(t){return qn.posix.join(`${fb()}`,`${t}`)}async function UJ(t,{folder:e,cloneInfo:r},n,i,o){var u;await VJ(t);let{containerId:s,shellServer:a}=await BJ(t,n,i,e,o,t.configProvider,r),{config:c}=await t1(t,n,e,o,a),l=(u=n.gitUrlHandler)==null?void 0:u.installExtension();if(l){let d=c.customizations||(c.customizations={}),f=d.vscode||(d.vscode={}),p=f.extensions||(f.extensions=[]);p.includes(l)||p.push(l)}return{repository:n,volumeName:i,containerId:s,shellServer:a,config:c}}async function BJ(t,e,r,n,i,o,s){let{common:a}=t,{output:c,loadNativeModule:l}=a,u=e.fullRepositoryName,d,f,p,h;t.common.progress(or.CloningRepository);let m=lb(e,r,n,t.buildContainerRunArgs);n?(c.write(`Cloning Github repository: ${u} into ${e.workspaceFolder(n)}
\r`),d=`fatal: destination path '${e.workspaceFolder(n)}' already exists`,h=e.workspaceFolder(n),p=`Repository '${u}' was already cloned into '${e.workspaceFolder(n)}'.
\r`):(c.write(`Cloning Github repository: ${u} into volume ${r}
\r`),d=`fatal: destination path '${u}' already exists`,h=`${u}`,p=`Repository '${u}' was already cloned into volume.`);let g=e.gitUrlHandler;if(!g)throw new ye({description:"Could not analyze the URL."});s?f=g.cloneOptions(s):f={url:e.repositoryPath};let{stdout:v}=await Ke(t,...m),w=v.toString().trim(),b=vc(t,w,"root"),C=await Ni(b,c),S,P,_=Promise.resolve(),k;if(!a.cliMode){let j=await Ql(a,{remoteExec:b,user:"root",nodeExecutable:"node",shellServer:C});S=j.remoteContainersCLI,P=j.remoteEnv,_=j.ready,k=j.mrpcExec}let T=await gu(t,w,"root",l),A=_o("container",h,{},await k||b,T,()=>{throw new Error("not implemented")},void 0,c);try{a.cliMode||(t.common.isCopyGitConfigEnabled&&(await js(t.common,{homeFolder:"/root",shellServer:C},[".gitconfig"],"git"),await dh(t.common,{homeFolder:"/root",shellServer:C},{})),await lc({shellServer:C,nodeExecutable:"node"},S,c,"global"),await js(t.common,{homeFolder:"/root",shellServer:C},[".ssh","known_hosts"],"ssh"),await _);let j=au(a),J=await Ip(a,A,h,ae(V({},f),{env:V(V({},P),f.env)}),c,j.output);if(await J.gitClone,J.gitUnshallow&&(a.backgroundTasks.push(J.gitUnshallow.then(()=>{})),J.gitUnshallow.then(j.flush,j.flush)),J.gitClone&&s)try{await g.postClone(s,A,h,c)}catch{return hb(t,w,`Failed to checkout the repository ${s.urlToClone}.`)}}catch(j){let J=j&&(j.cmdOutput||j.stack||j.message)||String(j);if(J=J.replace(yo,""),J.replace(/[\r\n]+/gm,"").includes(d))c.write(p),e.alreadyCloned=!0;else return hb(t,w,`Git clone failed. ${J}`)}let{configRaw:M}=await e1(t,e,n,i,C);if(!Ao(M)&&o){c.write(`Repository ${u} has no development container files.
\r`);let j=!0;for(;j;){let J=await o.createConfiguration(h,A);if(J)j=!1;else if(J=await o.showError("You must select a container configuration since the repository does not contain a dev container configuration. Without a dev container configuration the container cannot be started.","Select Configuration"),J!=="Select Configuration")return hb(t,w,"Cancelled container configuration selection.")}}return{containerId:w,shellServer:C}}function lb(t,e,r,n=[]){return r?["run","-d","--mount",`type=volume,src=${e},dst=${t.volumeDestination}`,"-v","/var/run/docker.sock:/var/run/docker.sock",...n,`${mb}`,"sleep","infinity"]:["run","-d","--mount",`type=volume,src=${e},dst=${t.fullRepositoryName}`,"-v","/var/run/docker.sock:/var/run/docker.sock",...n,`${mb}`,"sleep","infinity"]}function hb(t,e,r){throw e&&Ke(t,"rm","-f",e),new ye({description:r})}async function e1(t,e,r,n,i){let o,s;if(r?s=e.workspaceFolder(r):s=`${r1(e.repositoryPath)}`,n)return o=(await i.exec(`cat ${n.path} 2>/dev/null`,{logOutput:!1})).stdout,{configRaw:o&&Ve(o),configFile:n,workspaceFolder:s};if(n=await Lu([e.repositoryPath],t.userRepositoryConfigurationPaths),n&&(o=(await Oe(n.fsPath)).toString()),!n)for(let a of hc(qn.posix,s))try{o=(await i.exec(`cat ${a} 2>/dev/null`,{logOutput:!1})).stdout,n=Ce.from({scheme:"vscode-remote",path:a});break}catch{}return n||(n=await Lu([e.repositoryPath],[Nu]),n&&(o=(await Oe(n.fsPath)).toString())),{configRaw:o&&Ve(o),configFile:n,workspaceFolder:s}}async function t1(t,e,r,n,i){let{configRaw:o,configFile:s,workspaceFolder:a}=await e1(t,e,r,n,i);if(!s||!o)throw new ye({description:"The repository does not have a 'devcontainer.json' configuration file."});let{common:c,configUpdater:l}=t,{cliHost:u,output:d}=c,f=pu(V({},o)),p=f;l&&(f.configFilePath=s,p=l(f),delete p.configFilePath);let h=rh({platform:u.platform,configFile:s,env:u.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:a},p);return h.configFilePath=s,("workspaceMount"in h||"workspaceFolder"in h)&&d.write("The options 'workspaceMount' or 'workspaceFolder' are ignored when cloning a repository into a volume."),{workspaceFolder:a,config:h}}function r1(t){return`/workspaces/${qn.posix.basename(rm(t))}`}var mb="vsc-volume-bootstrap";var gb="bootstrap.Dockerfile",HJ="volume.Dockerfile";async function VJ(t){let{common:e,development:r}=t,{cliHost:n,output:i}=e,o=e.package.version,s=n.path.join(await n.tmpdir(),"vsch","bootstrap-image",r?`${o}-dev-${Date.now()}`:o),a=n.path.join(s,gb),c=!await n.isFolder(s);if(!c&&!await n.isFile(a)){let u="Removing incomplete bootstrap-image folder.",d=i.start(u),f=`${s}-${Br()}`;await n.rename(s,f),await n.rm(f,{recursive:!0,force:!0}),c=!await n.isFolder(s),i.stop(u,d)}if(c){let u=`${s}-${Br()}`,d=n.path.join(u,".vscode-remote-containers","dist",`dev-containers-cli-${o}`);await n.mkdirp(n.path.join(d,"dist","spec-node")),await n.writeFile(n.path.join(u,gb),await Oe(qn.join(e.extensionPath,"scripts",gb))),await n.writeFile(n.path.join(d,"package.json"),await Oe(qn.join(e.extensionPath,"package.json"))),await n.writeFile(n.path.join(d,"dist","spec-node","devContainersSpecCLI.js"),await Oe(qn.join(e.extensionPath,"dist","spec-node","devContainersSpecCLI.js")));let f=Qs(e.extensionPath),p=n.path.join(d,"dist","node_modules","vscode-dev-containers","container-features");await Xs(f,n,p,i),await n.rename(u,s)}await Ah(t,...["build","-f",a,"-t",mb,s])}async function WL(t){let{common:e,development:r}=t,{cliHost:n,output:i}=e,o=e.package.version,s=n.path.join(await n.tmpdir(),"vsch","inspect-volume",r?`${o}-dev-${Date.now()}`:o),a=n.path.join(s,HJ),c=!await n.isFolder(s);if(!c&&!await n.isFile(a)){let l="Removing incomplete inspect-volume folder.",u=i.start(l),d=`${s}-${Br()}`;await n.rename(s,d),await n.rm(d,{recursive:!0,force:!0}),c=!await n.isFolder(s),i.stop(l,u)}if(c){let l=`${s}-${Br()}`;await Xs(qn.join(e.extensionPath,"scripts","inspect-volume"),n,l,i),await n.rename(l,s)}return s}async function GL(t,e,r){let n=[`vsch.local.repository=${e.repositoryPath}`];return r?r===wn?(r=e.uniqueVolumeName,n.push("vsch.local.repository.unique=true")):n.push("vsch.local.repository.unique=false"):(r=e.oldVolumeName,n.push("vsch.local.repository.unique=false")),e.gitUrlInfo.ref&&n.push(`vsch.local.repository.branch=${e.gitUrlInfo.ref}`),e.gitUrlInfo.pullRequestId&&n.push(`vsch.local.repository.pullRequestId=${e.gitUrlInfo.pullRequestId}`),(await ci(t)).indexOf(r)===-1&&await Ih(t,r,n),r}var nm="vsch.local.repository",vb="vsch.local.repository.volume",yb="vsch.local.repository.folder";function zL(t,e,r,n){return r?{labels:[`${nm}=${e}`,`${vb}=${n}`,`${yb}=${r}`],remoteWorkspaceFolder:t.workspaceFolder(r)}:{labels:[`${nm}=${e}`],remoteWorkspaceFolder:t.getOldWorkspacePath(e)}}async function KL(t,e,r){let{loadNativeModule:n,output:i}=t.common,o=vc(t,e,"root"),s=await gu(t,e,"root",n),a=_o("container",r,{},o,s,()=>{throw new Error("not implemented")},"node",i);return{cliHost:a,dockerCLI:"docker",dockerComposeCLI:li({exec:a.exec,env:{},output:i},"docker","docker-compose"),dockerComposePath:"docker-compose",env:{},output:i}}var em="vsch.quality",ub="vsch.local.folder",db="vsch.local.volume",tm="/volume";async function YL(t,e,r,n,i,o,s,a,c,l,u,d,f){let{common:p}=t,h,m;try{let g=!c,v;return h=async()=>v||(v=(async()=>{let w=V(V({},e.env),Ot(e.env)),b={cliHost:e.cliHost,env:w,extensionPath:p.extensionPath,appRoot:p.appRoot,package:p.package,output:p.postCreate.output},C=await Jh(b,s,d,p.getLogLevel(),f,p.cliMode);return Wh(C.featuresConfiguration)})()),m=await _c(t,a.Id,i.workspaceFolder,n.remoteUser),l&&c&&i.workspaceFolder&&m.user!=="root"&&(m.launchRootShellServer?await uh(m,m.launchRootShellServer,i.workspaceFolder,n.configFilePath.path):p.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files.")),await GJ(a,t,e,m,n,h,r,g,o,s,u,d,f)}catch(g){throw WJ(g,a,t,m,n)}}function WJ(t,e,r,n,i){let o=t instanceof ye?t:new ye({description:"An error occurred setting up the container.",originalError:t});return e&&(o.manageContainer=!0,o.params=r.common,o.containerId=e.Id,o.dockerParams=r),n&&(o.containerProperties=n),i&&(o.config=i),o}async function GJ(t,e,r,n,i,o,s,a,c,l,u,d,f){var _,k;let{common:p}=e,h=zt(p.cliHost,n.shellServer);a||await Sh(e,h,i);let m={cwd:c,dockerCLI:e.dockerCLI,env:p.env,containerId:t.Id,user:n.user,sessionId:p.sessionId,shutdownAction:i.shutdownAction,logLevel:p.getLogLevel(),delay:1e4},{shutdownArgs:g}=await Kh(e,h,"singleContainer",m,a?i:void 0),{hostOrContainerPort:v,hostPortServer:w,connectionToken:b,webConnectionToken:C,remoteEnv:S,serverDownloaded:P}=await lh(p,n,i,o,((k=(_=i.customizations)==null?void 0:_.vscode)==null?void 0:k.devPort)||Po,Yh(e,r,l,t.Id,d,f));return g.hostPortServer=w,bc(p,n,v,b,C,t,s),{params:p,properties:n,config:i,resolvedAuthority:{host:Oo,port:v,connectionToken:b,extensionHostEnv:S},webConnectionToken:C,tunnelInformation:p.isLocalContainer?Ec(t):{},dockerParams:e,dockerContainerId:t.Id,serverDownloaded:P}}async function JL(t,e){let r=await ji(t,!0,e);return(await Do(t,r)).filter(i=>i.State.Status!=="removing")[0]}function Pc(t){let e=(t.Config.Labels||{})[ub];return e||void 0}function Zs(t){let e=(t.Config.Labels||{})[nm];return e||void 0}function im(t){let e=(t.Config.Labels||{})[vb];return e||void 0}function n1(t){let e=(t.Config.Labels||{})[db];return e||void 0}function i1(t){let e=(t.Config.Labels||{})[yb];return e||void 0}function QL(t,e){throw t.write(Ne(e)),new Error(e)}var o1=K(require("path"));async function s1(t,e,r,n,i,o){let s,a=new Promise(h=>s=h),c=new AC,l=[],u=await _O("vscode-remote-containers",async(h,m)=>{let g=await xO(h),v=[];if(g.type==="poll")try{v=await c.dequeue(6e4)}catch{}else if(g.type==="reply"){let w=l[g.sequence];w&&(w(g.reply),delete l[g.sequence])}else g.type==="done"&&s?s():g.type==="log"&&n.event(g.event);m.write(JSON.stringify(v)),m.end()});u.server.unref();let d=o1.join(r,"dist","shutdown","shutdownMonitorProcess"),f=[u.ipcHandlePath,t,se[e],i||"",o.getTime().toString()];n.write(`Forking shutdown monitor: ${d} ${f.join(" ")}\r
`);let p=ND(d,f,{stdio:["ignore","ignore","ignore","ipc"],detached:!0,execArgv:[]});return p.on("error",h=>{console.error(h)}),p.unref(),{queue:c,sequence:0,replies:l,done:a}}async function om(t,e,r){let n=t.sequence++,i=new Promise(s=>t.replies[n]=s);return t.queue.push({type:"configure",sequence:n,options:e}),await i}async function a1({queue:t,done:e}){t.push({type:"cleanup"}),await e}var l1=K(require("util"));var qu=K(require("string_decoder"));var wn="__UNIQUE__",Oo="127.0.0.1";function kc(t,e){let r=t.platform==="win32"&&!t.env.SSH_AUTH_SOCK?Mw:t.type==="wsl"?t.env.SSH_AUTH_SOCK:void 0,n={DOCKER_CONTEXT:"default"};return e&&("context"in e?n.DOCKER_CONTEXT=e.context:(e.host&&(e.host.startsWith("ssh://")&&t.type==="ssh"?n.VSCODE_DOCKER_HOST=e.host:n.DOCKER_HOST=e.host),e.certPath&&(n.DOCKER_CERT_PATH=e.certPath),e.tlsVerify&&(n.DOCKER_TLS_VERIFY=e.tlsVerify))),r&&(n.SSH_AUTH_SOCK=r),n}function No(t){let e;if(t.DOCKER_CONTEXT&&t.DOCKER_CONTEXT!=="default")e={context:t.DOCKER_CONTEXT};else{e={};let r=t.VSCODE_DOCKER_HOST||t.DOCKER_HOST;r&&(e.host=r),t.DOCKER_CERT_PATH&&(e.certPath=t.DOCKER_CERT_PATH),t.DOCKER_TLS_VERIFY&&(e.tlsVerify=t.DOCKER_TLS_VERIFY),Object.keys(e).length||(e=void 0)}return e}function sm(t,e){e&&("context"in e&&e.context&&t.write(`Context: ${e.context}\r
`),"host"in e&&e.host&&t.write(`Host: ${e.host}\r
`),"certPath"in e&&e.certPath&&t.write(`CertPath: ${e.certPath}\r
`),"tlsVerify"in e&&e.tlsVerify&&t.write(`TLSVerify: ${e.tlsVerify}\r
`))}function am(t){return!t.VSCODE_DOCKER_HOST&&!t.DOCKER_HOST&&(!t.DOCKER_CONTEXT||t.DOCKER_CONTEXT==="default")}function xc(t){return t&&("context"in t||t.host)?` @ ${"context"in t?t.context:t.host}`:""}async function zr(t,e){try{return await Pr(t,e)}catch{return}}function bc(t,e,r,n,i,o,s){let a=o.Ports.filter(f=>!!f.PublicPort),c="";if(t.authority&&s){let f=s.isWorkspaceFile?"workspace":"folder",p=e.remoteWorkspaceFolder||"/",h=s.isWorkspaceFile?Kr.posix.join(p,t.cliHost.path.basename(s.workspaceOrFolderPath)):p;c=`&${f}=${encodeURIComponent(`vscode-remote://${t.authority}${h}`)}`}let l=[...a.length?["Published Ports:"]:[],...a.map(f=>`${f.PrivatePort}/${f.Type} -> ${f.IP}:${f.PublicPort}`),...a.length?[""]:[],...t.web?[`VS Code Web: http://localhost:${r}?tkn=${n||i}${c}`,""]:[]],u=l.reduce((f,p)=>Math.max(p.length,f),0),d="-".repeat(u);u>0&&t.output.write(`\r
\r
${d}\r
${l.join(`\r
`)}${d}\r
\r
`)}async function cm(t){let{common:e}=t,{output:r}=e,n="Check Docker is running",i=r.start(n);try{let{stdout:o}=await Ke(t,"version","--format","{{.Server.APIVersion}}"),s=o.toString();if(s.toLowerCase().indexOf("cannot connect")!==-1)throw new Error(s);r.write(`Server API version: ${s.trim()}`)}catch(o){console.error(o);let s=o&&(o.stderr?o.stderr.toString():o.message)||"";s&&r.write(Ne(s));let a="Docker returned an error. Make sure the Docker daemon is running and select an option how to proceed.",c=o&&(o.stderr?o.stderr.toString().toLowerCase():o.message)||"";throw c.indexOf("permission denied")!==-1?c.indexOf("ssh")!==-1?a="Cannot connect to Docker daemon using 'ssh'. Make sure public/private keys are set up for connecting without keyboard interaction.":a="Current user does not have permission to run 'docker'. Try adding the user to the 'docker' group.":c.indexOf("ENOENT")!==-1&&(a="The 'docker' command was not found. Make sure Docker is installed."),new ye({description:a,originalError:`Docker returned an error code ${o.code}, message: ${o.message}`})}finally{r.stop(n,i)}}function Yt(t){return t.hostPath!==void 0}function yn(t){return t.repositoryPath!==void 0}function Fu(t){return!yn(t)&&t.volumeName!==void 0}function Cn(t){let e=d1("dev-container",t);if(!!e)return typeof e=="string"?{hostPath:e}:"repositoryPath"in e?e.dockerHost?{repositoryPath:e.repositoryPath,settings:{host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`,cloneInfo:e.cloneInfo}}:e:"hostPath"in e&&e.dockerHost?{hostPath:e.hostPath,settings:{host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`}}:e}function $u(t,e,r,n){let i=r?JSON.stringify({hostPath:t,localDocker:n,settings:r}):t;return`vscode-remote://dev-container+${Buffer.from(i,"utf8").toString("hex")}${e}`}function ea(t,e,r,n,i,o){if(t){let a=vn(t);if(!e){let l=JSON.stringify({repositoryPath:t,settings:i,cloneInfo:o,inspectVolume:n});return`vscode-remote://dev-container+${Buffer.from(l,"utf8").toString("hex")}${a.getOldWorkspacePath(t)}`}let c=JSON.stringify({repositoryPath:t,volumeName:e,folder:r,settings:i,cloneInfo:o,inspectVolume:n});return`vscode-remote://dev-container+${Buffer.from(c,"utf8").toString("hex")}${a.workspaceFolder(r)}`}let s=JSON.stringify({volumeName:e,settings:i});return`vscode-remote://dev-container+${Buffer.from(s,"utf8").toString("hex")}${tm}`}function lm(t){let e=d1("attached-container",t);if(!!e)return typeof e=="string"?{containerId:e}:(e.dockerHost&&(e.settings={host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`},delete e.dockerHost),e)}function u1(t,e,r){let n=JSON.stringify({containerName:t,settings:e,cwd:r});return`attached-container+${Buffer.from(n,"utf8").toString("hex")}`}function d1(t,e){try{let[r,n]=e.split("+"),i=r===t&&n?Buffer.from(n,"hex").toString("utf8"):void 0;return i?i.startsWith("{")?JSON.parse(i):i:void 0}catch(r){console.warn(r);return}}async function f1(t,e,r,n=!1){return!n&&await mw(t,e,r)||e}function p1(t,e,r){let n=t.path.relative(t.path.dirname(e),r);return`/workspaces/${t.platform==="win32"?n.replace(/\\/g,"/"):n}`}function h1(t,e,r){if(t==="win32")return e;let n=`${KJ(r,"/")}/`;return(t==="linux"?e.startsWith(n):e.toLowerCase().startsWith(n.toLowerCase()))&&(e=`~/${e.substr(n.length)}`),e}function KJ(t,e){if(e.length===0)return t;for(;t.endsWith(e);)t=t.substr(0,t.length-e.length);return t}function CO(t,e){return t.with({path:Kr.posix.resolve(t.path,e)})}async function Kh(t,e,r,n,i){let{common:o,onRemoveOnShutdownChanged:s}=t;if(o.cliMode)return{shutdownArgs:{},doneWithDocuments:Promise.resolve()};let a=o.output.start("Setup shutdown monitor"),c=await s1(r,o.getLogLevel(),o.extensionPath,o.output,o.logFilePath?Kr.dirname(o.logFilePath):void 0,o.sessionStart);om(c,n,o.output).catch(f=>console.error(f)),s&&s(async f=>{n.rebuild=!!f,n.delay=0,await om(c,n,o.output)}),o.onDidChangeLogLevel(async f=>{n.logLevel=f,await om(c,n,o.output)});let l={},u=async()=>{let f=a1(c);l.hostPortServer&&await(0,l1.promisify)(l.hostPortServer.close.bind(l.hostPortServer))(),await f};o.shutdowns.push(u);let d=i?yO(t,e,i).catch(console.error):Promise.resolve();return o.output.stop("Setup shutdown monitor",a),{monitor:c,shutdownArgs:l,doneWithDocuments:d}}function Ec(t){return{environmentTunnels:t.Ports.filter(e=>!!e.PublicPort).map(e=>({remoteAddress:{port:e.PrivatePort,host:e.IP},localAddress:e.IP+":"+e.PublicPort}))}}async function _c(t,e,r,n,i){let{common:o}=t,s="Inspecting container",a=o.output.start(s),c=await Pr(t,e);o.output.stop(s,a);let l=n||c.Config.User||"root",[,u,,d]=/([^:]*)(:(.*))?/.exec(l),f=YJ(c.Config.Env),p=vc(t,e,l),h=await gu(t,e,l,o.loadNativeModule),m=vc(t,e,"root"),g=c.Mounts.find(b=>b.Type==="volume"&&b.Name==="vscode"),v=c.Mounts.find(b=>b.Type==="bind"&&b.Source===o.localCacheFolder),w=g&&Kr.posix.join(g.Destination,/^\.*(.*)$/.exec(o.product.serverDataFolderName)[1])||(v==null?void 0:v.Destination);return sh({params:o,createdAt:c.Created,startedAt:c.State.StartedAt,sharedDataFolder:w,sharedDataFolderIsLocalCacheFolder:!g&&!!v,remoteWorkspaceFolder:r,containerUser:u==="0"?"root":u,containerGroup:d,containerEnv:f,remoteExec:p,remotePtyExec:h,remoteExecAsRoot:m,rootShellServer:i})}function YJ(t){return(t||[]).reduce((e,r)=>{let n=r.indexOf("=");return n!==-1&&(e[r.substr(0,n)]=r.substr(n+1)),e},{})}async function m1(t){let{common:e,dockerCLI:r,dockerComposeCLI:n,dockerComposePath:i,dockerEnv:o}=t,{cliHost:s,output:a}=e;return{cliHost:s,dockerCLI:r,dockerComposeCLI:n,dockerComposePath:i,env:o,output:a}}async function g1(t,e){return t.type==="local"&&e?t.path.join(e,"data"):t.path.join(await t.homedir(),".vscode-remote-containers","data")}async function Xs(t,e,r,n){await e.mkdirp(r);let i=c1.c({cwd:t,filter:l=>(console.log(l),!0)},["."]),o=new Promise((l,u)=>{i.on("error",u),i.on("finish",l)}),s=await e.exec({cmd:"tar",args:["--no-same-owner","-x","-f","-"],cwd:r,output:n}),a=new qu.StringDecoder;s.stdout.on("data",l=>{n.write(a.write(l))});let c=new qu.StringDecoder;s.stderr.on("data",l=>{n.write(Ne(c.write(l)))}),i.pipe(s.stdin),await s.exit,await o}async function Mu(t,e){let{cliHost:r,env:n,appRoot:i,postCreate:o,output:s}=t,a=await QJ(t),c=r.type==="local"?ii?Kw:process.argv[0]:r.nodeExecutable||(()=>{throw new Error("nodeExecutable required")})(),l;return await JJ({exec:r.exec,cwd:a.cwd,cmd:c,args:[a.script,...e],env:V(V(V({},n),r.type==="local"?i?{NODE_PATH:`${r.path.join(i,"node_modules.asar")}${Kr.delimiter}${r.path.join(i,"node_modules")}`}:void 0:r.type==="container"?void 0:{NODE_PATH:r.path.join(r.path.dirname(c),"node_modules")}),ii?{TS_NODE_PROJECT:void 0}:{}),stdin:o==null?void 0:o.onDidInput,output:s,stdoutData:u=>l=u,stderrData:u=>{s.event(u)}}),l}async function JJ(t){let{exec:e,cmd:r,args:n,cwd:i,env:o,stdin:s,output:a,stdoutData:c,stderrData:l}=t,u=await e({cmd:r,args:n,cwd:i,env:o,output:a});return new Promise((d,f)=>{let p=new qu.StringDecoder,h="";u.stdout.on("data",w=>{h+=p.write(w);let b=h.split(`
`);h=b.pop();for(let C of b)if(C.trim())try{c(JSON.parse(C))}catch{a.write(C)}}),u.stdout.on("error",w=>{if((w==null?void 0:w.code)!=="ENOTCONN")throw w});let m=new qu.StringDecoder,g="";u.stderr.on("data",w=>{g+=m.write(w);let b=g.split(`
`);g=b.pop();for(let C of b)if(C.trim())try{l(JSON.parse(C))}catch{a.write(C)}}),u.stderr.on("error",w=>{if((w==null?void 0:w.code)!=="ENOTCONN")throw w});let v=[];u.exit.then(({code:w})=>{try{v.forEach(b=>b.dispose()),w?(a.write(`Exit code ${w}`),f({message:`Command failed: ${r} ${(n||[]).join(" ")}`,code:w})):d()}catch(b){f(b)}},f),typeof s=="function"&&v.push(s(w=>u.stdin.write(w)))})}async function QJ(t){let{cliHost:e,extensionPath:r,output:n}=t,i=Kr.join(r,...ii?["node_modules","dev-containers-cli","src"]:["dist"],"spec-node",`devContainersSpecCLI.${ii?"t":"j"}s`),o=e.type==="local"?r:e.path.join(await e.homedir(),".vscode-remote-containers","dist",`dev-containers-cli-${t.package.version}`),s=e.type==="local"?i:e.path.join(o,"dist","spec-node","devContainersSpecCLI.js");if(["wsl","ssh"].indexOf(e.type)!==-1&&!await e.isFile(s)){let a=`${o}-${Br()}`,c=e.path.join(a,"dist","spec-node","devContainersSpecCLI.js");await e.mkdirp(e.path.dirname(c)),await e.writeFile(e.path.join(a,"package.json"),await Oe(Kr.join(r,"package.json"))),await e.writeFile(c,await Oe(i));let l=Qs(r),u=e.path.join(a,"dist","node_modules","vscode-dev-containers","container-features");await Xs(l,e,u,n),await Xs(Kr.join(r,"scripts"),e,e.path.join(a,"scripts"),n),await e.rename(a,o)}return{cwd:o,script:s}}function Yh(t,e,r,n,i,o){return async(s,a,c,l)=>{let{common:u}=t,{cliHost:d}=e,f=V(V({},e.env),Ot(e.env)),p={cliHost:e.cliHost,env:f,extensionPath:u.extensionPath,appRoot:u.appRoot,package:u.package,postCreate:u.postCreate,output:u.postCreate.output},h=u.postCreate.output.dimensions||u.output.dimensions,m=await Mu(p,["run-user-commands",...e.cliHost.type==="local"&&u.persistedFolder?["--user-data-folder",u.persistedFolder]:[],...e.dockerCLI!=="docker"?["--docker-path",e.dockerCLI]:[],...e.dockerComposePath!=="docker-compose"?["--docker-compose-path",e.dockerComposePath]:[],"--container-data-folder",dn(t.common.product.serverDataFolderName),"--container-system-data-folder",cc(t.common.product.serverDataFolderName),"--workspace-folder",r,"--container-id",n,"--log-level",vo(u.getLogLevel()),"--log-format","json",...i?["--config",Ee(i,d.platform)]:[],...o?["--override-config",Ee(o,d.platform)]:[],"--default-user-env-probe",u.defaultUserEnvProbe,"--skip-non-blocking-commands",String(s),"--prebuild",String(c),"--stop-for-personalization",String(a),...[].concat(...Object.keys(l).map(g=>["--remote-env",`${g}=${l[g]}`])),"--mount-workspace-git-root",String(!u.cliMode),...h?["--terminal-columns",String(h.columns),"--terminal-rows",String(h.rows)]:[]]);if((m==null?void 0:m.outcome)!=="success")throw new ye({description:`devcontainer command failed: ${m?JSON.stringify(m):"data missing"}`});return m.result}}async function Jh(t,e,r,n,i,o=!1){let{cliHost:s,output:a}=t,c=await Mu(t,["read-configuration","--workspace-folder",e,"--log-level",vo(n),"--log-format","json",...r?["--config",Ee(r,s.platform)]:[],...i?["--override-config",Ee(i,s.platform)]:[],"--include-features-configuration","--mount-workspace-git-root",String(!o),...a.dimensions?["--terminal-columns",String(a.dimensions.columns),"--terminal-rows",String(a.dimensions.rows)]:[]]);return c.configuration.configFilePath=Ce.revive(c.configuration.configFilePath).with({scheme:s.type==="local"?"file":wt.scheme}),c}var dt=K(require("vscode"));var ta={id:"openDocumentation",title:"Open Documentation",isLastAction:!1,applicable:(t,e)=>!e,execute:async t=>{await dt.env.openExternal(dt.Uri.parse("https://aka.ms/vscode-remote/container/resolve-failed"))}},ra={id:"reloadWindow",title:"Reload Window",isLastAction:!0,applicable:(t,e)=>!e&&t.data.reload!==!1,execute:async t=>{t.manageContainer&&t.dockerParams&&t.containerId&&await Ke(t.dockerParams,"stop","-t","0",t.containerId),await dt.commands.executeCommand("workbench.action.reloadWindow")}},v1={id:"rebuildContainer",title:"Rebuild Container",isLastAction:!0,applicable:(t,e)=>t.manageContainer&&!!t.dockerParams&&!!t.containerId&&!e,execute:async t=>{await Ke(t.dockerParams,"rm","-f",t.containerId),await dt.commands.executeCommand("workbench.action.reloadWindow")}},Ic={id:"openRecent",title:"Open Recent...",isLastAction:!0,applicable:(t,e)=>!e,execute:async t=>{await dt.commands.executeCommand("workbench.action.openRecent")}},y1={id:"startContainer",title:"Start Container",isLastAction:!0,applicable:t=>!!t.dockerParams&&!!t.containerId&&t.data.start===!0,execute:async t=>{await Ke(t.dockerParams,"start",t.containerId),await dt.commands.executeCommand("workbench.action.reloadWindow")}},w1={id:"chooseContainer",title:"Choose Container",isLastAction:!0,applicable:t=>t.data.attach===!0,execute:async()=>{await dt.commands.executeCommand("remote-containers.attachToRunningContainer")}},Lo={id:"closeRemote",title:"Close Remote",isLastAction:!0,applicable:(t,e)=>{if(!e)return!1;let r=dt.workspace.workspaceFile;return!(r&&r.scheme==="untitled"||dt.workspace.textDocuments.some(i=>i.isDirty))},execute:async t=>{await dt.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null})}},Tc=[{id:"retry",title:"Retry",isLastAction:!0,applicable:(t,e)=>e&&t.data.reload!==!1,execute:ra.execute},{id:"moreActions",title:"More Actions...",isCloseAffordance:!0,isLastAction:!1,applicable:(t,e)=>e,execute:async t=>{}},{id:"learnMore",title:"Learn More",isLastAction:!1,applicable:(t,e)=>e&&!!t.data.learnMoreUrl,async execute(t){await dt.env.openExternal(dt.Uri.parse(t.data.learnMoreUrl))}}];async function Fo(t,e,r,n=!1,i){var f,p,h,m,g,v;let o=t instanceof ye?t:new ye({description:"An error occurred setting up the container.",originalError:t});if(i){i.show();let w=o.originalError&&(o.originalError.stack||o.originalError.message)||o.originalError;if(w!==void 0){i.log.write(Ne(String(w)));let b=(p=(f=o.originalError)==null?void 0:f.stdout)==null?void 0:p.toString().trim();b&&i.log.write(b);let C=(m=(h=o.originalError)==null?void 0:h.stderr)==null?void 0:m.toString().trim();C&&i.log.write(Ne(C)),((g=o.originalError)==null?void 0:g.code)&&i.log.write(`Exit code ${(v=o.originalError)==null?void 0:v.code}`)}}if(t.message.indexOf("Cancelled container configuration selection")!==-1)throw await dt.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),dt.RemoteAuthorityResolverError.NotAvailable(void 0,!1);let s=o.actions;s.length||(s=[ta]);let a=await s.reduce(async(w,b)=>await b.applicable(o,!0)?[...await w,b]:w,Promise.resolve([])),c=await dt.window.showErrorMessage(o.description,{modal:!0},...a);if(c&&(C1(r,e,c.id),await c.execute(o)),c&&c.isLastAction){if(n)throw dt.RemoteAuthorityResolverError.NotAvailable(void 0,!0);return}let l=await s.reduce(async(w,b)=>await b.applicable(o,!1)?[...await w,b]:w,Promise.resolve([])),u=l.map(w=>({label:w.title,action:w}));async function d(){let b=await(l.length?dt.window.showQuickPick(u,{ignoreFocusOut:!0,placeHolder:"Pick an action to help resolve the problem."}):Promise.resolve(void 0));b&&(C1(r,e,b.action.id),b.action.execute(o).catch(console.error),b.action.isLastAction||await d())}if(d().catch(console.error),n)throw dt.RemoteAuthorityResolverError.NotAvailable(void 0,!0)}function C1(t,e,r){t.sendTelemetryEvent("errorAction",{resolver:e,action:r})}var ne=K(require("vscode")),Xu=K(require("path")),XM=K(require("os"));var ZM=K(hF()),jo=K(QM());var nre="remote.containers.defaultExtensions",hi="remote-containers.revealLogTerminal",uE="remote-containers.revealPostCreateTerminal",Zu="remote-containers.openDevContainerFile",eq="remote-containers.openRepositoryInVolume",Im="remote-containers.openRepositoryInUniqueVolume",tq="remote-containers.openRepositoryFromRemoteHub",rq="remote-containers.openPullRequestInVolume",ed=ne.Uri.parse("https://aka.ms/vscode-remote/containers/folder-setup"),td=ne.Uri.parse("https://aka.ms/vscode-dev-containers"),nq=new bw,ur={onRemoveOnShutdownChangedEmitter:nq,onRemoveOnShutdownChanged:nq.event,results:new Map},oa,mi=t=>LD(t,ne.env.appRoot);function Tm(t,e,r,n){return async(i,o)=>{if(ne.commands.executeCommand("setContext","forwardedPortsViewEnabled",!0),o.resolveAttempt>1){let s=r.get(i);if(!s)throw new Error("Reconnect attempt without old result.");let a=`Reconnection attempt ${o.resolveAttempt-1}`,c=t.log.start(a),{cliHost:l}=s.params;if(l.reconnect)try{await l.reconnect()}catch(u){throw t.log.write(Ne(String(u&&(u.stack||u.message)||u))),ne.RemoteAuthorityResolverError.TemporarilyNotAvailable("Cannot reconnect to remote host.")}if(s.dockerContainerId){let u=await zr(s.dockerParams,s.dockerContainerId);if(!u)throw ne.RemoteAuthorityResolverError.NotAvailable("Container no longer exists.");if(u.State.Status==="paused")throw ne.RemoteAuthorityResolverError.TemporarilyNotAvailable("Container is paused.");if(u.State.Status!=="running")throw ne.RemoteAuthorityResolverError.NotAvailable("Container is no longer running.")}return t.log.stop(a,c),ae(V({},s.resolvedAuthority),{isTrusted:s.isTrusted})}else{let s="Resolving Remote",a=t.log.start(s),c=await n(i,t,e);return ire(c.params,c.properties).catch(l=>{}),r.set(i,c),t.log.stop(s,a),ne.window.withProgress({location:ne.ProgressLocation.Window,title:bre,cancellable:!1},async l=>{await PR(c.params.backgroundTasks)}).then(void 0,l=>{t.log.write(Ne(String(l&&(l.stack||l.message)||l)))}),ae(V(V({},c.resolvedAuthority),c.tunnelInformation),{isTrusted:c.isTrusted})}}}async function ire(t,e){if(!e.nodeExecutable)return;let r=await Oe(Xu.join(t.extensionPath,"dist","node","remoteCloudGuesser.js"),{encoding:"utf8"}),{stdout:n}=await Fi(t,e,[e.nodeExecutable,"-e",r],void 0,{silent:!0}),i=n.toString().trim();t.sendTelemetryEvent("extraInfo",{remoteCloud:i})}var dE;async function ore(t){return dE||(dE=ai(Xu.join(__dirname,"..",".."),Gi,t)),dE}var rd={};async function Gi(t,e=!0){var r;if(t.counter&&((r=rd[t.prompt])==null?void 0:r.from)===t.counter&&delete rd[t.prompt],!rd[t.prompt]){if(!e)return"";rd[t.prompt]={result:Promise.resolve(ne.window.showInputBox({prompt:t.prompt||"Enter password",password:!0,ignoreFocusOut:!0}).then(n=>n||"")),from:t.counter}}return rd[t.prompt].result}async function We(t,e,r,n=!0,i=ore(e),o=!0){let s=!r;if(s){if(ur.results.size){let g=[...ur.results.values()].filter(v=>v.dockerParams)[0];return m1(g.dockerParams)}if(oa)return oa}r&&typeof r!="string"&&"scheme"in r&&(r.scheme==="file"?r=r.fsPath:r=rc(r));let a;if(!r){let g=(ne.workspace.workspaceFolders||[])[0];if(ne.env.remoteName==="wsl")g?r=rc(g.uri):r={wslDistro:zp(ne.env.remoteAuthority),wslPath:"/"};else if(ne.env.remoteName==="ssh-remote"){let v=sre(ne.env.remoteAuthority);if(v){let{user:w,hostName:b,port:C}=v;a={host:`ssh://${w?`${w}@`:""}${b}${C?`:${C}`:""}`},g?r=g.uri.path:r="/"}}else(g==null?void 0:g.uri.scheme)==="file"&&(r=g.uri.fsPath);r||(r=process.cwd())}let c=a&&"host"in a&&a.host||void 0,l=n?Un():{executeInWSL:"never",defaultDistro:void 0},u=Ln(c,r,mi,l,t.extensionPath,Ki(),await ru(ne.env.appRoot),e,yi,{sshAskpassEnv:i,settings:qc()});o&&!await Promise.race([u,oi(1e3)])&&await ne.window.withProgress({location:ne.ProgressLocation.Notification,title:`[Setting up Remote-Containers (show log)](command:${hi} "Show details in terminal")`,cancellable:!1},async()=>{await u});let d=await u,f=jn(),p=gi();if(!a){let g=ne.workspace.getConfiguration("docker"),v=g.get("context")||d.env.DOCKER_CONTEXT;if(!v){let w={cliHost:d,dockerCLI:f,dockerComposeCLI:li({exec:d.exec,env:{},output:it},f,p),dockerComposePath:p,env:{},output:it};v=await OC(w)||"default"}v&&v!=="default"?a={context:v}:(a=No(d.env)||{},"context"in a||(fE(a,g,"host"),fE(a,g,"certPath"),fE(a,g,"tlsVerify"),Object.keys(a).length||(a=void 0)))}let h=V(V({},await i),kc(d,a)),m={cliHost:d,dockerCLI:f,dockerComposeCLI:li({exec:d.exec,env:h,output:e},f,p),dockerComposePath:p,env:h,output:e};return s&&(oa=m),m}var Am;function iq(t){if(Am)return Am;let e=cre(t);return t.subscriptions.push(e),t.subscriptions.push(e.event(()=>{let r=oa==null?void 0:oa.cliHost;oa=void 0,(r==null?void 0:r.terminate)&&r.terminate()})),Am=e.event,Am}function sre(t){let e=/^ssh-remote\+(.*)$/.exec(t);if(!e)return;let r=e[1];try{let n=JSON.parse(Buffer.from(r,"hex").toString("utf8"));if(n&&n.hostName)return n}catch{}return{hostName:r}}function fE(t,e,r){let n=e.get(r);n&&(t[r]=n)}var are=["remote.containers.dockerPath","remote.containers.executeInWSL","remote.containers.executeInWSLDistro","docker.context","docker.host","docker.certPath","docker.tlsVerify"];function cre(t){let e=new ne.EventEmitter,r=ne.workspace.onDidChangeConfiguration(async c=>{are.some(l=>c.affectsConfiguration(l))&&e.fire()}),n,i,o,s=()=>{(async()=>{i||(i=await Ln(void 0,process.cwd(),mi,Un(),t.extensionPath,Ki(),void 0,it,yi));let c={cliHost:i,dockerCLI:jn(),dockerComposeCLI:li({exec:i.exec,env:{},output:it},jn(),gi()),dockerComposePath:gi(),env:{},output:it},l=await OC(c);l===void 0?o=setTimeout(s,2*60*1e3):(l!==n&&(n!==void 0&&e.fire(),n=l),o=setTimeout(s,2*1e3))})().catch(console.error)};s();let a=e.dispose;return e.dispose=()=>{r.dispose(),o&&clearTimeout(o),a.call(e)},e}async function sa(){let t=ne.workspace.workspaceFolders;if((t==null?void 0:t.length)===1){let e=t[0].uri;return pE(e)}return null}async function pE(t){if(t&&t.scheme==="vscode-remote"&&/dev-container\+(.*)/.exec(t.authority)){let r=Cn(t.authority);if(Yt(r))return null;if(yn(r)&&r.inspectVolume&&r.inspectVolume===!0)return r}return null}function Dm(t){return{getConfigurationState:()=>t.get("configurationState"),updateConfigurationState:async e=>t.update("configurationState",e),containerOutdated:lre}}async function lre(t){let e="Rebuild",r="Ignore",n=await ne.window.showInformationMessage(`Configuration file(s) changed: ${t.join(", ")}. The container might need to be rebuilt to apply the changes.`,e,r);if(n===e)return ne.commands.executeCommand("remote-containers.rebuildContainer");if(n===r)return"ignore"}async function ure(t){return t?oq():Array.from(new Set([...ne.workspace.getConfiguration().get(nre)||[],...oq()]))}function oq(){let t=ne.env.language,e=t.indexOf("-"),r=sq(t)||(e!==-1?sq(t.substr(0,e)):void 0);return r?[r]:[]}function sq(t){let e=t.toLowerCase();return ne.extensions.all.filter(r=>{var i;let n=r.packageJSON&&r.packageJSON.contributes;return((i=n==null?void 0:n.localizations)==null?void 0:i.length)?!!n.localizations.find(o=>{var s;return((s=o==null?void 0:o.languageId)==null?void 0:s.toLowerCase())===e}):!1}).map(r=>r.id)[0]}function aq(){return!!ne.workspace.getConfiguration().get("workbench.enableExperiments")}function dre(){return!!ne.workspace.getConfiguration().get("remote.containers.enableWebAccess")}function Rm(){return ne.workspace.getConfiguration().get("remote.containers.workspaceMountConsistency")||"cached"}function Om(){return!!ne.workspace.getConfiguration().get("remote.containers.experimentalUpdateRemoteUserUIDOnMacOS")}function Nm(){var t;return(t=ne.workspace.getConfiguration().get("remote.containers.cacheVolume"))!=null?t:!0}function fre(){let t=ne.workspace.getConfiguration().get("remote.containers.copyGitConfig");return typeof t=="boolean"?t:!0}function pre(){return ne.workspace.getConfiguration().get("remote.containers.gitCredentialHelperConfigLocation")||"global"}function jn(){return ne.workspace.getConfiguration().get("remote.containers.dockerPath")||"docker"}function Un(){return{executeInWSL:hE(),defaultDistro:hre()}}function hE(){return process.platform!=="win32"?"never":ne.workspace.getConfiguration().get("remote.containers.executeInWSL",!1)?"always":"forWSLPath"}function hre(){if(process.platform==="win32")return ne.workspace.getConfiguration().get("remote.containers.executeInWSLDistro")||void 0}function gi(){return ne.workspace.getConfiguration().get("remote.containers.dockerComposePath")||"docker-compose"}function Lm(){let t=ne.workspace.getConfiguration().get("remote.containers.logLevel")||"debug";return Ek(t)}var mre=t=>ne.workspace.onDidChangeConfiguration(e=>{e.affectsConfiguration("remote.containers.logLevel")&&t(Lm())});function gre(){let t=ne.workspace.getConfiguration();return{repository:(t.get("remote.containers.dotfiles.repository","")||t.get("dotfiles.repository","")).trim()||void 0,installCommand:(t.get("remote.containers.dotfiles.installCommand","")||t.get("dotfiles.installCommand","")).trim()||void 0,targetPath:(t.get("remote.containers.dotfiles.targetPath","")||t.get("dotfiles.targetPath","")).trim()||"~/dotfiles"}}function qc(){let t=ne.workspace.getConfiguration();return{executablePath:t.get("remote.SSH.path"),configFilePath:t.get("remote.SSH.configFile")}}function zi(t,e,r,n,i,o,s){var u,d;let a={resolver:e,outcome:r};n&&(a.hostType=n.cliHost.type),i&&(a.configProperties=JSON.stringify(Object.keys(i)),a.configExtensions=JSON.stringify(((d=(u=i.customizations)==null?void 0:u.vscode)==null?void 0:d.extensions)||[]),a.configFeatures=JSON.stringify(Object.keys(i.features||{})),"image"in i?a.configType="image":mt(i)?a.configType="dockerfile":"dockerComposeFile"in i&&(a.configType="dockerCompose")),o&&(a.hardwareId=o.osRelease.hardware,a.osReleaseId=o.osRelease.id,a.osReleaseVersion=o.osRelease.version);let c=s&&s.originalError,l=c&&(c.stack||c.message||String(c))||s&&s.description;l&&(a.errorMessage=l),t.sendTelemetryEvent("resolver",a)}var cq=class{constructor(e){this.onClose=e;this.writeEmitter=new ne.EventEmitter;this.onDidWrite=this.writeEmitter.event;this.inputEmitter=new ne.EventEmitter;this.onDidInput=this.inputEmitter.event;this.queue=[];this.ready=!1}open(){this.ready=!0,this.queue.forEach(e=>this.writeEmitter.fire(e))}close(){this.ready=!1,this.onClose()}write(e){this.queue.push(e),this.ready&&this.writeEmitter.fire(e)}handleInput(e){this.inputEmitter.fire(e)}},Fm=class{constructor(e,r,n=void 0){this.sessionStart=r;this.outputTerminal=new cq(()=>this._terminal=void 0);this.onDidInput=this.outputTerminal.onDidInput;this._name="Dev Containers";this._revealOnNextOutput=!1;let i=o=>{this.outputTerminal.write(o),this.revealOnNextOutput&&(this.revealOnNextOutput=!1,this.show())};this.logFilePath=e?Xu.join(e,`remoteContainers-${r.toISOString().replace(/:/g,"-")}.log`):void 0,this.log=vre(i,Lm,this.logFilePath,r,n),Object.defineProperty(this.log,"dimensions",{get:()=>{var o;return(o=this._terminal)==null?void 0:o.dimensions}}),this.log.onDidChangeDimensions=o=>ne.window.onDidChangeTerminalDimensions(s=>{s.terminal===this._terminal&&o(s.dimensions)})}get name(){return this._name}set name(e){this._name=e}get revealOnNextOutput(){return this._revealOnNextOutput}set revealOnNextOutput(e){this._revealOnNextOutput=e}show(){this._terminal||(this._terminal=ne.window.createTerminal({name:this.name,pty:this.outputTerminal})),this._terminal.show()}dispose(){this._terminal&&this._terminal.dispose()}get shown(){return!!this._terminal}};function vre(t,e,r,n,i=void 0){let o=[];return r&&o.push(Sk(r,()=>Math.min(se.Debug,e()))),o.push(xk(t,e,n)),ir(_k(o,i))}async function mE(t,e){let r=await zr(t,e.Id);if(r&&r.State.Status==="running")try{await Ke(t,"stop",r.Id)}catch(n){ne.window.showErrorMessage(`Error stopping container: ${n.message}`)}}async function Mm(t,e){let r=await zr(t,e.Id);if(r&&r.State.Status!=="running")try{await Ke(t,"start",r.Id)}catch(n){ne.window.showErrorMessage(`Error starting container: ${n.message}`)}}async function lq(t,e){try{await Ke(t,"rm",e)}catch(r){ne.window.showErrorMessage(`Error removing container: ${r.message}`)}}async function gE(t,e){try{await Ke(t,"volume","rm","--force",e)}catch(r){ne.window.showErrorMessage(`Error removing volume: ${r.message}`)}}function yre(){return ne.env.sessionId!=="someValue.sessionId"?ne.env.sessionId:`${ne.env.sessionId}_${Date.now()}`}function wre(t,e){let r=ne.workspace.registerResourceLabelFormatter({scheme:"vscode-remote",authority:t.authority,formatting:{label:"${path}",separator:"/",workspaceSuffix:e,tildify:!0}});t.shutdowns.push(r.dispose.bind(r))}async function uq(t,e){if(t.globalState.get("removeOnStartup")===e)return await t.globalState.update("removeOnStartup",null),!0;let r=t.workspaceState.get("removeOnStartup",!1);return r&&await t.workspaceState.update("removeOnStartup",null),r}async function dq(t,e){await t.workspaceState.update("removeOnStartup",e)}async function vE(t,e){await t.globalState.update("removeOnStartup",e)}async function fq(t,e){return t.globalState.get("buildNoCache")===e?(await t.globalState.update("buildNoCache",null),!0):!1}async function nd(t,e){await t.globalState.update("buildNoCache",e)}async function id(t,e,r,n,i){await t.globalState.update("openEditorsOnStartup",{workspaceFolder:e,fileWithError:r==null?void 0:r.toString(),logFile:n,openLog:i})}async function pq(t){var r;let e=t.globalState.get("openEditorsOnStartup");if(e){await t.globalState.update("openEditorsOnStartup",void 0);let n=(r=ne.workspace.workspaceFolders)==null?void 0:r.some(o=>o.uri.fsPath===e.workspaceFolder||o.uri.path===e.workspaceFolder),i=await sa();if(n||i&&i.repositoryPath===e.workspaceFolder&&(n=!0),n){let o=e.fileWithError?Ce.parse(e.fileWithError):void 0;if(e.openLog==="onTheSide"&&await mq(o),e.openLog&&e.logFile){let s={viewColumn:e.openLog==="onTheSide"?ne.ViewColumn.Beside:ne.ViewColumn.One,preserveFocus:!0},a=await ne.window.showTextDocument(ne.Uri.file(e.logFile),s),c=new ne.Position(a.document.lineCount-1,0);a.selection=new ne.Selection(c,c),a.revealRange(a.selection)}return e.openLog!=="onTheSide"&&await mq(o),!0}}return!1}function hq(t){return[`vscode-remote:/workspaces/${t}/.devcontainer/devcontainer.json`,`vscode-remote:/workspaces/${t}/.devcontainer.json`]}async function mq(t){return t?ne.commands.executeCommand("vscode.open",ne.Uri.parse(t.toString()),{viewColumn:ne.ViewColumn.One}):ne.commands.executeCommand("remote-containers.openDevContainerFile",void 0,{viewColumn:ne.ViewColumn.One})}async function yE(t){if(ur.results.size)return[...ur.results.values()].filter(o=>o.config).map(o=>o.config.configFilePath);let e=vi(),r=ne.workspace.workspaceFolders||[],n=await Promise.all(r.map(async o=>{let s=Ue(t.path,Ee(o.uri,t.platform));return await fi(t,s,e)})),i=ne.workspace.workspaceFile;if(i&&i.scheme!=="untitled"){let o=Ue(t.path,Ee(i,t.platform)),s=await fi(t,o,e);s&&n.indexOf(s)===-1&&n.unshift(s)}return n.filter(o=>!!o)}function vi(){return ne.workspace.getConfiguration().get("remote.containers.repositoryConfigurationPaths")||[]}async function Cre(t,e,r="localhost"){await ne.workspace.openTunnel({remoteAddress:{host:r,port:e}})}function gq(t,e){let r=new Fm(void 0,e);r.name="Configuring...",r.revealOnNextOutput=!0;let n=!1;r.onDidInput(()=>{n&&(n=!1,r.dispose())});let i,o={enabled:!0,skipNonBlocking:!1,output:FD(r.log,"postCreate",t),onDidInput:r.onDidInput,done:()=>{r.shown&&(r.log.raw("[1mDone. Press any key to close the terminal.[0m"),n=!0),i()},promise:new Promise(s=>i=s)};return{channel:r,postCreate:o}}async function $c(t){let{authority:e,extensionContext:r,sessionStart:n,progress:i,cliHost:o,env:s,cwd:a,isLocalContainer:c,telemetry:l,output:u,logFilePath:d,allowSystemConfigChange:f,postCreate:p}=t,h=dre(),m=ae(V({computeExtensionHostEnv:!0},l),{appRoot:ne.env.appRoot,localCacheFolder:Ki(),extensionPath:r.extensionPath,webConnectionToken:void 0,sessionId:yre(),sessionStart:n,authority:e,cliHost:o,env:s,cwd:a,isLocalContainer:c,getAdditionalExtensionsToInstall:ure,isCopyGitConfigEnabled:fre(),credentialHelperConfigLocation:pre(),dotfilesConfiguration:gre(),progress:_re(i),output:u,logFilePath:d,allowSystemConfigChange:f,defaultUserEnvProbe:"loginInteractiveShell",postCreate:p,getTelemetryLevel:()=>l.getTelemetryLevel(),forwardServerPort:!0,web:h,getLogLevel:Lm,onDidChangeLogLevel:mre,loadNativeModule:mi,shutdowns:[],forwardedPorts:new Set,backgroundTasks:[],setWorkspaceName:g=>wre(m,g),openTunnel:Cre,getTunnels:()=>Promise.resolve(ne.workspace.tunnels),onAdoptProcess:ne.window.onDidOpenTerminal,persistedFolder:await g1(o,r.globalStoragePath),alternateDownload:yi});return m}async function yi(t,e){let r=await ne.commands.executeCommand("_workbench.downloadResource",ne.Uri.parse(t));if(!r)throw new ye({description:"Downloading the VS Code Server failed. Please try again later."});await In(r.fsPath,e)}var jc=`[Starting Dev Container (show log)](command:${hi} "Show details in terminal")`,bre=`[Configuring Dev Container](command:${uE} "Show details in terminal")`,Ere={[or.Begin]:"",[or.CloningRepository]:"Cloning Repository",[or.BuildingImage]:"Building image",[or.StartingContainer]:"Starting container",[or.InstallingServer]:"Installing server",[or.StartingServer]:"Starting server",[or.End]:""};function Ki(){return Xu.join(XM.tmpdir(),"vsch")}function _re(t){let e=0;return r=>{let n=or.End-r,i=(100-e)/(n+1);t.report({message:Ere[r],increment:i}),e+=i}}async function vq(t,e,r){let{name:n,publisher:i,version:o,aiKey:s}=e;if(!s)return wk(e,r);let a=i?`${i}.${n}`:n,c=new ZM.default(a,o,s);t.subscriptions.push(c);let l=new yq(c),u=Sre(r),d=aq()?(0,jo.getExperimentationService)(a,o,u,l,t.globalState):void 0;return{sendTelemetryEvent:l.sendTelemetryEvent.bind(l),isCachedFlightEnabled:async f=>d&&aq()?d.isCachedFlightEnabled(f):!1,product:r,package:e,getTelemetryLevel:()=>c.telemetryLevel}}var yq=class{constructor(e){this.baseReporter=e;this.sharedProperties={}}sendTelemetryEvent(e,r,n){this.baseReporter.sendTelemetryEvent(e,V(V({},this.sharedProperties),r),n)}setSharedProperty(e,r){this.sharedProperties[e]=r}postEvent(e,r){let n={};for(let[i,o]of r)n[i]=o;this.sendTelemetryEvent(e,n)}};function Sre(t){switch(t.quality){case"stable":return jo.TargetPopulation.Public;case"insider":return jo.TargetPopulation.Insiders;case"exploration":return jo.TargetPopulation.Internal;case void 0:return jo.TargetPopulation.Team;default:return jo.TargetPopulation.Public}}var od="Opening a folder in a Dev Container may execute arbitrary code both inside and outside the container.",wE="userConfirmedCloneRepositoryInDevContainerRequiresTrust";async function sd(t,e){if((e==null?void 0:e.toLowerCase().startsWith("https://github.com/microsoft/vscode-remote-try-"))||t.globalState.get(wE))return!0;let r="Got It",n="Learn More",i=await ne.window.showWarningMessage("Cloning a repository in a Dev Container may execute arbitrary code. ",{modal:!0,detail:"Only clone a repository in a Dev Container if you trust its authors."},r,n);return i===r?(await t.globalState.update(wE,!0),!0):(i===n&&ne.env.openExternal(ne.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}var CE="userConfirmedAttachToContainerRequiresTrust";async function Uo(t){if(t.globalState.get(CE))return!0;let e="Got It",r="Learn More",n=await ne.window.showWarningMessage("Attaching to a container may execute arbitrary code.",{modal:!0,detail:"Only attach to a container if you trust its origin."},e,r);return n===e?(await t.globalState.update(CE,!0),!0):(n===r&&ne.env.openExternal(ne.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}function wq(t){t.globalState.setKeysForSync([wE,CE,bE])}function Cq(){let t=process.env.PATH||"";process.platform==="darwin"&&!/(^|:)\/usr\/local\/bin(:|$)/i.test(t)&&(process.env.PATH=`${t}:/usr/local/bin`)}var bE="updatedToPreRelease2",xre="2022-01-19T05:14:31.474Z";async function bq(t,e){try{e.quality==="insider"&&e.date&&e.date.localeCompare(xre)>=0&&!t.globalState.get(bE,!1)&&(await t.globalState.update(bE,!0),await ne.commands.executeCommand("workbench.extensions.installExtension","ms-vscode-remote.remote-containers",{installPreReleaseVersion:!0}))}catch(r){console.error(r)}}async function Uc(t,e,r,n,i=!1){try{return ob(t,e,r,Lm(),n,i)}catch{return}}var Qe=K(require("vscode")),Fe=K(require("path")),TH=K(require("fs"));var Ji=K(j0()),AH=K(lH());var DH=K(require("util"));var uH=K(require("path"));var Yce=["png","md","json","txt","map"],Jce=["node_modules",".git","bin","out","dist",".vscode-test"],Qce=[{tag:"function.json",pattern:/^function\.json$/i},{tag:"package.json",pattern:/^package\.json$/i},{tag:"sln",pattern:/^.+\.sln$/i},{tag:"project.json",pattern:/^project\.json$/i},{tag:"csproj",pattern:/^.+\.csproj$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"amlignore",pattern:/^.+\.amlignore$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"environment.yml",pattern:/^environment\.yml$/i},{tag:"_config.yml",pattern:/^_config\.yml$/i},{tag:"_config.toml",pattern:/^_config\.toml$/i},{tag:"server.xml",pattern:/^server\.xml$/i},{tag:"web.xml",pattern:/^web\.xml$/i}],dH={"Node.js":["package.json"],".NET Core":["sln","project.json","csproj"],"Azure Functions":["function.json"],"Azure Machine Learning":["azureml","amlignore"],Anaconda:["environment.yml"],Jekyll:["_config.yml","_config.toml"],Tomcat:["server.xml","web.xml"],Dapr:[]},fH={"C#":["cs"],"C++":["cpp","cxx",".cc","c++"],"F#":["fs"],JavaScript:["js"],TypeScript:["ts"],Java:["java"],Elm:["elm"],Go:["go"],Python:["py","ipynb"],Ruby:["rb"],Perl:["pl"],PHP:["php"],R:["r"],PowerShell:["ps1"],Dart:["dart"],Rust:["rs"],Swift:["swift"],ReasonML:["re"],TerraForm:["tf"]},Xce=["docker-existing-docker-compose","docker-existing-dockerfile","codespaces-linux"];async function u_(t,e){for(let r of e)if(r.metaData){if(Xce.indexOf(uH.basename(r.definitionFolder))>-1)continue;let n=0,i=0,o=r.metaData.get("languagesPlatforms");if(o){let s=o.split(",").map(a=>a.trim());if(s[0]==="Any")n+=5;else for(let a of s)if(fH[a]){let c=fH[a];for(let l of c)t.fileTypes.get(l.toLowerCase())&&(n+=10),t.mostPopularFileType===l&&(n+=10)}else if(dH[a]){let c=dH[a],l=!1;for(let u of c)t.configFiles.get(u)&&(l=!0,i+=20);l||(i-=20)}}r.recommendationScore=n+(i<0?-4:i)}}async function pH(t,e){return Zce(t,e.rootFolderPath,Jce,Yce)}async function Zce(t,e,r,n){let i=new Map,o=new Map,s=500;function a(p,h,m,g){let v=[];(t.readDirWithTypes||t.readDir)(p).then(b=>{if(m.count>=s)return m.count+=b.length,m.maxReached=!0,g(v);let C=b.length;if(C===0)return g(v);let S=b;m.count+b.length>s&&(m.maxReached=!0,C=s-m.count,S=b.slice(0,C)),m.count+=b.length;for(let P of S){let _=Array.isArray(P)?P[0]:P;(Array.isArray(P)?Promise.resolve((P[1]&ml.File)!=0):t.isFile(t.path.join(p,_))).then(T=>{T?(v.push(_),--C==0&&g(v)):h.indexOf(_)===-1?a(t.path.join(p,_),h,m,A=>{if(v=v.concat(A),--C==0)return g(v)}):--C==0&&g(v)},()=>{if(--C==0)return g(v)})}},()=>g(v))}let c=p=>{i.has(p)?i.set(p,i.get(p)+1):i.set(p,1)},l=p=>{for(let h of Qce)h.pattern.test(p)&&(o.has(h.tag)?o.set(h.tag,o.get(h.tag)+1):o.set(h.tag,1))},u=p=>{if(p.lastIndexOf(".")>=0){let h=p.split(".").pop();h&&!n.includes(h)&&c(h.toLowerCase())}l(p)},d=p=>[...p.entries()].reduce((h,m)=>m[1]>h[1]?m:h,["",0])[0],f={count:0,maxReached:!1};return new Promise((p,h)=>{a(e,r,f,async m=>{m.forEach(u),p({configFiles:o,fileTypes:i,fileCount:f.count,mostPopularFileType:d(i)})})})}var Bg=K(require("path"));var Yo=K(require("vscode"));async function Hg(){await Yo.window.showInformationMessage("You need to first save your workspace in a folder containing all its workspace folders.",{modal:!0})}function Jo(t,e){let r=Yo.workspace.fs;return{platform:t,path:t==="win32"?Bg.win32:Bg.posix,async isFile(n){try{return((await r.stat(ga(t,e,n))).type&Yo.FileType.File)!=0}catch(i){if((i==null?void 0:i.code)==="FileNotFound")return!1;throw i}},async readFile(n){try{let i=await r.readFile(ga(t,e,n));return Buffer.from(i)}catch(i){if((i==null?void 0:i.code)==="FileNotFound"){let o=new Error(`Could not read file: ${n}`);throw o.originalError=i,o.code="ENOENT",o}throw i}},async writeFile(n,i){await r.writeFile(ga(t,e,n),i)},async readDir(n){return(await r.readDirectory(ga(t,e,n))).map(o=>o[0])},async readDirWithTypes(n){return r.readDirectory(ga(t,e,n))},async mkdirp(n){await r.createDirectory(ga(t,e,n))},async toCommonURI(n){return ga(t,e,n)}}}function ga(t,e,r){let n=t==="win32"?"/"+r.replace(/\\/g,"/"):r;return e.with({path:n})}var Vg=class{async readDocument(e){try{let r=await Yo.workspace.fs.readFile(e);return Buffer.from(r).toString()}catch{return}}async applyEdits(e,r,n){let i=St(n,r);await Yo.workspace.fs.writeFile(e,Buffer.from(i))}};var ge=K(require("vscode"));var gt=K(require("vscode")),Wg=K(require("path"));async function d_(t,e){var i,o;let{fileHost:r}=t,n=await t.findDevContainerFiles();if(n.length){let s=n.length>1?(i=await gt.window.showQuickPick(n.map(d=>({label:d.scheme==="file"?d.fsPath:d.toString(),uri:d})),{placeHolder:"Select a container configuration file"}))==null?void 0:i.uri:n[0];if(!s)return;let a=r.path.dirname(Ee(s,r.platform)),c=r.path.basename(a)===".devcontainer"?r.path.dirname(a):a,l=Ue(r.path,c),u=await Gd(r,l);if(u){let d=ae(V({},u.object),{configFilePath:u.uri}),f=await Si();if("image"in d)return{workspace:l,config:u,imageName:d.image,manifest:await zd(d.image,f)};if(mt(d)){let p=((o=d.build)==null?void 0:o.args)||{},h=hr(r,d),m=await f_(r,h,p);if(m)return V({workspace:l,config:u},m)}if("dockerComposeFile"in d){let p=await qt(r,d),h=await e.readDockerComposeConfig(p,void 0),m=await hH(r,p,c,u.uri,d,h);if(m)return V({workspace:l,config:u},m)}return{workspace:l,config:u}}}else{let s="Add Files...";await gt.window.showInformationMessage("No container configuration file found.",{modal:!0},s)===s&&await Wd(t)}}async function hH(t,e,r,n,i,o){var d;let s=((o==null?void 0:o.services)||{})[i.service]||{},a=Gg(t,e,r,s),c=a?$i(t,n,a):void 0,l=c&&await f_(t,c,((d=s.build)==null?void 0:d.args)||{}),u=await Si();if(l)return l;if(typeof s.image=="string")return{imageName:s.image,manifest:await zd(s.image,u)}}function Gg(t,e,r,n){let i=e.length?t.path.dirname(e[0]):r,o=n.build;if(typeof o=="string")return t.path.resolve(i,o,"Dockerfile");if(o&&typeof o=="object"&&typeof o.context=="string"){let s=typeof o.dockerfile=="string"?o.dockerfile:"Dockerfile";return t.path.resolve(i,o.context,s)}}async function f_(t,e,r){let i=await zt(t).readDocument(e);if(i){let o=(/^\s*FROM\s+(\S+)(\s|$)/m.exec(i)||[])[1]||void 0;if(o){let s=o.replace(/\$\{([^\}]+)\}/,(c,l)=>r[l]||c),a=await Si();return{imageName:s,manifest:await zd(s,a)}}}}async function mH(t){let e=await d_(t,{readDockerComposeConfig:async(r,n)=>{if(r[0])try{let i=await t.fileHost.readFile(r[0]);return xr(i.toString())}catch(i){t.output.write(Ne(String(i&&(i.stack||i.message)||i)))}return{}}});e&&await p_(t,e,{})}async function p_(t,e,r){var h;let{fileHost:n}=t,{workspace:i,config:o}=e,s=gt.window.createQuickPick();s.ignoreFocusOut=!0;let a={fileHost:n,workspace:i,quickPick:s,telemetry:await t.telemetry,output:t.output},c={featureSets:[]},l=await Kg(),u=Qs({distFolder:l}),d=await QC(u,a.output);if(!d)return;d=ae(V({},d),{sourceInformation:{type:"local-cache"}}),c.featureSets.push(d),c=await ZC(a,o.object,c,async()=>{var m,g;return V({"com.visualstudio.code.devcontainers.id":(m=e.manifest)==null?void 0:m.definitionName,version:(g=e.manifest)==null?void 0:g.definitionVersion},r)});let f=((h=c.featureSets.find(m=>m.sourceInformation.type==="local-cache"))==null?void 0:h.features.filter(m=>m.included))||[];if(!f.length){await gt.window.showInformationMessage("No container features available for the current base image.",{modal:!0});return}let p=await Hd(a,f,f.filter(m=>m.value!==!1));try{if(p){let m=o.text,g=o.text;for(let v of f){let w=p[v.id];if(w!==Ru(v)){let b=["features",v.id];if(w!==!1&&typeof v.value=="object"){let S=Hi(v);S&&b.push(S)}let C=st(g,b,w!==!1?w:void 0,{formattingOptions:{}});g=St(g,C)}}m!==g&&await zt(n).applyEdits(o.uri,[{content:g,offset:0,length:o.text.length}],o.text)}}finally{s.dispose()}}async function zg(t,e,r,n){var u,d;if(!Vd())return e;let i=e.configText,o=(u=t.existingConfig)==null?void 0:u.object.features;if(!t.replaceExistingConfig&&o){r=ae(V({},r),{features:V(V({},r.features),o)});for(let f in o){let p=st(i,["features",f],o[f],{formattingOptions:{}});i=St(i,p)}}let s=Jo(process.platform,Ce.file(e.configFilePath)),a=await h_(t,s,r,e.basePath,Wg.basename(e.definitionFolder)),c=((d=((a==null?void 0:a.featureSets)||[]).find(f=>f.sourceInformation.type==="local-cache"))==null?void 0:d.features.filter(f=>f.included))||[],l=await Hd(t,c,c.filter(f=>f.value!==!1),!0);if(!!l){if(l==="back")return n();for(let f of c){let p=l[f.id];if(p!==Ru(f)){let h=["features",f.id];if(p!==!1&&typeof f.value=="object"){let g=Hi(f);g&&h.push(g)}let m=st(i,h,p!==!1?p:void 0,{formattingOptions:{}});i=St(i,m)}}return ae(V({},e),{configText:i})}}async function h_(t,e,r,n,i){var u;let o;if("image"in r)o=await zd(r.image,n);else if(mt(r)){let d=((u=r.build)==null?void 0:u.args)||{},f=hr(e,r),p=await f_(e,f,d);o=p==null?void 0:p.manifest}else if("dockerComposeFile"in r){let d=await qt(e,r);if(d.length&&await e.isFile(d[0])){let f=await e.readFile(d[0]),p=xr(f.toString()),h=await hH(e,d,t.workspace.rootFolderPath,r.configFilePath,r,p);o=h==null?void 0:h.manifest}o=o||i&&await m_(i,Wg.join(n,"manifests"))||void 0}let s=await Kg(),a=Qs({distFolder:s}),c={featureSets:[]},l=await QC(a,t.output);if(!!l)return l=ae(V({},l),{sourceInformation:{type:"local-cache"}}),c.featureSets.push(l),c=await ZC(t,r,c,async()=>({"com.visualstudio.code.devcontainers.id":o==null?void 0:o.definitionName,version:o==null?void 0:o.definitionVersion})),c}var Bd={iconPath:new gt.ThemeIcon("check-all"),tooltip:"Finish"};async function Hd(t,e,r,n=!1){if(!e.length)return{};let i={iconPath:new gt.ThemeIcon("info"),tooltip:"Open Documentation"},o=t.quickPick.onDidTriggerItemButton(l=>{let u=l.item.feature.documentationURL;gt.env.openExternal(gt.Uri.parse(u))}),s=await Ar(t.quickPick,e.map(l=>({label:l.name,picked:r.indexOf(l)!==-1,buttons:l.documentationURL?[i]:void 0,feature:l})).sort((l,u)=>l.label.localeCompare(u.label)),"Select additional features to install",void 0,!0,n?[gt.QuickInputButtons.Back,Bd]:[Bd]);if(o.dispose(),!s)return;if(s.button===gt.QuickInputButtons.Back)return"back";let a=s.pick.map(l=>l.feature),c={};for(let l of e){let u=a.indexOf(l)!==-1;c[l.id]=u?Ru(l)||AL(l):!1}return s.button===Bd?c:tle(t,c,a,()=>Hd(t,e,a))}function ele(t){let e=Hi(t),r=e&&t.options&&t.options[e];return!!r&&r.type==="string"&&("enum"in r||"proposals"in r)}async function tle(t,e,r,n){let i=r.filter(ele);return async function o(s,a,c){if(!a.length)return s;let l=a[0],u=l.options[Hi(l)],d=("enum"in u&&u.enum||"proposals"in u&&u.proposals||[]).map(h=>({label:String(h),value:h,picked:Ru(l)===h})),f=d.length===1?{pick:d[0],button:"ok"}:await Ar(t.quickPick,d,u.description||"Select a value",void 0,void 0,[gt.QuickInputButtons.Back,Bd],"proposals"in u);if(!f)return;if(f.button===gt.QuickInputButtons.Back)return c();let p=ae(V({},s),{[l.id]:f.pick.value});return f.button===Bd?s:o(p,a.slice(1),()=>o(s,a,c))}(e,i,n)}var gH="remote.containers.experimentalContainerFeatures";function vH(){return gt.commands.executeCommand("setContext","experimentalContainerFeatures",Vd()),gt.workspace.onDidChangeConfiguration(t=>{t.affectsConfiguration(gH)&&gt.commands.executeCommand("setContext","experimentalContainerFeatures",Vd())})}function Vd(){return gt.workspace.getConfiguration().get(gH,!0)}var g_=K(require("path"));function yH(t){return{provideCompletionItems(e,r,n){let i=eI(e.getText(),e.offsetAt(r)),o=e.getWordRangeAtPosition(r)||new ge.Range(r,r);if(i.path[0]==="extensions"||i.path[0]==="vscode"&&i.path[1]==="extensions"){let s=Ve(e.getText());return s.configFilePath=e.uri,rle(s,o)}if(Vd()&&i.path[0]==="features"){let s=Ve(e.getText());s.configFilePath=e.uri;try{return nle(t,s,i,o)}catch(a){console.error(a)}}return[]}}}function rle(t,e){var n,i;let r=((t==null?void 0:t.extensions)||[]).concat(((i=(n=t==null?void 0:t.customizations)==null?void 0:n.vscode)==null?void 0:i.extensions)||[]);if(Array.isArray(r)){let o=ge.extensions.all.filter(s=>!(s.id.startsWith("vscode.")||s.id==="Microsoft.vscode-markdown"||r.indexOf(s.id)>-1));if(o.length)return o.map(s=>{let a=new ge.CompletionItem(s.id),c=`"${s.id}"`;return a.kind=ge.CompletionItemKind.Value,a.insertText=c,a.range=e,a.filterText=c,a})}}async function nle(t,e,r,n){var o,s;let i=e&&e.features||{};if(typeof i=="object"){if(e.configFilePath.scheme==="vscode-remote"&&t.fileHost.type==="local"){e=ae(V({},e),{configFilePath:e.configFilePath.with({scheme:wt.scheme,authority:""})});let m=ge.env.remoteName&&ge.env.remoteName!=="test"?"linux":process.platform,g=((o=(ge.workspace.workspaceFolders||[])[0])==null?void 0:o.uri)||Ce.file(process.cwd());t=ae(V({},t),{fileHost:await Jo(m,g)})}let{path:a}=t.fileHost,c=Ee(e.configFilePath,t.fileHost.platform),l=a.basename(c),u=a.dirname(c),d=Ue(a,l===".devcontainer.json"?u:a.dirname(u)),f=await Si(),p=await h_(ae(V({},t),{workspace:d}),t.fileHost,e,f),h=((s=((p==null?void 0:p.featureSets)||[]).find(m=>m.sourceInformation.type==="local-cache"))==null?void 0:s.features.filter(m=>m.included))||[];if(r.path.length===2)if(r.isAtPropertyKey){let m=h.filter(g=>!(g.id in i));if(m.length)return m.map(g=>{let v=new ge.CompletionItem(g.id),w=`"${g.id}": `;return v.kind=ge.CompletionItemKind.Property,v.insertText=w,v.range=n,v.filterText=w,v})}else{let m=r.path[1],g=h.find(v=>v.id===m);if(g){let v=Hi(g),w=v&&(g.options||{})[v]||{type:"boolean",description:"Set to true to install."},b=(w.type==="string"?("enum"in w&&w.enum||"proposals"in w&&w.proposals||[""]).map(C=>`"${C}"`):["true","false"]).map(C=>({label:C,text:C}));return b.push({label:"{}",text:new ge.SnippetString(`{
	$1
}$0`)}),b.map(({label:C,text:S},P)=>{let _=new ge.CompletionItem(C);return _.kind=ge.CompletionItemKind.Value,_.insertText=S,_.range=n,_.sortText=`${P}_${C}`,_})}}else if(r.path.length===3){let m=r.path[1],g=h.find(v=>v.id===m);if(g){let v=g.options||{};if(r.isAtPropertyKey)return Object.keys(v).filter(w=>!(w in(i[m]||{}))).map(w=>{let b=new ge.CompletionItem(w),C=`"${w}": `;return b.kind=ge.CompletionItemKind.Property,b.insertText=C,b.range=n,b.filterText=C,b.detail=v[w].description,b});{let w=r.path[2],b=v[w];if(b)return(b.type==="string"?("enum"in b&&b.enum||"proposals"in b&&b.proposals||[""]).map(S=>`"${S}"`):["true","false"]).map((S,P)=>{let _=new ge.CompletionItem(S),k=S;return _.kind=ge.CompletionItemKind.Value,_.insertText=k,_.range=n,_.filterText=k,_.sortText=`${P}_${S}`,_})}}}}}async function wH(t){let e=await v_(t);if((e==null?void 0:e.scheme)===wt.scheme){let r=Ee(e,t.fileHost.platform);e=await t.fileHost.toCommonURI(r)}e&&await ge.window.showTextDocument(ge.Uri.parse(e.toString()))}async function v_(t){let e=await t.findDevContainerFiles();if(!e.length){let n="Add Files...";await ge.window.showInformationMessage("No container configuration file found.",{modal:!0},n)===n&&await Wd(t)&&(e=await t.findDevContainerFiles())}if(!e.length)return;let r;return e.length===1?r={uri:e[0]}:r=await ge.window.showQuickPick(e.map(n=>({label:n.scheme==="file"?n.fsPath:n.toString(),uri:n})),{placeHolder:"Select a container configuration file"}),r==null?void 0:r.uri}async function CH(t,e){var n,i,o,s,a,c,l;let r=await v_(t);if(r){let u=zt(t.fileHost);r.scheme==="file"&&!await ht(r.fsPath)?await pn(Fn,r,[],qi):r.scheme==="vscode-remote"&&(u=new Vg);let d=await u.readDocument(r);if(d){let f=!/\.?devcontainer\.json/.test(g_.default.posix.basename(r.path)),p=Ve(d),h=!f&&((i=(n=p.customizations)==null?void 0:n.vscode)==null?void 0:i.extensions),m=(h?(s=(o=p.customizations)==null?void 0:o.vscode)==null?void 0:s.extensions:p.extensions)||[],g=t.openConfigurationCommandId?`[Dev Container configuration](command:${t.openConfigurationCommandId})`:"Dev Container configuration";if((p.extensions||[]).concat(((c=(a=p.customizations)==null?void 0:a.vscode)==null?void 0:c.extensions)||[]).indexOf(e)===-1){m.push(e);let v;h?((l=p.customizations)==null?void 0:l.vscode)?v=st(d,["customizations","vscode","extensions"],m,{formattingOptions:{}}):p.customizations?v=st(d,["customizations","vscode"],{extensions:m},{formattingOptions:{}}):v=st(d,["customizations"],{vscode:{extensions:m}},{formattingOptions:{}}):v=st(d,["extensions"],m,{formattingOptions:{}}),await u.applyEdits(r,v,d),await ge.window.showInformationMessage(`Extension has been added to the ${g}.`)}else await ge.window.showInformationMessage(`Extension is already included in the ${g}.`)}}}async function bH(t,e){var s,a;let r=await ge.commands.executeCommand("remote.tunnel.label",e);if(r===void 0)return;let n=r.label,i=r.port,o=await v_(t);if(o){let c=zt(t.fileHost);o.scheme==="file"&&!await ht(o.fsPath)?await pn(Fn,o,[],qi):o.scheme==="vscode-remote"&&(c=new Vg);let l=await c.readDocument(o);if(l){let d=(s=Ve(l).portsAttributes)!=null?s:{},f=(a=d[`${i}`])!=null?a:{},p=t.openConfigurationCommandId?`[Dev Container configuration](command:${t.openConfigurationCommandId})`:"Dev Container configuration";if(d&&f&&f.label===n)await ge.window.showInformationMessage(`Port attributes are already included in the ${p}.`);else{f.label=n,d[`${i}`]=f;let h=st(l,["portsAttributes"],d,{formattingOptions:{}});await c.applyEdits(o,h,l),await ge.window.showInformationMessage(`Port attributes have been added to the ${p}.`)}}}}function EH(t,e){let r=ge.languages.createDiagnosticCollection("devcontainer");return ge.window.activeTextEditor&&y_(ge.window.activeTextEditor.document,r,e.output),t.subscriptions.push(ge.workspace.onDidChangeTextDocument(n=>{n&&y_(n.document,r,e.output)})),t.subscriptions.push(ge.workspace.onDidOpenTextDocument(n=>{n&&y_(n,r,e.output)})),r.dispose}function y_(t,e,r){let n=g_.default.basename(t.uri.fsPath);if(/\.?devcontainer\.json/.test(n)){let i=Ep(t.getText());if(!i)return;let o=_p(i)||{},s=[...ile(t,o,r),...ole(i,t)];e.set(t.uri,s)}}function ile(t,e,r){let n=e==null?void 0:e.features;if(!n)return[];let i=[];return Object.keys(n).forEach(o=>{let s=YC(o,r);if(!s||s.sourceInformation.type!=="local-cache")for(let a=0;a<t.lineCount;a++){let c=t.lineAt(a);if(c.text.includes(o)){let l=c.text.indexOf(o),u=l+o.length,d=s==null?void 0:s.sourceInformation,f="Expected feature identifier to contain only alphanumeric and/or the '-' characters.",p=ge.DiagnosticSeverity.Error;d&&(f=`WARNING: Provided feature syntax is currently experimental and is subject to change.
`,p=ge.DiagnosticSeverity.Warning);let h={message:f,severity:p,range:new ge.Range(new ge.Position(a,l),new ge.Position(a,u))};i.push(h);break}}if(s&&s.sourceInformation.type==="github-repo")for(let a=0;a<t.lineCount;a++){let c=t.lineAt(a),l=s.sourceInformation;if(c.text.includes(o)){let u=c.text.indexOf(o),d=u+o.length,f={message:"Feature-set source can be found on GitHub.",range:new ge.Range(new ge.Position(a,u),new ge.Position(a,d)),code:{target:ge.Uri.parse(`https://github.com/${l.owner}/${l.repo}`),value:"github-repo"},severity:ge.DiagnosticSeverity.Information};i.push(f);break}}}),i}function ole(t,e){return["extensions","settings","devPort"].filter(r=>wo(t,[r])&&wo(t,["vscode",r])).map(r=>{var s,a;let n=(((a=(s=wo(t,[r]))==null?void 0:s.parent)==null?void 0:a.children)||[])[0],i=e.positionAt(n.offset),o=e.positionAt(n.offset+n.length);return{message:`Legacy "${r}" property when "${r}" property under "vscode" is also present.`,range:new ge.Range(i,o),severity:ge.DiagnosticSeverity.Warning}})}var Xt=K(require("vscode")),_H=K(require("os")),Lt=K(require("path"));var SH=K(Ba()),nl=K(j0());var xH=K(require("fs")),w_={"user-agent":"devcontainer"};async function PH(t){let{fileHost:e,output:r}=t;r.write(" -- CREATEDEVCONTAINER v2");let n=await C_();if(n){let i=Ee(n,e.platform),o=Ue(e.path,i),s=await Ka(e,o);if(s){let c="Continue";if(await Xt.window.showInformationMessage(`The workspace could fail to open in a container: ${s}`,{modal:!0},c)!==c)return!1}let a=await sle(t,o);if(a){let c=await e.toCommonURI(a);return c&&Xt.window.showTextDocument(Xt.Uri.parse(c.toString())),!0}}return!1}async function sle(t,e){let{fileHost:r,telemetry:n,output:i}=t,o=await n,s=await Gd(r,e),c=!!Ao(s==null?void 0:s.object)&&!!s;if(c){vr(o,"exists");let S=Ee(s.uri,r.platform);if(!await Xt.window.showWarningMessage(`Dev Container configuration '${r.path.relative(e.configFolderPath,S)}' file already exists.`,{modal:!0},"Continue")){let _=await r.toCommonURI(S);_&&Xt.window.showTextDocument(Xt.Uri.parse(_.toString()));return}}let l=Xt.window.createQuickPick();l.ignoreFocusOut=!0;let u=new Set,d="remote.containers.additionalDefinitionIndexes",f=Xt.workspace.getConfiguration().get(d)||[];f.length===0?i.write("No additional indexes provided via setting"):(i.write(`${f.length} additional indexes provided via setting.`),f.forEach(S=>u.add(S)));let p=Xt.workspace.getConfiguration().get("remote.containers.useEmbeddedV1PackagedCache")||!1,h=_H.tmpdir(),m=Lt.join(h,"collectionsMetadataCache.json"),g=ae(V({},t),{quickPick:l,replaceExistingConfig:c,existingConfig:s,telemetry:o,workspace:e,codespaces:!!t.codespaces,indexes:u,tmpDir:h,collectionsMetadataCache:m,useEmbeddedV1PackagedCache:p}),v=await kH(g,{});if(!v){i.write("Failed to get definitions",se.Error);return}let{mergedDefinitions:w,cachedAt:b,collectionsContainer:C}=v;return w.sort((S,P)=>{let _=S==null?void 0:S.categories.some(T=>T==="Core"),k=P==null?void 0:P.categories.some(T=>T==="Core");return _&&k?0:_?-1:1}),Yg(g,w,b,C)}async function Yg(t,e,r,n){var p;let{output:i,quickPick:o,fileHost:s,useEmbeddedV1PackagedCache:a}=t,c=[{iconPath:new Xt.ThemeIcon("cloud-download"),tooltip:"Clear definitions cache and refetch.",action:"clear-cache"}],l=await Ar(o,e,`Select a container configuration definition (last cached ${r})`,void 0,void 0,c);if(!l)return;let u=l==null?void 0:l.pick,d=u==null?void 0:u.type,f=l==null?void 0:l.button;if(f!=="ok"&&f.action==="clear-cache"){i.write("Refresh Cache!");let h=await kH(t,{clearCache:!0});if(!h){o.dispose();return}return Yg(t,h.mergedDefinitions,h.cachedAt,h.collectionsContainer)}if(d==="singleContainer"||d==="dockerCompose"){let h=await ule(t,{},u);if(h==="back")return Yg(t,e,r,n);(!h||Object.keys(h).length===0)&&i.write("No options returned",se.Trace);let m,g=u.srcInfo;if(g){let v=(p=n.collections.find(w=>Gh(w.sourceInformation)===Gh(g)&&w.features))==null?void 0:p.features;if(v){let w=v.map(b=>ae(V({},b),{value:!1}));m=await Hd(t,v,w,!0)}}else i.write("No srcInfo for selected definition.  Not offering features.",se.Warning);if(m==="back")return Yg(t,e,r,n);o.busy=!0,o.enabled=!1;try{let v;if(i.write(`useEmbeddedV1PackagedCache is ${a}`),a)v=await cle(t,u);else{let _=await gle(t,u);if(!_){i.write("Failed to fetch definition",se.Error),o.dispose();return}v=await ale(t,_)}if(!v){i.write("Failed during configuration copy",se.Error),o.dispose();return}let{devcontainerjsonPath:w,config:b,configText:C}=v,S=await lle(t,h,b,C);if(!S){i.write("Failed during application of options",se.Error),o.dispose();return}C=S.configText;let P=await dle(t,m,C);if(!P){i.write("Failed during application of features",se.Error),o.dispose();return}return C=P.configText,await s.writeFile(w,Buffer.from(C)),w}finally{o&&o.dispose()}}i.write("Undefined behavior in definition selection UX",se.Error),o.dispose()}async function ale(t,e){let{workspace:r,fileHost:n,output:i}=t,{rootFolderPath:o}=r;await ro(o,{recursive:!0,force:!0}),await n.mkdirp(o),await SH.x({file:e,cwd:o});let s=Lt.join(o,".devcontainer","devcontainer.json");if(!await n.isFile(s)){i.write(`No devcontainer.json found at expected path:  ${s}`),t.quickPick.dispose();return}let a=(await n.readFile(s)).toString(),c=Ve(a),l=JSON.stringify(c,void 0,4);if(c.configFilePath=Ce.parse(s),!a||a===""||!c){i.write("devcontainer.json has no contents or could not be parsed.",se.Error),t.quickPick.dispose();return}return{rootFolderPath:o,devcontainerjsonPath:s,config:c,configText:l}}async function cle(t,e){let{workspace:r,fileHost:n,output:i}=t,{rootFolderPath:o}=r;await ro(o,{recursive:!0,force:!0}),await n.mkdirp(Lt.join(o,".devcontainer"));let s=Lt.join(await Si(),"containers",e.id),a=(await Jg(s)).map(f=>Lt.relative(s,f));for(let f of a){let p=Lt.join(s,f),h=n.path.sep!==Lt.sep?f.replace(Lt.sep===Lt.win32.sep?/\\/g:/\//g,n.path.sep):f,m=n.path.join(o,h);await n.mkdirp(Lt.dirname(m)),(0,xH.copyFileSync)(p,m)}let c=Lt.join(o,".devcontainer","devcontainer.json"),l=(await n.readFile(c)).toString(),u=Ve(l),d=JSON.stringify(u,void 0,4);if(u.configFilePath=Ce.parse(c),!l||l===""||!u){i.write("devcontainer.json has no contents or could not be parsed.",se.Error),t.quickPick.dispose();return}return{rootFolderPath:o,devcontainerjsonPath:c,config:u,configText:d}}async function lle(t,e,r,n){var a;let{output:i,fileHost:o}=t;if(!e||Object.keys(e).length===0)return{configText:n};if(!r)return;i.write("Applying selected options to devcontainer.json");let s=Object.keys(e);if(mt(r)){let c=((a=r.build)==null?void 0:a.args)||{};s.forEach(l=>{let u=e[l];if(!u)return;let d=c[l];if(u!==d){let f=st(n,["build","args",l],u,{formattingOptions:{}});n=St(n,f)}})}else if("dockerComposeFile"in r){let c=await qt(o,r);if(c.length&&await o.isFile(c[0])){let l=(await o.readFile(c[0])).toString(),u;s.forEach(d=>{let f=e[d];if(!f)return;u||(u=nl.parseDocument(l,{lineCounter:new nl.LineCounter}));let p=u.getIn(["services","app","build"]);p.has("args")||p.set("args",new nl.YAMLMap),p.get("args").set(d,String(f))}),u&&await o.writeFile(c[0],Buffer.from(u.toString()))}}return{configText:n}}async function ule(t,e,r){if(!r.options)return;let n=r.options,i=Object.keys(n),o=i.length;if(!!i.length)return async function s(a,c,l){if(!c.length)return a;let u=c[0],d=n[u],f=("enum"in d&&d.enum||"proposals"in d&&d.proposals||[]).map(m=>({label:String(m),value:m})),p=f.length===1?{pick:f[0],button:"ok",picked:void 0}:await Ar(t.quickPick,f,(d==null?void 0:d.description)||"Select a value",void 0,void 0,[Xt.QuickInputButtons.Back]);if(!p)return;if(p.button===Xt.QuickInputButtons.Back)return c.length===o?"back":l();let h=ae(V({},a),{[u]:p.pick.value});return s(h,c.slice(1),()=>s(a,c,l))}(e,i,async()=>{})}async function dle(t,e,r){let{output:n}=t;if(!e||!r){n.write("No features selected or no devcontainer.json to apply features to.",se.Warning);return}let i=r,o=Object.keys(e);for(let s of o){let a=e[s],c=["features",s];if(a!==!1){let l=st(i,c,a,{formattingOptions:{}});i=St(i,l)}}return{configText:i}}async function kH(t,{clearCache:e=!1}){let{output:r,collectionsMetadataCache:n,fileHost:i,useEmbeddedV1PackagedCache:o}=t;r.write("--- In getDefinitions_v2");let s;!e&&n&&await i.isFile(n)?s=Ve((await i.readFile(n)).toString()):o?s=await ple(t):s=await fle(t);let a=s==null?void 0:s.collections,c=s==null?void 0:s.cachedAt;if(!s||!a||!c||a.length===0){r.write("Failed to gather definition collections metadata",se.Error);return}let l=[];for(let u of a){let d=u.sourceInformation,f=d?KC(d)+"/":"";for(let p of u.definitions)l.push(ae(V({},p),{srcInfo:d,label:(p==null?void 0:p.displayName)||p.id||"ERR: No id",description:`${f}${p.id}`,detail:(p==null?void 0:p.description)||"No Description"}))}return{mergedDefinitions:l,cachedAt:c,collectionsContainer:s}}async function fle(t){let{output:e}=t;e.write("Populating collection(s) cache from internet...");let r=await hle(t);if(!r){e.write("Failed to fetch collection names from indexes",se.Error);return}return await mle(t,r)}async function ple(t){let{output:e,fileHost:r}=t;e.write("Populating collection(s) cache from from embedded package...");let n=[],i=Lt.join(await Si(),"devcontainer-collection.json");if(!await r.isFile(i)){e.write("Embedded package does not contain devcontainer-collection.json",se.Error);return}let o=Ve((await r.readFile(i)).toString()),s={type:"local-cache"};return o.sourceInformation=s,n.push(o),await IH(t,n)}async function IH(t,e){let{output:r,tmpDir:n,collectionsMetadataCache:i,fileHost:o}=t,s={collections:e,cachedAt:"never"};if(s.cachedAt=new Date().toISOString(),r.write(`Fetched ${e.length} collections.`),r.write(`Cached at: ${s.cachedAt}`),i&&n){r.write(`Caching collection metadata to ${t.collectionsMetadataCache}`);let a=Lt.join(n,`metadata-tmp-${new Date().getMilliseconds()}`);await o.writeFile(a,Buffer.from(JSON.stringify(s))),await In(a,i)}else r.write("Did not write collection to cache. Needs cache directory and path to cache to.",se.Warning);return s}async function hle(t){let{indexes:e,output:r}=t;if(!e)return;let n=new Set;for await(let i of e){let o={type:"GET",url:i,headers:w_},s;try{s=await Du(o,r)}catch(c){r.write(`Failed to fetch index ${i} - ${c==null?void 0:c.message}`,se.Error);continue}if(!s||s.length===0){r.write(`Did not receive a valid response from index defined at: ${i}`,se.Error);continue}s.toString().split(`
`).filter(c=>c&&c.trim()!=="").forEach(c=>{n.add(c)})}if(n.add("https://github.com/microsoft/vscode-dev-containers/releases/latest/download/devcontainer-collection.json"),n.size===0){r.write("No collections set. Exiting.",se.Warning);return}return n}async function mle(t,e){let{output:r,tmpDir:n,collectionsMetadataCache:i}=t;if(!n||!i){r.write("Missing required metadata",se.Error);return}let o=[];for await(let s of e){let a={type:"GET",url:s,headers:w_},c;try{c=await Du(a,r)}catch(d){r.write(`Failed to fetch collection ${s} - ${d==null?void 0:d.message}`,se.Error);continue}if(!c||c.length===0){r.write(`Did not receive a valid response from collection defined at: ${s}`,se.Error);continue}let l=Ve(c.toString()),u=JC(l.sourceInformation);l.sourceInformation=u,o.push(l)}if(o.length===0){r.write("No collections set. Exiting.",se.Warning);return}return await IH(t,o)}async function gle(t,e){let{output:r,tmpDir:n,fileHost:i}=t;if(!n||n===""){r.write("ERR: No tmpDir defined.",se.Error);return}let o=`devcontainer-definition-${e.id}`;if(!e.srcInfo){r.write(`ERR: No srcInfo defined for definition ${e.id}`,se.Error);return}let s=`https://github.com/${KC(e.srcInfo)}/releases/latest/download/${o}.tgz`,a={type:"GET",url:s,headers:w_},c;try{c=await Du(a,r)}catch(u){r.write(`Failed to fetch definition ${s} - ${u==null?void 0:u.message}`,se.Error);return}if(!c||c.length===0){r.write(`Did not receive a valid response from definition defined at: ${s}`,se.Error);return}let l=Lt.join(n,`${o}-${new Date().getMilliseconds()}.tgz`);return await i.writeFile(l,c),l}async function RH(t,e){return EH(t,e),{async openConfiguration(){return wH(e)},async createConfiguration(){return Qe.workspace.getConfiguration().get("remote.containers.experimentalAddDefinitionUX")||!1?PH(e):Wd(e)},async addExtensionToConfiguration(r){return CH(e,r)},async addPortLabelToConfiguration(r){return bH(e,r)},async configureContainerFeatures(){return mH(e)},createCompletionItemProvider(){return yH(e)}}}async function Wd(t){let{fileHost:e,output:r}=t;r.write(" -- CREATEDEVCONTAINER v1");let n=await C_();if(n){let i=Ee(n,e.platform),o=Ue(e.path,i),s=await Ka(e,o);if(s){let c="Continue";if(await Qe.window.showInformationMessage(`The workspace could fail to open in a container: ${s}`,{modal:!0},c)!==c)return!1}let a=await Kd(t,o);if(a){let c=await e.toCommonURI(a);return c&&Qe.window.showTextDocument(Qe.Uri.parse(c.toString())),!0}}return!1}async function C_(){let t=Qe.workspace.workspaceFile,e=Qe.workspace.workspaceFolders,r;if(t){if(t.scheme==="untitled"){await Hg();return}r=t}else if(e&&e.length)if(e.length>1){let n=await Qe.window.showWorkspaceFolderPick({placeHolder:"Select a folder to create a container configuration for"});n&&(r=n.uri)}else r=e[0].uri;return r}function Ar(t,e,r,n,i,o,s){if(t.value="",t.title=n||"Add Development Container Configuration Files",t.placeholder=r,t.canSelectMany=!!i,Array.isArray(e))if(t.items=e,i)t.selectedItems=e.filter(l=>l.picked);else{let l=e.find(u=>u.picked);l&&(t.activeItems=[l])}t.buttons=o?Array.isArray(o)?o:[Qe.QuickInputButtons.Back]:[];let a=[],c=new Promise((l,u)=>{if(Array.isArray(e)||(t.busy=!0,e.then(d=>{if(t.busy=!1,t.items=d,i)t.selectedItems=d.filter(f=>f.picked);else{let f=d.find(p=>p.picked);f&&(t.activeItems=[f])}},d=>{t.busy=!1,u(d)})),a.push(t.onDidAccept(()=>{let d=i?t.selectedItems.slice():t.selectedItems[0];l(Array.isArray(o)?{pick:d,button:"ok"}:d),a.forEach(f=>f.dispose())})),t.buttons.length&&a.push(t.onDidTriggerButton(d=>{let f=i?t.selectedItems.slice():t.activeItems[0];l(o===!0?"back":{pick:f,button:d}),a.forEach(p=>p.dispose())})),a.push(t.onDidHide(()=>{a.forEach(d=>d.dispose()),t.dispose(),l(void 0)})),s){let d;a.push(t.onDidChangeValue(f=>{let p=f.trim().toLowerCase(),h=!p||t.items.find(m=>m.label.toLowerCase()===p);if(h&&d)t.items=t.items.filter(m=>m!==d),d=void 0;else if(!h){let m=t.items.filter(g=>g!==d);m.push(d={label:`Other: ${f}`,value:f}),t.items=m}}))}});return t.show(),c}var b_={label:"Learn More",description:"Documentation on predefined container definitions",alwaysShow:!0,type:"help"};async function Kd(t,e){let{fileHost:r,telemetry:n}=t,i=await n,o=await Gd(r,e),a=!!Ao(o==null?void 0:o.object)&&!!o;if(a){vr(i,"exists");let l=Ee(o.uri,r.platform);if(!await Qe.window.showWarningMessage(`Dev Container configuration '${r.path.relative(e.configFolderPath,l)}' file already exists.`,{modal:!0},"Continue")){let d=await r.toCommonURI(l);d&&Qe.window.showTextDocument(Qe.Uri.parse(d.toString()));return}}let c=Qe.window.createQuickPick();return c.ignoreFocusOut=!0,E_(ae(V({},t),{quickPick:c,replaceExistingConfig:a,existingConfig:o,telemetry:i,workspace:e,codespaces:!!t.codespaces,tmpDir:void 0,indexes:void 0,collectionsMetadataCache:void 0,useEmbeddedV1PackagedCache:void 0}))}async function Qg(){return await xle(void 0)}async function E_(t){let{fileHost:e,workspace:r,telemetry:n,existingFilesLearnMoreLink:i}=t,o=await e.readDir(r.rootFolderPath),s=o.filter(p=>/docker.*compose/i.test(p)).map(p=>e.path.join(r.rootFolderPath,p)),a=o.filter(p=>/dockerfile/i.test(p)).map(p=>e.path.join(r.rootFolderPath,p)),c=a.map(p=>{let h=e.path.basename(p);return{label:`From '${h}'`,description:UH(e,p),dockerfile:h,dockerfilePath:p,detail:`Refer to the existing '${h}' in the container configuration`,type:"dockerfile"}}),l=s.map(p=>{let h=e.path.basename(p);return{label:`From '${h}'`,description:UH(e,p),dockerComposeFile:h,dockerComposePath:p,detail:`Refer to the existing '${h}' in the container configuration`,type:"dockerComposeFile"}});if(!(a.length>0||s.length>0))return Xg(t,void 0);let d={label:"From a predefined container configuration definition...",detail:"Use a base configuration from the container definition registry",alwaysShow:!0,type:"predefined"},f=await Ar(t.quickPick,[d,...c,...l,...i?[b_]:[]],"How would you like to create your container configuration?");if(!f){vr(n,"canceled");return}if(f.type==="help"){vr(n,"help"),Qe.env.openExternal(i);return}if(f.type==="predefined")return Xg(t,()=>E_(t));if(f.type==="dockerComposeFile")return Ele(t,f.dockerComposePath,()=>E_(t));if(f.type==="dockerfile")return ble(t,f.dockerfilePath)}function OH(t){let e=t.metaData.get("categories");return e?e.trim().split(", ").indexOf("Core")>-1:!1}async function vle(t){let{fileHost:e,workspace:r,predefinedDefinitionsLearnMoreLink:n}=t,i=t.stats||(t.stats=await pH(e,r)),o=await HH(t,u_.bind(null,i)),s=[];i.mostPopularFileType.length===0?s=await Sle(t):s=o.filter(c=>c.recommendationScore&&c.recommendationScore>0&&OH(c));let a;return s.length>0?a=[{label:"Show All Definitions...",detail:"Show all available predefined container definitions.",alwaysShow:!0,type:"showAll"},...n?[b_]:[],...s]:a=[...n?[b_]:[],...o],{items:a,stats:i}}async function Xg(t,e){let{telemetry:r,predefinedDefinitionsLearnMoreLink:n}=t,i=vle(t),{infoButton:o,sub:s}=LH(t),a=i.then(l=>l.items.map(u=>u.type==="baseConfiguration"?ae(V({},u),{buttons:[o]}):u)),c=await Ar(t.quickPick,a,"Select a container configuration definition",void 0,void 0,!!e);if(s.dispose(),c==="back")return e();if(!c){vr(r,"canceled");return}if(c.type==="help"){vr(r,"help"),Qe.env.openExternal(n);return}if(c.type==="showAll")return NH(t,(await i).stats,()=>Xg(t,e));if(c.type==="baseConfiguration")return FH(t,c,()=>Xg(t,e))}async function NH(t,e,r){let{telemetry:n}=t,i=await HH(t,u_.bind(null,e)),{infoButton:o,sub:s}=LH(t),a=i.map(l=>l.type==="baseConfiguration"?ae(V({},l),{buttons:[o]}):l),c=await Ar(t.quickPick,a,"Select a container configuration definition",void 0,void 0,!0);if(s.dispose(),c==="back")return r();if(c&&c.type==="baseConfiguration")return FH(t,c,()=>NH(t,e,r));vr(n,"canceled")}function LH(t){let e={iconPath:new Qe.ThemeIcon("info"),tooltip:"Open Documentation"},r=t.quickPick.onDidTriggerItemButton(n=>{let i=`https://github.com/microsoft/vscode-dev-containers/blob/main/containers/${Fe.basename(n.item.definitionFolder)}/README.md`;Qe.env.openExternal(Qe.Uri.parse(i))});return{infoButton:e,sub:r}}async function FH(t,e,r){let{telemetry:n}=t,i=await yle(t,e);if(!i){vr(n,"canceled");return}return i==="back"?r():(vr(n,"definition",Fe.basename(i.definitionFolder)),__(t,i))}async function __(t,e){let{quickPick:r}=t;r.busy=!0,r.enabled=!1;try{return await Tle(t,e)}finally{r.hide()}}async function yle(t,e){let r=Ve(e.configText);if(r.configFilePath=Ce.file(e.configFilePath),mt(r))return wle(t,e,r,async()=>"back",(n,i)=>MH(t,n,r,i));if("dockerComposeFile"in r){let n=Jo(process.platform,Ce.file(e.configFilePath));return Cle(t,e,n,r,async()=>"back",(i,o)=>qH(t,i,n,r,o))}return zg(t,e,r,async()=>"back")}async function wle(t,e,r,n,i){var c;let o=hr({platform:process.platform},r),s=((c=r.build)==null?void 0:c.args)||{},a=await $H(o,s);return async function l(u,d,f){if(!d.length)return i(ae(V({},e),{configText:u}),f);let p=d[0],h=await Ar(t.quickPick,p.items,p.placeholder,void 0,void 0,!0);if(!h)return;if(h==="back")return f();let m=u;if(h.value!==p.default){let g=st(m,["build","args",p.name],h.value,{formattingOptions:{}});m=St(m,g)}return l(m,d.slice(1),()=>l(u,d,f))}(e.configText,a,n)}async function MH(t,e,r,n){var u;let i=hr({platform:process.platform},r),o=((u=r.build)==null?void 0:u.args)||{},{options:s,hasOptions:a}=await jH(i,o),c=s.length?await Ar(t.quickPick,s,a?`Select the options for the '${e.label}' dev container`:`Select the install options for the '${e.label}' dev container`,void 0,!0,!0):[];if(!c)return;if(c==="back")return n();let l=e.configText;for(let d of s){let f=c.indexOf(d)!==-1;if(f!==d.default){let p=st(l,["build","args",d.name],String(f),{formattingOptions:{}});l=St(l,p)}}return zg(t,ae(V({},e),{configText:l}),r,s.length?()=>MH(t,e,r,n):n)}async function Cle(t,e,r,n,i,o){var a;let s=await qt(r,n);if(s.length&&await r.isFile(s[0])){let c=e.files||{},l=c[s[0]]||(await r.readFile(s[0])).toString(),u=xr(l),d=((u==null?void 0:u.services)||{})[n.service]||{},f=t.workspace.rootFolderPath,p=Gg(r,s,f,d);if(p){let h=n.configFilePath,m=$i(r,h,p),g=((a=d.build)==null?void 0:a.args)||{},v=await $H(m,g),w;return async function b(C,S){if(!C.length)return w&&(c[s[0]]=w.toString()),o(ae(V({},e),{files:c}),S);let P=C[0],_=await Ar(t.quickPick,P.items,P.placeholder,void 0,void 0,!0);if(!!_){if(_==="back")return S();if(_.value!==P.default){w||(w=Ji.parseDocument(l,{lineCounter:new Ji.LineCounter}));let k=w.getIn(["services","app","build"]);k.has("args")||k.set("args",new Ji.YAMLMap),k.get("args").set(P.name,_.value)}return b(C.slice(1),()=>b(C,S))}}(v,i)}}return o(e,i)}async function qH(t,e,r,n,i){var c;let o=!1,s=e.files||{},a=await qt(r,n);if(a.length&&await r.isFile(a[0])){let l=s[a[0]]||(await r.readFile(a[0])).toString(),u=xr(l),d=((u==null?void 0:u.services)||{})[n.service]||{},f=t.workspace.rootFolderPath,p=Gg(r,a,f,d);if(p){let h=n.configFilePath,m=$i(r,h,p),g=((c=d.build)==null?void 0:c.args)||{},{options:v,hasOptions:w}=await jH(m,g);o=!!v.length;let b=v.length?await Ar(t.quickPick,v,w?`Select the options for the '${e.label}' dev container`:`Select the install options for the '${e.label}' dev container`,void 0,!0,!0):[];if(!b)return;if(b==="back")return i();let C;for(let S of v){let P=b.indexOf(S)!==-1;if(P!==S.default){C||(C=Ji.parseDocument(l,{lineCounter:new Ji.LineCounter}));let _=C.getIn(["services","app","build"]);_.has("args")||_.set("args",new Ji.YAMLMap),_.get("args").set(S.name,String(P))}}C&&(s[a[0]]=C.toString())}}return zg(t,ae(V({},e),{files:s}),n,o?()=>qH(t,e,r,n,i):i)}async function $H(t,e){let r=(await Oe(t.fsPath)).toString(),n=/^#\s*\[Choice\]\s*([^:\r\n]+):(.*)\r?\nARG\s+([^=\s]+)="?([^"\r\n]*)"?\s*$/gm,i,o=[];for(;i=n.exec(r);)o.push(i);return o.map(([,s,a,c,l])=>{let u=e[c]||l,d=a.trim().split(",").map(p=>p.trim()).map(p=>({label:p,description:p===u?"(default)":void 0,value:p})),f=d.findIndex(p=>p.value===u);return f!==-1&&d.unshift(...d.splice(f,1)),{placeholder:s||c,name:c,default:u,items:d}})}async function jH(t,e){let r=(await Oe(t.fsPath)).toString(),n=/^#\s*\[(Option|Install)\]\s*(.+)\r?\nARG\s+([^=\s]+)="?(true|false)"?\s*$/gm,i,o=[];for(;i=n.exec(r);)o.push(i);let s=o.map(([,c,l,u,d])=>{let p=(e[u]||d)==="true";return{type:c.toLowerCase(),label:l||u,picked:p,name:u,default:p}}),a=s.some(c=>c.type==="option");return a&&s.filter(c=>c.type==="install").forEach(c=>c.label=`Install ${c.label}`),{options:s,hasOptions:a}}function UH(t,e){let r=Qe.workspace.workspaceFolders||[];if(r.length<2)return;let n=r.find(i=>t.platform==="win32"?e.toLowerCase().startsWith(i.uri.fsPath.toLowerCase()):e.startsWith(i.uri.fsPath));return n&&n.name}async function ble(t,e){let{fileHost:r,workspace:n,telemetry:i}=t,s=(await Qg()).find(a=>Fe.basename(a.definitionFolder)==="docker-existing-dockerfile");if(s){let a=Fe.relative(s.definitionFolder,s.configFilePath),c=r.path.sep!==Fe.sep?a.replace(Fe.sep===Fe.win32.sep?/\\/g:/\//g,r.path.sep):a,l=r.path.resolve(n.configFolderPath,c),u=r.path.relative(r.path.dirname(l),e),d=r.platform==="win32"?u.replace(/\\/g,"/"):u,f="dockerFile"in Ve(s.configText)?["dockerFile"]:["build","dockerfile"],p=st(s.configText,f,d,{formattingOptions:{}}),h=St(s.configText,p);return vr(i,"dockerFile"),__(t,ae(V({},s),{configText:h}))}else{vr(i,"existingDockerfileDefinitionNotFound");return}}async function Ele(t,e,r){let{fileHost:n,workspace:i,telemetry:o}=t,s=(await n.readFile(e)).toString(),a=xr(s);if(!a){await Qe.window.showErrorMessage(`Invalid docker-compose file "${e}"`,{modal:!0});return}let c=a.version,l=Object.keys(a&&a.services||{}),u=l.length<2?l[0]||"":await Ar(t.quickPick,l.map(h=>({label:h,type:"service"})),"Select a service",void 0,void 0,!0);if(u==="back")return r();if(u===void 0){vr(o,"canceled");return}let d=typeof u=="string"?u:u.label,p=(await Qg()).find(h=>Fe.basename(h.definitionFolder)==="docker-existing-docker-compose");if(p){let h=Fe.relative(p.definitionFolder,p.configFilePath),m=n.path.sep!==Fe.sep?h.replace(Fe.sep===Fe.win32.sep?/\\/g:/\//g,n.path.sep):h,g=n.path.resolve(i.configFolderPath,m),v=n.path.relative(n.path.dirname(g),e),w=n.platform==="win32"?v.replace(/\\/g,"/"):v,b=Ve(p.configText).dockerComposeFile,C=Array.isArray(b)?b.slice(1):[],S=[w,...C],P=st(p.configText,["dockerComposeFile"],S,{formattingOptions:{}}),_=St(p.configText,P),k=st(_,["service"],d,{formattingOptions:{}}),T=St(_,k),A=C.reduce((j,J)=>(j[Ws({platform:process.platform},{configFilePath:Ce.file(p.configFilePath)},J).fsPath]=!0,j),{}),M=ae(V({},p),{configText:T,async copyFile(j,J){if(A[j]){let Y=this.files&&this.files[j]||(await Oe(j)).toString(),oe=xr(Y);oe.version&&c&&oe.version!==c&&(Y=Y.replace(new RegExp(`^(version:.*)(${oe.version.replace(/\./g,"\\.")})`,"m"),`$1${c}`));let re=Object.keys(oe&&oe.services||{});re.length&&(Y=Y.replace(new RegExp(`\\b${re[0]}\\b`),d)),await n.writeFile(J,Buffer.from(Y))}else{let Y=this.files&&this.files[j]?Buffer.from(this.files[j]):await Oe(j);await n.writeFile(J,Y)}}});return vr(o,"dockerComposeFile"),__(t,M)}else{vr(o,"existingDockerComposeDefinitionNotFound");return}}function vr(t,e,r){let n={outcome:e};r&&(n.definitionName=r),t.sendTelemetryEvent("createConfiguration",n)}function _le(t,e){let r=e.recommendationScore===void 0?0:e.recommendationScore,n=t.recommendationScore===void 0?0:t.recommendationScore;return r-n}var BH=["docker-existing-docker-compose","docker-existing-dockerfile"];async function HH(t,e){let{codespaces:r}=t,n=(await Qg()).filter(i=>BH.indexOf(Fe.basename(i.definitionFolder))===-1);return r&&(n=n.filter(i=>!/^\s*no\b/i.test(i.metaData.get("codespaces")||"yes"))),e?(await e(n),n.sort(_le)):n.sort((i,o)=>i.label.localeCompare(o.label))}async function Sle(t){let{codespaces:e}=t,r=(await Qg()).filter(n=>BH.indexOf(Fe.basename(n.definitionFolder))===-1);return r=r.filter(n=>OH(n)),e&&(r=r.filter(n=>!/^\s*no\b/i.test(n.metaData.get("codespaces")||"yes"))),r.sort((n,i)=>n.label.localeCompare(i.label))}async function xle(t){let e=!t;t=t!=null?t:await Si();let r=new AH.default,n=Fe.join(t,"containers"),i=Fe.join(t,"containers-readmes"),o=await en(n);return(await Promise.all(o.map(async a=>{var b;let c=Fe.join(n,a),l=await Eh(c),u=l&&await Ile(l);if(!u)return;let d=Ve(u);d.configFilePath=Ce.file(l);let[,f,p]=((b=d.name)==null?void 0:b.match(/^(.*)(\([^)]*\))$/))||[],h=(f==null?void 0:f.trim())||d.name||a,m=p,g,v=Fe.join(i,a,"README.md"),w=new Map;if(await ht(v))try{let C=await Oe(v,{encoding:"utf8"}),S=/\#\s*summary.*\n*(.*)/i.exec(C);if(S){let P=r.render(S[1]);g=Ple(P);let _=g.indexOf(". ");_!==-1&&(g=g.substr(0,_+1))}w=kle(C)}catch(C){console.error(C)}return{label:h,description:m,type:"baseConfiguration",detail:g,definitionFolder:c,configText:u,configFilePath:l,metaData:w,isV2:!e,basePath:t}}))).filter(a=>!!a)}function Ple(t){return t.replace(/<[^>]*>/g,"").trim().replace(/&#([0-9]+);/g,function(e,r){return String.fromCodePoint(parseInt(r,10))}).replace(/&#x([0-9a-f]+);/g,function(e,r){return String.fromCodePoint(parseInt(r,16))}).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,function(e){switch(e){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return e})}function kle(t){let e=new Map,r=!1,n=/^\s*\|\s*Metadata\s*\|\s*Value\s*\|/i,i=/^\s*\|/gi,o={categories:/^\s*\|\s*\*Categories\*\s*\|\s*(.*)\s*\|/i,contributors:/^\s*\|\s*\*Contributors\*\s*\|\s*(.*)\s*\|/i,definitionType:/^\s*\|\s*\*Definition type\*\s*\|\s*(.*)\s*\|/i,codespaces:/^\s*\|\s*\*Works in Codespaces\*\s*\|\s*(.*)\s*\|/i,languagesPlatforms:/^\s*\|\s*\*Languages, platforms\*\s*\|\s*(.*)\s*\|/i},s=t.toString().split(`
`);for(let a of s)if(!r)a.match(n)&&(r=!0);else{if(!a.match(i))break;for(let c in o){let l=a.match(o[c]);l&&l[1]&&e.set(c,l[1])}}return e}async function Ile(t){return await ht(t)?(await Oe(t)).toString():void 0}async function Tle(t,e){let{fileHost:r,workspace:n,replaceExistingConfig:i,existingConfig:o,output:s}=t,a=n.configFolderPath,c="Skip",l=(await Jg(e.definitionFolder)).map(f=>Fe.relative(e.definitionFolder,f)),u,d;for(let f of l){let p=Fe.join(e.definitionFolder,f),h=p===e.configFilePath,m=r.path.sep!==Fe.sep?f.replace(Fe.sep===Fe.win32.sep?/\\/g:/\//g,r.path.sep):f,g=r.path.join(a,m);if(h&&!i&&o){let v=Ve(e.configText);try{d=Ale(r,v,g,o)}catch(w){await Rle(w,r,g,m,s);return}g=Ee(o.uri,r.platform)}else if(await r.isFile(g)){let v=await Qe.window.showInformationMessage(`File '${m}' already exists, overwrite?`,{modal:!0},c,"Overwrite");if(!v)return;if(v===c)continue}if(await r.mkdirp(r.path.dirname(g)),h)u=g,await r.writeFile(g,Buffer.from(d||e.configText));else if(e.copyFile)await e.copyFile(p,g);else{let v=e.files&&e.files[p]?Buffer.from(e.files[p]):await Oe(p);await r.writeFile(g,v)}}return u}function Ale(t,e,r,n){var u,d,f,p,h,m,g,v,w,b,C,S,P,_;let i=n.text,o=Ee(n.uri,t.platform);if("image"in e)i=et(i,["image"],e.image);else if("dockerFile"in e){let k=il(t,r,o,e.dockerFile);if(i=et(i,["dockerFile"],k),e.context){let T=il(t,r,o,e.context);i=et(i,["context"],T)}}else if("build"in e){let k=il(t,r,o,e.build.dockerfile);if(i=et(i,["build","dockerfile"],k),e.build.context){let T=il(t,r,o,e.build.context);i=et(i,["build","context"],T)}i=et(i,["build","target"],e.build.target),i=et(i,["build","args"],e.build.args)}else if("dockerComposeFile"in e){let k=Dle(t,r,o,e.dockerComposeFile);i=et(i,["dockerComposeFile"],k),i=et(i,["service"],e.service),i=et(i,["workspaceFolder"],e.workspaceFolder)}e.features&&(i=et(i,["features"],e.features));let s=x_(((d=(u=e.customizations)==null?void 0:u.vscode)==null?void 0:d.settings)||e.settings,((p=(f=n.object.customizations)==null?void 0:f.vscode)==null?void 0:p.settings)||n.object.settings);((m=(h=n.object.customizations)==null?void 0:h.vscode)==null?void 0:m.settings)?((g=n.object.customizations)==null?void 0:g.vscode)?i=et(i,["customizations","vscode","settings"],s):n.object.customizations?i=et(i,["customizations","vscode"],{settings:s}):i=et(i,["customizations"],{vscode:{settings:s}}):i=et(i,["settings"],s);let a=S_(n.object.forwardPorts,e.forwardPorts);i=et(i,["forwardPorts"],a);let c=S_(((w=(v=n.object.customizations)==null?void 0:v.vscode)==null?void 0:w.extensions)||n.object.extensions,((C=(b=e.customizations)==null?void 0:b.vscode)==null?void 0:C.extensions)||e.extensions);if(((P=(S=n.object.customizations)==null?void 0:S.vscode)==null?void 0:P.extensions)?((_=n.object.customizations)==null?void 0:_.vscode)?i=et(i,["customizations","vscode","extensions"],c):n.object.customizations?i=et(i,["customizations","vscode"],{extensions:c}):i=et(i,["customizations"],{vscode:{extensions:c}}):i=et(i,["extensions"],c),"image"in e||mt(e)){let k=S_(n.object.mounts,e.mounts);i=et(i,["mounts"],k);let T=x_(e.containerEnv,n.object.containerEnv);i=et(i,["containerEnv"],T),i=et(i,["containerUser"],e.containerUser);let A=VH(n.object.runArgs,e.runArgs);i=et(i,["runArgs"],A)}i=et(i,["postCreateCommand"],e.postCreateCommand);let l=x_(e.remoteEnv,n.object.remoteEnv);return i=et(i,["remoteEnv"],l),i=et(i,["remoteUser"],e.remoteUser),i}function et(t,e,r){if(r===void 0)return t;let n=st(t,e,r,{formattingOptions:{}});return St(t,n)}function Dle(t,e,r,n){return Array.isArray(n)?n.map(i=>il(t,e,r,i)):il(t,e,r,n)}function il({path:t},e,r,n){let i=t.resolve(t.dirname(e),n);return t.relative(t.dirname(r),i)||"."}function S_(t,e){var r;return(r=VH(t,e))==null?void 0:r.filter((n,i,o)=>o.indexOf(n)===i)}function VH(t,e){if(!!(e==null?void 0:e.length))return(t||[]).concat(e)}function x_(t,e){if(!(!t||!Object.keys(t).length))return Object.assign({},t,e)}async function Gd(t,e){let r=await bh(t,e.configFolderPath);if(!r)return;let n=await zt(t).readDocument(r);if(!n)return;let i=Ve(n);return{uri:r,text:n,object:i}}async function Jg(t){let e=await en(t);return[].concat(...await Promise.all(e.map(async r=>{let n=Fe.join(t,r);return(await(0,DH.promisify)(TH.lstat)(n)).isDirectory()?Jg(n):n})))}async function Rle(t,e,r,n,i){i.write(Ne(t&&(t.stack||t.message)));let o=await e.toCommonURI(r),s=await Qe.window.showErrorMessage(`Could not update '${n}' due to errors in its content. Try fixing these first.`,{modal:!0},...o?["Open devcontainer.json"]:[]);o&&s&&Qe.window.showTextDocument(Qe.Uri.parse(o.toString()))}async function zd(t,e){return(await Ole(e)).find(n=>{var i,o;return(o=(i=n.build)==null?void 0:i.tags)==null?void 0:o.some(s=>{let l=`^mcr.microsoft.com/vscode/devcontainers/${s.split(/\$\{[^}]*\}/).map(u=>u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g").join(".*")}$`;return new RegExp(l).test(t)})})}async function Ole(t){let e=Fe.join(t,"manifests");return(await Promise.all((await en(e)).map(r=>m_(r,e)))).filter(Boolean)}async function m_(t,e){let r=Fe.join(e,t,"definition-manifest.json");if(await ht(r)){let n=(await Oe(r)).toString(),i=Ve(n);return i.definitionName=t,i}}async function Kg(){let t=await pl(Fe.join(__dirname,"node_modules","vscode-dev-containers"))?[]:await pl(Fe.join(__dirname,"..","node_modules","vscode-dev-containers"))?[".."]:["..",".."];return Fe.join(__dirname,...t)}async function Si(){return Fe.join(await Kg(),"node_modules","vscode-dev-containers")}async function WH(t,e,r,n,i,o){let s=Cn(r);if(Yt(s)&&!await Me.workspace.requestWorkspaceTrust({message:od}))return Wt(s.hostPath)?(await Me.window.showInformationMessage("The WSL folder is currently not trusted.",{modal:!0,detail:"Trust is required to build a dev container from it. The folder will now reopen in WSL."}),await Me.commands.executeCommand("remote-containers.reopenInWSL")):(await Me.window.showInformationMessage("The local folder is currently not trusted.",{modal:!0,detail:"Trust is required to build a dev container from it. The folder will now reopen locally."}),await Me.commands.executeCommand("remote-containers.reopenLocally")),new Promise(()=>{});let a=yn(s);return a&&!await sd(t,s.repositoryPath)?(await Me.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{})):ae(V({},await Nle(s,t,i,o,e,r,n)),{isTrusted:a||void 0})}async function Nle(t,e,r,n,i,o,s){let{log:a,logFilePath:c}=r,l="hostPath"in t&&Wt(t.hostPath)&&!!Me.extensions.getExtension("ms-vscode-remote.remote-wsl");l&&Me.commands.executeCommand("setContext","canReopenInWSL",!0);let u=t.settings,d="localDocker"in t&&t.localDocker,f=!!(u&&"host"in u&&u.host&&u.host.startsWith("ssh://")&&!d)&&(!!Me.extensions.getExtension("ms-vscode-remote.remote-ssh")||!!Me.extensions.getExtension("ms-vscode-remote.remote-ssh-nightly"));f&&Me.commands.executeCommand("setContext","canReopenInSSH",!0);let p=!(u&&"host"in u&&u.host&&u.host.startsWith("ssh://")&&!d);p&&Me.commands.executeCommand("setContext","canReopenLocally",!0);let h;return Me.window.withProgress({location:Me.ProgressLocation.Notification,title:jc,cancellable:!1},async m=>{let g=ai(e.extensionPath,Gi,a),{cliHost:v,originalCwd:w}=await Lle(t,e.extensionPath,Ki(),g,i.product,a),b=V(V({},await g),kc(v,t.settings)),C=V(V({},v.env),b),S=await $c({authority:o,extensionContext:e,sessionStart:r.sessionStart,progress:m,cliHost:v,env:C,cwd:v.cwd,isLocalContainer:am(b),telemetry:i,output:a,logFilePath:c,allowSystemConfigChange:!0,postCreate:n}),P={async createConfiguration(_,k){return Kd({fileHost:k,telemetry:i,output:a,existingFilesLearnMoreLink:ed,predefinedDefinitionsLearnMoreLink:td,openConfigurationCommandId:Zu},Ue(P_.posix,_))},async showError(_,...k){return await Me.window.showErrorMessage(_,{modal:!0},...k)}};return h={common:S,parsedAuthority:t,dockerCLI:jn(),dockerComposePath:gi(),dockerComposeCLI:li({exec:S.cliHost.exec,env:V(V({},b),Ot(b)),output:S.output},jn(),gi()),dockerEnv:b,workspaceMountConsistencyDefault:Rm(),updateRemoteUserUIDOnMacOS:Om(),cacheMount:Nm()?"volume":"none",configurationTracking:Dm(e.workspaceState),removeOnStartup:await uq(e,o),buildNoCache:await fq(e,o),onRemoveOnShutdownChanged:s,userRepositoryConfigurationPaths:vi(),originalCwd:w,configProvider:P,development:e.extensionMode===Me.ExtensionMode.Development},await cm(h),UL(h)}).then(m=>(s(async g=>{await dq(e,g&&m.dockerContainerId||!1),await nd(e,g==="rebuildNoCache"?o:!1)}),zi(i,k_(t),"success",h==null?void 0:h.common,m.config,m.properties),m),m=>{var _;let g=m instanceof ye?m:new ye({description:"An error occurred setting up the container.",originalError:m});yn(t)&&(g.volumeName=t.volumeName,g.volumeName===wn&&(g.volumeName=vn(t.repositoryPath).uniqueVolumeName),g.repositoryPath=t.repositoryPath,g.folderPath=t.folder),zi(i,k_(t),"failure",h==null?void 0:h.common,g.config,g.containerProperties,g);let v="onTheSide",w=(_=g.data)==null?void 0:_.fileWithError,b=w&&(h==null?void 0:h.common.cliHost.path.basename(w))||"devcontainer.json",C=Yt(t)?[{id:"openFileWithErrorLocally",title:`Open ${b} Locally`,isLastAction:!0,applicable:async(k,T)=>p&&!(T&&l),async execute(){let k=h==null?void 0:h.common.cliHost,T=w?k.type==="wsl"?await k.toCommonURI(w):Ce.file(w):void 0;await id(e,t.hostPath,T,c,v);let A=Me.Uri.file(t.hostPath);await Me.commands.executeCommand("vscode.openFolder",A)}},{id:"openFileWithErrorinWSL",title:`Open ${b} in WSL`,isLastAction:!0,applicable:async()=>l,async execute(){let k=Me.Uri.parse((await tc(t.hostPath,a)).toString());await id(e,k.path,w?k.with({path:w}):void 0,c,v),await Me.commands.executeCommand("vscode.openFolder",k)}},{id:"openFileWithErrorinSSH",title:`Open ${b} in SSH`,isLastAction:!0,applicable:async()=>f,async execute(){let k=t.settings,T=Me.Uri.parse(ou(k.host,t.hostPath).toString());await id(e,T.path,w?T.with({path:w}):void 0,c,v),await Me.commands.executeCommand("vscode.openFolder",T)}}]:[],S=yn(t)?t.inspectVolume?[Lo]:[{id:"reopenInRecoveryContainer",title:`Open ${b} in Recovery Container`,isLastAction:!0,applicable:(k,T)=>!0,execute:async k=>{await id(e,t.repositoryPath,w?Ce.file(w).with({scheme:"vscode-remote"}):void 0,c,v),await Me.commands.executeCommand("remote-containers.inspectVolume",k.volumeName,k.repositoryPath,k.folderPath)}},Lo,{id:"openRepository",title:"Open Repository",isLastAction:!1,applicable:(k,T)=>!T,async execute(){Me.env.openExternal(Me.Uri.parse(t.repositoryPath))}}]:[],P=Fu(t)?[Lo]:[];return g.actions=[...Tc,ra,v1,...C,...S,...P,Ic,ta],Fle(g),Fo(g,k_(t),i,!0,r)})}async function Lle(t,e,r,n,i,o){let{settings:s}=t,a=s&&"host"in s&&s.host||void 0;if(Yt(t)){let c=Ue(P_,t.hostPath),l=c.rootFolderPath,u=await Ln(a,c.rootFolderPath,mi,Un(),e,r,i,o,yi,{sshAskpassEnv:n,settings:qc(),localDocker:t.localDocker});return u.cwd!==c.rootFolderPath&&(c=Ue(u.path,c.isWorkspaceFile?u.path.join(u.cwd,P_.basename(t.hostPath)):u.cwd)),o.write(`Setting up container for folder or workspace: ${c.workspaceOrFolderPath}\r
`),sm(o,t.settings),t.localDocker&&o.write(`Local Docker: ${t.localDocker}\r
`),{cliHost:u,originalCwd:l}}else{let c=await Ln(a,void 0,mi,Un(),e,r,i,o,yi,{sshAskpassEnv:n,settings:qc()});return{cliHost:c,originalCwd:await c.homedir()}}}function k_(t){return Yt(t)?"config":yn(t)?t.inspectVolume?"volume":"repository":"volume"}function Fle(t){let e=(t.originalError&&(t.originalError.cmdOutput||t.originalError.message)||"").toLowerCase();e&&e.indexOf("drive has not been shared")!==-1?t.description="The drive of the workspace folder is not shared. Share it in the Docker settings first.":e&&(e.indexOf("port is already allocated")!==-1||e.indexOf("address already in use")!==-1)?t.description="A port the container is setup to bind to is already in use. See the Dev Containers terminal for details.":e&&e.indexOf('invalid mount config for type "bind"')!==-1?t.description="A mount config is invalid. Make sure it has the right format and a source folder that exists on the machine where the Docker daemon is running.":e&&e.indexOf("deb.debian.org/debian/dists/jessie-updates")!==-1&&(t.description="The base image references the obsolete Debian 8 update repository.",t.actions.push({id:"learnMore",title:"Learn More",isLastAction:!1,applicable:(r,n)=>n,async execute(){Me.env.openExternal(Me.Uri.parse("https://aka.ms/vscode-remote/containers/troubleshooting/jessie"))}}))}var xi=K(require("vscode"));var GH=K(require("util"));var Vn=K(require("path"));async function zH(t,e,r){let{common:n}=t,i;try{let{commit:o}=n.product;if(!o)throw new ye({description:"Cannot attach without commit id for the remote extension host."});i=await _c(t,e.Id,r.workspaceFolder,r.remoteUser);let s=zt(n.cliHost,i.shellServer),{hostOrContainerPort:a,hostPortServer:c,connectionToken:l,webConnectionToken:u,remoteEnv:d,serverDownloaded:f}=await ch(n,i,r,async()=>{},Po);if(Mle(n,i,s,r.configFilePath),$le(n,i,s,r.configFilePath),bc(n,i,a,l,u,e,Ue(Vn.posix,"/")),c){let p=async()=>{await(0,GH.promisify)(c.close.bind(c))()};n.shutdowns.push(p)}return{params:n,properties:i,config:r,resolvedAuthority:{host:Oo,port:a,connectionToken:l,extensionHostEnv:d},webConnectionToken:u,tunnelInformation:n.isLocalContainer?Ec(e):{},dockerParams:t,dockerContainerId:e.Id,serverDownloaded:f}}catch(o){let s=o instanceof ye?o:new ye({description:"An error occurred attaching to the container.",originalError:o});throw e&&(s.manageContainer=!1,s.params=t.common,s.containerId=e.Id,s.dockerParams=t),i&&(s.containerProperties=i),s.config=r,s}}function Mle(t,e,r,n){e.installFolder&&KH(t,e,r,n).catch(console.error)}async function KH(t,e,r,n){try{await Fi(t,e,["/bin/sh","-c",`# Watch installed extensions
			trap "exit 0" 15
			old=\`ls -A --full-time\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],uR(e),{print:"off"});return}catch(i){(i==null?void 0:i.code)===1?await qle(t,e,r,n):(i==null?void 0:i.code)!==2&&await oi(6e4)}return KH(t,e,r,n)}async function qle(t,e,r,n){let i=await mR(t,e);await SC(n,async()=>{var s,a;let o=await rv(t.cliHost,r,n,e.remoteWorkspaceFolder);if(!Ule(((a=(s=o.config.customizations)==null?void 0:s.vscode)==null?void 0:a.extensions)||[],i)){let c=st(o.text,["extensions"],i,{formattingOptions:{}});await pn(r,n,c,o.text)}})}function $le(t,e,r,n){YH(t,e,r,n).catch(console.error)}async function YH(t,e,r,n){try{let i=ah(e),o=Vn.posix.dirname(i),s=Vn.posix.basename(i);await Fi(t,e,["/bin/sh","-c",`# Watch machine settings
			trap "exit 0" 15
			old=\`ls -A --full-time ${s} 2>/dev/null || true\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time ${s} 2>/dev/null || true\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],o,{print:"off"});return}catch(i){(i==null?void 0:i.code)===1?await jle(t.cliHost,e,r,n):(i==null?void 0:i.code)!==2&&await oi(6e4)}return YH(t,e,r,n)}async function jle(t,e,r,n){let{stdout:i}=await e.shellServer.exec(`cat ${ah(e)}`),o=Ve(i)||{};await SC(n,async()=>{var a,c;let s=await rv(t,r,n,e.remoteWorkspaceFolder);if(JSON.stringify(((c=(a=s.config.customizations)==null?void 0:a.vscode)==null?void 0:c.settings)||{})!==JSON.stringify(o)){let l=st(s.text,["settings"],o,{formattingOptions:{}});await pn(r,n,l,s.text)}})}function Ule(t,e){let r=new Set(t),n=new Set(e);return r.size===n.size&&t.every(i=>n.has(i))}async function JH(t,e){let r=ev(t,e.Name),n=await nV(r);return n||(r=ZH(t,e.Config.Image),n=await nV(r)),n}async function QH(t,e,r,n,i){let o=Ce.file(ev(r,n.Name)),s=await rv(t,e,o,i);return s.exists||(o=Ce.file(ZH(r,n.Config.Image)),s=await rv(t,e,o,i)),s}function Zg(t){return Vn.join(t,"nameConfigs")}function ev(t,e){let r=e.startsWith("/")?e.substr(1):e;return Vn.join(Zg(t),`${tV(r)}.json`)}async function XH(t){try{let e=Zg(t);return(await en(e)).filter(n=>n.endsWith(".json")).map(n=>({name:rV(n.substr(0,n.length-5)),uri:Ce.file(Vn.join(e,n))}))}catch(e){if(e&&e.code==="ENOENT")return[];throw e}}function tv(t){return Vn.join(t,"imageConfigs")}function ZH(t,e){return Vn.join(tv(t),`${tV(e)}.json`)}async function eV(t){try{let e=tv(t);return(await en(e)).filter(n=>n.endsWith(".json")).map(n=>({image:rV(n.substr(0,n.length-5)),uri:Ce.file(Vn.join(e,n))}))}catch(e){if(e&&e.code==="ENOENT")return[];throw e}}function tV(t){return t.replace(/[:/%]/g,e=>`%${e.charCodeAt(0).toString(16)}`)}function rV(t){return t.replace(/%([0-9a-f]{2})/g,(e,r)=>String.fromCharCode(parseInt(r,16)))}async function nV(t){if(!await ht(t))return;let e=await Oe(t),r=Ve(e.toString())||{},n=pu(r);return n.configFilePath=Ce.file(t),n}async function rv(t,e,r,n){let i=await e.readDocument(r),o=i||qi,s=Ve(o)||{},a=pu(s),c=rh({platform:t.platform,configFile:r,env:t.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:n},a);return c.configFilePath=r,{exists:!!i,text:o,config:c}}async function iV(t,e,r,n,i){return await Uo(t)?ae(V({},await Ble(t,e,r,n,i)),{isTrusted:!0}):(await xi.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function Ble(t,e,r,n,i){let o,s;return xi.window.withProgress({location:xi.ProgressLocation.Notification,title:jc,cancellable:!1},async a=>{var c,l;try{let u=lm(r),{settings:d}=u,f="containerName"in u?u.containerName:u.containerId;n.log.write(`Setting up container: ${f}\r
`),sm(n.log,d);let p=d&&"host"in d&&d.host||void 0,h=ai(t.extensionPath,Gi,n.log),m=await Ln(p,u.cwd,mi,Un(),t.extensionPath,Ki(),e.product,n.log,yi,{sshAskpassEnv:h,settings:qc()}),g=jn(),v=V(V({},await h),kc(m,d)),w=li({exec:m.exec,env:V(V({},v),Ot(v)),output:n.log},jn(),gi()),b=V(V({},m.env),v),C=await zr({cliHost:m,dockerCLI:g,dockerComposeCLI:w,dockerComposePath:gi(),env:b,output:n.log},"containerName"in u?u.containerName:u.containerId);if(!C)throw new ye({description:`Cannot attach to the container with name/id ${f}, it no longer exists.`,data:{reload:!1,attach:!0}});let S=(l=(c=(xi.workspace.workspaceFolders||[void 0])[0])==null?void 0:c.uri)==null?void 0:l.path,P=await QH(m,Fn,t.globalStoragePath,C,S);if(S&&P.config.workspaceFolder!==S){let A=st(P.text,["workspaceFolder"],S,{formattingOptions:{}});await pn(Fn,P.config.configFilePath,A,P.text)}o={common:await $c({authority:r,extensionContext:t,sessionStart:n.sessionStart,progress:a,cliHost:m,env:b,cwd:u.cwd||await m.homedir(),isLocalContainer:am(v),telemetry:e,output:n.log,logFilePath:n.logFilePath,allowSystemConfigChange:!1,postCreate:i}),parsedAuthority:u,dockerCLI:g,dockerComposePath:gi(),dockerComposeCLI:w,dockerEnv:v,workspaceMountConsistencyDefault:Rm(),updateRemoteUserUIDOnMacOS:Om(),cacheMount:Nm()?"volume":"none",configurationTracking:Dm(t.workspaceState),userRepositoryConfigurationPaths:[],development:t.extensionMode===xi.ExtensionMode.Development},await cm(o);let _=xc(d),k=C.Name.startsWith("/")?C.Name.substr(1):C.Name,T=`Container ${C.Config.Image} (${k})${_}`;if(o.common.setWorkspaceName(T),C.State.Status!=="running")throw new ye({description:`Cannot attach to the container ${C.Config.Image} (${k})${_}, it is not running.`,params:o.common,containerId:C.Id,dockerParams:o,data:{reload:!1,start:!0}});return await zH(o,C,P.config)}catch(u){let d=u instanceof ye?u:new ye({description:"An error occurred attaching to the container.",originalError:u});throw d.actions=[y1,w1,...Tc,ra,Lo,Ic,ta],d}}).then(a=>(zi(e,"attach","success",o==null?void 0:o.common,s,a.properties),a),a=>{let c=a instanceof ye?a:new ye({description:"An error occurred attaching to the container.",originalError:a});return zi(e,"attach","failure",o==null?void 0:o.common,s,c.containerProperties,c),Fo(c,"attach",e,!0,n)})}var at=K(require("vscode"));var vt=K(require("vscode")),oV=K(require("path")),va=K(require("os")),Yd=K(require("fs")),sV=K(require("child_process")),aV=K(Ga());async function nv(t){Wle()?await new cV().downloadAndInstallDocker(t):uV()?await new lV().downloadAndInstallDocker(t):await vt.env.openExternal(vt.Uri.parse("https://aka.ms/download-docker-linux-vscode"))}var I_=class{async downloadAndInstallDocker(e){if(await this.preInstallCheck(e)){let n="Downloading Docker installer...",i="The Docker Desktop installation is started. Complete the installation and then start Docker Desktop.",o;try{o=await vt.window.withProgress({location:vt.ProgressLocation.Notification,title:n},async()=>this.downloadInstaller())}catch(a){let c="Downloading the Docker Desktop installer failed. Do you want to manually download and install?",l="Download";throw this.handleError(c,l,this.downloadUrl),a}let s=this.getInstallCommand(o);vt.window.showInformationMessage(i);try{await this.install(o,s,e)}catch(a){let c=`Docker Desktop installation failed. ${a}`,l="Install Instruction";throw this.handleError(c,l,"https://aka.ms/AA37qtj"),a}}}async preInstallCheck(e){let r=!0;if(await new dV(e).isDockerInstalledRealTimeCheck()){let n="Docker Desktop is already installed. Would you like to reinstall?",i="Reinstall";r=await vt.window.showInformationMessage(n,{modal:!0},i)!==void 0}return r}async downloadInstaller(){let e=`${Vle()}.${this.fileExtension}`;return await zle(this.downloadUrl,e),e}handleError(e,r,n){vt.window.showErrorMessage(e,{title:r}).then(i=>{i&&vt.env.openExternal(vt.Uri.parse(n))})}},cV=class extends I_{constructor(){super(...arguments);this.downloadUrl="https://aka.ms/download-docker-windows-vscode";this.fileExtension="exe"}getInstallCommand(e){return`"${e}"`}async install(e,r,n){try{n.write(`Executing command ${r}`),await pV(r,n)}finally{try{await Yd.promises.stat(e),await Yd.promises.unlink(e)}catch{}}}},lV=class extends I_{constructor(){super(...arguments);this.downloadUrl="https://aka.ms/download-docker-mac-vscode";this.fileExtension="dmg"}getInstallCommand(e){return`chmod +x '${e}' && open '${e}'`}async install(e){let r="Docker Install",n=this.getInstallCommand(e);await Gle(n,r,{addDockerEnv:!1})}},Hle=0;function Vle(){return oV.join(va.tmpdir(),`${vt.env.sessionId}-${Hle++}.tmp`)}function Wle(){return va.platform()==="win32"}function uV(){return va.platform()==="darwin"}async function Gle(t,e,r){var a,c,l;let n;r=r!=null?r:{},r.addDockerEnv&&(n={});let i=new vt.Task({type:"shell"},(a=r.workspaceFolder)!=null?a:vt.TaskScope.Workspace,e,"Docker",new vt.ShellExecution(t,{cwd:r.cwd||((l=(c=r.workspaceFolder)==null?void 0:c.uri)==null?void 0:l.fsPath)||va.homedir(),env:n}),[]);r.alwaysRunNew&&(i.definition.idRandomizer=Math.random()),r.focus&&(i.presentationOptions={focus:!0});let o=await vt.tasks.executeTask(i);return new Promise((u,d)=>{let f=vt.tasks.onDidEndTaskProcess(p=>{p.execution===o&&(f.dispose(),p.exitCode&&r.rejectOnError&&d(p.exitCode),u())})})}var dV=class{constructor(e){this.output=e;this.maxCacheTime=3e4;this.isDockerInstalledLazy=new hV(async()=>{let r=await this.isDockerInstalledRealTimeCheck();return r&&this.isDockerInstalledLazy.cacheForever(),r},this.maxCacheTime)}async isDockerInstalled(){return await this.isDockerInstalledLazy.getValue()}async isDockerInstalledRealTimeCheck(){try{return await pV("docker -v",this.output),!0}catch{return!1}}};async function zle(t,e){await new Promise((r,n)=>{let i=Yd.createWriteStream(e);aV.https.get(t,s=>{if(s.statusCode<200||s.statusCode>299){n(new Error(`Failed to download Docker (${t}): HTTP ${s.statusCode} - ${s.statusMessage}`));return}s.on("error",n),s.pipe(i),s.on("end",r)}).on("error",n)})}var fV=10*1024;async function pV(t,e,r,n){let i=Buffer.alloc(r&&r.maxBuffer||fV),o=Buffer.alloc(r&&r.maxBuffer||fV);return await Kle(t,e,r,n,i,n,o),{stdout:T_(i),stderr:T_(o)}}async function Kle(t,e,r,n,i,o,s,a){return await new Promise((c,l)=>{let u,d=0,f=0;r=r||{},r.shell=!0,Yle(r,e);let p=sV.spawn(t,r);p.on("error",h=>(u&&(u.dispose(),u=void 0),l(h))),p.on("close",(h,m)=>{if(u&&(u.dispose(),u=void 0),a&&a.isCancellationRequested)return l(new Error("User canceled"));if(h){let g=`Process '${t.length>50?`${t.substring(0,50)}...`:t}' exited with code ${h}`;s&&(g+=`
Error: ${T_(s)}`);let v=new Error(g);return v.code=h,v.signal=m,v.stdErrHandled=o!==null,l(v)}return c()}),(r==null?void 0:r.stdin)&&(p.stdin.write(r.stdin),p.stdin.end()),(n||i)&&p.stdout.on("data",h=>{let m=h.toString();n&&n(m,p),i&&(d+=i.write(m,d))}),(o||s)&&p.stderr.on("data",h=>{let m=h.toString();o&&o(m,p),s&&(f+=s.write(m,f))}),a&&(u=a.onCancellationRequested(()=>{p.kill()}))})}function Yle(t,e){var r,n;!uV()||/(?<=^|:)\/usr\/local\/bin(?=$|:)/i.test(((r=t==null?void 0:t.env)==null?void 0:r.PATH)||process.env.PATH||"")||(t=t!=null?t:{},t.env=(n=t.env)!=null?n:V({},process.env),e.write("WARNING: Adding '/usr/local/bin' to the PATH because it is missing."),t.env.PATH=`${t.env.PATH}:/usr/local/bin`)}function T_(t){return t.toString().replace(/[\x00-\x09\x0B-\x0C\x0E-\x1F]|\r?\n$/g,"")}var hV=class{constructor(e,r){this.valueFactory=e;this._valueLifetime=r;this._isValueCreated=!1}get isValueCreated(){return this._isValueCreated}cacheForever(){this._valueLifetime=void 0}clear(){this._isValueCreated=!1,this._valuePromise=void 0}async getValue(){if(this._isValueCreated)return this._value;let e=this._valuePromise===void 0;e&&(this._valuePromise=this.valueFactory());let r=await this._valuePromise;if(e&&(this._value=r,this._valuePromise=void 0,this._isValueCreated=!0),this._valueLifetime&&e){let n=setTimeout(()=>{this._valueLifetime&&this._valuePromise===void 0&&(this._isValueCreated=!1,this._value=void 0),clearTimeout(n)},this._valueLifetime)}return r}};async function Dr(t,e,r){var o;let n=(o=(at.workspace.workspaceFolders||[])[0])==null?void 0:o.uri;n&&(n.scheme==="file"&&Wt(n.fsPath)||rc(n))&&(e=await We(t,e.output,n));let i=await Jd(e,r);if(i==="permission")return await at.window.showErrorMessage("Current user does not have permission to run 'docker'.",{modal:!0,detail:"Try adding the user to the 'docker' group."},"Documentation")&&at.env.openExternal(at.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079224")),!1;if(i==="ssh")return await at.window.showErrorMessage("Cannot connect to Docker daemon using 'ssh'.",{modal:!0,detail:"Make sure public/private keys are set up for connecting without keyboard interaction."},"Show Log")&&at.commands.executeCommand(hi),!1;if(i==="daemon")return await at.window.showErrorMessage("Docker returned an error.",{modal:!0,detail:"Make sure the Docker daemon is running."},"Show Log")&&at.commands.executeCommand(hi),!1;if(!i||i==="command"){if(e.cliHost.type==="wsl")await at.window.showErrorMessage("Docker Desktop WSL 2 backend required.",{modal:!0},"Read more on docker.com")&&at.env.openExternal(at.Uri.parse("https://docs.docker.com/docker-for-windows/wsl"));else{let s="Install",a="License",c="Ignore",l=i===!1?[s,a,c]:[s,a],u=await at.window.showErrorMessage("Docker version 17.12.0 or later required.",{modal:!0,detail:"Check the license for details."},...l);if(u===s)nv(e.output).then(console.error);else if(u===a)at.env.openExternal(at.Uri.parse("https://aka.ms/docker-subscription-service-agreement"));else if(u===c)return!0}return!1}return i==="wsl1"?(await at.window.showErrorMessage("WSL 2 distro required.",{modal:!0,detail:"The WSL distro is running with WSL 1."},"Read more on docker.com")&&at.env.openExternal(at.Uri.parse("https://docs.docker.com/docker-for-windows/wsl")),!1):!0}async function Jd(t,e){var s,a,c,l;let r;try{let u=await Ke(t,"version","--format","{{.Server.APIVersion}}");r=u.stdout.toString(),t.output.write(r);let d=u.stderr.toString();d&&t.output.write(Ne(d))}catch(u){console.error(u);let d=(s=u==null?void 0:u.stdout)==null?void 0:s.toString();d&&t.output.write(d);let f=u&&(u.stderr?u.stderr.toString():u.message)||"";f&&t.output.write(Ne(f)),Qd(e,"error",void 0,f);let p=f.toLowerCase();return p.indexOf("permission denied")!==-1?p.indexOf("ssh")!==-1?"ssh":"permission":p.indexOf("enoent")!==-1||p.indexOf("not found")!==-1?(t.output.write(`CLI host's PATH: ${t.cliHost.env.PATH}`),"command"):t.cliHost.type==="wsl"&&((l=(c=(a=u==null?void 0:u.stdout)==null?void 0:a.toString())==null?void 0:c.toLowerCase())==null?void 0:l.indexOf("wsl 1"))!==-1?"wsl1":"daemon"}let n=r.trim(),i=$s(n);if(!i&&n.toLowerCase().indexOf("error during connect")!==-1)return Qd(e,"error",void 0,n),"daemon";if(!i)return Qd(e,"unparsed",n),!0;let o=!sc(i,[1,35]);return!o&&await NC(t)?(Qd(e,"podman",n),!0):(Qd(e,o?"success":"failure",n),o)}function Qd(t,e,r,n){let i={outcome:e};r&&(i.version=r),n&&(i.errorMessage=n),t.sendTelemetryEvent("dockerVersion",i)}async function mV(t){try{return await Gs(t,"version"),!0}catch{return await at.window.showErrorMessage("Docker Compose required",{modal:!0},"Documentation")&&at.env.openExternal(at.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079610")),!1}}var ol=K(require("vscode"));var A_=class{constructor(e){this.fileHost=e}async provideDocumentLinks(e,r){let n=[],i=Ep(e.getText());if(!i)return n;let o=_p(i)||{};return o.configFilePath=e.uri,mt(o)&&this._linksForDockerfile(n,o,i,e),"dockerComposeFile"in o&&await this._linksForDockerCompose(n,o,i,e),n}_tryAddDocumentLinkToBucket(e,r,n,i,o){let s=e.positionAt(r),a=e.positionAt(n);s.compareTo(a)!==0&&o.push(new ol.DocumentLink(new ol.Range(s,a),i))}_linksForDockerfile(e,r,n,i){let o=wo(n,["build","dockerfile"])||wo(n,["dockerFile"]);o&&o.type==="string"&&this._tryAddDocumentLinkToBucket(i,o.offset+1,o.offset+o.length-1,hr(this.fileHost,r),e)}async _linksForDockerCompose(e,r,n,i){let s=(await qt(this.fileHost,r)).map(c=>ol.Uri.file(c).path),a=wo(n,["dockerComposeFile"]);if(s.length>0&&a)if(a.type==="array"&&a.children)for(let c=0;c<a.children.length;c++)this._tryAddDocumentLinkToBucket(i,a.children[c].offset+1,a.children[c].offset+a.children[c].length-1,i.uri.with({path:s[c]}),e);else a.type==="string"&&this._tryAddDocumentLinkToBucket(i,a.offset+1,a.offset+a.length-1,i.uri.with({path:s[0]}),e)}};var ee=K(require("vscode")),ya=K(require("path"));var gV="Stop Container",vV="Reopen Folder locally",yV="Close Workspace",Qo;(function(i){i.Placeholder="Placeholder",i.Group="Group",i.Container="Container",i.Folder="Folder"})(Qo||(Qo={}));var Zt=class{static isGroupItem(e){return!!e&&e.type===Qo.Group}static isContainerItem(e){return!!e&&e.type===Qo.Container}static isFolderItem(e){return!!e&&e.type===Qo.Folder}},Xd;(function(n){n[n.DevContainers=0]="DevContainers",n[n.AttachContainers=1]="AttachContainers",n[n.OtherContainers=2]="OtherContainers"})(Xd||(Xd={}));var D_=class extends Zt{constructor(e,r){super();this.label=e;this.groupType=r;this.type=Qo.Group}async asTreeItem(e,r,n,i){return new ee.TreeItem(this.label,ee.TreeItemCollapsibleState.Expanded)}},Gn=class extends Zt{constructor(e,r=[],n,i=!1){super();this.container=e;this.folders=r;this.parent=n;this.isDevContainer=i;this.type=Qo.Container;this._alreadyCheckedRepository=!1}async asTreeItem(e,r,n,i){let o=new ee.TreeItem(this.getContainerLabel(),this.getCollapsibleState());o.description=this.containerDescription;let s=this.getContextBase();o.iconPath=iv(r,Zle),o.contextValue="exited"+s;let a=!1;return n&&this.container.Id===n.Id?(o.iconPath=iv(r,Xle),o.contextValue="active"+s,a=!0):e&&await this.setTreeItemIconAndContext(e,s,o),o.tooltip=this.getHover(a,o.iconPath instanceof ee.ThemeIcon?o.iconPath:new ee.ThemeIcon("vm"),o.label),this.folders.length===1&&(o.contextValue+="Folder"),o}getContextBase(){return(this.isDevContainer?"Dev":"")+"Container"}getCollapsibleState(){return this.folders.length>1?ee.TreeItemCollapsibleState.Expanded:ee.TreeItemCollapsibleState.None}async setTreeItemIconAndContext(e,r,n){switch(this.container.State.Status){case"created":{n.iconPath=new ee.ThemeIcon("vm"),n.contextValue="exited"+r;break}case"paused":{n.iconPath=new ee.ThemeIcon("vm-outline"),n.contextValue="running"+r;break}case"restarting":{n.iconPath=new ee.ThemeIcon("vm-outline"),n.contextValue="exited"+r;break}case"exited":{n.iconPath=new ee.ThemeIcon("vm"),n.contextValue="exited"+r;break}case"running":{n.iconPath=new ee.ThemeIcon("vm-running"),n.contextValue="running"+r;break}}}getTimeElapsed(e){if(!e)return"";let r="",n=e.State.Status,i=new Date(e.State.StartedAt),o=new Date(e.State.FinishedAt);if(i.getFullYear()>1&&o.getFullYear()>1){let s=new Date,a=new Date(i>o?e.State.StartedAt:e.State.FinishedAt),c,l,u=s.getTime()-a.getTime();(l=Math.round(u/Gn.years))>0?l===1?c="year":c="years":(l=Math.round(u/Gn.days))>0?l===1?c="day":c="days":(l=Math.round(u/Gn.hours))>0?l===1?c="hour":c="hours":(l=Math.round(u/Gn.minutes))>0?l===1?c="minute":c="minutes":(l=Math.round(u/Gn.seconds),l===1?c="second":c="seconds"),r=` ${l} ${c}`+(n.endsWith("ing")?"":" ago")}return`${n.charAt(0).toUpperCase()+n.slice(1)}`+r}getContainerLabel(){if(Pc(this.container)&&this.folders.length>0)return`${ya.basename(this.folders[0].folder.path)}`;{let r=tb(this.container);if(r)return r;let n=this.repository;return n?n.repositoryName:this.container.Config.Image}}get containerDescription(){return this.container.Name.substr(1)}getHover(e,r,n){let i=new ee.MarkdownString(void 0,!0);if(i.appendMarkdown(`$(${r.id}) ${n} (${this.container.Name.substr(1)})  
`),this.repository){let s=this.repository.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)";i.appendMarkdown(`${s} [${this.repository.fullRepositoryName}](${this.repository.gitUrlInfo.repositoryUrl})  
`)}let o=im(this.container);return o&&i.appendMarkdown(`$(file-symlink-directory) ${o}  
`),e?i.appendMarkdown("$(remote) Connected"):i.appendMarkdown(`$(history) ${this.getTimeElapsed(this.container)}`),i}get repository(){if(!this._alreadyCheckedRepository){let e=Zs(this.container);e&&(this._repository=vn(e)),this._alreadyCheckedRepository=!0}return this._repository}inspect(e){return Pr(e,this.container.Id)}},yr=Gn;yr.seconds=1e3,yr.minutes=Gn.seconds*60,yr.hours=Gn.minutes*60,yr.days=Gn.hours*24,yr.years=Gn.days*365;var wa=class extends Zt{constructor(e,r,n){super();this.container=e;this.folder=r;this.isDevContainer=n;this.type=Qo.Folder}async asTreeItem(e,r,n,i){let o=new ee.TreeItem(ya.basename(this.folder.path),ee.TreeItemCollapsibleState.None);return o.description=this.folder.path,o.iconPath=iv(r,tue),o.contextValue="attachedFolder",this.isDevContainer&&!Zs(this.container)&&(o.contextValue="devFolder"),n&&this.container.Id===n.Id&&i===this.folder.path&&(o.iconPath=iv(r,eue),o.tooltip=`Active Folder ${o.label}`,o.contextValue=`active${o.contextValue}`),o}};function Jle(t,e,r,n){if(!(!ee.env.remoteName||ee.env.remoteName!=="attached-container"&&ee.env.remoteName!=="dev-container"))return wV(t,e,r,n)}function wV(t,e,r,n){ee.commands.executeCommand("setContext","remote-containers:showDetails",!0);let i=new PV(t,e,n,e.output),o=ee.window.createTreeView("detailsContainers",{treeDataProvider:i});return i.setTitle=s=>{o.title=s},t.subscriptions.push(r.onDidChangeActiveContainer(s=>i.refresh(s))),i}function Qle(t,e){let r=[gV];return t&&t.Id===e.Id&&ee.workspace.workspaceFolders&&ee.workspace.workspaceFolders.length>0&&(r.push(yV),ee.workspace.workspaceFolders[0].uri.authority.startsWith("dev-container")&&r.push(vV)),r}var CV=class{constructor(e,r){this.dockerParams=e;this.containerId=r;this.writeEmitter=new ee.EventEmitter;this.onDidWrite=this.writeEmitter.event;this.destroyables=[]}open(){let{cliHost:e,env:r,output:n}=this.dockerParams;e.exec({cmd:jn(),args:["logs","-f",this.containerId],env:r,output:n}).then(i=>{this.destroyables.push(i.stdout.on("data",o=>{this.write(o.toString())})),this.destroyables.push(i.stderr.on("data",o=>{this.write(o.toString())}))}).catch(console.error)}close(){this.writeEmitter.dispose(),this.destroyables.forEach(e=>{e.destroy()})}write(e){this.writeEmitter.fire(e.replace(/\n/g,`\r
`))}},bV=class{constructor(e,r,n,i,o,s){this.targetsTreeData=e;this.detailsTreeData=r;this.devVolumesTreeData=n;this.dockerParams=i;this.context=o;this.telemetry=s}updateDockerParameters(e){this.dockerParams=e}registerCommands(){let e=[];return e.push(ee.commands.registerCommand("remote-containers.stopContainer",this.commandStopContainer,this)),e.push(ee.commands.registerCommand("remote-containers.removeContainer",this.commandRemoveContainer,this)),e.push(ee.commands.registerCommand("remote-containers.startContainer",this.commandStartContainer,this)),e.push(ee.commands.registerCommand("remote-containers.removeRecentFolder",this.commandRemoveRecentFolder,this)),e.push(ee.commands.registerCommand("remote-containers.showDetails",this.commandShowDetails,this)),e.push(ee.commands.registerCommand("remote-containers.explorerDetailsRefresh",this.commandExplorerDetailsRefresh,this)),e.push(ee.commands.registerCommand("remote-containers.attachToContainer",this.commandAttachToContainer,this)),e.push(ee.commands.registerCommand("remote-containers.attachToContainerNewWindow",this.commandAttachToContainerNewWindow,this)),e.push(ee.commands.registerCommand("remote-containers.inspectDockerResource",this.commandInspectDockerResource,this)),e.push(ee.commands.registerCommand("remote-containers.inspectInBasicDevContainer",this.commandInspectInBasicDevContainer,this)),e.push(ee.commands.registerCommand("remote-containers.cloneInVolume",this.commandCloneInVolume,this)),e.push(ee.commands.registerCommand("remote-containers.removeVolume",this.commandRemoveVolume,this)),e.push(ee.commands.registerCommand("remote-containers.pruneVolumes",this.commandPruneVolumes,this)),e.push(ee.commands.registerCommand("remote-containers.explorerVolumesRefresh",this.commandExplorerVolumesRefresh,this)),e.push(ee.commands.registerCommand("remote-containers.startAndOpenFolder",this.commandStartAndOpenFolder,this)),e.push(ee.commands.registerCommand("remote-containers.newContainer",this.commandNewContainer,this)),e.push(ee.commands.registerCommand("remote-containers.showContainerLog",this.commandShowContainerLog,this)),e}async commandStopContainer(e){if(!Zt.isContainerItem(e))return;let r=this.targetsTreeData.currentContainer&&this.targetsTreeData.currentContainer.Id===e.container.Id?"Stop active container? This will disconnect your current window.":`Stop ${e.getContainerLabel()}?`,n=await ee.window.showWarningMessage(r,{modal:!0},...Qle(this.targetsTreeData.currentContainer,e.container));await this.targetsTreeData.withProgress(e,async()=>{switch(n){case gV:{await mE(this.dockerParams,e.container),e.container=await Pr(this.dockerParams,e.container.Id);break}case yV:{await ee.commands.executeCommand("workbench.action.closeFolder");break}case vV:{await ee.commands.executeCommand("remote-containers.reopenLocally");break}}})}async commandRemoveContainer(e){if(!Zt.isContainerItem(e))return;let r=await zr(this.dockerParams,e.container.Id);if(!r)return;let n=await ee.window.showWarningMessage("Remove this container?",{modal:!0,detail:"This action is not reversible and deletes the container permanently."},"Remove");await this.targetsTreeData.withProgress(e.parent,async()=>{n==="Remove"&&(await mE(this.dockerParams,e.container),await lq(this.dockerParams,r.Id),this.detailsTreeData&&await this.detailsTreeData.refresh(void 0),await this.tryRemoveVolume(e.container))})}async tryRemoveVolume(e){let r=im(e);if(r||(r=n1(e)),r){let n=await Ph(this.dockerParams,r);if((await RC(this.dockerParams)).indexOf(r)>=0){let s;(n==null?void 0:n.Labels)&&n.Labels["vsch.local.repository.unique"]==="true"?s="The container is using a volume with a cloned repository.":s=`This is the last container using '${r}'.`,await ee.window.showInformationMessage(s,{modal:!0,detail:"Do you want to remove the volume and the data it contains?"},"Remove")==="Remove"&&await gE(this.dockerParams,r)}}}async commandPruneVolumes(e){let r="Are you sure you want to remove all unused volumes?";await ee.window.showInformationMessage(r,{modal:!0},"Remove")==="Remove"&&await this.targetsTreeData.withProgress(e,async()=>{await kO(this.dockerParams)})}async commandExplorerVolumesRefresh(e){return await this.devVolumesTreeData.getDockerParams(),this.devVolumesTreeData.refresh(void 0)}async commandStartContainer(e){!Zt.isContainerItem(e)||await this.targetsTreeData.withProgress(e,async()=>{await Mm(this.dockerParams,e.container),e.container=await Pr(this.dockerParams,e.container.Id)})}async commandRemoveRecentFolder(e){!Zt.isFolderItem(e)||(await ee.commands.executeCommand("vscode.removeFromRecentlyOpened",e.folder.toString()),await this.targetsTreeData.refresh(void 0))}async commandShowDetails(e){!Zt.isContainerItem(e)||(this.detailsTreeData||(this.detailsTreeData=wV(this.context,this.dockerParams,this.targetsTreeData,this.telemetry)),await this.detailsTreeData.refresh(e))}async commandExplorerDetailsRefresh(){this.detailsTreeData&&await this.detailsTreeData.refresh(void 0)}async commandStartAndOpenFolder(e){let r,n;Zt.isFolderItem(e)?(n=e,r=e.container):yr.isContainerItem(e)&&(n=e.folders[0],r=e.container),r&&(await Mm(this.dockerParams,r),await ee.commands.executeCommand("remote-containers.openFolder",n))}async commandAttachToContainer(e){return this.attachToContainerInternal(e)}async commandAttachToContainerNewWindow(e){return this.attachToContainerInternal(e,!0)}async attachToContainerInternal(e,r=!1){let n;Zt.isContainerItem(e)?n=e.container:this.detailsTreeData&&(n=this.detailsTreeData.container),n&&(await Mm(this.dockerParams,n),await ov(this.dockerParams,n,this.context,r))}async commandInspectDockerResource(e){let r;(Zt.isContainerItem(e)||Xo.isImageItem(e)||Xo.isVolume(e)||Xo.isDevVolume(e))&&(r=await e.inspect(this.dockerParams)),r&&ee.window.showTextDocument(await ee.workspace.openTextDocument({language:"json",content:JSON.stringify(r,null,"	")}))}async commandInspectInBasicDevContainer(e){Xo.isDevVolume(e)&&await e.inspectInBasicDevContainer()}async commandCloneInVolume(e){Xo.isDevVolume(e)&&await e.cloneRepositoryInVolume()}async commandRemoveVolume(e){Xo.isDevVolume(e)&&await e.removeVolume(this.dockerParams)}async commandNewContainer(){let e=[{label:"Open Current Folder in Container",command:"remote-containers.reopenInContainer"},{label:"Open Folder in Container...",command:"remote-containers.openFolder"},{label:"Open Workspace in Container...",command:"remote-containers.openWorkspace"},{label:"Clone Repository in Container Volume...",command:"remote-containers.openRepositoryInVolume"},{label:"Clone GitHub Pull Request in Container Volume...",command:"remote-containers.openPullRequestInVolume"},{label:"Try a Sample...",command:"remote-containers.trySample"}],r=await ee.window.showQuickPick(e,{placeHolder:"Select an action to create a container"});if(r)return ee.commands.executeCommand(r.command)}async commandShowContainerLog(e){if(!Zt.isContainerItem(e))return;let r=new CV(this.dockerParams,e.container.Id);ee.window.createTerminal({name:e.container.Config.Image,pty:r}).show()}};async function EV(t,e,r,n){ee.commands.executeCommand("setContext","remote-containers:showDetails",!1);let i=new _V(t,e,s,r,n),o=ee.window.createTreeView("targetsContainers",{treeDataProvider:i});i.setMessage=a=>o.message=a,t.subscriptions.push(ee.commands.registerCommand("remote-containers.explorerTargetsRefresh",async()=>(await i.getDockerParams(!0),i.refresh(void 0))));function s(a){let c=Jle(t,a,i,r),l=new IV(t,r,n),u=ee.window.createTreeView("devVolumes",{treeDataProvider:l});t.subscriptions.push(u);let d=new bV(i,c,l,a,t,r);t.subscriptions.push(...d.registerCommands()),t.subscriptions.push(iq(t)(async()=>{i.refresh(void 0),l.refresh(void 0);let f=await We(t,n);c&&c.updateDockerParameters(f),d.updateDockerParameters(f)}))}}var _V=class{constructor(e,r,n,i,o){this.context=e;this.resolverResults=r;this.onFirstReveal=n;this.telemetry=i;this.output=o;this._onDidChangeTreeData=new ee.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._onDidChangeActiveContainer=new ee.EventEmitter;this.onDidChangeActiveContainer=this._onDidChangeActiveContainer.event;this.refreshDockerParams=!1;this.needsSSHCredentials=!1;this.setTreeMessage=()=>{};this.devContainers=[];this.attachContainers=[];this.otherContainers=[];this.recentAttachEntries=new Map;this.recentAttachDevContainerEntries=new Map;this.recentDevComposeEntries=new Map;this.containerItems=new Map;this.action=Promise.resolve();this.needsDockerStartOrInstallContext=void 0;this.hasContainersContext=void 0}set setMessage(e){this.setTreeMessage=e}get currentContainer(){return this._currentContainer}async getDockerParams(e=!1){if(!this.dockerParams){this.passiveSSHAskpassEnv||(this.passiveSSHAskpassEnv=ai(this.context.extensionPath,async r=>(this.needsSSHCredentials=!0,Gi(r,!1)),this.output));try{this.dockerParams=await We(this.context,this.output,void 0,void 0,e?void 0:this.passiveSSHAskpassEnv,!1),await Jd(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0)}catch(r){if(!this.needsSSHCredentials)throw r}}return this.dockerParams}handleDockerEvent(e){try{let r=JSON.parse(e.toString());if(!r.Action)return;let n="exec_create: /root/.vscode-server";if(r.Action==="die"||r.Action==="destroy"||r.Action==="create")this._onDidChangeTreeData.fire();else if(!r.Action.startsWith("exec_create")&&r.Actor&&r.Actor.ID&&this.containerItems.has(r.Actor.ID)){let i=this.containerItems.get(r.Actor.ID);this.dockerParams&&i?(async()=>{i.container=await Pr(this.dockerParams,i.container.Id),this._onDidChangeTreeData.fire(i)})():this._onDidChangeTreeData.fire(i);return}else if(r.Action.startsWith(n)){this._onDidChangeTreeData.fire();return}}catch{}}async tryEnsureDocker(){let e=await this.getDockerParams();if(!!e)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await Th(e,{event:["create","destroy","die","health-status","kill","pause","rename","resize","restart","start","stop","unpause","update","exec_create"]}),this.eventsProcess.stdout.on("data",r=>{this.handleDockerEvent(r)})}catch(r){r.code!=="ENOENT"&&console.log(r),this.dockerParams=void 0}}async getTreeItem(e){return e.asTreeItem(this.dockerParams,this.context,this._currentContainer,this.currentFolder)}async setDockerStartOrInstallContext(e){(this.needsDockerStartOrInstallContext===void 0||this.needsDockerStartOrInstallContext!==e)&&(this.needsDockerStartOrInstallContext=e,!this.needsDockerStartOrInstallContext&&this.hasContainersContext===!1&&this.setHasContainersContext(!0),await ee.commands.executeCommand("setContext","remote-containers:needsDockerStartOrInstall",!this.needsDockerStartOrInstallContext&&!this.needsSSHCredentials),await ee.commands.executeCommand("setContext","remote-containers:needsSSHCredentials",!this.needsDockerStartOrInstallContext&&this.needsSSHCredentials))}async setHasContainersContext(e){if(this.hasContainersContext===void 0||this.hasContainersContext!==e){this.hasContainersContext=e;let r=ee.workspace.workspaceFolders&&ee.workspace.workspaceFolders.length>0?"remote-containers:noContainersWithFolder":"remote-containers:noContainersWithoutFolder";await ee.commands.executeCommand("setContext",r,!this.hasContainersContext)}}async getDockerOrShowMessage(e){return this.refreshDockerParams&&(this.refreshDockerParams=!1,this.dockerParams=void 0),!this.dockerParams&&(e===void 0&&await this.tryEnsureDocker(),!this.dockerParams)?(this.setDockerStartOrInstallContext(!1),this._onDidChangeActiveContainer.fire(void 0),!1):(this.setDockerStartOrInstallContext(!0),!0)}async getChildGroups(e){this.containerItems.clear(),await this.setCurrents(),await this.setContainerTypes(e);let r=[];return(this.devContainers.length>0||this.attachContainers.length>0)&&r.push(new D_("Dev Containers",0)),this.otherContainers.length>0&&r.push(new D_("Other Containers",2)),r}async getChildDevContainer(e,r){let n=await this.getWorkspaceFolderFromContainer(e),i=n?[new wa(e,n,!0)]:[],o=Pc(e);o&&this.recentAttachDevContainerEntries.has(o)?i.push(...this.recentAttachDevContainerEntries.get(o).map(a=>new wa(e,a,!1))):o&&this.recentAttachEntries.has(e.Id)?i.push(...this.recentAttachEntries.get(e.Id).map(a=>new wa(e,a,!1))):(o=Zs(e))&&this.recentAttachDevContainerEntries.has(o)?i.push(...this.recentAttachDevContainerEntries.get(o).map(a=>new wa(e,a,!1))):o===void 0&&this.recentDevComposeEntries.has(e.Id)&&i.push(...this.recentDevComposeEntries.get(e.Id).map(a=>new wa(e,a,!1)));let s=new yr(e,i,r,!0);return this.setContainerItems(s),s}setContainerItems(e){this.containerItems.set(e.container.Id,e),this._currentContainer&&e.container.Id===this._currentContainer.Id&&this._onDidChangeActiveContainer.fire(e)}async getChildContainers(e){if(e.groupType===0){let r=this.devContainers.map(async n=>this.getChildDevContainer(n,e));return r.push(...this.attachContainers.map(async n=>{let i=new yr(n,this.recentAttachEntries.get(n.Id).map(o=>new wa(n,o,!1)),e);return this.setContainerItems(i),i})),Promise.all(r)}else return this.otherContainers.map(r=>{let n=new yr(r,[],e);return this.setContainerItems(n),n})}getChildFolders(e){return e.folders&&e.folders.length>1?e.folders:[]}async getChildItems(e){if(e===void 0){let r=await ji(this.dockerParams,!0);if(await this.setHasContainersContext(r.length>0),r.length===0)return[];let n=await Do(this.dockerParams,r);return this.getChildGroups(n)}else{if(Zt.isGroupItem(e))return this.getChildContainers(e);if(Zt.isContainerItem(e))return this.getChildFolders(e)}return[]}async getChildren(e){return await this.action,await this.getDockerOrShowMessage(e)?(this.onFirstReveal&&(this.onFirstReveal(this.dockerParams),this.onFirstReveal=void 0),this.setTreeMessage(void 0),this.getChildItems(e)):[]}async refresh(e){e===void 0&&(this.refreshDockerParams=!0),this._onDidChangeTreeData.fire(e)}async setCurrents(){let e=ee.workspace.workspaceFolders,r;if(this.dockerParams){if(e&&e.length>0){let n=this.resolverResults.get(e[0].uri.authority);n&&n.dockerContainerId&&(r=await zr(this.dockerParams,n.dockerContainerId),this.currentFolder=e[0].uri.path)}else if(this.resolverResults.size>0){let n=[...this.resolverResults.values()][0].dockerContainerId;n&&(r=await zr(this.dockerParams,n))}}r!==this._currentContainer&&(this._currentContainer=r)}addContainerToMap(e){if(Pc(e)){this.devContainers.push(e);return}else if(Zs(e)){this.devContainers.push(e);return}else if(tb(e)&&this.recentDevComposeEntries.has(e.Id)){this.devContainers.push(e);return}else if(this.recentAttachEntries.has(e.Id)){this.attachContainers.push(e);return}this.otherContainers.push(e)}async setContainerTypes(e){return await this.setRecentEntries(e),this.devContainers.length=0,this.attachContainers.length=0,this.otherContainers.length=0,e.forEach(r=>{this.addContainerToMap(r)}),{hasDev:this.devContainers.length>0,hasAttach:this.attachContainers.length>0}}async getWorkspaceFolderFromHostWorkspace(e){let r=this.dockerParams.cliHost,n=Ue(r.path,e),i=await fi(r,n,vi()),o={cliHost:r,appRoot:ee.env.appRoot,extensionPath:this.context.extensionPath,package:await un(this.context.extensionPath),output:this.output},s=i&&await Uc(o,n.rootFolderPath,i);if(s&&mt(s.configuration))return ee.Uri.parse($u(e,s.workspace.workspaceFolder,void 0),!0)}async getWorkspaceFolderFromContainer(e){let r=Pc(e);if(r)return this.getWorkspaceFolderFromHostWorkspace(r);{let n=Zs(e),i=im(e),o=i1(e);if(n)return ee.Uri.parse(ea(n,i,o,!1,void 0,void 0))}}async getWorkspaceFolderFromHostPath(e){let r=this.dockerParams.cliHost,n=await f1(r,e,this.output),i=p1(r,n,e);return ee.Uri.parse($u(e,i,void 0),!0)}getWorkspaceFolderFromRepository(e,r,n){return ee.Uri.parse(ea(e,r,n,!1,void 0,void 0),!0)}async findComposeTargetContainer(e,r){if(!this.dockerParams)return;let n=Ue(this.dockerParams.cliHost.path,e),i=await fi(this.dockerParams.cliHost,n,vi()),o={cliHost:this.dockerParams.cliHost,appRoot:ee.env.appRoot,extensionPath:this.context.extensionPath,package:await un(this.context.extensionPath),output:this.output},s=i&&await Uc(o,n.rootFolderPath,i);if(s&&"dockerComposeFile"in s.configuration){let a=await qt(this.dockerParams.cliHost,s.configuration),c=await Ou(this.dockerParams,n,a);return ML(r,c,s.configuration.service)}}trySetEntryWithAttachAuthority(e,r,n){let i;if("containerName"in r){let o=n.find(s=>s.Name===r.containerName);o&&(i=o.Id)}else i=r.containerId;i&&(this.recentAttachEntries.has(i)?this.recentAttachEntries.get(i).push(e):this.recentAttachEntries.set(i,[e]))}async trySetEntryWithDevAuthority(e,r,n,i){let o=r.hostPath,s=i[o];if(s||(s=await this.getWorkspaceFolderFromHostPath(r.hostPath),i[o]=s),s.path!==e.path){this.recentAttachDevContainerEntries.has(r.hostPath)?this.recentAttachDevContainerEntries.get(r.hostPath).push(e):this.recentAttachDevContainerEntries.set(r.hostPath,[e]);let a=await this.findComposeTargetContainer(r.hostPath,n);a&&this.recentDevComposeEntries.has(a)?this.recentDevComposeEntries.get(a).push(e):a&&this.recentDevComposeEntries.set(a,[e])}}trySetEntryWithRepoAuthority(e,r){this.getWorkspaceFolderFromRepository(r.repositoryPath,r.volumeName,r.folder).path!==e.path&&(this.recentAttachDevContainerEntries.has(r.repositoryPath)?this.recentAttachDevContainerEntries.get(r.repositoryPath).push(e):this.recentAttachDevContainerEntries.set(r.repositoryPath,[e]))}trySetEntryWithVolumeAuthority(e,r){let n=r.volumeName;!n||(this.recentAttachEntries.has(n)?this.recentAttachEntries.get(n).push(e):this.recentAttachEntries.set(n,[e]))}async trySetEntry(e,r,n){var s;if(!e||!e.folderUri&&!e.workspace.configPath)return;let i=(s=e.folderUri)!=null?s:e.workspace.configPath,o=lm(i.authority);if(o)this.trySetEntryWithAttachAuthority(i,o,r);else{let a=Cn(i.authority);a&&(Yt(a)?await this.trySetEntryWithDevAuthority(i,a,r,n):yn(a)?this.trySetEntryWithRepoAuthority(i,a):this.trySetEntryWithVolumeAuthority(i,a))}}async setRecentEntries(e){this.recentAttachEntries.clear(),this.recentAttachDevContainerEntries.clear(),this.recentDevComposeEntries.clear();let r=await ee.commands.executeCommand("_workbench.getRecentlyOpened");if(r&&r.workspaces){let n={};for(let i of r.workspaces)await this.trySetEntry(i,e,n)}}withProgress(e,r){return this.action=this.action.then(()=>r()),this.refresh(e)}},Wn;(function(s){s.Default="Default",s.Title="Title",s.Image="Image",s.Port="Port",s.Volume="Volume",s.DevVolume="DevVolume"})(Wn||(Wn={}));var Xo=class{constructor(e){this.label=e;this.type=Wn.Default}static isDetailItem(e){return!!e&&e.label!==void 0&&e.type!==void 0}static isImageItem(e){return!!e&&e.type===Wn.Image}static isVolume(e){return!!e&&e.type===Wn.Volume}static isDevVolume(e){return!!e&&e.type===Wn.DevVolume}},SV=class{constructor(e){this.detail=e;this.type=Wn.Image;this.context="image";this.label="Image"}inspect(e){return gc(e,this.detail)}},xV=class{constructor(e,r){this.label=e;this.volumeDetails=r;this.type=Wn.Volume;this.context="volume"}async inspect(e){return Ph(e,this.volumeDetails)}},PV=class{constructor(e,r,n,i){this.context=e;this.dockerParams=r;this.telemetry=n;this.output=i;this._onDidChangeTreeData=new ee.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.setTreeTitle=()=>{}}updateDockerParameters(e){this.dockerParams=e}set setTitle(e){this.setTreeTitle=e}get container(){return this._container?this._container.container:void 0}getTreeItem(e){let r=new ee.TreeItem(e.label,Array.isArray(e.detail)&&e.detail.length>0?ee.TreeItemCollapsibleState.Expanded:ee.TreeItemCollapsibleState.None);return r.tooltip=e.label,e.detail&&!Array.isArray(e.detail)&&(r.description=e.detail,r.tooltip+=` ${r.description}`),r.contextValue=e.context,r.command=e.command,r}async getAttributes(e,r,n){let i=[];r&&i.push({label:"Workspace",detail:r});let o=Zs(e.container);return o&&i.push({label:"Repository",detail:o}),i.push({label:"Name",detail:e.container.Name}),i.push(new SV(e.container.Config.Image)),n&&i.push({label:"Configuration",detail:n,command:{title:"Open Dev Container File",command:"remote-containers.openDevContainerFile",arguments:[n]},context:"devContainer"}),i}async getMounts(e){let r=[];return e&&e.Mounts.forEach(n=>{if(n.Type==="volume"){let i=n.Name,o=new xV(`Volume: ${i}`,i),s={label:`Destination: ${n.Destination}`,detail:void 0};r.push({label:"Volume mount",detail:[o,s]})}else if(n.Type==="bind"){let i={label:`Source: ${n.Source}`,detail:void 0},o={label:`Destination: ${n.Destination}`,detail:void 0};r.push({label:"Bind mount",detail:[i,o]})}}),r}async getChildrenFromRoot(e){let r=[],n=Pc(e.container),i;if(this.dockerParams&&n){let a=await fi(this.dockerParams.cliHost,Ue(this.dockerParams.cliHost.path,n),vi());a&&(i=Ee(a,this.dockerParams.cliHost.platform))}r.push({label:"Attributes",detail:await this.getAttributes(e,n,i),type:Wn.Title});let o;this.dockerParams&&(o=await Pr(this.dockerParams,e.container.Id));let s=await this.getMounts(o);return s.length>0&&r.push({label:"Mounts",detail:s,type:Wn.Title}),r}async testContainer(){let e=!0;try{(this.dockerParams?await Pr(this.dockerParams,this._container.container.Id):void 0)===void 0&&(e=!1)}catch{e=!1}return e||(this._container=void 0,this.setTreeTitle("Details (Containers)")),e}async getChildren(e){if(this._container===void 0)return[];let r=[];return e===void 0?await this.testContainer()&&(this.setTreeTitle(this._container.getContainerLabel()),r=await this.getChildrenFromRoot(this._container)):Array.isArray(e.detail)&&r.push(...e.detail),r}async refresh(e){this.dockerParams=await We(this.context,this.output),await Jd(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0,this._container=void 0),this._container=e||this._container,this._onDidChangeTreeData.fire(void 0)}},kV=class extends Xo{constructor(e){super(e.Name);this.type=Wn.DevVolume;this.volumeDetails=e,this.createdAt=void 0}async asTreeItem(){let e=this.getLabel(),r=new ee.TreeItem(e,ee.TreeItemCollapsibleState.None);return r.iconPath=this.iconPath,r.description=this.getDescription(),this.isUniqueVolume()?r.contextValue="uniqueDevVolume":r.contextValue="devVolume",r}isUniqueVolume(){let e=this.volumeDetails.Labels;if(e){let r=e["vsch.local.repository.unique"];if(r&&r==="true")return!0}return!1}getLabel(){let e=this.volumeDetails.Name;if(this.volumeDetails.Labels&&this.isUniqueVolume()){let n=this.getRepository();n&&n.gitUrlInfo.repository!=="unknown"&&(e=n.gitUrlInfo.fullRepositoryName)}return e}getDescription(){let e="";if(this.volumeDetails.Labels&&this.isUniqueVolume()){let n=this.getRepository();if(n&&n.gitUrlInfo.repository!=="unknown"){let i=this.getBranchName(),o=this.getPullRequestId();o?e=`#${o}`:i&&(e=`${i}`)}}return e}getBranchName(){let e=this.volumeDetails.Labels;if(e&&this.isUniqueVolume()&&e["vsch.local.repository.branch"])return e["vsch.local.repository.branch"]}getPullRequestId(){let e=this.volumeDetails.Labels;if(e&&this.isUniqueVolume()&&e["vsch.local.repository.pullRequestId"])return e["vsch.local.repository.pullRequestId"]}getRepository(){let e=this.volumeDetails.Labels;if(e){let r=e["vsch.local.repository.unique"];if(r&&r==="true"){let n=e["vsch.local.repository"];return vn(n)}}}get iconPath(){return new ee.ThemeIcon("file-symlink-directory")}getTimeElapsed(){if(this.createdAt)return this.createdAt;let e="";if(new Date(this.volumeDetails.CreatedAt).getFullYear()>1){let n=new Date,i=new Date(this.volumeDetails.CreatedAt),o,s,a=n.getTime()-i.getTime();(s=Math.round(a/yr.years))>0?s===1?o="year":o="years":(s=Math.round(a/yr.days))>0?s===1?o="day":o="days":(s=Math.round(a/yr.hours))>0?s===1?o="hour":o="hours":(s=Math.round(a/yr.minutes))>0?s===1?o="minute":o="minutes":(s=Math.round(a/yr.seconds),s===1?o="second":o="seconds"),e=` ${s} ${o} ago`}return this.createdAt=e,e}async inspect(e){return Ph(e,this.volumeDetails.Name)}async inspectInBasicDevContainer(){await ee.commands.executeCommand("remote-containers.inspectVolume",this.volumeDetails.Name)}async cloneRepositoryInVolume(){await ee.commands.executeCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",this.volumeDetails.Name)}async removeVolume(e){if(!((await RC(e)).indexOf(this.volumeDetails.Name)>=0)){await ee.window.showInformationMessage(`Volume '${this.volumeDetails.Name}' is in use and cannot be removed.`,{modal:!0});return}await ee.window.showInformationMessage(`Are you sure you want to remove volume '${this.volumeDetails.Name}'?`,{modal:!0},"Remove")==="Remove"&&await gE(e,this.volumeDetails.Name)}},IV=class{constructor(e,r,n){this.context=e;this.telemetry=r;this.output=n;this._onDidChangeTreeData=new ee.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event}async getTreeItem(e){return e.asTreeItem()}async getDockerParams(){return this.dockerParams||(this.dockerParams=await We(this.context,this.output,void 0,void 0),await Jd(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0)),this.dockerParams}async setHasVolumesContext(e){await ee.commands.executeCommand("setContext","remote-containers:noDevVolumes",e)}async getDockerOrShowMessage(e){return!(!this.dockerParams&&(e===void 0&&await this.tryEnsureDocker(),!this.dockerParams))}async getChildren(e){if(!await this.getDockerOrShowMessage(e))return[];let r=await We(this.context,this.output),n=await ci(r),i=await mu(r,n),o=a=>!(a.Name==="vscode"||a.Name.length===64&&/^[0-9a-fA-F]+$/.test(a.Name)),s=i.filter(o);return await this.setHasVolumesContext(s.length===0),s.sort((a,c)=>{let l=new Date(a.CreatedAt);return new Date(c.CreatedAt).getTime()-l.getTime()}),s.map(a=>new kV(a))}async resolveTreeItem(e,r){let n=await We(this.context,this.output),i=await this.getAssociatedContainers(n,r),o=r.getLabel(),s=r.getRepository(),a=r.getBranchName(),c=r.getPullRequestId(),l=r.getTimeElapsed();return i.length>0?e.tooltip=this.renderMarkdown(o,s,a,c,l,i.join(", ")):e.tooltip=this.renderMarkdown(o,s,a,c,l,"*None*"),e}async getAssociatedContainers(e,r){let n=[],i=await ji(e,!0),o=await Do(e,i);for(let s of o)for(let a of s.Mounts)a.Type==="volume"&&a.Name===r.volumeDetails.Name&&n.push(s.Name.substring(1));return n}renderMarkdown(e,r,n,i,o,s){let a=new ee.MarkdownString(void 0,!0);if(r){let c=r.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)",l=r.gitUrlInfo.repositoryUrl;l.startsWith("http")?(l=r.gitUrlInfo.repositoryUrl.replace(".git",""),a.appendMarkdown(`${c} [${l}](${l})
`)):a.appendMarkdown(`${c} ${l})
`),a.appendMarkdown(`&nbsp;  
`),n&&(r.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-compare) [${n}](${l}/tree/${n})
`):a.appendMarkdown(`$(git-compare) ${n}
`),a.appendMarkdown(`&nbsp;  
`)),i&&(r.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-pull-request-create) [#${i}](${l}/pull/${i})
`):a.appendMarkdown(`$(git-pull-request-create) #${i}
`),a.appendMarkdown(`&nbsp;  
`)),a.appendMarkdown(`$(history) ${o}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`)}else a.appendMarkdown(`$(file-symlink-directory) ${e}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(history) ${o}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`);return a}handleDockerEvent(e){try{let r=JSON.parse(e.toString());if(!r.Action)return;(r.Action==="die"||r.Action==="destroy"||r.Action==="create"||r.Action==="prune")&&this._onDidChangeTreeData.fire()}catch{}}async tryEnsureDocker(){let e=await this.getDockerParams();if(!!e)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await Th(e,{event:["destroy","die","kill","create","rename","resize","restart","start","stop","unpause","prune"]}),this.eventsProcess.stdout.on("data",r=>{this.handleDockerEvent(r)})}catch(r){r.code!=="ENOENT"&&console.log(r),this.dockerParams=void 0}}async refresh(e){e===void 0&&(this.dockerParams=void 0),this._onDidChangeTreeData.fire(e)}},Xle="vm-active",Zle="vm-default",eue="folder-active",tue="folder";function iv(t,e){let r=`${e}.svg`;return{light:ee.Uri.file(t.asAbsolutePath(ya.join("resources","light",r))),dark:ee.Uri.file(t.asAbsolutePath(ya.join("resources","dark",r))),highContrast:ee.Uri.file(t.asAbsolutePath(ya.join("resources","highContrast",r)))}}var R_=K(require("util"));var Pn=K(require("vscode"));async function TV(t,e,r={}){let n=nc(e[0],e.slice(1),void 0),i=await DD(e[0],e.slice(1),void 0,t.loadNativeModule),o=await sh({params:t,createdAt:void 0,startedAt:void 0,sharedDataFolderIsLocalCacheFolder:!1,sharedDataFolder:void 0,remoteWorkspaceFolder:"/",containerUser:void 0,containerGroup:void 0,containerEnv:void 0,remoteExec:n,remotePtyExec:i,remoteExecAsRoot:void 0,rootShellServer:void 0}),{hostOrContainerPort:s,connectionToken:a,webConnectionToken:c,remoteEnv:l,serverDownloaded:u}=await ch(t,o,r,async()=>{},void 0);return{params:t,properties:o,config:void 0,resolvedAuthority:{host:Oo,port:s,connectionToken:a,extensionHostEnv:l},webConnectionToken:c,tunnelInformation:{},dockerParams:void 0,dockerContainerId:void 0,serverDownloaded:u}}async function AV(t,e,r){var n,i,o;if(!!await Uo(t))if(r&&r.name){let s=["get","pod",r.name,"-o","json"];r.namespace&&s.push("--namespace",r.namespace);let{cliHost:a,env:c,output:l}=e,u=(await Se({exec:a.exec,cmd:"kubectl",args:["config","current-context"],env:c,output:l})).stdout.toString().trim(),f=(await Se({exec:a.exec,cmd:"kubectl",args:s,env:c,output:l})).stdout.toString(),p=JSON.parse(f),h=((n=p.spec)==null?void 0:n.containers)||[];if(!h.length){e.output.write(`No containers found. Pod details:
${f}`),await Pn.window.showErrorMessage("No containers found.",{modal:!0},"Show Log")&&Pn.commands.executeCommand(hi);return}let m=h.length>1?(i=await Pn.window.showQuickPick(h.map(g=>({label:g.name,detail:g.image,container:g})),{placeHolder:"Select container"}))==null?void 0:i.container:h[0];if(m){let g=((o=p.metadata)==null?void 0:o.namespace)||r.namespace,v={remoteAuthority:nue({context:u,podname:r.name,namespace:g,name:m.name,image:m.image})};/\d$/.test(t.extensionPath)||(v.reuseWindow=!0),await Pn.commands.executeCommand("vscode.newWindow",v)}}else e.output.write(`No Pod name found. Pod object:
${JSON.stringify(r,void 0,"  ")}`),await Pn.window.showErrorMessage("No Pod name found.",{modal:!0},"Show Log")&&Pn.commands.executeCommand(hi)}async function DV(t,e,r,n,i){return await Uo(t)?ae(V({},await rue(t,e,r,n,i)),{isTrusted:!0}):(await Pn.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function rue(t,e,r,n,i){let o;return Pn.window.withProgress({location:Pn.ProgressLocation.Notification,title:jc,cancellable:!1},async s=>{try{let a=iue(r),c=process.cwd(),l=await Ln(void 0,c,mi,Un(),t.extensionPath,Ki(),e.product,n.log,yi);o=await $c({authority:r,extensionContext:t,sessionStart:n.sessionStart,progress:s,cliHost:l,env:l.env,cwd:c,isLocalContainer:!0,telemetry:e,output:n.log,logFilePath:n.logFilePath,allowSystemConfigChange:!1,postCreate:i}),o.setWorkspaceName(`${a.name} in ${a.podname} (${a.image})`);let u=["kubectl","exec","-it",a.podname];return a.context&&u.push("--context",a.context),a.namespace&&u.push("--namespace",a.namespace),u.push("--container",a.name,"--"),await TV(o,u)}catch(a){let c=a instanceof ye?a:new ye({description:"An error occurred attaching to the container.",originalError:a});throw c.actions=[...Tc,ra,Lo,Ic,ta],c}}).then(s=>(zi(e,"k8s-container","success",o,void 0,s.properties),s),s=>{let a=s instanceof ye?s:new ye({description:"An error occurred attaching to the container.",originalError:s});return zi(e,"k8s-container","failure",o,void 0,a.containerProperties,a),Fo(a,"k8s-container",e,!0,n)})}function nue(t){let e=[];for(let r in t){let n=t[r];n&&e.push(`${r}=${encodeURIComponent(n)}`)}return`k8s-container+${e.join("+")}`}function iue(t){return t.substr(t.indexOf("+")+1).split("+").reduce((e,r)=>{let n=r.indexOf("=");return n!==-1&&(e[r.substr(0,n)]=decodeURIComponent(r.substr(n+1))),e},{})}var tt=K(require("vscode")),sl=K(require("fs")),al=K(require("os")),Ca=K(require("path")),sv=K(require("child_process")),cl=K(require("util"));function av(t){switch(t.quality){case"stable":return"";case"insider":return"-insiders";default:return`-${t.quality}`}}async function RV(t,e){var c;let r=t.globalStorageUri,n=cn.joinPath(r,"cli-bin");await tt.workspace.fs.createDirectory(n);let i="";try{i=(await tt.workspace.fs.readFile(cn.joinPath(n,"remote-containers-path"))).toString()}catch(l){if((l==null?void 0:l.code)!=="FileNotFound")return}if(i===t.extensionPath)return;let o=cn.joinPath(t.extensionUri,"dev-containers-user-cli","bin"),s=av(e),a=[{source:"devcontainer",destination:`devcontainer${s}`},{source:"devcontainer.cmd",destination:`devcontainer${s}.cmd`}];for(let l of a)tt.workspace.fs.copy(cn.joinPath(o,l.source),cn.joinPath(n,l.destination),{overwrite:!0});await tt.workspace.fs.writeFile(cn.joinPath(n,"vscode-app-root"),Buffer.from(tt.env.appRoot,"utf-8")),await tt.workspace.fs.writeFile(cn.joinPath(n,"vscode-path"),Buffer.from(process.argv0,"utf-8")),await tt.workspace.fs.writeFile(cn.joinPath(n,"vscode-quality"),Buffer.from((c=e.quality)!=null?c:"","utf-8")),await tt.workspace.fs.writeFile(cn.joinPath(n,"vscode-machine-id"),Buffer.from(tt.env.machineId,"utf-8")),await tt.workspace.fs.writeFile(cn.joinPath(n,"remote-containers-path"),Buffer.from(t.extensionPath,"utf-8"))}async function oue(t,e){let r=av(e),n="";try{if(n=(await(0,cl.promisify)(sv.exec)(`powershell.exe -NoProfile -NonInteractive -Command "[System.Environment]::GetEnvironmentVariable('PATH', 'User')"`)).stdout.toString().trim(),n.indexOf(t)>=0)return await tt.window.showInformationMessage("The devcontainer CLI is already in your PATH",{modal:!0,detail:`Try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`}),!0;switch(await tt.window.showInformationMessage("The devcontainer CLI needs to be added to your PATH",{modal:!0},"Add","Copy CLI Path")){case"Add":let s=(0,cl.promisify)(sv.exec)(`powershell.exe  -NoProfile -NonInteractive -Command "[System.Environment]::SetEnvironmentVariable('PATH', '${n};${t}', 'User')`),a=tt.window.showInformationMessage("The devcontainer CLI has been added to your PATH",{modal:!0,detail:`Try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`});await Promise.all([s,a]);break;case"Copy CLI Path":await tt.env.clipboard.writeText(t),await tt.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break}return!0}catch{return!1}}async function sue(t,e){var a;let n=((a=process.env.PATH)!=null?a:"").split(":"),i=[Ca.join(al.homedir(),"bin"),Ca.join(al.homedir(),".local/bin")],o="/usr/local/bin";al.platform()==="darwin"&&i.push(o);let s=(0,cl.promisify)(sl.stat);for(let c of i){if(n.findIndex(p=>p===c)<0)continue;try{await s(c)}catch{continue}let l=av(e),u=Ca.join(c,`devcontainer${l}`);try{let p=await s(u);return console.log(p),await tt.window.showInformationMessage(`The devcontainer CLI is already symlinked in ${c}`,{modal:!0,detail:`Try running 'devcontainer${l} --help'
Note: you may need to restart your shell for PATH changes to take effect`}),!0}catch(p){if((p==null?void 0:p.code)!=="ENOENT")return!1}let d=await tt.window.showInformationMessage("The devcontainer CLI needs to be in your PATH",{detail:`Create a symlink in ${c}?`,modal:!0},"Create","Copy CLI Path"),f=Ca.join(t,`devcontainer${l}`);switch(d){case"Create":if(c===o){if(!await aue(f,u))break}else await(0,cl.promisify)(sl.symlink)(f,u);await tt.window.showInformationMessage(`The devcontainer CLI has been symlinked in ${c}`,{modal:!0,detail:`Try running 'devcontainer${l} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break;case"Copy CLI Path":await tt.env.clipboard.writeText(t),await tt.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${l} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break}return!0}return!1}async function aue(t,e){try{return await sl.promises.symlink(t,e),!0}catch(r){if(r.code!=="EACCES"&&r.code!=="ENOENT")throw r;if(await tt.window.showInformationMessage("This will now prompt with 'osascript' for Administrator privileges to install the shell command.",{modal:!0},"OK")==="OK"){let i=`osascript -e "do shell script \\"mkdir -p ${Ca.dirname(e)} && ln -sf '${t}' '${e}'\\" with administrator privileges"`;return await(0,cl.promisify)(sv.exec)(i),!0}return!1}}async function OV(t,e){let r=t.globalStorageUri,n=cn.joinPath(r,"cli-bin").fsPath;switch(al.platform()){case"win32":if(await oue(n,e))return;break;case"darwin":case"linux":if(await sue(n,e))return;break}if(await tt.window.showInformationMessage("The devcontainer CLI needs to be included your PATH",{modal:!0},"Copy CLI Path")==="Copy CLI Path"){await tt.env.clipboard.writeText(n);let o=av(e);await tt.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${o} --help'
Note: you may need to restart your shell for PATH changes to take effect`})}}var MV=class{constructor(e,r,n){this.context=e;this.telemetry=n,this.output=r}handleUri(e){switch(e.path){case"/cloneInVolume":this.cloneInVolume(e)}}async cloneInVolume(e){let r=FV.parse(e.query);if(!r.url){U.window.showErrorMessage(`Failed to handle the URI '${e}' expected a 'url' query parameter.`,{modal:!0});return}let n;Array.isArray(r.url)?n=r.url[0]:n=r.url;let i=await We(this.context,this.output.log);if(!!await Dr(this.context,i,await this.telemetry)){if(!await gw(i.cliHost,n,this.output.log)){await U.window.showErrorMessage(`Cannot access the repository '${n}'.`,{modal:!0});return}await U.commands.executeCommand(Im,r.url)}}};async function lue(t){var P;Cq();let e=new Date;wq(t);let r=await un(t.extensionPath),n=await ru(U.env.appRoot);bq(t,n);let i=vq(t,r,n),o=`Remote-Containers ${r.version} in VS Code ${U.version} (${n.commit||"out-of-source"}).`,s=new Fm(t.logPath,e,o);t.subscriptions.push(U.commands.registerCommand(hi,()=>s.show()));let{channel:a,postCreate:c}=gq(s.log,e);t.subscriptions.push(U.commands.registerCommand(uE,()=>a.show())),t.subscriptions.push(U.workspace.registerRemoteAuthorityResolver("dev-container",{resolve:Tm(s,c,ur.results,async(_,k,T)=>WH(t,await i,_,ur.onRemoveOnShutdownChanged,k,T)),async getCanonicalURI(_){var T;let k=Cn(_.authority);if(k&&Yt(k)){let{hostPath:A,settings:M}=k;return Wt(A)?tc(A,s.log):M&&"host"in M&&((T=M.host)==null?void 0:T.startsWith("ssh://"))?ou(M.host,A):U.Uri.file(A)}return _}}),U.workspace.registerRemoteAuthorityResolver("attached-container",{resolve:Tm(s,c,ur.results,async(_,k,T)=>iV(t,await i,_,k,T))}),U.workspace.registerRemoteAuthorityResolver("k8s-container",{resolve:Tm(s,c,ur.results,async(_,k,T)=>DV(t,await i,_,k,T))}),U.window.registerUriHandler(new MV(t,s,i)));let l=async(_,k,T)=>{let A=await We(t,s.log);if(!await Dr(t,A,await i))return;let M;if(Zt.isFolderItem(_)?(M=_.folder,T=hue()):M=_,M.scheme==="vscode-remote")return U.commands.executeCommand("vscode.openFolder",M,T);{let j=Ue(A.cliHost.path,Ee(M,A.cliHost.platform));return lv(t,j,A,await i,k,T)}};t.subscriptions.push(U.commands.registerCommand("remote-containers.openFolder",async(_,k)=>_?l(_,!1,k):UV(t,!0,await i,!1,s.log))),t.subscriptions.push(U.commands.registerCommand("remote-containers.openWorkspace",async(_,k)=>_?l(_,!1,k):UV(t,!1,await i,!1,s.log))),t.subscriptions.push(U.commands.registerCommand(eq,async _=>Zd(t,await i,s.log,_))),t.subscriptions.push(U.commands.registerCommand(Im,async _=>Zd(t,await i,s.log,_,wn))),t.subscriptions.push(U.commands.registerCommand(tq,async _=>{if(_.url){let k=_.url;return(_==null?void 0:_.ref)&&(k=`${_.url}/tree/${_.ref}`),Zd(t,await i,s.log,k,wn)}})),t.subscriptions.push(U.commands.registerCommand(rq,async _=>gue(t,await i,s.log,_,wn))),t.subscriptions.push(U.commands.registerCommand("remote-containers.inspectVolume",async(_,k,T)=>HV(t,_,k,T,await i,s.log))),t.subscriptions.push(U.commands.registerCommand("remote-containers.inspectVolumeFromViewlet",async _=>vue(t,_,await i,s.log))),t.subscriptions.push(U.commands.registerCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",async _=>Zd(t,await i,s.log,void 0,_))),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInContainer",()=>u(!1))),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildAndReopenInContainer",()=>u(!0))),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildNoCacheAndReopenInContainer",()=>u("rebuildNoCache")));let u=async _=>{if(!await U.workspace.requestWorkspaceTrust({message:od}))return;let T=await We(t,s.log);if(!await Dr(t,T,await i))return;let A=U.workspace.workspaceFile;if(A&&A.scheme==="untitled"){await Hg();return}let M=U.workspace.workspaceFolders;if(!A&&M&&M.length){let J=M.length>1?await U.window.showWorkspaceFolderPick({placeHolder:"Pick a folder to reopen in a container."}):M[0];J&&(A=J.uri)}let j=await pE(A);if(j){await ef(t,j.repositoryPath,j.volumeName,j.folder,T);return}if(A){let J;if(T.cliHost.type==="wsl"&&A.scheme==="file"){let oe=Ee(A,process.platform),re=Eo(oe)||await Gp(T.output)||(()=>{throw new Error("No default WSL distro found.")})();J=await Li(re,oe,T.output)}else J=Ee(A,T.cliHost.platform);let Y=Ue(T.cliHost.path,J);await lv(t,Y,T,await i,_,{forceReuseWindow:!0})}};t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenLocally",async()=>{let _=U.workspace.workspaceFolders,k=U.workspace.workspaceFile||_&&_.length&&_[0].uri;if(k&&k.scheme==="vscode-remote"){let T=Cn(k.authority);if(T&&Yt(T)){let A=U.Uri.file(T.hostPath),M={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",A,M)}else U.window.showInformationMessage("'Reopen Locally' not possible in current context.")}})),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInWSL",async()=>{let _=U.workspace.workspaceFolders,k=U.workspace.workspaceFile||_&&_.length&&_[0].uri;if(k&&k.scheme==="vscode-remote"){let T=Cn(k.authority);if(T&&Yt(T)&&Wt(T.hostPath)){let A=U.Uri.parse((await tc(T.hostPath,s.log)).toString()),M={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",A,M)}else U.window.showInformationMessage("'Reopen in WSL' not possible in current context.")}})),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInSSH",async()=>{let _=U.workspace.workspaceFolders,k=U.workspace.workspaceFile||_&&_.length&&_[0].uri;if(k&&k.scheme==="vscode-remote"){let T=Cn(k.authority),A=T==null?void 0:T.settings;if(T&&Yt(T)&&A&&"host"in A&&A.host&&A.host.startsWith("ssh://")){let M=U.Uri.parse(ou(A.host,T.hostPath).toString()),j={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",M,j)}else U.window.showInformationMessage("'Reopen in SSH' not possible in current context.")}}));let d,f=async _=>{var M;if(!await Uo(t))return;let k,T=typeof _=="string"?_:(M=_==null?void 0:_.containerDesc)==null?void 0:M.Id;if(T){let j=await We(t,s.log);if(!await Dr(t,j,await i))return;k=await Pr(j,T)}else{let j=!1;d||(d=ai(t.extensionPath,async Y=>(j=!0,Gi(Y)),s.log));let J=await We(t,s.log,void 0,void 0,d);if(k=await xue(J,Dr(t,J,await i),()=>j),!k)return}let A=await We(t,s.log);ov(A,k,t)};t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToRunningContainer",f)),t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToRunningContainerFromViewlet",f)),t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToK8sContainerFromViewlet",async _=>AV(t,await We(t,s.log),_)));let p=async _=>{var A;let k=await We(t,s.log);if(!await Dr(t,k,await i))return;let T=(A=_==null?void 0:_.pullRequestModel)==null?void 0:A.html_url;Zd(t,await i,s.log,T,wn)};t.subscriptions.push(U.commands.registerCommand("remote-containers.checkoutPRInVolume",p)),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildContainer",async()=>{let _=await sa();if(_){let k=await We(t,s.log);await ef(t,_.repositoryPath,_.volumeName,_.folder,k,!0);return}return await Promise.all(ur.onRemoveOnShutdownChangedEmitter.fire(!0)),U.commands.executeCommand("workbench.action.reloadWindow")})),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildContainerNoCache",async()=>{let _=await sa();if(_){let k=await We(t,s.log);await ef(t,_.repositoryPath,_.volumeName,_.folder,k,"rebuildNoCache");return}return await Promise.all(ur.onRemoveOnShutdownChangedEmitter.fire("rebuildNoCache")),U.commands.executeCommand("workbench.action.reloadWindow")}));let h=U.env.remoteName&&U.env.remoteName!=="test"?"linux":process.platform,m=((P=(U.workspace.workspaceFolders||[])[0])==null?void 0:P.uri)||Ce.file(process.cwd()),g=Jo(h,m),v={fileHost:g,findDevContainerFiles:()=>yE(g),telemetry:i,output:s.log,existingFilesLearnMoreLink:ed,predefinedDefinitionsLearnMoreLink:td,openConfigurationCommandId:Zu},w=await RH(t,v);t.subscriptions.push(U.commands.registerCommand("remote-containers.createDevContainerFile",async()=>{if(!U.workspace.workspaceFolders){await U.window.showInformationMessage("Open a folder to create the configuration files in first.",{modal:!0},"Open Folder")&&await U.commands.executeCommand(process.platform==="darwin"?"workbench.action.files.openFileFolder":"workbench.action.files.openFolder");return}await F_(t,g,w,await i,s.log)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openDevContainerFile",async(_,k)=>{let T,A=await We(t,s.log),M;if(typeof _=="string"?T=[Ce.file(_)]:(M=await yE(A.cliHost),T=(await Promise.all(M.map(j=>j.scheme==="file"||j.scheme==="vscode-remote"?j:A.cliHost.toCommonURI(Ee(j,A.cliHost.platform))))).filter(j=>!!j)),T.length){let j;T.length===1?j={uri:T[0]}:j=await U.window.showQuickPick(T.map(Y=>({label:Y.scheme==="file"?Y.fsPath:Y.toString(),uri:Y})),{placeHolder:"Select container configuration file to open"});let J=await sa();if(J){let Y=hq(J.folder);for(let oe of Y){try{await U.workspace.openTextDocument(U.Uri.parse(oe.toString()))}catch{continue}await U.commands.executeCommand("vscode.open",U.Uri.parse(oe.toString()),k);return}return}if(j){let Y=j.uri,oe=VL(Y);if(oe){let re=`https://github.com/microsoft/vscode-dev-containers/tree/main/repository-containers/${process.platform==="win32"?oe.replace(/\\/g,"/"):oe}`;return U.env.openExternal(U.Uri.parse(re))}else{if(Y.scheme==="file"&&await ht(Y.fsPath))return await U.commands.executeCommand("vscode.open",U.Uri.parse(Y.toString()),k);if(Y.scheme==="file"&&ur.results.size)return await pn(Fn,Y,[],qi),await U.commands.executeCommand("vscode.open",U.Uri.parse(Y.toString()),k);if(Y.scheme==="vscode-remote"&&ur.results.size)return await U.commands.executeCommand("vscode.open",U.Uri.parse(Y.toString()),k);if(_===void 0)return await F_(t,g,w,await i,s.log)}}}else if(_===void 0&&!(M==null?void 0:M.length))return await F_(t,g,w,await i,s.log)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openAttachConfigByNameFile",async()=>{let{dockerContainerId:_,dockerParams:k}=[...ur.results.values()][0];if(!_||!k)return U.window.showInformationMessage("Named configurations are only available for Docker containers.",{modal:!0});let T=await Pr(k,_),A=ev(t.globalStoragePath,T.Name),M=U.Uri.file(A);return await ht(A)?U.commands.executeCommand("vscode.open",M):(await pn(Fn,M,[],qi),U.commands.executeCommand("vscode.open",M))})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openAttachDevContainerFile",async()=>{let _=[...(await XH(t.globalStoragePath)).map(T=>V({label:T.name},T)).sort((T,A)=>T.label.localeCompare(A.label)),...(await eV(t.globalStoragePath)).map(T=>V({label:T.image},T)).sort((T,A)=>T.label.localeCompare(A.label))],k=await U.window.showQuickPick(_.length?_:[{label:"No configuration found."}],{placeHolder:"Choose a configuration file"});if(k&&"uri"in k)return U.commands.executeCommand("vscode.open",U.Uri.parse(k.uri.toString()))})),t.subscriptions.push(U.commands.registerCommand("remote-containers.settings",async()=>U.commands.executeCommand("workbench.action.openSettings",`@ext:${jV()}`))),t.subscriptions.push(U.commands.registerCommand("remote-containers.getHelp",async()=>U.env.openExternal(U.Uri.parse("https://aka.ms/vscode-remote/containers")))),t.subscriptions.push(U.commands.registerCommand("remote-containers.getStarted",async()=>U.env.openExternal(U.Uri.parse("https://aka.ms/vscode-remote/containers/getting-started")))),t.subscriptions.push(U.commands.registerCommand("remote-containers.reportIssue",async()=>U.commands.executeCommand("vscode.openIssueReporter",jV()))),t.subscriptions.push(U.commands.registerCommand("remote-containers.provideFeedback",async()=>U.env.openExternal(U.Uri.parse("https://aka.ms/vscode-remote/containers/provide-feedback")))),t.subscriptions.push(U.languages.registerDocumentLinkProvider([{pattern:"**/devcontainer.json",language:"jsonc"},{pattern:"**/.devcontainer.json",language:"jsonc"}],new A_(g))),t.subscriptions.push(U.commands.registerCommand("remote-containers.trySample",async()=>{Rue(t,s.log)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openLogFile",()=>Oue(t))),t.subscriptions.push(U.commands.registerCommand("remote-containers.openLastLogFile",()=>Nue(t,"remoteContainers",s.logFilePath))),t.subscriptions.push(U.commands.registerCommand("remote-containers.showReopenInContainerNotificationReset",()=>Iue(t))),t.subscriptions.push(U.commands.registerCommand("remote-containers.showRecoveryContainerNotificationReset",()=>due(t))),t.subscriptions.push(U.commands.registerCommand("remote-containers.installDocker",()=>nv(s.log))),EV(t,ur.results,await i,s.log),await RV(t,n),t.subscriptions.push(U.commands.registerCommand("remote-containers.installUserCLI",()=>OV(t,n))),(async()=>{await pq(t)||await zV(t,g,await i,s.log)})().catch(console.error),fue(t);let b=U.env.remoteName,C=!b||["dev-container","attached-container","wsl","ssh-remote","exec","k8s-container"].indexOf(b)!==-1?[{pattern:"**/.devcontainer.json"},{pattern:"**/devcontainer.json"}]:[];t.subscriptions.push(U.commands.registerCommand("remote-containers.addExtensionToConfig",w.addExtensionToConfiguration),U.languages.registerCompletionItemProvider([...C,{pattern:Ft.join(tv(t.globalStoragePath),"*.json")},{pattern:Ft.join(Zg(t.globalStoragePath),"*.json")}],w.createCompletionItemProvider()),U.commands.registerCommand("remote-containers.configureContainerFeatures",async()=>{var T;let _=await We(t,s.log),k=await d_(v,{readDockerComposeConfig:async(A,M)=>{let j=await NL(_.cliHost.cwd,A,_.output);return LL(_,j,M)}});if(k){let A;if(!k.manifest&&k.imageName)try{A=await gc(_,k.imageName)}catch(M){if(((T=M==null?void 0:M.stdout)==null?void 0:T.toString().replace(/\s/g,""))==="[]")try{await Ke(_,"pull",k.imageName),A=await gc(_,k.imageName)}catch{}}await p_(v,k,(A==null?void 0:A.Config.Labels)||{})}}),U.commands.registerCommand("remote-containers.labelPortAndUpdateConfig",w.addPortLabelToConfiguration)),await sa()&&U.commands.executeCommand("setContext","isRecoveryContainer",!0),t.subscriptions.push(vH())}var qV="showRecoveryContainerNotification",$V="showReopenInContainerNotificationReset",uue=5e3;function due(t){return t.globalState.update($V,Date.now())}async function fue(t){setTimeout(async()=>{let e=t.globalState.get($V);if(M_(t.globalState.get(qV),e))return;if(await sa()){let n="This is a recovery container that allows you to edit your Dockerfile. Use 'Reopen in Container' to retry.",i="Reopen in Container",o="Don't Show Again",s=await U.window.showInformationMessage(n,i,o);s===i?U.commands.executeCommand("remote-containers.reopenInContainer"):s===o&&await t.globalState.update(qV,Date.now())}},uue)}async function pue(){await Promise.all([...ur.results.values()].map(t=>Promise.all(t.params.shutdowns.map(e=>{try{e()}catch(r){console.error(r)}}))))}function jV(){let{name:t,publisher:e}=NV();return`${e}.${t}`}async function UV(t,e,r,n,i){var d;let o=await We(t,i);if(!await Dr(t,o,r))return;let s,a=U.workspace.workspaceFolders;if(a&&a[0]){let f=a[0].uri;if(f.scheme==="vscode-remote"){let p=Cn(f.authority);if(p&&Yt(p)){let h=Ue(o.cliHost.path,p.hostPath);s=U.Uri.file(h.rootFolderPath)}else/^(wsl|ssh-remote)\+/.test(f.authority)&&(s=f)}else f.scheme==="file"&&(s=f)}s||(((d=U.env.remoteName)==null?void 0:d.match(/^(wsl|ssh-remote)$/))?s=U.Uri.from({scheme:"vscode-remote",authority:U.env.remoteAuthority,path:await o.cliHost.homedir()}):s=U.Uri.file(LV.homedir()));let c=e?{defaultUri:s,canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,openLabel:"Open"}:{defaultUri:s,canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{"Code Workspace":["code-workspace"]},openLabel:"Open"},l=await U.window.showOpenDialog(c),u=l&&l[0];if(u){let f=e?u:u.with({path:Ft.posix.dirname(u.path)}),p=await We(t,o.output,f,hE()==="always"),h=Ee(u,p.cliHost.platform),m=Ue(p.cliHost.path,h);await lv(t,m,p,r,n)}}function hue(){return U.workspace.getConfiguration("window").get("openFoldersInNewWindow",void 0)==="on"?{forceNewWindow:!0}:{forceReuseWindow:!0}}async function lv(t,e,r,n,i,o){var v;let{cliHost:s}=r;if(Wt(e.rootFolderPath)){if(r=await We(t,r.output,e.rootFolderPath),s=r.cliHost,!await Dr(t,r,n))return;e=Ue(s.path,e.isWorkspaceFile?s.path.join(s.cwd,Ft.basename(e.workspaceOrFolderPath)):s.cwd)}let a=await Ka(s,e);if(a){let w="Continue";if(await U.window.showInformationMessage(`The workspace could fail to open in a container: ${a}`,{modal:!0},w)!==w)return}let c=await fi(s,e,vi(),!0,r.output),l={cliHost:s,appRoot:U.env.appRoot,extensionPath:t.extensionPath,package:await un(t.extensionPath),output:r.output},u=c&&await Uc(l,e.rootFolderPath,c);if(!u||!Ao(u.configuration)){let w=await Kd({fileHost:s,telemetry:n,output:r.output,existingFilesLearnMoreLink:ed,predefinedDefinitionsLearnMoreLink:td,openConfigurationCommandId:Zu},e);if(!w||(u=await Uc(l,e.rootFolderPath,Ce.file(w).with({scheme:wt.scheme})),!u))return}let d=u.configuration;if(!await mue(r,d))return;let f=u.workspace.workspaceFolder;if(mt(d)){let w=hr(s,d);if(!d.initializeCommand&&!await zt(s).readDocument(w))return tf(`"${w.fsPath}" does not exist.`,s,d.configFilePath);if(d.workspaceFolder&&!Ft.posix.isAbsolute(d.workspaceFolder))return tf("Workspace folder in devcontainer.json must be an absolute path.",s,d.configFilePath)}else if(!("image"in d))if("dockerComposeFile"in d){if(!await mV(r)||!await Pue(e,r,d))return}else{let w=d.configFilePath;return tf(`Configuration "${s.path.relative(e.rootFolderPath,Ee(w,s.platform))}" not valid.`,s,w)}e.isWorkspaceFile&&(f=Ft.posix.join(f,s.path.basename(e.workspaceOrFolderPath)));let p=No(r.env),h=s.type==="wsl"?(await s.toCommonURI(e.workspaceOrFolderPath)).fsPath:e.workspaceOrFolderPath,m=(s.type==="local"||s.type==="wsl")&&p&&"host"in p&&((v=p.host)==null?void 0:v.startsWith("ssh://")),g=U.Uri.parse($u(h,f,p,m));await dv({uri:g,type:e.isWorkspaceFile?"workspace":"folder",label:`${h1(s.platform,e.workspaceOrFolderPath,await s.homedir())}${xc(p)} [Dev Container]`}),await vE(t,i?g.authority:!1),await nd(t,i==="rebuildNoCache"?g.authority:!1),await U.commands.executeCommand("vscode.openFolder",g,o)}async function mue(t,e){let r=e.hostRequirements;if(r&&(r.cpus||r.memory)){let n=await Ke(t,"info","--format","{{json .}}"),i=JSON.parse(n.stdout.toString()),o=i.NCPU&&r.cpus&&r.cpus>i.NCPU,s=i.MemTotal&&r.memory&&O_(r.memory)>i.MemTotal;if(o||s){let a=[];i.NCPU&&a.push(`CPUs ${i.NCPU}`),i.MemTotal&&a.push(`RAM ${N_(i.MemTotal)}`);let c=[];r.cpus&&c.push(`CPUs ${r.cpus}`),r.memory&&c.push(`RAM ${N_(O_(r.memory))}`),r.storage&&c.push(`disk ${N_(O_(r.storage))}`);let l=`Docker daemon: ${a.join(", ")}
devcontainer.json: ${c.join(", ")}`;if(!await U.window.showInformationMessage("Not all host requirements in devcontainer.json are met by the Docker daemon.",{modal:!0,detail:l},"Continue"))return!1}}return!0}function O_(t){let e=/^(\d+)([tgmk]b)?$/.exec(t);if(e){let[,r,n]=e,i=parseInt(r,10),o=n&&{t:2**40,g:2**30,m:2**20,k:2**10}[n[0]]||1;return i*o}return 0}function N_(t){let e=Math.min(Math.floor(Math.log2(Math.max(Math.abs(t),1))/10),4),r=t/Math.pow(2,10*e),n=Math.max(Math.pow(10,2-Math.floor(Math.log10(Math.max(Math.abs(r),1)))),1),i=Math.round(r*n)/n,o=[" bytes","kb","mb","gb","tb"][e];return`${i}${o}`}async function Zd(t,e,r,n,i){if(!await sd(t))return;let o=await We(t,r),s=null;if(!!await Dr(t,o,e)){if(typeof n=="string")s=n;else{let a=await U.commands.executeCommand("git-base.api.getRemoteSources",{providerLabel:c=>`Clone a repository from ${c.name} in a Container Volume`,urlLabel:"Clone git repository from URL",branch:!0});if(a){s=(typeof a=="string"?a:a.url).trim(),s.split("/").length===2&&s.indexOf(":")===-1&&(s=`https://github.com/${s}`);let c=di(s);if(!await gw(o.cliHost,c.repositoryUrl,o.output)){await U.window.showInformationMessage(`Cannot access the repository '${c.repositoryUrl}'.`,{modal:!0});return}typeof a!="string"&&a.branch&&(s=`${s}/tree/${a.branch}`)}}s&&await BV(t,o,s,i)}}async function BV(t,e,r,n){if(n||(n=await wue(e)),n){let i=L_(r);n!==wn&&(i=await bue(r)),i&&await ef(t,r,n,i,e)}}async function gue(t,e,r,n,i){if(!await sd(t))return;let o=await We(t,r),s=/^(?:(?:https:\/\/)?github.com\/)?([^/]+)\/([^/]+?)(?:\/(?:pull\/([0-9]+)))?(?:\/|$)/i;if(!await Dr(t,o,e))return;let a={placeHolder:"e.g. https://github.com/microsoft/vscode/pull/123",prompt:"Enter a GitHub pull request url",validateInput:u=>s.test(u)?void 0:"Invalid pull request url"},c;if(n?c=n:c=await U.window.showInputBox(a),!c)return;let l=di(c);if(l.repository==="unknown"||!l.pullRequestId){await U.window.showInformationMessage(`Invalid pull request URL '${c}'.`,{modal:!0});return}await BV(t,o,c,i)}async function HV(t,e,r,n,i,o){let s=await We(t,o);!await Dr(t,s,i)||(e||(e=await yue(s)),e&&(r&&n?await Sue(e,r,n,s):await _ue(e,s)))}async function vue(t,e,r,n){let i=await We(t,n);!await Dr(t,i,await r)||e&&e.volumeName&&await HV(t,e.volumeName,void 0,void 0,r,n)}var uv=class{get detail(){return""}},VV=class extends uv{get label(){return"$(plus) Create a new volume..."}get description(){return""}get volumeName(){return""}get detail(){return"Use this volume to store several cloned repositories."}get alwaysShow(){return!0}},WV=class extends uv{constructor(e){super();this.volume=e}get label(){return`$(folder) ${this.volume.Name}`}get description(){return`created at ${new Date(this.volume.CreatedAt).toDateString()}`}get volumeName(){return this.volume.Name}},GV=class extends uv{constructor(e){super();this.volume=e}get label(){return`$(folder) ${this.volume.Name}`}get description(){return`created at ${new Date(this.volume.CreatedAt).toDateString()}`}get volumeName(){return this.volume.Name}};async function yue(t){let e=await ci(t),n=(await mu(t,e)).map(a=>new GV(a)),i="Select the volume to inspect with Visual Studio Code",o=U.window.createQuickPick();o.items=n,o.placeholder=i,o.show();let s=await new Promise(a=>{o.onDidAccept(()=>a(o.activeItems[0])),o.onDidHide(()=>a(void 0))});return o.hide(),s?s.volume.Name:null}async function wue(t){let e=await ci(t,["vsch.local.repository.unique=false"]),n=(await mu(t,e)).map(u=>new WV(u)),i=new VV,o=[i,...n],s="Select the volume for the cloned repository",a=U.window.createQuickPick();a.items=o,a.placeholder=s,a.ignoreFocusOut=!0,a.show();let c=await new Promise(u=>{a.onDidAccept(()=>u(a.activeItems[0])),a.onDidHide(()=>u(void 0))});if(a.hide(),!c)return null;let l=null;return c===i?l=await Cue(t):l=c.volumeName,l}async function Cue(t){let e="",r="vsc-remote-containers",n=await ci(t);n.find(s=>s===r)||(e=r);let i={prompt:"Enter the volume name.",value:e,ignoreFocusOut:!0,validateInput:s=>/^[a-zA-Z0-9][a-zA-Z0-9_.-]+$/i.test(s)?null:s.length<2?"Volume names should be at least two characters and the first character must be alphanumeric.":"Only [a-zA-Z0-9_.-] are allowed and the first character must be alphanumeric."},o=await U.window.showInputBox(i);return o?n.find(s=>s===o)?(await U.window.showErrorMessage("Volume already exists",{modal:!0}),null):o:null}async function bue(t){let e={prompt:"Enter the target folder name.",value:L_(t),ignoreFocusOut:!0},r=await U.window.showInputBox(e);return r||null}function L_(t){return vn(t).repositoryName}async function Eue(){return(await U.authentication.getSession("github",["repo"],{createIfNone:!0})).accessToken}async function ef(t,e,r,n,i,o=!1){let s=No(i.env),a=Sc(e),c;try{c=await a.parseUrl(void 0)}catch(u){if(u instanceof Xh){U.window.showErrorMessage(u.description);return}let d=await Eue();try{c=await a.parseUrl(d)}catch{U.window.showErrorMessage(`Cannot access '${e}'.`,{modal:!0});return}}let l=U.Uri.parse(ea(e,r,n,!1,s,c));r===wn&&(r="a unique volume"),await dv({uri:l,type:"folder",label:`${n} in ${r} [Dev Container]`}),await vE(t,o?l.authority:!1),await nd(t,o==="rebuildNoCache"?l.authority:!1),await U.commands.executeCommand("vscode.openFolder",l)}async function _ue(t,e){let r=No(e.env),n=U.Uri.parse(ea(void 0,t,void 0,!0,r,void 0));await dv({uri:n,type:"folder",label:`Volume ${t} [Dev Container]`}),await U.commands.executeCommand("vscode.openFolder",n)}async function Sue(t,e,r,n){let i=No(n.env),o=U.Uri.parse(ea(e,t,r,!0,i,void 0));await dv({uri:o,type:"folder",label:`${r} in ${t} [Inspect Dev Container]`}),await U.commands.executeCommand("vscode.openFolder",o)}async function dv(t){return U.commands.executeCommand("_workbench.addToRecentlyOpened",t)}async function ov(t,e,r,n){if(!await Uo(r))return;let i,o=t.cliHost;if(o.type==="wsl"){let l=await o.toCommonURI(o.cwd);l&&l.scheme==="file"&&(i=l.fsPath)}let s=u1(e.Name,No(t.env),i),a=await JH(r.globalStoragePath,e),c=r.extensionMode===U.ExtensionMode.Development;if(a&&a.workspaceFolder&&!n){let l=U.Uri.parse(`vscode-remote://${s}${a.workspaceFolder}`),u={};c?u.forceReuseWindow=!0:u.forceNewWindow=!0,await U.commands.executeCommand("vscode.openFolder",l,u)}else{let l={remoteAuthority:s};c&&!n&&(l.reuseWindow=!0),await U.commands.executeCommand("vscode.newWindow",l)}}async function xue(t,e,r){let n=(async()=>{if(!await e)throw new Error("cancel");let i=await ji(t),o=await Do(t,i),s=[];if(o.forEach(a=>{a.State.Status==="running"&&s.push({label:a.Name,description:`${a.Config.Image} ${a.Id}`,containerInfo:a})}),s.length===0)throw U.window.showErrorMessage("There are no running containers to attach to.",{modal:!0}),new Error("cancel");return s})();try{let i={placeHolder:"Select the container to attach VS Code"},o=await U.window.showQuickPick(n,i);if(!o&&r()){if(!await e)throw new Error("cancel");o=await U.window.showQuickPick(n,i)}return o?o.containerInfo:void 0}catch(i){if(i&&i.message==="cancel")return;throw i}}async function Pue(t,e,r){if(!r.workspaceFolder)return tf("Workspace folder not specified in devcontainer.json.",e.cliHost,r.configFilePath),!1;if(!Ft.posix.isAbsolute(r.workspaceFolder))return tf("Workspace folder in devcontainer.json must be an absolute path.",e.cliHost,r.configFilePath),!1;let n=await qt(e.cliHost,r,e.cliHost.env,e.cliHost.cwd),i=await Ou(e,t,n),o=await FL(e,i,r.service),s=o&&await Pr(e,o);return!(s&&!await kue(e.cliHost,n,r,s))}async function kue(t,e,r,n){var o,s,a,c;let i=[];for(let l=0;l<e.length;l++)await t.isFile(e[l])||i.push(e[l]);return i.length>0?(U.window.showErrorMessage(`The following referenced docker compose files do not exist: ${i.join(", ")}`,{modal:!0}),!1):((s=(o=r.customizations)==null?void 0:o.vscode)==null?void 0:s.devPort)&&!n.Ports.find(l=>{var u,d;return((d=(u=r.customizations)==null?void 0:u.vscode)==null?void 0:d.devPort)===l.PrivatePort})?(U.window.showErrorMessage(`The port '${(c=(a=r.customizations)==null?void 0:a.vscode)==null?void 0:c.devPort}' is not open on the service '${r.service}'`,{modal:!0}),!1):!0}async function tf(t,e,r){if(await U.window.showErrorMessage(t,{modal:!0},"Open devcontainer.json")){let i=Ee(r,e.platform),o=await e.toCommonURI(i);o&&U.window.showTextDocument(U.Uri.parse(o.toString()))}}async function F_(t,e,r,n,i){await r.createConfiguration()&&await zV(t,e,n,i)}async function zV(t,e,r,n){if([void 0,"wsl","ssh-remote"].indexOf(U.env.remoteName)===-1)return;let i=U.workspace.workspaceFile,o=U.workspace.workspaceFolders,s=i||o&&o.length&&o[0].uri||void 0;if(s&&s.scheme!=="vscode-vfs"){let a=Ee(s,e.platform),c=Ue(e.path,a),l=await sb(e,c,vi());l&&await Tue(t,l,c,e,r,n)}}var fv="showReopenInContainerNotification",KV="showReopenInContainerNotificationReset";function Iue(t){return t.globalState.update(KV,Date.now())}async function Tue(t,e,r,n,i,o){let s=t.globalState.get(KV);if(M_(t.globalState.get(fv),s)||M_(t.workspaceState.get(fv),s))return;let a=HL(n,r,e.uri),c,l="";n.platform!=="linux"&&U.env.remoteName!=="wsl"&&!(n.platform==="win32"&&Wt(r.rootFolderPath));let u;a?r.isWorkspaceFile?u="Workspace contains a Dev Container configuration file.":u="Folder contains a Dev Container configuration file.":u="There is a [Dev Container configuration](command:remote-containers.openDevContainerFile) available for this repository.";let d="Reopen in Container",f="Clone in Volume",p="Don't Show Again...",h=r.isWorkspaceFile?`${u} Reopen workspace to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).${l}`:`${u} Reopen folder to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).${l}`,m=c?[d,f,p]:[d,p];Aue(i,e.location);let g=await U.window.showInformationMessage(h,...m);if(Due(i,g===d?"reopen":g===f?"openRepository":g===p?"dontShowAgain":"cancel",e.location),g===d){if(!await U.workspace.requestWorkspaceTrust({message:od}))return;let b=await We(t,o);if(!await Dr(t,b,i))return;if(b.cliHost.type==="wsl"&&n.platform==="win32"){let{cwd:C}=await Gw(r.workspaceOrFolderPath,Un(),o);r=Ue(b.cliHost.path,C)}try{await lv(t,r,b,i,!1,{forceReuseWindow:!0})}catch(C){await Fo(C,"ui",i)}}else if(g===f){let w=await We(t,o),b=await aT(w.cliHost,r,w.output),C="OK",S="Cancel";(!b||C===await U.window.showInformationMessage("Local changes not pushed to the Git remote will not be available in the Docker volume.",C,S))&&await U.window.withProgress({location:U.ProgressLocation.Notification,title:"Clone in Volume"},async(P,_)=>{P.report({message:"Follow the prompts at the top of the window."}),await U.commands.executeCommand(Im,c)})}else if(g===p){let w=r.isWorkspaceFile?"Any Workspace":"Any Folder",b=r.isWorkspaceFile?"Current Workspace":"Current Folder",C=r.isWorkspaceFile?"Don't show again for the current workspace or for any workspace?":"Don't show again for the current folder or for any folder?",S=await U.window.showInformationMessage(C,w,b);S===w?await t.globalState.update(fv,Date.now()):S===b&&await t.workspaceState.update(fv,Date.now())}}function Aue(t,e){t.sendTelemetryEvent("reopenNotificationOpen",{location:e})}function Due(t,e,r){t.sendTelemetryEvent("reopenNotificationResult",{result:e,location:r})}function M_(t,e){return t===!1?t=1:t===void 0&&(t=-1),e===void 0&&(e=0),e<t}async function Rue(t,e){let r=[{label:"C++",detail:"https://github.com/Microsoft/vscode-remote-try-cpp"},{label:"Go",detail:"https://github.com/Microsoft/vscode-remote-try-go"},{label:"Java",detail:"https://github.com/Microsoft/vscode-remote-try-java"},{label:".NET Core",detail:"https://github.com/Microsoft/vscode-remote-try-dotnetcore"},{label:"Node",detail:"https://github.com/Microsoft/vscode-remote-try-node"},{label:"PHP",detail:"https://github.com/Microsoft/vscode-remote-try-php"},{label:"Python",detail:"https://github.com/Microsoft/vscode-remote-try-python"},{label:"Rust",detail:"https://github.com/Microsoft/vscode-remote-try-rust"}],n={placeHolder:"Select a sample repository to clone in a container volume"},i=await U.window.showQuickPick(r,n);if(!i)return;let o=await We(t,e);i.detail&&await ef(t,i.detail,wn,L_(i.detail),o)}async function Oue(t){let e=await Promise.all((await YV(t)).map(async n=>{let i=await(0,R_.promisify)(cv.stat)(n.path),o=n.time;return{label:n.prefix,description:`${ll(o.getFullYear())}-${ll(o.getMonth())}-${ll(o.getDay())} ${ll(o.getHours())}:${ll(o.getMinutes())}:${ll(o.getSeconds())} - ${i.size} bytes`,path:n.path}}));e.length||e.push({label:"No log files found."});let r=await U.window.showQuickPick(e,{placeHolder:"Choose a log file"});r&&r.path&&await U.window.showTextDocument(U.Uri.file(r.path))}function ll(t,e=2){let r=t.toString();for(;r.length<e;)r="0"+r;return r}async function Nue(t,e,r){let n=(await YV(t)).find(i=>i.name.startsWith(e)&&i.path!==r);n?await U.window.showTextDocument(U.Uri.file(n.path)):await U.window.showInformationMessage("No previous log file found.",{modal:!0})}async function YV(t){let e=[],r=Ft.basename(t.logPath),n=Ft.dirname(Ft.dirname(Ft.dirname(t.logPath)));for(let i of(await q_(n)).sort().reverse()){let o=/(\d\d\d\d)(\d\d)(\d\d)T(\d\d)(\d\d)(\d\d)/.exec(i);if(o){let s=Ft.join(n,i);for(let a of await q_(s)){let c=Ft.join(s,a),l=Ft.join(c,r);for(let u of(await q_(l)).sort()){let d=Ft.join(l,u),f=/(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d)[:\-](\d\d)[:\-](\d\d)\.(\d\d\d)Z/.exec(u),p=f?new Date(`${f[1]}-${f[2]}-${f[3]}T${f[4]}:${f[5]}:${f[6]}.${f[7]}Z`):new Date(`${o[1]}-${o[2]}-${o[3]}T${o[4]}:${o[5]}:${o[6]}Z`);e.push({name:u,path:d,time:p,prefix:f?u.substr(0,f.index-1):u.substr(0,u.length-4)})}}}}return e.sort((i,o)=>i.time>o.time?-1:i.time<o.time?1:i.path.localeCompare(o.path)),e}async function q_(t){try{return await(0,R_.promisify)(cv.readdir)(t)}catch{return[]}}0&&(module.exports={activate,attachToContainer,deactivate});
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
//# sourceMappingURL=extension.js.map
