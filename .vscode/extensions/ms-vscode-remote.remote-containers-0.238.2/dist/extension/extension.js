/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------------------------------------------*/

var P3=Object.create;var fl=Object.defineProperty,k3=Object.defineProperties,I3=Object.getOwnPropertyDescriptor,T3=Object.getOwnPropertyDescriptors,A3=Object.getOwnPropertyNames,J_=Object.getOwnPropertySymbols,D3=Object.getPrototypeOf,Q_=Object.prototype.hasOwnProperty,R3=Object.prototype.propertyIsEnumerable;var X_=(t,e,r)=>e in t?fl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,V=(t,e)=>{for(var r in e||(e={}))Q_.call(e,r)&&X_(t,r,e[r]);if(J_)for(var r of J_(e))R3.call(e,r)&&X_(t,r,e[r]);return t},se=(t,e)=>k3(t,T3(e)),Z_=t=>fl(t,"__esModule",{value:!0});var I=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),O3=(t,e)=>{Z_(t);for(var r in e)fl(t,r,{get:e[r],enumerable:!0})},N3=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of A3(e))!Q_.call(t,n)&&n!=="default"&&fl(t,n,{get:()=>e[n],enumerable:!(r=I3(e,n))||r.enumerable});return t},K=t=>N3(Z_(fl(t!=null?P3(D3(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var ba=I((jue,nS)=>{"use strict";var rS=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);nS.exports=t=>t?Object.keys(t).map(e=>[rS.has(e)?rS.get(e):e,t[e]]).reduce((e,r)=>(e[r[0]]=r[1],e),Object.create(null)):{}});var iS=I((Uue,oS)=>{"use strict";oS.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var gl=I((Bue,sS)=>{"use strict";sS.exports=Be;Be.Node=Cs;Be.create=Be;function Be(t){var e=this;if(e instanceof Be||(e=new Be),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(o){e.push(o)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}Be.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Be.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Be.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Be.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)F3(this,arguments[t]);return this.length};Be.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)M3(this,arguments[t]);return this.length};Be.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Be.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Be.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};Be.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};Be.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};Be.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};Be.prototype.map=function(t,e){e=e||this;for(var r=new Be,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};Be.prototype.mapReverse=function(t,e){e=e||this;for(var r=new Be,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};Be.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=0;n!==null;o++)r=t(r,n.value,o),n=n.next;return r};Be.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=this.length-1;n!==null;o--)r=t(r,n.value,o),n=n.prev;return r};Be.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};Be.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};Be.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Be;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,o=this.head;o!==null&&n<t;n++)o=o.next;for(;o!==null&&n<e;n++,o=o.next)r.push(o.value);return r};Be.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Be;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,o=this.tail;o!==null&&n>e;n--)o=o.prev;for(;o!==null&&n>t;n--,o=o.prev)r.push(o.value);return r};Be.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,o=this.head;o!==null&&n<t;n++)o=o.next;for(var i=[],n=0;o&&n<e;n++)i.push(o.value),o=this.removeNode(o);o===null&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(var n=0;n<r.length;n++)o=L3(this,o,r[n]);return i};Be.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function L3(t,e,r){var n=e===t.head?new Cs(r,null,e,t):new Cs(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function F3(t,e){t.tail=new Cs(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function M3(t,e){t.head=new Cs(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Cs(t,e,r,n){if(!(this instanceof Cs))return new Cs(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{iS()(Be)}catch{}});var Ea=I((Hue,mS)=>{"use strict";var q3=require("events"),aS=require("stream"),vl=gl(),cS=require("string_decoder").StringDecoder,ko=Symbol("EOF"),yl=Symbol("maybeEmitEnd"),ii=Symbol("emittedEnd"),of=Symbol("emittingEnd"),sf=Symbol("closed"),lS=Symbol("read"),Ev=Symbol("flush"),uS=Symbol("flushChunk"),Cr=Symbol("encoding"),Io=Symbol("decoder"),af=Symbol("flowing"),wl=Symbol("paused"),Cl=Symbol("resume"),pr=Symbol("bufferLength"),dS=Symbol("bufferPush"),_v=Symbol("bufferShift"),tr=Symbol("objectMode"),rr=Symbol("destroyed"),fS=global._MP_NO_ITERATOR_SYMBOLS_!=="1",$3=fS&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),j3=fS&&Symbol.iterator||Symbol("iterator not implemented"),pS=t=>t==="end"||t==="finish"||t==="prefinish",U3=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,B3=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t);mS.exports=class hS extends aS{constructor(e){super();this[af]=!1,this[wl]=!1,this.pipes=new vl,this.buffer=new vl,this[tr]=e&&e.objectMode||!1,this[tr]?this[Cr]=null:this[Cr]=e&&e.encoding||null,this[Cr]==="buffer"&&(this[Cr]=null),this[Io]=this[Cr]?new cS(this[Cr]):null,this[ko]=!1,this[ii]=!1,this[of]=!1,this[sf]=!1,this.writable=!0,this.readable=!0,this[pr]=0,this[rr]=!1}get bufferLength(){return this[pr]}get encoding(){return this[Cr]}set encoding(e){if(this[tr])throw new Error("cannot set encoding in objectMode");if(this[Cr]&&e!==this[Cr]&&(this[Io]&&this[Io].lastNeed||this[pr]))throw new Error("cannot change encoding");this[Cr]!==e&&(this[Io]=e?new cS(e):null,this.buffer.length&&(this.buffer=this.buffer.map(r=>this[Io].write(r)))),this[Cr]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[tr]}set objectMode(e){this[tr]=this[tr]||!!e}write(e,r,n){if(this[ko])throw new Error("write after end");return this[rr]?(this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0):(typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8"),!this[tr]&&!Buffer.isBuffer(e)&&(B3(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):U3(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),!this.objectMode&&!e.length?(this[pr]!==0&&this.emit("readable"),n&&n(),this.flowing):(typeof e=="string"&&!this[tr]&&!(r===this[Cr]&&!this[Io].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Cr]&&(e=this[Io].write(e)),this.flowing?(this[pr]!==0&&this[Ev](!0),this.emit("data",e)):this[dS](e),this[pr]!==0&&this.emit("readable"),n&&n(),this.flowing))}read(e){if(this[rr])return null;try{return this[pr]===0||e===0||e>this[pr]?null:(this[tr]&&(e=null),this.buffer.length>1&&!this[tr]&&(this.encoding?this.buffer=new vl([Array.from(this.buffer).join("")]):this.buffer=new vl([Buffer.concat(Array.from(this.buffer),this[pr])])),this[lS](e||null,this.buffer.head.value))}finally{this[yl]()}}[lS](e,r){return e===r.length||e===null?this[_v]():(this.buffer.head.value=r.slice(e),r=r.slice(0,e),this[pr]-=e),this.emit("data",r),!this.buffer.length&&!this[ko]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=null),typeof r=="function"&&(n=r,r="utf8"),e&&this.write(e,r),n&&this.once("end",n),this[ko]=!0,this.writable=!1,(this.flowing||!this[wl])&&this[yl](),this}[Cl](){this[rr]||(this[wl]=!1,this[af]=!0,this.emit("resume"),this.buffer.length?this[Ev]():this[ko]?this[yl]():this.emit("drain"))}resume(){return this[Cl]()}pause(){this[af]=!1,this[wl]=!0}get destroyed(){return this[rr]}get flowing(){return this[af]}get paused(){return this[wl]}[dS](e){return this[tr]?this[pr]+=1:this[pr]+=e.length,this.buffer.push(e)}[_v](){return this.buffer.length&&(this[tr]?this[pr]-=1:this[pr]-=this.buffer.head.value.length),this.buffer.shift()}[Ev](e){do;while(this[uS](this[_v]()));!e&&!this.buffer.length&&!this[ko]&&this.emit("drain")}[uS](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,r){if(this[rr])return;let n=this[ii];r=r||{},e===process.stdout||e===process.stderr?r.end=!1:r.end=r.end!==!1;let o={dest:e,opts:r,ondrain:i=>this[Cl]()};return this.pipes.push(o),e.on("drain",o.ondrain),this[Cl](),n&&o.opts.end&&o.dest.end(),e}addListener(e,r){return this.on(e,r)}on(e,r){try{return super.on(e,r)}finally{e==="data"&&!this.pipes.length&&!this.flowing?this[Cl]():pS(e)&&this[ii]&&(super.emit(e),this.removeAllListeners(e))}}get emittedEnd(){return this[ii]}[yl](){!this[of]&&!this[ii]&&!this[rr]&&this.buffer.length===0&&this[ko]&&(this[of]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[sf]&&this.emit("close"),this[of]=!1)}emit(e,r){if(e!=="error"&&e!=="close"&&e!==rr&&this[rr])return;if(e==="data"){if(!r)return;this.pipes.length&&this.pipes.forEach(o=>o.dest.write(r)===!1&&this.pause())}else if(e==="end"){if(this[ii]===!0)return;this[ii]=!0,this.readable=!1,this[Io]&&(r=this[Io].end(),r&&(this.pipes.forEach(o=>o.dest.write(r)),super.emit("data",r))),this.pipes.forEach(o=>{o.dest.removeListener("drain",o.ondrain),o.opts.end&&o.dest.end()})}else if(e==="close"&&(this[sf]=!0,!this[ii]&&!this[rr]))return;let n=new Array(arguments.length);if(n[0]=e,n[1]=r,arguments.length>2)for(let o=2;o<arguments.length;o++)n[o]=arguments[o];try{return super.emit.apply(this,n)}finally{pS(e)?this.removeAllListeners(e):this[yl]()}}collect(){let e=[];this[tr]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[tr]||(e.dataLength+=n.length)}),r.then(()=>e)}concat(){return this[tr]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[tr]?Promise.reject(new Error("cannot concat in objectMode")):this[Cr]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(rr,()=>r(new Error("stream destroyed"))),this.on("end",()=>e()),this.on("error",n=>r(n))})}[$3](){return{next:()=>{let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[ko])return Promise.resolve({done:!0});let n=null,o=null,i=l=>{this.removeListener("data",s),this.removeListener("end",a),o(l)},s=l=>{this.removeListener("error",i),this.removeListener("end",a),this.pause(),n({value:l,done:!!this[ko]})},a=()=>{this.removeListener("error",i),this.removeListener("data",s),n({done:!0})},c=()=>i(new Error("stream destroyed"));return new Promise((l,u)=>{o=u,n=l,this.once(rr,c),this.once("error",i),this.once("end",a),this.once("data",s)})}}}[j3](){return{next:()=>{let r=this.read();return{value:r,done:r===null}}}}destroy(e){return this[rr]?(e?this.emit("error",e):this.emit(rr),this):(this[rr]=!0,this.buffer=new vl,this[pr]=0,typeof this.close=="function"&&!this[sf]&&this.close(),e?this.emit("error",e):this.emit(rr),this)}static isStream(e){return!!e&&(e instanceof hS||e instanceof aS||e instanceof q3&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var vS=I((Vue,gS)=>{var H3=require("zlib").constants||{ZLIB_VERNUM:4736};gS.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},H3))});var Rv=I(qr=>{"use strict";var Sv=require("assert"),si=require("buffer").Buffer,yS=require("zlib"),bs=qr.constants=vS(),V3=Ea(),wS=si.concat,Es=Symbol("_superWrite"),bl=class extends Error{constructor(e){super("zlib: "+e.message);this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},W3=Symbol("opts"),El=Symbol("flushFlag"),CS=Symbol("finishFlushFlag"),xv=Symbol("fullFlushFlag"),nt=Symbol("handle"),cf=Symbol("onError"),_a=Symbol("sawError"),Pv=Symbol("level"),kv=Symbol("strategy"),Iv=Symbol("ended"),Wue=Symbol("_defaultFullFlush"),Tv=class extends V3{constructor(e,r){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e);this[_a]=!1,this[Iv]=!1,this[W3]=e,this[El]=e.flush,this[CS]=e.finishFlush;try{this[nt]=new yS[r](e)}catch(n){throw new bl(n)}this[cf]=n=>{this[_a]||(this[_a]=!0,this.close(),this.emit("error",n))},this[nt].on("error",n=>this[cf](new bl(n))),this.once("end",()=>this.close)}close(){this[nt]&&(this[nt].close(),this[nt]=null,this.emit("close"))}reset(){if(!this[_a])return Sv(this[nt],"zlib binding closed"),this[nt].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[xv]),this.write(Object.assign(si.alloc(0),{[El]:e})))}end(e,r,n){return e&&this.write(e,r),this.flush(this[CS]),this[Iv]=!0,super.end(null,null,n)}get ended(){return this[Iv]}write(e,r,n){if(typeof r=="function"&&(n=r,r="utf8"),typeof e=="string"&&(e=si.from(e,r)),this[_a])return;Sv(this[nt],"zlib binding closed");let o=this[nt]._handle,i=o.close;o.close=()=>{};let s=this[nt].close;this[nt].close=()=>{},si.concat=l=>l;let a;try{let l=typeof e[El]=="number"?e[El]:this[El];a=this[nt]._processChunk(e,l),si.concat=wS}catch(l){si.concat=wS,this[cf](new bl(l))}finally{this[nt]&&(this[nt]._handle=o,o.close=i,this[nt].close=s,this[nt].removeAllListeners("error"))}this[nt]&&this[nt].on("error",l=>this[cf](new bl(l)));let c;if(a)if(Array.isArray(a)&&a.length>0){c=this[Es](si.from(a[0]));for(let l=1;l<a.length;l++)c=this[Es](a[l])}else c=this[Es](si.from(a));return n&&n(),c}[Es](e){return super.write(e)}},ai=class extends Tv{constructor(e,r){e=e||{},e.flush=e.flush||bs.Z_NO_FLUSH,e.finishFlush=e.finishFlush||bs.Z_FINISH;super(e,r);this[xv]=bs.Z_FULL_FLUSH,this[Pv]=e.level,this[kv]=e.strategy}params(e,r){if(!this[_a]){if(!this[nt])throw new Error("cannot switch params when binding is closed");if(!this[nt].params)throw new Error("not supported in this implementation");if(this[Pv]!==e||this[kv]!==r){this.flush(bs.Z_SYNC_FLUSH),Sv(this[nt],"zlib binding closed");let n=this[nt].flush;this[nt].flush=(o,i)=>{this.flush(o),i()};try{this[nt].params(e,r)}finally{this[nt].flush=n}this[nt]&&(this[Pv]=e,this[kv]=r)}}}},bS=class extends ai{constructor(e){super(e,"Deflate")}},ES=class extends ai{constructor(e){super(e,"Inflate")}},Av=Symbol("_portable"),_S=class extends ai{constructor(e){super(e,"Gzip");this[Av]=e&&!!e.portable}[Es](e){return this[Av]?(this[Av]=!1,e[9]=255,super[Es](e)):super[Es](e)}},SS=class extends ai{constructor(e){super(e,"Gunzip")}},xS=class extends ai{constructor(e){super(e,"DeflateRaw")}},PS=class extends ai{constructor(e){super(e,"InflateRaw")}},kS=class extends ai{constructor(e){super(e,"Unzip")}},Dv=class extends Tv{constructor(e,r){e=e||{},e.flush=e.flush||bs.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||bs.BROTLI_OPERATION_FINISH;super(e,r);this[xv]=bs.BROTLI_OPERATION_FLUSH}},IS=class extends Dv{constructor(e){super(e,"BrotliCompress")}},TS=class extends Dv{constructor(e){super(e,"BrotliDecompress")}};qr.Deflate=bS;qr.Inflate=ES;qr.Gzip=_S;qr.Gunzip=SS;qr.DeflateRaw=xS;qr.InflateRaw=PS;qr.Unzip=kS;typeof yS.BrotliCompress=="function"?(qr.BrotliCompress=IS,qr.BrotliDecompress=TS):qr.BrotliCompress=qr.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var Sa=I((zue,AS)=>{var G3=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;AS.exports=G3!=="win32"?t=>t:t=>t&&t.replace(/\\/g,"/")});var lf=I((Yue,DS)=>{"use strict";var z3=Ea(),Ov=Sa(),Nv=Symbol("slurp");DS.exports=class extends z3{constructor(e,r,n){super();switch(this.pause(),this.extended=r,this.globalExtended=n,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=Ov(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=Ov(e.linkpath),this.uname=e.uname,this.gname=e.gname,r&&this[Nv](r),n&&this[Nv](n,!0)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");let n=this.remain,o=this.blockRemain;return this.remain=Math.max(0,n-r),this.blockRemain=Math.max(0,o-r),this.ignore?!0:n>=r?super.write(e):super.write(e.slice(0,n))}[Nv](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=n==="path"||n==="linkpath"?Ov(e[n]):e[n])}}});var Lv=I(uf=>{"use strict";uf.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);uf.code=new Map(Array.from(uf.name).map(t=>[t[1],t[0]]))});var LS=I((Que,NS)=>{"use strict";var K3=(t,e)=>{if(Number.isSafeInteger(t))t<0?J3(t,e):Y3(t,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},Y3=(t,e)=>{e[0]=128;for(var r=e.length;r>1;r--)e[r-1]=t&255,t=Math.floor(t/256)},J3=(t,e)=>{e[0]=255;var r=!1;t=t*-1;for(var n=e.length;n>1;n--){var o=t&255;t=Math.floor(t/256),r?e[n-1]=RS(o):o===0?e[n-1]=0:(r=!0,e[n-1]=OS(o))}},Q3=t=>{let e=t[0],r=e===128?Z3(t.slice(1,t.length)):e===255?X3(t):null;if(r===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(r))throw Error("parsed number outside of javascript safe integer range");return r},X3=t=>{for(var e=t.length,r=0,n=!1,o=e-1;o>-1;o--){var i=t[o],s;n?s=RS(i):i===0?s=i:(n=!0,s=OS(i)),s!==0&&(r-=s*Math.pow(256,e-o-1))}return r},Z3=t=>{for(var e=t.length,r=0,n=e-1;n>-1;n--){var o=t[n];o!==0&&(r+=o*Math.pow(256,e-n-1))}return r},RS=t=>(255^t)&255,OS=t=>(255^t)+1&255;NS.exports={encode:K3,parse:Q3}});var Pa=I((Xue,qS)=>{"use strict";var Fv=Lv(),xa=require("path").posix,FS=LS(),Mv=Symbol("slurp"),$r=Symbol("type"),MS=class{constructor(e,r,n,o){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[$r]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,r||0,n,o):e&&this.set(e)}decode(e,r,n,o){if(r||(r=0),!e||!(e.length>=r+512))throw new Error("need 512 bytes for header");if(this.path=_s(e,r,100),this.mode=ci(e,r+100,8),this.uid=ci(e,r+108,8),this.gid=ci(e,r+116,8),this.size=ci(e,r+124,12),this.mtime=qv(e,r+136,12),this.cksum=ci(e,r+148,12),this[Mv](n),this[Mv](o,!0),this[$r]=_s(e,r+156,1),this[$r]===""&&(this[$r]="0"),this[$r]==="0"&&this.path.substr(-1)==="/"&&(this[$r]="5"),this[$r]==="5"&&(this.size=0),this.linkpath=_s(e,r+157,100),e.slice(r+257,r+265).toString()==="ustar\x0000")if(this.uname=_s(e,r+265,32),this.gname=_s(e,r+297,32),this.devmaj=ci(e,r+329,8),this.devmin=ci(e,r+337,8),e[r+475]!==0){let s=_s(e,r+345,155);this.path=s+"/"+this.path}else{let s=_s(e,r+345,130);s&&(this.path=s+"/"+this.path),this.atime=qv(e,r+476,12),this.ctime=qv(e,r+488,12)}let i=8*32;for(let s=r;s<r+148;s++)i+=e[s];for(let s=r+156;s<r+512;s++)i+=e[s];this.cksumValid=i===this.cksum,this.cksum===null&&i===8*32&&(this.nullBlock=!0)}[Mv](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=e[n])}encode(e,r){if(e||(e=this.block=Buffer.alloc(512),r=0),r||(r=0),!(e.length>=r+512))throw new Error("need 512 bytes for header");let n=this.ctime||this.atime?130:155,o=eW(this.path||"",n),i=o[0],s=o[1];this.needPax=o[2],this.needPax=Ss(e,r,100,i)||this.needPax,this.needPax=li(e,r+100,8,this.mode)||this.needPax,this.needPax=li(e,r+108,8,this.uid)||this.needPax,this.needPax=li(e,r+116,8,this.gid)||this.needPax,this.needPax=li(e,r+124,12,this.size)||this.needPax,this.needPax=$v(e,r+136,12,this.mtime)||this.needPax,e[r+156]=this[$r].charCodeAt(0),this.needPax=Ss(e,r+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",r+257,8),this.needPax=Ss(e,r+265,32,this.uname)||this.needPax,this.needPax=Ss(e,r+297,32,this.gname)||this.needPax,this.needPax=li(e,r+329,8,this.devmaj)||this.needPax,this.needPax=li(e,r+337,8,this.devmin)||this.needPax,this.needPax=Ss(e,r+345,n,s)||this.needPax,e[r+475]!==0?this.needPax=Ss(e,r+345,155,s)||this.needPax:(this.needPax=Ss(e,r+345,130,s)||this.needPax,this.needPax=$v(e,r+476,12,this.atime)||this.needPax,this.needPax=$v(e,r+488,12,this.ctime)||this.needPax);let a=8*32;for(let c=r;c<r+148;c++)a+=e[c];for(let c=r+156;c<r+512;c++)a+=e[c];return this.cksum=a,li(e,r+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let r in e)e[r]!==null&&e[r]!==void 0&&(this[r]=e[r])}get type(){return Fv.name.get(this[$r])||this[$r]}get typeKey(){return this[$r]}set type(e){Fv.code.has(e)?this[$r]=Fv.code.get(e):this[$r]=e}},eW=(t,e)=>{let r=100,n=t,o="",i,s=xa.parse(t).root||".";if(Buffer.byteLength(n)<r)i=[n,o,!1];else{o=xa.dirname(n),n=xa.basename(n);do Buffer.byteLength(n)<=r&&Buffer.byteLength(o)<=e?i=[n,o,!1]:Buffer.byteLength(n)>r&&Buffer.byteLength(o)<=e?i=[n.substr(0,r-1),o,!0]:(n=xa.join(xa.basename(o),n),o=xa.dirname(o));while(o!==s&&!i);i||(i=[t.substr(0,r-1),"",!0])}return i},_s=(t,e,r)=>t.slice(e,e+r).toString("utf8").replace(/\0.*/,""),qv=(t,e,r)=>tW(ci(t,e,r)),tW=t=>t===null?null:new Date(t*1e3),ci=(t,e,r)=>t[e]&128?FS.parse(t.slice(e,e+r)):nW(t,e,r),rW=t=>isNaN(t)?null:t,nW=(t,e,r)=>rW(parseInt(t.slice(e,e+r).toString("utf8").replace(/\0.*$/,"").trim(),8)),oW={12:8589934591,8:2097151},li=(t,e,r,n)=>n===null?!1:n>oW[r]||n<0?(FS.encode(n,t.slice(e,e+r)),!0):(iW(t,e,r,n),!1),iW=(t,e,r,n)=>t.write(sW(n,r),e,r,"ascii"),sW=(t,e)=>aW(Math.floor(t).toString(8),e),aW=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0",$v=(t,e,r,n)=>n===null?!1:li(t,e,r,n.getTime()/1e3),cW=new Array(156).join("\0"),Ss=(t,e,r,n)=>n===null?!1:(t.write(n+cW,e,r,"utf8"),n.length!==Buffer.byteLength(n)||n.length>r);qS.exports=MS});var ff=I((Zue,$S)=>{"use strict";var lW=Pa(),uW=require("path"),df=class{constructor(e,r){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=r||!1}encode(){let e=this.encodeBody();if(e==="")return null;let r=Buffer.byteLength(e),n=512*Math.ceil(1+r/512),o=Buffer.allocUnsafe(n);for(let i=0;i<512;i++)o[i]=0;new lW({path:("PaxHeader/"+uW.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:r,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(o),o.write(e,512,r,"utf8");for(let i=r+512;i<o.length;i++)o[i]=0;return o}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let r=this[e]instanceof Date?this[e].getTime()/1e3:this[e],n=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+r+`
`,o=Buffer.byteLength(n),i=Math.floor(Math.log(o)/Math.log(10))+1;return o+i>=Math.pow(10,i)&&(i+=1),i+o+n}};df.parse=(t,e,r)=>new df(dW(fW(t),e),r);var dW=(t,e)=>e?Object.keys(t).reduce((r,n)=>(r[n]=t[n],r),e):t,fW=t=>t.replace(/\n$/,"").split(`
`).reduce(pW,Object.create(null)),pW=(t,e)=>{let r=parseInt(e,10);if(r!==Buffer.byteLength(e)+1)return t;e=e.substr((r+" ").length);let n=e.split("="),o=n.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!o)return t;let i=n.join("=");return t[o]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(o)?new Date(i*1e3):/^[0-9]+$/.test(i)?+i:i,t};$S.exports=df});var ka=I((ede,jS)=>{jS.exports=t=>{let e=t.length-1,r=-1;for(;e>-1&&t.charAt(e)==="/";)r=e,e--;return r===-1?t:t.slice(0,r)}});var pf=I((tde,US)=>{"use strict";US.exports=t=>class extends t{warn(e,r,n={}){this.file&&(n.file=this.file),this.cwd&&(n.cwd=this.cwd),n.code=r instanceof Error&&r.code||e,n.tarCode=e,!this.strict&&n.recoverable!==!1?(r instanceof Error&&(n=Object.assign(r,n),r=r.message),this.emit("warn",n.tarCode,r,n)):r instanceof Error?this.emit("error",Object.assign(r,n)):this.emit("error",Object.assign(new Error(`${e}: ${r}`),n))}}});var Uv=I((rde,BS)=>{"use strict";var hf=["|","<",">","?",":"],jv=hf.map(t=>String.fromCharCode(61440+t.charCodeAt(0))),hW=new Map(hf.map((t,e)=>[t,jv[e]])),mW=new Map(jv.map((t,e)=>[t,hf[e]]));BS.exports={encode:t=>hf.reduce((e,r)=>e.split(r).join(hW.get(r)),t),decode:t=>jv.reduce((e,r)=>e.split(r).join(mW.get(r)),t)}});var Bv=I((nde,VS)=>{var{isAbsolute:gW,parse:HS}=require("path").win32;VS.exports=t=>{let e="",r=HS(t);for(;gW(t)||r.root;){let n=t.charAt(0)==="/"&&t.slice(0,4)!=="//?/"?"/":r.root;t=t.substr(n.length),e+=n,r=HS(t)}return[e,t]}});var GS=I((ode,WS)=>{"use strict";WS.exports=(t,e,r)=>(t&=4095,r&&(t=(t|384)&~18),e&&(t&256&&(t|=64),t&32&&(t|=8),t&4&&(t|=1)),t)});var Qv=I((ade,ax)=>{"use strict";var zS=Ea(),KS=ff(),YS=Pa(),Jn=require("fs"),JS=require("path"),Qn=Sa(),vW=ka(),QS=(t,e)=>e?(t=Qn(t).replace(/^\.(\/|$)/,""),vW(e)+"/"+t):Qn(t),yW=16*1024*1024,XS=Symbol("process"),ZS=Symbol("file"),ex=Symbol("directory"),Hv=Symbol("symlink"),tx=Symbol("hardlink"),_l=Symbol("header"),mf=Symbol("read"),Vv=Symbol("lstat"),gf=Symbol("onlstat"),Wv=Symbol("onread"),Gv=Symbol("onreadlink"),zv=Symbol("openfile"),Kv=Symbol("onopenfile"),ui=Symbol("close"),vf=Symbol("mode"),Yv=Symbol("awaitDrain"),Jv=Symbol("ondrain"),Xn=Symbol("prefix"),rx=Symbol("hadError"),nx=pf(),wW=Uv(),ox=Bv(),ix=GS(),yf=nx(class extends zS{constructor(e,r){r=r||{};super(r);if(typeof e!="string")throw new TypeError("path is required");this.path=Qn(e),this.portable=!!r.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=r.maxReadSize||yW,this.linkCache=r.linkCache||new Map,this.statCache=r.statCache||new Map,this.preservePaths=!!r.preservePaths,this.cwd=Qn(r.cwd||process.cwd()),this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.mtime=r.mtime||null,this.prefix=r.prefix?Qn(r.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[o,i]=ox(this.path);o&&(this.path=i,n=o)}this.win32=!!r.win32||process.platform==="win32",this.win32&&(this.path=wW.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=Qn(r.absolute||JS.resolve(this.cwd,e)),this.path===""&&(this.path="./"),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.statCache.has(this.absolute)?this[gf](this.statCache.get(this.absolute)):this[Vv]()}emit(e,...r){return e==="error"&&(this[rx]=!0),super.emit(e,...r)}[Vv](){Jn.lstat(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[gf](r)})}[gf](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=bW(e),this.emit("stat",e),this[XS]()}[XS](){switch(this.type){case"File":return this[ZS]();case"Directory":return this[ex]();case"SymbolicLink":return this[Hv]();default:return this.end()}}[vf](e){return ix(e,this.type==="Directory",this.portable)}[Xn](e){return QS(e,this.prefix)}[_l](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new YS({path:this[Xn](this.path),linkpath:this.type==="Link"?this[Xn](this.linkpath):this.linkpath,mode:this[vf](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new KS({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[Xn](this.path),linkpath:this.type==="Link"?this[Xn](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[ex](){this.path.substr(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[_l](),this.end()}[Hv](){Jn.readlink(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[Gv](r)})}[Gv](e){this.linkpath=Qn(e),this[_l](),this.end()}[tx](e){this.type="Link",this.linkpath=Qn(JS.relative(this.cwd,e)),this.stat.size=0,this[_l](),this.end()}[ZS](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let r=this.linkCache.get(e);if(r.indexOf(this.cwd)===0)return this[tx](r)}this.linkCache.set(e,this.absolute)}if(this[_l](),this.stat.size===0)return this.end();this[zv]()}[zv](){Jn.open(this.absolute,"r",(e,r)=>{if(e)return this.emit("error",e);this[Kv](r)})}[Kv](e){if(this.fd=e,this[rx])return this[ui]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let r=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(r),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[mf]()}[mf](){let{fd:e,buf:r,offset:n,length:o,pos:i}=this;Jn.read(e,r,n,o,i,(s,a)=>{if(s)return this[ui](()=>this.emit("error",s));this[Wv](a)})}[ui](e){Jn.close(this.fd,e)}[Wv](e){if(e<=0&&this.remain>0){let o=new Error("encountered unexpected EOF");return o.path=this.absolute,o.syscall="read",o.code="EOF",this[ui](()=>this.emit("error",o))}if(e>this.remain){let o=new Error("did not encounter expected EOF");return o.path=this.absolute,o.syscall="read",o.code="EOF",this[ui](()=>this.emit("error",o))}if(e===this.remain)for(let o=e;o<this.length&&e<this.blockRemain;o++)this.buf[o+this.offset]=0,e++,this.remain++;let r=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(r)?this[Jv]():this[Yv](()=>this[Jv]())}[Yv](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let r=new Error("writing more data than expected");return r.path=this.absolute,this.emit("error",r)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[Jv](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[ui](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[mf]()}}),sx=class extends yf{[Vv](){this[gf](Jn.lstatSync(this.absolute))}[Hv](){this[Gv](Jn.readlinkSync(this.absolute))}[zv](){this[Kv](Jn.openSync(this.absolute,"r"))}[mf](){let e=!0;try{let{fd:r,buf:n,offset:o,length:i,pos:s}=this,a=Jn.readSync(r,n,o,i,s);this[Wv](a),e=!1}finally{if(e)try{this[ui](()=>{})}catch{}}}[Yv](e){e()}[ui](e){Jn.closeSync(this.fd),e()}},CW=nx(class extends zS{constructor(e,r){r=r||{};super(r);this.preservePaths=!!r.preservePaths,this.portable=!!r.portable,this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=r.prefix||null,this.path=Qn(e.path),this.mode=this[vf](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:r.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=Qn(e.linkpath),typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[o,i]=ox(this.path);o&&(this.path=i,n=o)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new YS({path:this[Xn](this.path),linkpath:this.type==="Link"?this[Xn](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.header.encode()&&!this.noPax&&super.write(new KS({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[Xn](this.path),linkpath:this.type==="Link"?this[Xn](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[Xn](e){return QS(e,this.prefix)}[vf](e){return ix(e,this.type==="Directory",this.portable)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=r,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});yf.Sync=sx;yf.Tar=CW;var bW=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";ax.exports=yf});var Pf=I((lde,mx)=>{"use strict";var Xv=class{constructor(e,r){this.path=e||"./",this.absolute=r,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},EW=Ea(),_W=Rv(),SW=lf(),Zv=Qv(),xW=Zv.Sync,PW=Zv.Tar,kW=gl(),cx=Buffer.alloc(1024),wf=Symbol("onStat"),Cf=Symbol("ended"),Zn=Symbol("queue"),Ia=Symbol("current"),xs=Symbol("process"),bf=Symbol("processing"),lx=Symbol("processJob"),eo=Symbol("jobs"),ey=Symbol("jobDone"),Ef=Symbol("addFSEntry"),ux=Symbol("addTarEntry"),ty=Symbol("stat"),ry=Symbol("readdir"),_f=Symbol("onreaddir"),Sf=Symbol("pipe"),dx=Symbol("entry"),ny=Symbol("entryOpt"),oy=Symbol("writeEntryClass"),fx=Symbol("write"),iy=Symbol("ondrain"),xf=require("fs"),px=require("path"),IW=pf(),sy=Sa(),ay=IW(class extends EW{constructor(e){super(e);e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=sy(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[oy]=Zv,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip?(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new _W.Gzip(e.gzip),this.zip.on("data",r=>super.write(r)),this.zip.on("end",r=>super.end()),this.zip.on("drain",r=>this[iy]()),this.on("resume",r=>this.zip.resume())):this.on("drain",this[iy]),this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:r=>!0,this[Zn]=new kW,this[eo]=0,this.jobs=+e.jobs||4,this[bf]=!1,this[Cf]=!1}[fx](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[Cf]=!0,this[xs](),this}write(e){if(this[Cf])throw new Error("write after end");return e instanceof SW?this[ux](e):this[Ef](e),this.flowing}[ux](e){let r=sy(px.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let n=new Xv(e.path,r,!1);n.entry=new PW(e,this[ny](n)),n.entry.on("end",o=>this[ey](n)),this[eo]+=1,this[Zn].push(n)}this[xs]()}[Ef](e){let r=sy(px.resolve(this.cwd,e));this[Zn].push(new Xv(e,r)),this[xs]()}[ty](e){e.pending=!0,this[eo]+=1;let r=this.follow?"stat":"lstat";xf[r](e.absolute,(n,o)=>{e.pending=!1,this[eo]-=1,n?this.emit("error",n):this[wf](e,o)})}[wf](e,r){this.statCache.set(e.absolute,r),e.stat=r,this.filter(e.path,r)||(e.ignore=!0),this[xs]()}[ry](e){e.pending=!0,this[eo]+=1,xf.readdir(e.absolute,(r,n)=>{if(e.pending=!1,this[eo]-=1,r)return this.emit("error",r);this[_f](e,n)})}[_f](e,r){this.readdirCache.set(e.absolute,r),e.readdir=r,this[xs]()}[xs](){if(!this[bf]){this[bf]=!0;for(let e=this[Zn].head;e!==null&&this[eo]<this.jobs;e=e.next)if(this[lx](e.value),e.value.ignore){let r=e.next;this[Zn].removeNode(e),e.next=r}this[bf]=!1,this[Cf]&&!this[Zn].length&&this[eo]===0&&(this.zip?this.zip.end(cx):(super.write(cx),super.end()))}}get[Ia](){return this[Zn]&&this[Zn].head&&this[Zn].head.value}[ey](e){this[Zn].shift(),this[eo]-=1,this[xs]()}[lx](e){if(!e.pending){if(e.entry){e===this[Ia]&&!e.piped&&this[Sf](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[wf](e,this.statCache.get(e.absolute)):this[ty](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[_f](e,this.readdirCache.get(e.absolute)):this[ry](e),!e.readdir))){if(e.entry=this[dx](e),!e.entry){e.ignore=!0;return}e===this[Ia]&&!e.piped&&this[Sf](e)}}}[ny](e){return{onwarn:(r,n,o)=>this.warn(r,n,o),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[dx](e){this[eo]+=1;try{return new this[oy](e.path,this[ny](e)).on("end",()=>this[ey](e)).on("error",r=>this.emit("error",r))}catch(r){this.emit("error",r)}}[iy](){this[Ia]&&this[Ia].entry&&this[Ia].entry.resume()}[Sf](e){e.piped=!0,e.readdir&&e.readdir.forEach(o=>{let i=e.path,s=i==="./"?"":i.replace(/\/*$/,"/");this[Ef](s+o)});let r=e.entry,n=this.zip;n?r.on("data",o=>{n.write(o)||r.pause()}):r.on("data",o=>{super.write(o)||r.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),hx=class extends ay{constructor(e){super(e);this[oy]=xW}pause(){}resume(){}[ty](e){let r=this.follow?"statSync":"lstatSync";this[wf](e,xf[r](e.absolute))}[ry](e,r){this[_f](e,xf.readdirSync(e.absolute))}[Sf](e){let r=e.entry,n=this.zip;e.readdir&&e.readdir.forEach(o=>{let i=e.path,s=i==="./"?"":i.replace(/\/*$/,"/");this[Ef](s+o)}),n?r.on("data",o=>{n.write(o)}):r.on("data",o=>{super[fx](o)})}};ay.Sync=hx;mx.exports=ay});var Fa=I(xl=>{"use strict";var TW=Ea(),AW=require("events").EventEmitter,br=require("fs"),cy=br.writev;if(!cy){let t=process.binding("fs"),e=t.FSReqWrap||t.FSReqCallback;cy=(r,n,o,i)=>{let s=(c,l)=>i(c,l,n),a=new e;a.oncomplete=s,t.writeBuffers(r,n,o,a)}}var Ta=Symbol("_autoClose"),In=Symbol("_close"),Sl=Symbol("_ended"),Ze=Symbol("_fd"),gx=Symbol("_finished"),di=Symbol("_flags"),ly=Symbol("_flush"),uy=Symbol("_handleChunk"),dy=Symbol("_makeBuf"),kf=Symbol("_mode"),If=Symbol("_needDrain"),Aa=Symbol("_onerror"),Da=Symbol("_onopen"),fy=Symbol("_onread"),Ra=Symbol("_onwrite"),fi=Symbol("_open"),To=Symbol("_path"),Ps=Symbol("_pos"),to=Symbol("_queue"),Oa=Symbol("_read"),vx=Symbol("_readSize"),pi=Symbol("_reading"),Tf=Symbol("_remain"),yx=Symbol("_size"),Af=Symbol("_write"),Na=Symbol("_writing"),Df=Symbol("_defaultFlag"),La=Symbol("_errored"),py=class extends TW{constructor(e,r){r=r||{};super(r);if(this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[La]=!1,this[Ze]=typeof r.fd=="number"?r.fd:null,this[To]=e,this[vx]=r.readSize||16*1024*1024,this[pi]=!1,this[yx]=typeof r.size=="number"?r.size:1/0,this[Tf]=this[yx],this[Ta]=typeof r.autoClose=="boolean"?r.autoClose:!0,typeof this[Ze]=="number"?this[Oa]():this[fi]()}get fd(){return this[Ze]}get path(){return this[To]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[fi](){br.open(this[To],"r",(e,r)=>this[Da](e,r))}[Da](e,r){e?this[Aa](e):(this[Ze]=r,this.emit("open",r),this[Oa]())}[dy](){return Buffer.allocUnsafe(Math.min(this[vx],this[Tf]))}[Oa](){if(!this[pi]){this[pi]=!0;let e=this[dy]();if(e.length===0)return process.nextTick(()=>this[fy](null,0,e));br.read(this[Ze],e,0,e.length,null,(r,n,o)=>this[fy](r,n,o))}}[fy](e,r,n){this[pi]=!1,e?this[Aa](e):this[uy](r,n)&&this[Oa]()}[In](){if(this[Ta]&&typeof this[Ze]=="number"){let e=this[Ze];this[Ze]=null,br.close(e,r=>r?this.emit("error",r):this.emit("close"))}}[Aa](e){this[pi]=!0,this[In](),this.emit("error",e)}[uy](e,r){let n=!1;return this[Tf]-=e,e>0&&(n=super.write(e<r.length?r.slice(0,e):r)),(e===0||this[Tf]<=0)&&(n=!1,this[In](),super.end()),n}emit(e,r){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[Ze]=="number"&&this[Oa]();break;case"error":return this[La]?void 0:(this[La]=!0,super.emit(e,r));default:return super.emit(e,r)}}},wx=class extends py{[fi](){let e=!0;try{this[Da](null,br.openSync(this[To],"r")),e=!1}finally{e&&this[In]()}}[Oa](){let e=!0;try{if(!this[pi]){this[pi]=!0;do{let r=this[dy](),n=r.length===0?0:br.readSync(this[Ze],r,0,r.length,null);if(!this[uy](n,r))break}while(!0);this[pi]=!1}e=!1}finally{e&&this[In]()}}[In](){if(this[Ta]&&typeof this[Ze]=="number"){let e=this[Ze];this[Ze]=null,br.closeSync(e),this.emit("close")}}},hy=class extends AW{constructor(e,r){r=r||{};super(r);this.readable=!1,this.writable=!0,this[La]=!1,this[Na]=!1,this[Sl]=!1,this[If]=!1,this[to]=[],this[To]=e,this[Ze]=typeof r.fd=="number"?r.fd:null,this[kf]=r.mode===void 0?438:r.mode,this[Ps]=typeof r.start=="number"?r.start:null,this[Ta]=typeof r.autoClose=="boolean"?r.autoClose:!0;let n=this[Ps]!==null?"r+":"w";this[Df]=r.flags===void 0,this[di]=this[Df]?n:r.flags,this[Ze]===null&&this[fi]()}emit(e,r){if(e==="error"){if(this[La])return;this[La]=!0}return super.emit(e,r)}get fd(){return this[Ze]}get path(){return this[To]}[Aa](e){this[In](),this[Na]=!0,this.emit("error",e)}[fi](){br.open(this[To],this[di],this[kf],(e,r)=>this[Da](e,r))}[Da](e,r){this[Df]&&this[di]==="r+"&&e&&e.code==="ENOENT"?(this[di]="w",this[fi]()):e?this[Aa](e):(this[Ze]=r,this.emit("open",r),this[ly]())}end(e,r){return e&&this.write(e,r),this[Sl]=!0,!this[Na]&&!this[to].length&&typeof this[Ze]=="number"&&this[Ra](null,0),this}write(e,r){return typeof e=="string"&&(e=Buffer.from(e,r)),this[Sl]?(this.emit("error",new Error("write() after end()")),!1):this[Ze]===null||this[Na]||this[to].length?(this[to].push(e),this[If]=!0,!1):(this[Na]=!0,this[Af](e),!0)}[Af](e){br.write(this[Ze],e,0,e.length,this[Ps],(r,n)=>this[Ra](r,n))}[Ra](e,r){e?this[Aa](e):(this[Ps]!==null&&(this[Ps]+=r),this[to].length?this[ly]():(this[Na]=!1,this[Sl]&&!this[gx]?(this[gx]=!0,this[In](),this.emit("finish")):this[If]&&(this[If]=!1,this.emit("drain"))))}[ly](){if(this[to].length===0)this[Sl]&&this[Ra](null,0);else if(this[to].length===1)this[Af](this[to].pop());else{let e=this[to];this[to]=[],cy(this[Ze],e,this[Ps],(r,n)=>this[Ra](r,n))}}[In](){if(this[Ta]&&typeof this[Ze]=="number"){let e=this[Ze];this[Ze]=null,br.close(e,r=>r?this.emit("error",r):this.emit("close"))}}},Cx=class extends hy{[fi](){let e;if(this[Df]&&this[di]==="r+")try{e=br.openSync(this[To],this[di],this[kf])}catch(r){if(r.code==="ENOENT")return this[di]="w",this[fi]();throw r}else e=br.openSync(this[To],this[di],this[kf]);this[Da](null,e)}[In](){if(this[Ta]&&typeof this[Ze]=="number"){let e=this[Ze];this[Ze]=null,br.closeSync(e),this.emit("close")}}[Af](e){let r=!0;try{this[Ra](null,br.writeSync(this[Ze],e,0,e.length,this[Ps])),r=!1}finally{if(r)try{this[In]()}catch{}}}};xl.ReadStream=py;xl.ReadStreamSync=wx;xl.WriteStream=hy;xl.WriteStreamSync=Cx});var qf=I((fde,kx)=>{"use strict";var DW=pf(),RW=Pa(),OW=require("events"),NW=gl(),LW=1024*1024,FW=lf(),bx=ff(),MW=Rv(),my=Buffer.from([31,139]),tn=Symbol("state"),ks=Symbol("writeEntry"),Ao=Symbol("readEntry"),gy=Symbol("nextEntry"),Ex=Symbol("processEntry"),rn=Symbol("extendedHeader"),Pl=Symbol("globalExtendedHeader"),hi=Symbol("meta"),_x=Symbol("emitMeta"),it=Symbol("buffer"),Do=Symbol("queue"),Is=Symbol("ended"),Sx=Symbol("emittedEnd"),Ts=Symbol("emit"),Er=Symbol("unzip"),Rf=Symbol("consumeChunk"),Of=Symbol("consumeChunkSub"),vy=Symbol("consumeBody"),xx=Symbol("consumeMeta"),Px=Symbol("consumeHeader"),Nf=Symbol("consuming"),yy=Symbol("bufferConcat"),wy=Symbol("maybeEnd"),kl=Symbol("writing"),mi=Symbol("aborted"),Lf=Symbol("onDone"),As=Symbol("sawValidEntry"),Ff=Symbol("sawNullBlock"),Mf=Symbol("sawEOF"),qW=t=>!0;kx.exports=DW(class extends OW{constructor(e){e=e||{};super(e);this.file=e.file||"",this[As]=null,this.on(Lf,r=>{(this[tn]==="begin"||this[As]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(Lf,e.ondone):this.on(Lf,r=>{this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||LW,this.filter=typeof e.filter=="function"?e.filter:qW,this.writable=!0,this.readable=!1,this[Do]=new NW,this[it]=null,this[Ao]=null,this[ks]=null,this[tn]="begin",this[hi]="",this[rn]=null,this[Pl]=null,this[Is]=!1,this[Er]=null,this[mi]=!1,this[Ff]=!1,this[Mf]=!1,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[Px](e,r){this[As]===null&&(this[As]=!1);let n;try{n=new RW(e,r,this[rn],this[Pl])}catch(o){return this.warn("TAR_ENTRY_INVALID",o)}if(n.nullBlock)this[Ff]?(this[Mf]=!0,this[tn]==="begin"&&(this[tn]="header"),this[Ts]("eof")):(this[Ff]=!0,this[Ts]("nullBlock"));else if(this[Ff]=!1,!n.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:n});else if(!n.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:n});else{let o=n.type;if(/^(Symbolic)?Link$/.test(o)&&!n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:n});else if(!/^(Symbolic)?Link$/.test(o)&&n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:n});else{let i=this[ks]=new FW(n,this[rn],this[Pl]);if(!this[As])if(i.remain){let s=()=>{i.invalid||(this[As]=!0)};i.on("end",s)}else this[As]=!0;i.meta?i.size>this.maxMetaEntrySize?(i.ignore=!0,this[Ts]("ignoredEntry",i),this[tn]="ignore",i.resume()):i.size>0&&(this[hi]="",i.on("data",s=>this[hi]+=s),this[tn]="meta"):(this[rn]=null,i.ignore=i.ignore||!this.filter(i.path,i),i.ignore?(this[Ts]("ignoredEntry",i),this[tn]=i.remain?"ignore":"header",i.resume()):(i.remain?this[tn]="body":(this[tn]="header",i.end()),this[Ao]?this[Do].push(i):(this[Do].push(i),this[gy]())))}}}[Ex](e){let r=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[Ao]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",n=>this[gy]()),r=!1)):(this[Ao]=null,r=!1),r}[gy](){do;while(this[Ex](this[Do].shift()));if(!this[Do].length){let e=this[Ao];!e||e.flowing||e.size===e.remain?this[kl]||this.emit("drain"):e.once("drain",n=>this.emit("drain"))}}[vy](e,r){let n=this[ks],o=n.blockRemain,i=o>=e.length&&r===0?e:e.slice(r,r+o);return n.write(i),n.blockRemain||(this[tn]="header",this[ks]=null,n.end()),i.length}[xx](e,r){let n=this[ks],o=this[vy](e,r);return this[ks]||this[_x](n),o}[Ts](e,r,n){!this[Do].length&&!this[Ao]?this.emit(e,r,n):this[Do].push([e,r,n])}[_x](e){switch(this[Ts]("meta",this[hi]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[rn]=bx.parse(this[hi],this[rn],!1);break;case"GlobalExtendedHeader":this[Pl]=bx.parse(this[hi],this[Pl],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[rn]=this[rn]||Object.create(null),this[rn].path=this[hi].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[rn]=this[rn]||Object.create(null),this[rn].linkpath=this[hi].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[mi]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[mi])return;if(this[Er]===null&&e){if(this[it]&&(e=Buffer.concat([this[it],e]),this[it]=null),e.length<my.length)return this[it]=e,!0;for(let n=0;this[Er]===null&&n<my.length;n++)e[n]!==my[n]&&(this[Er]=!1);if(this[Er]===null){let n=this[Is];this[Is]=!1,this[Er]=new MW.Unzip,this[Er].on("data",i=>this[Rf](i)),this[Er].on("error",i=>this.abort(i)),this[Er].on("end",i=>{this[Is]=!0,this[Rf]()}),this[kl]=!0;let o=this[Er][n?"end":"write"](e);return this[kl]=!1,o}}this[kl]=!0,this[Er]?this[Er].write(e):this[Rf](e),this[kl]=!1;let r=this[Do].length?!1:this[Ao]?this[Ao].flowing:!0;return!r&&!this[Do].length&&this[Ao].once("drain",n=>this.emit("drain")),r}[yy](e){e&&!this[mi]&&(this[it]=this[it]?Buffer.concat([this[it],e]):e)}[wy](){if(this[Is]&&!this[Sx]&&!this[mi]&&!this[Nf]){this[Sx]=!0;let e=this[ks];if(e&&e.blockRemain){let r=this[it]?this[it].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${r} available)`,{entry:e}),this[it]&&e.write(this[it]),e.end()}this[Ts](Lf)}}[Rf](e){if(this[Nf])this[yy](e);else if(!e&&!this[it])this[wy]();else{if(this[Nf]=!0,this[it]){this[yy](e);let r=this[it];this[it]=null,this[Of](r)}else this[Of](e);for(;this[it]&&this[it].length>=512&&!this[mi]&&!this[Mf];){let r=this[it];this[it]=null,this[Of](r)}this[Nf]=!1}(!this[it]||this[Is])&&this[wy]()}[Of](e){let r=0,n=e.length;for(;r+512<=n&&!this[mi]&&!this[Mf];)switch(this[tn]){case"begin":case"header":this[Px](e,r),r+=512;break;case"ignore":case"body":r+=this[vy](e,r);break;case"meta":r+=this[xx](e,r);break;default:throw new Error("invalid state: "+this[tn])}r<n&&(this[it]?this[it]=Buffer.concat([e.slice(r),this[it]]):this[it]=e.slice(r))}end(e){this[mi]||(this[Er]?this[Er].end(e):(this[Is]=!0,this.write(e)))}})});var $f=I((pde,Dx)=>{"use strict";var $W=ba(),Ix=qf(),Ma=require("fs"),jW=Fa(),Tx=require("path"),Cy=ka();Dx.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=$W(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&BW(n,e),n.noResume||UW(n),n.file&&n.sync?HW(n):n.file?VW(n,r):Ax(n)};var UW=t=>{let e=t.onentry;t.onentry=e?r=>{e(r),r.resume()}:r=>r.resume()},BW=(t,e)=>{let r=new Map(e.map(i=>[Cy(i),!0])),n=t.filter,o=(i,s)=>{let a=s||Tx.parse(i).root||".",c=i===a?!1:r.has(i)?r.get(i):o(Tx.dirname(i),a);return r.set(i,c),c};t.filter=n?(i,s)=>n(i,s)&&o(Cy(i)):i=>o(Cy(i))},HW=t=>{let e=Ax(t),r=t.file,n=!0,o;try{let i=Ma.statSync(r),s=t.maxReadSize||16*1024*1024;if(i.size<s)e.end(Ma.readFileSync(r));else{let a=0,c=Buffer.allocUnsafe(s);for(o=Ma.openSync(r,"r");a<i.size;){let l=Ma.readSync(o,c,0,s,a);a+=l,e.write(c.slice(0,l))}e.end()}n=!1}finally{if(n&&o)try{Ma.closeSync(o)}catch{}}},VW=(t,e)=>{let r=new Ix(t),n=t.maxReadSize||16*1024*1024,o=t.file,i=new Promise((s,a)=>{r.on("error",a),r.on("end",s),Ma.stat(o,(c,l)=>{if(c)a(c);else{let u=new jW.ReadStream(o,{readSize:n,size:l.size});u.on("error",a),u.pipe(r)}})});return e?i.then(e,e):i},Ax=t=>new Ix(t)});var Mx=I((hde,Fx)=>{"use strict";var WW=ba(),jf=Pf(),Rx=Fa(),Ox=$f(),Nx=require("path");Fx.exports=(t,e,r)=>{if(typeof e=="function"&&(r=e),Array.isArray(t)&&(e=t,t={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let n=WW(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return n.file&&n.sync?GW(n,e):n.file?zW(n,e,r):n.sync?KW(n,e):YW(n,e)};var GW=(t,e)=>{let r=new jf.Sync(t),n=new Rx.WriteStreamSync(t.file,{mode:t.mode||438});r.pipe(n),Lx(r,e)},zW=(t,e,r)=>{let n=new jf(t),o=new Rx.WriteStream(t.file,{mode:t.mode||438});n.pipe(o);let i=new Promise((s,a)=>{o.on("error",a),o.on("close",s),n.on("error",a)});return by(n,e),r?i.then(r,r):i},Lx=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?Ox({file:Nx.resolve(t.cwd,r.substr(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},by=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return Ox({file:Nx.resolve(t.cwd,r.substr(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>by(t,e));t.add(r)}t.end()},KW=(t,e)=>{let r=new jf.Sync(t);return Lx(r,e),r},YW=(t,e)=>{let r=new jf(t);return by(r,e),r}});var Ey=I((mde,Vx)=>{"use strict";var JW=ba(),qx=Pf(),jr=require("fs"),$x=Fa(),jx=$f(),Ux=require("path"),Bx=Pa();Vx.exports=(t,e,r)=>{let n=JW(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),n.sync?QW(n,e):ZW(n,e,r)};var QW=(t,e)=>{let r=new qx.Sync(t),n=!0,o,i;try{try{o=jr.openSync(t.file,"r+")}catch(c){if(c.code==="ENOENT")o=jr.openSync(t.file,"w+");else throw c}let s=jr.fstatSync(o),a=Buffer.alloc(512);e:for(i=0;i<s.size;i+=512){for(let u=0,d=0;u<512;u+=d){if(d=jr.readSync(o,a,u,a.length-u,i+u),i===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!d)break e}let c=new Bx(a);if(!c.cksumValid)break;let l=512*Math.ceil(c.size/512);if(i+l+512>s.size)break;i+=l,t.mtimeCache&&t.mtimeCache.set(c.path,c.mtime)}n=!1,XW(t,r,i,o,e)}finally{if(n)try{jr.closeSync(o)}catch{}}},XW=(t,e,r,n,o)=>{let i=new $x.WriteStreamSync(t.file,{fd:n,start:r});e.pipe(i),eG(e,o)},ZW=(t,e,r)=>{e=Array.from(e);let n=new qx(t),o=(s,a,c)=>{let l=(h,m)=>{h?jr.close(s,g=>c(h)):c(null,m)},u=0;if(a===0)return l(null,0);let d=0,f=Buffer.alloc(512),p=(h,m)=>{if(h)return l(h);if(d+=m,d<512&&m)return jr.read(s,f,d,f.length-d,u+d,p);if(u===0&&f[0]===31&&f[1]===139)return l(new Error("cannot append to compressed archives"));if(d<512)return l(null,u);let g=new Bx(f);if(!g.cksumValid)return l(null,u);let v=512*Math.ceil(g.size/512);if(u+v+512>a||(u+=v+512,u>=a))return l(null,u);t.mtimeCache&&t.mtimeCache.set(g.path,g.mtime),d=0,jr.read(s,f,0,512,u,p)};jr.read(s,f,0,512,u,p)},i=new Promise((s,a)=>{n.on("error",a);let c="r+",l=(u,d)=>{if(u&&u.code==="ENOENT"&&c==="r+")return c="w+",jr.open(t.file,c,l);if(u)return a(u);jr.fstat(d,(f,p)=>{if(f)return jr.close(d,()=>a(f));o(d,p.size,(h,m)=>{if(h)return a(h);let g=new $x.WriteStream(t.file,{fd:d,start:m});n.pipe(g),g.on("error",a),g.on("close",s),Hx(n,e)})})};jr.open(t.file,c,l)});return r?i.then(r,r):i},eG=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?jx({file:Ux.resolve(t.cwd,r.substr(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},Hx=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return jx({file:Ux.resolve(t.cwd,r.substr(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>Hx(t,e));t.add(r)}t.end()}});var Gx=I((gde,Wx)=>{"use strict";var tG=ba(),rG=Ey();Wx.exports=(t,e,r)=>{let n=tG(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),nG(n),rG(n,e,r)};var nG=t=>{let e=t.filter;t.mtimeCache||(t.mtimeCache=new Map),t.filter=e?(r,n)=>e(r,n)&&!(t.mtimeCache.get(r)>n.mtime):(r,n)=>!(t.mtimeCache.get(r)>n.mtime)}});var Yx=I((vde,Kx)=>{var{promisify:zx}=require("util"),gi=require("fs"),oG=t=>{if(!t)t={mode:511,fs:gi};else if(typeof t=="object")t=V({mode:511,fs:gi},t);else if(typeof t=="number")t={mode:t,fs:gi};else if(typeof t=="string")t={mode:parseInt(t,8),fs:gi};else throw new TypeError("invalid options argument");return t.mkdir=t.mkdir||t.fs.mkdir||gi.mkdir,t.mkdirAsync=zx(t.mkdir),t.stat=t.stat||t.fs.stat||gi.stat,t.statAsync=zx(t.stat),t.statSync=t.statSync||t.fs.statSync||gi.statSync,t.mkdirSync=t.mkdirSync||t.fs.mkdirSync||gi.mkdirSync,t};Kx.exports=oG});var Qx=I((yde,Jx)=>{var iG=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:sG,parse:aG}=require("path"),cG=t=>{if(/\0/.test(t))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:t,code:"ERR_INVALID_ARG_VALUE"});if(t=sG(t),iG==="win32"){let e=/[*|"<>?:]/,{root:r}=aG(t);if(e.test(t.substr(r.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};Jx.exports=cG});var rP=I((wde,tP)=>{var{dirname:Xx}=require("path"),Zx=(t,e,r=void 0)=>r===e?Promise.resolve():t.statAsync(e).then(n=>n.isDirectory()?r:void 0,n=>n.code==="ENOENT"?Zx(t,Xx(e),e):void 0),eP=(t,e,r=void 0)=>{if(r!==e)try{return t.statSync(e).isDirectory()?r:void 0}catch(n){return n.code==="ENOENT"?eP(t,Xx(e),e):void 0}};tP.exports={findMade:Zx,findMadeSync:eP}});var xy=I((Cde,oP)=>{var{dirname:nP}=require("path"),_y=(t,e,r)=>{e.recursive=!1;let n=nP(t);return n===t?e.mkdirAsync(t,e).catch(o=>{if(o.code!=="EISDIR")throw o}):e.mkdirAsync(t,e).then(()=>r||t,o=>{if(o.code==="ENOENT")return _y(n,e).then(i=>_y(t,e,i));if(o.code!=="EEXIST"&&o.code!=="EROFS")throw o;return e.statAsync(t).then(i=>{if(i.isDirectory())return r;throw o},()=>{throw o})})},Sy=(t,e,r)=>{let n=nP(t);if(e.recursive=!1,n===t)try{return e.mkdirSync(t,e)}catch(o){if(o.code!=="EISDIR")throw o;return}try{return e.mkdirSync(t,e),r||t}catch(o){if(o.code==="ENOENT")return Sy(t,e,Sy(n,e,r));if(o.code!=="EEXIST"&&o.code!=="EROFS")throw o;try{if(!e.statSync(t).isDirectory())throw o}catch{throw o}}};oP.exports={mkdirpManual:_y,mkdirpManualSync:Sy}});var aP=I((bde,sP)=>{var{dirname:iP}=require("path"),{findMade:lG,findMadeSync:uG}=rP(),{mkdirpManual:dG,mkdirpManualSync:fG}=xy(),pG=(t,e)=>(e.recursive=!0,iP(t)===t?e.mkdirAsync(t,e):lG(e,t).then(n=>e.mkdirAsync(t,e).then(()=>n).catch(o=>{if(o.code==="ENOENT")return dG(t,e);throw o}))),hG=(t,e)=>{if(e.recursive=!0,iP(t)===t)return e.mkdirSync(t,e);let n=uG(e,t);try{return e.mkdirSync(t,e),n}catch(o){if(o.code==="ENOENT")return fG(t,e);throw o}};sP.exports={mkdirpNative:pG,mkdirpNativeSync:hG}});var dP=I((Ede,uP)=>{var cP=require("fs"),mG=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,Py=mG.replace(/^v/,"").split("."),lP=+Py[0]>10||+Py[0]==10&&+Py[1]>=12,gG=lP?t=>t.mkdir===cP.mkdir:()=>!1,vG=lP?t=>t.mkdirSync===cP.mkdirSync:()=>!1;uP.exports={useNative:gG,useNativeSync:vG}});var vP=I((_de,gP)=>{var qa=Yx(),$a=Qx(),{mkdirpNative:fP,mkdirpNativeSync:pP}=aP(),{mkdirpManual:hP,mkdirpManualSync:mP}=xy(),{useNative:yG,useNativeSync:wG}=dP(),ja=(t,e)=>(t=$a(t),e=qa(e),yG(e)?fP(t,e):hP(t,e)),CG=(t,e)=>(t=$a(t),e=qa(e),wG(e)?pP(t,e):mP(t,e));ja.sync=CG;ja.native=(t,e)=>fP($a(t),qa(e));ja.manual=(t,e)=>hP($a(t),qa(e));ja.nativeSync=(t,e)=>pP($a(t),qa(e));ja.manualSync=(t,e)=>mP($a(t),qa(e));gP.exports=ja});var SP=I((Sde,_P)=>{"use strict";var nn=require("fs"),Ds=require("path"),bG=nn.lchown?"lchown":"chown",EG=nn.lchownSync?"lchownSync":"chownSync",yP=nn.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),wP=(t,e,r)=>{try{return nn[EG](t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},_G=(t,e,r)=>{try{return nn.chownSync(t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},SG=yP?(t,e,r,n)=>o=>{!o||o.code!=="EISDIR"?n(o):nn.chown(t,e,r,n)}:(t,e,r,n)=>n,ky=yP?(t,e,r)=>{try{return wP(t,e,r)}catch(n){if(n.code!=="EISDIR")throw n;_G(t,e,r)}}:(t,e,r)=>wP(t,e,r),xG=process.version,CP=(t,e,r)=>nn.readdir(t,e,r),PG=(t,e)=>nn.readdirSync(t,e);/^v4\./.test(xG)&&(CP=(t,e,r)=>nn.readdir(t,r));var Uf=(t,e,r,n)=>{nn[bG](t,e,r,SG(t,e,r,o=>{n(o&&o.code!=="ENOENT"?o:null)}))},bP=(t,e,r,n,o)=>{if(typeof e=="string")return nn.lstat(Ds.resolve(t,e),(i,s)=>{if(i)return o(i.code!=="ENOENT"?i:null);s.name=e,bP(t,s,r,n,o)});if(e.isDirectory())Iy(Ds.resolve(t,e.name),r,n,i=>{if(i)return o(i);let s=Ds.resolve(t,e.name);Uf(s,r,n,o)});else{let i=Ds.resolve(t,e.name);Uf(i,r,n,o)}},Iy=(t,e,r,n)=>{CP(t,{withFileTypes:!0},(o,i)=>{if(o){if(o.code==="ENOENT")return n();if(o.code!=="ENOTDIR"&&o.code!=="ENOTSUP")return n(o)}if(o||!i.length)return Uf(t,e,r,n);let s=i.length,a=null,c=l=>{if(!a){if(l)return n(a=l);if(--s==0)return Uf(t,e,r,n)}};i.forEach(l=>bP(t,l,e,r,c))})},kG=(t,e,r,n)=>{if(typeof e=="string")try{let o=nn.lstatSync(Ds.resolve(t,e));o.name=e,e=o}catch(o){if(o.code==="ENOENT")return;throw o}e.isDirectory()&&EP(Ds.resolve(t,e.name),r,n),ky(Ds.resolve(t,e.name),r,n)},EP=(t,e,r)=>{let n;try{n=PG(t,{withFileTypes:!0})}catch(o){if(o.code==="ENOENT")return;if(o.code==="ENOTDIR"||o.code==="ENOTSUP")return ky(t,e,r);throw o}return n&&n.length&&n.forEach(o=>kG(t,o,e,r)),ky(t,e,r)};_P.exports=Iy;Iy.sync=EP});var IP=I((xde,Dy)=>{"use strict";var xP=vP(),on=require("fs"),Bf=require("path"),PP=SP(),Tn=Sa(),Ty=class extends Error{constructor(e,r){super("Cannot extract through symbolic link");this.path=r,this.symlink=e}get name(){return"SylinkError"}},Ay=class extends Error{constructor(e,r){super(r+": Cannot cd into '"+e+"'");this.path=e,this.code=r}get name(){return"CwdError"}},Hf=(t,e)=>t.get(Tn(e)),Il=(t,e,r)=>t.set(Tn(e),r),IG=(t,e)=>{on.stat(t,(r,n)=>{(r||!n.isDirectory())&&(r=new Ay(t,r&&r.code||"ENOTDIR")),e(r)})};Dy.exports=(t,e,r)=>{t=Tn(t);let n=e.umask,o=e.mode|448,i=(o&n)!=0,s=e.uid,a=e.gid,c=typeof s=="number"&&typeof a=="number"&&(s!==e.processUid||a!==e.processGid),l=e.preserve,u=e.unlink,d=e.cache,f=Tn(e.cwd),p=(g,v)=>{g?r(g):(Il(d,t,!0),v&&c?PP(v,s,a,y=>p(y)):i?on.chmod(t,o,r):r())};if(d&&Hf(d,t)===!0)return p();if(t===f)return IG(t,p);if(l)return xP(t,{mode:o}).then(g=>p(null,g),p);let m=Tn(Bf.relative(f,t)).split("/");Vf(f,m,o,d,u,f,null,p)};var Vf=(t,e,r,n,o,i,s,a)=>{if(!e.length)return a(null,s);let c=e.shift(),l=Tn(Bf.resolve(t+"/"+c));if(Hf(n,l))return Vf(l,e,r,n,o,i,s,a);on.mkdir(l,r,kP(l,e,r,n,o,i,s,a))},kP=(t,e,r,n,o,i,s,a)=>c=>{c?on.lstat(t,(l,u)=>{if(l)l.path=l.path&&Tn(l.path),a(l);else if(u.isDirectory())Vf(t,e,r,n,o,i,s,a);else if(o)on.unlink(t,d=>{if(d)return a(d);on.mkdir(t,r,kP(t,e,r,n,o,i,s,a))});else{if(u.isSymbolicLink())return a(new Ty(t,t+"/"+e.join("/")));a(c)}}):(s=s||t,Vf(t,e,r,n,o,i,s,a))},TG=t=>{let e=!1,r="ENOTDIR";try{e=on.statSync(t).isDirectory()}catch(n){r=n.code}finally{if(!e)throw new Ay(t,r)}};Dy.exports.sync=(t,e)=>{t=Tn(t);let r=e.umask,n=e.mode|448,o=(n&r)!=0,i=e.uid,s=e.gid,a=typeof i=="number"&&typeof s=="number"&&(i!==e.processUid||s!==e.processGid),c=e.preserve,l=e.unlink,u=e.cache,d=Tn(e.cwd),f=g=>{Il(u,t,!0),g&&a&&PP.sync(g,i,s),o&&on.chmodSync(t,n)};if(u&&Hf(u,t)===!0)return f();if(t===d)return TG(d),f();if(c)return f(xP.sync(t,n));let h=Tn(Bf.relative(d,t)).split("/"),m=null;for(let g=h.shift(),v=d;g&&(v+="/"+g);g=h.shift())if(v=Tn(Bf.resolve(v)),!Hf(u,v))try{on.mkdirSync(v,n),m=m||v,Il(u,v,!0)}catch{let b=on.lstatSync(v);if(b.isDirectory()){Il(u,v,!0);continue}else if(l){on.unlinkSync(v),on.mkdirSync(v,n),m=m||v,Il(u,v,!0);continue}else if(b.isSymbolicLink())return new Ty(v,v+"/"+h.join("/"))}return f(m)}});var Oy=I((Pde,TP)=>{var Ry=Object.create(null),{hasOwnProperty:AG}=Object.prototype;TP.exports=t=>(AG.call(Ry,t)||(Ry[t]=t.normalize("NFKD")),Ry[t])});var OP=I((kde,RP)=>{var AP=require("assert"),DG=Oy(),RG=ka(),{join:DP}=require("path"),OG=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,NG=OG==="win32";RP.exports=()=>{let t=new Map,e=new Map,r=l=>l.split("/").slice(0,-1).reduce((d,f)=>(d.length&&(f=DP(d[d.length-1],f)),d.push(f||"/"),d),[]),n=new Set,o=l=>{let u=e.get(l);if(!u)throw new Error("function does not have any path reservations");return{paths:u.paths.map(d=>t.get(d)),dirs:[...u.dirs].map(d=>t.get(d))}},i=l=>{let{paths:u,dirs:d}=o(l);return u.every(f=>f[0]===l)&&d.every(f=>f[0]instanceof Set&&f[0].has(l))},s=l=>n.has(l)||!i(l)?!1:(n.add(l),l(()=>a(l)),!0),a=l=>{if(!n.has(l))return!1;let{paths:u,dirs:d}=e.get(l),f=new Set;return u.forEach(p=>{let h=t.get(p);AP.equal(h[0],l),h.length===1?t.delete(p):(h.shift(),typeof h[0]=="function"?f.add(h[0]):h[0].forEach(m=>f.add(m)))}),d.forEach(p=>{let h=t.get(p);AP(h[0]instanceof Set),h[0].size===1&&h.length===1?t.delete(p):h[0].size===1?(h.shift(),f.add(h[0])):h[0].delete(l)}),n.delete(l),f.forEach(p=>s(p)),!0};return{check:i,reserve:(l,u)=>{l=NG?["win32 parallelization disabled"]:l.map(f=>DG(RG(DP(f))).toLowerCase());let d=new Set(l.map(f=>r(f)).reduce((f,p)=>f.concat(p)));return e.set(u,{dirs:d,paths:l}),l.forEach(f=>{let p=t.get(f);p?p.push(u):t.set(f,[u])}),d.forEach(f=>{let p=t.get(f);p?p[p.length-1]instanceof Set?p[p.length-1].add(u):p.push(new Set([u])):t.set(f,[new Set([u])])}),s(u)}}}});var FP=I((Ide,LP)=>{var LG=process.env.__FAKE_PLATFORM__||process.platform,FG=LG==="win32",MG=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:qG,O_TRUNC:$G,O_WRONLY:jG,UV_FS_O_FILEMAP:NP=0}=MG.constants,UG=FG&&!!NP,BG=512*1024,HG=NP|$G|qG|jG;LP.exports=UG?t=>t<BG?HG:"w":()=>"w"});var Uy=I((Tde,QP)=>{"use strict";var VG=require("assert"),WG=qf(),He=require("fs"),GG=Fa(),Ro=require("path"),MP=IP(),qP=Uv(),zG=OP(),KG=Bv(),Ur=Sa(),YG=ka(),JG=Oy(),$P=Symbol("onEntry"),Ny=Symbol("checkFs"),jP=Symbol("checkFs2"),Wf=Symbol("pruneCache"),Ly=Symbol("isReusable"),sn=Symbol("makeFs"),Fy=Symbol("file"),My=Symbol("directory"),Gf=Symbol("link"),UP=Symbol("symlink"),BP=Symbol("hardlink"),HP=Symbol("unsupported"),VP=Symbol("checkPath"),vi=Symbol("mkdir"),nr=Symbol("onError"),zf=Symbol("pending"),WP=Symbol("pend"),Ua=Symbol("unpend"),qy=Symbol("ended"),$y=Symbol("maybeClose"),jy=Symbol("skip"),Tl=Symbol("doChown"),Al=Symbol("uid"),Dl=Symbol("gid"),Rl=Symbol("checkedCwd"),GP=require("crypto"),zP=FP(),QG=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,Ol=QG==="win32",XG=(t,e)=>{if(!Ol)return He.unlink(t,e);let r=t+".DELETE."+GP.randomBytes(16).toString("hex");He.rename(t,r,n=>{if(n)return e(n);He.unlink(r,e)})},ZG=t=>{if(!Ol)return He.unlinkSync(t);let e=t+".DELETE."+GP.randomBytes(16).toString("hex");He.renameSync(t,e),He.unlinkSync(e)},KP=(t,e,r)=>t===t>>>0?t:e===e>>>0?e:r,YP=t=>JG(YG(Ur(t))).toLowerCase(),ez=(t,e)=>{e=YP(e);for(let r of t.keys()){let n=YP(r);(n===e||n.indexOf(e+"/")===0)&&t.delete(r)}},tz=t=>{for(let e of t.keys())t.delete(e)},Kf=class extends WG{constructor(e){e||(e={}),e.ondone=r=>{this[qy]=!0,this[$y]()};super(e);if(this[Rl]=!1,this.reservations=zG(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[zf]=0,this[qy]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||Ol,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=Ur(Ro.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",r=>this[$P](r))}warn(e,r,n={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(n.recoverable=!1),super.warn(e,r,n)}[$y](){this[qy]&&this[zf]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close"))}[VP](e){if(this.strip){let r=Ur(e.path).split("/");if(r.length<this.strip)return!1;if(e.path=r.slice(this.strip).join("/"),e.type==="Link"){let n=Ur(e.linkpath).split("/");if(n.length>=this.strip)e.linkpath=n.slice(this.strip).join("/");else return!1}}if(!this.preservePaths){let r=Ur(e.path),n=r.split("/");if(n.includes("..")||Ol&&/^[a-z]:\.\.$/i.test(n[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:r}),!1;let[o,i]=KG(r);o&&(e.path=i,this.warn("TAR_ENTRY_INFO",`stripping ${o} from absolute path`,{entry:e,path:r}))}if(Ro.isAbsolute(e.path)?e.absolute=Ur(Ro.resolve(e.path)):e.absolute=Ur(Ro.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:Ur(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:r}=Ro.win32.parse(e.absolute);e.absolute=r+qP.encode(e.absolute.substr(r.length));let{root:n}=Ro.win32.parse(e.path);e.path=n+qP.encode(e.path.substr(n.length))}return!0}[$P](e){if(!this[VP](e))return e.resume();switch(VG.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[Ny](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[HP](e)}}[nr](e,r){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:r}),this[Ua](),r.resume())}[vi](e,r,n){MP(Ur(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r,noChmod:this.noChmod},n)}[Tl](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[Al](e){return KP(this.uid,e.uid,this.processUid)}[Dl](e){return KP(this.gid,e.gid,this.processGid)}[Fy](e,r){let n=e.mode&4095||this.fmode,o=new GG.WriteStream(e.absolute,{flags:zP(e.size),mode:n,autoClose:!1});o.on("error",c=>{o.fd&&He.close(o.fd,()=>{}),o.write=()=>!0,this[nr](c,e),r()});let i=1,s=c=>{if(c){o.fd&&He.close(o.fd,()=>{}),this[nr](c,e),r();return}--i==0&&He.close(o.fd,l=>{l?this[nr](l,e):this[Ua](),r()})};o.on("finish",c=>{let l=e.absolute,u=o.fd;if(e.mtime&&!this.noMtime){i++;let d=e.atime||new Date,f=e.mtime;He.futimes(u,d,f,p=>p?He.utimes(l,d,f,h=>s(h&&p)):s())}if(this[Tl](e)){i++;let d=this[Al](e),f=this[Dl](e);He.fchown(u,d,f,p=>p?He.chown(l,d,f,h=>s(h&&p)):s())}s()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",c=>{this[nr](c,e),r()}),e.pipe(a)),a.pipe(o)}[My](e,r){let n=e.mode&4095||this.dmode;this[vi](e.absolute,n,o=>{if(o){this[nr](o,e),r();return}let i=1,s=a=>{--i==0&&(r(),this[Ua](),e.resume())};e.mtime&&!this.noMtime&&(i++,He.utimes(e.absolute,e.atime||new Date,e.mtime,s)),this[Tl](e)&&(i++,He.chown(e.absolute,this[Al](e),this[Dl](e),s)),s()})}[HP](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[UP](e,r){this[Gf](e,e.linkpath,"symlink",r)}[BP](e,r){let n=Ur(Ro.resolve(this.cwd,e.linkpath));this[Gf](e,n,"link",r)}[WP](){this[zf]++}[Ua](){this[zf]--,this[$y]()}[jy](e){this[Ua](),e.resume()}[Ly](e,r){return e.type==="File"&&!this.unlink&&r.isFile()&&r.nlink<=1&&!Ol}[Ny](e){this[WP]();let r=[e.path];e.linkpath&&r.push(e.linkpath),this.reservations.reserve(r,n=>this[jP](e,n))}[Wf](e){e.type==="SymbolicLink"?tz(this.dirCache):e.type!=="Directory"&&ez(this.dirCache,e.absolute)}[jP](e,r){this[Wf](e);let n=a=>{this[Wf](e),r(a)},o=()=>{this[vi](this.cwd,this.dmode,a=>{if(a){this[nr](a,e),n();return}this[Rl]=!0,i()})},i=()=>{if(e.absolute!==this.cwd){let a=Ur(Ro.dirname(e.absolute));if(a!==this.cwd)return this[vi](a,this.dmode,c=>{if(c){this[nr](c,e),n();return}s()})}s()},s=()=>{He.lstat(e.absolute,(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>e.mtime)){this[jy](e),n();return}if(a||this[Ly](e,c))return this[sn](null,e,n);if(c.isDirectory()){if(e.type==="Directory"){let l=!this.noChmod&&e.mode&&(c.mode&4095)!==e.mode,u=d=>this[sn](d,e,n);return l?He.chmod(e.absolute,e.mode,u):u()}if(e.absolute!==this.cwd)return He.rmdir(e.absolute,l=>this[sn](l,e,n))}if(e.absolute===this.cwd)return this[sn](null,e,n);XG(e.absolute,l=>this[sn](l,e,n))})};this[Rl]?i():o()}[sn](e,r,n){if(e){this[nr](e,r),n();return}switch(r.type){case"File":case"OldFile":case"ContiguousFile":return this[Fy](r,n);case"Link":return this[BP](r,n);case"SymbolicLink":return this[UP](r,n);case"Directory":case"GNUDumpDir":return this[My](r,n)}}[Gf](e,r,n,o){He[n](r,e.absolute,i=>{i?this[nr](i,e):(this[Ua](),e.resume()),o()})}},Yf=t=>{try{return[null,t()]}catch(e){return[e,null]}},JP=class extends Kf{[sn](e,r){return super[sn](e,r,()=>{})}[Ny](e){if(this[Wf](e),!this[Rl]){let i=this[vi](this.cwd,this.dmode);if(i)return this[nr](i,e);this[Rl]=!0}if(e.absolute!==this.cwd){let i=Ur(Ro.dirname(e.absolute));if(i!==this.cwd){let s=this[vi](i,this.dmode);if(s)return this[nr](s,e)}}let[r,n]=Yf(()=>He.lstatSync(e.absolute));if(n&&(this.keep||this.newer&&n.mtime>e.mtime))return this[jy](e);if(r||this[Ly](e,n))return this[sn](null,e);if(n.isDirectory()){if(e.type==="Directory"){let s=!this.noChmod&&e.mode&&(n.mode&4095)!==e.mode,[a]=s?Yf(()=>{He.chmodSync(e.absolute,e.mode)}):[];return this[sn](a,e)}let[i]=Yf(()=>He.rmdirSync(e.absolute));this[sn](i,e)}let[o]=e.absolute===this.cwd?[]:Yf(()=>ZG(e.absolute));this[sn](o,e)}[Fy](e,r){let n=e.mode&4095||this.fmode,o=a=>{let c;try{He.closeSync(i)}catch(l){c=l}(a||c)&&this[nr](a||c,e),r()},i;try{i=He.openSync(e.absolute,zP(e.size),n)}catch(a){return o(a)}let s=this.transform&&this.transform(e)||e;s!==e&&(s.on("error",a=>this[nr](a,e)),e.pipe(s)),s.on("data",a=>{try{He.writeSync(i,a,0,a.length)}catch(c){o(c)}}),s.on("end",a=>{let c=null;if(e.mtime&&!this.noMtime){let l=e.atime||new Date,u=e.mtime;try{He.futimesSync(i,l,u)}catch(d){try{He.utimesSync(e.absolute,l,u)}catch{c=d}}}if(this[Tl](e)){let l=this[Al](e),u=this[Dl](e);try{He.fchownSync(i,l,u)}catch(d){try{He.chownSync(e.absolute,l,u)}catch{c=c||d}}}o(c)})}[My](e,r){let n=e.mode&4095||this.dmode,o=this[vi](e.absolute,n);if(o){this[nr](o,e),r();return}if(e.mtime&&!this.noMtime)try{He.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[Tl](e))try{He.chownSync(e.absolute,this[Al](e),this[Dl](e))}catch{}r(),e.resume()}[vi](e,r){try{return MP.sync(Ur(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r})}catch(n){return n}}[Gf](e,r,n,o){try{He[n+"Sync"](r,e.absolute),o(),e.resume()}catch(i){return this[nr](i,e)}}};Kf.Sync=JP;QP.exports=Kf});var rk=I((Ade,tk)=>{"use strict";var rz=ba(),Jf=Uy(),XP=require("fs"),ZP=Fa(),ek=require("path"),By=ka();tk.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=rz(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&nz(n,e),n.file&&n.sync?oz(n):n.file?iz(n,r):n.sync?sz(n):az(n)};var nz=(t,e)=>{let r=new Map(e.map(i=>[By(i),!0])),n=t.filter,o=(i,s)=>{let a=s||ek.parse(i).root||".",c=i===a?!1:r.has(i)?r.get(i):o(ek.dirname(i),a);return r.set(i,c),c};t.filter=n?(i,s)=>n(i,s)&&o(By(i)):i=>o(By(i))},oz=t=>{let e=new Jf.Sync(t),r=t.file,n=XP.statSync(r),o=t.maxReadSize||16*1024*1024;new ZP.ReadStreamSync(r,{readSize:o,size:n.size}).pipe(e)},iz=(t,e)=>{let r=new Jf(t),n=t.maxReadSize||16*1024*1024,o=t.file,i=new Promise((s,a)=>{r.on("error",a),r.on("close",s),XP.stat(o,(c,l)=>{if(c)a(c);else{let u=new ZP.ReadStream(o,{readSize:n,size:l.size});u.on("error",a),u.pipe(r)}})});return e?i.then(e,e):i},sz=t=>new Jf.Sync(t),az=t=>new Jf(t)});var Ba=I(Dt=>{"use strict";Dt.c=Dt.create=Mx();Dt.r=Dt.replace=Ey();Dt.t=Dt.list=$f();Dt.u=Dt.update=Gx();Dt.x=Dt.extract=rk();Dt.Pack=Pf();Dt.Unpack=Uy();Dt.Parse=qf();Dt.ReadEntry=lf();Dt.WriteEntry=Qv();Dt.Header=Pa();Dt.Pax=ff();Dt.types=Lv()});var Vy=I(Hy=>{"use strict";Object.defineProperty(Hy,"__esModule",{value:!0});Hy.default=uz;var cz=lz(require("crypto"));function lz(t){return t&&t.__esModule?t:{default:t}}var Qf=new Uint8Array(256),Xf=Qf.length;function uz(){return Xf>Qf.length-16&&(cz.default.randomFillSync(Qf),Xf=0),Qf.slice(Xf,Xf+=16)}});var nk=I(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});Zf.default=void 0;var dz=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Zf.default=dz});var Nl=I(ep=>{"use strict";Object.defineProperty(ep,"__esModule",{value:!0});ep.default=void 0;var fz=pz(nk());function pz(t){return t&&t.__esModule?t:{default:t}}function hz(t){return typeof t=="string"&&fz.default.test(t)}var mz=hz;ep.default=mz});var Ll=I(tp=>{"use strict";Object.defineProperty(tp,"__esModule",{value:!0});tp.default=void 0;var gz=vz(Nl());function vz(t){return t&&t.__esModule?t:{default:t}}var Ht=[];for(let t=0;t<256;++t)Ht.push((t+256).toString(16).substr(1));function yz(t,e=0){let r=(Ht[t[e+0]]+Ht[t[e+1]]+Ht[t[e+2]]+Ht[t[e+3]]+"-"+Ht[t[e+4]]+Ht[t[e+5]]+"-"+Ht[t[e+6]]+Ht[t[e+7]]+"-"+Ht[t[e+8]]+Ht[t[e+9]]+"-"+Ht[t[e+10]]+Ht[t[e+11]]+Ht[t[e+12]]+Ht[t[e+13]]+Ht[t[e+14]]+Ht[t[e+15]]).toLowerCase();if(!(0,gz.default)(r))throw TypeError("Stringified UUID is invalid");return r}var wz=yz;tp.default=wz});var sk=I(rp=>{"use strict";Object.defineProperty(rp,"__esModule",{value:!0});rp.default=void 0;var Cz=ok(Vy()),bz=ok(Ll());function ok(t){return t&&t.__esModule?t:{default:t}}var ik,Wy,Gy=0,zy=0;function Ez(t,e,r){let n=e&&r||0,o=e||new Array(16);t=t||{};let i=t.node||ik,s=t.clockseq!==void 0?t.clockseq:Wy;if(i==null||s==null){let f=t.random||(t.rng||Cz.default)();i==null&&(i=ik=[f[0]|1,f[1],f[2],f[3],f[4],f[5]]),s==null&&(s=Wy=(f[6]<<8|f[7])&16383)}let a=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:zy+1,l=a-Gy+(c-zy)/1e4;if(l<0&&t.clockseq===void 0&&(s=s+1&16383),(l<0||a>Gy)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Gy=a,zy=c,Wy=s,a+=122192928e5;let u=((a&268435455)*1e4+c)%4294967296;o[n++]=u>>>24&255,o[n++]=u>>>16&255,o[n++]=u>>>8&255,o[n++]=u&255;let d=a/4294967296*1e4&268435455;o[n++]=d>>>8&255,o[n++]=d&255,o[n++]=d>>>24&15|16,o[n++]=d>>>16&255,o[n++]=s>>>8|128,o[n++]=s&255;for(let f=0;f<6;++f)o[n+f]=i[f];return e||(0,bz.default)(o)}var _z=Ez;rp.default=_z});var Ky=I(np=>{"use strict";Object.defineProperty(np,"__esModule",{value:!0});np.default=void 0;var Sz=xz(Nl());function xz(t){return t&&t.__esModule?t:{default:t}}function Pz(t){if(!(0,Sz.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var kz=Pz;np.default=kz});var Yy=I(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});Rs.default=Dz;Rs.URL=Rs.DNS=void 0;var Iz=ak(Ll()),Tz=ak(Ky());function ak(t){return t&&t.__esModule?t:{default:t}}function Az(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var ck="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Rs.DNS=ck;var lk="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Rs.URL=lk;function Dz(t,e,r){function n(o,i,s,a){if(typeof o=="string"&&(o=Az(o)),typeof i=="string"&&(i=(0,Tz.default)(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+o.length);if(c.set(i),c.set(o,i.length),c=r(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,s){a=a||0;for(let l=0;l<16;++l)s[a+l]=c[l];return s}return(0,Iz.default)(c)}try{n.name=t}catch{}return n.DNS=ck,n.URL=lk,n}});var uk=I(op=>{"use strict";Object.defineProperty(op,"__esModule",{value:!0});op.default=void 0;var Rz=Oz(require("crypto"));function Oz(t){return t&&t.__esModule?t:{default:t}}function Nz(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),Rz.default.createHash("md5").update(t).digest()}var Lz=Nz;op.default=Lz});var fk=I(ip=>{"use strict";Object.defineProperty(ip,"__esModule",{value:!0});ip.default=void 0;var Fz=dk(Yy()),Mz=dk(uk());function dk(t){return t&&t.__esModule?t:{default:t}}var qz=(0,Fz.default)("v3",48,Mz.default),$z=qz;ip.default=$z});var hk=I(sp=>{"use strict";Object.defineProperty(sp,"__esModule",{value:!0});sp.default=void 0;var jz=pk(Vy()),Uz=pk(Ll());function pk(t){return t&&t.__esModule?t:{default:t}}function Bz(t,e,r){t=t||{};let n=t.random||(t.rng||jz.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let o=0;o<16;++o)e[r+o]=n[o];return e}return(0,Uz.default)(n)}var Hz=Bz;sp.default=Hz});var mk=I(ap=>{"use strict";Object.defineProperty(ap,"__esModule",{value:!0});ap.default=void 0;var Vz=Wz(require("crypto"));function Wz(t){return t&&t.__esModule?t:{default:t}}function Gz(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),Vz.default.createHash("sha1").update(t).digest()}var zz=Gz;ap.default=zz});var vk=I(cp=>{"use strict";Object.defineProperty(cp,"__esModule",{value:!0});cp.default=void 0;var Kz=gk(Yy()),Yz=gk(mk());function gk(t){return t&&t.__esModule?t:{default:t}}var Jz=(0,Kz.default)("v5",80,Yz.default),Qz=Jz;cp.default=Qz});var yk=I(lp=>{"use strict";Object.defineProperty(lp,"__esModule",{value:!0});lp.default=void 0;var Xz="00000000-0000-0000-0000-000000000000";lp.default=Xz});var wk=I(up=>{"use strict";Object.defineProperty(up,"__esModule",{value:!0});up.default=void 0;var Zz=e4(Nl());function e4(t){return t&&t.__esModule?t:{default:t}}function t4(t){if(!(0,Zz.default)(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}var r4=t4;up.default=r4});var Ck=I(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});Object.defineProperty(An,"v1",{enumerable:!0,get:function(){return n4.default}});Object.defineProperty(An,"v3",{enumerable:!0,get:function(){return o4.default}});Object.defineProperty(An,"v4",{enumerable:!0,get:function(){return i4.default}});Object.defineProperty(An,"v5",{enumerable:!0,get:function(){return s4.default}});Object.defineProperty(An,"NIL",{enumerable:!0,get:function(){return a4.default}});Object.defineProperty(An,"version",{enumerable:!0,get:function(){return c4.default}});Object.defineProperty(An,"validate",{enumerable:!0,get:function(){return l4.default}});Object.defineProperty(An,"stringify",{enumerable:!0,get:function(){return u4.default}});Object.defineProperty(An,"parse",{enumerable:!0,get:function(){return d4.default}});var n4=Oo(sk()),o4=Oo(fk()),i4=Oo(hk()),s4=Oo(vk()),a4=Oo(yk()),c4=Oo(wk()),l4=Oo(Nl()),u4=Oo(Ll()),d4=Oo(Ky());function Oo(t){return t&&t.__esModule?t:{default:t}}});var Ok=I((lfe,Rk)=>{var Ha=1e3,Va=Ha*60,Wa=Va*60,Os=Wa*24,E4=Os*7,_4=Os*365.25;Rk.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return S4(t);if(r==="number"&&isFinite(t))return e.long?P4(t):x4(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function S4(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*_4;case"weeks":case"week":case"w":return r*E4;case"days":case"day":case"d":return r*Os;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Wa;case"minutes":case"minute":case"mins":case"min":case"m":return r*Va;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ha;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function x4(t){var e=Math.abs(t);return e>=Os?Math.round(t/Os)+"d":e>=Wa?Math.round(t/Wa)+"h":e>=Va?Math.round(t/Va)+"m":e>=Ha?Math.round(t/Ha)+"s":t+"ms"}function P4(t){var e=Math.abs(t);return e>=Os?fp(t,e,Os,"day"):e>=Wa?fp(t,e,Wa,"hour"):e>=Va?fp(t,e,Va,"minute"):e>=Ha?fp(t,e,Ha,"second"):t+" ms"}function fp(t,e,r,n){var o=e>=r*1.5;return Math.round(t/r)+" "+n+(o?"s":"")}});var Zy=I((ufe,Nk)=>{function k4(t){r.debug=r,r.default=r,r.coerce=c,r.disable=i,r.enable=o,r.enabled=s,r.humanize=Ok(),r.destroy=l,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let d=0;for(let f=0;f<u.length;f++)d=(d<<5)-d+u.charCodeAt(f),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(u){let d,f=null;function p(...h){if(!p.enabled)return;let m=p,g=Number(new Date),v=g-(d||g);m.diff=v,m.prev=d,m.curr=g,d=g,h[0]=r.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");let y=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,(C,_)=>{if(C==="%%")return"%";y++;let P=r.formatters[_];if(typeof P=="function"){let S=h[y];C=P.call(m,S),h.splice(y,1),y--}return C}),r.formatArgs.call(m,h),(m.log||r.log).apply(m,h)}return p.namespace=u,p.useColors=r.useColors(),p.color=r.selectColor(u),p.extend=n,p.destroy=r.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>f===null?r.enabled(u):f,set:h=>{f=h}}),typeof r.init=="function"&&r.init(p),p}function n(u,d){let f=r(this.namespace+(typeof d=="undefined"?":":d)+u);return f.log=this.log,f}function o(u){r.save(u),r.names=[],r.skips=[];let d,f=(typeof u=="string"?u:"").split(/[\s,]+/),p=f.length;for(d=0;d<p;d++)!f[d]||(u=f[d].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.substr(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function i(){let u=[...r.names.map(a),...r.skips.map(a).map(d=>"-"+d)].join(",");return r.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let d,f;for(d=0,f=r.skips.length;d<f;d++)if(r.skips[d].test(u))return!1;for(d=0,f=r.names.length;d<f;d++)if(r.names[d].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Nk.exports=k4});var Lk=I((Hr,pp)=>{Hr.formatArgs=T4;Hr.save=A4;Hr.load=D4;Hr.useColors=I4;Hr.storage=R4();Hr.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Hr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function I4(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function T4(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+pp.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(r++,o==="%c"&&(n=r))}),t.splice(n,0,e)}Hr.log=console.debug||console.log||(()=>{});function A4(t){try{t?Hr.storage.setItem("debug",t):Hr.storage.removeItem("debug")}catch{}}function D4(){let t;try{t=Hr.storage.getItem("debug")}catch{}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function R4(){try{return localStorage}catch{}}pp.exports=Zy()(Hr);var{formatters:O4}=pp.exports;O4.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Mk=I((dfe,Fk)=>{"use strict";Fk.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),o=e.indexOf("--");return n!==-1&&(o===-1||n<o)}});var jk=I((ffe,$k)=>{"use strict";var N4=require("os"),qk=require("tty"),an=Mk(),{env:Mt}=process,hp;an("no-color")||an("no-colors")||an("color=false")||an("color=never")?hp=0:(an("color")||an("colors")||an("color=true")||an("color=always"))&&(hp=1);function L4(){if("FORCE_COLOR"in Mt)return Mt.FORCE_COLOR==="true"?1:Mt.FORCE_COLOR==="false"?0:Mt.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(Mt.FORCE_COLOR,10),3)}function F4(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function M4(t,{streamIsTTY:e,sniffFlags:r=!0}={}){let n=L4();n!==void 0&&(hp=n);let o=r?hp:n;if(o===0)return 0;if(r){if(an("color=16m")||an("color=full")||an("color=truecolor"))return 3;if(an("color=256"))return 2}if(t&&!e&&o===void 0)return 0;let i=o||0;if(Mt.TERM==="dumb")return i;if(process.platform==="win32"){let s=N4.release().split(".");return Number(s[0])>=10&&Number(s[2])>=10586?Number(s[2])>=14931?3:2:1}if("CI"in Mt)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(s=>s in Mt)||Mt.CI_NAME==="codeship"?1:i;if("TEAMCITY_VERSION"in Mt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Mt.TEAMCITY_VERSION)?1:0;if(Mt.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Mt){let s=Number.parseInt((Mt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Mt.TERM_PROGRAM){case"iTerm.app":return s>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Mt.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Mt.TERM)||"COLORTERM"in Mt?1:i}function ew(t,e={}){let r=M4(t,V({streamIsTTY:t&&t.isTTY},e));return F4(r)}$k.exports={supportsColor:ew,stdout:ew({isTTY:qk.isatty(1)}),stderr:ew({isTTY:qk.isatty(2)})}});var Bk=I((Vt,gp)=>{var q4=require("tty"),mp=require("util");Vt.init=W4;Vt.log=B4;Vt.formatArgs=j4;Vt.save=H4;Vt.load=V4;Vt.useColors=$4;Vt.destroy=mp.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Vt.colors=[6,2,3,4,5,1];try{let t=jk();t&&(t.stderr||t).level>=2&&(Vt.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Vt.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(o,i)=>i.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function $4(){return"colors"in Vt.inspectOpts?Boolean(Vt.inspectOpts.colors):q4.isatty(process.stderr.fd)}function j4(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,o="[3"+(n<8?n:"8;5;"+n),i=`  ${o};1m${e} [0m`;t[0]=i+t[0].split(`
`).join(`
`+i),t.push(o+"m+"+gp.exports.humanize(this.diff)+"[0m")}else t[0]=U4()+e+" "+t[0]}function U4(){return Vt.inspectOpts.hideDate?"":new Date().toISOString()+" "}function B4(...t){return process.stderr.write(mp.format(...t)+`
`)}function H4(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function V4(){return process.env.DEBUG}function W4(t){t.inspectOpts={};let e=Object.keys(Vt.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Vt.inspectOpts[e[r]]}gp.exports=Zy()(Vt);var{formatters:Uk}=gp.exports;Uk.o=function(t){return this.inspectOpts.colors=this.useColors,mp.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Uk.O=function(t){return this.inspectOpts.colors=this.useColors,mp.inspect(t,this.inspectOpts)}});var Hk=I((pfe,tw)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?tw.exports=Lk():tw.exports=Bk()});var Wk=I((hfe,Vk)=>{var ql;Vk.exports=function(){if(!ql){try{ql=Hk()("follow-redirects")}catch{}typeof ql!="function"&&(ql=function(){})}ql.apply(null,arguments)}});var Ga=I((mfe,iw)=>{var Ns=require("url"),rw=Ns.URL,G4=require("http"),z4=require("https"),Gk=require("stream").Writable,K4=require("assert"),zk=Wk(),Ls=["abort","aborted","connect","error","socket","timeout"],nw=Object.create(null);Ls.forEach(function(t){nw[t]=function(e,r,n){this._redirectable.emit(t,e,r,n)}});var Kk=vp("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),Y4=vp("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),J4=vp("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),Q4=vp("ERR_STREAM_WRITE_AFTER_END","write after end");function Vr(t,e){Gk.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var r=this;this._onNativeResponse=function(n){r._processResponse(n)},this._performRequest()}Vr.prototype=Object.create(Gk.prototype);Vr.prototype.abort=function(){Qk(this._currentRequest),this.emit("abort")};Vr.prototype.write=function(t,e,r){if(this._ending)throw new Q4;if(!(typeof t=="string"||typeof t=="object"&&"length"in t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof e=="function"&&(r=e,e=null),t.length===0){r&&r();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new J4),this.abort())};Vr.prototype.end=function(t,e,r){if(typeof t=="function"?(r=t,t=e=null):typeof e=="function"&&(r=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,o=this._currentRequest;this.write(t,e,function(){n._ended=!0,o.end(null,null,r)}),this._ending=!0}};Vr.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};Vr.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};Vr.prototype.setTimeout=function(t,e){var r=this;function n(s){s.setTimeout(t),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function o(s){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),i()},t),n(s)}function i(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",i),r.removeListener("error",i),r.removeListener("response",i),e&&r.removeListener("timeout",e),r.socket||r._currentRequest.removeListener("socket",o)}return e&&this.on("timeout",e),this.socket?o(this.socket):this._currentRequest.once("socket",o),this.on("socket",n),this.on("abort",i),this.on("error",i),this.on("response",i),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){Vr.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(Vr.prototype,t,{get:function(){return this._currentRequest[t]}})});Vr.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};Vr.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e){this.emit("error",new TypeError("Unsupported protocol "+t));return}if(this._options.agents){var r=t.substr(0,t.length-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);this._currentUrl=Ns.format(this._options),n._redirectable=this;for(var o=0;o<Ls.length;o++)n.on(Ls[o],nw[Ls[o]]);if(this._isRedirect){var i=0,s=this,a=this._requestBodyBuffers;(function c(l){if(n===s._currentRequest)if(l)s.emit("error",l);else if(i<a.length){var u=a[i++];n.finished||n.write(u.data,u.encoding,c)}else s._ended&&n.end()})()}};Vr.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var r=t.headers.location;if(r&&this._options.followRedirects!==!1&&e>=300&&e<400){if(Qk(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new Y4);return}((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],ow(/^content-/i,this._options.headers));var n=ow(/^host$/i,this._options.headers),o=Ns.parse(this._currentUrl),i=n||o.host,s=/^\w+:/.test(r)?this._currentUrl:Ns.format(Object.assign(o,{host:i})),a;try{a=Ns.resolve(s,r)}catch(u){this.emit("error",new Kk(u));return}zk("redirecting to",a),this._isRedirect=!0;var c=Ns.parse(a);if(Object.assign(this._options,c),(c.protocol!==o.protocol||!Z4(c.host,i))&&ow(/^(?:authorization|cookie)$/i,this._options.headers),typeof this._options.beforeRedirect=="function"){var l={headers:t.headers};try{this._options.beforeRedirect.call(null,this._options,l)}catch(u){this.emit("error",u);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(u){this.emit("error",new Kk(u))}}else t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[]};function Yk(t){var e={maxRedirects:21,maxBodyLength:10*1024*1024},r={};return Object.keys(t).forEach(function(n){var o=n+":",i=r[o]=t[n],s=e[n]=Object.create(i);function a(l,u,d){if(typeof l=="string"){var f=l;try{l=Jk(new rw(f))}catch{l=Ns.parse(f)}}else rw&&l instanceof rw?l=Jk(l):(d=u,u=l,l={protocol:o});return typeof u=="function"&&(d=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},l,u),u.nativeProtocols=r,K4.equal(u.protocol,o,"protocol mismatch"),zk("options",u),new Vr(u,d)}function c(l,u,d){var f=s.request(l,u,d);return f.end(),f}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function X4(){}function Jk(t){var e={protocol:t.protocol,hostname:t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:t.pathname+t.search,href:t.href};return t.port!==""&&(e.port=Number(t.port)),e}function ow(t,e){var r;for(var n in e)t.test(n)&&(r=e[n],delete e[n]);return r===null||typeof r=="undefined"?void 0:String(r).trim()}function vp(t,e){function r(n){Error.captureStackTrace(this,this.constructor),n?(this.message=e+": "+n.message,this.cause=n):this.message=e}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+t+"]",r.prototype.code=t,r}function Qk(t){for(var e=0;e<Ls.length;e++)t.removeListener(Ls[e],nw[Ls[e]]);t.on("error",X4),t.abort()}function Z4(t,e){if(t===e)return!0;let r=t.length-e.length-1;return r>0&&t[r]==="."&&t.endsWith(e)}iw.exports=Yk({http:G4,https:z4});iw.exports.wrap=Yk});var lw=I((Ffe,iI)=>{iI.exports=function(e,r,n){e(r),n&&n(r===!0?null:r)}});var Sp=I((Mfe,aI)=>{"use strict";var sI=lw();aI.exports=function(e,r){if(!e)return function(o,i){return o?sI(i,o,r):i(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(o){return e[o]}));var n=0;return function(o,i){if(o)return sI(i,o,r);n>=e.length?i(!0):i(null,e[n++])}}});var lI=I((qfe,cI)=>{"use strict";var o6=Sp();cI.exports=function(t){return o6(Object.keys(t))}});var uw=I(($fe,uI)=>{"use strict";var i6=lw();uI.exports=function(e,r){return function(n,o){if(n)return i6(o,n,r);if(e!=null){var i=e;e=null,o(null,i)}else o(!0)}}});var fI=I((jfe,dI)=>{"use strict";dI.exports=function(e){var r=0;return e=e||1/0,function(n,o){if(n)return o&&o(n);if(r>e)return o(!0);o(null,r++)}}});var hI=I((Ufe,pI)=>{"use strict";pI.exports=function(e){return e=e||Math.random,function(r,n){return r?n&&n(r):n(null,e())}}});var gI=I((Bfe,mI)=>{"use strict";mI.exports=function(){return function(e,r){r(!0)}}});var yI=I((Hfe,vI)=>{"use strict";vI.exports=function(e){return function(r,n){n(e)}}});var CI=I((Vfe,wI)=>{"use strict";wI.exports={keys:lI(),once:uw(),values:Sp(),count:fI(),infinite:hI(),empty:gI(),error:yI()}});var Ya=I((Wfe,bI)=>{"use strict";bI.exports=function(e,r){var n,o;function i(s){if(n=s,o)return i.abort();(function a(){for(var c=!0,l=!1;c;)if(l=!1,n(null,function(u,d){if(l=!0,u=u||o){if(c=!1,r)r(u===!0?null:u);else if(u&&u!==!0)throw u}else e&&e(d)===!1||o?(c=!1,n(o||!0,r||function(){})):c||a()}),!l){c=!1;return}})()}return i.abort=function(s,a){if(typeof s=="function"&&(a=s,s=!0),o=s||!0,n)return n(o,a||function(){})},i}});var _I=I((Gfe,EI)=>{"use strict";var s6=Ya();EI.exports=function(e){return s6(null,e)}});var xI=I((zfe,SI)=>{"use strict";var a6=Ya();SI.exports=function(e){return a6(function(r){console.log(r)},e)}});var Ja=I((Kfe,PI)=>{PI.exports=function(e){return e&&(typeof e=="string"?function(r){return r[e]}:typeof e=="object"&&typeof e.exec=="function"?function(r){var n=e.exec(r);return n&&n[0]}:e)}});var TI=I((Yfe,II)=>{"use strict";function kI(t){return t}var c6=Ja(),l6=Ya();II.exports=function(e,r){var n=!1;return r?e=c6(e)||kI:(r=e,e=kI),l6(function(o){if(e(o))return n=!0,r(null,o),!1},function(o){n||r(o===!0?null:o,null)})}});var xp=I((Jfe,AI)=>{"use strict";var u6=Ya();AI.exports=function(e,r,n){n||(n=r,r=null);var o=u6(function(i){r=e(r,i)},function(i){n(i,r)});return arguments.length===2?function(i){i(null,function(s,a){if(s)return n(s===!0?null:s);r=a,o(i)})}:o}});var RI=I((Qfe,DI)=>{"use strict";var d6=xp();DI.exports=function(e){return d6(function(r,n){return r.push(n),r},[],e)}});var NI=I((Xfe,OI)=>{"use strict";var f6=xp();OI.exports=function(e){return f6(function(r,n){return r+n},"",e)}});var FI=I((Zfe,LI)=>{"use strict";LI.exports={drain:Ya(),onEnd:_I(),log:xI(),find:TI(),reduce:xp(),collect:RI(),concat:NI()}});var qI=I((epe,MI)=>{"use strict";function p6(t){return t}var h6=Ja();MI.exports=function(e){return e?(e=h6(e),function(r){return function(n,o){r(n,function(i,s){try{s=i?null:e(s)}catch(a){return r(a,function(){return o(a)})}o(i,s)})}}):p6}});var jI=I((tpe,$I)=>{"use strict";function m6(t){return t}var g6=Ja();$I.exports=function(e){if(!e)return m6;e=g6(e);var r=!1,n,o;return function(i){return function s(a,c){if(o)return c(o);a?(o=a,r?i(a,function(l){r?n=c:c(a)}):i(a,function(l){c(a)})):i(null,function(l,u){l?c(l):o?c(o):(r=!0,e(u,function(d,f){r=!1,o?(c(o),n&&n(o)):d?s(d,c):c(null,f)}))})}}}});var dw=I((rpe,UI)=>{var v6=Ja();function y6(t){return t}UI.exports=function(e){return typeof e=="object"&&typeof e.test=="function"?function(r){return e.test(r)}:v6(e)||y6}});var Pp=I((npe,BI)=>{"use strict";var w6=dw();BI.exports=function(e){return e=w6(e),function(r){return function n(o,i){for(var s,a=!0;a;)a=!1,s=!0,r(o,function(c,l){if(!c&&!e(l))return s?a=!0:n(c,i);i(c,l)}),s=!1}}}});var VI=I((ope,HI)=>{"use strict";var C6=dw(),b6=Pp();HI.exports=function(e){return e=C6(e),b6(function(r){return!e(r)})}});var GI=I((ipe,WI)=>{"use strict";WI.exports=function(e,r){var n=!1;function o(i){n||!r||(n=!0,r(i===!0?null:i))}return function(i){return function(s,a){return s&&o(s),i(s,function(c,l){c?o(c):e&&e(l),a(c,l)})}}}});var KI=I((spe,zI)=>{"use strict";zI.exports=function(e,r){r=r||{};var n=r.last||!1,o=!1;if(typeof e=="number"){n=!0;var i=e;e=function(){return--i}}return function(s){function a(c){s(!0,function(l){n=!1,c(l||!0)})}return function(c,l){o&&!c?n?a(l):l(o):(o=c)?s(o,l):s(null,function(u,d){(o=o||u)?l(o):e(d)?l(null,d):(o=!0,n?l(null,d):a(l))})}}}});var fw=I((ape,YI)=>{"use strict";function E6(t){return t}var _6=Ja(),S6=Pp();YI.exports=function(e,r){e=_6(e)||E6;var n={};return S6(function(o){var i=e(o);return n[i]?!!r:(n[i]=!0,!r)})}});var QI=I((cpe,JI)=>{"use strict";var x6=fw();JI.exports=function(e){return x6(e,!0)}});var ZI=I((lpe,XI)=>{"use strict";var P6=Sp(),k6=uw();XI.exports=function(){return function(e){var r;return function(n,o){n?r?r(n,function(a){e(a||n,o)}):e(n,o):r?i():s();function i(){r(null,function(a,c){a===!0?s():a?e(!0,function(l){o(a)}):o(null,c)})}function s(){r=null,e(null,function(a,c){if(a)return o(a);Array.isArray(c)||c&&typeof c=="object"?c=P6(c):typeof c!="function"&&(c=k6(c)),r=c,i()})}}}}});var tT=I((upe,eT)=>{"use strict";eT.exports={map:qI(),asyncMap:jI(),filter:Pp(),filterNot:VI(),through:GI(),take:KI(),unique:fw(),nonUnique:QI(),flatten:ZI()}});var pw=I((dpe,rT)=>{"use strict";rT.exports=function t(e){var r=arguments.length;if(typeof e=="function"&&e.length===1){for(var n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var i=e;i&&typeof i.source=="function"&&(i=i.source);for(var o=1;o<r;o++){var s=arguments[o];typeof s=="function"?i=s(i):s&&typeof s=="object"&&(s.sink(i),i=s.source)}return i}});var kp=I((Ms,sT)=>{"use strict";var nT=CI(),oT=FI(),iT=tT();Ms=sT.exports=pw();Ms.pull=Ms;for(Dn in nT)Ms[Dn]=nT[Dn];var Dn;for(Dn in iT)Ms[Dn]=iT[Dn];var Dn;for(Dn in oT)Ms[Dn]=oT[Dn];var Dn});var _w=I((Spe,fT)=>{var _pe=fT.exports=function(t){(function e(){var r=!0,n=!1,o=!1;do o=!0,r=!1,t.call(this,function(){o?r=!0:e()}),o=!1;while(r)})()}});var hT=I((xpe,pT)=>{var O6=_w();pT.exports=function(t,e){return function(r){var n=[],o,i;function s(l){n.push(l)}t=t||function(l){this.queue(l)},e=e||function(){this.queue(null)};var a={emit:function(l,u){l=="data"&&s(u),l=="end"&&(o=!0,s(null)),l=="error"&&(i=u)},queue:s},c;return function(l,u){if(o=o||l,l)return r(l,function(){if(c){var d=c;c=null,d(l)}u(l)});c=u,O6(function d(f){if(!!c)if(u=c,i)c=null,u(i);else if(n.length){var p=n.shift();c=null,u(p===null,p)}else r(o,function(h,m){if(h&&h!==!0)return i=h,f();if(o=o||h)e.call(a);else if(m!==null&&(t.call(a,m),i||o))return r(i||o,function(){c=null,u(i||o)});f(d)})})}}}});var gT=I((Ppe,mT)=>{mT.exports=function(){var t=[],e=0;function r(){return t.reduce(function(n,o){return n+o.length},0)}return{length:e,data:this,add:function(n){if(!Buffer.isBuffer(n))throw new Error("data must be a buffer, was: "+JSON.stringify(n));return this.length=e=e+n.length,t.push(n),this},has:function(n){return n==null?e>0:e>=n},get:function(n){var o;if(n==null||n===e){e=0;var i=t;return t=[],i.length==1?i[0]:Buffer.concat(i)}else if(t.length>1&&n<=(o=t[0].length)){var s=t[0].slice(0,n);return n===o?t.shift():t[0]=t[0].slice(n,o),e-=n,s}else if(n<e){for(var a=[],c=0;c+t[0].length<n;){var l=t.shift();c+=l.length,a.push(l)}return c<n&&(a.push(t[0].slice(0,n-c)),t[0]=t[0].slice(n-c,t[0].length),this.length=e=e-n),Buffer.concat(a)}else throw new Error("could not get "+n+" bytes")}}}});var CT=I((kpe,wT)=>{"use strict";var N6=gT();function L6(t){return Number.isFinite(t)}function vT(t){return typeof t=="function"}function yT(t,e){return e?function(r,n){var o=setTimeout(function(){t(new Error("pull-reader: read exceeded timeout"),n)},e);t(r,function(i,s){clearTimeout(o),n(i,s)})}:t}wT.exports=function(t){var e=[],r,n,o=!1,i=N6(),s,a,c;function l(){for(;e.length;)if(e[0].length==null&&i.has(1))e.shift().cb(null,i.get());else if(i.has(e[0].length)){var f=e.shift();f.cb(null,i.get(f.length))}else if(s==!0&&e[0].length&&i.length<e[0].length){var p="stream ended with:"+i.length+" but wanted:"+e[0].length;e.shift().cb(new Error(p))}else if(s)e.shift().cb(s);else return!!e.length;return e.length||!i.has(1)||c}function u(){var f=l();f&&!o&&r&&!o&&!a&&(o=!0,n(null,function(p,h){if(o=!1,p)return s=p,l();i.add(h),u()}))}function d(f){if(c){for(;e.length;)e.shift().cb(c);return cb&&cb(c)}n=yT(f,t),r=f,u()}return d.abort=function(f,p){c=f||!0,r?(o=!0,r(c,function(){for(;e.length;)e.shift().cb(c);p&&p(c)})):p()},d.read=function(f,p,h){if(vT(p)&&(h=p,p=t),vT(h))e.push({length:L6(f)?f:null,cb:h}),u();else return a=!0,function(m,g){if(o||i.has(1)){if(m)return r(m,g);e.push({length:null,cb:g}),u()}else yT(r,p)(m,function(v,y){g(v,y)})}},d}});var RT=I((qs,DT)=>{var F6=hT(),M6=CT(),bT=0,ET=1,_T=2,ST="GOODBYE",q6=Buffer.isBuffer;function xT(t){return typeof t=="string"}function PT(t){var e=Buffer.alloc(9),r=0,n=t.value!==void 0?t.value:t.end;return xT(t)&&t===ST?(e.fill(0),[e,null]):(xT(n)?(r=ET,n=Buffer.from(n,"utf-8")):q6(n)?r=bT:(r=_T,n=Buffer.from(JSON.stringify(n),"utf-8")),r=t.stream<<3|t.end<<2|r,e[0]=r,e.writeUInt32BE(n.length,1),e.writeInt32BE(t.req||0,5),[e,n])}function kT(t){if(t.length!=9)throw new Error("expected header to be 9 bytes long");var e=t[0],r=t.readUInt32BE(1),n=t.readInt32BE(5);return{req:n,stream:!!(e&8),end:!!(e&4),value:null,length:r,type:e&3}}function IT(t,e){if(t.length!==e.length)throw new Error("incorrect length, expected:"+e.length+" found:"+t.length);if(bT===e.type)e.value=t;else if(ET===e.type)e.value=t.toString();else if(_T===e.type)e.value=JSON.parse(t.toString());else throw new Error("unknown message type");return e}function TT(){return F6(function(t){var e=PT(t);this.queue(e[0]),e[1]!==null&&this.queue(e[1])})}function AT(){var t=M6(),e=!1;return function(r){return t(r),function(n,o){if(e)return o(!0);if(n)return t.abort(n,o);t.read(9,function(i,s){if(i)return o(i);var a=kT(s);if(a.length===0)return e=!0,o(null,ST);t.read(a.length,function(c,l){if(c)return o(c);try{IT(l,a)}catch(u){return o(u)}o(null,a)})})}}}qs=DT.exports=function(t){return{source:TT()(t.source),sink:function(e){return t.sink(AT()(e))}}};qs.encodePair=PT;qs.decodeHead=kT;qs.decodeBody=IT;qs.encode=TT;qs.decode=AT});var LT=I((Ipe,NT)=>{function Gl(t){return t&&(t===!0?!0:{message:t.message,name:t.name,stack:t.stack})}NT.exports=function(t){return new ln(t)};function ln(t){this.ended=!1,this.opts=t,this._req_counter=1,this._requests={},this._instreams={},this._outstreams={},this._closecbs=[],this._closing=!1,this._closed=!1,t.close&&this._closecbs.push(t.close)}ln.prototype.message=function(t){this.read({req:0,stream:!1,end:!1,value:t})};ln.prototype.request=function(t,e){if(this._closing)return e(new Error("parent stream is closing"));var r=this._req_counter++,n=this;this._requests[r]=function(o,i){delete n._requests[r],e(o,i),n._maybedone(o)},this.read({req:r,stream:!1,end:!1,value:t})};ln.prototype.stream=function(){if(this._closing)throw new Error("parent stream is closing");var t=this._req_counter++,e=this;return this._outstreams[t]=new zl(t,this,function(){delete e._outstreams[t]}),this._outstreams[t]};ln.prototype.close=function(t){if(!t)throw new Error("packet-stream.close *must* have callback");if(this._closed)return t();this._closecbs.push(t),this._closing=!0,this._maybedone()};ln.prototype.destroy=function(t){t=t||Gl(t),this.ended=t,this._closing=!0;var e=t===!0?new Error("unexpected end of parent stream"):t,r=0;for(var n in this._requests)r++,this._requests[n](e);for(var n in this._instreams)r++,this._instreams[n].writeEnd=!0,this._instreams[n].destroy(e);for(var n in this._outstreams)r++,this._outstreams[n].writeEnd=!0,this._outstreams[n].destroy(e);r===0&&t===!0&&(e=null),this._maybedone(e)};ln.prototype._maybedone=function(t){this._closed||!this._closing||Object.keys(this._requests).length!==0||Object.keys(this._instreams).length!==0||Object.keys(this._outstreams).length!==0||(this._closed=!0,this._closecbs.forEach(function(e){e(t)}),this.read(null,t||!0),this.opts=null,this._closecbs.length=0,this.read=OT)};function OT(t){console.error("packet-stream asked to read after closed",t)}ln.prototype.read=function(t){console.error("please overwrite read method to do IO",t)};ln.prototype.write=function(t,e){this.ended||(e?this.destroy(e):t.req&&!t.stream?this._onrequest(t):t.req&&t.stream?this._onstream(t):this._onmessage(t))};ln.prototype._onmessage=function(t){this.opts&&typeof this.opts.message=="function"&&this.opts.message(t.value)};ln.prototype._onrequest=function(t){var e=t.req*-1;if(t.req<0)typeof this._requests[e]=="function"&&this._requests[e](t.end?t.value:null,t.end?null:t.value);else if(this.opts&&typeof this.opts.request=="function"){var r=!1,n=this;this.opts.request(t.value,function(i,s){if(r)throw new Error("cb called twice from local api");r=!0,i?n.read({value:Gl(i),end:!0,req:e}):n.read({value:s,end:!1,req:e}),n._maybedone()})}else{if(this.ended){var o=this.ended===!0?new Error("unexpected end of parent stream"):this.ended;this.read({value:Gl(o),end:!0,stream:!1,req:e})}else this.read({value:{message:"Unable to handle requests",name:"NO_REQUEST_HANDLER",stack:null},end:!0,stream:!1,req:e});this._maybedone()}};ln.prototype._onstream=function(t){if(t.req<0){var e=t.req*-1,r=this._outstreams[e];if(!r)return console.error("no stream for incoming msg",t);t.end?(r.writeEnd&&delete this._outstreams[e],r.readEnd=!0,r.read(null,t.value),this._maybedone()):r.read(t.value)}else{var e=t.req,n=this._instreams[e];if(!n){var o=this;n=this._instreams[e]=new zl(e*-1,this,function(){delete o._instreams[e]}),this.opts&&typeof this.opts.stream=="function"&&this.opts.stream(n)}t.end?(n.writeEnd&&delete this._instreams[e],n.readEnd=!0,n.read&&n.read(null,t.value),this._maybedone()):n.read?n.read(t.value):console.error("no .read for stream:",n.id,"dropped:",t)}};function zl(t,e,r){this.id=t,this.read=null,this.writeEnd=null,this.readEnd=null,this._ps=e,this._remove=r,this._seq_counter=1}zl.prototype.write=function(t,e){if(e){this.writeEnd=e;var r=this._ps;r&&(r.read({req:this.id,stream:!0,end:!0,value:Gl(e)}),this.readEnd&&this.destroy(e),r._maybedone(e))}else this._ps&&this._ps.read({req:this.id,stream:!0,end:!1,value:t})};zl.prototype.end=function(t){this.write(null,Gl(t||!0))};zl.prototype.destroy=function(t){if(this.writeEnd){if(!this.readEnd){this.readEnd=!0;try{this.read&&this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}}else{if(this.writeEnd=!0,!this.readEnd){this.readEnd=!0;try{this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}this.write(null,t)}this._ps&&(this._remove(),this._remove=null,this.read=OT,this._ps=null)}});var MT=I((Tpe,Kl)=>{"use strict";var $6=kp();function j6(t){let e=!1;return(r,n)=>{e||(e=!0,t(r,n))}}function Sw(t,e){let r=[],n=!1,o=!1,i,s,a=j6((c,l)=>{e&&e(c,l),t=null,e=null,i=null,s&&s(c||!0,()=>{})});return t.read=function(c,l){if(n=n||l,i){let u=i;i=null,u(n,c)}else!n&&!o&&r.push(c);n&&a(n!==!0?n:null)},{source(c,l){c?(t&&t.write(null,c),l(c),r.length=0,o=!0,a(c!==!0?c:null)):r.length?l(null,r.shift()):n?l(n):i=l},sink(c){if(n)return s=null,c(n,()=>{});s=c,$6.drain(l=>{if(n)return!1;t.write(l)},l=>{t&&!t.writeEnd&&t.write(null,l||!0),a&&a(l)})(c)}}}function FT(t,e){return Sw(t,r=>{t.writeEnd||t.write(null,r||!0),e&&e(r)})}function U6(t){return FT(t).source}function B6(t,e){return FT(t,e).sink}Kl.exports=Sw;Kl.exports.source=U6;Kl.exports.sink=B6;Kl.exports.duplex=Sw});var $T=I((Ape,qT)=>{qT.exports=function(e){var r,n,o;function i(s){return function(a,c){s(a,function(l,u){if(l&&!o)return o=!0,c(null,e);l&&r?c(l):l?n=c:c(null,u)})}}return i.end=function(){return r=!0,n&&n(r),i},i}});var xw=I((Dpe,jT)=>{jT.exports=function(e,r,n){e(r),n&&n(r===!0?null:r)}});var Ap=I((Rpe,BT)=>{"use strict";var UT=xw();BT.exports=function(e,r){if(!e)return function(o,i){return o?UT(i,o,r):i(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(o){return e[o]}));var n=0;return function(o,i){if(o)return UT(i,o,r);n>=e.length?i(!0):i(null,e[n++])}}});var VT=I((Ope,HT)=>{"use strict";var H6=Ap();HT.exports=function(t){return H6(Object.keys(t))}});var Pw=I((Npe,WT)=>{"use strict";var V6=xw();WT.exports=function(e,r){return function(n,o){if(n)return V6(o,n,r);if(e!=null){var i=e;e=null,o(null,i)}else o(!0)}}});var zT=I((Lpe,GT)=>{"use strict";GT.exports=function(e){var r=0;return e=e||1/0,function(n,o){if(n)return o&&o(n);if(r>e)return o(!0);o(null,r++)}}});var YT=I((Fpe,KT)=>{"use strict";KT.exports=function(e){return e=e||Math.random,function(r,n){return r?n&&n(r):n(null,e())}}});var QT=I((Mpe,JT)=>{"use strict";JT.exports=function(){return function(e,r){r(!0)}}});var ZT=I((qpe,XT)=>{"use strict";XT.exports=function(e){return function(r,n){n(e)}}});var tA=I(($pe,eA)=>{"use strict";eA.exports={keys:VT(),once:Pw(),values:Ap(),count:zT(),infinite:YT(),empty:QT(),error:ZT()}});var Xa=I((jpe,rA)=>{"use strict";rA.exports=function(e,r){var n,o;function i(s){if(n=s,o)return i.abort();(function a(){for(var c=!0,l=!1;c;)if(l=!1,n(null,function(u,d){if(l=!0,u=u||o){if(c=!1,r)r(u===!0?null:u);else if(u&&u!==!0)throw u}else e&&e(d)===!1||o?(c=!1,n(o||!0,r||function(){})):c||a()}),!l){c=!1;return}})()}return i.abort=function(s,a){if(typeof s=="function"&&(a=s,s=!0),o=s||!0,n)return n(o,a||function(){})},i}});var oA=I((Upe,nA)=>{"use strict";var W6=Xa();nA.exports=function(e){return W6(null,e)}});var sA=I((Bpe,iA)=>{"use strict";var G6=Xa();iA.exports=function(e){return G6(function(r){console.log(r)},e)}});var Za=I((Hpe,aA)=>{aA.exports=function(e){return e&&(typeof e=="string"?function(r){return r[e]}:typeof e=="object"&&typeof e.exec=="function"?function(r){var n=e.exec(r);return n&&n[0]}:e)}});var uA=I((Vpe,lA)=>{"use strict";function cA(t){return t}var z6=Za(),K6=Xa();lA.exports=function(e,r){var n=!1;return r?e=z6(e)||cA:(r=e,e=cA),K6(function(o){if(e(o))return n=!0,r(null,o),!1},function(o){n||r(o===!0?null:o,null)})}});var Dp=I((Wpe,dA)=>{"use strict";var Y6=Xa();dA.exports=function(e,r,n){n||(n=r,r=null);var o=Y6(function(i){r=e(r,i)},function(i){n(i,r)});return arguments.length===2?function(i){i(null,function(s,a){if(s)return n(s===!0?null:s);r=a,o(i)})}:o}});var pA=I((Gpe,fA)=>{"use strict";var J6=Dp();fA.exports=function(e){return J6(function(r,n){return r.push(n),r},[],e)}});var mA=I((zpe,hA)=>{"use strict";var Q6=Dp();hA.exports=function(e){return Q6(function(r,n){return r+n},"",e)}});var vA=I((Kpe,gA)=>{"use strict";gA.exports={drain:Xa(),onEnd:oA(),log:sA(),find:uA(),reduce:Dp(),collect:pA(),concat:mA()}});var wA=I((Ype,yA)=>{"use strict";function X6(t){return t}var Z6=Za();yA.exports=function(e){return e?(e=Z6(e),function(r){return function(n,o){r(n,function(i,s){try{s=i?null:e(s)}catch(a){return r(a,function(){return o(a)})}o(i,s)})}}):X6}});var bA=I((Jpe,CA)=>{"use strict";function e9(t){return t}var t9=Za();CA.exports=function(e){if(!e)return e9;e=t9(e);var r=!1,n,o;return function(i){return function s(a,c){if(o)return c(o);a?(o=a,r?i(a,function(){r?n=c:c(a)}):i(a,c)):i(null,function(l,u){l?c(l):o?c(o):(r=!0,e(u,function(d,f){r=!1,o?(c(o),n(o)):d?s(d,c):c(null,f)}))})}}}});var kw=I((Qpe,EA)=>{var r9=Za();function n9(t){return t}EA.exports=function(e){return typeof e=="object"&&typeof e.test=="function"?function(r){return e.test(r)}:r9(e)||n9}});var Rp=I((Xpe,_A)=>{"use strict";var o9=kw();_A.exports=function(e){return e=o9(e),function(r){return function n(o,i){for(var s,a=!0;a;)a=!1,s=!0,r(o,function(c,l){if(!c&&!e(l))return s?a=!0:n(c,i);i(c,l)}),s=!1}}}});var xA=I((Zpe,SA)=>{"use strict";var i9=kw(),s9=Rp();SA.exports=function(e){return e=i9(e),s9(function(r){return!e(r)})}});var kA=I((ehe,PA)=>{"use strict";PA.exports=function(e,r){var n=!1;function o(i){n||!r||(n=!0,r(i===!0?null:i))}return function(i){return function(s,a){return s&&o(s),i(s,function(c,l){c?o(c):e&&e(l),a(c,l)})}}}});var TA=I((the,IA)=>{"use strict";IA.exports=function(e,r){r=r||{};var n=r.last||!1,o=!1;if(typeof e=="number"){n=!0;var i=e;e=function(){return--i}}return function(s){function a(c){s(!0,function(l){n=!1,c(l||!0)})}return function(c,l){o?n?a(l):l(o):(o=c)?s(o,l):s(null,function(u,d){(o=o||u)?l(o):e(d)?l(null,d):(o=!0,n?l(null,d):a(l))})}}}});var Iw=I((rhe,AA)=>{"use strict";function a9(t){return t}var c9=Za(),l9=Rp();AA.exports=function(e,r){e=c9(e)||a9;var n={};return l9(function(o){var i=e(o);return n[i]?!!r:(n[i]=!0,!r)})}});var RA=I((nhe,DA)=>{"use strict";var u9=Iw();DA.exports=function(e){return u9(e,!0)}});var NA=I((ohe,OA)=>{"use strict";var d9=Ap(),f9=Pw();OA.exports=function(){return function(e){var r;return function(n,o){n?r?r(n,function(a){e(a||n,o)}):e(n,o):r?i():s();function i(){r(null,function(a,c){a===!0?s():a?e(!0,function(l){o(a)}):o(null,c)})}function s(){r=null,e(null,function(a,c){if(a)return o(a);Array.isArray(c)||c&&typeof c=="object"?c=d9(c):typeof c!="function"&&(c=f9(c)),r=c,i()})}}}}});var FA=I((ihe,LA)=>{"use strict";LA.exports={map:wA(),asyncMap:bA(),filter:Rp(),filterNot:xA(),through:kA(),take:TA(),unique:Iw(),nonUnique:RA(),flatten:NA()}});var qA=I((she,MA)=>{"use strict";MA.exports=function t(e){var r=arguments.length;if(typeof e=="function"&&e.length===1){for(var n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var i=e;i&&typeof i.source=="function"&&(i=i.source);for(var o=1;o<r;o++){var s=arguments[o];typeof s=="function"?i=s(i):s&&typeof s=="object"&&(s.sink(i),i=s.source)}return i}});var HA=I((Yl,BA)=>{"use strict";var $A=tA(),jA=vA(),UA=FA();Yl=BA.exports=qA();for(Rn in $A)Yl[Rn]=$A[Rn];var Rn;for(Rn in UA)Yl[Rn]=UA[Rn];var Rn;for(Rn in jA)Yl[Rn]=jA[Rn];var Rn});var WA=I((ahe,VA)=>{var p9=$T(),Tw=HA();VA.exports=function(t,e){e=e||"GOODBYE";var r=p9(e);return{source:Tw(t.source,r),sink:Tw(Tw.filter(function(n){if(n!==e)return!0;r.end()}),t.sink)}}});var Jl=I(On=>{"use strict";var Op=kp();function h9(t){return t?Object.keys(t).length===0:!0}On.set=function(e,r,n){let o,i;for(let s=0;s<r.length;s++){let a=r[s];e[a]=e[a]||{},o=e,i=a,e=e[a]}o[i]=n};On.get=function(e,r){if(typeof r=="string")return e[r];let n;for(let o=0;o<r.length;o++){let i=r[o];if(n=e=e[i],e==null)return e}return n};On.prefix=function(e,r){let n;for(let o=0;o<r.length;o++){let i=r[o];if(n=e=e[i],typeof e!="object")return e}return typeof n!="object"?!!n:!1};function m9(t,e){for(let r in e){let n=e[r];t[n]||(t[n]={}),t=t[n]}return t}function g9(t,e){(function r(n,o){let i=e[o];if(n)e.length-1===o?delete n[i]:o<e.length&&r(n[i],o+1);else return;h9(n[i])&&delete n[i]})(t,0)}function v9(t,e){for(let r in e)t[r]=e[r];return t}On.mount=function(e,r,n){if(!Array.isArray(r))throw new Error("path must be array of strings");return v9(m9(e,r),n)};On.unmount=function(e,r){return g9(e,r)};var Np=t=>t==="source",Lp=t=>t==="sink",GA=t=>t==="duplex",y9=t=>t==="sync",w9=t=>t==="async",zA=t=>y9(t)||w9(t),C9=t=>Np(t)||Lp(t)||GA(t);On.isRequest=zA;On.isStream=C9;function Aw(t){return function(e){e(t||!0,()=>{})}}function KA(t){return{source:Op.error(t),sink:Aw(t)}}On.errorAsStream=function(e,r){return Np(e)?Op.error(r):Lp(e)?Aw(r):KA(r)};On.errorAsStreamOrCb=function(e,r,n){return zA(e)?n(r):Np(e)?Op.error(r):Lp(e)?Aw(r):n(r),KA(r)};On.pipeToStream=function(e,r,n){Np(e)?r(n):Lp(e)?n(r):GA(e)&&Op(r,n,r)}});var Dw=I((uhe,JA)=>{function YA(t){if(t.stack&&t.name&&t.message)return t.stack.substring(t.name.length+3+t.message.length).split(`
`);if(t.stack)return t.stack.split(`
`)}function b9(t,e){return t.filter(function(r){return!~e.indexOf(r)})}var lhe=JA.exports=function(t,e){if(!(t.stack&&t.name&&t.message))return console.error(new Error("stackless error")),t;var r=new Error(e),n=b9(YA(r).slice(1),YA(t)).join(`
`);return r.__proto__=t,r.stack=r.name+": "+r.message+`
`+n+`
  `+t.stack,r}});var ZA=I((dhe,XA)=>{"use strict";var E9=LT(),Rw=MT(),_9=WA(),ec=Jl(),QA=Dw();XA.exports=function(e,r,n){let o=E9({message(){},request(s,a){if(!Array.isArray(s.args))return a(new Error(`invalid request, args should be array, was: ${JSON.stringify(s)}`));let c=s.name,l=s.args,u=!1,d=!1;l.push((f,p)=>{d=!0,u=!0,a(f,p)});try{e("async",c,l)}catch(f){if(u||d)throw QA(f,"no callback provided to muxrpc async funtion");a(f)}},stream(s){s.read=function(c,l){if(l)return s.write(null,l);let{name:u,type:d,args:f}=c,p,h;if(s.read=null,!ec.isStream(d))return s.write(null,new Error(`unsupported stream type: ${d}`));try{h=e(d,u,f)}catch(v){p=v}let g=Rw[d==="source"?"sink":d==="sink"?"source":"duplex"](s);return ec.pipeToStream(d,g,p?ec.errorAsStream(d,p):h)}},close(s){if(o=null,i.ended=!0,!i.closed&&(i.closed=!0,n)){let a=n;n=null,a(s)}}}),i=_9(Rw(o,()=>{}));return i=r?r(i):i,i.remoteCall=function(s,a,c,l){if(a==="emit")return o.message(c);if(!(ec.isRequest(s)||ec.isStream(s)))throw new Error(`unsupported type: ${JSON.stringify(s)}`);if(ec.isRequest(s))return o.request({name:a,args:c},l);let u=o.stream(),d=Rw[s](u,l);return u.write({name:a,args:c,type:s}),d},i.isOpen=function(){return!o.ended},i.close=function(s,a){if(typeof s=="function"&&(a=s,s=!1),!o){a&&a();return}if(s){o.destroy(s),a&&a();return}return o.close(c=>{if(a)a(c);else if(c)throw QA(c,"no callback provided for muxrpc close")}),this},i.closed=!1,i}});var tD=I((fhe,eD)=>{"use strict";var S9=Dw(),x9=Jl();function Ow(t,e,r,n){for(let o in e){let i=e[o],s=r?r.concat(o):[o];if(i&&typeof i=="object"){let a=i;t[o]=Ow({},a,s,n)}else{let a=i;t[o]=(...c)=>n(a,s,c)}}return t}function P9(t){if(t)throw S9(t,"callback not provided")}function k9(t,e,r,n){t=t||{};function o(i,s,a){let c=typeof a[a.length-1]=="function"?a.pop():i==="sync"||i==="async"?null:P9;if(typeof c=="function"){let l;try{l=r(i,s,a,c)}catch(u){return x9.errorAsStreamOrCb(i,u,c)}return l}else return new Promise((l,u)=>{r(i,s,a,(d,f)=>{d?u(d):l(f)})})}return n?o("async","manifest",[function(i,s){if(i)return n(i);Ow(t,s,null,o),n(null,s,t)}]):Ow(t,e,null,o),t}eD.exports=k9});var oD=I((phe,nD)=>{"use strict";var Fp=Jl();function rD(t){return Array.isArray(t)?t:t.split(".")}function I9(t){return t&&typeof t.pre=="function"&&typeof t.test=="function"&&typeof t.post=="function"}nD.exports=function(e){if(I9(e))return e;if(typeof e=="function")return{pre:e};let r=null,n={};function o(i){if(i.allow){r={};for(let s of i.allow)Fp.set(r,rD(s),!0)}else r=null;if(i.deny)for(let s of i.deny)Fp.set(n,rD(s),!0);else n={};return this}return e&&o(e),o.pre=i=>{if(i=Array.isArray(i)?i:[i],r&&!Fp.prefix(r,i))return new Error(`method:${i} is not in list of allowed methods`);if(n&&Fp.prefix(n,i))return new Error(`method:${i} is on list of disallowed methods`)},o.post=()=>{},o.test=i=>o.pre(i),o.get=()=>({allow:r,deny:n}),o}});var sD=I((hhe,iD)=>{"use strict";var T9=oD(),Nw=Jl();iD.exports=function(e,r,n){n=T9(n);function o(s,a){return s===Nw.get(r,a)}function i(s,a,c){if(a==="emit")throw new Error("emit has been removed");if(s==="async"&&o("sync",a)){let l=c.pop(),u;try{u=Nw.get(e,a).apply(this,c)}catch(d){return l(d)}return l(null,u)}if(!o(s,a))throw new Error(`no ${s}:${a}`);return Nw.get(e,a).apply(this,c)}return function(a,c,l){let u=n.pre(c,l);if(u)throw u;return i.call(this,a,c,l)}}});var lD=I((mhe,cD)=>{"use strict";var A9=RT(),D9=require("events").EventEmitter,R9=ZA(),O9=tD(),N9=sD();function aD(t,e,r,n,o,i,s){let a;typeof t=="function"&&(a=t,t={}),e=e||{},t=t||{};let c=new D9;i||(i=A9);let l,u={_emit(f,p){return c&&c._emit(f,p),u},id:n},d=R9(N9(r,e,o).bind(u),i,f=>{if(!c.closed&&(c.closed=!0,c.emit("closed"),l)){let p=l;l=null,p(f)}});if(O9(c,t,(f,p,h,m)=>{if(d.closed)throw new Error("stream is closed");return d.remoteCall(f,p,h,m)},a),c._emit=c.emit,s){Object.__defineGetter__.call(c,"id",()=>u.id),Object.__defineSetter__.call(c,"id",p=>{u.id=p});let f=!0;c.createStream=p=>{if(l=p,f)return f=!1,d;throw new Error("one stream per rpc")}}else c.stream=d;return c.closed=!1,c.close=function(f,p){return d.close(f,p),this},c}cD.exports=function(t,e,r){return arguments.length>3?aD.apply(this,arguments):function(n,o,i){return aD(t,e,n,i,o,r,!0)}}});var Lw=I((No,fD)=>{var ghe=pw(),L9=_w();function uD(t){t.destroy?t.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function dD(t,e,r){var n,o=!1,i;function s(){i||(i=!0,r&&r(n===!0?null:n))}function a(){o||(o=!0,l(),n?s():t(n=!0,s))}function c(u){l(),n||t(n=u,s)}function l(){e.on("finish",a),e.removeListener("close",a),e.removeListener("error",c)}e.on("close",a),e.on("finish",a),e.on("error",c),process.nextTick(function(){L9(function(u){t(null,function(d,f){if(n=n||d,d===!0)return e._isStdio?s():e.end();if(n=n||d)return uD(e),s(n);if(e._isStdio)e.write(f,function(){u()});else{var p=e.write(f);p===!1?e.once("drain",u):u()}})})})}function F9(t){var e=!1,r=!1,n;function o(){var i=t.read();if(i!==null&&n){var s=n;n=null,s(null,i)}}return t.on("readable",function(){r=!0,n&&o()}).on("end",function(){e=!0,n&&n(e)}).on("error",function(i){e=i,n&&n(e)}),function(i,s){n=s,e?s(e):r&&o()}}function Mp(t){var e=[],r=[],n,o=!1,i;function s(){for(;(e.length||n)&&r.length;)r.shift()(e.length?null:n,e.shift());!e.length&&o&&(o=!1,t.resume())}return t.on("data",function(a){e.push(a),s(),e.length&&t.pause&&(o=!0,t.pause())}),t.on("end",function(){n=!0,s()}),t.on("close",function(){n=!0,s()}),t.on("error",function(a){n=a,s()}),function(a,c){if(!c)throw new Error("*must* provide cb");if(a){let u=function(){for(;r.length;)r.shift()(a);c(a)};var l=u;if(n)return u();t.once("close",u),uD(t)}else r.push(c),s()}}var M9=Mp,qp=function(t,e){return function(r){return dD(r,t,e)}},$p=function(t){return Mp(t)};No=fD.exports=function(t,e){return t.writable&&t.write?t.readable?function(r){return dD(r,t,e),Mp(t)}:qp(t,e):$p(t)};No.sink=qp;No.source=$p;No.read=M9;No.read1=Mp;No.read2=F9;No.duplex=function(t,e){return{source:$p(t),sink:qp(t,e)}};No.transform=function(t){return function(e){var r=$p(t);return qp(t)(e),r}}});var hD=I((vhe,jp)=>{var q9=require("stream");jp.exports=Fw;jp.exports.source=function(t){return Fw(null,t)};jp.exports.sink=function(t){return Fw(t,null)};var pD=typeof setImmediate=="undefined"?process.nextTick:setImmediate;function Fw(t,e){t&&typeof t=="object"&&(e=t.source,t=t.sink);var r=[],n=[],o,i,s=new q9;s.writable=s.readable=!0,s.write=function(g){return r.length?r.shift()(null,g):n.push(g),r.length||(i=!0),!!r.length},s.end=function(){e?n.length?m():e(o=!0,r.length?r.shift():function(){}):r.length&&r.shift()(!0)},s.source=function(g,v){n.length?(v(null,n.shift()),n.length||s.emit("drain")):((o=o||g)?v(o):r.push(v),i&&(i=!1,s.emit("drain")))};var a;t&&(a=t(s.source)),a&&!e&&(e=a);var c=[],l=[],u=!1,d=!1,f=!1;if(s.sink=function(g){e=g,pD(m)},e){s.sink(e),s.paused=!0;var p=s.on.bind(s);s.on=(g,v)=>{var y=p(g,v);return g==="data"&&s.paused&&pD(s.resume.bind(s)),y};var h=s.pipe.bind(s);s.pipe=function(g,v){var y=h(g,v);return s.paused&&s.resume(),y}}function m(){if(d=!1,!(!e||f)){for(;c.length&&!s.paused;)s.emit("data",c.shift());if(!s.paused){if(u)return s.emit("end");f=!0,e(null,function g(v,y){f=!1,s.paused?(v===!0?u=v:v?s.emit("error",v):c.push(y),d=!0):v&&(o=v)!==!0?s.emit("error",v):(o=o||v)?s.emit("end"):(s.emit("data",y),f=!0,e(null,g))})}}}return s.pause=function(){return s.paused=!0,s},s.resume=function(){return s.paused=!1,m(),s},s.destroy=function(){!o&&e&&e(o=!0,function(){}),o=!0,r.length&&r.shift()(!0),s.emit("close")},s}});var gD=I((yhe,mD)=>{mD.exports=$9;function $9(t,e){typeof t=="function"&&(e=t,t=!1);var r=[],n,o;function i(d,f){d&&(n=d,o&&u(n)),o=f,l()}var s;function a(d){s=s||d||!0,l()}function c(d){if(!s){if(o){u(n,d);return}r.push(d)}}if(t)return{push:c,end:a,source:i,buffer:r};return i.push=c,i.end=a,i.buffer=r,i;function l(){!o||(n?u(n):!r.length&&s?u(s):r.length&&u(null,r.shift()))}function u(d,f){var p=o;if(d&&e){var h=e;e=null,h(d===!0?null:d)}o=null,p(d,f)}}});var Xw=I((Wme,HD)=>{"use strict";var UD=require("child_process"),aK=1024*1024,BD={exec(t,e){UD.exec(t,{maxBuffer:2*aK,windowsHide:!0},e)},spawn(t,e,r){return UD.spawn(t,e,r)},stripLine(t,e){let r=0;for(;e-- >0;){let n=t.indexOf(`
`,r);n>=0&&(r=n+1)}return r>0?t.substring(r):t},split(t,e){let r=t.trim().split(/\s+/);return r.length>e&&(r[e-1]=r.slice(e-1).join(" ")),r},extractColumns(t,e,r){let n=t.split(/(\r\n|\n|\r)/),o=[];return r||(r=Math.max.apply(null,e)+1),n.forEach(i=>{let s=BD.split(i,r),a=[];e.forEach(c=>{a.push(s[c]||"")}),o.push(a)}),o},parseTable(t){let e=t.split(/(\r\n\r\n|\r\n\n|\n\r\n)|\n\n/).filter(r=>r.trim().length>0).map(r=>r.split(/(\r\n|\n|\r)/).filter(n=>n.trim().length>0));return e.forEach(r=>{for(let n=0;r[n];){let o=r[n];o.startsWith(" ")?(r[n-1]+=o.trimLeft(),r.splice(n,1)):n+=1}}),e.map(r=>{let n={};return r.forEach(o=>{let i=o.indexOf(":"),s=o.slice(0,i).trim();n[s]=o.slice(i+1).trim()}),n})}};HD.exports=BD});var WD=I((Gme,VD)=>{"use strict";var cK=require("os"),eh=require("fs"),fn=Xw(),lK=t=>new Promise((e,r)=>{eh.existsSync(t)?e():eh.mkdir(t,n=>{n?r(n):e()})}),Zw={darwin(t){return new Promise((e,r)=>{fn.exec("netstat -anv -p TCP && netstat -anv -p UDP",function(n,o,i){if(n)r(n);else{if(n=i.toString().trim(),n){r(n);return}let s=fn.stripLine(o.toString(),2),a=fn.extractColumns(s,[0,3,8],10).filter(c=>!!String(c[0]).match(/^(udp|tcp)/)).find(c=>{let l=String(c[1]).match(/\.(\d+)$/);if(l&&l[1]===String(t))return!0});a&&a[2].length?e(parseInt(a[2],10)):r(new Error(`pid of port (${t}) not found`))}})})},freebsd:"darwin",sunos:"darwin",linux(t){return new Promise((e,r)=>{let n="netstat -tunlp";fn.exec(n,function(o,i,s){if(o)r(o);else{let a=s.toString().trim();a&&console.warn(a);let c=fn.stripLine(i.toString(),2),l=fn.extractColumns(c,[3,6],7).find(u=>{let d=String(u[0]).match(/:(\d+)$/);if(d&&d[1]===String(t))return!0});if(l&&l[1]){let u=l[1].split("/",1)[0];u.length?e(parseInt(u,10)):r(new Error(`pid of port (${t}) not found`))}else r(new Error(`pid of port (${t}) not found`))}})})},win32(t){return new Promise((e,r)=>{fn.exec("netstat -ano",function(n,o,i){if(n)r(n);else{if(n=i.toString().trim(),n){r(n);return}let s=fn.stripLine(o.toString(),4),a=fn.extractColumns(s,[1,4],5).find(c=>{let l=String(c[0]).match(/:(\d+)$/);if(l&&l[1]===String(t))return!0});a&&a[1].length&&parseInt(a[1],10)>0?e(parseInt(a[1],10)):r(new Error(`pid of port (${t}) not found`))}})})},android(t){return new Promise((e,r)=>{let n=cK.tmpdir()+"/.find-process",o=n+"/"+process.pid,i='netstat -tunp >> "'+o+'"';lK(n).then(()=>{fn.exec(i,()=>{eh.readFile(o,"utf8",(s,a)=>{if(eh.unlink(o,()=>{}),s)r(s);else{a=fn.stripLine(a,2);let c=fn.extractColumns(a,[3,6],7).find(l=>{let u=String(l[0]).match(/:(\d+)$/);if(u&&u[1]===String(t))return!0});if(c&&c[1]){let l=c[1].split("/",1)[0];l.length?e(parseInt(l,10)):r(new Error(`pid of port (${t}) not found`))}else r(new Error(`pid of port (${t}) not found`))}})})})})}};function uK(t){let e=process.platform;return new Promise((r,n)=>{if(!(e in Zw))return n(new Error(`platform ${e} is unsupported`));let o=Zw[e];typeof o=="string"&&(o=Zw[o]),o(t).then(r,n)})}VD.exports=uK});var YD=I((zme,KD)=>{"use strict";var th=require("path"),Pi=Xw();function eC(t,e){return e?t&&t.match?t.match(e):!1:!0}function GD(t){let e=t.split(th.sep),r=e[e.length-1];r&&(e[e.length-1]=r.split(" ")[0]);let n=[];for(let o of e){let i=o.indexOf(" -");if(i>=0){n.push(o.substring(0,i).trim());break}else if(o.endsWith(" ")){n.push(o.trim());break}n.push(o)}return n.join(th.sep)}function zD(t){if(process.platform==="darwin"){let e=t.indexOf(".app/");if(e>=0)return th.basename(t.substring(0,e))}return th.basename(t)}var tC={darwin(t){return new Promise((e,r)=>{let n;"pid"in t?n=`ps -p ${t.pid} -ww -o pid,ppid,uid,gid,args`:n="ps ax -ww -o pid,ppid,uid,gid,args",Pi.exec(n,function(o,i,s){if(o)"pid"in t?e([]):r(o);else{if(o=s.toString().trim(),o){r(o);return}let a=Pi.stripLine(i.toString(),1),l=Pi.extractColumns(a,[0,1,2,3,4],5).filter(u=>u[0]&&t.pid?u[0]===String(t.pid):u[4]&&t.name?eC(u[4],t.name):!!u[0]).map(u=>{let d=String(u[4]),f=GD(d);return{pid:parseInt(u[0],10),ppid:parseInt(u[1],10),uid:parseInt(u[2],10),gid:parseInt(u[3],10),name:zD(f),bin:f,cmd:u[4]}});t.strict&&t.name&&(l=l.filter(u=>u.name===t.name)),e(l)}})})},linux:"darwin",sunos:"darwin",freebsd:"darwin",win32(t){return new Promise((e,r)=>{let n="Get-CimInstance -className win32_process | select Name,ProcessId,ParentProcessId,CommandLine,ExecutablePath",o=[],i=Pi.spawn("powershell.exe",["/c",n],{detached:!1,windowsHide:!0});i.stdout.on("data",s=>{o.push(s.toString())}),i.on("close",s=>{if(s!==0)return r(new Error("Command '"+n+"' terminated with code: "+s));let a=Pi.parseTable(o.join("")).filter(c=>{if("pid"in t)return c.ProcessId===String(t.pid);if(t.name){let l=c.Name||"";return t.strict?l===t.name||l.endsWith(".exe")&&l.slice(0,-4)===t.name:eC(c.CommandLine||l,t.name)}else return!0}).map(c=>({pid:parseInt(c.ProcessId,10),ppid:parseInt(c.ParentProcessId,10),bin:c.ExecutablePath,name:c.Name||"",cmd:c.CommandLine}));e(a)})})},android(t){return new Promise((e,r)=>{let n="ps";Pi.exec(n,function(o,i,s){if(o)"pid"in t?e([]):r(o);else{if(o=s.toString().trim(),o){r(o);return}let a=Pi.stripLine(i.toString(),1),l=Pi.extractColumns(a,[0,3],4).filter(u=>u[0]&&t.pid?u[0]===String(t.pid):u[1]&&t.name?eC(u[1],t.name):!!u[0]).map(u=>{let d=String(u[1]),f=GD(d);return{pid:parseInt(u[0],10),name:zD(f),bin:f,cmd:d}});t.strict&&t.name&&(l=l.filter(u=>u.name===t.name)),e(l)}})})}};function dK(t){let e=process.platform;return new Promise((r,n)=>{if(!(e in tC))return n(new Error(`platform ${e} is unsupported`));let o=tC[e];typeof o=="string"&&(o=tC[o]),o(t).then(r,n)})}KD.exports=dK});var XD=I((Kme,QD)=>{"use strict";var fK=WD(),JD=YD(),rC={port(t,e){return fK(t,e).then(r=>rC.pid(r,e),()=>[])},pid(t,e){return JD({pid:t,strict:e})},name(t,e){return JD({name:t,strict:e})}};function pK(t,e,r){return new Promise((n,o)=>{if(!(t in rC))o(new Error(`do not support find by "${t}"`));else{let i=/^\d+$/.test(e);t==="pid"&&!i?o(new Error("pid must be a number")):t==="port"&&!i?o(new Error("port must be a number")):rC[t](e,r).then(n,o)}})}QD.exports=pK});var eR=I((Yme,ZD)=>{"use strict";ZD.exports=XD()});var wu=I((Ave,OO)=>{var yY="2.0.0",wY=256,CY=Number.MAX_SAFE_INTEGER||9007199254740991,bY=16;OO.exports={SEMVER_SPEC_VERSION:yY,MAX_LENGTH:wY,MAX_SAFE_INTEGER:CY,MAX_SAFE_COMPONENT_LENGTH:bY}});var Cu=I((Dve,NO)=>{var EY=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};NO.exports=EY});var Ks=I((Oi,LO)=>{var{MAX_SAFE_COMPONENT_LENGTH:MC}=wu(),_Y=Cu();Oi=LO.exports={};var SY=Oi.re=[],ue=Oi.src=[],de=Oi.t={},xY=0,Ae=(t,e,r)=>{let n=xY++;_Y(n,e),de[t]=n,ue[n]=e,SY[n]=new RegExp(e,r?"g":void 0)};Ae("NUMERICIDENTIFIER","0|[1-9]\\d*");Ae("NUMERICIDENTIFIERLOOSE","[0-9]+");Ae("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");Ae("MAINVERSION",`(${ue[de.NUMERICIDENTIFIER]})\\.(${ue[de.NUMERICIDENTIFIER]})\\.(${ue[de.NUMERICIDENTIFIER]})`);Ae("MAINVERSIONLOOSE",`(${ue[de.NUMERICIDENTIFIERLOOSE]})\\.(${ue[de.NUMERICIDENTIFIERLOOSE]})\\.(${ue[de.NUMERICIDENTIFIERLOOSE]})`);Ae("PRERELEASEIDENTIFIER",`(?:${ue[de.NUMERICIDENTIFIER]}|${ue[de.NONNUMERICIDENTIFIER]})`);Ae("PRERELEASEIDENTIFIERLOOSE",`(?:${ue[de.NUMERICIDENTIFIERLOOSE]}|${ue[de.NONNUMERICIDENTIFIER]})`);Ae("PRERELEASE",`(?:-(${ue[de.PRERELEASEIDENTIFIER]}(?:\\.${ue[de.PRERELEASEIDENTIFIER]})*))`);Ae("PRERELEASELOOSE",`(?:-?(${ue[de.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${ue[de.PRERELEASEIDENTIFIERLOOSE]})*))`);Ae("BUILDIDENTIFIER","[0-9A-Za-z-]+");Ae("BUILD",`(?:\\+(${ue[de.BUILDIDENTIFIER]}(?:\\.${ue[de.BUILDIDENTIFIER]})*))`);Ae("FULLPLAIN",`v?${ue[de.MAINVERSION]}${ue[de.PRERELEASE]}?${ue[de.BUILD]}?`);Ae("FULL",`^${ue[de.FULLPLAIN]}$`);Ae("LOOSEPLAIN",`[v=\\s]*${ue[de.MAINVERSIONLOOSE]}${ue[de.PRERELEASELOOSE]}?${ue[de.BUILD]}?`);Ae("LOOSE",`^${ue[de.LOOSEPLAIN]}$`);Ae("GTLT","((?:<|>)?=?)");Ae("XRANGEIDENTIFIERLOOSE",`${ue[de.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Ae("XRANGEIDENTIFIER",`${ue[de.NUMERICIDENTIFIER]}|x|X|\\*`);Ae("XRANGEPLAIN",`[v=\\s]*(${ue[de.XRANGEIDENTIFIER]})(?:\\.(${ue[de.XRANGEIDENTIFIER]})(?:\\.(${ue[de.XRANGEIDENTIFIER]})(?:${ue[de.PRERELEASE]})?${ue[de.BUILD]}?)?)?`);Ae("XRANGEPLAINLOOSE",`[v=\\s]*(${ue[de.XRANGEIDENTIFIERLOOSE]})(?:\\.(${ue[de.XRANGEIDENTIFIERLOOSE]})(?:\\.(${ue[de.XRANGEIDENTIFIERLOOSE]})(?:${ue[de.PRERELEASELOOSE]})?${ue[de.BUILD]}?)?)?`);Ae("XRANGE",`^${ue[de.GTLT]}\\s*${ue[de.XRANGEPLAIN]}$`);Ae("XRANGELOOSE",`^${ue[de.GTLT]}\\s*${ue[de.XRANGEPLAINLOOSE]}$`);Ae("COERCE",`(^|[^\\d])(\\d{1,${MC}})(?:\\.(\\d{1,${MC}}))?(?:\\.(\\d{1,${MC}}))?(?:$|[^\\d])`);Ae("COERCERTL",ue[de.COERCE],!0);Ae("LONETILDE","(?:~>?)");Ae("TILDETRIM",`(\\s*)${ue[de.LONETILDE]}\\s+`,!0);Oi.tildeTrimReplace="$1~";Ae("TILDE",`^${ue[de.LONETILDE]}${ue[de.XRANGEPLAIN]}$`);Ae("TILDELOOSE",`^${ue[de.LONETILDE]}${ue[de.XRANGEPLAINLOOSE]}$`);Ae("LONECARET","(?:\\^)");Ae("CARETTRIM",`(\\s*)${ue[de.LONECARET]}\\s+`,!0);Oi.caretTrimReplace="$1^";Ae("CARET",`^${ue[de.LONECARET]}${ue[de.XRANGEPLAIN]}$`);Ae("CARETLOOSE",`^${ue[de.LONECARET]}${ue[de.XRANGEPLAINLOOSE]}$`);Ae("COMPARATORLOOSE",`^${ue[de.GTLT]}\\s*(${ue[de.LOOSEPLAIN]})$|^$`);Ae("COMPARATOR",`^${ue[de.GTLT]}\\s*(${ue[de.FULLPLAIN]})$|^$`);Ae("COMPARATORTRIM",`(\\s*)${ue[de.GTLT]}\\s*(${ue[de.LOOSEPLAIN]}|${ue[de.XRANGEPLAIN]})`,!0);Oi.comparatorTrimReplace="$1$2$3";Ae("HYPHENRANGE",`^\\s*(${ue[de.XRANGEPLAIN]})\\s+-\\s+(${ue[de.XRANGEPLAIN]})\\s*$`);Ae("HYPHENRANGELOOSE",`^\\s*(${ue[de.XRANGEPLAINLOOSE]})\\s+-\\s+(${ue[de.XRANGEPLAINLOOSE]})\\s*$`);Ae("STAR","(<|>)?=?\\s*\\*");Ae("GTE0","^\\s*>=\\s*0.0.0\\s*$");Ae("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")});var bu=I((Rve,FO)=>{var PY=["includePrerelease","loose","rtl"],kY=t=>t?typeof t!="object"?{loose:!0}:PY.filter(e=>t[e]).reduce((e,r)=>(e[r]=!0,e),{}):{};FO.exports=kY});var Dh=I((Ove,$O)=>{var MO=/^[0-9]+$/,qO=(t,e)=>{let r=MO.test(t),n=MO.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},IY=(t,e)=>qO(e,t);$O.exports={compareIdentifiers:qO,rcompareIdentifiers:IY}});var cr=I((Nve,HO)=>{var Rh=Cu(),{MAX_LENGTH:jO,MAX_SAFE_INTEGER:Oh}=wu(),{re:UO,t:BO}=Ks(),TY=bu(),{compareIdentifiers:Eu}=Dh(),hn=class{constructor(e,r){if(r=TY(r),e instanceof hn){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>jO)throw new TypeError(`version is longer than ${jO} characters`);Rh("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?UO[BO.LOOSE]:UO[BO.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Oh||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Oh||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Oh||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){let i=+o;if(i>=0&&i<Oh)return i}return o}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Rh("SemVer.compare",this.version,this.options,e),!(e instanceof hn)){if(typeof e=="string"&&e===this.version)return 0;e=new hn(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof hn||(e=new hn(e,this.options)),Eu(this.major,e.major)||Eu(this.minor,e.minor)||Eu(this.patch,e.patch)}comparePre(e){if(e instanceof hn||(e=new hn(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],o=e.prerelease[r];if(Rh("prerelease compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return Eu(n,o)}while(++r)}compareBuild(e){e instanceof hn||(e=new hn(e,this.options));let r=0;do{let n=this.build[r],o=e.build[r];if(Rh("prerelease compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return Eu(n,o)}while(++r)}inc(e,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};HO.exports=hn});var Ys=I((Lve,zO)=>{var{MAX_LENGTH:AY}=wu(),{re:VO,t:WO}=Ks(),GO=cr(),DY=bu(),RY=(t,e)=>{if(e=DY(e),t instanceof GO)return t;if(typeof t!="string"||t.length>AY||!(e.loose?VO[WO.LOOSE]:VO[WO.FULL]).test(t))return null;try{return new GO(t,e)}catch{return null}};zO.exports=RY});var YO=I((Fve,KO)=>{var OY=Ys(),NY=(t,e)=>{let r=OY(t,e);return r?r.version:null};KO.exports=NY});var QO=I((Mve,JO)=>{var LY=Ys(),FY=(t,e)=>{let r=LY(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};JO.exports=FY});var ZO=I((qve,XO)=>{var MY=cr(),qY=(t,e,r,n)=>{typeof r=="string"&&(n=r,r=void 0);try{return new MY(t,r).inc(e,n).version}catch{return null}};XO.exports=qY});var mn=I(($ve,tN)=>{var eN=cr(),$Y=(t,e,r)=>new eN(t,r).compare(new eN(e,r));tN.exports=$Y});var Nh=I((jve,rN)=>{var jY=mn(),UY=(t,e,r)=>jY(t,e,r)===0;rN.exports=UY});var iN=I((Uve,oN)=>{var nN=Ys(),BY=Nh(),HY=(t,e)=>{if(BY(t,e))return null;{let r=nN(t),n=nN(e),o=r.prerelease.length||n.prerelease.length,i=o?"pre":"",s=o?"prerelease":"";for(let a in r)if((a==="major"||a==="minor"||a==="patch")&&r[a]!==n[a])return i+a;return s}};oN.exports=HY});var aN=I((Bve,sN)=>{var VY=cr(),WY=(t,e)=>new VY(t,e).major;sN.exports=WY});var lN=I((Hve,cN)=>{var GY=cr(),zY=(t,e)=>new GY(t,e).minor;cN.exports=zY});var dN=I((Vve,uN)=>{var KY=cr(),YY=(t,e)=>new KY(t,e).patch;uN.exports=YY});var pN=I((Wve,fN)=>{var JY=Ys(),QY=(t,e)=>{let r=JY(t,e);return r&&r.prerelease.length?r.prerelease:null};fN.exports=QY});var mN=I((Gve,hN)=>{var XY=mn(),ZY=(t,e,r)=>XY(e,t,r);hN.exports=ZY});var vN=I((zve,gN)=>{var e7=mn(),t7=(t,e)=>e7(t,e,!0);gN.exports=t7});var Lh=I((Kve,wN)=>{var yN=cr(),r7=(t,e,r)=>{let n=new yN(t,r),o=new yN(e,r);return n.compare(o)||n.compareBuild(o)};wN.exports=r7});var bN=I((Yve,CN)=>{var n7=Lh(),o7=(t,e)=>t.sort((r,n)=>n7(r,n,e));CN.exports=o7});var _N=I((Jve,EN)=>{var i7=Lh(),s7=(t,e)=>t.sort((r,n)=>i7(n,r,e));EN.exports=s7});var _u=I((Qve,SN)=>{var a7=mn(),c7=(t,e,r)=>a7(t,e,r)>0;SN.exports=c7});var Fh=I((Xve,xN)=>{var l7=mn(),u7=(t,e,r)=>l7(t,e,r)<0;xN.exports=u7});var qC=I((Zve,PN)=>{var d7=mn(),f7=(t,e,r)=>d7(t,e,r)!==0;PN.exports=f7});var Mh=I((eye,kN)=>{var p7=mn(),h7=(t,e,r)=>p7(t,e,r)>=0;kN.exports=h7});var qh=I((tye,IN)=>{var m7=mn(),g7=(t,e,r)=>m7(t,e,r)<=0;IN.exports=g7});var $C=I((rye,TN)=>{var v7=Nh(),y7=qC(),w7=_u(),C7=Mh(),b7=Fh(),E7=qh(),_7=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return v7(t,r,n);case"!=":return y7(t,r,n);case">":return w7(t,r,n);case">=":return C7(t,r,n);case"<":return b7(t,r,n);case"<=":return E7(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};TN.exports=_7});var DN=I((nye,AN)=>{var S7=cr(),x7=Ys(),{re:$h,t:jh}=Ks(),P7=(t,e)=>{if(t instanceof S7)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match($h[jh.COERCE]);else{let n;for(;(n=$h[jh.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),$h[jh.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;$h[jh.COERCERTL].lastIndex=-1}return r===null?null:x7(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,e)};AN.exports=P7});var qN=I((oye,MN)=>{"use strict";var k7=gl(),Js=Symbol("max"),Bo=Symbol("length"),yc=Symbol("lengthCalculator"),Su=Symbol("allowStale"),Qs=Symbol("maxAge"),Ho=Symbol("dispose"),RN=Symbol("noDisposeOnSet"),$t=Symbol("lruList"),Fn=Symbol("cache"),ON=Symbol("updateAgeOnGet"),jC=()=>1,NN=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[Js]=e.max||1/0,n=e.length||jC;if(this[yc]=typeof n!="function"?jC:n,this[Su]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Qs]=e.maxAge||0,this[Ho]=e.dispose,this[RN]=e.noDisposeOnSet||!1,this[ON]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Js]=e||1/0,xu(this)}get max(){return this[Js]}set allowStale(e){this[Su]=!!e}get allowStale(){return this[Su]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Qs]=e,xu(this)}get maxAge(){return this[Qs]}set lengthCalculator(e){typeof e!="function"&&(e=jC),e!==this[yc]&&(this[yc]=e,this[Bo]=0,this[$t].forEach(r=>{r.length=this[yc](r.value,r.key),this[Bo]+=r.length})),xu(this)}get lengthCalculator(){return this[yc]}get length(){return this[Bo]}get itemCount(){return this[$t].length}rforEach(e,r){r=r||this;for(let n=this[$t].tail;n!==null;){let o=n.prev;FN(this,e,n,r),n=o}}forEach(e,r){r=r||this;for(let n=this[$t].head;n!==null;){let o=n.next;FN(this,e,n,r),n=o}}keys(){return this[$t].toArray().map(e=>e.key)}values(){return this[$t].toArray().map(e=>e.value)}reset(){this[Ho]&&this[$t]&&this[$t].length&&this[$t].forEach(e=>this[Ho](e.key,e.value)),this[Fn]=new Map,this[$t]=new k7,this[Bo]=0}dump(){return this[$t].map(e=>Uh(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[$t]}set(e,r,n){if(n=n||this[Qs],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let o=n?Date.now():0,i=this[yc](r,e);if(this[Fn].has(e)){if(i>this[Js])return wc(this,this[Fn].get(e)),!1;let c=this[Fn].get(e).value;return this[Ho]&&(this[RN]||this[Ho](e,c.value)),c.now=o,c.maxAge=n,c.value=r,this[Bo]+=i-c.length,c.length=i,this.get(e),xu(this),!0}let s=new LN(e,r,i,o,n);return s.length>this[Js]?(this[Ho]&&this[Ho](e,r),!1):(this[Bo]+=s.length,this[$t].unshift(s),this[Fn].set(e,this[$t].head),xu(this),!0)}has(e){if(!this[Fn].has(e))return!1;let r=this[Fn].get(e).value;return!Uh(this,r)}get(e){return UC(this,e,!0)}peek(e){return UC(this,e,!1)}pop(){let e=this[$t].tail;return e?(wc(this,e),e.value):null}del(e){wc(this,this[Fn].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let o=e[n],i=o.e||0;if(i===0)this.set(o.k,o.v);else{let s=i-r;s>0&&this.set(o.k,o.v,s)}}}prune(){this[Fn].forEach((e,r)=>UC(this,r,!1))}},UC=(t,e,r)=>{let n=t[Fn].get(e);if(n){let o=n.value;if(Uh(t,o)){if(wc(t,n),!t[Su])return}else r&&(t[ON]&&(n.value.now=Date.now()),t[$t].unshiftNode(n));return o.value}},Uh=(t,e)=>{if(!e||!e.maxAge&&!t[Qs])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[Qs]&&r>t[Qs]},xu=t=>{if(t[Bo]>t[Js])for(let e=t[$t].tail;t[Bo]>t[Js]&&e!==null;){let r=e.prev;wc(t,e),e=r}},wc=(t,e)=>{if(e){let r=e.value;t[Ho]&&t[Ho](r.key,r.value),t[Bo]-=r.length,t[Fn].delete(r.key),t[$t].removeNode(e)}},LN=class{constructor(e,r,n,o,i){this.key=e,this.value=r,this.length=n,this.now=o,this.maxAge=i||0}},FN=(t,e,r,n)=>{let o=r.value;Uh(t,o)&&(wc(t,r),t[Su]||(o=void 0)),o&&e.call(n,o.value,o.key,t)};MN.exports=NN});var gn=I((iye,BN)=>{var Cc=class{constructor(e,r){if(r=T7(r),e instanceof Cc)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new Cc(e.raw,r);if(e instanceof BC)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(o=>!jN(o[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let o of this.set)if(o.length===1&&N7(o[0])){this.set=[o];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let n=`parseRange:${Object.keys(this.options).join(",")}:${e}`,o=$N.get(n);if(o)return o;let i=this.options.loose,s=i?lr[Kt.HYPHENRANGELOOSE]:lr[Kt.HYPHENRANGE];e=e.replace(s,V7(this.options.includePrerelease)),Ct("hyphen replace",e),e=e.replace(lr[Kt.COMPARATORTRIM],D7),Ct("comparator trim",e,lr[Kt.COMPARATORTRIM]),e=e.replace(lr[Kt.TILDETRIM],R7),e=e.replace(lr[Kt.CARETTRIM],O7),e=e.split(/\s+/).join(" ");let a=i?lr[Kt.COMPARATORLOOSE]:lr[Kt.COMPARATOR],c=e.split(" ").map(f=>L7(f,this.options)).join(" ").split(/\s+/).map(f=>H7(f,this.options)).filter(this.options.loose?f=>!!f.match(a):()=>!0).map(f=>new BC(f,this.options)),l=c.length,u=new Map;for(let f of c){if(jN(f))return[f];u.set(f.value,f)}u.size>1&&u.has("")&&u.delete("");let d=[...u.values()];return $N.set(n,d),d}intersects(e,r){if(!(e instanceof Cc))throw new TypeError("a Range is required");return this.set.some(n=>UN(n,r)&&e.set.some(o=>UN(o,r)&&n.every(i=>o.every(s=>i.intersects(s,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new A7(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(W7(this.set[r],e,this.options))return!0;return!1}};BN.exports=Cc;var I7=qN(),$N=new I7({max:1e3}),T7=bu(),BC=Pu(),Ct=Cu(),A7=cr(),{re:lr,t:Kt,comparatorTrimReplace:D7,tildeTrimReplace:R7,caretTrimReplace:O7}=Ks(),jN=t=>t.value==="<0.0.0-0",N7=t=>t.value==="",UN=(t,e)=>{let r=!0,n=t.slice(),o=n.pop();for(;r&&n.length;)r=n.every(i=>o.intersects(i,e)),o=n.pop();return r},L7=(t,e)=>(Ct("comp",t,e),t=q7(t,e),Ct("caret",t),t=F7(t,e),Ct("tildes",t),t=j7(t,e),Ct("xrange",t),t=B7(t,e),Ct("stars",t),t),mr=t=>!t||t.toLowerCase()==="x"||t==="*",F7=(t,e)=>t.trim().split(/\s+/).map(r=>M7(r,e)).join(" "),M7=(t,e)=>{let r=e.loose?lr[Kt.TILDELOOSE]:lr[Kt.TILDE];return t.replace(r,(n,o,i,s,a)=>{Ct("tilde",t,n,o,i,s,a);let c;return mr(o)?c="":mr(i)?c=`>=${o}.0.0 <${+o+1}.0.0-0`:mr(s)?c=`>=${o}.${i}.0 <${o}.${+i+1}.0-0`:a?(Ct("replaceTilde pr",a),c=`>=${o}.${i}.${s}-${a} <${o}.${+i+1}.0-0`):c=`>=${o}.${i}.${s} <${o}.${+i+1}.0-0`,Ct("tilde return",c),c})},q7=(t,e)=>t.trim().split(/\s+/).map(r=>$7(r,e)).join(" "),$7=(t,e)=>{Ct("caret",t,e);let r=e.loose?lr[Kt.CARETLOOSE]:lr[Kt.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(o,i,s,a,c)=>{Ct("caret",t,o,i,s,a,c);let l;return mr(i)?l="":mr(s)?l=`>=${i}.0.0${n} <${+i+1}.0.0-0`:mr(a)?i==="0"?l=`>=${i}.${s}.0${n} <${i}.${+s+1}.0-0`:l=`>=${i}.${s}.0${n} <${+i+1}.0.0-0`:c?(Ct("replaceCaret pr",c),i==="0"?s==="0"?l=`>=${i}.${s}.${a}-${c} <${i}.${s}.${+a+1}-0`:l=`>=${i}.${s}.${a}-${c} <${i}.${+s+1}.0-0`:l=`>=${i}.${s}.${a}-${c} <${+i+1}.0.0-0`):(Ct("no pr"),i==="0"?s==="0"?l=`>=${i}.${s}.${a}${n} <${i}.${s}.${+a+1}-0`:l=`>=${i}.${s}.${a}${n} <${i}.${+s+1}.0-0`:l=`>=${i}.${s}.${a} <${+i+1}.0.0-0`),Ct("caret return",l),l})},j7=(t,e)=>(Ct("replaceXRanges",t,e),t.split(/\s+/).map(r=>U7(r,e)).join(" ")),U7=(t,e)=>{t=t.trim();let r=e.loose?lr[Kt.XRANGELOOSE]:lr[Kt.XRANGE];return t.replace(r,(n,o,i,s,a,c)=>{Ct("xRange",t,n,o,i,s,a,c);let l=mr(i),u=l||mr(s),d=u||mr(a),f=d;return o==="="&&f&&(o=""),c=e.includePrerelease?"-0":"",l?o===">"||o==="<"?n="<0.0.0-0":n="*":o&&f?(u&&(s=0),a=0,o===">"?(o=">=",u?(i=+i+1,s=0,a=0):(s=+s+1,a=0)):o==="<="&&(o="<",u?i=+i+1:s=+s+1),o==="<"&&(c="-0"),n=`${o+i}.${s}.${a}${c}`):u?n=`>=${i}.0.0${c} <${+i+1}.0.0-0`:d&&(n=`>=${i}.${s}.0${c} <${i}.${+s+1}.0-0`),Ct("xRange return",n),n})},B7=(t,e)=>(Ct("replaceStars",t,e),t.trim().replace(lr[Kt.STAR],"")),H7=(t,e)=>(Ct("replaceGTE0",t,e),t.trim().replace(lr[e.includePrerelease?Kt.GTE0PRE:Kt.GTE0],"")),V7=t=>(e,r,n,o,i,s,a,c,l,u,d,f,p)=>(mr(n)?r="":mr(o)?r=`>=${n}.0.0${t?"-0":""}`:mr(i)?r=`>=${n}.${o}.0${t?"-0":""}`:s?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,mr(l)?c="":mr(u)?c=`<${+l+1}.0.0-0`:mr(d)?c=`<${l}.${+u+1}.0-0`:f?c=`<=${l}.${u}.${d}-${f}`:t?c=`<${l}.${u}.${+d+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),W7=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Ct(t[n].semver),t[n].semver!==BC.ANY&&t[n].semver.prerelease.length>0){let o=t[n].semver;if(o.major===e.major&&o.minor===e.minor&&o.patch===e.patch)return!0}return!1}return!0}});var Pu=I((sye,zN)=>{var ku=Symbol("SemVer ANY"),Iu=class{static get ANY(){return ku}constructor(e,r){if(r=G7(r),e instanceof Iu){if(e.loose===!!r.loose)return e;e=e.value}VC("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===ku?this.value="":this.value=this.operator+this.semver.version,VC("comp",this)}parse(e){let r=this.options.loose?HN[VN.COMPARATORLOOSE]:HN[VN.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new WN(n[2],this.options.loose):this.semver=ku}toString(){return this.value}test(e){if(VC("Comparator.test",e,this.options.loose),this.semver===ku||e===ku)return!0;if(typeof e=="string")try{e=new WN(e,this.options)}catch{return!1}return HC(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof Iu))throw new TypeError("a Comparator is required");if((!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new GN(e.value,r).test(this.value);if(e.operator==="")return e.value===""?!0:new GN(this.value,r).test(e.semver);let n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),o=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),i=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=HC(this.semver,"<",e.semver,r)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=HC(this.semver,">",e.semver,r)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||o||i&&s||a||c}};zN.exports=Iu;var G7=bu(),{re:HN,t:VN}=Ks(),HC=$C(),VC=Cu(),WN=cr(),GN=gn()});var Tu=I((aye,KN)=>{var z7=gn(),K7=(t,e,r)=>{try{e=new z7(e,r)}catch{return!1}return e.test(t)};KN.exports=K7});var JN=I((cye,YN)=>{var Y7=gn(),J7=(t,e)=>new Y7(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));YN.exports=J7});var XN=I((lye,QN)=>{var Q7=cr(),X7=gn(),Z7=(t,e,r)=>{let n=null,o=null,i=null;try{i=new X7(e,r)}catch{return null}return t.forEach(s=>{i.test(s)&&(!n||o.compare(s)===-1)&&(n=s,o=new Q7(n,r))}),n};QN.exports=Z7});var eL=I((uye,ZN)=>{var eJ=cr(),tJ=gn(),rJ=(t,e,r)=>{let n=null,o=null,i=null;try{i=new tJ(e,r)}catch{return null}return t.forEach(s=>{i.test(s)&&(!n||o.compare(s)===1)&&(n=s,o=new eJ(n,r))}),n};ZN.exports=rJ});var nL=I((dye,rL)=>{var WC=cr(),nJ=gn(),tL=_u(),oJ=(t,e)=>{t=new nJ(t,e);let r=new WC("0.0.0");if(t.test(r)||(r=new WC("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let o=t.set[n],i=null;o.forEach(s=>{let a=new WC(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||tL(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),i&&(!r||tL(r,i))&&(r=i)}return r&&t.test(r)?r:null};rL.exports=oJ});var iL=I((fye,oL)=>{var iJ=gn(),sJ=(t,e)=>{try{return new iJ(t,e).range||"*"}catch{return null}};oL.exports=sJ});var Bh=I((pye,lL)=>{var aJ=cr(),sL=Pu(),{ANY:cJ}=sL,lJ=gn(),uJ=Tu(),aL=_u(),cL=Fh(),dJ=qh(),fJ=Mh(),pJ=(t,e,r,n)=>{t=new aJ(t,n),e=new lJ(e,n);let o,i,s,a,c;switch(r){case">":o=aL,i=dJ,s=cL,a=">",c=">=";break;case"<":o=cL,i=fJ,s=aL,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(uJ(t,e,n))return!1;for(let l=0;l<e.set.length;++l){let u=e.set[l],d=null,f=null;if(u.forEach(p=>{p.semver===cJ&&(p=new sL(">=0.0.0")),d=d||p,f=f||p,o(p.semver,d.semver,n)?d=p:s(p.semver,f.semver,n)&&(f=p)}),d.operator===a||d.operator===c||(!f.operator||f.operator===a)&&i(t,f.semver))return!1;if(f.operator===c&&s(t,f.semver))return!1}return!0};lL.exports=pJ});var dL=I((hye,uL)=>{var hJ=Bh(),mJ=(t,e,r)=>hJ(t,e,">",r);uL.exports=mJ});var pL=I((mye,fL)=>{var gJ=Bh(),vJ=(t,e,r)=>gJ(t,e,"<",r);fL.exports=vJ});var gL=I((gye,mL)=>{var hL=gn(),yJ=(t,e,r)=>(t=new hL(t,r),e=new hL(e,r),t.intersects(e));mL.exports=yJ});var yL=I((vye,vL)=>{var wJ=Tu(),CJ=mn();vL.exports=(t,e,r)=>{let n=[],o=null,i=null,s=t.sort((u,d)=>CJ(u,d,r));for(let u of s)wJ(u,e,r)?(i=u,o||(o=u)):(i&&n.push([o,i]),i=null,o=null);o&&n.push([o,null]);let a=[];for(let[u,d]of n)u===d?a.push(u):!d&&u===s[0]?a.push("*"):d?u===s[0]?a.push(`<=${d}`):a.push(`${u} - ${d}`):a.push(`>=${u}`);let c=a.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e}});var _L=I((yye,EL)=>{var wL=gn(),Hh=Pu(),{ANY:GC}=Hh,Au=Tu(),zC=mn(),bJ=(t,e,r={})=>{if(t===e)return!0;t=new wL(t,r),e=new wL(e,r);let n=!1;e:for(let o of t.set){for(let i of e.set){let s=EJ(o,i,r);if(n=n||s!==null,s)continue e}if(n)return!1}return!0},EJ=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===GC){if(e.length===1&&e[0].semver===GC)return!0;r.includePrerelease?t=[new Hh(">=0.0.0-0")]:t=[new Hh(">=0.0.0")]}if(e.length===1&&e[0].semver===GC){if(r.includePrerelease)return!0;e=[new Hh(">=0.0.0")]}let n=new Set,o,i;for(let p of t)p.operator===">"||p.operator===">="?o=CL(o,p,r):p.operator==="<"||p.operator==="<="?i=bL(i,p,r):n.add(p.semver);if(n.size>1)return null;let s;if(o&&i){if(s=zC(o.semver,i.semver,r),s>0)return null;if(s===0&&(o.operator!==">="||i.operator!=="<="))return null}for(let p of n){if(o&&!Au(p,String(o),r)||i&&!Au(p,String(i),r))return null;for(let h of e)if(!Au(p,String(h),r))return!1;return!0}let a,c,l,u,d=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,f=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1;d&&d.prerelease.length===1&&i.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let p of e){if(u=u||p.operator===">"||p.operator===">=",l=l||p.operator==="<"||p.operator==="<=",o){if(f&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===f.major&&p.semver.minor===f.minor&&p.semver.patch===f.patch&&(f=!1),p.operator===">"||p.operator===">="){if(a=CL(o,p,r),a===p&&a!==o)return!1}else if(o.operator===">="&&!Au(o.semver,String(p),r))return!1}if(i){if(d&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===d.major&&p.semver.minor===d.minor&&p.semver.patch===d.patch&&(d=!1),p.operator==="<"||p.operator==="<="){if(c=bL(i,p,r),c===p&&c!==i)return!1}else if(i.operator==="<="&&!Au(i.semver,String(p),r))return!1}if(!p.operator&&(i||o)&&s!==0)return!1}return!(o&&l&&!i&&s!==0||i&&u&&!o&&s!==0||f||d)},CL=(t,e,r)=>{if(!t)return e;let n=zC(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},bL=(t,e,r)=>{if(!t)return e;let n=zC(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};EL.exports=bJ});var xL=I((wye,SL)=>{var KC=Ks();SL.exports={re:KC.re,src:KC.src,tokens:KC.t,SEMVER_SPEC_VERSION:wu().SEMVER_SPEC_VERSION,SemVer:cr(),compareIdentifiers:Dh().compareIdentifiers,rcompareIdentifiers:Dh().rcompareIdentifiers,parse:Ys(),valid:YO(),clean:QO(),inc:ZO(),diff:iN(),major:aN(),minor:lN(),patch:dN(),prerelease:pN(),compare:mn(),rcompare:mN(),compareLoose:vN(),compareBuild:Lh(),sort:bN(),rsort:_N(),gt:_u(),lt:Fh(),eq:Nh(),neq:qC(),gte:Mh(),lte:qh(),cmp:$C(),coerce:DN(),Comparator:Pu(),Range:gn(),satisfies:Tu(),toComparators:JN(),maxSatisfying:XN(),minSatisfying:eL(),minVersion:nL(),validRange:iL(),outside:Bh(),gtr:dL(),ltr:pL(),intersects:gL(),simplifyRange:yL(),subset:_L()}});var gF=I((Hbe,mF)=>{var eQ=Object.create,ju=Object.defineProperty,tQ=Object.getOwnPropertyDescriptor,rQ=Object.getOwnPropertyNames,_1=Object.getOwnPropertySymbols,nQ=Object.getPrototypeOf,S1=Object.prototype.hasOwnProperty,oQ=Object.prototype.propertyIsEnumerable,x1=(t,e,r)=>e in t?ju(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qi=(t,e)=>{for(var r in e||(e={}))S1.call(e,r)&&x1(t,r,e[r]);if(_1)for(var r of _1(e))oQ.call(e,r)&&x1(t,r,e[r]);return t},O=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),iQ=(t,e)=>{for(var r in e)ju(t,r,{get:e[r],enumerable:!0})},P1=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of rQ(e))!S1.call(t,o)&&o!==r&&ju(t,o,{get:()=>e[o],enumerable:!(n=tQ(e,o))||n.enumerable});return t},Uu=(t,e,r)=>(r=t!=null?eQ(nQ(t)):{},P1(e||!t||!t.__esModule?ju(r,"default",{value:t,enumerable:!0}):r,t)),sQ=t=>P1(ju({},"__esModule",{value:!0}),t),Jt=O((t,e)=>{"use strict";var r=function(){function n(){}return n.info=function(o){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];n.enableDebug&&console.info(n.TAG+o,i)},n.warn=function(o){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];n.disableWarnings||console.warn(n.TAG+o,i)},n.enableDebug=!1,n.disableWarnings=!1,n.disableErrors=!1,n.TAG="ApplicationInsights:",n}();e.exports=r}),k1=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(i){for(var s,a=1,c=arguments.length;a<c;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(i[l]=s[l])}return i},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncScopeManager=t.OpenTelemetryScopeManagerWrapper=void 0;var r=Dc(),n=require("events"),o=function(){function i(){}return i.prototype.active=function(){var s=this,a=r.CorrelationContextManager.getCurrentContext();return e(e({},a),{getValue:function(c){return s._activeSymbol?c===s._activeSymbol?a:!1:(s._activeSymbol=c,a)},setValue:function(){}})},i.prototype.with=function(s,a){var c=s.parentSpanId,l=s.name,u=i._spanToContext(s,c,l);return r.CorrelationContextManager.runWithContext(u,a)()},i.prototype.bind=function(s){return typeof s=="function"?r.CorrelationContextManager.wrapCallback(s):(s instanceof n.EventEmitter&&r.CorrelationContextManager.wrapEmitter(s),s)},i.prototype.enable=function(){return r.CorrelationContextManager.enable(),this},i.prototype.disable=function(){return r.CorrelationContextManager.disable(),this},i._spanToContext=function(s,a,c){var l=a?"|"+s.spanContext().traceId+"."+a+".":s.spanContext().traceId,u=e(e({},s.spanContext()),{traceFlags:s.spanContext().traceFlags}),d=r.CorrelationContextManager.spanToContextObject(u,l,c);return d},i}();t.OpenTelemetryScopeManagerWrapper=o,t.AsyncScopeManager=new o}),aQ=O((t,e)=>{t=e.exports=Q;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var w=Array.prototype.slice.call(arguments,0);w.unshift("SEMVER"),console.log.apply(console,w)}:r=function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,s=t.re=[],a=t.src=[],c=0,l=c++;a[l]="0|[1-9]\\d*";var u=c++;a[u]="[0-9]+";var d=c++;a[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=c++;a[f]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var p=c++;a[p]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var h=c++;a[h]="(?:"+a[l]+"|"+a[d]+")";var m=c++;a[m]="(?:"+a[u]+"|"+a[d]+")";var g=c++;a[g]="(?:-("+a[h]+"(?:\\."+a[h]+")*))";var v=c++;a[v]="(?:-?("+a[m]+"(?:\\."+a[m]+")*))";var y=c++;a[y]="[0-9A-Za-z-]+";var b=c++;a[b]="(?:\\+("+a[y]+"(?:\\."+a[y]+")*))";var C=c++,_="v?"+a[f]+a[g]+"?"+a[b]+"?";a[C]="^"+_+"$";var P="[v=\\s]*"+a[p]+a[v]+"?"+a[b]+"?",S=c++;a[S]="^"+P+"$";var k=c++;a[k]="((?:<|>)?=?)";var T=c++;a[T]=a[u]+"|x|X|\\*";var A=c++;a[A]=a[l]+"|x|X|\\*";var F=c++;a[F]="[v=\\s]*("+a[A]+")(?:\\.("+a[A]+")(?:\\.("+a[A]+")(?:"+a[g]+")?"+a[b]+"?)?)?";var j=c++;a[j]="[v=\\s]*("+a[T]+")(?:\\.("+a[T]+")(?:\\.("+a[T]+")(?:"+a[v]+")?"+a[b]+"?)?)?";var J=c++;a[J]="^"+a[k]+"\\s*"+a[F]+"$";var Y=c++;a[Y]="^"+a[k]+"\\s*"+a[j]+"$";var ae=c++;a[ae]="(?:^|[^\\d])(\\d{1,"+i+"})(?:\\.(\\d{1,"+i+"}))?(?:\\.(\\d{1,"+i+"}))?(?:$|[^\\d])";var te=c++;a[te]="(?:~>?)";var M=c++;a[M]="(\\s*)"+a[te]+"\\s+",s[M]=new RegExp(a[M],"g");var L="$1~",q=c++;a[q]="^"+a[te]+a[F]+"$";var W=c++;a[W]="^"+a[te]+a[j]+"$";var z=c++;a[z]="(?:\\^)";var ne=c++;a[ne]="(\\s*)"+a[z]+"\\s+",s[ne]=new RegExp(a[ne],"g");var X="$1^",ve=c++;a[ve]="^"+a[z]+a[F]+"$";var Pe=c++;a[Pe]="^"+a[z]+a[j]+"$";var Se=c++;a[Se]="^"+a[k]+"\\s*("+P+")$|^$";var De=c++;a[De]="^"+a[k]+"\\s*("+_+")$|^$";var pe=c++;a[pe]="(\\s*)"+a[k]+"\\s*("+P+"|"+a[F]+")",s[pe]=new RegExp(a[pe],"g");var yt="$1$2$3",It=c++;a[It]="^\\s*("+a[F]+")\\s+-\\s+("+a[F]+")\\s*$";var ye=c++;a[ye]="^\\s*("+a[j]+")\\s+-\\s+("+a[j]+")\\s*$";var fe=c++;for(a[fe]="(<|>)?=?\\s*\\*",Ee=0;Ee<c;Ee++)r(Ee,a[Ee]),s[Ee]||(s[Ee]=new RegExp(a[Ee]));var Ee;t.parse=je;function je(w,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),w instanceof Q)return w;if(typeof w!="string"||w.length>n)return null;var x=E.loose?s[S]:s[C];if(!x.test(w))return null;try{return new Q(w,E)}catch{return null}}t.valid=es;function es(w,E){var x=je(w,E);return x?x.version:null}t.clean=ts;function ts(w,E){var x=je(w.trim().replace(/^[=v]+/,""),E);return x?x.version:null}t.SemVer=Q;function Q(w,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),w instanceof Q){if(w.loose===E.loose)return w;w=w.version}else if(typeof w!="string")throw new TypeError("Invalid Version: "+w);if(w.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof Q))return new Q(w,E);r("SemVer",w,E),this.options=E,this.loose=!!E.loose;var x=w.trim().match(E.loose?s[S]:s[C]);if(!x)throw new TypeError("Invalid Version: "+w);if(this.raw=w,this.major=+x[1],this.minor=+x[2],this.patch=+x[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");x[4]?this.prerelease=x[4].split(".").map(function(R){if(/^[0-9]+$/.test(R)){var N=+R;if(N>=0&&N<o)return N}return R}):this.prerelease=[],this.build=x[5]?x[5].split("."):[],this.format()}Q.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Q.prototype.toString=function(){return this.version},Q.prototype.compare=function(w){return r("SemVer.compare",this.version,this.options,w),w instanceof Q||(w=new Q(w,this.options)),this.compareMain(w)||this.comparePre(w)},Q.prototype.compareMain=function(w){return w instanceof Q||(w=new Q(w,this.options)),ct(this.major,w.major)||ct(this.minor,w.minor)||ct(this.patch,w.patch)},Q.prototype.comparePre=function(w){if(w instanceof Q||(w=new Q(w,this.options)),this.prerelease.length&&!w.prerelease.length)return-1;if(!this.prerelease.length&&w.prerelease.length)return 1;if(!this.prerelease.length&&!w.prerelease.length)return 0;var E=0;do{var x=this.prerelease[E],R=w.prerelease[E];if(r("prerelease compare",E,x,R),x===void 0&&R===void 0)return 0;if(R===void 0)return 1;if(x===void 0)return-1;if(x!==R)return ct(x,R)}while(++E)},Q.prototype.inc=function(w,E){switch(w){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",E);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",E);break;case"prepatch":this.prerelease.length=0,this.inc("patch",E),this.inc("pre",E);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",E),this.inc("pre",E);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var x=this.prerelease.length;--x>=0;)typeof this.prerelease[x]=="number"&&(this.prerelease[x]++,x=-2);x===-1&&this.prerelease.push(0)}E&&(this.prerelease[0]===E?isNaN(this.prerelease[1])&&(this.prerelease=[E,0]):this.prerelease=[E,0]);break;default:throw new Error("invalid increment argument: "+w)}return this.format(),this.raw=this.version,this},t.inc=rs;function rs(w,E,x,R){typeof x=="string"&&(R=x,x=void 0);try{return new Q(w,x).inc(E,R).version}catch{return null}}t.diff=ns;function ns(w,E){if(wr(w,E))return null;var x=je(w),R=je(E),N="";if(x.prerelease.length||R.prerelease.length){N="pre";var $="prerelease"}for(var H in x)if((H==="major"||H==="minor"||H==="patch")&&x[H]!==R[H])return N+H;return $}t.compareIdentifiers=ct;var Rr=/^[0-9]+$/;function ct(w,E){var x=Rr.test(w),R=Rr.test(E);return x&&R&&(w=+w,E=+E),w===E?0:x&&!R?-1:R&&!x?1:w<E?-1:1}t.rcompareIdentifiers=Gn;function Gn(w,E){return ct(E,w)}t.major=dr;function dr(w,E){return new Q(w,E).major}t.minor=Zo;function Zo(w,E){return new Q(w,E).minor}t.patch=ei;function ei(w,E){return new Q(w,E).patch}t.compare=Ge;function Ge(w,E,x){return new Q(w,x).compare(new Q(E,x))}t.compareLoose=os;function os(w,E){return Ge(w,E,!0)}t.rcompare=zn;function zn(w,E,x){return Ge(E,w,x)}t.sort=ti;function ti(w,E){return w.sort(function(x,R){return t.compare(x,R,E)})}t.rsort=ri;function ri(w,E){return w.sort(function(x,R){return t.rcompare(x,R,E)})}t.gt=Et;function Et(w,E,x){return Ge(w,E,x)>0}t.lt=Bt;function Bt(w,E,x){return Ge(w,E,x)<0}t.eq=wr;function wr(w,E,x){return Ge(w,E,x)===0}t.neq=Kn;function Kn(w,E,x){return Ge(w,E,x)!==0}t.gte=Or;function Or(w,E,x){return Ge(w,E,x)>=0}t.lte=Tt;function Tt(w,E,x){return Ge(w,E,x)<=0}t.cmp=At;function At(w,E,x,R){switch(E){case"===":return typeof w=="object"&&(w=w.version),typeof x=="object"&&(x=x.version),w===x;case"!==":return typeof w=="object"&&(w=w.version),typeof x=="object"&&(x=x.version),w!==x;case"":case"=":case"==":return wr(w,x,R);case"!=":return Kn(w,x,R);case">":return Et(w,x,R);case">=":return Or(w,x,R);case"<":return Bt(w,x,R);case"<=":return Tt(w,x,R);default:throw new TypeError("Invalid operator: "+E)}}t.Comparator=Te;function Te(w,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),w instanceof Te){if(w.loose===!!E.loose)return w;w=w.value}if(!(this instanceof Te))return new Te(w,E);r("comparator",w,E),this.options=E,this.loose=!!E.loose,this.parse(w),this.semver===_t?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var _t={};Te.prototype.parse=function(w){var E=this.options.loose?s[Se]:s[De],x=w.match(E);if(!x)throw new TypeError("Invalid comparator: "+w);this.operator=x[1],this.operator==="="&&(this.operator=""),x[2]?this.semver=new Q(x[2],this.options.loose):this.semver=_t},Te.prototype.toString=function(){return this.value},Te.prototype.test=function(w){return r("Comparator.test",w,this.options.loose),this.semver===_t?!0:(typeof w=="string"&&(w=new Q(w,this.options)),At(w,this.operator,this.semver,this.options))},Te.prototype.intersects=function(w,E){if(!(w instanceof Te))throw new TypeError("a Comparator is required");(!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1});var x;if(this.operator==="")return x=new ce(w.value,E),er(this.value,x,E);if(w.operator==="")return x=new ce(this.value,E),er(w.semver,x,E);var R=(this.operator===">="||this.operator===">")&&(w.operator===">="||w.operator===">"),N=(this.operator==="<="||this.operator==="<")&&(w.operator==="<="||w.operator==="<"),$=this.semver.version===w.semver.version,H=(this.operator===">="||this.operator==="<=")&&(w.operator===">="||w.operator==="<="),ee=At(this.semver,"<",w.semver,E)&&(this.operator===">="||this.operator===">")&&(w.operator==="<="||w.operator==="<"),Z=At(this.semver,">",w.semver,E)&&(this.operator==="<="||this.operator==="<")&&(w.operator===">="||w.operator===">");return R||N||$&&H||ee||Z},t.Range=ce;function ce(w,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),w instanceof ce)return w.loose===!!E.loose&&w.includePrerelease===!!E.includePrerelease?w:new ce(w.raw,E);if(w instanceof Te)return new ce(w.value,E);if(!(this instanceof ce))return new ce(w,E);if(this.options=E,this.loose=!!E.loose,this.includePrerelease=!!E.includePrerelease,this.raw=w,this.set=w.split(/\s*\|\|\s*/).map(function(x){return this.parseRange(x.trim())},this).filter(function(x){return x.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+w);this.format()}ce.prototype.format=function(){return this.range=this.set.map(function(w){return w.join(" ").trim()}).join("||").trim(),this.range},ce.prototype.toString=function(){return this.range},ce.prototype.parseRange=function(w){var E=this.options.loose;w=w.trim();var x=E?s[ye]:s[It];w=w.replace(x,us),r("hyphen replace",w),w=w.replace(s[pe],yt),r("comparator trim",w,s[pe]),w=w.replace(s[M],L),w=w.replace(s[ne],X),w=w.split(/\s+/).join(" ");var R=E?s[Se]:s[De],N=w.split(" ").map(function($){return kn($,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(N=N.filter(function($){return!!$.match(R)})),N=N.map(function($){return new Te($,this.options)},this),N},ce.prototype.intersects=function(w,E){if(!(w instanceof ce))throw new TypeError("a Range is required");return this.set.some(function(x){return x.every(function(R){return w.set.some(function(N){return N.every(function($){return R.intersects($,E)})})})})},t.toComparators=ni;function ni(w,E){return new ce(w,E).set.map(function(x){return x.map(function(R){return R.value}).join(" ").trim().split(" ")})}function kn(w,E){return r("comp",w,E),w=ss(w,E),r("caret",w),w=Nr(w,E),r("tildes",w),w=cs(w,E),r("xrange",w),w=fr(w,E),r("stars",w),w}function Ce(w){return!w||w.toLowerCase()==="x"||w==="*"}function Nr(w,E){return w.trim().split(/\s+/).map(function(x){return is(x,E)}).join(" ")}function is(w,E){var x=E.loose?s[W]:s[q];return w.replace(x,function(R,N,$,H,ee){r("tilde",w,R,N,$,H,ee);var Z;return Ce(N)?Z="":Ce($)?Z=">="+N+".0.0 <"+(+N+1)+".0.0":Ce(H)?Z=">="+N+"."+$+".0 <"+N+"."+(+$+1)+".0":ee?(r("replaceTilde pr",ee),Z=">="+N+"."+$+"."+H+"-"+ee+" <"+N+"."+(+$+1)+".0"):Z=">="+N+"."+$+"."+H+" <"+N+"."+(+$+1)+".0",r("tilde return",Z),Z})}function ss(w,E){return w.trim().split(/\s+/).map(function(x){return as(x,E)}).join(" ")}function as(w,E){r("caret",w,E);var x=E.loose?s[Pe]:s[ve];return w.replace(x,function(R,N,$,H,ee){r("caret",w,R,N,$,H,ee);var Z;return Ce(N)?Z="":Ce($)?Z=">="+N+".0.0 <"+(+N+1)+".0.0":Ce(H)?N==="0"?Z=">="+N+"."+$+".0 <"+N+"."+(+$+1)+".0":Z=">="+N+"."+$+".0 <"+(+N+1)+".0.0":ee?(r("replaceCaret pr",ee),N==="0"?$==="0"?Z=">="+N+"."+$+"."+H+"-"+ee+" <"+N+"."+$+"."+(+H+1):Z=">="+N+"."+$+"."+H+"-"+ee+" <"+N+"."+(+$+1)+".0":Z=">="+N+"."+$+"."+H+"-"+ee+" <"+(+N+1)+".0.0"):(r("no pr"),N==="0"?$==="0"?Z=">="+N+"."+$+"."+H+" <"+N+"."+$+"."+(+H+1):Z=">="+N+"."+$+"."+H+" <"+N+"."+(+$+1)+".0":Z=">="+N+"."+$+"."+H+" <"+(+N+1)+".0.0"),r("caret return",Z),Z})}function cs(w,E){return r("replaceXRanges",w,E),w.split(/\s+/).map(function(x){return ls(x,E)}).join(" ")}function ls(w,E){w=w.trim();var x=E.loose?s[Y]:s[J];return w.replace(x,function(R,N,$,H,ee,Z){r("xRange",w,R,N,$,H,ee,Z);var qe=Ce($),Re=qe||Ce(H),Ie=Re||Ce(ee),ke=Ie;return N==="="&&ke&&(N=""),qe?N===">"||N==="<"?R="<0.0.0":R="*":N&&ke?(Re&&(H=0),ee=0,N===">"?(N=">=",Re?($=+$+1,H=0,ee=0):(H=+H+1,ee=0)):N==="<="&&(N="<",Re?$=+$+1:H=+H+1),R=N+$+"."+H+"."+ee):Re?R=">="+$+".0.0 <"+(+$+1)+".0.0":Ie&&(R=">="+$+"."+H+".0 <"+$+"."+(+H+1)+".0"),r("xRange return",R),R})}function fr(w,E){return r("replaceStars",w,E),w.trim().replace(s[fe],"")}function us(w,E,x,R,N,$,H,ee,Z,qe,Re,Ie,ke){return Ce(x)?E="":Ce(R)?E=">="+x+".0.0":Ce(N)?E=">="+x+"."+R+".0":E=">="+E,Ce(Z)?ee="":Ce(qe)?ee="<"+(+Z+1)+".0.0":Ce(Re)?ee="<"+Z+"."+(+qe+1)+".0":Ie?ee="<="+Z+"."+qe+"."+Re+"-"+Ie:ee="<="+ee,(E+" "+ee).trim()}ce.prototype.test=function(w){if(!w)return!1;typeof w=="string"&&(w=new Q(w,this.options));for(var E=0;E<this.set.length;E++)if(ds(this.set[E],w,this.options))return!0;return!1};function ds(w,E,x){for(var R=0;R<w.length;R++)if(!w[R].test(E))return!1;if(E.prerelease.length&&!x.includePrerelease){for(R=0;R<w.length;R++)if(r(w[R].semver),w[R].semver!==_t&&w[R].semver.prerelease.length>0){var N=w[R].semver;if(N.major===E.major&&N.minor===E.minor&&N.patch===E.patch)return!0}return!1}return!0}t.satisfies=er;function er(w,E,x){try{E=new ce(E,x)}catch{return!1}return E.test(w)}t.maxSatisfying=fs;function fs(w,E,x){var R=null,N=null;try{var $=new ce(E,x)}catch{return null}return w.forEach(function(H){$.test(H)&&(!R||N.compare(H)===-1)&&(R=H,N=new Q(R,x))}),R}t.minSatisfying=ps;function ps(w,E,x){var R=null,N=null;try{var $=new ce(E,x)}catch{return null}return w.forEach(function(H){$.test(H)&&(!R||N.compare(H)===1)&&(R=H,N=new Q(R,x))}),R}t.minVersion=Qr;function Qr(w,E){w=new ce(w,E);var x=new Q("0.0.0");if(w.test(x)||(x=new Q("0.0.0-0"),w.test(x)))return x;x=null;for(var R=0;R<w.set.length;++R){var N=w.set[R];N.forEach(function($){var H=new Q($.semver.version);switch($.operator){case">":H.prerelease.length===0?H.patch++:H.prerelease.push(0),H.raw=H.format();case"":case">=":(!x||Et(x,H))&&(x=H);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+$.operator)}})}return x&&w.test(x)?x:null}t.validRange=hs;function hs(w,E){try{return new ce(w,E).range||"*"}catch{return null}}t.ltr=ms;function ms(w,E,x){return Lr(w,E,"<",x)}t.gtr=gs;function gs(w,E,x){return Lr(w,E,">",x)}t.outside=Lr;function Lr(w,E,x,R){w=new Q(w,R),E=new ce(E,R);var N,$,H,ee,Z;switch(x){case">":N=Et,$=Tt,H=Bt,ee=">",Z=">=";break;case"<":N=Bt,$=Or,H=Et,ee="<",Z="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(er(w,E,R))return!1;for(var qe=0;qe<E.set.length;++qe){var Re=E.set[qe],Ie=null,ke=null;if(Re.forEach(function(Xe){Xe.semver===_t&&(Xe=new Te(">=0.0.0")),Ie=Ie||Xe,ke=ke||Xe,N(Xe.semver,Ie.semver,R)?Ie=Xe:H(Xe.semver,ke.semver,R)&&(ke=Xe)}),Ie.operator===ee||Ie.operator===Z||(!ke.operator||ke.operator===ee)&&$(w,ke.semver)||ke.operator===Z&&H(w,ke.semver))return!1}return!0}t.prerelease=vs;function vs(w,E){var x=je(w,E);return x&&x.prerelease.length?x.prerelease:null}t.intersects=Xr;function Xr(w,E,x){return w=new ce(w,x),E=new ce(E,x),w.intersects(E)}t.coerce=ys;function ys(w){if(w instanceof Q)return w;if(typeof w!="string")return null;var E=w.match(s[ae]);return E==null?null:je(E[1]+"."+(E[2]||"0")+"."+(E[3]||"0"))}}),I1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makePatchingRequire=void 0;var e=require("path"),r=aQ(),n=require("module"),o=Object.keys(process.binding("natives")),i=n.prototype.require;function s(a){var c={};return function(l){var u=i.apply(this,arguments);if(a[l]){var d=n._resolveFilename(l,this);if(c.hasOwnProperty(d))return c[d];var f=void 0;if(o.indexOf(l)<0)try{f=i.call(this,e.join(l,"package.json")).version}catch{return u}else f=process.version.substring(1);var p=f.indexOf("-");p>=0&&(f=f.substring(0,p));for(var h=u,m=0,g=a[l];m<g.length;m++){var v=g[m];r.satisfies(f,v.versionSpecifier)&&(h=v.patch(h,d))}return c[d]=h}return u}}t.makePatchingRequire=s}),cQ=O((t,e)=>{e.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}}),Pt=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.channel=t.makePatchingRequire=void 0;var e=I1(),r=I1();Object.defineProperty(t,"makePatchingRequire",{enumerable:!0,get:function(){return r.makePatchingRequire}});var n=function(s){return!0},o=function(){function s(){this.version=cQ().version,this.subscribers={},this.contextPreservationFunction=function(a){return a},this.knownPatches={},this.currentlyPublishing=!1}return s.prototype.shouldPublish=function(a){var c=this.subscribers[a];return c?c.some(function(l){var u=l.filter;return!u||u(!1)}):!1},s.prototype.publish=function(a,c){if(!this.currentlyPublishing){var l=this.subscribers[a];if(l){var u={timestamp:Date.now(),data:c};this.currentlyPublishing=!0,l.forEach(function(d){var f=d.listener,p=d.filter;try{p&&p(!0)&&f(u)}catch{}}),this.currentlyPublishing=!1}}},s.prototype.subscribe=function(a,c,l){l===void 0&&(l=n),this.subscribers[a]||(this.subscribers[a]=[]),this.subscribers[a].push({listener:c,filter:l})},s.prototype.unsubscribe=function(a,c,l){l===void 0&&(l=n);var u=this.subscribers[a];if(u){for(var d=0;d<u.length;++d)if(u[d].listener===c&&u[d].filter===l)return u.splice(d,1),!0}return!1},s.prototype.reset=function(){var a=this;this.subscribers={},this.contextPreservationFunction=function(c){return c},Object.getOwnPropertyNames(this.knownPatches).forEach(function(c){return delete a.knownPatches[c]})},s.prototype.bindToContext=function(a){return this.contextPreservationFunction(a)},s.prototype.addContextPreservation=function(a){var c=this.contextPreservationFunction;this.contextPreservationFunction=function(l){return a(c(l))}},s.prototype.registerMonkeyPatch=function(a,c){this.knownPatches[a]||(this.knownPatches[a]=[]),this.knownPatches[a].push(c)},s.prototype.getPatchesObject=function(){return this.knownPatches},s}();global.diagnosticsSource||(global.diagnosticsSource=new o,i=require("module"),i.prototype.require=e.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var i;t.channel=global.diagnosticsSource}),lQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),uQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._globalThis=void 0,t._globalThis=typeof globalThis=="object"?globalThis:global}),dQ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=t&&t.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(uQ(),t)}),fQ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=t&&t.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(dQ(),t)}),T1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="1.0.3"}),pQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCompatible=t._makeCompatibilityCheck=void 0;var e=T1(),r=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function n(o){var i=new Set([o]),s=new Set,a=o.match(r);if(!a)return function(){return!1};var c={major:+a[1],minor:+a[2],patch:+a[3],prerelease:a[4]};if(c.prerelease!=null)return function(d){return d===o};function l(d){return s.add(d),!1}function u(d){return i.add(d),!0}return function(d){if(i.has(d))return!0;if(s.has(d))return!1;var f=d.match(r);if(!f)return l(d);var p={major:+f[1],minor:+f[2],patch:+f[3],prerelease:f[4]};return p.prerelease!=null||c.major!==p.major?l(d):c.major===0?c.minor===p.minor&&c.patch<=p.patch?u(d):l(d):c.minor<=p.minor?u(d):l(d)}}t._makeCompatibilityCheck=n,t.isCompatible=n(e.VERSION)}),Bu=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterGlobal=t.getGlobal=t.registerGlobal=void 0;var e=fQ(),r=T1(),n=pQ(),o=r.VERSION.split(".")[0],i=Symbol.for("opentelemetry.js.api."+o),s=e._globalThis;function a(u,d,f,p){var h;p===void 0&&(p=!1);var m=s[i]=(h=s[i])!==null&&h!==void 0?h:{version:r.VERSION};if(!p&&m[u]){var g=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+u);return f.error(g.stack||g.message),!1}if(m.version!==r.VERSION){var g=new Error("@opentelemetry/api: All API registration versions must match");return f.error(g.stack||g.message),!1}return m[u]=d,f.debug("@opentelemetry/api: Registered a global for "+u+" v"+r.VERSION+"."),!0}t.registerGlobal=a;function c(u){var d,f,p=(d=s[i])===null||d===void 0?void 0:d.version;if(!(!p||!n.isCompatible(p)))return(f=s[i])===null||f===void 0?void 0:f[u]}t.getGlobal=c;function l(u,d){d.debug("@opentelemetry/api: Unregistering a global for "+u+" v"+r.VERSION+".");var f=s[i];f&&delete f[u]}t.unregisterGlobal=l}),hQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagComponentLogger=void 0;var e=Bu(),r=function(){function o(i){this._namespace=i.namespace||"DiagComponentLogger"}return o.prototype.debug=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return n("debug",this._namespace,i)},o.prototype.error=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return n("error",this._namespace,i)},o.prototype.info=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return n("info",this._namespace,i)},o.prototype.warn=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return n("warn",this._namespace,i)},o.prototype.verbose=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return n("verbose",this._namespace,i)},o}();t.DiagComponentLogger=r;function n(o,i,s){var a=e.getGlobal("diag");if(a)return s.unshift(i),a[o].apply(a,s)}}),Cb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagLogLevel=void 0;var e;(function(r){r[r.NONE=0]="NONE",r[r.ERROR=30]="ERROR",r[r.WARN=50]="WARN",r[r.INFO=60]="INFO",r[r.DEBUG=70]="DEBUG",r[r.VERBOSE=80]="VERBOSE",r[r.ALL=9999]="ALL"})(e=t.DiagLogLevel||(t.DiagLogLevel={}))}),mQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLogLevelDiagLogger=void 0;var e=Cb();function r(n,o){n<e.DiagLogLevel.NONE?n=e.DiagLogLevel.NONE:n>e.DiagLogLevel.ALL&&(n=e.DiagLogLevel.ALL),o=o||{};function i(s,a){var c=o[s];return typeof c=="function"&&n>=a?c.bind(o):function(){}}return{error:i("error",e.DiagLogLevel.ERROR),warn:i("warn",e.DiagLogLevel.WARN),info:i("info",e.DiagLogLevel.INFO),debug:i("debug",e.DiagLogLevel.DEBUG),verbose:i("verbose",e.DiagLogLevel.VERBOSE)}}t.createLogLevelDiagLogger=r}),Hu=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagAPI=void 0;var e=hQ(),r=mQ(),n=Cb(),o=Bu(),i="diag",s=function(){function a(){function c(u){return function(){var d=o.getGlobal("diag");if(d)return d[u].apply(d,arguments)}}var l=this;l.setLogger=function(u,d){var f,p;if(d===void 0&&(d=n.DiagLogLevel.INFO),u===l){var h=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return l.error((f=h.stack)!==null&&f!==void 0?f:h.message),!1}var m=o.getGlobal("diag"),g=r.createLogLevelDiagLogger(d,u);if(m){var v=(p=new Error().stack)!==null&&p!==void 0?p:"<failed to generate stacktrace>";m.warn("Current logger will be overwritten from "+v),g.warn("Current logger will overwrite one already registered from "+v)}return o.registerGlobal("diag",g,l,!0)},l.disable=function(){o.unregisterGlobal(i,l)},l.createComponentLogger=function(u){return new e.DiagComponentLogger(u)},l.verbose=c("verbose"),l.debug=c("debug"),l.info=c("info"),l.warn=c("warn"),l.error=c("error")}return a.instance=function(){return this._instance||(this._instance=new a),this._instance},a}();t.DiagAPI=s}),gQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaggageImpl=void 0;var e=function(){function r(n){this._entries=n?new Map(n):new Map}return r.prototype.getEntry=function(n){var o=this._entries.get(n);if(o)return Object.assign({},o)},r.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(n){var o=n[0],i=n[1];return[o,i]})},r.prototype.setEntry=function(n,o){var i=new r(this._entries);return i._entries.set(n,o),i},r.prototype.removeEntry=function(n){var o=new r(this._entries);return o._entries.delete(n),o},r.prototype.removeEntries=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];for(var i=new r(this._entries),s=0,a=n;s<a.length;s++){var c=a[s];i._entries.delete(c)}return i},r.prototype.clear=function(){return new r},r}();t.BaggageImpl=e}),vQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataSymbol=void 0,t.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")}),A1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataFromString=t.createBaggage=void 0;var e=Hu(),r=gQ(),n=vQ(),o=e.DiagAPI.instance();function i(a){return a===void 0&&(a={}),new r.BaggageImpl(new Map(Object.entries(a)))}t.createBaggage=i;function s(a){return typeof a!="string"&&(o.error("Cannot create baggage metadata from unknown type: "+typeof a),a=""),{__TYPE__:n.baggageEntryMetadataSymbol,toString:function(){return a}}}t.baggageEntryMetadataFromString=s}),yQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),wQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),CQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagConsoleLogger=void 0;var e=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],r=function(){function n(){function o(s){return function(){var a=arguments;if(console){var c=console[s];if(typeof c!="function"&&(c=console.log),typeof c=="function")return c.apply(console,a)}}}for(var i=0;i<e.length;i++)this[e[i].n]=o(e[i].c)}return n}();t.DiagConsoleLogger=r}),bQ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=t&&t.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(CQ(),t),r(Cb(),t)}),D1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTextMapSetter=t.defaultTextMapGetter=void 0,t.defaultTextMapGetter={get:function(e,r){if(e!=null)return e[r]},keys:function(e){return e==null?[]:Object.keys(e)}},t.defaultTextMapSetter={set:function(e,r,n){e!=null&&(e[r]=n)}}}),EQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),_Q=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),dm=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_CONTEXT=t.createContextKey=void 0;function e(n){return Symbol.for(n)}t.createContextKey=e;var r=function(){function n(o){var i=this;i._currentContext=o?new Map(o):new Map,i.getValue=function(s){return i._currentContext.get(s)},i.setValue=function(s,a){var c=new n(i._currentContext);return c._currentContext.set(s,a),c},i.deleteValue=function(s){var a=new n(i._currentContext);return a._currentContext.delete(s),a}}return n}();t.ROOT_CONTEXT=new r}),SQ=O(t=>{"use strict";var e=t&&t.__spreadArray||function(o,i){for(var s=0,a=i.length,c=o.length;s<a;s++,c++)o[c]=i[s];return o};Object.defineProperty(t,"__esModule",{value:!0}),t.NoopContextManager=void 0;var r=dm(),n=function(){function o(){}return o.prototype.active=function(){return r.ROOT_CONTEXT},o.prototype.with=function(i,s,a){for(var c=[],l=3;l<arguments.length;l++)c[l-3]=arguments[l];return s.call.apply(s,e([a],c))},o.prototype.bind=function(i,s){return s},o.prototype.enable=function(){return this},o.prototype.disable=function(){return this},o}();t.NoopContextManager=n}),R1=O(t=>{"use strict";var e=t&&t.__spreadArray||function(c,l){for(var u=0,d=l.length,f=c.length;u<d;u++,f++)c[f]=l[u];return c};Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=void 0;var r=SQ(),n=Bu(),o=Hu(),i="context",s=new r.NoopContextManager,a=function(){function c(){}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalContextManager=function(l){return n.registerGlobal(i,l,o.DiagAPI.instance())},c.prototype.active=function(){return this._getContextManager().active()},c.prototype.with=function(l,u,d){for(var f,p=[],h=3;h<arguments.length;h++)p[h-3]=arguments[h];return(f=this._getContextManager()).with.apply(f,e([l,u,d],p))},c.prototype.bind=function(l,u){return this._getContextManager().bind(l,u)},c.prototype._getContextManager=function(){return n.getGlobal(i)||s},c.prototype.disable=function(){this._getContextManager().disable(),n.unregisterGlobal(i,o.DiagAPI.instance())},c}();t.ContextAPI=a}),O1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFlags=void 0;var e;(function(r){r[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED"})(e=t.TraceFlags||(t.TraceFlags={}))}),bb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0;var e=O1();t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:e.TraceFlags.NONE}}),Eb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NonRecordingSpan=void 0;var e=bb(),r=function(){function n(o){o===void 0&&(o=e.INVALID_SPAN_CONTEXT),this._spanContext=o}return n.prototype.spanContext=function(){return this._spanContext},n.prototype.setAttribute=function(o,i){return this},n.prototype.setAttributes=function(o){return this},n.prototype.addEvent=function(o,i){return this},n.prototype.setStatus=function(o){return this},n.prototype.updateName=function(o){return this},n.prototype.end=function(o){},n.prototype.isRecording=function(){return!1},n.prototype.recordException=function(o,i){},n}();t.NonRecordingSpan=r}),N1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSpanContext=t.setSpanContext=t.deleteSpan=t.setSpan=t.getSpan=void 0;var e=dm(),r=Eb(),n=e.createContextKey("OpenTelemetry Context Key SPAN");function o(l){return l.getValue(n)||void 0}t.getSpan=o;function i(l,u){return l.setValue(n,u)}t.setSpan=i;function s(l){return l.deleteValue(n)}t.deleteSpan=s;function a(l,u){return i(l,new r.NonRecordingSpan(u))}t.setSpanContext=a;function c(l){var u;return(u=o(l))===null||u===void 0?void 0:u.spanContext()}t.getSpanContext=c}),_b=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSpanContext=t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=void 0;var e=bb(),r=Eb(),n=/^([0-9a-f]{32})$/i,o=/^[0-9a-f]{16}$/i;function i(l){return n.test(l)&&l!==e.INVALID_TRACEID}t.isValidTraceId=i;function s(l){return o.test(l)&&l!==e.INVALID_SPANID}t.isValidSpanId=s;function a(l){return i(l.traceId)&&s(l.spanId)}t.isSpanContextValid=a;function c(l){return new r.NonRecordingSpan(l)}t.wrapSpanContext=c}),L1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracer=void 0;var e=R1(),r=N1(),n=Eb(),o=_b(),i=e.ContextAPI.getInstance(),s=function(){function c(){}return c.prototype.startSpan=function(l,u,d){var f=Boolean(u==null?void 0:u.root);if(f)return new n.NonRecordingSpan;var p=d&&r.getSpanContext(d);return a(p)&&o.isSpanContextValid(p)?new n.NonRecordingSpan(p):new n.NonRecordingSpan},c.prototype.startActiveSpan=function(l,u,d,f){var p,h,m;if(!(arguments.length<2)){arguments.length===2?m=u:arguments.length===3?(p=u,m=d):(p=u,h=d,m=f);var g=h!=null?h:i.active(),v=this.startSpan(l,p,g),y=r.setSpan(g,v);return i.with(y,m,void 0,v)}},c}();t.NoopTracer=s;function a(c){return typeof c=="object"&&typeof c.spanId=="string"&&typeof c.traceId=="string"&&typeof c.traceFlags=="number"}}),F1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracer=void 0;var e=L1(),r=new e.NoopTracer,n=function(){function o(i,s,a){this._provider=i,this.name=s,this.version=a}return o.prototype.startSpan=function(i,s,a){return this._getTracer().startSpan(i,s,a)},o.prototype.startActiveSpan=function(i,s,a,c){var l=this._getTracer();return Reflect.apply(l.startActiveSpan,l,arguments)},o.prototype._getTracer=function(){if(this._delegate)return this._delegate;var i=this._provider.getDelegateTracer(this.name,this.version);return i?(this._delegate=i,this._delegate):r},o}();t.ProxyTracer=n}),xQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracerProvider=void 0;var e=L1(),r=function(){function n(){}return n.prototype.getTracer=function(o,i){return new e.NoopTracer},n}();t.NoopTracerProvider=r}),M1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracerProvider=void 0;var e=F1(),r=xQ(),n=new r.NoopTracerProvider,o=function(){function i(){}return i.prototype.getTracer=function(s,a){var c;return(c=this.getDelegateTracer(s,a))!==null&&c!==void 0?c:new e.ProxyTracer(this,s,a)},i.prototype.getDelegate=function(){var s;return(s=this._delegate)!==null&&s!==void 0?s:n},i.prototype.setDelegate=function(s){this._delegate=s},i.prototype.getDelegateTracer=function(s,a){var c;return(c=this._delegate)===null||c===void 0?void 0:c.getTracer(s,a)},i}();t.ProxyTracerProvider=o}),PQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),kQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SamplingDecision=void 0;var e;(function(r){r[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(e=t.SamplingDecision||(t.SamplingDecision={}))}),IQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),TQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpanKind=void 0;var e;(function(r){r[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"})(e=t.SpanKind||(t.SpanKind={}))}),AQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),DQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),RQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpanStatusCode=void 0;var e;(function(r){r[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"})(e=t.SpanStatusCode||(t.SpanStatusCode={}))}),OQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),NQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),LQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),FQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),MQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceAPI=void 0;var e=Bu(),r=M1(),n=_b(),o=N1(),i=Hu(),s="trace",a=function(){function c(){this._proxyTracerProvider=new r.ProxyTracerProvider,this.wrapSpanContext=n.wrapSpanContext,this.isSpanContextValid=n.isSpanContextValid,this.deleteSpan=o.deleteSpan,this.getSpan=o.getSpan,this.getSpanContext=o.getSpanContext,this.setSpan=o.setSpan,this.setSpanContext=o.setSpanContext}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalTracerProvider=function(l){var u=e.registerGlobal(s,this._proxyTracerProvider,i.DiagAPI.instance());return u&&this._proxyTracerProvider.setDelegate(l),u},c.prototype.getTracerProvider=function(){return e.getGlobal(s)||this._proxyTracerProvider},c.prototype.getTracer=function(l,u){return this.getTracerProvider().getTracer(l,u)},c.prototype.disable=function(){e.unregisterGlobal(s,i.DiagAPI.instance()),this._proxyTracerProvider=new r.ProxyTracerProvider},c}();t.TraceAPI=a}),qQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTextMapPropagator=void 0;var e=function(){function r(){}return r.prototype.inject=function(n,o){},r.prototype.extract=function(n,o){return n},r.prototype.fields=function(){return[]},r}();t.NoopTextMapPropagator=e}),$Q=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBaggage=t.setBaggage=t.getBaggage=void 0;var e=dm(),r=e.createContextKey("OpenTelemetry Baggage Key");function n(s){return s.getValue(r)||void 0}t.getBaggage=n;function o(s,a){return s.setValue(r,a)}t.setBaggage=o;function i(s){return s.deleteValue(r)}t.deleteBaggage=i}),jQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropagationAPI=void 0;var e=Bu(),r=qQ(),n=D1(),o=$Q(),i=A1(),s=Hu(),a="propagation",c=new r.NoopTextMapPropagator,l=function(){function u(){this.createBaggage=i.createBaggage,this.getBaggage=o.getBaggage,this.setBaggage=o.setBaggage,this.deleteBaggage=o.deleteBaggage}return u.getInstance=function(){return this._instance||(this._instance=new u),this._instance},u.prototype.setGlobalPropagator=function(d){return e.registerGlobal(a,d,s.DiagAPI.instance())},u.prototype.inject=function(d,f,p){return p===void 0&&(p=n.defaultTextMapSetter),this._getGlobalPropagator().inject(d,f,p)},u.prototype.extract=function(d,f,p){return p===void 0&&(p=n.defaultTextMapGetter),this._getGlobalPropagator().extract(d,f,p)},u.prototype.fields=function(){return this._getGlobalPropagator().fields()},u.prototype.disable=function(){e.unregisterGlobal(a,s.DiagAPI.instance())},u.prototype._getGlobalPropagator=function(){return e.getGlobal(a)||c},u}();t.PropagationAPI=l}),ft=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(u,d,f,p){p===void 0&&(p=f),Object.defineProperty(u,p,{enumerable:!0,get:function(){return d[f]}})}:function(u,d,f,p){p===void 0&&(p=f),u[p]=d[f]}),r=t&&t.__exportStar||function(u,d){for(var f in u)f!=="default"&&!Object.prototype.hasOwnProperty.call(d,f)&&e(d,u,f)};Object.defineProperty(t,"__esModule",{value:!0}),t.diag=t.propagation=t.trace=t.context=t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=t.isValidSpanId=t.isValidTraceId=t.isSpanContextValid=t.baggageEntryMetadataFromString=void 0,r(lQ(),t);var n=A1();Object.defineProperty(t,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return n.baggageEntryMetadataFromString}}),r(yQ(),t),r(wQ(),t),r(bQ(),t),r(D1(),t),r(EQ(),t),r(_Q(),t),r(F1(),t),r(M1(),t),r(PQ(),t),r(kQ(),t),r(IQ(),t),r(TQ(),t),r(AQ(),t),r(DQ(),t),r(RQ(),t),r(O1(),t),r(OQ(),t),r(NQ(),t),r(LQ(),t);var o=_b();Object.defineProperty(t,"isSpanContextValid",{enumerable:!0,get:function(){return o.isSpanContextValid}}),Object.defineProperty(t,"isValidTraceId",{enumerable:!0,get:function(){return o.isValidTraceId}}),Object.defineProperty(t,"isValidSpanId",{enumerable:!0,get:function(){return o.isValidSpanId}});var i=bb();Object.defineProperty(t,"INVALID_SPANID",{enumerable:!0,get:function(){return i.INVALID_SPANID}}),Object.defineProperty(t,"INVALID_TRACEID",{enumerable:!0,get:function(){return i.INVALID_TRACEID}}),Object.defineProperty(t,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return i.INVALID_SPAN_CONTEXT}}),r(dm(),t),r(FQ(),t);var s=R1();t.context=s.ContextAPI.getInstance();var a=MQ();t.trace=a.TraceAPI.getInstance();var c=jQ();t.propagation=c.PropagationAPI.getInstance();var l=Hu();t.diag=l.DiagAPI.instance(),t.default={trace:t.trace,context:t.context,propagation:t.propagation,diag:t.diag}}),Sb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTracingSuppressed=t.unsuppressTracing=t.suppressTracing=void 0;var e=ft(),r=e.createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function n(s){return s.setValue(r,!0)}t.suppressTracing=n;function o(s){return s.deleteValue(r)}t.unsuppressTracing=o;function i(s){return s.getValue(r)===!0}t.isTracingSuppressed=i}),q1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BAGGAGE_MAX_TOTAL_LENGTH=t.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=t.BAGGAGE_MAX_NAME_VALUE_PAIRS=t.BAGGAGE_HEADER=t.BAGGAGE_ITEMS_SEPARATOR=t.BAGGAGE_PROPERTIES_SEPARATOR=t.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,t.BAGGAGE_KEY_PAIR_SEPARATOR="=",t.BAGGAGE_PROPERTIES_SEPARATOR=";",t.BAGGAGE_ITEMS_SEPARATOR=",",t.BAGGAGE_HEADER="baggage",t.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,t.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,t.BAGGAGE_MAX_TOTAL_LENGTH=8192}),$1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseKeyPairsIntoRecord=t.parsePairKeyValue=t.getKeyPairs=t.serializeKeyPairs=void 0;var e=ft(),r=q1(),n=a=>a.reduce((c,l)=>{let u=`${c}${c!==""?r.BAGGAGE_ITEMS_SEPARATOR:""}${l}`;return u.length>r.BAGGAGE_MAX_TOTAL_LENGTH?c:u},"");t.serializeKeyPairs=n;var o=a=>a.getAllEntries().map(([c,l])=>`${encodeURIComponent(c)}=${encodeURIComponent(l.value)}`);t.getKeyPairs=o;var i=a=>{let c=a.split(r.BAGGAGE_PROPERTIES_SEPARATOR);if(c.length<=0)return;let l=c.shift();if(!l)return;let u=l.split(r.BAGGAGE_KEY_PAIR_SEPARATOR);if(u.length!==2)return;let d=decodeURIComponent(u[0].trim()),f=decodeURIComponent(u[1].trim()),p;return c.length>0&&(p=e.baggageEntryMetadataFromString(c.join(r.BAGGAGE_PROPERTIES_SEPARATOR))),{key:d,value:f,metadata:p}};t.parsePairKeyValue=i;var s=a=>typeof a!="string"||a.length===0?{}:a.split(r.BAGGAGE_ITEMS_SEPARATOR).map(c=>t.parsePairKeyValue(c)).filter(c=>c!==void 0&&c.value.length>0).reduce((c,l)=>(c[l.key]=l.value,c),{});t.parseKeyPairsIntoRecord=s}),UQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpBaggagePropagator=void 0;var e=ft(),r=Sb(),n=q1(),o=$1(),i=class{inject(s,a,c){let l=e.propagation.getBaggage(s);if(!l||r.isTracingSuppressed(s))return;let u=o.getKeyPairs(l).filter(f=>f.length<=n.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,n.BAGGAGE_MAX_NAME_VALUE_PAIRS),d=o.serializeKeyPairs(u);d.length>0&&c.set(a,n.BAGGAGE_HEADER,d)}extract(s,a,c){let l=c.get(a,n.BAGGAGE_HEADER);if(!l)return s;let u={};return l.length===0||(l.split(n.BAGGAGE_ITEMS_SEPARATOR).forEach(d=>{let f=o.parsePairKeyValue(d);if(f){let p={value:f.value};f.metadata&&(p.metadata=f.metadata),u[f.key]=p}}),Object.entries(u).length===0)?s:e.propagation.setBaggage(s,e.propagation.createBaggage(u))}fields(){return[n.BAGGAGE_HEADER]}};t.HttpBaggagePropagator=i}),BQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAttributeValue=t.sanitizeAttributes=void 0;function e(i){let s={};if(i==null||typeof i!="object")return s;for(let[a,c]of Object.entries(i))r(c)&&(Array.isArray(c)?s[a]=c.slice():s[a]=c);return s}t.sanitizeAttributes=e;function r(i){return i==null?!0:Array.isArray(i)?n(i):o(i)}t.isAttributeValue=r;function n(i){let s;for(let a of i)if(a!=null){if(!s){if(o(a)){s=typeof a;continue}return!1}if(typeof a!==s)return!1}return!0}function o(i){switch(typeof i){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}}),j1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loggingErrorHandler=void 0;var e=ft();function r(){return i=>{e.diag.error(n(i))}}t.loggingErrorHandler=r;function n(i){return typeof i=="string"?i:JSON.stringify(o(i))}function o(i){let s={},a=i;for(;a!==null;)Object.getOwnPropertyNames(a).forEach(c=>{if(s[c])return;let l=a[c];l&&(s[c]=String(l))}),a=Object.getPrototypeOf(a);return s}}),U1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalErrorHandler=t.setGlobalErrorHandler=void 0;var e=j1(),r=e.loggingErrorHandler();function n(i){r=i}t.setGlobalErrorHandler=n;var o=i=>{try{r(i)}catch{}};t.globalErrorHandler=o}),B1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TracesSamplerValues=void 0;var e;(function(r){r.AlwaysOff="always_off",r.AlwaysOn="always_on",r.ParentBasedAlwaysOff="parentbased_always_off",r.ParentBasedAlwaysOn="parentbased_always_on",r.ParentBasedTraceIdRatio="parentbased_traceidratio",r.TraceIdRatio="traceidratio"})(e=t.TracesSamplerValues||(t.TracesSamplerValues={}))}),H1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseEnvironment=t.DEFAULT_ENVIRONMENT=void 0;var e=ft(),r=B1(),n=",",o=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function i(p){return o.indexOf(p)>-1}var s=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function a(p){return s.indexOf(p)>-1}t.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:e.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:r.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function c(p,h,m,g=-1/0,v=1/0){if(typeof m[p]<"u"){let y=Number(m[p]);isNaN(y)||(y<g?h[p]=g:y>v?h[p]=v:h[p]=y)}}function l(p,h,m,g=n){let v=m[p];typeof v=="string"&&(h[p]=v.split(g).map(y=>y.trim()))}var u={ALL:e.DiagLogLevel.ALL,VERBOSE:e.DiagLogLevel.VERBOSE,DEBUG:e.DiagLogLevel.DEBUG,INFO:e.DiagLogLevel.INFO,WARN:e.DiagLogLevel.WARN,ERROR:e.DiagLogLevel.ERROR,NONE:e.DiagLogLevel.NONE};function d(p,h,m){let g=m[p];if(typeof g=="string"){let v=u[g.toUpperCase()];v!=null&&(h[p]=v)}}function f(p){let h={};for(let m in t.DEFAULT_ENVIRONMENT){let g=m;switch(g){case"OTEL_LOG_LEVEL":d(g,h,p);break;default:if(i(g))c(g,h,p);else if(a(g))l(g,h,p);else{let v=p[g];typeof v<"u"&&v!==null&&(h[g]=String(v))}}}return h}t.parseEnvironment=f}),HQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnv=void 0;var e=require("os"),r=H1();function n(){let o=r.parseEnvironment(process.env);return Object.assign({HOSTNAME:e.hostname()},r.DEFAULT_ENVIRONMENT,o)}t.getEnv=n}),VQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hexToBase64=void 0;function e(r){let n=r.length,o="";for(let i=0;i<n;i+=2){let s=r.substring(i,i+2),a=parseInt(s,16);o+=String.fromCharCode(a)}return Buffer.from(o,"ascii").toString("base64")}t.hexToBase64=e}),WQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RandomIdGenerator=void 0;var e=8,r=16,n=class{constructor(){this.generateTraceId=i(r),this.generateSpanId=i(e)}};t.RandomIdGenerator=n;var o=Buffer.allocUnsafe(r);function i(s){return function(){for(let a=0;a<s/4;a++)o.writeUInt32BE(Math.random()*2**32>>>0,a*4);for(let a=0;a<s&&!(o[a]>0);a++)a===s-1&&(o[s-1]=1);return o.toString("hex",0,s)}}}),GQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.otperformance=void 0;var e=require("perf_hooks");t.otperformance=e.performance}),xb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="0.23.0"}),zQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RpcGrpcStatusCodeValues=t.MessagingOperationValues=t.MessagingDestinationKindValues=t.HttpFlavorValues=t.NetTransportValues=t.FaasInvokedProviderValues=t.FaasDocumentOperationValues=t.FaasTriggerValues=t.DbCassandraConsistencyLevelValues=t.DbSystemValues=t.SemanticAttributes=void 0,t.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};var e;(function(d){d.OTHER_SQL="other_sql",d.MSSQL="mssql",d.MYSQL="mysql",d.ORACLE="oracle",d.DB2="db2",d.POSTGRESQL="postgresql",d.REDSHIFT="redshift",d.HIVE="hive",d.CLOUDSCAPE="cloudscape",d.HSQLDB="hsqldb",d.PROGRESS="progress",d.MAXDB="maxdb",d.HANADB="hanadb",d.INGRES="ingres",d.FIRSTSQL="firstsql",d.EDB="edb",d.CACHE="cache",d.ADABAS="adabas",d.FIREBIRD="firebird",d.DERBY="derby",d.FILEMAKER="filemaker",d.INFORMIX="informix",d.INSTANTDB="instantdb",d.INTERBASE="interbase",d.MARIADB="mariadb",d.NETEZZA="netezza",d.PERVASIVE="pervasive",d.POINTBASE="pointbase",d.SQLITE="sqlite",d.SYBASE="sybase",d.TERADATA="teradata",d.VERTICA="vertica",d.H2="h2",d.COLDFUSION="coldfusion",d.CASSANDRA="cassandra",d.HBASE="hbase",d.MONGODB="mongodb",d.REDIS="redis",d.COUCHBASE="couchbase",d.COUCHDB="couchdb",d.COSMOSDB="cosmosdb",d.DYNAMODB="dynamodb",d.NEO4J="neo4j",d.GEODE="geode",d.ELASTICSEARCH="elasticsearch",d.MEMCACHED="memcached",d.COCKROACHDB="cockroachdb"})(e=t.DbSystemValues||(t.DbSystemValues={}));var r;(function(d){d.ALL="all",d.EACH_QUORUM="each_quorum",d.QUORUM="quorum",d.LOCAL_QUORUM="local_quorum",d.ONE="one",d.TWO="two",d.THREE="three",d.LOCAL_ONE="local_one",d.ANY="any",d.SERIAL="serial",d.LOCAL_SERIAL="local_serial"})(r=t.DbCassandraConsistencyLevelValues||(t.DbCassandraConsistencyLevelValues={}));var n;(function(d){d.DATASOURCE="datasource",d.HTTP="http",d.PUBSUB="pubsub",d.TIMER="timer",d.OTHER="other"})(n=t.FaasTriggerValues||(t.FaasTriggerValues={}));var o;(function(d){d.INSERT="insert",d.EDIT="edit",d.DELETE="delete"})(o=t.FaasDocumentOperationValues||(t.FaasDocumentOperationValues={}));var i;(function(d){d.AWS="aws",d.AZURE="azure",d.GCP="gcp"})(i=t.FaasInvokedProviderValues||(t.FaasInvokedProviderValues={}));var s;(function(d){d.IP_TCP="ip_tcp",d.IP_UDP="ip_udp",d.IP="ip",d.UNIX="unix",d.PIPE="pipe",d.INPROC="inproc",d.OTHER="other"})(s=t.NetTransportValues||(t.NetTransportValues={}));var a;(function(d){d.HTTP_1_0="1.0",d.HTTP_1_1="1.1",d.HTTP_2_0="2.0",d.SPDY="SPDY",d.QUIC="QUIC"})(a=t.HttpFlavorValues||(t.HttpFlavorValues={}));var c;(function(d){d.QUEUE="queue",d.TOPIC="topic"})(c=t.MessagingDestinationKindValues||(t.MessagingDestinationKindValues={}));var l;(function(d){d.RECEIVE="receive",d.PROCESS="process"})(l=t.MessagingOperationValues||(t.MessagingOperationValues={}));var u;(function(d){d[d.OK=0]="OK",d[d.CANCELLED=1]="CANCELLED",d[d.UNKNOWN=2]="UNKNOWN",d[d.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",d[d.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",d[d.NOT_FOUND=5]="NOT_FOUND",d[d.ALREADY_EXISTS=6]="ALREADY_EXISTS",d[d.PERMISSION_DENIED=7]="PERMISSION_DENIED",d[d.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",d[d.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",d[d.ABORTED=10]="ABORTED",d[d.OUT_OF_RANGE=11]="OUT_OF_RANGE",d[d.UNIMPLEMENTED=12]="UNIMPLEMENTED",d[d.INTERNAL=13]="INTERNAL",d[d.UNAVAILABLE=14]="UNAVAILABLE",d[d.DATA_LOSS=15]="DATA_LOSS",d[d.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(u=t.RpcGrpcStatusCodeValues||(t.RpcGrpcStatusCodeValues={}))}),KQ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=t&&t.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(zQ(),t)}),YQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetrySdkLanguageValues=t.OsTypeValues=t.HostArchValues=t.AwsEcsLaunchtypeValues=t.CloudPlatformValues=t.CloudProviderValues=t.ResourceAttributes=void 0,t.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var e;(function(a){a.AWS="aws",a.AZURE="azure",a.GCP="gcp"})(e=t.CloudProviderValues||(t.CloudProviderValues={}));var r;(function(a){a.AWS_EC2="aws_ec2",a.AWS_ECS="aws_ecs",a.AWS_EKS="aws_eks",a.AWS_LAMBDA="aws_lambda",a.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",a.AZURE_VM="azure_vm",a.AZURE_CONTAINER_INSTANCES="azure_container_instances",a.AZURE_AKS="azure_aks",a.AZURE_FUNCTIONS="azure_functions",a.AZURE_APP_SERVICE="azure_app_service",a.GCP_COMPUTE_ENGINE="gcp_compute_engine",a.GCP_CLOUD_RUN="gcp_cloud_run",a.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",a.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",a.GCP_APP_ENGINE="gcp_app_engine"})(r=t.CloudPlatformValues||(t.CloudPlatformValues={}));var n;(function(a){a.EC2="ec2",a.FARGATE="fargate"})(n=t.AwsEcsLaunchtypeValues||(t.AwsEcsLaunchtypeValues={}));var o;(function(a){a.AMD64="amd64",a.ARM32="arm32",a.ARM64="arm64",a.IA64="ia64",a.PPC32="ppc32",a.PPC64="ppc64",a.X86="x86"})(o=t.HostArchValues||(t.HostArchValues={}));var i;(function(a){a.WINDOWS="windows",a.LINUX="linux",a.DARWIN="darwin",a.FREEBSD="freebsd",a.NETBSD="netbsd",a.OPENBSD="openbsd",a.DRAGONFLYBSD="dragonflybsd",a.HPUX="hpux",a.AIX="aix",a.SOLARIS="solaris",a.Z_OS="z_os"})(i=t.OsTypeValues||(t.OsTypeValues={}));var s;(function(a){a.CPP="cpp",a.DOTNET="dotnet",a.ERLANG="erlang",a.GO="go",a.JAVA="java",a.NODEJS="nodejs",a.PHP="php",a.PYTHON="python",a.RUBY="ruby",a.WEBJS="webjs"})(s=t.TelemetrySdkLanguageValues||(t.TelemetrySdkLanguageValues={}))}),JQ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=t&&t.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(YQ(),t)}),Vu=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=t&&t.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(KQ(),t),r(JQ(),t)}),QQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SDK_INFO=void 0;var e=xb(),r=Vu();t.SDK_INFO={[r.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[r.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[r.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.TelemetrySdkLanguageValues.NODEJS,[r.ResourceAttributes.TELEMETRY_SDK_VERSION]:e.VERSION}}),XQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unrefTimer=void 0;function e(r){r.unref()}t.unrefTimer=e}),ZQ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=t&&t.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(HQ(),t),r(VQ(),t),r(WQ(),t),r(GQ(),t),r(QQ(),t),r(XQ(),t)}),V1=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=t&&t.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(ZQ(),t)}),eX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTimeInput=t.isTimeInputHrTime=t.hrTimeToMicroseconds=t.hrTimeToMilliseconds=t.hrTimeToNanoseconds=t.hrTimeToTimeStamp=t.hrTimeDuration=t.timeInputToHrTime=t.hrTime=void 0;var e=V1(),r=9,n=Math.pow(10,r);function o(m){let g=m/1e3,v=Math.trunc(g),y=Number((g-v).toFixed(r))*n;return[v,y]}function i(){let m=e.otperformance.timeOrigin;if(typeof m!="number"){let g=e.otperformance;m=g.timing&&g.timing.fetchStart}return m}function s(m){let g=o(i()),v=o(typeof m=="number"?m:e.otperformance.now()),y=g[0]+v[0],b=g[1]+v[1];return b>n&&(b-=n,y+=1),[y,b]}t.hrTime=s;function a(m){if(p(m))return m;if(typeof m=="number")return m<i()?s(m):o(m);if(m instanceof Date)return o(m.getTime());throw TypeError("Invalid input type")}t.timeInputToHrTime=a;function c(m,g){let v=g[0]-m[0],y=g[1]-m[1];return y<0&&(v-=1,y+=n),[v,y]}t.hrTimeDuration=c;function l(m){let g=r,v=`${"0".repeat(g)}${m[1]}Z`,y=v.substr(v.length-g-1);return new Date(m[0]*1e3).toISOString().replace("000Z",y)}t.hrTimeToTimeStamp=l;function u(m){return m[0]*n+m[1]}t.hrTimeToNanoseconds=u;function d(m){return Math.round(m[0]*1e3+m[1]/1e6)}t.hrTimeToMilliseconds=d;function f(m){return Math.round(m[0]*1e6+m[1]/1e3)}t.hrTimeToMicroseconds=f;function p(m){return Array.isArray(m)&&m.length===2&&typeof m[0]=="number"&&typeof m[1]=="number"}t.isTimeInputHrTime=p;function h(m){return p(m)||typeof m=="number"||m instanceof Date}t.isTimeInput=h}),tX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),rX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExportResultCode=void 0;var e;(function(r){r[r.SUCCESS=0]="SUCCESS",r[r.FAILED=1]="FAILED"})(e=t.ExportResultCode||(t.ExportResultCode={}))}),nX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompositePropagator=void 0;var e=ft(),r=class{constructor(n={}){var o;this._propagators=(o=n.propagators)!==null&&o!==void 0?o:[],this._fields=Array.from(new Set(this._propagators.map(i=>typeof i.fields=="function"?i.fields():[]).reduce((i,s)=>i.concat(s),[])))}inject(n,o,i){for(let s of this._propagators)try{s.inject(n,o,i)}catch(a){e.diag.warn(`Failed to inject with ${s.constructor.name}. Err: ${a.message}`)}}extract(n,o,i){return this._propagators.reduce((s,a)=>{try{return a.extract(s,o,i)}catch(c){e.diag.warn(`Failed to inject with ${a.constructor.name}. Err: ${c.message}`)}return s},n)}fields(){return this._fields.slice()}};t.CompositePropagator=r}),oX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateKey=void 0;var e="[_0-9a-z-*/]",r=`[a-z]${e}{0,255}`,n=`[a-z0-9]${e}{0,240}@[a-z]${e}{0,13}`,o=new RegExp(`^(?:${r}|${n})$`),i=/^[ -~]{0,255}[!-~]$/,s=/,|=/;function a(l){return o.test(l)}t.validateKey=a;function c(l){return i.test(l)&&!s.test(l)}t.validateValue=c}),W1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceState=void 0;var e=oX(),r=32,n=512,o=",",i="=",s=class{constructor(a){this._internalState=new Map,a&&this._parse(a)}set(a,c){let l=this._clone();return l._internalState.has(a)&&l._internalState.delete(a),l._internalState.set(a,c),l}unset(a){let c=this._clone();return c._internalState.delete(a),c}get(a){return this._internalState.get(a)}serialize(){return this._keys().reduce((a,c)=>(a.push(c+i+this.get(c)),a),[]).join(o)}_parse(a){a.length>n||(this._internalState=a.split(o).reverse().reduce((c,l)=>{let u=l.trim(),d=u.indexOf(i);if(d!==-1){let f=u.slice(0,d),p=u.slice(d+1,l.length);e.validateKey(f)&&e.validateValue(p)&&c.set(f,p)}return c},new Map),this._internalState.size>r&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,r))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let a=new s;return a._internalState=new Map(this._internalState),a}};t.TraceState=s}),iX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpTraceContextPropagator=t.parseTraceParent=t.TRACE_STATE_HEADER=t.TRACE_PARENT_HEADER=void 0;var e=ft(),r=Sb(),n=W1();t.TRACE_PARENT_HEADER="traceparent",t.TRACE_STATE_HEADER="tracestate";var o="00",i="(?!ff)[\\da-f]{2}",s="(?![0]{32})[\\da-f]{32}",a="(?![0]{16})[\\da-f]{16}",c="[\\da-f]{2}",l=new RegExp(`^\\s?(${i})-(${s})-(${a})-(${c})(-.*)?\\s?$`);function u(f){let p=l.exec(f);return!p||p[1]==="00"&&p[5]?null:{traceId:p[2],spanId:p[3],traceFlags:parseInt(p[4],16)}}t.parseTraceParent=u;var d=class{inject(f,p,h){let m=e.trace.getSpanContext(f);if(!m||r.isTracingSuppressed(f)||!e.isSpanContextValid(m))return;let g=`${o}-${m.traceId}-${m.spanId}-0${Number(m.traceFlags||e.TraceFlags.NONE).toString(16)}`;h.set(p,t.TRACE_PARENT_HEADER,g),m.traceState&&h.set(p,t.TRACE_STATE_HEADER,m.traceState.serialize())}extract(f,p,h){let m=h.get(p,t.TRACE_PARENT_HEADER);if(!m)return f;let g=Array.isArray(m)?m[0]:m;if(typeof g!="string")return f;let v=u(g);if(!v)return f;v.isRemote=!0;let y=h.get(p,t.TRACE_STATE_HEADER);if(y){let b=Array.isArray(y)?y.join(","):y;v.traceState=new n.TraceState(typeof b=="string"?b:void 0)}return e.trace.setSpanContext(f,v)}fields(){return[t.TRACE_PARENT_HEADER,t.TRACE_STATE_HEADER]}};t.HttpTraceContextPropagator=d}),sX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),aX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRPCMetadata=t.deleteRPCMetadata=t.setRPCMetadata=t.RPCType=void 0;var e=ft(),r=e.createContextKey("OpenTelemetry SDK Context Key RPC_METADATA"),n;(function(a){a.HTTP="http"})(n=t.RPCType||(t.RPCType={}));function o(a,c){return a.setValue(r,c)}t.setRPCMetadata=o;function i(a){return a.deleteValue(r)}t.deleteRPCMetadata=i;function s(a){return a.getValue(r)}t.getRPCMetadata=s}),G1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlwaysOffSampler=void 0;var e=ft(),r=class{shouldSample(){return{decision:e.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};t.AlwaysOffSampler=r}),z1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlwaysOnSampler=void 0;var e=ft(),r=class{shouldSample(){return{decision:e.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};t.AlwaysOnSampler=r}),cX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParentBasedSampler=void 0;var e=ft(),r=U1(),n=G1(),o=z1(),i=class{constructor(s){var a,c,l,u;this._root=s.root,this._root||(r.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new o.AlwaysOnSampler),this._remoteParentSampled=(a=s.remoteParentSampled)!==null&&a!==void 0?a:new o.AlwaysOnSampler,this._remoteParentNotSampled=(c=s.remoteParentNotSampled)!==null&&c!==void 0?c:new n.AlwaysOffSampler,this._localParentSampled=(l=s.localParentSampled)!==null&&l!==void 0?l:new o.AlwaysOnSampler,this._localParentNotSampled=(u=s.localParentNotSampled)!==null&&u!==void 0?u:new n.AlwaysOffSampler}shouldSample(s,a,c,l,u,d){let f=e.trace.getSpanContext(s);return!f||!e.isSpanContextValid(f)?this._root.shouldSample(s,a,c,l,u,d):f.isRemote?f.traceFlags&e.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(s,a,c,l,u,d):this._remoteParentNotSampled.shouldSample(s,a,c,l,u,d):f.traceFlags&e.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(s,a,c,l,u,d):this._localParentNotSampled.shouldSample(s,a,c,l,u,d)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};t.ParentBasedSampler=i}),lX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceIdRatioBasedSampler=void 0;var e=ft(),r=class{constructor(n=0){this._ratio=n,this._ratio=this._normalize(n),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(n,o){return{decision:e.isValidTraceId(o)&&this._accumulate(o)<this._upperBound?e.SamplingDecision.RECORD_AND_SAMPLED:e.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(n){return typeof n!="number"||isNaN(n)?0:n>=1?1:n<=0?0:n}_accumulate(n){let o=0;for(let i=0;i<n.length/8;i++){let s=i*8,a=parseInt(n.slice(s,s+8),16);o=(o^a)>>>0}return o}};t.TraceIdRatioBasedSampler=r}),uX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUrlIgnored=t.urlMatches=void 0;function e(n,o){return typeof o=="string"?n===o:o.test(n)}t.urlMatches=e;function r(n,o){if(!o)return!1;for(let i of o)if(e(n,i))return!0;return!1}t.isUrlIgnored=r}),dX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWrapped=void 0;function e(r){return typeof r=="function"&&typeof r.__original=="function"&&typeof r.__unwrap=="function"&&r.__wrapped===!0}t.isWrapped=e}),qn=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=t&&t.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.baggageUtils=void 0,r(UQ(),t),r(BQ(),t),r(U1(),t),r(j1(),t),r(eX(),t),r(tX(),t),r(rX(),t),r(xb(),t),t.baggageUtils=$1(),r(V1(),t),r(nX(),t),r(iX(),t),r(sX(),t),r(aX(),t),r(G1(),t),r(z1(),t),r(cX(),t),r(lX(),t),r(Sb(),t),r(W1(),t),r(H1(),t),r(B1(),t),r(uX(),t),r(dX(),t),r(xb(),t)}),fX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExceptionEventName=void 0,t.ExceptionEventName="exception"}),K1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Span=void 0;var e=ft(),r=qn(),n=Vu(),o=fX(),i=class{constructor(s,a,c,l,u,d,f=[],p=r.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:e.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=c,this._spanContext=l,this.parentSpanId=d,this.kind=u,this.links=f,this.startTime=r.timeInputToHrTime(p),this.resource=s.resource,this.instrumentationLibrary=s.instrumentationLibrary,this._spanLimits=s.getSpanLimits(),this._spanProcessor=s.getActiveSpanProcessor(),this._spanProcessor.onStart(this,a)}spanContext(){return this._spanContext}setAttribute(s,a){return a==null||this._isSpanEnded()?this:s.length===0?(e.diag.warn(`Invalid attribute key: ${s}`),this):r.isAttributeValue(a)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,s)?this:(this.attributes[s]=a,this):(e.diag.warn(`Invalid attribute value set for key: ${s}`),this)}setAttributes(s){for(let[a,c]of Object.entries(s))this.setAttribute(a,c);return this}addEvent(s,a,c){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(e.diag.warn("Dropping extra events."),this.events.shift()),r.isTimeInput(a)&&(typeof c>"u"&&(c=a),a=void 0),typeof c>"u"&&(c=r.hrTime()),this.events.push({name:s,attributes:a,time:r.timeInputToHrTime(c)}),this)}setStatus(s){return this._isSpanEnded()?this:(this.status=s,this)}updateName(s){return this._isSpanEnded()?this:(this.name=s,this)}end(s=r.hrTime()){if(this._isSpanEnded()){e.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=r.timeInputToHrTime(s),this._duration=r.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&e.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(s,a=r.hrTime()){let c={};typeof s=="string"?c[n.SemanticAttributes.EXCEPTION_MESSAGE]=s:s&&(s.code?c[n.SemanticAttributes.EXCEPTION_TYPE]=s.code.toString():s.name&&(c[n.SemanticAttributes.EXCEPTION_TYPE]=s.name),s.message&&(c[n.SemanticAttributes.EXCEPTION_MESSAGE]=s.message),s.stack&&(c[n.SemanticAttributes.EXCEPTION_STACKTRACE]=s.stack)),c[n.SemanticAttributes.EXCEPTION_TYPE]||c[n.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(o.ExceptionEventName,c,a):e.diag.warn(`Failed to record an exception ${s}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&e.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}};t.Span=i}),Y1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildSamplerFromEnv=t.DEFAULT_CONFIG=void 0;var e=ft(),r=qn(),n=r.getEnv(),o=r.TracesSamplerValues.AlwaysOn;t.DEFAULT_CONFIG={sampler:i(n),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:r.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:r.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:r.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};function i(c=r.getEnv()){switch(c.OTEL_TRACES_SAMPLER){case r.TracesSamplerValues.AlwaysOn:return new r.AlwaysOnSampler;case r.TracesSamplerValues.AlwaysOff:return new r.AlwaysOffSampler;case r.TracesSamplerValues.ParentBasedAlwaysOn:return new r.ParentBasedSampler({root:new r.AlwaysOnSampler});case r.TracesSamplerValues.ParentBasedAlwaysOff:return new r.ParentBasedSampler({root:new r.AlwaysOffSampler});case r.TracesSamplerValues.TraceIdRatio:return new r.TraceIdRatioBasedSampler(a(c));case r.TracesSamplerValues.ParentBasedTraceIdRatio:return new r.ParentBasedSampler({root:new r.TraceIdRatioBasedSampler(a(c))});default:return e.diag.error(`OTEL_TRACES_SAMPLER value "${c.OTEL_TRACES_SAMPLER} invalid, defaulting to ${o}".`),new r.AlwaysOnSampler}}t.buildSamplerFromEnv=i;var s=1;function a(c){if(c.OTEL_TRACES_SAMPLER_ARG===void 0||c.OTEL_TRACES_SAMPLER_ARG==="")return e.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${s}.`),s;let l=Number(c.OTEL_TRACES_SAMPLER_ARG);return isNaN(l)?(e.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${s}.`),s):l<0||l>1?(e.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${s}.`),s):l}}),pX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeConfig=void 0;var e=Y1();function r(n){let o={sampler:e.buildSamplerFromEnv()},i=Object.assign({},e.DEFAULT_CONFIG,o,n);return i.spanLimits=Object.assign({},e.DEFAULT_CONFIG.spanLimits,n.spanLimits||{}),i}t.mergeConfig=r}),hX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tracer=void 0;var e=ft(),r=qn(),n=K1(),o=pX(),i=class{constructor(a,c,l){this._tracerProvider=l;let u=o.mergeConfig(c);this._sampler=u.sampler,this._spanLimits=u.spanLimits,this._idGenerator=c.idGenerator||new r.RandomIdGenerator,this.resource=l.resource,this.instrumentationLibrary=a}startSpan(a,c={},l=e.context.active()){var u,d;if(r.isTracingSuppressed(l))return e.diag.debug("Instrumentation suppressed, returning Noop Span"),e.trace.wrapSpanContext(e.INVALID_SPAN_CONTEXT);let f=s(c,l),p=this._idGenerator.generateSpanId(),h,m,g;!f||!e.trace.isSpanContextValid(f)?h=this._idGenerator.generateTraceId():(h=f.traceId,m=f.traceState,g=f.spanId);let v=(u=c.kind)!==null&&u!==void 0?u:e.SpanKind.INTERNAL,y=(d=c.links)!==null&&d!==void 0?d:[],b=r.sanitizeAttributes(c.attributes),C=this._sampler.shouldSample(c.root?e.trace.setSpanContext(l,e.INVALID_SPAN_CONTEXT):l,h,a,v,b,y),_=C.decision===e.SamplingDecision.RECORD_AND_SAMPLED?e.TraceFlags.SAMPLED:e.TraceFlags.NONE,P={traceId:h,spanId:p,traceFlags:_,traceState:m};if(C.decision===e.SamplingDecision.NOT_RECORD)return e.diag.debug("Recording is off, propagating context in a non-recording span"),e.trace.wrapSpanContext(P);let S=new n.Span(this,l,a,P,v,g,y,c.startTime);return S.setAttributes(Object.assign(b,C.attributes)),S}startActiveSpan(a,c,l,u){let d,f,p;if(arguments.length<2)return;arguments.length===2?p=c:arguments.length===3?(d=c,p=l):(d=c,f=l,p=u);let h=f!=null?f:e.context.active(),m=this.startSpan(a,d,h),g=e.trace.setSpan(h,m);return e.context.with(g,p,void 0,m)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};t.Tracer=i;function s(a,c){if(!a.root)return e.trace.getSpanContext(c)}}),mX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultServiceName=void 0;function e(){return`unknown_service:${process.argv0}`}t.defaultServiceName=e}),gX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detectResources=void 0;var e=Q1(),r=ft(),n=require("util"),o=async(s={})=>{let a=Object.assign(s),c=await Promise.all((a.detectors||[]).map(async l=>{try{let u=await l.detect(a);return r.diag.debug(`${l.constructor.name} found resource.`,u),u}catch(u){return r.diag.debug(`${l.constructor.name} failed: ${u.message}`),e.Resource.empty()}}));return i(c),c.reduce((l,u)=>l.merge(u),e.Resource.empty())};t.detectResources=o;var i=s=>{s.forEach(a=>{if(Object.keys(a.attributes).length>0){let c=n.inspect(a.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});r.diag.verbose(c)}})}}),vX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.envDetector=void 0;var e=ft(),r=qn(),n=Vu(),o=Pb(),i=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(s){let a={},c=r.getEnv(),l=c.OTEL_RESOURCE_ATTRIBUTES,u=c.OTEL_SERVICE_NAME;if(l)try{let d=this._parseResourceAttributes(l);Object.assign(a,d)}catch(d){e.diag.debug(`EnvDetector failed: ${d.message}`)}return u&&(a[n.ResourceAttributes.SERVICE_NAME]=u),new o.Resource(a)}_parseResourceAttributes(s){if(!s)return{};let a={},c=s.split(this._COMMA_SEPARATOR,-1);for(let l of c){let u=l.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(u.length!==2)continue;let[d,f]=u;if(d=d.trim(),f=f.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(d))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(f))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);a[d]=f}return a}_isValid(s){return s.length<=this._MAX_LENGTH&&this._isPrintableString(s)}_isPrintableString(s){for(let a=0;a<s.length;a++){let c=s.charAt(a);if(c<=" "||c>="~")return!1}return!0}_isValidAndNotEmpty(s){return s.length>0&&this._isValid(s)}};t.envDetector=new i}),yX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processDetector=void 0;var e=ft(),r=Vu(),n=Pb(),o=class{async detect(i){let s={[r.ResourceAttributes.PROCESS_PID]:process.pid,[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[r.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[r.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(s,i)}_getResourceAttributes(i,s){return i[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||i[r.ResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||i[r.ResourceAttributes.PROCESS_COMMAND]===""||i[r.ResourceAttributes.PROCESS_COMMAND_LINE]===""?(e.diag.debug("ProcessDetector failed: Unable to find required process resources. "),n.Resource.empty()):new n.Resource(Object.assign({},i))}};t.processDetector=new o}),wX=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=t&&t.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(vX(),t),r(yX(),t)}),CX=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=t&&t.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(mX(),t),r(gX(),t),r(wX(),t)}),J1=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=t&&t.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(CX(),t)}),Q1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Resource=void 0;var e=Vu(),r=qn(),n=J1(),o=class{constructor(i){this.attributes=i}static empty(){return o.EMPTY}static default(){return new o({[e.ResourceAttributes.SERVICE_NAME]:n.defaultServiceName(),[e.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.SDK_INFO[e.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[e.ResourceAttributes.TELEMETRY_SDK_NAME]:r.SDK_INFO[e.ResourceAttributes.TELEMETRY_SDK_NAME],[e.ResourceAttributes.TELEMETRY_SDK_VERSION]:r.SDK_INFO[e.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(i){if(!i||!Object.keys(i.attributes).length)return this;let s=Object.assign({},this.attributes,i.attributes);return new o(s)}};t.Resource=o,o.EMPTY=new o({})}),bX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),EX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),Pb=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=t&&t.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(Q1(),t),r(J1(),t),r(bX(),t),r(EX(),t)}),_X=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiSpanProcessor=void 0;var e=qn(),r=class{constructor(n){this._spanProcessors=n}forceFlush(){let n=[];for(let o of this._spanProcessors)n.push(o.forceFlush());return new Promise(o=>{Promise.all(n).then(()=>{o()}).catch(i=>{e.globalErrorHandler(i||new Error("MultiSpanProcessor: forceFlush failed")),o()})})}onStart(n,o){for(let i of this._spanProcessors)i.onStart(n,o)}onEnd(n){for(let o of this._spanProcessors)o.onEnd(n)}shutdown(){let n=[];for(let o of this._spanProcessors)n.push(o.shutdown());return new Promise((o,i)=>{Promise.all(n).then(()=>{o()},i)})}};t.MultiSpanProcessor=r}),X1=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopSpanProcessor=void 0;var e=class{onStart(r,n){}onEnd(r){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};t.NoopSpanProcessor=e}),SX=O((t,e)=>{var r=200,n="__lodash_hash_undefined__",o=800,i=16,s=9007199254740991,a="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",u="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Function]",h="[object GeneratorFunction]",m="[object Map]",g="[object Number]",v="[object Null]",y="[object Object]",b="[object Proxy]",C="[object RegExp]",_="[object Set]",P="[object String]",S="[object Undefined]",k="[object WeakMap]",T="[object ArrayBuffer]",A="[object DataView]",F="[object Float32Array]",j="[object Float64Array]",J="[object Int8Array]",Y="[object Int16Array]",ae="[object Int32Array]",te="[object Uint8Array]",M="[object Uint8ClampedArray]",L="[object Uint16Array]",q="[object Uint32Array]",W=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,ne=/^(?:0|[1-9]\d*)$/,X={};X[F]=X[j]=X[J]=X[Y]=X[ae]=X[te]=X[M]=X[L]=X[q]=!0,X[a]=X[c]=X[T]=X[u]=X[A]=X[d]=X[f]=X[p]=X[m]=X[g]=X[y]=X[C]=X[_]=X[P]=X[k]=!1;var ve=typeof global=="object"&&global&&global.Object===Object&&global,Pe=typeof self=="object"&&self&&self.Object===Object&&self,Se=ve||Pe||Function("return this")(),De=typeof t=="object"&&t&&!t.nodeType&&t,pe=De&&typeof e=="object"&&e&&!e.nodeType&&e,yt=pe&&pe.exports===De,It=yt&&ve.process,ye=function(){try{var D=pe&&pe.require&&pe.require("util").types;return D||It&&It.binding&&It.binding("util")}catch{}}(),fe=ye&&ye.isTypedArray;function Ee(D,B,G){switch(G.length){case 0:return D.call(B);case 1:return D.call(B,G[0]);case 2:return D.call(B,G[0],G[1]);case 3:return D.call(B,G[0],G[1],G[2])}return D.apply(B,G)}function je(D,B){for(var G=-1,le=Array(D);++G<D;)le[G]=B(G);return le}function es(D){return function(B){return D(B)}}function ts(D,B){return D==null?void 0:D[B]}function Q(D,B){return function(G){return D(B(G))}}var rs=Array.prototype,ns=Function.prototype,Rr=Object.prototype,ct=Se["__core-js_shared__"],Gn=ns.toString,dr=Rr.hasOwnProperty,Zo=function(){var D=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||"");return D?"Symbol(src)_1."+D:""}(),ei=Rr.toString,Ge=Gn.call(Object),os=RegExp("^"+Gn.call(dr).replace(W,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zn=yt?Se.Buffer:void 0,ti=Se.Symbol,ri=Se.Uint8Array,Et=zn?zn.allocUnsafe:void 0,Bt=Q(Object.getPrototypeOf,Object),wr=Object.create,Kn=Rr.propertyIsEnumerable,Or=rs.splice,Tt=ti?ti.toStringTag:void 0,At=function(){try{var D=hv(Object,"defineProperty");return D({},"",{}),D}catch{}}(),Te=zn?zn.isBuffer:void 0,_t=Math.max,ce=Date.now,ni=hv(Se,"Map"),kn=hv(Object,"create"),Ce=function(){function D(){}return function(B){if(!ws(B))return{};if(wr)return wr(B);D.prototype=B;var G=new D;return D.prototype=void 0,G}}();function Nr(D){var B=-1,G=D==null?0:D.length;for(this.clear();++B<G;){var le=D[B];this.set(le[0],le[1])}}function is(){this.__data__=kn?kn(null):{},this.size=0}function ss(D){var B=this.has(D)&&delete this.__data__[D];return this.size-=B?1:0,B}function as(D){var B=this.__data__;if(kn){var G=B[D];return G===n?void 0:G}return dr.call(B,D)?B[D]:void 0}function cs(D){var B=this.__data__;return kn?B[D]!==void 0:dr.call(B,D)}function ls(D,B){var G=this.__data__;return this.size+=this.has(D)?0:1,G[D]=kn&&B===void 0?n:B,this}Nr.prototype.clear=is,Nr.prototype.delete=ss,Nr.prototype.get=as,Nr.prototype.has=cs,Nr.prototype.set=ls;function fr(D){var B=-1,G=D==null?0:D.length;for(this.clear();++B<G;){var le=D[B];this.set(le[0],le[1])}}function us(){this.__data__=[],this.size=0}function ds(D){var B=this.__data__,G=ee(B,D);if(G<0)return!1;var le=B.length-1;return G==le?B.pop():Or.call(B,G,1),--this.size,!0}function er(D){var B=this.__data__,G=ee(B,D);return G<0?void 0:B[G][1]}function fs(D){return ee(this.__data__,D)>-1}function ps(D,B){var G=this.__data__,le=ee(G,D);return le<0?(++this.size,G.push([D,B])):G[le][1]=B,this}fr.prototype.clear=us,fr.prototype.delete=ds,fr.prototype.get=er,fr.prototype.has=fs,fr.prototype.set=ps;function Qr(D){var B=-1,G=D==null?0:D.length;for(this.clear();++B<G;){var le=D[B];this.set(le[0],le[1])}}function hs(){this.size=0,this.__data__={hash:new Nr,map:new(ni||fr),string:new Nr}}function ms(D){var B=rf(this,D).delete(D);return this.size-=B?1:0,B}function gs(D){return rf(this,D).get(D)}function Lr(D){return rf(this,D).has(D)}function vs(D,B){var G=rf(this,D),le=G.size;return G.set(D,B),this.size+=G.size==le?0:1,this}Qr.prototype.clear=hs,Qr.prototype.delete=ms,Qr.prototype.get=gs,Qr.prototype.has=Lr,Qr.prototype.set=vs;function Xr(D){var B=this.__data__=new fr(D);this.size=B.size}function ys(){this.__data__=new fr,this.size=0}function w(D){var B=this.__data__,G=B.delete(D);return this.size=B.size,G}function E(D){return this.__data__.get(D)}function x(D){return this.__data__.has(D)}function R(D,B){var G=this.__data__;if(G instanceof fr){var le=G.__data__;if(!ni||le.length<r-1)return le.push([D,B]),this.size=++G.size,this;G=this.__data__=new Qr(le)}return G.set(D,B),this.size=G.size,this}Xr.prototype.clear=ys,Xr.prototype.delete=w,Xr.prototype.get=E,Xr.prototype.has=x,Xr.prototype.set=R;function N(D,B){var G=vv(D),le=!G&&gv(D),$e=!G&&!le&&V_(D),rt=!G&&!le&&!$e&&G_(D),lt=G||le||$e||rt,Le=lt?je(D.length,String):[],ut=Le.length;for(var Zr in D)(B||dr.call(D,Zr))&&!(lt&&(Zr=="length"||$e&&(Zr=="offset"||Zr=="parent")||rt&&(Zr=="buffer"||Zr=="byteLength"||Zr=="byteOffset")||B_(Zr,ut)))&&Le.push(Zr);return Le}function $(D,B,G){(G!==void 0&&!nf(D[B],G)||G===void 0&&!(B in D))&&Z(D,B,G)}function H(D,B,G){var le=D[B];(!(dr.call(D,B)&&nf(le,G))||G===void 0&&!(B in D))&&Z(D,B,G)}function ee(D,B){for(var G=D.length;G--;)if(nf(D[G][0],B))return G;return-1}function Z(D,B,G){B=="__proto__"&&At?At(D,B,{configurable:!0,enumerable:!0,value:G,writable:!0}):D[B]=G}var qe=c3();function Re(D){return D==null?D===void 0?S:v:Tt&&Tt in Object(D)?l3(D):m3(D)}function Ie(D){return ul(D)&&Re(D)==a}function ke(D){if(!ws(D)||p3(D))return!1;var B=wv(D)?os:z;return B.test(w3(D))}function Xe(D){return ul(D)&&W_(D.length)&&!!X[Re(D)]}function XV(D){if(!ws(D))return h3(D);var B=H_(D),G=[];for(var le in D)le=="constructor"&&(B||!dr.call(D,le))||G.push(le);return G}function U_(D,B,G,le,$e){D!==B&&qe(B,function(rt,lt){if($e||($e=new Xr),ws(rt))ZV(D,B,lt,G,U_,le,$e);else{var Le=le?le(mv(D,lt),rt,lt+"",D,B,$e):void 0;Le===void 0&&(Le=rt),$(D,lt,Le)}},z_)}function ZV(D,B,G,le,$e,rt,lt){var Le=mv(D,G),ut=mv(B,G),Zr=lt.get(ut);if(Zr){$(D,G,Zr);return}var Fr=rt?rt(Le,ut,G+"",D,B,lt):void 0,dl=Fr===void 0;if(dl){var Cv=vv(ut),bv=!Cv&&V_(ut),Y_=!Cv&&!bv&&G_(ut);Fr=ut,Cv||bv||Y_?vv(Le)?Fr=Le:C3(Le)?Fr=i3(Le):bv?(dl=!1,Fr=r3(ut,!0)):Y_?(dl=!1,Fr=o3(ut,!0)):Fr=[]:b3(ut)||gv(ut)?(Fr=Le,gv(Le)?Fr=E3(Le):(!ws(Le)||wv(Le))&&(Fr=u3(ut))):dl=!1}dl&&(lt.set(ut,Fr),$e(Fr,ut,le,rt,lt),lt.delete(ut)),$(D,G,Fr)}function e3(D,B){return v3(g3(D,B,K_),D+"")}var t3=At?function(D,B){return At(D,"toString",{configurable:!0,enumerable:!1,value:S3(B),writable:!0})}:K_;function r3(D,B){if(B)return D.slice();var G=D.length,le=Et?Et(G):new D.constructor(G);return D.copy(le),le}function n3(D){var B=new D.constructor(D.byteLength);return new ri(B).set(new ri(D)),B}function o3(D,B){var G=B?n3(D.buffer):D.buffer;return new D.constructor(G,D.byteOffset,D.length)}function i3(D,B){var G=-1,le=D.length;for(B||(B=Array(le));++G<le;)B[G]=D[G];return B}function s3(D,B,G,le){var $e=!G;G||(G={});for(var rt=-1,lt=B.length;++rt<lt;){var Le=B[rt],ut=le?le(G[Le],D[Le],Le,G,D):void 0;ut===void 0&&(ut=D[Le]),$e?Z(G,Le,ut):H(G,Le,ut)}return G}function a3(D){return e3(function(B,G){var le=-1,$e=G.length,rt=$e>1?G[$e-1]:void 0,lt=$e>2?G[2]:void 0;for(rt=D.length>3&&typeof rt=="function"?($e--,rt):void 0,lt&&d3(G[0],G[1],lt)&&(rt=$e<3?void 0:rt,$e=1),B=Object(B);++le<$e;){var Le=G[le];Le&&D(B,Le,le,rt)}return B})}function c3(D){return function(B,G,le){for(var $e=-1,rt=Object(B),lt=le(B),Le=lt.length;Le--;){var ut=lt[D?Le:++$e];if(G(rt[ut],ut,rt)===!1)break}return B}}function rf(D,B){var G=D.__data__;return f3(B)?G[typeof B=="string"?"string":"hash"]:G.map}function hv(D,B){var G=ts(D,B);return ke(G)?G:void 0}function l3(D){var B=dr.call(D,Tt),G=D[Tt];try{D[Tt]=void 0;var le=!0}catch{}var $e=ei.call(D);return le&&(B?D[Tt]=G:delete D[Tt]),$e}function u3(D){return typeof D.constructor=="function"&&!H_(D)?Ce(Bt(D)):{}}function B_(D,B){var G=typeof D;return B=B!=null?B:s,!!B&&(G=="number"||G!="symbol"&&ne.test(D))&&D>-1&&D%1==0&&D<B}function d3(D,B,G){if(!ws(G))return!1;var le=typeof B;return(le=="number"?yv(G)&&B_(B,G.length):le=="string"&&B in G)?nf(G[B],D):!1}function f3(D){var B=typeof D;return B=="string"||B=="number"||B=="symbol"||B=="boolean"?D!=="__proto__":D===null}function p3(D){return!!Zo&&Zo in D}function H_(D){var B=D&&D.constructor,G=typeof B=="function"&&B.prototype||Rr;return D===G}function h3(D){var B=[];if(D!=null)for(var G in Object(D))B.push(G);return B}function m3(D){return ei.call(D)}function g3(D,B,G){return B=_t(B===void 0?D.length-1:B,0),function(){for(var le=arguments,$e=-1,rt=_t(le.length-B,0),lt=Array(rt);++$e<rt;)lt[$e]=le[B+$e];$e=-1;for(var Le=Array(B+1);++$e<B;)Le[$e]=le[$e];return Le[B]=G(lt),Ee(D,this,Le)}}function mv(D,B){if(!(B==="constructor"&&typeof D[B]=="function")&&B!="__proto__")return D[B]}var v3=y3(t3);function y3(D){var B=0,G=0;return function(){var le=ce(),$e=i-(le-G);if(G=le,$e>0){if(++B>=o)return arguments[0]}else B=0;return D.apply(void 0,arguments)}}function w3(D){if(D!=null){try{return Gn.call(D)}catch{}try{return D+""}catch{}}return""}function nf(D,B){return D===B||D!==D&&B!==B}var gv=Ie(function(){return arguments}())?Ie:function(D){return ul(D)&&dr.call(D,"callee")&&!Kn.call(D,"callee")},vv=Array.isArray;function yv(D){return D!=null&&W_(D.length)&&!wv(D)}function C3(D){return ul(D)&&yv(D)}var V_=Te||x3;function wv(D){if(!ws(D))return!1;var B=Re(D);return B==p||B==h||B==l||B==b}function W_(D){return typeof D=="number"&&D>-1&&D%1==0&&D<=s}function ws(D){var B=typeof D;return D!=null&&(B=="object"||B=="function")}function ul(D){return D!=null&&typeof D=="object"}function b3(D){if(!ul(D)||Re(D)!=y)return!1;var B=Bt(D);if(B===null)return!0;var G=dr.call(B,"constructor")&&B.constructor;return typeof G=="function"&&G instanceof G&&Gn.call(G)==Ge}var G_=fe?es(fe):Xe;function E3(D){return s3(D,z_(D))}function z_(D){return yv(D)?N(D,!0):XV(D)}var _3=a3(function(D,B,G){U_(D,B,G)});function S3(D){return function(){return D}}function K_(D){return D}function x3(){return!1}e.exports=_3}),xX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BatchSpanProcessorBase=void 0;var e=ft(),r=qn(),n=class{constructor(o,i){this._exporter=o,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let s=r.getEnv();this._maxExportBatchSize=typeof(i==null?void 0:i.maxExportBatchSize)=="number"?i.maxExportBatchSize:s.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(i==null?void 0:i.maxQueueSize)=="number"?i.maxQueueSize:s.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(i==null?void 0:i.scheduledDelayMillis)=="number"?i.scheduledDelayMillis:s.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(i==null?void 0:i.exportTimeoutMillis)=="number"?i.exportTimeoutMillis:s.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(o){}onEnd(o){this._isShutdown||this._addToBuffer(o)}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((o,i)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(o).catch(s=>{i(s)})}),this._shuttingDownPromise)}_addToBuffer(o){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(o),this._maybeStartTimer())}_flushAll(){return new Promise((o,i)=>{let s=[],a=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let c=0,l=a;c<l;c++)s.push(this._flushOneBatch());Promise.all(s).then(()=>{o()}).catch(i)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((o,i)=>{let s=setTimeout(()=>{i(new Error("Timeout"))},this._exportTimeoutMillis);e.context.with(r.suppressTracing(e.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),a=>{var c;clearTimeout(s),a.code===r.ExportResultCode.SUCCESS?o():i((c=a.error)!==null&&c!==void 0?c:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(o=>{r.globalErrorHandler(o)})},this._scheduledDelayMillis),r.unrefTimer(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};t.BatchSpanProcessorBase=n}),PX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BatchSpanProcessor=void 0;var e=xX(),r=class extends e.BatchSpanProcessorBase{onShutdown(){}};t.BatchSpanProcessor=r}),kX=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=t&&t.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(PX(),t)}),Z1=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=t&&t.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(kX(),t)}),IX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BasicTracerProvider=t.ForceFlushState=void 0;var e=ft(),r=qn(),n=Pb(),o=eF(),i=Y1(),s=_X(),a=X1(),c=SX(),l=Z1(),u;(function(f){f[f.resolved=0]="resolved",f[f.timeout=1]="timeout",f[f.error=2]="error",f[f.unresolved=3]="unresolved"})(u=t.ForceFlushState||(t.ForceFlushState={}));var d=class{constructor(f={}){var p;this._registeredSpanProcessors=[],this._tracers=new Map;let h=c({},i.DEFAULT_CONFIG,f);this.resource=(p=h.resource)!==null&&p!==void 0?p:n.Resource.empty(),this.resource=n.Resource.default().merge(this.resource),this._config=Object.assign({},h,{resource:this.resource});let m=this._buildExporterFromEnv();if(m!==void 0){let g=new l.BatchSpanProcessor(m);this.activeSpanProcessor=g}else this.activeSpanProcessor=new a.NoopSpanProcessor}getTracer(f,p){let h=`${f}@${p||""}`;return this._tracers.has(h)||this._tracers.set(h,new o.Tracer({name:f,version:p},this._config,this)),this._tracers.get(h)}addSpanProcessor(f){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(p=>e.diag.error("Error while trying to shutdown current span processor",p)),this._registeredSpanProcessors.push(f),this.activeSpanProcessor=new s.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(f={}){e.trace.setGlobalTracerProvider(this),f.propagator===void 0&&(f.propagator=this._buildPropagatorFromEnv()),f.contextManager&&e.context.setGlobalContextManager(f.contextManager),f.propagator&&e.propagation.setGlobalPropagator(f.propagator)}forceFlush(){let f=this._config.forceFlushTimeoutMillis,p=this._registeredSpanProcessors.map(h=>new Promise(m=>{let g,v=setTimeout(()=>{m(new Error(`Span processor did not completed within timeout period of ${f} ms`)),g=u.timeout},f);h.forceFlush().then(()=>{clearTimeout(v),g!==u.timeout&&(g=u.resolved,m(g))}).catch(y=>{clearTimeout(v),g=u.error,m(y)})}));return new Promise((h,m)=>{Promise.all(p).then(g=>{let v=g.filter(y=>y!==u.resolved);v.length>0?m(v):h()}).catch(g=>m([g]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(f){var p;return(p=d._registeredPropagators.get(f))===null||p===void 0?void 0:p()}_getSpanExporter(f){var p;return(p=d._registeredExporters.get(f))===null||p===void 0?void 0:p()}_buildPropagatorFromEnv(){let f=Array.from(new Set(r.getEnv().OTEL_PROPAGATORS)),p=f.map(h=>{let m=this._getPropagator(h);return m||e.diag.warn(`Propagator "${h}" requested through environment variable is unavailable.`),m}).reduce((h,m)=>(m&&h.push(m),h),[]);if(p.length!==0)return f.length===1?p[0]:new r.CompositePropagator({propagators:p})}_buildExporterFromEnv(){let f=r.getEnv().OTEL_TRACES_EXPORTER;if(f==="none")return;let p=this._getSpanExporter(f);return p||e.diag.error(`Exporter "${f}" requested through environment variable is unavailable.`),p}};t.BasicTracerProvider=d,d._registeredPropagators=new Map([["tracecontext",()=>new r.HttpTraceContextPropagator],["baggage",()=>new r.HttpBaggagePropagator]]),d._registeredExporters=new Map}),TX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleSpanExporter=void 0;var e=qn(),r=class{export(n,o){return this._sendSpans(n,o)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(n){return{traceId:n.spanContext().traceId,parentId:n.parentSpanId,name:n.name,id:n.spanContext().spanId,kind:n.kind,timestamp:e.hrTimeToMicroseconds(n.startTime),duration:e.hrTimeToMicroseconds(n.duration),attributes:n.attributes,status:n.status,events:n.events}}_sendSpans(n,o){for(let i of n)console.log(this._exportInfo(i));if(o)return o({code:e.ExportResultCode.SUCCESS})}};t.ConsoleSpanExporter=r}),AX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InMemorySpanExporter=void 0;var e=qn(),r=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(n,o){if(this._stopped)return o({code:e.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...n),setTimeout(()=>o({code:e.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};t.InMemorySpanExporter=r}),DX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),RX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleSpanProcessor=void 0;var e=ft(),r=qn(),n=class{constructor(o){this._exporter=o,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(o){}onEnd(o){this._isShutdown||e.context.with(r.suppressTracing(e.context.active()),()=>{this._exporter.export([o],i=>{var s;i.code!==r.ExportResultCode.SUCCESS&&r.globalErrorHandler((s=i.error)!==null&&s!==void 0?s:new Error(`SimpleSpanProcessor: span export failed (status ${i})`))})})}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((o,i)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(o).catch(s=>{i(s)})}),this._shuttingDownPromise)}};t.SimpleSpanProcessor=n}),OX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),NX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),LX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),FX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),eF=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=t&&t.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(hX(),t),r(IX(),t),r(Z1(),t),r(TX(),t),r(AX(),t),r(DX(),t),r(RX(),t),r(OX(),t),r(X1(),t),r(K1(),t),r(NX(),t),r(LX(),t),r(FX(),t)}),MX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.azureCoreTracing=t.AzureMonitorSymbol=void 0;var e=Pt();t.AzureMonitorSymbol="Azure_Monitor_Tracer";var r=!1,n=function(i){if(r)return i;try{var s=eF(),a=ft(),c=new s.BasicTracerProvider,l=c.getTracer("applicationinsights tracer"),u=i.setTracer;i.setTracer=function(d){var f=d.startSpan;d.startSpan=function(p,h,m){var g=f.call(this,p,h,m),v=g.end;return g.end=function(){var y=v.apply(this,arguments);return e.channel.publish("azure-coretracing",g),y},g},d[t.AzureMonitorSymbol]=!0,u.call(this,d)},a.trace.getSpan(a.context.active()),i.setTracer(l),r=!0}catch{}return i};t.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:n};function o(){e.channel.registerMonkeyPatch("@azure/core-tracing",t.azureCoreTracing)}t.enable=o}),qX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.bunyan=void 0;var e=Pt(),r=function(o){var i=o.prototype._emit;return o.prototype._emit=function(s,a){var c=i.apply(this,arguments);if(!a){var l=c;l||(l=i.call(this,s,!0)),e.channel.publish("bunyan",{level:s.level,result:l})}return c},o};t.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:r};function n(){e.channel.registerMonkeyPatch("bunyan",t.bunyan)}t.enable=n}),$X=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.console=void 0;var e=Pt(),r=require("stream"),n=function(i){var s=new r.Writable,a=new r.Writable;s.write=function(h){if(!h)return!0;var m=h.toString();return e.channel.publish("console",{message:m}),!0},a.write=function(h){if(!h)return!0;var m=h.toString();return e.channel.publish("console",{message:m,stderr:!0}),!0};for(var c=new i.Console(s,a),l=["log","info","warn","error","dir","time","timeEnd","trace","assert"],u=function(h){var m=i[h];m&&(i[h]=function(){if(c[h])try{c[h].apply(c,arguments)}catch{}return m.apply(i,arguments)})},d=0,f=l;d<f.length;d++){var p=f[d];u(p)}return i};t.console={versionSpecifier:">= 4.0.0",patch:n};function o(){e.channel.registerMonkeyPatch("console",t.console),require("console")}t.enable=o}),jX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.mongoCore=void 0;var e=Pt(),r=function(o){var i=o.Server.prototype.connect;return o.Server.prototype.connect=function(){var s=i.apply(this,arguments),a=this.s.pool.write;this.s.pool.write=function(){var l=typeof arguments[1]=="function"?1:2;return typeof arguments[l]=="function"&&(arguments[l]=e.channel.bindToContext(arguments[l])),a.apply(this,arguments)};var c=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=e.channel.bindToContext(arguments[1])),c.apply(this,arguments)},s},o};t.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:r};function n(){e.channel.registerMonkeyPatch("mongodb-core",t.mongoCore)}t.enable=n}),UX=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(c){for(var l,u=1,d=arguments.length;u<d;u++){l=arguments[u];for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(c[f]=l[f])}return c},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.mongo330=t.mongo3=t.mongo2=void 0;var r=Pt(),n=function(c){var l=c.instrument({operationIdGenerator:{next:function(){return r.channel.bindToContext(function(d){return d()})}}}),u={};return l.on("started",function(d){u[d.requestId]||(u[d.requestId]=e(e({},d),{time:new Date}))}),l.on("succeeded",function(d){var f=u[d.requestId];f&&delete u[d.requestId],typeof d.operationId=="function"?d.operationId(function(){return r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!0})}):r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!0})}),l.on("failed",function(d){var f=u[d.requestId];f&&delete u[d.requestId],typeof d.operationId=="function"?d.operationId(function(){return r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!1})}):r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!1})}),c},o=function(c){var l=c.instrument(),u={},d={};return l.on("started",function(f){u[f.requestId]||(d[f.requestId]=r.channel.bindToContext(function(p){return p()}),u[f.requestId]=e(e({},f),{time:new Date}))}),l.on("succeeded",function(f){var p=u[f.requestId];p&&delete u[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!0})}),delete d[f.requestId])}),l.on("failed",function(f){var p=u[f.requestId];p&&delete u[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!1})}),delete d[f.requestId])}),c},i=function(c){var l=c.Server.prototype.connect;return c.Server.prototype.connect=function(){var u=l.apply(this,arguments),d=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var p=typeof arguments[1]=="function"?1:2;return typeof arguments[p]=="function"&&(arguments[p]=r.channel.bindToContext(arguments[p])),d.apply(this,arguments)};var f=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=r.channel.bindToContext(arguments[1])),f.apply(this,arguments)},u},c},s=function(c){i(c);var l=c.instrument(),u={},d={};return l.on("started",function(f){u[f.requestId]||(d[f.requestId]=r.channel.bindToContext(function(p){return p()}),u[f.requestId]=f)}),l.on("succeeded",function(f){var p=u[f.requestId];p&&delete u[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!0})}),delete d[f.requestId])}),l.on("failed",function(f){var p=u[f.requestId];p&&delete u[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!1})}),delete d[f.requestId])}),c};t.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:n},t.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:o},t.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:s};function a(){r.channel.registerMonkeyPatch("mongodb",t.mongo2),r.channel.registerMonkeyPatch("mongodb",t.mongo3),r.channel.registerMonkeyPatch("mongodb",t.mongo330)}t.enable=a}),BX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.mysql=void 0;var e=Pt(),r=require("path"),n=function(i,s){var a=function(p,h){return function(m,g){var v=p[m];v&&(p[m]=function(){for(var y=arguments.length-1,b=arguments.length-1;b>=0;--b)if(typeof arguments[b]=="function"){y=b;break}else if(typeof arguments[b]<"u")break;var C=arguments[y],_={result:null,startTime:null,startDate:null};typeof C=="function"&&(g?(_.startTime=process.hrtime(),_.startDate=new Date,arguments[y]=e.channel.bindToContext(g(_,C))):arguments[y]=e.channel.bindToContext(C));var P=v.apply(this,arguments);return _.result=P,P})}},c=function(p,h){return a(p.prototype,h+".prototype")},l=["connect","changeUser","ping","statistics","end"],u=require(r.dirname(s)+"/lib/Connection");l.forEach(function(p){return c(u,"Connection")(p)}),a(u,"Connection")("createQuery",function(p,h){return function(m){var g=process.hrtime(p.startTime),v=g[0]*1e3+g[1]/1e6|0;e.channel.publish("mysql",{query:p.result,callbackArgs:arguments,err:m,duration:v,time:p.startDate}),h.apply(this,arguments)}});var d=["_enqueueCallback"],f=require(r.dirname(s)+"/lib/Pool");return d.forEach(function(p){return c(f,"Pool")(p)}),i};t.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:n};function o(){e.channel.registerMonkeyPatch("mysql",t.mysql)}t.enable=o}),HX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.postgresPool1=void 0;var e=Pt();function r(o){var i=o.prototype.connect;return o.prototype.connect=function(s){return s&&(arguments[0]=e.channel.bindToContext(s)),i.apply(this,arguments)},o}t.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:r};function n(){e.channel.registerMonkeyPatch("pg-pool",t.postgresPool1)}t.enable=n}),VX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.postgres7=t.postgres6=void 0;var e=Pt(),r=require("events");function n(s,a){var c=s.Client.prototype.query,l="__diagnosticOriginalFunc";return s.Client.prototype.query=function(u,d,f){var p={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},h=process.hrtime(),m;function g(v){v&&v[l]&&(v=v[l]);var y=e.channel.bindToContext(function(b,C){var _=process.hrtime(h);if(p.result=C&&{rowCount:C.rowCount,command:C.command},p.error=b,p.duration=Math.ceil(_[0]*1e3+_[1]/1e6),e.channel.publish("postgres",p),b){if(v)return v.apply(this,arguments);m&&m instanceof r.EventEmitter&&m.emit("error",b)}else v&&v.apply(this,arguments)});try{return Object.defineProperty(y,l,{value:v}),y}catch{return v}}try{typeof u=="string"?d instanceof Array?(p.query.preparable={text:u,args:d},f=g(f)):(p.query.text=u,f?f=g(f):d=g(d)):(typeof u.name=="string"?p.query.plan=u.name:u.values instanceof Array?p.query.preparable={text:u.text,args:u.values}:p.query.text=u.text,f?f=g(f):d?d=g(d):u.callback=g(u.callback))}catch{return c.apply(this,arguments)}return arguments[0]=u,arguments[1]=d,arguments[2]=f,arguments.length=arguments.length>3?arguments.length:3,m=c.apply(this,arguments),m},s}function o(s,a){var c=s.Client.prototype.query,l="__diagnosticOriginalFunc";return s.Client.prototype.query=function(u,d,f){var p=this,h=!!f,m={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},g=process.hrtime(),v;function y(b){b&&b[l]&&(b=b[l]);var C=e.channel.bindToContext(function(_,P){var S=process.hrtime(g);if(m.result=P&&{rowCount:P.rowCount,command:P.command},m.error=_,m.duration=Math.ceil(S[0]*1e3+S[1]/1e6),e.channel.publish("postgres",m),_){if(b)return b.apply(this,arguments);v&&v instanceof r.EventEmitter&&v.emit("error",_)}else b&&b.apply(this,arguments)});try{return Object.defineProperty(C,l,{value:b}),C}catch{return b}}try{typeof u=="string"?d instanceof Array?(m.query.preparable={text:u,args:d},h=typeof f=="function",f=h?y(f):f):(m.query.text=u,f?(h=typeof f=="function",f=h?y(f):f):(h=typeof d=="function",d=h?y(d):d)):(typeof u.name=="string"?m.query.plan=u.name:u.values instanceof Array?m.query.preparable={text:u.text,args:u.values}:m.query.text=u.text,f?(h=typeof f=="function",f=y(f)):d?(h=typeof d=="function",d=h?y(d):d):(h=typeof u.callback=="function",u.callback=h?y(u.callback):u.callback))}catch{return c.apply(this,arguments)}return arguments[0]=u,arguments[1]=d,arguments[2]=f,arguments.length=arguments.length>3?arguments.length:3,v=c.apply(this,arguments),h?v:v.then(function(b){return y()(void 0,b),new p._Promise(function(C,_){C(b)})}).catch(function(b){return y()(b,void 0),new p._Promise(function(C,_){_(b)})})},s}t.postgres6={versionSpecifier:"6.*",patch:n},t.postgres7={versionSpecifier:">=7.* <=8.*",patch:o};function i(){e.channel.registerMonkeyPatch("pg",t.postgres6),e.channel.registerMonkeyPatch("pg",t.postgres7)}t.enable=i}),WX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.redis=void 0;var e=Pt(),r=function(o){var i=o.RedisClient.prototype.internal_send_command;return o.RedisClient.prototype.internal_send_command=function(s){if(s){var a=s.callback;if(!a||!a.pubsubBound){var c=this.address,l=process.hrtime(),u=new Date;s.callback=e.channel.bindToContext(function(d,f){var p=process.hrtime(l),h=p[0]*1e3+p[1]/1e6|0;e.channel.publish("redis",{duration:h,address:c,commandObj:s,err:d,result:f,time:u}),typeof a=="function"&&a.apply(this,arguments)}),s.callback.pubsubBound=!0}}return i.call(this,s)},o};t.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:r};function n(){e.channel.registerMonkeyPatch("redis",t.redis)}t.enable=n}),GX=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(i){for(var s,a=1,c=arguments.length;a<c;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(i[l]=s[l])}return i},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.tedious=void 0;var r=Pt(),n=function(i){var s=i.Connection.prototype.makeRequest;return i.Connection.prototype.makeRequest=function(){function a(l){var u=process.hrtime(),d={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return r.channel.bindToContext(function(f,p,h){var m=process.hrtime(u);d=e(e({},d),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!f&&{rowCount:p,rows:h},query:{text:this.parametersByName.statement.value},error:f,duration:Math.ceil(m[0]*1e3+m[1]/1e6)}),r.channel.publish("tedious",d),l.call(this,f,p,h)})}var c=arguments[0];arguments[0].callback=a(c.callback),s.apply(this,arguments)},i};t.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:n};function o(){r.channel.registerMonkeyPatch("tedious",t.tedious)}t.enable=o}),zX=O(t=>{"use strict";var e=t&&t.__extends||function(){var a=function(c,l){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(u[f]=d[f])},a(c,l)};return function(c,l){a(c,l);function u(){this.constructor=c}c.prototype=l===null?Object.create(l):(u.prototype=l.prototype,new u)}}(),r=t&&t.__rest||function(a,c){var l={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&c.indexOf(u)<0&&(l[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)c.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(l[u[d]]=a[u[d]]);return l};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.winston2=t.winston3=void 0;var n=Pt(),o=function(a){var c=a.Logger.prototype.log,l,u=function(d,f,p){var h;return l===a.config.npm.levels?h="npm":l===a.config.syslog.levels?h="syslog":h="unknown",n.channel.publish("winston",{level:d,message:f,meta:p,levelKind:h}),f};return a.Logger.prototype.log=function(){return l=this.levels,!this.filters||this.filters.length===0?this.filters=[u]:this.filters[this.filters.length-1]!==u&&(this.filters=this.filters.filter(function(d){return d!==u}),this.filters.push(u)),c.apply(this,arguments)},a},i=function(a){var c=function(p,h){var m;return p.config.npm.levels[h]!=null?m="npm":p.config.syslog.levels[h]!=null?m="syslog":m="unknown",m},l=function(p){e(h,p);function h(m,g){var v=p.call(this,g)||this;return v.winston=m,v}return h.prototype.log=function(m,g){var v=m.message,y=m.level,b=m.meta,C=r(m,["message","level","meta"]);y=typeof Symbol.for=="function"?m[Symbol.for("level")]:y,v=m instanceof Error?m:v;var _=c(this.winston,y);b=b||{};for(var P in C)C.hasOwnProperty(P)&&(b[P]=C[P]);n.channel.publish("winston",{message:v,level:y,levelKind:_,meta:b}),g()},h}(a.Transport);function u(){var p=arguments[0].levels||a.config.npm.levels,h;for(var m in p)p.hasOwnProperty(m)&&(h=h===void 0||p[m]>p[h]?m:h);this.add(new l(a,{level:h}))}var d=a.createLogger;a.createLogger=function(){var p=arguments[0].levels||a.config.npm.levels,h;for(var m in p)p.hasOwnProperty(m)&&(h=h===void 0||p[m]>p[h]?m:h);var g=d.apply(this,arguments);g.add(new l(a,{level:h}));var v=g.configure;return g.configure=function(){v.apply(this,arguments),u.apply(this,arguments)},g};var f=a.configure;return a.configure=function(){f.apply(this,arguments),u.apply(this,arguments)},a.add(new l(a)),a};t.winston3={versionSpecifier:"3.x",patch:i},t.winston2={versionSpecifier:"2.x",patch:o};function s(){n.channel.registerMonkeyPatch("winston",t.winston2),n.channel.registerMonkeyPatch("winston",t.winston3)}t.enable=s}),KX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.tedious=t.pgPool=t.pg=t.winston=t.redis=t.mysql=t.mongodb=t.mongodbCore=t.console=t.bunyan=t.azuresdk=void 0;var e=MX();t.azuresdk=e;var r=qX();t.bunyan=r;var n=$X();t.console=n;var o=jX();t.mongodbCore=o;var i=UX();t.mongodb=i;var s=BX();t.mysql=s;var a=HX();t.pgPool=a;var c=VX();t.pg=c;var l=WX();t.redis=l;var u=GX();t.tedious=u;var d=zX();t.winston=d;function f(){r.enable(),n.enable(),o.enable(),i.enable(),s.enable(),c.enable(),a.enable(),l.enable(),d.enable(),e.enable(),u.enable()}t.enable=f}),kb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextPreservation=t.IsInitialized=void 0;var e=k1(),r=Jt();t.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var n="DiagnosticChannel";if(t.IsInitialized){o=KX(),i=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",s=i.split(","),a={bunyan:o.bunyan,console:o.console,mongodb:o.mongodb,mongodbCore:o.mongodbCore,mysql:o.mysql,redis:o.redis,pg:o.pg,pgPool:o.pgPool,winston:o.winston,azuresdk:o.azuresdk};for(c in a)s.indexOf(c)===-1&&(a[c].enable(),r.info(n,"Subscribed to "+c+" events"));s.length>0&&r.info(n,"Some modules will not be patched",s)}else r.info(n,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var o,i,s,a,c;function l(u){if(t.IsInitialized){var d=Pt();d.channel.addContextPreservation(u),d.channel.spanContextPropagator=e.AsyncScopeManager}}t.registerContextPreservation=l}),Wu=O((t,e)=>{"use strict";e.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}}),bn=O((t,e)=>{"use strict";var r=t&&t.__assign||function(){return r=Object.assign||function(u){for(var d,f=1,p=arguments.length;f<p;f++){d=arguments[f];for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(u[h]=d[h])}return u},r.apply(this,arguments)},n=require("http"),o=require("https"),i=require("url"),s=require("constants"),a=Jt(),c=Wu(),l=function(){function u(){}return u.getCookie=function(d,f){var p="";if(d&&d.length&&typeof f=="string")for(var h=d+"=",m=f.split(";"),g=0;g<m.length;g++){var f=m[g];if(f=u.trim(f),f&&f.indexOf(h)===0){p=f.substring(h.length,m[g].length);break}}return p},u.trim=function(d){return typeof d=="string"?d.replace(/^\s+|\s+$/g,""):""},u.int32ArrayToBase64=function(d){var f=function(v,y){return String.fromCharCode(v>>y&255)},p=function(v){return f(v,24)+f(v,16)+f(v,8)+f(v,0)},h=d.map(p).join(""),m=Buffer.from?Buffer.from(h,"binary"):new Buffer(h,"binary"),g=m.toString("base64");return g.substr(0,g.indexOf("="))},u.random32=function(){return 4294967296*Math.random()|0},u.randomu32=function(){return u.random32()+2147483648},u.w3cTraceId=function(){for(var d=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],f="",p,h=0;h<4;h++)p=u.random32(),f+=d[p&15]+d[p>>4&15]+d[p>>8&15]+d[p>>12&15]+d[p>>16&15]+d[p>>20&15]+d[p>>24&15]+d[p>>28&15];var m=d[8+Math.random()*4|0];return f.substr(0,8)+f.substr(9,4)+"4"+f.substr(13,3)+m+f.substr(16,3)+f.substr(19,12)},u.w3cSpanId=function(){return u.w3cTraceId().substring(16)},u.isValidW3CId=function(d){return d.length===32&&d!=="00000000000000000000000000000000"},u.isArray=function(d){return Object.prototype.toString.call(d)==="[object Array]"},u.isError=function(d){return d instanceof Error},u.isPrimitive=function(d){var f=typeof d;return f==="string"||f==="number"||f==="boolean"},u.isDate=function(d){return Object.prototype.toString.call(d)==="[object Date]"},u.msToTimeSpan=function(d){(isNaN(d)||d<0)&&(d=0);var f=(d/1e3%60).toFixed(7).replace(/0{0,4}$/,""),p=""+Math.floor(d/(1e3*60))%60,h=""+Math.floor(d/(1e3*60*60))%24,m=Math.floor(d/(1e3*60*60*24));f=f.indexOf(".")<2?"0"+f:f,p=p.length<2?"0"+p:p,h=h.length<2?"0"+h:h;var g=m>0?m+".":"";return g+h+":"+p+":"+f},u.extractError=function(d){var f=d;return{message:d.message,code:f.code||f.id||""}},u.extractObject=function(d){return d instanceof Error?u.extractError(d):typeof d.toJSON=="function"?d.toJSON():d},u.validateStringMap=function(d){if(typeof d!="object"){a.info("Invalid properties dropped from payload");return}var f={};for(var p in d){var h="",m=d[p],g=typeof m;if(u.isPrimitive(m))h=m.toString();else if(m===null||g==="undefined")h="";else if(g==="function"){a.info("key: "+p+" was function; will not serialize");continue}else{var v=u.isArray(m)?m:u.extractObject(m);try{u.isPrimitive(v)?h=v:h=JSON.stringify(v)}catch(y){h=m.constructor.name.toString()+" (Error: "+y.message+")",a.info("key: "+p+", could not be serialized")}}f[p]=h.substring(0,u.MAX_PROPERTY_LENGTH)}return f},u.canIncludeCorrelationHeader=function(d,f){var p=d&&d.config&&d.config.correlationHeaderExcludedDomains;if(!p||p.length==0||!f)return!0;for(var h=0;h<p.length;h++){var m=new RegExp(p[h].replace(/\./g,".").replace(/\*/g,".*"));if(m.test(i.parse(f).hostname))return!1}return!0},u.getCorrelationContextTarget=function(d,f){var p=d.headers&&d.headers[c.requestContextHeader];if(p)for(var h=p.split(","),m=0;m<h.length;++m){var g=h[m].split("=");if(g.length==2&&g[0]==f)return g[1]}},u.makeRequest=function(d,f,p,h){f&&f.indexOf("//")===0&&(f="https:"+f);var m=i.parse(f),g=r(r({},p),{host:m.hostname,port:m.port,path:m.pathname}),v=void 0;if(m.protocol==="https:"&&(v=d.proxyHttpsUrl||void 0),m.protocol==="http:"&&(v=d.proxyHttpUrl||void 0),v){v.indexOf("//")===0&&(v="http:"+v);var y=i.parse(v);y.protocol==="https:"?(a.info("Proxies that use HTTPS are not supported"),v=void 0):g=r(r({},g),{host:y.hostname,port:y.port||"80",path:f,headers:r(r({},g.headers),{Host:m.hostname})})}var b=m.protocol==="https:"&&!v;return b&&d.httpsAgent!==void 0?g.agent=d.httpsAgent:!b&&d.httpAgent!==void 0?g.agent=d.httpAgent:b&&(g.agent=u.tlsRestrictedAgent),b?o.request(g,h):n.request(g,h)},u.safeIncludeCorrelationHeader=function(d,f,p){var h;if(typeof p=="string")h=p;else if(p instanceof Array)h=p.join(",");else if(p&&typeof p.toString=="function")try{h=p.toString()}catch(m){a.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",m,p)}h?u.addCorrelationIdHeaderFromString(d,f,h):f.setHeader(c.requestContextHeader,c.requestContextSourceKey+"="+d.config.correlationId)},u.dumpObj=function(d){var f=Object.prototype.toString.call(d),p="";return f==="[object Error]"?p="{ stack: '"+d.stack+"', message: '"+d.message+"', name: '"+d.name+"'":p=JSON.stringify(d),f+p},u.addCorrelationIdHeaderFromString=function(d,f,p){var h=p.split(","),m=c.requestContextSourceKey+"=",g=h.some(function(v){return v.substring(0,m.length)===m});g||f.setHeader(c.requestContextHeader,p+","+c.requestContextSourceKey+"="+d.config.correlationId)},u.MAX_PROPERTY_LENGTH=8192,u.tlsRestrictedAgent=new o.Agent({keepAlive:!0,maxSockets:25,secureOptions:s.SSL_OP_NO_SSLv2|s.SSL_OP_NO_SSLv3|s.SSL_OP_NO_TLSv1|s.SSL_OP_NO_TLSv1_1}),u}();e.exports=l}),Ac=O((t,e)=>{"use strict";var r=bn(),n=Jt(),o=function(){function i(){}return i.queryCorrelationId=function(s,a){var c=s.profileQueryEndpoint+"/api/profiles/"+s.instrumentationKey+"/appId";if(i.completedLookups.hasOwnProperty(c)){a(i.completedLookups[c]);return}else if(i.pendingLookups[c]){i.pendingLookups[c].push(a);return}i.pendingLookups[c]=[a];var l=function(){if(i.pendingLookups[c]){var u={method:"GET",disableAppInsightsAutoCollection:!0};n.info(i.TAG,u);var d=r.makeRequest(s,c,u,function(f){if(f.statusCode===200){var p="";f.setEncoding("utf-8"),f.on("data",function(h){p+=h}),f.on("end",function(){n.info(i.TAG,p);var h=i.correlationIdPrefix+p;i.completedLookups[c]=h,i.pendingLookups[c]&&i.pendingLookups[c].forEach(function(m){return m(h)}),delete i.pendingLookups[c]})}else f.statusCode>=400&&f.statusCode<500?(i.completedLookups[c]=void 0,delete i.pendingLookups[c]):setTimeout(l,s.correlationIdRetryIntervalMs)});d&&(d.on("error",function(f){n.warn(i.TAG,f)}),d.end())}};setTimeout(l,0)},i.cancelCorrelationIdQuery=function(s,a){var c=s.profileQueryEndpoint+"/api/profiles/"+s.instrumentationKey+"/appId",l=i.pendingLookups[c];l&&(i.pendingLookups[c]=l.filter(function(u){return u!=a}),i.pendingLookups[c].length==0&&delete i.pendingLookups[c])},i.generateRequestId=function(s){if(s){s=s[0]=="|"?s:"|"+s,s[s.length-1]!=="."&&(s+=".");var a=(i.currentRootId++).toString(16);return i.appendSuffix(s,a,"_")}else return i.generateRootId()},i.getRootId=function(s){var a=s.indexOf(".");a<0&&(a=s.length);var c=s[0]==="|"?1:0;return s.substring(c,a)},i.generateRootId=function(){return"|"+r.w3cTraceId()+"."},i.appendSuffix=function(s,a,c){if(s.length+a.length<i.requestIdMaxLength)return s+a+c;var l=i.requestIdMaxLength-9;if(s.length>l)for(;l>1;--l){var u=s[l-1];if(u==="."||u==="_")break}if(l<=1)return i.generateRootId();for(a=r.randomu32().toString(16);a.length<8;)a="0"+a;return s.substring(0,l)+a+"#"},i.TAG="CorrelationIdManager",i.correlationIdPrefix="cid-v1:",i.w3cEnabled=!0,i.pendingLookups={},i.completedLookups={},i.requestIdMaxLength=1024,i.currentRootId=r.randomu32(),i}();e.exports=o}),fm=O((t,e)=>{"use strict";var r=bn(),n=Ac(),o=function(){function i(s,a){if(this.traceFlag=i.DEFAULT_TRACE_FLAG,this.version=i.DEFAULT_VERSION,s&&typeof s=="string")if(s.split(",").length>1)this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16);else{var c=s.trim().split("-"),l=c.length;l>=4?(this.version=c[0],this.traceId=c[1],this.spanId=c[2],this.traceFlag=c[3]):(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=i.DEFAULT_VERSION,this.traceId=r.w3cTraceId()),this.version==="00"&&l!==4&&(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=i.DEFAULT_VERSION,this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=i.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=i.DEFAULT_TRACE_FLAG,this.traceId=r.w3cTraceId()),i.isValidTraceId(this.traceId)||(this.traceId=r.w3cTraceId()),i.isValidSpanId(this.spanId)||(this.spanId=r.w3cTraceId().substr(0,16),this.traceId=r.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(a){this.parentId=a.slice();var u=n.getRootId(a);i.isValidTraceId(u)||(this.legacyRootId=u,u=r.w3cTraceId()),a.indexOf("|")!==-1&&(a=a.substring(1+a.substring(0,a.length-1).lastIndexOf("."),a.length-1)),this.traceId=u,this.spanId=a}else this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)}return i.isValidTraceId=function(s){return s.match(/^[0-9a-f]{32}$/)&&s!=="00000000000000000000000000000000"},i.isValidSpanId=function(s){return s.match(/^[0-9a-f]{16}$/)&&s!=="0000000000000000"},i.formatOpenTelemetryTraceFlags=function(s){var a="0"+s.toString(16);return a.substring(a.length-2)},i.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},i.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},i.prototype.updateSpanId=function(){this.spanId=r.w3cTraceId().substr(0,16)},i.DEFAULT_TRACE_FLAG="01",i.DEFAULT_VERSION="00",i}();e.exports=o}),tF=O((t,e)=>{"use strict";var r=function(){function n(o){this.fieldmap=[],o&&(this.fieldmap=this.parseHeader(o))}return n.prototype.toString=function(){var o=this.fieldmap;return!o||o.length==0?null:o.join(", ")},n.validateKeyChars=function(o){var i=o.split("@");if(i.length==2){var s=i[0].trim(),a=i[1].trim(),c=Boolean(s.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),l=Boolean(a.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return c&&l}else if(i.length==1)return Boolean(o.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},n.prototype.parseHeader=function(o){var i=[],s={},a=o.split(",");if(a.length>32)return null;for(var c=0,l=a;c<l.length;c++){var u=l[c],d=u.trim();if(d.length!==0){var f=d.split("=");if(f.length!==2||!n.validateKeyChars(f[0])||s[f[0]])return null;s[f[0]]=!0,i.push(d)}}return i},n.strict=!0,n}();e.exports=r}),$i=O((t,e)=>{"use strict";var r=function(){function n(){}return n}();e.exports=r}),YX=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=$i(),o=function(i){r(s,i);function s(){var a=i.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);e.exports=o}),rF=O((t,e)=>{"use strict";var r=function(){function n(){}return n}();e.exports=r}),JX=O((t,e)=>{"use strict";var r=function(){function n(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return n}();e.exports=r}),QX=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=rF(),o=function(i){r(s,i);function s(){return i.call(this)||this}return s}(n);e.exports=o}),nF=O((t,e)=>{"use strict";var r;(function(n){n[n.Measurement=0]="Measurement",n[n.Aggregation=1]="Aggregation"})(r||(r={})),e.exports=r}),XX=O((t,e)=>{"use strict";var r=nF(),n=function(){function o(){this.kind=r.Measurement}return o}();e.exports=n}),ZX=O((t,e)=>{"use strict";var r=function(){function n(){this.ver=1,this.sampleRate=100,this.tags={}}return n}();e.exports=r}),oF=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=$i(),o=function(i){r(s,i);function s(){var a=i.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);e.exports=o}),eZ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=$i(),o=function(i){r(s,i);function s(){var a=i.call(this)||this;return a.ver=2,a.exceptions=[],a.properties={},a.measurements={},a}return s}(n);e.exports=o}),tZ=O((t,e)=>{"use strict";var r=function(){function n(){this.hasFullStack=!0,this.parsedStack=[]}return n}();e.exports=r}),rZ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=$i(),o=function(i){r(s,i);function s(){var a=i.call(this)||this;return a.ver=2,a.properties={},a}return s}(n);e.exports=o}),nZ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=$i(),o=function(i){r(s,i);function s(){var a=i.call(this)||this;return a.ver=2,a.metrics=[],a.properties={},a}return s}(n);e.exports=o}),oZ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=oF(),o=function(i){r(s,i);function s(){var a=i.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);e.exports=o}),iZ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=$i(),o=function(i){r(s,i);function s(){var a=i.call(this)||this;return a.ver=2,a.success=!0,a.properties={},a.measurements={},a}return s}(n);e.exports=o}),sZ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=$i(),o=function(i){r(s,i);function s(){var a=i.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);e.exports=o}),aZ=O((t,e)=>{"use strict";var r;(function(n){n[n.Verbose=0]="Verbose",n[n.Information=1]="Information",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.Critical=4]="Critical"})(r||(r={})),e.exports=r}),cZ=O((t,e)=>{"use strict";var r=function(){function n(){}return n}();e.exports=r}),iF=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvailabilityData=YX(),t.Base=rF(),t.ContextTagKeys=JX(),t.Data=QX(),t.DataPoint=XX(),t.DataPointType=nF(),t.Domain=$i(),t.Envelope=ZX(),t.EventData=oF(),t.ExceptionData=eZ(),t.ExceptionDetails=tZ(),t.MessageData=rZ(),t.MetricData=nZ(),t.PageViewData=oZ(),t.RemoteDependencyData=iZ(),t.RequestData=sZ(),t.SeverityLevel=aZ(),t.StackFrame=cZ()}),lZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.domainSupportsProperties=t.RemoteDependencyDataConstants=void 0;var e=iF(),r=function(){function o(){}return o.TYPE_HTTP="Http",o.TYPE_AI="Http (tracked component)",o}();t.RemoteDependencyDataConstants=r;function n(o){return"properties"in o||o instanceof e.EventData||o instanceof e.ExceptionData||o instanceof e.MessageData||o instanceof e.MetricData||o instanceof e.PageViewData||o instanceof e.RemoteDependencyData||o instanceof e.RequestData}t.domainSupportsProperties=n}),uZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),dZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),fZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),pZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),hZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),mZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),gZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),vZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),yZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),wZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),CZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),bZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),EZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryType=t.TelemetryTypeString=t.baseTypeToTelemetryType=t.telemetryTypeToBaseType=void 0;function e(o){switch(o){case n.Event:return"EventData";case n.Exception:return"ExceptionData";case n.Trace:return"MessageData";case n.Metric:return"MetricData";case n.Request:return"RequestData";case n.Dependency:return"RemoteDependencyData";case n.Availability:return"AvailabilityData";case n.PageView:return"PageViewData"}}t.telemetryTypeToBaseType=e;function r(o){switch(o){case"EventData":return n.Event;case"ExceptionData":return n.Exception;case"MessageData":return n.Trace;case"MetricData":return n.Metric;case"RequestData":return n.Request;case"RemoteDependencyData":return n.Dependency;case"AvailabilityData":return n.Availability;case"PageViewData":return n.PageView}}t.baseTypeToTelemetryType=r,t.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var n;(function(o){o[o.Event=0]="Event",o[o.Exception=1]="Exception",o[o.Trace=2]="Trace",o[o.Metric=3]="Metric",o[o.Request=4]="Request",o[o.Dependency=5]="Dependency",o[o.Availability=6]="Availability",o[o.PageView=7]="PageView"})(n=t.TelemetryType||(t.TelemetryType={}))}),_Z=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=t&&t.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(uZ(),t),r(dZ(),t),r(fZ(),t),r(pZ(),t),r(hZ(),t),r(mZ(),t),r(gZ(),t),r(vZ(),t),r(yZ(),t),r(wZ(),t),r(CZ(),t),r(bZ(),t),r(EZ(),t)}),SZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),xZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),PZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),kZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),IZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),TZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),AZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),DZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),RZ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=t&&t.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(SZ(),t),r(xZ(),t),r(PZ(),t),r(kZ(),t),r(IZ(),t),r(TZ(),t),r(AZ(),t),r(DZ(),t)}),kr=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=t&&t.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(lZ(),t),r(iF(),t),r(_Z(),t),r(RZ(),t)}),sF=O((t,e)=>{"use strict";var r=function(){function n(){}return n.prototype.getUrl=function(){return this.url},n.prototype.RequestParser=function(){this.startTime=+new Date},n.prototype._setStatus=function(o,i){var s=+new Date;this.duration=s-this.startTime,this.statusCode=o;var a=this.properties||{};if(i){if(typeof i=="string")a.error=i;else if(i instanceof Error)a.error=i.message;else if(typeof i=="object")for(var c in i)a[c]=i[c]&&i[c].toString&&i[c].toString()}this.properties=a},n.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},n}();e.exports=r}),aF=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var f=function(p,h){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&(m[v]=g[v])},f(p,h)};return function(p,h){f(p,h);function m(){this.constructor=p}p.prototype=h===null?Object.create(h):(m.prototype=h.prototype,new m)}}(),n=require("url"),o=kr(),i=bn(),s=Wu(),a=sF(),c=Ac(),l=tF(),u=fm(),d=function(f){r(p,f);function p(h,m){var g=f.call(this)||this;return h&&(g.method=h.method,g.url=g._getAbsoluteUrl(h),g.startTime=+new Date,g.socketRemoteAddress=h.socket&&h.socket.remoteAddress,g.parseHeaders(h,m),h.connection&&(g.connectionRemoteAddress=h.connection.remoteAddress,g.legacySocketRemoteAddress=h.connection.socket&&h.connection.socket.remoteAddress)),g}return p.prototype.onError=function(h,m){this._setStatus(void 0,h),m&&(this.duration=m)},p.prototype.onResponse=function(h,m){this._setStatus(h.statusCode,void 0),m&&(this.duration=m)},p.prototype.getRequestTelemetry=function(h){var m={id:this.requestId,name:this.method+" "+n.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(h&&h.time?m.time=h.time:this.startTime&&(m.time=new Date(this.startTime)),h){for(var g in h)m[g]||(m[g]=h[g]);if(h.properties)for(var g in h.properties)m.properties[g]=h.properties[g]}return m},p.prototype.getRequestTags=function(h){var m={};for(var g in h)m[g]=h[g];return m[p.keys.locationIp]=h[p.keys.locationIp]||this._getIp(),m[p.keys.sessionId]=h[p.keys.sessionId]||this._getId("ai_session"),m[p.keys.userId]=h[p.keys.userId]||this._getId("ai_user"),m[p.keys.userAuthUserId]=h[p.keys.userAuthUserId]||this._getId("ai_authUser"),m[p.keys.operationName]=this.getOperationName(h),m[p.keys.operationParentId]=this.getOperationParentId(h),m[p.keys.operationId]=this.getOperationId(h),m},p.prototype.getOperationId=function(h){return h[p.keys.operationId]||this.operationId},p.prototype.getOperationParentId=function(h){return h[p.keys.operationParentId]||this.parentId||this.getOperationId(h)},p.prototype.getOperationName=function(h){return h[p.keys.operationName]||this.method+" "+n.parse(this.url).pathname},p.prototype.getRequestId=function(){return this.requestId},p.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},p.prototype.getTraceparent=function(){return this.traceparent},p.prototype.getTracestate=function(){return this.tracestate},p.prototype.getLegacyRootId=function(){return this.legacyRootId},p.prototype._getAbsoluteUrl=function(h){if(!h.headers)return h.url;var m=h.connection?h.connection.encrypted:null,g=n.parse(h.url),v=g.pathname,y=g.search,b=m||h.headers["x-forwarded-proto"]=="https"?"https":"http",C=n.format({protocol:b,host:h.headers.host,pathname:v,search:y});return C},p.prototype._getIp=function(){var h=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,m=function(v){var y=h.exec(v);if(y)return y[0]},g=m(this.rawHeaders["x-forwarded-for"])||m(this.rawHeaders["x-client-ip"])||m(this.rawHeaders["x-real-ip"])||m(this.connectionRemoteAddress)||m(this.socketRemoteAddress)||m(this.legacySocketRemoteAddress);return!g&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(g="127.0.0.1"),g},p.prototype._getId=function(h){var m=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",g=p.parseId(i.getCookie(h,m));return g},p.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},p.prototype.parseHeaders=function(h,m){if(this.rawHeaders=h.headers||h.rawHeaders,this.userAgent=h.headers&&h.headers["user-agent"],this.sourceCorrelationId=i.getCorrelationContextTarget(h,s.requestContextSourceKey),h.headers){var g=h.headers[s.traceStateHeader]?h.headers[s.traceStateHeader].toString():null,v=h.headers[s.traceparentHeader]?h.headers[s.traceparentHeader].toString():null,y=h.headers[s.requestIdHeader]?h.headers[s.requestIdHeader].toString():null,b=h.headers[s.parentIdHeader]?h.headers[s.parentIdHeader].toString():null,C=h.headers[s.rootIdHeader]?h.headers[s.rootIdHeader].toString():null;this.correlationContextHeader=h.headers[s.correlationContextHeader]?h.headers[s.correlationContextHeader].toString():null,c.w3cEnabled&&(v||g)?(this.traceparent=new u(v?v.toString():null),this.tracestate=v&&g&&new l(g?g.toString():null),this.setBackCompatFromThisTraceContext()):y?c.w3cEnabled?(this.traceparent=new u(null,y),this.setBackCompatFromThisTraceContext()):(this.parentId=y,this.requestId=c.generateRequestId(this.parentId),this.operationId=c.getRootId(this.requestId)):c.w3cEnabled?(this.traceparent=new u,this.traceparent.parentId=b,this.traceparent.legacyRootId=C||b,this.setBackCompatFromThisTraceContext()):(this.parentId=b,this.requestId=c.generateRequestId(C||this.parentId),this.correlationContextHeader=null,this.operationId=c.getRootId(this.requestId)),m&&(this.requestId=m,this.operationId=c.getRootId(this.requestId))}},p.parseId=function(h){var m=h.split("|");return m.length>0?m[0]:""},p.keys=new o.ContextTagKeys,p}(a);e.exports=d}),OZ=O((t,e)=>{t=e.exports=Q;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var w=Array.prototype.slice.call(arguments,0);w.unshift("SEMVER"),console.log.apply(console,w)}:r=function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,s=t.re=[],a=t.src=[],c=0,l=c++;a[l]="0|[1-9]\\d*";var u=c++;a[u]="[0-9]+";var d=c++;a[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=c++;a[f]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var p=c++;a[p]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var h=c++;a[h]="(?:"+a[l]+"|"+a[d]+")";var m=c++;a[m]="(?:"+a[u]+"|"+a[d]+")";var g=c++;a[g]="(?:-("+a[h]+"(?:\\."+a[h]+")*))";var v=c++;a[v]="(?:-?("+a[m]+"(?:\\."+a[m]+")*))";var y=c++;a[y]="[0-9A-Za-z-]+";var b=c++;a[b]="(?:\\+("+a[y]+"(?:\\."+a[y]+")*))";var C=c++,_="v?"+a[f]+a[g]+"?"+a[b]+"?";a[C]="^"+_+"$";var P="[v=\\s]*"+a[p]+a[v]+"?"+a[b]+"?",S=c++;a[S]="^"+P+"$";var k=c++;a[k]="((?:<|>)?=?)";var T=c++;a[T]=a[u]+"|x|X|\\*";var A=c++;a[A]=a[l]+"|x|X|\\*";var F=c++;a[F]="[v=\\s]*("+a[A]+")(?:\\.("+a[A]+")(?:\\.("+a[A]+")(?:"+a[g]+")?"+a[b]+"?)?)?";var j=c++;a[j]="[v=\\s]*("+a[T]+")(?:\\.("+a[T]+")(?:\\.("+a[T]+")(?:"+a[v]+")?"+a[b]+"?)?)?";var J=c++;a[J]="^"+a[k]+"\\s*"+a[F]+"$";var Y=c++;a[Y]="^"+a[k]+"\\s*"+a[j]+"$";var ae=c++;a[ae]="(?:^|[^\\d])(\\d{1,"+i+"})(?:\\.(\\d{1,"+i+"}))?(?:\\.(\\d{1,"+i+"}))?(?:$|[^\\d])";var te=c++;a[te]="(?:~>?)";var M=c++;a[M]="(\\s*)"+a[te]+"\\s+",s[M]=new RegExp(a[M],"g");var L="$1~",q=c++;a[q]="^"+a[te]+a[F]+"$";var W=c++;a[W]="^"+a[te]+a[j]+"$";var z=c++;a[z]="(?:\\^)";var ne=c++;a[ne]="(\\s*)"+a[z]+"\\s+",s[ne]=new RegExp(a[ne],"g");var X="$1^",ve=c++;a[ve]="^"+a[z]+a[F]+"$";var Pe=c++;a[Pe]="^"+a[z]+a[j]+"$";var Se=c++;a[Se]="^"+a[k]+"\\s*("+P+")$|^$";var De=c++;a[De]="^"+a[k]+"\\s*("+_+")$|^$";var pe=c++;a[pe]="(\\s*)"+a[k]+"\\s*("+P+"|"+a[F]+")",s[pe]=new RegExp(a[pe],"g");var yt="$1$2$3",It=c++;a[It]="^\\s*("+a[F]+")\\s+-\\s+("+a[F]+")\\s*$";var ye=c++;a[ye]="^\\s*("+a[j]+")\\s+-\\s+("+a[j]+")\\s*$";var fe=c++;for(a[fe]="(<|>)?=?\\s*\\*",Ee=0;Ee<c;Ee++)r(Ee,a[Ee]),s[Ee]||(s[Ee]=new RegExp(a[Ee]));var Ee;t.parse=je;function je(w,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),w instanceof Q)return w;if(typeof w!="string"||w.length>n)return null;var x=E.loose?s[S]:s[C];if(!x.test(w))return null;try{return new Q(w,E)}catch{return null}}t.valid=es;function es(w,E){var x=je(w,E);return x?x.version:null}t.clean=ts;function ts(w,E){var x=je(w.trim().replace(/^[=v]+/,""),E);return x?x.version:null}t.SemVer=Q;function Q(w,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),w instanceof Q){if(w.loose===E.loose)return w;w=w.version}else if(typeof w!="string")throw new TypeError("Invalid Version: "+w);if(w.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof Q))return new Q(w,E);r("SemVer",w,E),this.options=E,this.loose=!!E.loose;var x=w.trim().match(E.loose?s[S]:s[C]);if(!x)throw new TypeError("Invalid Version: "+w);if(this.raw=w,this.major=+x[1],this.minor=+x[2],this.patch=+x[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");x[4]?this.prerelease=x[4].split(".").map(function(R){if(/^[0-9]+$/.test(R)){var N=+R;if(N>=0&&N<o)return N}return R}):this.prerelease=[],this.build=x[5]?x[5].split("."):[],this.format()}Q.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Q.prototype.toString=function(){return this.version},Q.prototype.compare=function(w){return r("SemVer.compare",this.version,this.options,w),w instanceof Q||(w=new Q(w,this.options)),this.compareMain(w)||this.comparePre(w)},Q.prototype.compareMain=function(w){return w instanceof Q||(w=new Q(w,this.options)),ct(this.major,w.major)||ct(this.minor,w.minor)||ct(this.patch,w.patch)},Q.prototype.comparePre=function(w){if(w instanceof Q||(w=new Q(w,this.options)),this.prerelease.length&&!w.prerelease.length)return-1;if(!this.prerelease.length&&w.prerelease.length)return 1;if(!this.prerelease.length&&!w.prerelease.length)return 0;var E=0;do{var x=this.prerelease[E],R=w.prerelease[E];if(r("prerelease compare",E,x,R),x===void 0&&R===void 0)return 0;if(R===void 0)return 1;if(x===void 0)return-1;if(x!==R)return ct(x,R)}while(++E)},Q.prototype.inc=function(w,E){switch(w){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",E);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",E);break;case"prepatch":this.prerelease.length=0,this.inc("patch",E),this.inc("pre",E);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",E),this.inc("pre",E);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var x=this.prerelease.length;--x>=0;)typeof this.prerelease[x]=="number"&&(this.prerelease[x]++,x=-2);x===-1&&this.prerelease.push(0)}E&&(this.prerelease[0]===E?isNaN(this.prerelease[1])&&(this.prerelease=[E,0]):this.prerelease=[E,0]);break;default:throw new Error("invalid increment argument: "+w)}return this.format(),this.raw=this.version,this},t.inc=rs;function rs(w,E,x,R){typeof x=="string"&&(R=x,x=void 0);try{return new Q(w,x).inc(E,R).version}catch{return null}}t.diff=ns;function ns(w,E){if(wr(w,E))return null;var x=je(w),R=je(E),N="";if(x.prerelease.length||R.prerelease.length){N="pre";var $="prerelease"}for(var H in x)if((H==="major"||H==="minor"||H==="patch")&&x[H]!==R[H])return N+H;return $}t.compareIdentifiers=ct;var Rr=/^[0-9]+$/;function ct(w,E){var x=Rr.test(w),R=Rr.test(E);return x&&R&&(w=+w,E=+E),w===E?0:x&&!R?-1:R&&!x?1:w<E?-1:1}t.rcompareIdentifiers=Gn;function Gn(w,E){return ct(E,w)}t.major=dr;function dr(w,E){return new Q(w,E).major}t.minor=Zo;function Zo(w,E){return new Q(w,E).minor}t.patch=ei;function ei(w,E){return new Q(w,E).patch}t.compare=Ge;function Ge(w,E,x){return new Q(w,x).compare(new Q(E,x))}t.compareLoose=os;function os(w,E){return Ge(w,E,!0)}t.rcompare=zn;function zn(w,E,x){return Ge(E,w,x)}t.sort=ti;function ti(w,E){return w.sort(function(x,R){return t.compare(x,R,E)})}t.rsort=ri;function ri(w,E){return w.sort(function(x,R){return t.rcompare(x,R,E)})}t.gt=Et;function Et(w,E,x){return Ge(w,E,x)>0}t.lt=Bt;function Bt(w,E,x){return Ge(w,E,x)<0}t.eq=wr;function wr(w,E,x){return Ge(w,E,x)===0}t.neq=Kn;function Kn(w,E,x){return Ge(w,E,x)!==0}t.gte=Or;function Or(w,E,x){return Ge(w,E,x)>=0}t.lte=Tt;function Tt(w,E,x){return Ge(w,E,x)<=0}t.cmp=At;function At(w,E,x,R){switch(E){case"===":return typeof w=="object"&&(w=w.version),typeof x=="object"&&(x=x.version),w===x;case"!==":return typeof w=="object"&&(w=w.version),typeof x=="object"&&(x=x.version),w!==x;case"":case"=":case"==":return wr(w,x,R);case"!=":return Kn(w,x,R);case">":return Et(w,x,R);case">=":return Or(w,x,R);case"<":return Bt(w,x,R);case"<=":return Tt(w,x,R);default:throw new TypeError("Invalid operator: "+E)}}t.Comparator=Te;function Te(w,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),w instanceof Te){if(w.loose===!!E.loose)return w;w=w.value}if(!(this instanceof Te))return new Te(w,E);r("comparator",w,E),this.options=E,this.loose=!!E.loose,this.parse(w),this.semver===_t?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var _t={};Te.prototype.parse=function(w){var E=this.options.loose?s[Se]:s[De],x=w.match(E);if(!x)throw new TypeError("Invalid comparator: "+w);this.operator=x[1],this.operator==="="&&(this.operator=""),x[2]?this.semver=new Q(x[2],this.options.loose):this.semver=_t},Te.prototype.toString=function(){return this.value},Te.prototype.test=function(w){return r("Comparator.test",w,this.options.loose),this.semver===_t?!0:(typeof w=="string"&&(w=new Q(w,this.options)),At(w,this.operator,this.semver,this.options))},Te.prototype.intersects=function(w,E){if(!(w instanceof Te))throw new TypeError("a Comparator is required");(!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1});var x;if(this.operator==="")return x=new ce(w.value,E),er(this.value,x,E);if(w.operator==="")return x=new ce(this.value,E),er(w.semver,x,E);var R=(this.operator===">="||this.operator===">")&&(w.operator===">="||w.operator===">"),N=(this.operator==="<="||this.operator==="<")&&(w.operator==="<="||w.operator==="<"),$=this.semver.version===w.semver.version,H=(this.operator===">="||this.operator==="<=")&&(w.operator===">="||w.operator==="<="),ee=At(this.semver,"<",w.semver,E)&&(this.operator===">="||this.operator===">")&&(w.operator==="<="||w.operator==="<"),Z=At(this.semver,">",w.semver,E)&&(this.operator==="<="||this.operator==="<")&&(w.operator===">="||w.operator===">");return R||N||$&&H||ee||Z},t.Range=ce;function ce(w,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),w instanceof ce)return w.loose===!!E.loose&&w.includePrerelease===!!E.includePrerelease?w:new ce(w.raw,E);if(w instanceof Te)return new ce(w.value,E);if(!(this instanceof ce))return new ce(w,E);if(this.options=E,this.loose=!!E.loose,this.includePrerelease=!!E.includePrerelease,this.raw=w,this.set=w.split(/\s*\|\|\s*/).map(function(x){return this.parseRange(x.trim())},this).filter(function(x){return x.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+w);this.format()}ce.prototype.format=function(){return this.range=this.set.map(function(w){return w.join(" ").trim()}).join("||").trim(),this.range},ce.prototype.toString=function(){return this.range},ce.prototype.parseRange=function(w){var E=this.options.loose;w=w.trim();var x=E?s[ye]:s[It];w=w.replace(x,us),r("hyphen replace",w),w=w.replace(s[pe],yt),r("comparator trim",w,s[pe]),w=w.replace(s[M],L),w=w.replace(s[ne],X),w=w.split(/\s+/).join(" ");var R=E?s[Se]:s[De],N=w.split(" ").map(function($){return kn($,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(N=N.filter(function($){return!!$.match(R)})),N=N.map(function($){return new Te($,this.options)},this),N},ce.prototype.intersects=function(w,E){if(!(w instanceof ce))throw new TypeError("a Range is required");return this.set.some(function(x){return x.every(function(R){return w.set.some(function(N){return N.every(function($){return R.intersects($,E)})})})})},t.toComparators=ni;function ni(w,E){return new ce(w,E).set.map(function(x){return x.map(function(R){return R.value}).join(" ").trim().split(" ")})}function kn(w,E){return r("comp",w,E),w=ss(w,E),r("caret",w),w=Nr(w,E),r("tildes",w),w=cs(w,E),r("xrange",w),w=fr(w,E),r("stars",w),w}function Ce(w){return!w||w.toLowerCase()==="x"||w==="*"}function Nr(w,E){return w.trim().split(/\s+/).map(function(x){return is(x,E)}).join(" ")}function is(w,E){var x=E.loose?s[W]:s[q];return w.replace(x,function(R,N,$,H,ee){r("tilde",w,R,N,$,H,ee);var Z;return Ce(N)?Z="":Ce($)?Z=">="+N+".0.0 <"+(+N+1)+".0.0":Ce(H)?Z=">="+N+"."+$+".0 <"+N+"."+(+$+1)+".0":ee?(r("replaceTilde pr",ee),Z=">="+N+"."+$+"."+H+"-"+ee+" <"+N+"."+(+$+1)+".0"):Z=">="+N+"."+$+"."+H+" <"+N+"."+(+$+1)+".0",r("tilde return",Z),Z})}function ss(w,E){return w.trim().split(/\s+/).map(function(x){return as(x,E)}).join(" ")}function as(w,E){r("caret",w,E);var x=E.loose?s[Pe]:s[ve];return w.replace(x,function(R,N,$,H,ee){r("caret",w,R,N,$,H,ee);var Z;return Ce(N)?Z="":Ce($)?Z=">="+N+".0.0 <"+(+N+1)+".0.0":Ce(H)?N==="0"?Z=">="+N+"."+$+".0 <"+N+"."+(+$+1)+".0":Z=">="+N+"."+$+".0 <"+(+N+1)+".0.0":ee?(r("replaceCaret pr",ee),N==="0"?$==="0"?Z=">="+N+"."+$+"."+H+"-"+ee+" <"+N+"."+$+"."+(+H+1):Z=">="+N+"."+$+"."+H+"-"+ee+" <"+N+"."+(+$+1)+".0":Z=">="+N+"."+$+"."+H+"-"+ee+" <"+(+N+1)+".0.0"):(r("no pr"),N==="0"?$==="0"?Z=">="+N+"."+$+"."+H+" <"+N+"."+$+"."+(+H+1):Z=">="+N+"."+$+"."+H+" <"+N+"."+(+$+1)+".0":Z=">="+N+"."+$+"."+H+" <"+(+N+1)+".0.0"),r("caret return",Z),Z})}function cs(w,E){return r("replaceXRanges",w,E),w.split(/\s+/).map(function(x){return ls(x,E)}).join(" ")}function ls(w,E){w=w.trim();var x=E.loose?s[Y]:s[J];return w.replace(x,function(R,N,$,H,ee,Z){r("xRange",w,R,N,$,H,ee,Z);var qe=Ce($),Re=qe||Ce(H),Ie=Re||Ce(ee),ke=Ie;return N==="="&&ke&&(N=""),qe?N===">"||N==="<"?R="<0.0.0":R="*":N&&ke?(Re&&(H=0),ee=0,N===">"?(N=">=",Re?($=+$+1,H=0,ee=0):(H=+H+1,ee=0)):N==="<="&&(N="<",Re?$=+$+1:H=+H+1),R=N+$+"."+H+"."+ee):Re?R=">="+$+".0.0 <"+(+$+1)+".0.0":Ie&&(R=">="+$+"."+H+".0 <"+$+"."+(+H+1)+".0"),r("xRange return",R),R})}function fr(w,E){return r("replaceStars",w,E),w.trim().replace(s[fe],"")}function us(w,E,x,R,N,$,H,ee,Z,qe,Re,Ie,ke){return Ce(x)?E="":Ce(R)?E=">="+x+".0.0":Ce(N)?E=">="+x+"."+R+".0":E=">="+E,Ce(Z)?ee="":Ce(qe)?ee="<"+(+Z+1)+".0.0":Ce(Re)?ee="<"+Z+"."+(+qe+1)+".0":Ie?ee="<="+Z+"."+qe+"."+Re+"-"+Ie:ee="<="+ee,(E+" "+ee).trim()}ce.prototype.test=function(w){if(!w)return!1;typeof w=="string"&&(w=new Q(w,this.options));for(var E=0;E<this.set.length;E++)if(ds(this.set[E],w,this.options))return!0;return!1};function ds(w,E,x){for(var R=0;R<w.length;R++)if(!w[R].test(E))return!1;if(E.prerelease.length&&!x.includePrerelease){for(R=0;R<w.length;R++)if(r(w[R].semver),w[R].semver!==_t&&w[R].semver.prerelease.length>0){var N=w[R].semver;if(N.major===E.major&&N.minor===E.minor&&N.patch===E.patch)return!0}return!1}return!0}t.satisfies=er;function er(w,E,x){try{E=new ce(E,x)}catch{return!1}return E.test(w)}t.maxSatisfying=fs;function fs(w,E,x){var R=null,N=null;try{var $=new ce(E,x)}catch{return null}return w.forEach(function(H){$.test(H)&&(!R||N.compare(H)===-1)&&(R=H,N=new Q(R,x))}),R}t.minSatisfying=ps;function ps(w,E,x){var R=null,N=null;try{var $=new ce(E,x)}catch{return null}return w.forEach(function(H){$.test(H)&&(!R||N.compare(H)===1)&&(R=H,N=new Q(R,x))}),R}t.minVersion=Qr;function Qr(w,E){w=new ce(w,E);var x=new Q("0.0.0");if(w.test(x)||(x=new Q("0.0.0-0"),w.test(x)))return x;x=null;for(var R=0;R<w.set.length;++R){var N=w.set[R];N.forEach(function($){var H=new Q($.semver.version);switch($.operator){case">":H.prerelease.length===0?H.patch++:H.prerelease.push(0),H.raw=H.format();case"":case">=":(!x||Et(x,H))&&(x=H);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+$.operator)}})}return x&&w.test(x)?x:null}t.validRange=hs;function hs(w,E){try{return new ce(w,E).range||"*"}catch{return null}}t.ltr=ms;function ms(w,E,x){return Lr(w,E,"<",x)}t.gtr=gs;function gs(w,E,x){return Lr(w,E,">",x)}t.outside=Lr;function Lr(w,E,x,R){w=new Q(w,R),E=new ce(E,R);var N,$,H,ee,Z;switch(x){case">":N=Et,$=Tt,H=Bt,ee=">",Z=">=";break;case"<":N=Bt,$=Or,H=Et,ee="<",Z="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(er(w,E,R))return!1;for(var qe=0;qe<E.set.length;++qe){var Re=E.set[qe],Ie=null,ke=null;if(Re.forEach(function(Xe){Xe.semver===_t&&(Xe=new Te(">=0.0.0")),Ie=Ie||Xe,ke=ke||Xe,N(Xe.semver,Ie.semver,R)?Ie=Xe:H(Xe.semver,ke.semver,R)&&(ke=Xe)}),Ie.operator===ee||Ie.operator===Z||(!ke.operator||ke.operator===ee)&&$(w,ke.semver)||ke.operator===Z&&H(w,ke.semver))return!1}return!0}t.prerelease=vs;function vs(w,E){var x=je(w,E);return x&&x.prerelease.length?x.prerelease:null}t.intersects=Xr;function Xr(w,E,x){return w=new ce(w,x),E=new ce(E,x),w.intersects(E)}t.coerce=ys;function ys(w){if(w instanceof Q)return w;if(typeof w!="string")return null;var E=w.match(s[ae]);return E==null?null:je(E[1]+"."+(E[2]||"0")+"."+(E[3]||"0"))}}),Ib=O((t,e)=>{"use strict";function r(u){return typeof u=="function"}var n=console.error.bind(console);function o(u,d,f){var p=!!u[d]&&u.propertyIsEnumerable(d);Object.defineProperty(u,d,{configurable:!0,enumerable:p,writable:!0,value:f})}function i(u){u&&u.logger&&(r(u.logger)?n=u.logger:n("new logger isn't a function, not replacing"))}function s(u,d,f){if(!u||!u[d]){n("no original function "+d+" to wrap");return}if(!f){n("no wrapper function"),n(new Error().stack);return}if(!r(u[d])||!r(f)){n("original object and wrapper must be functions");return}var p=u[d],h=f(p,d);return o(h,"__original",p),o(h,"__unwrap",function(){u[d]===h&&o(u,d,p)}),o(h,"__wrapped",!0),o(u,d,h),h}function a(u,d,f){if(u)Array.isArray(u)||(u=[u]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(d&&Array.isArray(d))){n("must provide one or more functions to wrap on modules");return}u.forEach(function(p){d.forEach(function(h){s(p,h,f)})})}function c(u,d){if(!u||!u[d]){n("no function to unwrap."),n(new Error().stack);return}if(!u[d].__unwrap)n("no original to unwrap to -- has "+d+" already been unwrapped?");else return u[d].__unwrap()}function l(u,d){if(u)Array.isArray(u)||(u=[u]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(d&&Array.isArray(d))){n("must provide one or more functions to unwrap on modules");return}u.forEach(function(f){d.forEach(function(p){c(f,p)})})}i.wrap=s,i.massWrap=a,i.unwrap=c,i.massUnwrap=l,e.exports=i}),Tb=O((t,e)=>{"use strict";var r=Ib(),n=r.wrap,o=r.unwrap,i="wrap@before";function s(d,f,p){var h=!!d[f]&&d.propertyIsEnumerable(f);Object.defineProperty(d,f,{configurable:!0,enumerable:h,writable:!0,value:p})}function a(d,f){for(var p=f.length,h=0;h<p;h++){var m=f[h],g=d[i];if(typeof g=="function")g(m);else if(Array.isArray(g))for(var v=g.length,y=0;y<v;y++)g[y](m)}}function c(d,f){var p;return p=d._events&&d._events[f],Array.isArray(p)||(p?p=[p]:p=[]),p}function l(d,f,p){var h=c(d,f),m=h.filter(function(g){return p.indexOf(g)===-1});m.length>0&&a(d,m)}function u(d,f){if(d){var p=d;if(typeof d=="function")p=f(d);else if(Array.isArray(d)){p=[];for(var h=0;h<d.length;h++)p[h]=f(d[h])}return p}}e.exports=function(d,f,p){if(!d||!d.on||!d.addListener||!d.removeListener||!d.emit)throw new Error("can only wrap real EEs");if(!f)throw new Error("must have function to run on listener addition");if(!p)throw new Error("must have function to wrap listeners when emitting");function h(g){return function(v,y){var b=c(this,v).slice();try{var C=g.call(this,v,y);return l(this,v,b),C}finally{this.on.__wrapped||n(this,"on",h),this.addListener.__wrapped||n(this,"addListener",h)}}}function m(g){return function(v){if(!this._events||!this._events[v])return g.apply(this,arguments);var y=this._events[v];function b(C){return function(){this._events[v]=y;try{return C.apply(this,arguments)}finally{y=this._events[v],this._events[v]=u(y,p)}}}n(this,"removeListener",b);try{return this._events[v]=u(y,p),g.apply(this,arguments)}finally{o(this,"removeListener"),this._events[v]=y}}}d[i]?typeof d[i]=="function"?s(d,i,[d[i],f]):Array.isArray(d[i])&&d[i].push(f):s(d,i,f),d.__wrapped||(n(d,"addListener",h),n(d,"on",h),n(d,"emit",m),s(d,"__unwrap",function(){o(d,"addListener"),o(d,"on"),o(d,"emit"),delete d[i],delete d.__wrapped}),s(d,"__wrapped",!0))}}),NZ=O((t,e)=>{"use strict";var r=require("util"),n=require("assert"),o=Tb(),i=require("async_hooks"),s="cls@contexts",a="error@context",c=process.env.DEBUG_CLS_HOOKED,l=-1;e.exports={getNamespace:d,createNamespace:f,destroyNamespace:p,reset:h,ERROR_SYMBOL:a};function u(g){this.name=g,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}u.prototype.set=function(g,v){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[g]=v,c){let y=" ".repeat(this._indent<0?0:this._indent);m(y+"CONTEXT-SET KEY:"+g+"="+v+" in ns:"+this.name+" currentUid:"+l+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return v},u.prototype.get=function(g){if(!this.active){if(c){let v=i.currentId(),y=i.triggerAsyncId(),b=" ".repeat(this._indent<0?0:this._indent);m(`${b}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${g}=undefined currentUid:${l} asyncHooksCurrentId:${v} triggerId:${y} len:${this._set.length}`)}return}if(c){let v=i.executionAsyncId(),y=i.triggerAsyncId(),b=" ".repeat(this._indent<0?0:this._indent);m(b+"CONTEXT-GETTING KEY:"+g+"="+this.active[g]+" ("+this.name+") currentUid:"+l+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),m(`${b}CONTEXT-GETTING KEY: (${this.name}) ${g}=${this.active[g]} currentUid:${l} asyncHooksCurrentId:${v} triggerId:${y} len:${this._set.length} active:${r.inspect(this.active)}`)}return this.active[g]},u.prototype.createContext=function(){let g=Object.create(this.active?this.active:Object.prototype);if(g._ns_name=this.name,g.id=l,c){let v=i.executionAsyncId(),y=i.triggerAsyncId(),b=" ".repeat(this._indent<0?0:this._indent);m(`${b}CONTEXT-CREATED Context: (${this.name}) currentUid:${l} asyncHooksCurrentId:${v} triggerId:${y} len:${this._set.length} context:${r.inspect(g,{showHidden:!0,depth:2,colors:!0})}`)}return g},u.prototype.run=function(g){let v=this.createContext();this.enter(v);try{if(c){let y=i.triggerAsyncId(),b=i.executionAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);m(`${C}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${l} triggerId:${y} asyncHooksCurrentId:${b} len:${this._set.length} context:${r.inspect(v)}`)}return g(v),v}catch(y){throw y&&(y[a]=v),y}finally{if(c){let y=i.triggerAsyncId(),b=i.executionAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);m(`${C}CONTEXT-RUN END: (${this.name}) currentUid:${l} triggerId:${y} asyncHooksCurrentId:${b} len:${this._set.length} ${r.inspect(v)}`)}this.exit(v)}},u.prototype.runAndReturn=function(g){let v;return this.run(function(y){v=g(y)}),v},u.prototype.runPromise=function(g){let v=this.createContext();this.enter(v);let y=g(v);if(!y||!y.then||!y.catch)throw new Error("fn must return a promise.");return c&&m("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(v)),y.then(b=>(c&&m("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(v)),this.exit(v),b)).catch(b=>{throw b[a]=v,c&&m("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(v)),this.exit(v),b})},u.prototype.bind=function(g,v){v||(this.active?v=this.active:v=this.createContext());let y=this;return function(){y.enter(v);try{return g.apply(this,arguments)}catch(b){throw b&&(b[a]=v),b}finally{y.exit(v)}}},u.prototype.enter=function(g){if(n.ok(g,"context must be provided for entering"),c){let v=i.executionAsyncId(),y=i.triggerAsyncId(),b=" ".repeat(this._indent<0?0:this._indent);m(`${b}CONTEXT-ENTER: (${this.name}) currentUid:${l} triggerId:${y} asyncHooksCurrentId:${v} len:${this._set.length} ${r.inspect(g)}`)}this._set.push(this.active),this.active=g},u.prototype.exit=function(g){if(n.ok(g,"context must be provided for exiting"),c){let y=i.executionAsyncId(),b=i.triggerAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);m(`${C}CONTEXT-EXIT: (${this.name}) currentUid:${l} triggerId:${b} asyncHooksCurrentId:${y} len:${this._set.length} ${r.inspect(g)}`)}if(this.active===g){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let v=this._set.lastIndexOf(g);v<0?(c&&m("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(g)),n.ok(v>=0,`context not currently entered; can't exit. 
`+r.inspect(this)+`
`+r.inspect(g))):(n.ok(v,"can't remove top context"),this._set.splice(v,1))},u.prototype.bindEmitter=function(g){n.ok(g.on&&g.addListener&&g.emit,"can only bind real EEs");let v=this,y="context@"+this.name;function b(_){!_||(_[s]||(_[s]=Object.create(null)),_[s][y]={namespace:v,context:v.active})}function C(_){if(!(_&&_[s]))return _;let P=_,S=_[s];return Object.keys(S).forEach(function(k){let T=S[k];P=T.namespace.bind(P,T.context)}),P}o(g,b,C)},u.prototype.fromException=function(g){return g[a]};function d(g){return process.namespaces[g]}function f(g){n.ok(g,"namespace must be given a name."),c&&m(`NS-CREATING NAMESPACE (${g})`);let v=new u(g);return v.id=l,i.createHook({init(y,b,C,_){if(l=i.executionAsyncId(),v.active){if(v._contexts.set(y,v.active),c){let P=" ".repeat(v._indent<0?0:v._indent);m(`${P}INIT [${b}] (${g}) asyncId:${y} currentUid:${l} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${_}`)}}else if(l===0){let P=i.triggerAsyncId(),S=v._contexts.get(P);if(S){if(v._contexts.set(y,S),c){let k=" ".repeat(v._indent<0?0:v._indent);m(`${k}INIT USING CONTEXT FROM TRIGGERID [${b}] (${g}) asyncId:${y} currentUid:${l} triggerId:${P} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${_}`)}}else if(c){let k=" ".repeat(v._indent<0?0:v._indent);m(`${k}INIT MISSING CONTEXT [${b}] (${g}) asyncId:${y} currentUid:${l} triggerId:${P} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${_}`)}}if(c&&b==="PROMISE"){m(r.inspect(_,{showHidden:!0}));let P=_.parentId,S=" ".repeat(v._indent<0?0:v._indent);m(`${S}INIT RESOURCE-PROMISE [${b}] (${g}) parentId:${P} asyncId:${y} currentUid:${l} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${_}`)}},before(y){l=i.executionAsyncId();let b;if(b=v._contexts.get(y)||v._contexts.get(l),b){if(c){let C=i.triggerAsyncId(),_=" ".repeat(v._indent<0?0:v._indent);m(`${_}BEFORE (${g}) asyncId:${y} currentUid:${l} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(b)}`),v._indent+=2}v.enter(b)}else if(c){let C=i.triggerAsyncId(),_=" ".repeat(v._indent<0?0:v._indent);m(`${_}BEFORE MISSING CONTEXT (${g}) asyncId:${y} currentUid:${l} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${r.inspect(v._contexts,{showHidden:!0,depth:2,colors:!0})}`),v._indent+=2}},after(y){l=i.executionAsyncId();let b;if(b=v._contexts.get(y)||v._contexts.get(l),b){if(c){let C=i.triggerAsyncId();v._indent-=2;let _=" ".repeat(v._indent<0?0:v._indent);m(`${_}AFTER (${g}) asyncId:${y} currentUid:${l} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(b)}`)}v.exit(b)}else if(c){let C=i.triggerAsyncId();v._indent-=2;let _=" ".repeat(v._indent<0?0:v._indent);m(`${_}AFTER MISSING CONTEXT (${g}) asyncId:${y} currentUid:${l} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(b)}`)}},destroy(y){if(l=i.executionAsyncId(),c){let b=i.triggerAsyncId(),C=" ".repeat(v._indent<0?0:v._indent);m(`${C}DESTROY (${g}) currentUid:${l} asyncId:${y} triggerId:${b} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(v._contexts.get(l))}`)}v._contexts.delete(y)}}).enable(),process.namespaces[g]=v,v}function p(g){let v=d(g);n.ok(v,`can't delete nonexistent namespace! "`+g+'"'),n.ok(v.id,"don't assign to process.namespaces directly! "+r.inspect(v)),process.namespaces[g]=null}function h(){process.namespaces&&Object.keys(process.namespaces).forEach(function(g){p(g)}),process.namespaces=Object.create(null)}process.namespaces={};function m(...g){c&&process._rawDebug(`${r.format(...g)}`)}}),LZ=O((t,e)=>{"use strict";function r(){}e.exports=function(){let n=this._hooks,o=this._state,i=process.nextTick;process.nextTick=function(){if(!o.enabled)return i.apply(process,arguments);let s=new Array(arguments.length);for(let u=0;u<arguments.length;u++)s[u]=arguments[u];let a=s[0];if(typeof a!="function")throw new TypeError("callback is not a function");let c=new r,l=--o.counter;return n.init.call(c,l,0,null,null),s[0]=function(){n.pre.call(c,l);let u=!0;try{a.apply(this,arguments),u=!1}finally{u&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){n.post.call(c,l,!0),n.destroy.call(null,l)})}n.post.call(c,l,!1),n.destroy.call(null,l)},i.apply(process,s)}}}),FZ=O((t,e)=>{"use strict";function r(){}e.exports=function(){let n=this._hooks,o=this._state,i=global.Promise,s=i.prototype.then;i.prototype.then=u;function a(d,f,p,h){return typeof d!="function"?h?c(p):l(p):function(){n.pre.call(f,p);try{return d.apply(this,arguments)}finally{n.post.call(f,p,!1),n.destroy.call(null,p)}}}function c(d){return function(f){return n.destroy.call(null,d),f}}function l(d){return function(f){throw n.destroy.call(null,d),f}}function u(d,f){if(!o.enabled)return s.call(this,d,f);let p=new r,h=--o.counter;return n.init.call(p,h,0,null,null),s.call(this,a(d,p,h,!0),a(f,p,h,!1))}}}),MZ=O((t,e)=>{"use strict";var r=require("timers");function n(){}function o(){}function i(){}var s=new Map,a=new Map,c=new Map,l=null,u=!1;e.exports=function(){d(this._hooks,this._state,"setTimeout","clearTimeout",n,s,!0),d(this._hooks,this._state,"setInterval","clearInterval",o,a,!1),d(this._hooks,this._state,"setImmediate","clearImmediate",i,c,!0),global.setTimeout=r.setTimeout,global.setInterval=r.setInterval,global.setImmediate=r.setImmediate,global.clearTimeout=r.clearTimeout,global.clearInterval=r.clearInterval,global.clearImmediate=r.clearImmediate};function d(f,p,h,m,g,v,y){let b=r[h],C=r[m];r[h]=function(){if(!p.enabled)return b.apply(r,arguments);let _=new Array(arguments.length);for(let A=0;A<arguments.length;A++)_[A]=arguments[A];let P=_[0];if(typeof P!="function")throw new TypeError('"callback" argument must be a function');let S=new g,k=--p.counter,T;return f.init.call(S,k,0,null,null),_[0]=function(){l=T,f.pre.call(S,k);let A=!0;try{P.apply(this,arguments),A=!1}finally{A&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){f.post.call(S,k,!0),v.delete(T),f.destroy.call(null,k)})}f.post.call(S,k,!1),l=null,(y||u)&&(u=!1,v.delete(T),f.destroy.call(null,k))},T=b.apply(r,_),v.set(T,k),T},r[m]=function(_){if(l===_&&_!==null)u=!0;else if(v.has(_)){let P=v.get(_);v.delete(_),f.destroy.call(null,P)}C.apply(r,arguments)}}}),cF=O((t,e)=>{e.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}}),qZ=O((t,e)=>{"use strict";var r=process.binding("async_wrap"),n=r.Providers.TIMERWRAP,o={nextTick:LZ(),promise:FZ(),timers:MZ()},i=new Set;function s(){this.enabled=!1,this.counter=0}function a(){let u=this.initFns=[],d=this.preFns=[],f=this.postFns=[],p=this.destroyFns=[];this.init=function(h,m,g,v){if(m===n){i.add(h);return}for(let y of u)y(h,this,m,g,v)},this.pre=function(h){if(!i.has(h))for(let m of d)m(h,this)},this.post=function(h,m){if(!i.has(h))for(let g of f)g(h,this,m)},this.destroy=function(h){if(i.has(h)){i.delete(h);return}for(let m of p)m(h)}}a.prototype.add=function(u){u.init&&this.initFns.push(u.init),u.pre&&this.preFns.push(u.pre),u.post&&this.postFns.push(u.post),u.destroy&&this.destroyFns.push(u.destroy)};function c(u,d){let f=u.indexOf(d);f!==-1&&u.splice(f,1)}a.prototype.remove=function(u){u.init&&c(this.initFns,u.init),u.pre&&c(this.preFns,u.pre),u.post&&c(this.postFns,u.post),u.destroy&&c(this.destroyFns,u.destroy)};function l(){this._state=new s,this._hooks=new a,this.version=cF().version,this.providers=r.Providers;for(let u of Object.keys(o))o[u].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),r.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}e.exports=l,l.prototype.addHooks=function(u){this._hooks.add(u)},l.prototype.removeHooks=function(u){this._hooks.remove(u)},l.prototype.enable=function(){this._state.enabled=!0,r.enable()},l.prototype.disable=function(){this._state.enabled=!1,r.disable()}}),lF=O((t,e)=>{e.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}}),$Z=O((t,e)=>{function r(n){try{return Error.prototype.toString.call(n)}catch(o){try{return"<error: "+o+">"}catch{return"<error>"}}}e.exports=function(n,o){var i=[];i.push(r(n));for(var s=0;s<o.length;s++){var a=o[s],c;try{c=a.toString()}catch(l){try{c="<error: "+l+">"}catch{c="<error>"}}i.push("    at "+c)}return i.join(`
`)}}),jZ=O((t,e)=>{var r=$Z();function n(){this.extend=new s,this.filter=new s,this.format=new a,this.version=lF().version}var o=!1;n.prototype.callSite=function d(f){f||(f={}),o=!0;var p={};Error.captureStackTrace(p,d);var h=p.stack;return o=!1,h=h.slice(f.slice||0),f.extend&&(h=this.extend._modify(p,h)),f.filter&&(h=this.filter._modify(p,h)),h};var i=new n;function s(){this._modifiers=[]}s.prototype._modify=function(d,f){for(var p=0,h=this._modifiers.length;p<h;p++)f=this._modifiers[p](d,f);return f},s.prototype.attach=function(d){this._modifiers.push(d)},s.prototype.deattach=function(d){var f=this._modifiers.indexOf(d);return f===-1?!1:(this._modifiers.splice(f,1),!0)};function a(){this._formater=r,this._previous=void 0}a.prototype.replace=function(d){d?this._formater=d:this.restore()},a.prototype.restore=function(){this._formater=r,this._previous=void 0},a.prototype._backup=function(){this._previous=this._formater},a.prototype._roolback=function(){this._previous===r?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&i.format.replace(Error.prepareStackTrace);var c=!1;function l(d,f){if(o)return f;if(c)return r(d,f);var p=f.concat();p=i.extend._modify(d,p),p=i.filter._modify(d,p),p=p.slice(0,Error.stackTraceLimit),Object.isExtensible(d)&&Object.getOwnPropertyDescriptor(d,"callSite")===void 0&&(d.callSite={original:f,mutated:p}),c=!0;var h=i.format._formater(d,p);return c=!1,h}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return l},set:function(d){d===l?i.format._roolback():(i.format._backup(),i.format.replace(d))}});function u(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:u,set:function(d){Object.defineProperty(this,"callSite",{value:d,writable:!0,configurable:!0})},configurable:!0}),e.exports=i}),uF=O((t,e)=>{if(global._stackChain)if(global._stackChain.version===lF().version)e.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else e.exports=global._stackChain=jZ()}),UZ=O((t,e)=>{"use strict";var r=qZ();if(global._asyncHook)if(global._asyncHook.version===cF().version)e.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else uF().filter.attach(function(n,o){return o.filter(function(i){let s=i.getFileName();return!(s&&s.slice(0,__dirname.length)===__dirname)})}),e.exports=global._asyncHook=new r}),BZ=O((t,e)=>{"use strict";var r=require("util"),n=require("assert"),o=Tb(),i=UZ(),s="cls@contexts",a="error@context",c=[];for(let C in i.providers)c[i.providers[C]]=C;var l=process.env.DEBUG_CLS_HOOKED,u=-1;e.exports={getNamespace:f,createNamespace:p,destroyNamespace:h,reset:m,ERROR_SYMBOL:a};function d(C){this.name=C,this.active=null,this._set=[],this.id=null,this._contexts=new Map}d.prototype.set=function(C,_){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return l&&g("    SETTING KEY:"+C+"="+_+" in ns:"+this.name+" uid:"+u+" active:"+r.inspect(this.active,!0)),this.active[C]=_,_},d.prototype.get=function(C){if(!this.active){l&&g("    GETTING KEY:"+C+"=undefined "+this.name+" uid:"+u+" active:"+r.inspect(this.active,!0));return}return l&&g("    GETTING KEY:"+C+"="+this.active[C]+" "+this.name+" uid:"+u+" active:"+r.inspect(this.active,!0)),this.active[C]},d.prototype.createContext=function(){l&&g("   CREATING Context: "+this.name+" uid:"+u+" len:"+this._set.length+"  active:"+r.inspect(this.active,!0,2,!0));let C=Object.create(this.active?this.active:Object.prototype);return C._ns_name=this.name,C.id=u,l&&g("   CREATED Context: "+this.name+" uid:"+u+" len:"+this._set.length+"  context:"+r.inspect(C,!0,2,!0)),C},d.prototype.run=function(C){let _=this.createContext();this.enter(_);try{return l&&g(" BEFORE RUN: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(_)),C(_),_}catch(P){throw P&&(P[a]=_),P}finally{l&&g(" AFTER RUN: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(_)),this.exit(_)}},d.prototype.runAndReturn=function(C){var _;return this.run(function(P){_=C(P)}),_},d.prototype.runPromise=function(C){let _=this.createContext();this.enter(_);let P=C(_);if(!P||!P.then||!P.catch)throw new Error("fn must return a promise.");return l&&g(" BEFORE runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(_)),P.then(S=>(l&&g(" AFTER runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(_)),this.exit(_),S)).catch(S=>{throw S[a]=_,l&&g(" AFTER runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(_)),this.exit(_),S})},d.prototype.bind=function(C,_){_||(this.active?_=this.active:_=this.createContext());let P=this;return function(){P.enter(_);try{return C.apply(this,arguments)}catch(S){throw S&&(S[a]=_),S}finally{P.exit(_)}}},d.prototype.enter=function(C){n.ok(C,"context must be provided for entering"),l&&g("  ENTER "+this.name+" uid:"+u+" len:"+this._set.length+" context: "+r.inspect(C)),this._set.push(this.active),this.active=C},d.prototype.exit=function(C){if(n.ok(C,"context must be provided for exiting"),l&&g("  EXIT "+this.name+" uid:"+u+" len:"+this._set.length+" context: "+r.inspect(C)),this.active===C){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let _=this._set.lastIndexOf(C);_<0?(l&&g("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(C)),n.ok(_>=0,`context not currently entered; can't exit. 
`+r.inspect(this)+`
`+r.inspect(C))):(n.ok(_,"can't remove top context"),this._set.splice(_,1))},d.prototype.bindEmitter=function(C){n.ok(C.on&&C.addListener&&C.emit,"can only bind real EEs");let _=this,P="context@"+this.name;function S(T){!T||(T[s]||(T[s]=Object.create(null)),T[s][P]={namespace:_,context:_.active})}function k(T){if(!(T&&T[s]))return T;let A=T,F=T[s];return Object.keys(F).forEach(function(j){let J=F[j];A=J.namespace.bind(A,J.context)}),A}o(C,S,k)},d.prototype.fromException=function(C){return C[a]};function f(C){return process.namespaces[C]}function p(C){n.ok(C,"namespace must be given a name."),l&&g("CREATING NAMESPACE "+C);let _=new d(C);return _.id=u,i.addHooks({init(P,S,k,T,A){u=P,T?(_._contexts.set(P,_._contexts.get(T)),l&&g("PARENTID: "+C+" uid:"+P+" parent:"+T+" provider:"+k)):_._contexts.set(u,_.active),l&&g("INIT "+C+" uid:"+P+" parent:"+T+" provider:"+c[k]+" active:"+r.inspect(_.active,!0))},pre(P,S){u=P;let k=_._contexts.get(P);k?(l&&g(" PRE "+C+" uid:"+P+" handle:"+v(S)+" context:"+r.inspect(k)),_.enter(k)):l&&g(" PRE MISSING CONTEXT "+C+" uid:"+P+" handle:"+v(S))},post(P,S){u=P;let k=_._contexts.get(P);k?(l&&g(" POST "+C+" uid:"+P+" handle:"+v(S)+" context:"+r.inspect(k)),_.exit(k)):l&&g(" POST MISSING CONTEXT "+C+" uid:"+P+" handle:"+v(S))},destroy(P){u=P,l&&g("DESTROY "+C+" uid:"+P+" context:"+r.inspect(_._contexts.get(u))+" active:"+r.inspect(_.active,!0)),_._contexts.delete(P)}}),process.namespaces[C]=_,_}function h(C){let _=f(C);n.ok(_,`can't delete nonexistent namespace! "`+C+'"'),n.ok(_.id,"don't assign to process.namespaces directly! "+r.inspect(_)),process.namespaces[C]=null}function m(){process.namespaces&&Object.keys(process.namespaces).forEach(function(C){h(C)}),process.namespaces=Object.create(null)}process.namespaces={},i._state&&!i._state.enabled&&i.enable();function g(C){process.env.DEBUG&&process._rawDebug(C)}function v(C){if(!C)return C;if(typeof C=="function")return C.name?C.name:(C.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(C.constructor&&C.constructor.name)return C.constructor.name}if(l){y=uF();for(b in y.filter._modifiers)y.filter.deattach(b)}var y,b}),HZ=O((t,e)=>{"use strict";var r=OZ();process&&r.gte(process.versions.node,"8.0.0")?e.exports=NZ():e.exports=BZ()}),VZ=O((t,e)=>{t=e.exports=Q;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var w=Array.prototype.slice.call(arguments,0);w.unshift("SEMVER"),console.log.apply(console,w)}:r=function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,s=t.re=[],a=t.src=[],c=0,l=c++;a[l]="0|[1-9]\\d*";var u=c++;a[u]="[0-9]+";var d=c++;a[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=c++;a[f]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var p=c++;a[p]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var h=c++;a[h]="(?:"+a[l]+"|"+a[d]+")";var m=c++;a[m]="(?:"+a[u]+"|"+a[d]+")";var g=c++;a[g]="(?:-("+a[h]+"(?:\\."+a[h]+")*))";var v=c++;a[v]="(?:-?("+a[m]+"(?:\\."+a[m]+")*))";var y=c++;a[y]="[0-9A-Za-z-]+";var b=c++;a[b]="(?:\\+("+a[y]+"(?:\\."+a[y]+")*))";var C=c++,_="v?"+a[f]+a[g]+"?"+a[b]+"?";a[C]="^"+_+"$";var P="[v=\\s]*"+a[p]+a[v]+"?"+a[b]+"?",S=c++;a[S]="^"+P+"$";var k=c++;a[k]="((?:<|>)?=?)";var T=c++;a[T]=a[u]+"|x|X|\\*";var A=c++;a[A]=a[l]+"|x|X|\\*";var F=c++;a[F]="[v=\\s]*("+a[A]+")(?:\\.("+a[A]+")(?:\\.("+a[A]+")(?:"+a[g]+")?"+a[b]+"?)?)?";var j=c++;a[j]="[v=\\s]*("+a[T]+")(?:\\.("+a[T]+")(?:\\.("+a[T]+")(?:"+a[v]+")?"+a[b]+"?)?)?";var J=c++;a[J]="^"+a[k]+"\\s*"+a[F]+"$";var Y=c++;a[Y]="^"+a[k]+"\\s*"+a[j]+"$";var ae=c++;a[ae]="(?:^|[^\\d])(\\d{1,"+i+"})(?:\\.(\\d{1,"+i+"}))?(?:\\.(\\d{1,"+i+"}))?(?:$|[^\\d])";var te=c++;a[te]="(?:~>?)";var M=c++;a[M]="(\\s*)"+a[te]+"\\s+",s[M]=new RegExp(a[M],"g");var L="$1~",q=c++;a[q]="^"+a[te]+a[F]+"$";var W=c++;a[W]="^"+a[te]+a[j]+"$";var z=c++;a[z]="(?:\\^)";var ne=c++;a[ne]="(\\s*)"+a[z]+"\\s+",s[ne]=new RegExp(a[ne],"g");var X="$1^",ve=c++;a[ve]="^"+a[z]+a[F]+"$";var Pe=c++;a[Pe]="^"+a[z]+a[j]+"$";var Se=c++;a[Se]="^"+a[k]+"\\s*("+P+")$|^$";var De=c++;a[De]="^"+a[k]+"\\s*("+_+")$|^$";var pe=c++;a[pe]="(\\s*)"+a[k]+"\\s*("+P+"|"+a[F]+")",s[pe]=new RegExp(a[pe],"g");var yt="$1$2$3",It=c++;a[It]="^\\s*("+a[F]+")\\s+-\\s+("+a[F]+")\\s*$";var ye=c++;a[ye]="^\\s*("+a[j]+")\\s+-\\s+("+a[j]+")\\s*$";var fe=c++;for(a[fe]="(<|>)?=?\\s*\\*",Ee=0;Ee<c;Ee++)r(Ee,a[Ee]),s[Ee]||(s[Ee]=new RegExp(a[Ee]));var Ee;t.parse=je;function je(w,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),w instanceof Q)return w;if(typeof w!="string"||w.length>n)return null;var x=E.loose?s[S]:s[C];if(!x.test(w))return null;try{return new Q(w,E)}catch{return null}}t.valid=es;function es(w,E){var x=je(w,E);return x?x.version:null}t.clean=ts;function ts(w,E){var x=je(w.trim().replace(/^[=v]+/,""),E);return x?x.version:null}t.SemVer=Q;function Q(w,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),w instanceof Q){if(w.loose===E.loose)return w;w=w.version}else if(typeof w!="string")throw new TypeError("Invalid Version: "+w);if(w.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof Q))return new Q(w,E);r("SemVer",w,E),this.options=E,this.loose=!!E.loose;var x=w.trim().match(E.loose?s[S]:s[C]);if(!x)throw new TypeError("Invalid Version: "+w);if(this.raw=w,this.major=+x[1],this.minor=+x[2],this.patch=+x[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");x[4]?this.prerelease=x[4].split(".").map(function(R){if(/^[0-9]+$/.test(R)){var N=+R;if(N>=0&&N<o)return N}return R}):this.prerelease=[],this.build=x[5]?x[5].split("."):[],this.format()}Q.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Q.prototype.toString=function(){return this.version},Q.prototype.compare=function(w){return r("SemVer.compare",this.version,this.options,w),w instanceof Q||(w=new Q(w,this.options)),this.compareMain(w)||this.comparePre(w)},Q.prototype.compareMain=function(w){return w instanceof Q||(w=new Q(w,this.options)),ct(this.major,w.major)||ct(this.minor,w.minor)||ct(this.patch,w.patch)},Q.prototype.comparePre=function(w){if(w instanceof Q||(w=new Q(w,this.options)),this.prerelease.length&&!w.prerelease.length)return-1;if(!this.prerelease.length&&w.prerelease.length)return 1;if(!this.prerelease.length&&!w.prerelease.length)return 0;var E=0;do{var x=this.prerelease[E],R=w.prerelease[E];if(r("prerelease compare",E,x,R),x===void 0&&R===void 0)return 0;if(R===void 0)return 1;if(x===void 0)return-1;if(x!==R)return ct(x,R)}while(++E)},Q.prototype.inc=function(w,E){switch(w){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",E);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",E);break;case"prepatch":this.prerelease.length=0,this.inc("patch",E),this.inc("pre",E);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",E),this.inc("pre",E);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var x=this.prerelease.length;--x>=0;)typeof this.prerelease[x]=="number"&&(this.prerelease[x]++,x=-2);x===-1&&this.prerelease.push(0)}E&&(this.prerelease[0]===E?isNaN(this.prerelease[1])&&(this.prerelease=[E,0]):this.prerelease=[E,0]);break;default:throw new Error("invalid increment argument: "+w)}return this.format(),this.raw=this.version,this},t.inc=rs;function rs(w,E,x,R){typeof x=="string"&&(R=x,x=void 0);try{return new Q(w,x).inc(E,R).version}catch{return null}}t.diff=ns;function ns(w,E){if(wr(w,E))return null;var x=je(w),R=je(E),N="";if(x.prerelease.length||R.prerelease.length){N="pre";var $="prerelease"}for(var H in x)if((H==="major"||H==="minor"||H==="patch")&&x[H]!==R[H])return N+H;return $}t.compareIdentifiers=ct;var Rr=/^[0-9]+$/;function ct(w,E){var x=Rr.test(w),R=Rr.test(E);return x&&R&&(w=+w,E=+E),w===E?0:x&&!R?-1:R&&!x?1:w<E?-1:1}t.rcompareIdentifiers=Gn;function Gn(w,E){return ct(E,w)}t.major=dr;function dr(w,E){return new Q(w,E).major}t.minor=Zo;function Zo(w,E){return new Q(w,E).minor}t.patch=ei;function ei(w,E){return new Q(w,E).patch}t.compare=Ge;function Ge(w,E,x){return new Q(w,x).compare(new Q(E,x))}t.compareLoose=os;function os(w,E){return Ge(w,E,!0)}t.rcompare=zn;function zn(w,E,x){return Ge(E,w,x)}t.sort=ti;function ti(w,E){return w.sort(function(x,R){return t.compare(x,R,E)})}t.rsort=ri;function ri(w,E){return w.sort(function(x,R){return t.rcompare(x,R,E)})}t.gt=Et;function Et(w,E,x){return Ge(w,E,x)>0}t.lt=Bt;function Bt(w,E,x){return Ge(w,E,x)<0}t.eq=wr;function wr(w,E,x){return Ge(w,E,x)===0}t.neq=Kn;function Kn(w,E,x){return Ge(w,E,x)!==0}t.gte=Or;function Or(w,E,x){return Ge(w,E,x)>=0}t.lte=Tt;function Tt(w,E,x){return Ge(w,E,x)<=0}t.cmp=At;function At(w,E,x,R){switch(E){case"===":return typeof w=="object"&&(w=w.version),typeof x=="object"&&(x=x.version),w===x;case"!==":return typeof w=="object"&&(w=w.version),typeof x=="object"&&(x=x.version),w!==x;case"":case"=":case"==":return wr(w,x,R);case"!=":return Kn(w,x,R);case">":return Et(w,x,R);case">=":return Or(w,x,R);case"<":return Bt(w,x,R);case"<=":return Tt(w,x,R);default:throw new TypeError("Invalid operator: "+E)}}t.Comparator=Te;function Te(w,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),w instanceof Te){if(w.loose===!!E.loose)return w;w=w.value}if(!(this instanceof Te))return new Te(w,E);r("comparator",w,E),this.options=E,this.loose=!!E.loose,this.parse(w),this.semver===_t?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var _t={};Te.prototype.parse=function(w){var E=this.options.loose?s[Se]:s[De],x=w.match(E);if(!x)throw new TypeError("Invalid comparator: "+w);this.operator=x[1],this.operator==="="&&(this.operator=""),x[2]?this.semver=new Q(x[2],this.options.loose):this.semver=_t},Te.prototype.toString=function(){return this.value},Te.prototype.test=function(w){return r("Comparator.test",w,this.options.loose),this.semver===_t?!0:(typeof w=="string"&&(w=new Q(w,this.options)),At(w,this.operator,this.semver,this.options))},Te.prototype.intersects=function(w,E){if(!(w instanceof Te))throw new TypeError("a Comparator is required");(!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1});var x;if(this.operator==="")return x=new ce(w.value,E),er(this.value,x,E);if(w.operator==="")return x=new ce(this.value,E),er(w.semver,x,E);var R=(this.operator===">="||this.operator===">")&&(w.operator===">="||w.operator===">"),N=(this.operator==="<="||this.operator==="<")&&(w.operator==="<="||w.operator==="<"),$=this.semver.version===w.semver.version,H=(this.operator===">="||this.operator==="<=")&&(w.operator===">="||w.operator==="<="),ee=At(this.semver,"<",w.semver,E)&&(this.operator===">="||this.operator===">")&&(w.operator==="<="||w.operator==="<"),Z=At(this.semver,">",w.semver,E)&&(this.operator==="<="||this.operator==="<")&&(w.operator===">="||w.operator===">");return R||N||$&&H||ee||Z},t.Range=ce;function ce(w,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),w instanceof ce)return w.loose===!!E.loose&&w.includePrerelease===!!E.includePrerelease?w:new ce(w.raw,E);if(w instanceof Te)return new ce(w.value,E);if(!(this instanceof ce))return new ce(w,E);if(this.options=E,this.loose=!!E.loose,this.includePrerelease=!!E.includePrerelease,this.raw=w,this.set=w.split(/\s*\|\|\s*/).map(function(x){return this.parseRange(x.trim())},this).filter(function(x){return x.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+w);this.format()}ce.prototype.format=function(){return this.range=this.set.map(function(w){return w.join(" ").trim()}).join("||").trim(),this.range},ce.prototype.toString=function(){return this.range},ce.prototype.parseRange=function(w){var E=this.options.loose;w=w.trim();var x=E?s[ye]:s[It];w=w.replace(x,us),r("hyphen replace",w),w=w.replace(s[pe],yt),r("comparator trim",w,s[pe]),w=w.replace(s[M],L),w=w.replace(s[ne],X),w=w.split(/\s+/).join(" ");var R=E?s[Se]:s[De],N=w.split(" ").map(function($){return kn($,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(N=N.filter(function($){return!!$.match(R)})),N=N.map(function($){return new Te($,this.options)},this),N},ce.prototype.intersects=function(w,E){if(!(w instanceof ce))throw new TypeError("a Range is required");return this.set.some(function(x){return x.every(function(R){return w.set.some(function(N){return N.every(function($){return R.intersects($,E)})})})})},t.toComparators=ni;function ni(w,E){return new ce(w,E).set.map(function(x){return x.map(function(R){return R.value}).join(" ").trim().split(" ")})}function kn(w,E){return r("comp",w,E),w=ss(w,E),r("caret",w),w=Nr(w,E),r("tildes",w),w=cs(w,E),r("xrange",w),w=fr(w,E),r("stars",w),w}function Ce(w){return!w||w.toLowerCase()==="x"||w==="*"}function Nr(w,E){return w.trim().split(/\s+/).map(function(x){return is(x,E)}).join(" ")}function is(w,E){var x=E.loose?s[W]:s[q];return w.replace(x,function(R,N,$,H,ee){r("tilde",w,R,N,$,H,ee);var Z;return Ce(N)?Z="":Ce($)?Z=">="+N+".0.0 <"+(+N+1)+".0.0":Ce(H)?Z=">="+N+"."+$+".0 <"+N+"."+(+$+1)+".0":ee?(r("replaceTilde pr",ee),Z=">="+N+"."+$+"."+H+"-"+ee+" <"+N+"."+(+$+1)+".0"):Z=">="+N+"."+$+"."+H+" <"+N+"."+(+$+1)+".0",r("tilde return",Z),Z})}function ss(w,E){return w.trim().split(/\s+/).map(function(x){return as(x,E)}).join(" ")}function as(w,E){r("caret",w,E);var x=E.loose?s[Pe]:s[ve];return w.replace(x,function(R,N,$,H,ee){r("caret",w,R,N,$,H,ee);var Z;return Ce(N)?Z="":Ce($)?Z=">="+N+".0.0 <"+(+N+1)+".0.0":Ce(H)?N==="0"?Z=">="+N+"."+$+".0 <"+N+"."+(+$+1)+".0":Z=">="+N+"."+$+".0 <"+(+N+1)+".0.0":ee?(r("replaceCaret pr",ee),N==="0"?$==="0"?Z=">="+N+"."+$+"."+H+"-"+ee+" <"+N+"."+$+"."+(+H+1):Z=">="+N+"."+$+"."+H+"-"+ee+" <"+N+"."+(+$+1)+".0":Z=">="+N+"."+$+"."+H+"-"+ee+" <"+(+N+1)+".0.0"):(r("no pr"),N==="0"?$==="0"?Z=">="+N+"."+$+"."+H+" <"+N+"."+$+"."+(+H+1):Z=">="+N+"."+$+"."+H+" <"+N+"."+(+$+1)+".0":Z=">="+N+"."+$+"."+H+" <"+(+N+1)+".0.0"),r("caret return",Z),Z})}function cs(w,E){return r("replaceXRanges",w,E),w.split(/\s+/).map(function(x){return ls(x,E)}).join(" ")}function ls(w,E){w=w.trim();var x=E.loose?s[Y]:s[J];return w.replace(x,function(R,N,$,H,ee,Z){r("xRange",w,R,N,$,H,ee,Z);var qe=Ce($),Re=qe||Ce(H),Ie=Re||Ce(ee),ke=Ie;return N==="="&&ke&&(N=""),qe?N===">"||N==="<"?R="<0.0.0":R="*":N&&ke?(Re&&(H=0),ee=0,N===">"?(N=">=",Re?($=+$+1,H=0,ee=0):(H=+H+1,ee=0)):N==="<="&&(N="<",Re?$=+$+1:H=+H+1),R=N+$+"."+H+"."+ee):Re?R=">="+$+".0.0 <"+(+$+1)+".0.0":Ie&&(R=">="+$+"."+H+".0 <"+$+"."+(+H+1)+".0"),r("xRange return",R),R})}function fr(w,E){return r("replaceStars",w,E),w.trim().replace(s[fe],"")}function us(w,E,x,R,N,$,H,ee,Z,qe,Re,Ie,ke){return Ce(x)?E="":Ce(R)?E=">="+x+".0.0":Ce(N)?E=">="+x+"."+R+".0":E=">="+E,Ce(Z)?ee="":Ce(qe)?ee="<"+(+Z+1)+".0.0":Ce(Re)?ee="<"+Z+"."+(+qe+1)+".0":Ie?ee="<="+Z+"."+qe+"."+Re+"-"+Ie:ee="<="+ee,(E+" "+ee).trim()}ce.prototype.test=function(w){if(!w)return!1;typeof w=="string"&&(w=new Q(w,this.options));for(var E=0;E<this.set.length;E++)if(ds(this.set[E],w,this.options))return!0;return!1};function ds(w,E,x){for(var R=0;R<w.length;R++)if(!w[R].test(E))return!1;if(E.prerelease.length&&!x.includePrerelease){for(R=0;R<w.length;R++)if(r(w[R].semver),w[R].semver!==_t&&w[R].semver.prerelease.length>0){var N=w[R].semver;if(N.major===E.major&&N.minor===E.minor&&N.patch===E.patch)return!0}return!1}return!0}t.satisfies=er;function er(w,E,x){try{E=new ce(E,x)}catch{return!1}return E.test(w)}t.maxSatisfying=fs;function fs(w,E,x){var R=null,N=null;try{var $=new ce(E,x)}catch{return null}return w.forEach(function(H){$.test(H)&&(!R||N.compare(H)===-1)&&(R=H,N=new Q(R,x))}),R}t.minSatisfying=ps;function ps(w,E,x){var R=null,N=null;try{var $=new ce(E,x)}catch{return null}return w.forEach(function(H){$.test(H)&&(!R||N.compare(H)===1)&&(R=H,N=new Q(R,x))}),R}t.minVersion=Qr;function Qr(w,E){w=new ce(w,E);var x=new Q("0.0.0");if(w.test(x)||(x=new Q("0.0.0-0"),w.test(x)))return x;x=null;for(var R=0;R<w.set.length;++R){var N=w.set[R];N.forEach(function($){var H=new Q($.semver.version);switch($.operator){case">":H.prerelease.length===0?H.patch++:H.prerelease.push(0),H.raw=H.format();case"":case">=":(!x||Et(x,H))&&(x=H);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+$.operator)}})}return x&&w.test(x)?x:null}t.validRange=hs;function hs(w,E){try{return new ce(w,E).range||"*"}catch{return null}}t.ltr=ms;function ms(w,E,x){return Lr(w,E,"<",x)}t.gtr=gs;function gs(w,E,x){return Lr(w,E,">",x)}t.outside=Lr;function Lr(w,E,x,R){w=new Q(w,R),E=new ce(E,R);var N,$,H,ee,Z;switch(x){case">":N=Et,$=Tt,H=Bt,ee=">",Z=">=";break;case"<":N=Bt,$=Or,H=Et,ee="<",Z="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(er(w,E,R))return!1;for(var qe=0;qe<E.set.length;++qe){var Re=E.set[qe],Ie=null,ke=null;if(Re.forEach(function(Xe){Xe.semver===_t&&(Xe=new Te(">=0.0.0")),Ie=Ie||Xe,ke=ke||Xe,N(Xe.semver,Ie.semver,R)?Ie=Xe:H(Xe.semver,ke.semver,R)&&(ke=Xe)}),Ie.operator===ee||Ie.operator===Z||(!ke.operator||ke.operator===ee)&&$(w,ke.semver)||ke.operator===Z&&H(w,ke.semver))return!1}return!0}t.prerelease=vs;function vs(w,E){var x=je(w,E);return x&&x.prerelease.length?x.prerelease:null}t.intersects=Xr;function Xr(w,E,x){return w=new ce(w,x),E=new ce(E,x),w.intersects(E)}t.coerce=ys;function ys(w){if(w instanceof Q)return w;if(typeof w!="string")return null;var E=w.match(s[ae]);return E==null?null:je(E[1]+"."+(E[2]||"0")+"."+(E[3]||"0"))}}),WZ=O((t,e)=>{var r=Ib().wrap,n=1<<0,o=1<<1,i=1<<2,s=1<<3,a=[],c=0,l=!1,u=[],d,f;function p(S,k){var T=S.length,A=k.length,F=[];if(T===0&&A===0)return F;for(var j=0;j<T;j++)F[j]=S[j];if(A===0)return F;for(var J=0;J<A;J++){var Y=!0;for(j=0;j<T;j++)if(S[j].uid===k[J].uid){Y=!1;break}Y&&F.push(k[J])}return F}process._fatalException?(h=!1,d=function(S){var k=a.length;if(h||k===0)return!1;var T=!1;h=!0;for(var A=0;A<k;++A){var F=a[A];if((F.flags&s)!=0){var j=m&&m[F.uid];T=F.error(j,S)||T}}return h=!1,u.length>0&&(a=u.pop()),m=void 0,T&&!l},f=function(S,k,T){var A=[];l=!0;for(var F=0;F<T;++F){var j=k[F];if(A[j.uid]=j.data,(j.flags&n)!=0){var J=j.create(j.data);J!==void 0&&(A[j.uid]=J)}}return l=!1,function(){m=A,u.push(a),a=p(k,a),l=!0;for(var Y=0;Y<T;++Y)(k[Y].flags&o)>0&&k[Y].before(this,A[k[Y].uid]);l=!1;var ae=S.apply(this,arguments);for(l=!0,Y=0;Y<T;++Y)(k[Y].flags&i)>0&&k[Y].after(this,A[k[Y].uid]);return l=!1,a=u.pop(),m=void 0,ae}},r(process,"_fatalException",function(S){return function(k){return d(k)||S(k)}})):(g=!1,d=function(S){if(g)throw S;for(var k=!1,T=a.length,A=0;A<T;++A){var F=a[A];(F.flags&s)!=0&&(k=F.error(null,S)||k)}if(!k&&l)throw S},f=function(S,k,T){var A=[];l=!0;for(var F=0;F<T;++F){var j=k[F];if(A[j.uid]=j.data,(j.flags&n)!=0){var J=j.create(j.data);J!==void 0&&(A[j.uid]=J)}}return l=!1,function(){var Y=!1,ae=!1;u.push(a),a=p(k,a),l=!0;for(var te=0;te<T;++te)(k[te].flags&o)>0&&k[te].before(this,A[k[te].uid]);l=!1;var M;try{M=S.apply(this,arguments)}catch(L){Y=!0;for(var te=0;te<T;++te)if((a[te].flags&s)!=0)try{ae=a[te].error(A[k[te].uid],L)||ae}catch(W){throw g=!0,W}if(!ae)throw process.removeListener("uncaughtException",d),process._originalNextTick(function(){process.addListener("uncaughtException",d)}),L}finally{if(!Y||ae){for(l=!0,te=0;te<T;++te)(k[te].flags&i)>0&&k[te].after(this,A[k[te].uid]);l=!1}a=u.pop()}return M}},process.addListener("uncaughtException",d));var h,m,g;function v(S,k,T){l=!0;for(var A=0;A<T;++A){var F=k[A];F.create&&F.create(F.data)}return l=!1,function(){u.push(a),a=p(k,a);var j=S.apply(this,arguments);return a=u.pop(),j}}function y(S){var k=a.length;if(k===0)return S;for(var T=a.slice(),A=0;A<k;++A)if(T[A].flags>0)return f(S,T,k);return v(S,T,k)}function b(S,k){typeof S.create=="function"&&(this.create=S.create,this.flags|=n),typeof S.before=="function"&&(this.before=S.before,this.flags|=o),typeof S.after=="function"&&(this.after=S.after,this.flags|=i),typeof S.error=="function"&&(this.error=S.error,this.flags|=s),this.uid=++c,this.data=k===void 0?null:k}b.prototype.create=void 0,b.prototype.before=void 0,b.prototype.after=void 0,b.prototype.error=void 0,b.prototype.data=void 0,b.prototype.uid=0,b.prototype.flags=0;function C(S,k){if(typeof S!="object"||!S)throw new TypeError("callbacks argument must be an object");return S instanceof b?S:new b(S,k)}function _(S,k){var T;S instanceof b?T=S:T=C(S,k);for(var A=!1,F=0;F<a.length;F++)if(T===a[F]){A=!0;break}return A||a.push(T),T}function P(S){for(var k=0;k<a.length;k++)if(S===a[k]){a.splice(k,1);break}}process.createAsyncListener=C,process.addAsyncListener=_,process.removeAsyncListener=P,e.exports=y}),GZ=O((t,e)=>{"use strict";e.exports=(r,n)=>class extends r{constructor(o){var i,s;super(c);var a=this;try{o.apply(i,s)}catch(l){s[1](l)}return a;function c(l,u){i=this,s=[d,f];function d(p){return n(a,!1),l(p)}function f(p){return n(a,!1),u(p)}}}}}),zZ=O(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var t=Ib(),e=VZ(),r=t.wrap,n=t.massWrap,o=WZ(),i=require("util"),s=e.gte(process.version,"6.0.0"),a=e.gte(process.version,"7.0.0"),c=e.gte(process.version,"8.0.0"),l=e.gte(process.version,"11.0.0"),u=require("net");a&&!u._normalizeArgs?u._normalizeArgs=function(M){if(M.length===0)return[{},null];var L=M[0],q={};typeof L=="object"&&L!==null?q=L:te(L)?q.path=L:(q.port=L,M.length>1&&typeof M[1]=="string"&&(q.host=M[1]));var W=M[M.length-1];return typeof W!="function"?[q,null]:[q,W]}:!a&&!u._normalizeConnectArgs&&(u._normalizeConnectArgs=function(M){var L={};function q(z){return(z=Number(z))>=0?z:!1}typeof M[0]=="object"&&M[0]!==null?L=M[0]:typeof M[0]=="string"&&q(M[0])===!1?L.path=M[0]:(L.port=M[0],typeof M[1]=="string"&&(L.host=M[1]));var W=M[M.length-1];return typeof W=="function"?[L,W]:[L]}),"_setUpListenHandle"in u.Server.prototype?r(u.Server.prototype,"_setUpListenHandle",d):r(u.Server.prototype,"_listen2",d);function d(M){return function(){this.on("connection",function(L){L._handle&&(L._handle.onread=o(L._handle.onread))});try{return M.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=o(this._handle.onconnection))}}}function f(M){if(M&&M._handle){var L=M._handle;L._originalOnread||(L._originalOnread=L.onread),L.onread=o(L._originalOnread)}}r(u.Socket.prototype,"connect",function(M){return function(){var L;c&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?L=arguments[0]:L=a?u._normalizeArgs(arguments):u._normalizeConnectArgs(arguments),L[1]&&(L[1]=o(L[1]));var q=M.apply(this,L);return f(this),q}});var p=require("http");r(p.Agent.prototype,"addRequest",function(M){return function(L){var q=L.onSocket;return L.onSocket=o(function(W){return f(W),q.apply(this,arguments)}),M.apply(this,arguments)}});var h=require("child_process");function m(M){Array.isArray(M.stdio)&&M.stdio.forEach(function(L){L&&L._handle&&(L._handle.onread=o(L._handle.onread),r(L._handle,"close",Y))}),M._handle&&(M._handle.onexit=o(M._handle.onexit))}h.ChildProcess?r(h.ChildProcess.prototype,"spawn",function(M){return function(){var L=M.apply(this,arguments);return m(this),L}}):n(h,["execFile","fork","spawn"],function(M){return function(){var L=M.apply(this,arguments);return m(L),L}}),process._fatalException||(process._originalNextTick=process.nextTick);var g=[];process._nextDomainTick&&g.push("_nextDomainTick"),process._tickDomainCallback&&g.push("_tickDomainCallback"),n(process,g,J),r(process,"nextTick",Y);var v=["setTimeout","setInterval"];global.setImmediate&&v.push("setImmediate");var y=require("timers"),b=global.setTimeout===y.setTimeout;n(y,v,Y),b&&n(global,v,Y);var C=require("dns");n(C,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],J),C.resolveNaptr&&r(C,"resolveNaptr",J);var _=require("fs");n(_,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],J),_.lchown&&r(_,"lchown",J),_.lchmod&&r(_,"lchmod",J),_.ftruncate&&r(_,"ftruncate",J);var P;try{P=require("zlib")}catch{}P&&P.Deflate&&P.Deflate.prototype&&(S=Object.getPrototypeOf(P.Deflate.prototype),S._transform?r(S,"_transform",J):S.write&&S.flush&&S.end&&n(S,["write","flush","end"],J));var S,k;try{k=require("crypto")}catch{}k&&(T=["pbkdf2","randomBytes"],l||T.push("pseudoRandomBytes"),n(k,T,J));var T,A=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";A&&(F=process.addAsyncListener({create:function(){A=!1}}),global.Promise.resolve(!0).then(function(){A=!1}),process.removeAsyncListener(F));var F;A&&j();function j(){var M=global.Promise;function L(X){if(!(this instanceof L))return M(X);if(typeof X!="function")return new M(X);var ve,Pe,Se=new M(De);Se.__proto__=L.prototype;try{X.apply(ve,Pe)}catch(pe){Pe[1](pe)}return Se;function De(pe,yt){ve=this,Pe=[It,ye];function It(fe){return W(Se,!1),pe(fe)}function ye(fe){return W(Se,!1),yt(fe)}}}if(i.inherits(L,M),r(M.prototype,"then",ne),M.prototype.chain&&r(M.prototype,"chain",ne),s)global.Promise=GZ()(M,W);else{var q=["all","race","reject","resolve","accept","defer"];q.forEach(function(X){typeof M[X]=="function"&&(L[X]=M[X])}),global.Promise=L}function W(X,ve){(!X.__asl_wrapper||ve)&&(X.__asl_wrapper=o(z))}function z(X,ve,Pe,Se){var De;try{return De=ve.call(X,Pe),{returnVal:De,error:!1}}catch(pe){return{errorVal:pe,error:!0}}finally{De instanceof M?Se.__asl_wrapper=function(){var pe=De.__asl_wrapper||z;return pe.apply(this,arguments)}:W(Se,!0)}}function ne(X){return function(){var ve=this,Pe=X.apply(ve,Array.prototype.map.call(arguments,Se));return Pe.__asl_wrapper=function(De,pe,yt,It){return ve.__asl_wrapper?(ve.__asl_wrapper(De,function(){},null,Pe),Pe.__asl_wrapper(De,pe,yt,It)):z(De,pe,yt,It)},Pe;function Se(De){return typeof De!="function"?De:o(function(pe){var yt=(ve.__asl_wrapper||z)(this,De,pe,Pe);if(yt.error)throw yt.errorVal;return yt.returnVal})}}}}function J(M){var L=function(){var q,W=arguments.length-1;if(typeof arguments[W]=="function"){q=Array(arguments.length);for(var z=0;z<arguments.length-1;z++)q[z]=arguments[z];q[W]=o(arguments[W])}return M.apply(this,q||arguments)};switch(M.length){case 1:return function(q){return arguments.length!==1?L.apply(this,arguments):(typeof q=="function"&&(q=o(q)),M.call(this,q))};case 2:return function(q,W){return arguments.length!==2?L.apply(this,arguments):(typeof W=="function"&&(W=o(W)),M.call(this,q,W))};case 3:return function(q,W,z){return arguments.length!==3?L.apply(this,arguments):(typeof z=="function"&&(z=o(z)),M.call(this,q,W,z))};case 4:return function(q,W,z,ne){return arguments.length!==4?L.apply(this,arguments):(typeof ne=="function"&&(ne=o(ne)),M.call(this,q,W,z,ne))};case 5:return function(q,W,z,ne,X){return arguments.length!==5?L.apply(this,arguments):(typeof X=="function"&&(X=o(X)),M.call(this,q,W,z,ne,X))};case 6:return function(q,W,z,ne,X,ve){return arguments.length!==6?L.apply(this,arguments):(typeof ve=="function"&&(ve=o(ve)),M.call(this,q,W,z,ne,X,ve))};default:return L}}function Y(M){var L=function(){var q;if(typeof arguments[0]=="function"){q=Array(arguments.length),q[0]=o(arguments[0]);for(var W=1;W<arguments.length;W++)q[W]=arguments[W]}return M.apply(this,q||arguments)};switch(M.length){case 1:return function(q){return arguments.length!==1?L.apply(this,arguments):(typeof q=="function"&&(q=o(q)),M.call(this,q))};case 2:return function(q,W){return arguments.length!==2?L.apply(this,arguments):(typeof q=="function"&&(q=o(q)),M.call(this,q,W))};case 3:return function(q,W,z){return arguments.length!==3?L.apply(this,arguments):(typeof q=="function"&&(q=o(q)),M.call(this,q,W,z))};case 4:return function(q,W,z,ne){return arguments.length!==4?L.apply(this,arguments):(typeof q=="function"&&(q=o(q)),M.call(this,q,W,z,ne))};case 5:return function(q,W,z,ne,X){return arguments.length!==5?L.apply(this,arguments):(typeof q=="function"&&(q=o(q)),M.call(this,q,W,z,ne,X))};case 6:return function(q,W,z,ne,X,ve){return arguments.length!==6?L.apply(this,arguments):(typeof q=="function"&&(q=o(q)),M.call(this,q,W,z,ne,X,ve))};default:return L}}function ae(M){return(M=Number(M))>=0?M:!1}function te(M){return typeof M=="string"&&ae(M)===!1}}),KZ=O((t,e)=>{"use strict";var r=require("assert"),n=Tb(),o="cls@contexts",i="error@context";process.addAsyncListener||zZ();function s(d){this.name=d,this.active=null,this._set=[],this.id=null}s.prototype.set=function(d,f){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[d]=f,f},s.prototype.get=function(d){if(this.active)return this.active[d]},s.prototype.createContext=function(){return Object.create(this.active)},s.prototype.run=function(d){var f=this.createContext();this.enter(f);try{return d(f),f}catch(p){throw p&&(p[i]=f),p}finally{this.exit(f)}},s.prototype.runAndReturn=function(d){var f;return this.run(function(p){f=d(p)}),f},s.prototype.bind=function(d,f){f||(this.active?f=this.active:f=this.createContext());var p=this;return function(){p.enter(f);try{return d.apply(this,arguments)}catch(h){throw h&&(h[i]=f),h}finally{p.exit(f)}}},s.prototype.enter=function(d){r.ok(d,"context must be provided for entering"),this._set.push(this.active),this.active=d},s.prototype.exit=function(d){if(r.ok(d,"context must be provided for exiting"),this.active===d){r.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var f=this._set.lastIndexOf(d);r.ok(f>=0,"context not currently entered; can't exit"),r.ok(f,"can't remove top context"),this._set.splice(f,1)},s.prototype.bindEmitter=function(d){r.ok(d.on&&d.addListener&&d.emit,"can only bind real EEs");var f=this,p="context@"+this.name;function h(g){!g||(g[o]||(g[o]=Object.create(null)),g[o][p]={namespace:f,context:f.active})}function m(g){if(!(g&&g[o]))return g;var v=g,y=g[o];return Object.keys(y).forEach(function(b){var C=y[b];v=C.namespace.bind(v,C.context)}),v}n(d,h,m)},s.prototype.fromException=function(d){return d[i]};function a(d){return process.namespaces[d]}function c(d){r.ok(d,"namespace must be given a name!");var f=new s(d);return f.id=process.addAsyncListener({create:function(){return f.active},before:function(p,h){h&&f.enter(h)},after:function(p,h){h&&f.exit(h)},error:function(p){p&&f.exit(p)}}),process.namespaces[d]=f,f}function l(d){var f=a(d);r.ok(f,"can't delete nonexistent namespace!"),r.ok(f.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(f.id),process.namespaces[d]=null}function u(){process.namespaces&&Object.keys(process.namespaces).forEach(function(d){l(d)}),process.namespaces=Object.create(null)}process.namespaces||u(),e.exports={getNamespace:a,createNamespace:c,destroyNamespace:l,reset:u}}),Dc=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CorrelationContextManager=void 0;var e=Jt(),r=kb(),n=fm(),o=tF(),i=aF(),s=function(){function c(){}return c.getCurrentContext=function(){if(!c.enabled)return null;var l=c.session.get(c.CONTEXT_NAME);return l===void 0?null:l},c.generateContextObject=function(l,u,d,f,p,h){return u=u||l,this.enabled?{operation:{name:d,id:l,parentId:u,traceparent:p,tracestate:h},customProperties:new a(f)}:null},c.spanToContextObject=function(l,u,d){var f=new n;return f.traceId=l.traceId,f.spanId=l.spanId,f.traceFlag=n.formatOpenTelemetryTraceFlags(l.traceFlags)||n.DEFAULT_TRACE_FLAG,f.parentId=u,c.generateContextObject(f.traceId,f.parentId,d,null,f)},c.runWithContext=function(l,u){var d;return c.enabled?c.session.bind(u,(d={},d[c.CONTEXT_NAME]=l,d))():u()},c.wrapEmitter=function(l){c.enabled&&c.session.bindEmitter(l)},c.wrapCallback=function(l,u){var d;return c.enabled?c.session.bind(l,u?(d={},d[c.CONTEXT_NAME]=u,d):void 0):l},c.enable=function(l){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}c.hasEverEnabled||(this.forceClsHooked=l,this.hasEverEnabled=!0,typeof this.cls>"u"&&(c.forceClsHooked===!0||c.forceClsHooked===void 0&&c.shouldUseClsHooked()?this.cls=HZ():this.cls=KZ()),c.session=this.cls.createNamespace("AI-CLS-Session"),r.registerContextPreservation(function(u){return c.session.bind(u)})),this.enabled=!0}},c.startOperation=function(l,u){var d=l&&l.traceContext||null,f=l&&l.traceId?l:null,p=l&&l.headers;if(f){var h=new n("00-"+f.traceId+"-"+f.spanId+"-01"),m=new o(f.traceState?f.traceState.serialize():null),g=c.generateContextObject(f.traceId,"|"+f.traceId+"."+f.spanId+".",typeof u=="string"?u:"",void 0,h,m);return g}if(d){var h=new n(d.traceparent),m=new o(d.tracestate),v=typeof u=="object"?new i(u):null,g=c.generateContextObject(h.traceId,h.parentId,typeof u=="string"?u:v.getOperationName({}),v&&v.getCorrelationContextHeader()||void 0,h,m);return g}if(p){var h=new n(p.traceparent?p.traceparent.toString():null),m=new o(p.tracestate?p.tracestate.toString():null),v=new i(l),g=c.generateContextObject(h.traceId,h.parentId,v.getOperationName({}),v.getCorrelationContextHeader(),h,m);return g}return e.warn("startOperation was called with invalid arguments",arguments),null},c.disable=function(){this.enabled=!1},c.reset=function(){c.hasEverEnabled&&(c.session=null,c.session=this.cls.createNamespace("AI-CLS-Session"))},c.isNodeVersionCompatible=function(){var l=process.versions.node.split(".");return parseInt(l[0])>3||parseInt(l[0])>2&&parseInt(l[1])>2},c.shouldUseClsHooked=function(){var l=process.versions.node.split(".");return parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=2},c.canUseClsHooked=function(){var l=process.versions.node.split("."),u=parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=0,d=parseInt(l[0])<8||parseInt(l[0])<=8&&parseInt(l[1])<2,f=parseInt(l[0])>4||parseInt(l[0])>=4&&parseInt(l[1])>=7;return!(u&&d)&&f},c.enabled=!1,c.hasEverEnabled=!1,c.forceClsHooked=void 0,c.CONTEXT_NAME="ApplicationInsights-Context",c}();t.CorrelationContextManager=s;var a=function(){function c(l){this.props=[],this.addHeaderData(l)}return c.prototype.addHeaderData=function(l){var u=l?l.split(", "):[];this.props=u.map(function(d){var f=d.split("=");return{key:f[0],value:f[1]}}).concat(this.props)},c.prototype.serializeToHeader=function(){return this.props.map(function(l){return l.key+"="+l.value}).join(", ")},c.prototype.getProperty=function(l){for(var u=0;u<this.props.length;++u){var d=this.props[u];if(d.key===l)return d.value}},c.prototype.setProperty=function(l,u){if(c.bannedCharacters.test(l)||c.bannedCharacters.test(u)){e.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+l+" and value: "+u);return}for(var d=0;d<this.props.length;++d){var f=this.props[d];if(f.key===l){f.value=u;return}}this.props.push({key:l,value:u})},c.bannedCharacters=/[,=]/,c}()}),YZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.enable=void 0;var e=kr(),r=Pt(),n=[],o=function(a){var c=a.data.message;n.forEach(function(l){c instanceof Error?l.trackException({exception:c}):(c.lastIndexOf(`
`)==c.length-1&&(c=c.substring(0,c.length-1)),l.trackTrace({message:c,severity:a.data.stderr?e.SeverityLevel.Warning:e.SeverityLevel.Information}))})};function i(a,c){a?(n.length===0&&r.channel.subscribe("console",o),n.push(c)):(n=n.filter(function(l){return l!=c}),n.length===0&&r.channel.unsubscribe("console",o))}t.enable=i;function s(){r.channel.unsubscribe("console",o),n=[]}t.dispose=s}),JZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.enable=void 0;var e=kr(),r=Pt(),n=[],o={10:e.SeverityLevel.Verbose,20:e.SeverityLevel.Verbose,30:e.SeverityLevel.Information,40:e.SeverityLevel.Warning,50:e.SeverityLevel.Error,60:e.SeverityLevel.Critical},i=function(c){var l=c.data.result;n.forEach(function(u){var d=o[c.data.level];l instanceof Error?u.trackException({exception:l}):u.trackTrace({message:l,severity:d})})};function s(c,l){c?(n.length===0&&r.channel.subscribe("bunyan",i),n.push(l)):(n=n.filter(function(u){return u!=l}),n.length===0&&r.channel.unsubscribe("bunyan",i))}t.enable=s;function a(){r.channel.unsubscribe("bunyan",i),n=[]}t.dispose=a}),QZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.enable=void 0;var e=kr(),r=Pt(),n=[],o={syslog:function(c){var l={emerg:e.SeverityLevel.Critical,alert:e.SeverityLevel.Critical,crit:e.SeverityLevel.Critical,error:e.SeverityLevel.Error,warning:e.SeverityLevel.Warning,notice:e.SeverityLevel.Information,info:e.SeverityLevel.Information,debug:e.SeverityLevel.Verbose};return l[c]===void 0?e.SeverityLevel.Information:l[c]},npm:function(c){var l={error:e.SeverityLevel.Error,warn:e.SeverityLevel.Warning,info:e.SeverityLevel.Information,verbose:e.SeverityLevel.Verbose,debug:e.SeverityLevel.Verbose,silly:e.SeverityLevel.Verbose};return l[c]===void 0?e.SeverityLevel.Information:l[c]},unknown:function(c){return e.SeverityLevel.Information}},i=function(c){var l=c.data.message;n.forEach(function(u){if(l instanceof Error)u.trackException({exception:l,properties:c.data.meta});else{var d=o[c.data.levelKind](c.data.level);u.trackTrace({message:l,severity:d,properties:c.data.meta})}})};function s(c,l){c?(n.length===0&&r.channel.subscribe("winston",i),n.push(l)):(n=n.filter(function(u){return u!=l}),n.length===0&&r.channel.unsubscribe("winston",i))}t.enable=s;function a(){r.channel.unsubscribe("winston",i),n=[]}t.dispose=a}),XZ=O((t,e)=>{"use strict";var r=kb(),n=function(){function o(i){if(o.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=i,o.INSTANCE=this}return o.prototype.enable=function(i,s){r.IsInitialized&&(YZ().enable(i&&s,this._client),JZ().enable(i,this._client),QZ().enable(i,this._client))},o.prototype.isInitialized=function(){return this._isInitialized},o.prototype.dispose=function(){o.INSTANCE=null,this.enable(!1,!1)},o._methodNames=["debug","info","log","warn","error"],o}();e.exports=n}),ZZ=O((t,e)=>{"use strict";var r=function(){function n(o){if(n.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");n.INSTANCE=this,this._client=o;var i=process.versions.node.split(".");n._canUseUncaughtExceptionMonitor=parseInt(i[0])>13||parseInt(i[0])===13&&parseInt(i[1])>=7}return n.prototype.isInitialized=function(){return this._isInitialized},n.prototype.enable=function(o){var i=this;if(o){this._isInitialized=!0;var s=this;if(!this._exceptionListenerHandle){var a=function(c,l,u){u===void 0&&(u=new Error(n._FALLBACK_ERROR_MESSAGE)),i._client.trackException({exception:u}),i._client.flush({isAppCrashing:!0}),c&&l&&process.listeners(l).length===1&&(console.error(u),process.exit(1))};n._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=a.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=a.bind(this,!0,n.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=a.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(n._canUseUncaughtExceptionMonitor?process.removeListener(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},n.prototype.dispose=function(){n.INSTANCE=null,this.enable(!1),this._isInitialized=!1},n.INSTANCE=null,n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",n.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",n.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",n._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",n._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",n._canUseUncaughtExceptionMonitor=!1,n}();e.exports=r}),ji=O(t=>{"use strict";var e;Object.defineProperty(t,"__esModule",{value:!0}),t.HeartBeatMetricName=t.DependencyTypeName=t.SpanAttribute=t.TelemetryTypeStringToQuickPulseDocumentType=t.TelemetryTypeStringToQuickPulseType=t.QuickPulseType=t.QuickPulseDocumentType=t.PerformanceToQuickPulseCounter=t.MetricId=t.PerformanceCounter=t.QuickPulseCounter=t.DEFAULT_LIVEMETRICS_HOST=t.DEFAULT_LIVEMETRICS_ENDPOINT=t.DEFAULT_BREEZE_ENDPOINT=void 0,t.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",t.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",t.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var r;(function(i){i.COMMITTED_BYTES="\\Memory\\Committed Bytes",i.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",i.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",i.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",i.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",i.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",i.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",i.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",i.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(r=t.QuickPulseCounter||(t.QuickPulseCounter={}));var n;(function(i){i.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",i.AVAILABLE_BYTES="\\Memory\\Available Bytes",i.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",i.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",i.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",i.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(n=t.PerformanceCounter||(t.PerformanceCounter={}));var o;(function(i){i.REQUESTS_DURATION="requests/duration",i.DEPENDENCIES_DURATION="dependencies/duration",i.EXCEPTIONS_COUNT="exceptions/count",i.TRACES_COUNT="traces/count"})(o=t.MetricId||(t.MetricId={})),t.PerformanceToQuickPulseCounter=(e={},e[n.PROCESSOR_TIME]=r.PROCESSOR_TIME,e[n.REQUEST_RATE]=r.REQUEST_RATE,e[n.REQUEST_DURATION]=r.REQUEST_DURATION,e[r.COMMITTED_BYTES]=r.COMMITTED_BYTES,e[r.REQUEST_FAILURE_RATE]=r.REQUEST_FAILURE_RATE,e[r.DEPENDENCY_RATE]=r.DEPENDENCY_RATE,e[r.DEPENDENCY_FAILURE_RATE]=r.DEPENDENCY_FAILURE_RATE,e[r.DEPENDENCY_DURATION]=r.DEPENDENCY_DURATION,e[r.EXCEPTION_RATE]=r.EXCEPTION_RATE,e),t.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},t.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},t.TelemetryTypeStringToQuickPulseType={EventData:t.QuickPulseType.Event,ExceptionData:t.QuickPulseType.Exception,MessageData:t.QuickPulseType.Trace,MetricData:t.QuickPulseType.Metric,RequestData:t.QuickPulseType.Request,RemoteDependencyData:t.QuickPulseType.Dependency,AvailabilityData:t.QuickPulseType.Availability,PageViewData:t.QuickPulseType.PageView},t.TelemetryTypeStringToQuickPulseDocumentType={EventData:t.QuickPulseDocumentType.Event,ExceptionData:t.QuickPulseDocumentType.Exception,MessageData:t.QuickPulseDocumentType.Trace,MetricData:t.QuickPulseDocumentType.Metric,RequestData:t.QuickPulseDocumentType.Request,RemoteDependencyData:t.QuickPulseDocumentType.Dependency,AvailabilityData:t.QuickPulseDocumentType.Availability,PageViewData:t.QuickPulseDocumentType.PageView},t.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},t.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},t.HeartBeatMetricName="HeartBeat"}),Ab=O((t,e)=>{"use strict";var r=require("os"),n=ji(),o=function(){function i(s,a,c){a===void 0&&(a=6e4),c===void 0&&(c=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,i.INSTANCE||(i.INSTANCE=this),this._isInitialized=!1,this._client=s,this._collectionInterval=a,this._enableLiveMetricsCounters=c}return i.prototype.enable=function(s,a){var c=this;this._isEnabled=s,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),s?this._handle||(this._lastCpus=r.cpus(),this._lastRequests={totalRequestCount:i._totalRequestCount,totalFailedRequestCount:i._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:i._totalDependencyCount,totalFailedDependencyCount:i._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:i._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=a||this._collectionInterval,this._handle=setInterval(function(){return c.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},i.countRequest=function(s,a){var c;if(i.isEnabled()){if(typeof s=="string")c=+new Date("1970-01-01T"+s+"Z");else if(typeof s=="number")c=s;else return;i._intervalRequestExecutionTime+=c,a===!1&&i._totalFailedRequestCount++,i._totalRequestCount++}},i.countException=function(){i._totalExceptionCount++},i.countDependency=function(s,a){var c;if(i.isEnabled()){if(typeof s=="string")c=+new Date("1970-01-01T"+s+"Z");else if(typeof s=="number")c=s;else return;i._intervalDependencyExecutionTime+=c,a===!1&&i._totalFailedDependencyCount++,i._totalDependencyCount++}},i.prototype.isInitialized=function(){return this._isInitialized},i.isEnabled=function(){return i.INSTANCE&&i.INSTANCE._isEnabled},i.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},i.prototype._trackCpu=function(){var s=r.cpus();if(s&&s.length&&this._lastCpus&&s.length===this._lastCpus.length){for(var a=0,c=0,l=0,u=0,d=0,f=0;!!s&&f<s.length;f++){var p=s[f],h=this._lastCpus[f],m="% cpu("+f+") ",g=p.model,v=p.speed,y=p.times,b=h.times,C=y.user-b.user||0;a+=C;var _=y.sys-b.sys||0;c+=_;var P=y.nice-b.nice||0;l+=P;var S=y.idle-b.idle||0;u+=S;var k=y.irq-b.irq||0;d+=k}var T=void 0;if(typeof process.cpuUsage=="function"){var A=process.cpuUsage(),F=process.hrtime(),j=A.user-this._lastAppCpuUsage.user+(A.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime<"u"&&this._lastHrtime.length===2){var J=(F[0]-this._lastHrtime[0])*1e6+(F[1]-this._lastHrtime[1])/1e3||0;T=100*j/(J*s.length)}this._lastAppCpuUsage=A,this._lastHrtime=F}var Y=a+c+l+u+d||1;this._client.trackMetric({name:n.PerformanceCounter.PROCESSOR_TIME,value:(Y-u)/Y*100}),this._client.trackMetric({name:n.PerformanceCounter.PROCESS_TIME,value:T||a/Y*100})}this._lastCpus=s},i.prototype._trackMemory=function(){var s=r.freemem(),a=process.memoryUsage().rss,c=r.totalmem()-s;this._client.trackMetric({name:n.PerformanceCounter.PRIVATE_BYTES,value:a}),this._client.trackMetric({name:n.PerformanceCounter.AVAILABLE_BYTES,value:s}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.COMMITTED_BYTES,value:c})},i.prototype._trackNetwork=function(){var s=this._lastRequests,a={totalRequestCount:i._totalRequestCount,totalFailedRequestCount:i._totalFailedRequestCount,time:+new Date},c=a.totalRequestCount-s.totalRequestCount||0,l=a.totalFailedRequestCount-s.totalFailedRequestCount||0,u=a.time-s.time,d=u/1e3,f=(i._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/c||0;if(this._lastIntervalRequestExecutionTime=i._intervalRequestExecutionTime,u>0){var p=c/d,h=l/d;this._client.trackMetric({name:n.PerformanceCounter.REQUEST_RATE,value:p}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:n.PerformanceCounter.REQUEST_DURATION,value:f}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.REQUEST_FAILURE_RATE,value:h})}this._lastRequests=a},i.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var s=this._lastDependencies,a={totalDependencyCount:i._totalDependencyCount,totalFailedDependencyCount:i._totalFailedDependencyCount,time:+new Date},c=a.totalDependencyCount-s.totalDependencyCount||0,l=a.totalFailedDependencyCount-s.totalFailedDependencyCount||0,u=a.time-s.time,d=u/1e3,f=(i._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/c||0;if(this._lastIntervalDependencyExecutionTime=i._intervalDependencyExecutionTime,u>0){var p=c/d,h=l/d;this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_RATE,value:p}),this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:h}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_DURATION,value:f})}this._lastDependencies=a}},i.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var s=this._lastExceptions,a={totalExceptionCount:i._totalExceptionCount,time:+new Date},c=a.totalExceptionCount-s.totalExceptionCount||0,l=a.time-s.time,u=l/1e3;if(l>0){var d=c/u;this._client.trackMetric({name:n.QuickPulseCounter.EXCEPTION_RATE,value:d})}this._lastExceptions=a}},i.prototype.dispose=function(){i.INSTANCE=null,this.enable(!1),this._isInitialized=!1},i._totalRequestCount=0,i._totalFailedRequestCount=0,i._totalDependencyCount=0,i._totalFailedDependencyCount=0,i._totalExceptionCount=0,i._intervalDependencyExecutionTime=0,i._intervalRequestExecutionTime=0,i}();e.exports=o}),eee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AggregatedMetricCounter=void 0;var e=function(){function r(n){this.dimensions=n,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return r}();t.AggregatedMetricCounter=e}),tee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreaggregatedMetricPropertyNames=void 0,t.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}}),dF=O((t,e)=>{"use strict";var r=t&&t.__assign||function(){return r=Object.assign||function(a){for(var c,l=1,u=arguments.length;l<u;l++){c=arguments[l];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},r.apply(this,arguments)},n=ji(),o=eee(),i=tee(),s=function(){function a(c,l){l===void 0&&(l=6e4),a.INSTANCE||(a.INSTANCE=this),this._isInitialized=!1,a._dependencyCountersCollection=[],a._requestCountersCollection=[],a._exceptionCountersCollection=[],a._traceCountersCollection=[],this._client=c,this._collectionInterval=l}return a.prototype.enable=function(c,l){var u=this;this._isEnabled=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),c?this._handle||(this._collectionInterval=l||this._collectionInterval,this._handle=setInterval(function(){return u.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},a.countException=function(c){if(a.isEnabled()){var l=a._getAggregatedCounter(c,this._exceptionCountersCollection);l.totalCount++}},a.countTrace=function(c){if(a.isEnabled()){var l=a._getAggregatedCounter(c,this._traceCountersCollection);l.totalCount++}},a.countRequest=function(c,l){if(a.isEnabled()){var u,d=a._getAggregatedCounter(l,this._requestCountersCollection);if(typeof c=="string")u=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")u=c;else return;d.intervalExecutionTime+=u,d.totalCount++}},a.countDependency=function(c,l){if(a.isEnabled()){var u=a._getAggregatedCounter(l,this._dependencyCountersCollection),d;if(typeof c=="string")d=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")d=c;else return;u.intervalExecutionTime+=d,u.totalCount++}},a.prototype.isInitialized=function(){return this._isInitialized},a.isEnabled=function(){return a.INSTANCE&&a.INSTANCE._isEnabled},a.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},a._getAggregatedCounter=function(c,l){for(var u=!1,d=0;d<l.length;d++){if(c===l[d].dimensions)return l[d];if(Object.keys(c).length===Object.keys(l[d].dimensions).length){for(var f in c)if(c[f]!=l[d].dimensions[f]){u=!0;break}if(!u)return l[d];u=!1}}var p=new o.AggregatedMetricCounter(c);return l.push(p),p},a.prototype._trackRequestMetrics=function(){for(var c=0;c<a._requestCountersCollection.length;c++){var l=a._requestCountersCollection[c];l.time=+new Date;var u=l.totalCount-l.lastTotalCount||0,d=l.time-l.lastTime,f=(l.intervalExecutionTime-l.lastIntervalExecutionTime)/u||0;l.lastIntervalExecutionTime=l.intervalExecutionTime,d>0&&u>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:l.dimensions,value:f,count:u,aggregationInterval:d,metricType:n.MetricId.REQUESTS_DURATION}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackDependencyMetrics=function(){for(var c=0;c<a._dependencyCountersCollection.length;c++){var l=a._dependencyCountersCollection[c];l.time=+new Date;var u=l.totalCount-l.lastTotalCount||0,d=l.time-l.lastTime,f=(l.intervalExecutionTime-l.lastIntervalExecutionTime)/u||0;l.lastIntervalExecutionTime=l.intervalExecutionTime,d>0&&u>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:l.dimensions,value:f,count:u,aggregationInterval:d,metricType:n.MetricId.DEPENDENCIES_DURATION}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackExceptionMetrics=function(){for(var c=0;c<a._exceptionCountersCollection.length;c++){var l=a._exceptionCountersCollection[c],u=l.totalCount-l.lastTotalCount||0,d=l.time-l.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:l.dimensions,value:u,count:u,aggregationInterval:d,metricType:n.MetricId.EXCEPTIONS_COUNT}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackTraceMetrics=function(){for(var c=0;c<a._traceCountersCollection.length;c++){var l=a._traceCountersCollection[c],u=l.totalCount-l.lastTotalCount||0,d=l.time-l.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:l.dimensions,value:u,count:u,aggregationInterval:d,metricType:n.MetricId.TRACES_COUNT}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackPreAggregatedMetric=function(c){var l={};for(var u in c.dimensions)l[i.PreaggregatedMetricPropertyNames[u]]=c.dimensions[u];l=r(r({},l),{"_MS.MetricId":c.metricType,"_MS.AggregationIntervalMs":String(c.aggregationInterval),"_MS.IsAutocollected":"True"});var d={name:c.name,value:c.value,count:c.count,properties:l,kind:"Aggregation"};this._client.trackMetric(d)},a.prototype.dispose=function(){a.INSTANCE=null,this.enable(!1),this._isInitialized=!1},a}();e.exports=s}),pm=O((t,e)=>{"use strict";var r=require("os"),n=require("fs"),o=require("path"),i=kr(),s=Jt(),a=function(){function c(l){this.keys=new i.ContextTagKeys,this.tags={},this._loadApplicationContext(l),this._loadDeviceContext(),this._loadInternalContext()}return c.prototype._loadApplicationContext=function(l){if(l=l||o.resolve(__dirname,"../../../../package.json"),!c.appVersion[l]){c.appVersion[l]="unknown";try{var u=JSON.parse(n.readFileSync(l,"utf8"));u&&typeof u.version=="string"&&(c.appVersion[l]=u.version)}catch(d){s.info("unable to read app version: ",d)}}this.tags[this.keys.applicationVersion]=c.appVersion[l]},c.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=r&&r.hostname(),this.tags[this.keys.deviceOSVersion]=r&&r.type()+" "+r.release(),this.tags[this.keys.cloudRole]=c.DefaultRoleName,this.tags["ai.device.osArchitecture"]=r&&r.arch(),this.tags["ai.device.osPlatform"]=r&&r.platform()},c.prototype._loadInternalContext=function(){var l=o.resolve(__dirname,"../../package.json");if(!c.sdkVersion){c.sdkVersion="unknown";try{var u=JSON.parse(n.readFileSync(l,"utf8"));u&&typeof u.version=="string"&&(c.sdkVersion=u.version)}catch(d){s.info("unable to read app version: ",d)}}this.tags[this.keys.internalSdkVersion]="node:"+c.sdkVersion},c.DefaultRoleName="Web",c.appVersion={},c.sdkVersion=null,c}();e.exports=a}),ree=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var u=function(d,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(p[m]=h[m])},u(d,f)};return function(d,f){u(d,f);function p(){this.constructor=d}d.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}}(),n=require("url"),o=kr(),i=bn(),s=Wu(),a=sF(),c=Ac(),l=function(u){r(d,u);function d(f,p){var h=u.call(this)||this;return p&&p.method&&f&&(h.method=p.method,h.url=d._getUrlFromRequestOptions(f,p),h.startTime=+new Date),h}return d.prototype.onError=function(f){this._setStatus(void 0,f)},d.prototype.onResponse=function(f){this._setStatus(f.statusCode,void 0),this.correlationId=i.getCorrelationContextTarget(f,s.requestContextTargetKey)},d.prototype.getDependencyTelemetry=function(f,p){var h=n.parse(this.url);h.search=void 0,h.hash=void 0;var m=this.method.toUpperCase()+" "+h.pathname,g=o.RemoteDependencyDataConstants.TYPE_HTTP,v=h.hostname;h.port&&(v+=":"+h.port),this.correlationId?(g=o.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==c.correlationIdPrefix&&(v+=" | "+this.correlationId)):g=o.RemoteDependencyDataConstants.TYPE_HTTP;var y={id:p,name:m,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:g,target:v};if(f&&f.time?y.time=f.time:this.startTime&&(y.time=new Date(this.startTime)),f){for(var b in f)y[b]||(y[b]=f[b]);if(f.properties)for(var b in f.properties)y.properties[b]=f.properties[b]}return y},d._getUrlFromRequestOptions=function(f,p){if(typeof f=="string")if(f.indexOf("http://")===0||f.indexOf("https://")===0)f=n.parse(f);else{var h=n.parse(f);h.host==="443"?f=n.parse("https://"+f):f=n.parse("http://"+f)}else{if(f&&typeof n.URL=="function"&&f instanceof n.URL)return n.format(f);var m=f;f={},m&&Object.keys(m).forEach(function(y){f[y]=m[y]})}if(f.path){var g=n.parse(f.path);f.pathname=g.pathname,f.search=g.search}if(f.host&&f.port){var v=n.parse("http://"+f.host);!v.port&&f.port&&(f.hostname=f.host,delete f.host)}return f.protocol=f.protocol||p.agent&&p.agent.protocol||p.protocol||void 0,f.hostname=f.hostname||"localhost",n.format(f)},d}(a);e.exports=l}),nee=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(s){for(var a,c=1,l=arguments.length;c<l;c++){a=arguments[c];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(s[u]=a[u])}return s},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.spanToTelemetryContract=void 0;var r=ft(),n=ji();function o(s){var a=e({},s);return Object.keys(n.SpanAttribute).forEach(function(c){delete a[c]}),a}function i(s){var a="|"+s.spanContext().traceId+"."+s.spanContext().spanId+".",c=Math.round(s._duration[0]*1e3+s._duration[1]/1e6),l=s.attributes["peer.address"]?s.attributes["peer.address"].toString():"",u=s.attributes.component?s.attributes.component.toString():"",d=u.toUpperCase()===n.DependencyTypeName.Http||!!s.attributes[n.SpanAttribute.HttpUrl],f=u.toLowerCase()===n.DependencyTypeName.Grpc;if(d){var p=s.attributes[n.SpanAttribute.HttpMethod]||"GET",h=new URL(s.attributes[n.SpanAttribute.HttpUrl].toString()),m=s.attributes[n.SpanAttribute.HttpHost]||h.host,g=s.attributes[n.SpanAttribute.HttpPort]||h.port||null,v=h.pathname||"/",y=p+" "+v,b=n.DependencyTypeName.Http,C=g?(m+":"+g).toString():m.toString(),_=h.toString(),P=s.attributes[n.SpanAttribute.HttpStatusCode]||s.status.code||0,S=P<400;return{id:a,name:y,dependencyTypeName:b,target:C,data:_,success:S,duration:c,url:_,resultCode:String(P),properties:o(s.attributes)}}else if(f){var p=s.attributes[n.SpanAttribute.GrpcMethod]||"rpc",k=s.attributes[n.SpanAttribute.GrpcService],T=k?p+" "+k:s.name;return{id:a,duration:c,name:T,target:k.toString(),data:k.toString()||T,url:k.toString()||T,dependencyTypeName:n.DependencyTypeName.Grpc,resultCode:String(s.status.code||0),success:s.status.code===0,properties:o(s.attributes)}}else{var A=s.name,F=s.links&&s.links.map(function(j){return{operation_Id:j.context.traceId,id:j.context.spanId}});return{id:a,duration:c,name:A,target:l,data:l||A,url:l||A,dependencyTypeName:s.kind===r.SpanKind.INTERNAL?n.DependencyTypeName.InProc:u||s.name,resultCode:String(s.status.code||0),success:s.status.code===0,properties:e(e({},o(s.attributes)),{"_MS.links":F||void 0})}}}t.spanToTelemetryContract=i}),oee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=ft(),r=Pt(),n=fm(),o=nee(),i=k1(),s=[],a=function(l){var u=l.data,d=o.spanToTelemetryContract(u),f=u.spanContext(),p=new n;p.traceId=f.traceId,p.spanId=f.spanId,p.traceFlag=n.formatOpenTelemetryTraceFlags(f.traceFlags),p.parentId=u.parentSpanId?"|"+f.traceId+"."+u.parentSpanId+".":null,i.AsyncScopeManager.with(u,function(){s.forEach(function(h){u.kind===e.SpanKind.SERVER?h.trackRequest(d):(u.kind===e.SpanKind.CLIENT||u.kind===e.SpanKind.INTERNAL)&&h.trackDependency(d)})})};t.subscriber=a;function c(l,u){l?(s.length===0&&r.channel.subscribe("azure-coretracing",t.subscriber),s.push(u)):(s=s.filter(function(d){return d!=u}),s.length===0&&r.channel.unsubscribe("azure-coretracing",t.subscriber))}t.enable=c}),iee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=Pt(),r=[],n=function(i){i.data.event.commandName!=="ismaster"&&r.forEach(function(s){var a=i.data.startedData&&i.data.startedData.databaseName||"Unknown database";s.trackDependency({target:a,data:i.data.event.commandName,name:i.data.event.commandName,duration:i.data.event.duration,success:i.data.succeeded,resultCode:i.data.succeeded?"0":"1",time:i.data.startedData.time,dependencyTypeName:"mongodb"})})};t.subscriber=n;function o(i,s){i?(r.length===0&&e.channel.subscribe("mongodb",t.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&e.channel.unsubscribe("mongodb",t.subscriber))}t.enable=o}),see=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=Pt(),r=[],n=function(i){r.forEach(function(s){var a=i.data.query||{},c=a.sql||"Unknown query",l=!i.data.err,u=a._connection||{},d=u.config||{},f=d.socketPath?d.socketPath:(d.host||"localhost")+":"+d.port;s.trackDependency({target:f,data:c,name:c,duration:i.data.duration,success:l,resultCode:l?"0":"1",time:i.data.time,dependencyTypeName:"mysql"})})};t.subscriber=n;function o(i,s){i?(r.length===0&&e.channel.subscribe("mysql",t.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&e.channel.unsubscribe("mysql",t.subscriber))}t.enable=o}),aee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=Pt(),r=[],n=function(i){r.forEach(function(s){i.data.commandObj.command!=="info"&&s.trackDependency({target:i.data.address,name:i.data.commandObj.command,data:i.data.commandObj.command,duration:i.data.duration,success:!i.data.err,resultCode:i.data.err?"1":"0",time:i.data.time,dependencyTypeName:"redis"})})};t.subscriber=n;function o(i,s){i?(r.length===0&&e.channel.subscribe("redis",t.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&e.channel.unsubscribe("redis",t.subscriber))}t.enable=o}),cee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=Pt(),r=[],n=function(i){r.forEach(function(s){var a=i.data.query,c=a.preparable&&a.preparable.text||a.plan||a.text||"unknown query",l=!i.data.error,u=i.data.database.host+":"+i.data.database.port;s.trackDependency({target:u,data:c,name:c,duration:i.data.duration,success:l,resultCode:l?"0":"1",time:i.data.time,dependencyTypeName:"postgres"})})};t.subscriber=n;function o(i,s){i?(r.length===0&&e.channel.subscribe("postgres",t.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&e.channel.unsubscribe("postgres",t.subscriber))}t.enable=o}),Gu=O((t,e)=>{"use strict";var r=t&&t.__spreadArrays||function(){for(var h=0,m=0,g=arguments.length;m<g;m++)h+=arguments[m].length;for(var v=Array(h),y=0,m=0;m<g;m++)for(var b=arguments[m],C=0,_=b.length;C<_;C++,y++)v[y]=b[C];return v},n=require("http"),o=require("https"),i=Jt(),s=bn(),a=Wu(),c=ree(),l=Dc(),u=Ac(),d=fm(),f=kb(),p=function(){function h(m){if(h.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");h.INSTANCE=this,this._client=m}return h.prototype.enable=function(m){this._isEnabled=m,this._isEnabled&&!this._isInitialized&&this._initialize(),f.IsInitialized&&(oee().enable(!0,this._client),iee().enable(m,this._client),see().enable(m,this._client),aee().enable(m,this._client),cee().enable(m,this._client))},h.prototype.isInitialized=function(){return this._isInitialized},h.prototype._initialize=function(){var m=this;this._isInitialized=!0;var g=n.request,v=o.request,y=function(b,C){var _=!C[h.disableCollectionRequestOption]&&!b[h.alreadyAutoCollectedFlag];C.headers&&C.headers["user-agent"]&&C.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(_=!1),b[h.alreadyAutoCollectedFlag]=!0,b&&C&&_&&(l.CorrelationContextManager.wrapEmitter(b),h.trackRequest(m._client,{options:C,request:b}))};n.request=function(b){for(var C=[],_=1;_<arguments.length;_++)C[_-1]=arguments[_];var P=g.call.apply(g,r([n,b],C));return y(P,b),P},o.request=function(b){for(var C=[],_=1;_<arguments.length;_++)C[_-1]=arguments[_];var P=v.call.apply(v,r([o,b],C));return y(P,b),P},n.get=function(b){for(var C,_=[],P=1;P<arguments.length;P++)_[P-1]=arguments[P];var S=(C=n.request).call.apply(C,r([n,b],_));return S.end(),S},o.get=function(b){for(var C,_=[],P=1;P<arguments.length;P++)_[P-1]=arguments[P];var S=(C=o.request).call.apply(C,r([o,b],_));return S.end(),S}},h.trackRequest=function(m,g){if(!g.options||!g.request||!m){i.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!g.options,!g.request,!m);return}var v=new c(g.options,g.request),y=l.CorrelationContextManager.getCurrentContext(),b,C;if(y&&y.operation&&y.operation.traceparent&&d.isValidTraceId(y.operation.traceparent.traceId))y.operation.traceparent.updateSpanId(),b=y.operation.traceparent.getBackCompatRequestId();else if(u.w3cEnabled){var _=new d;C=_.toString(),b=_.getBackCompatRequestId()}else b=y&&y.operation&&y.operation.parentId+h.requestNumber+++".";if(s.canIncludeCorrelationHeader(m,v.getUrl())&&g.request.getHeader&&g.request.setHeader&&m.config&&m.config.correlationId){var P=g.request.getHeader(a.requestContextHeader);try{s.safeIncludeCorrelationHeader(m,g.request,P)}catch(T){i.warn("Request-Context header could not be set. Correlation of requests may be lost",T)}if(y&&y.operation)try{if(g.request.setHeader(a.requestIdHeader,b),m.config.ignoreLegacyHeaders||(g.request.setHeader(a.parentIdHeader,y.operation.id),g.request.setHeader(a.rootIdHeader,b)),C||y.operation.traceparent)g.request.setHeader(a.traceparentHeader,C||y.operation.traceparent.toString());else if(u.w3cEnabled){var _=new d().toString();g.request.setHeader(a.traceparentHeader,_)}if(y.operation.tracestate){var S=y.operation.tracestate.toString();S&&g.request.setHeader(a.traceStateHeader,S)}var k=y.customProperties.serializeToHeader();k&&g.request.setHeader(a.correlationContextHeader,k)}catch(T){i.warn("Correlation headers could not be set. Correlation of requests may be lost.",T)}}g.request.on&&(g.request.on("response",function(T){v.onResponse(T);var A=v.getDependencyTelemetry(g,b);A.contextObjects=A.contextObjects||{},A.contextObjects["http.RequestOptions"]=g.options,A.contextObjects["http.ClientRequest"]=g.request,A.contextObjects["http.ClientResponse"]=T,m.trackDependency(A)}),g.request.on("error",function(T){v.onError(T);var A=v.getDependencyTelemetry(g,b);A.contextObjects=A.contextObjects||{},A.contextObjects["http.RequestOptions"]=g.options,A.contextObjects["http.ClientRequest"]=g.request,A.contextObjects.Error=T,m.trackDependency(A)}),g.request.on("abort",function(){v.onError(new Error);var T=v.getDependencyTelemetry(g,b);T.contextObjects=T.contextObjects||{},T.contextObjects["http.RequestOptions"]=g.options,T.contextObjects["http.ClientRequest"]=g.request,m.trackDependency(T)}))},h.prototype.dispose=function(){h.INSTANCE=null,this.enable(!1),this._isInitialized=!1},h.disableCollectionRequestOption="disableAppInsightsAutoCollection",h.requestNumber=1,h.alreadyAutoCollectedFlag="_appInsightsAutoCollected",h}();e.exports=p}),lee=O((t,e)=>{"use strict";var r=require("os"),n=ji(),o=bn(),i=pm(),s=Gu(),a="http://169.254.169.254/metadata/instance/compute",c="api-version=2017-12-01",l="format=json",u="ENETUNREACH",d=function(){function f(p){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",f.INSTANCE||(f.INSTANCE=this),this._isInitialized=!1,this._client=p}return f.prototype.enable=function(p,h){var m=this;this._isEnabled=p,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),p?this._handle||(this._handle=setInterval(function(){return m.trackHeartBeat(h,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},f.prototype.isInitialized=function(){return this._isInitialized},f.isEnabled=function(){return f.INSTANCE&&f.INSTANCE._isEnabled},f.prototype.trackHeartBeat=function(p,h){var m=this,g=!1,v={},y=i.sdkVersion;v.sdk=y,v.osType=r.type(),process.env.WEBSITE_SITE_NAME?(v.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",v.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",v.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?v.azfunction_appId=process.env.WEBSITE_HOSTNAME:p&&(this._isVM===void 0?(g=!0,this._getAzureComputeMetadata(p,function(){m._isVM&&Object.keys(m._vmData).length>0&&(v.azInst_vmId=m._vmData.vmId||"",v.azInst_subscriptionId=m._vmData.subscriptionId||"",v.azInst_osType=m._vmData.osType||"",m._azInst_vmId=m._vmData.vmId||"",m._azInst_subscriptionId=m._vmData.subscriptionId||"",m._azInst_osType=m._vmData.osType||""),m._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:v}),h()})):this._isVM&&(v.azInst_vmId=this._azInst_vmId,v.azInst_subscriptionId=this._azInst_subscriptionId,v.azInst_osType=this._azInst_osType)),g||(this._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:v}),h())},f.prototype.dispose=function(){f.INSTANCE=null,this.enable(!1),this._isInitialized=!1},f.prototype._getAzureComputeMetadata=function(p,h){var m,g=this,v=a+"?"+c+"&"+l,y=(m={method:"GET"},m[s.disableCollectionRequestOption]=!0,m.headers={Metadata:"True"},m),b=o.makeRequest(p,v,y,function(C){if(C.statusCode===200){g._isVM=!0;var _="";C.on("data",function(P){_+=P}),C.on("end",function(){g._vmData=g._isJSON(_)?JSON.parse(_):{},h()})}else h()});b&&(b.on("error",function(C){C&&C.message&&C.message.indexOf(u)>-1&&(g._isVM=!1),h()}),b.end())},f.prototype._isJSON=function(p){try{return JSON.parse(p)&&!!p}catch{return!1}},f}();e.exports=d}),fF=O((t,e)=>{"use strict";var r=require("http"),n=require("https"),o=Jt(),i=bn(),s=Wu(),a=aF(),c=Dc(),l=Ab(),u=function(){function d(f){if(d.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");d.INSTANCE=this,this._client=f}return d.prototype.enable=function(f){this._isEnabled=f,(this._isAutoCorrelating||this._isEnabled||l.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},d.prototype.useAutoCorrelation=function(f,p){f&&!this._isAutoCorrelating?c.CorrelationContextManager.enable(p):!f&&this._isAutoCorrelating&&c.CorrelationContextManager.disable(),this._isAutoCorrelating=f},d.prototype.isInitialized=function(){return this._isInitialized},d.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},d.prototype._generateCorrelationContext=function(f){if(this._isAutoCorrelating)return c.CorrelationContextManager.generateContextObject(f.getOperationId(this._client.context.tags),f.getRequestId(),f.getOperationName(this._client.context.tags),f.getCorrelationContextHeader(),f.getTraceparent(),f.getTracestate())},d.prototype._initialize=function(){var f=this;this._isInitialized=!0;var p=function(v){if(v){if(typeof v!="function")throw new Error("onRequest handler must be a function");return function(y,b){c.CorrelationContextManager.wrapEmitter(y),c.CorrelationContextManager.wrapEmitter(b);var C=y&&!y[d.alreadyAutoCollectedFlag];if(y&&C){var _=new a(y),P=f._generateCorrelationContext(_);c.CorrelationContextManager.runWithContext(P,function(){f._isEnabled&&(y[d.alreadyAutoCollectedFlag]=!0,d.trackRequest(f._client,{request:y,response:b},_)),typeof v=="function"&&v(y,b)})}else typeof v=="function"&&v(y,b)}}},h=function(v){var y=v.addListener.bind(v);v.addListener=function(b,C){switch(b){case"request":case"checkContinue":return y(b,p(C));default:return y(b,C)}},v.on=v.addListener},m=r.createServer;r.createServer=function(v,y){if(y&&typeof y=="function"){var b=m(v,p(y));return h(b),b}else{var b=m(p(v));return h(b),b}};var g=n.createServer;n.createServer=function(v,y){var b=g(v,p(y));return h(b),b}},d.trackRequestSync=function(f,p){if(!p.request||!p.response||!f){o.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!p.request,!p.response,!f);return}d.addResponseCorrelationIdHeader(f,p.response);var h=c.CorrelationContextManager.getCurrentContext(),m=new a(p.request,h&&h.operation.parentId);h&&(h.operation.id=m.getOperationId(f.context.tags)||h.operation.id,h.operation.name=m.getOperationName(f.context.tags)||h.operation.name,h.operation.parentId=m.getRequestId()||h.operation.parentId,h.customProperties.addHeaderData(m.getCorrelationContextHeader())),d.endRequest(f,m,p,p.duration,p.error)},d.trackRequest=function(f,p,h){if(!p.request||!p.response||!f){o.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!p.request,!p.response,!f);return}var m=c.CorrelationContextManager.getCurrentContext(),g=h||new a(p.request,m&&m.operation.parentId);i.canIncludeCorrelationHeader(f,g.getUrl())&&d.addResponseCorrelationIdHeader(f,p.response),m&&!h&&(m.operation.id=g.getOperationId(f.context.tags)||m.operation.id,m.operation.name=g.getOperationName(f.context.tags)||m.operation.name,m.operation.parentId=g.getOperationParentId(f.context.tags)||m.operation.parentId,m.customProperties.addHeaderData(g.getCorrelationContextHeader())),p.response.once&&p.response.once("finish",function(){d.endRequest(f,g,p,null,null)}),p.request.on&&p.request.on("error",function(v){d.endRequest(f,g,p,null,v)}),p.request.on&&p.request.on("aborted",function(){var v="The request has been aborted and the network socket has closed.";d.endRequest(f,g,p,null,v)})},d.addResponseCorrelationIdHeader=function(f,p){if(f.config&&f.config.correlationId&&p.getHeader&&p.setHeader&&!p.headersSent){var h=p.getHeader(s.requestContextHeader);i.safeIncludeCorrelationHeader(f,p,h)}},d.endRequest=function(f,p,h,m,g){g?p.onError(g,m):p.onResponse(h.response,m);var v=p.getRequestTelemetry(h);if(v.tagOverrides=p.getRequestTags(f.context.tags),h.tagOverrides)for(var y in h.tagOverrides)v.tagOverrides[y]=h.tagOverrides[y];var b=p.getLegacyRootId();b&&(v.properties.ai_legacyRootId=b),v.contextObjects=v.contextObjects||{},v.contextObjects["http.ServerRequest"]=h.request,v.contextObjects["http.ServerResponse"]=h.response,f.trackRequest(v)},d.prototype.dispose=function(){d.INSTANCE=null,this.enable(!1),this._isInitialized=!1,c.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},d.alreadyAutoCollectedFlag="_appInsightsAutoCollected",d}();e.exports=u}),uee=O((t,e)=>{"use strict";var r=t&&t.__assign||function(){return r=Object.assign||function(u){for(var d,f=1,p=arguments.length;f<p;f++){d=arguments[f];for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(u[h]=d[h])}return u},r.apply(this,arguments)},n=require("os"),o=kr(),i=ji(),s=bn(),a=Jt(),c=s.w3cTraceId(),l=function(){function u(){}return u.createQuickPulseEnvelope=function(d,f,p,h){var m=n&&typeof n.hostname=="function"&&n.hostname()||"Unknown",g=h.tags&&h.keys&&h.keys.cloudRoleInstance&&h.tags[h.keys.cloudRoleInstance]||m,v=h.tags&&h.keys&&h.keys.cloudRole&&h.tags[h.keys.cloudRole]||null,y={Documents:f.length>0?f:null,InstrumentationKey:p.instrumentationKey||"",Metrics:d.length>0?d:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:h.tags[h.keys.internalSdkVersion],StreamId:c,MachineName:m,Instance:g,RoleName:v};return y},u.createQuickPulseMetric=function(d){var f;return f={Name:d.name,Value:d.value,Weight:d.count||1},f},u.telemetryEnvelopeToQuickPulseDocument=function(d){switch(d.data.baseType){case o.TelemetryTypeString.Event:return u.createQuickPulseEventDocument(d);case o.TelemetryTypeString.Exception:return u.createQuickPulseExceptionDocument(d);case o.TelemetryTypeString.Trace:return u.createQuickPulseTraceDocument(d);case o.TelemetryTypeString.Dependency:return u.createQuickPulseDependencyDocument(d);case o.TelemetryTypeString.Request:return u.createQuickPulseRequestDocument(d)}return null},u.createQuickPulseEventDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData.name,h=r(r({},f),{Name:p});return h},u.createQuickPulseTraceDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData.severityLevel||0,h=r(r({},f),{Message:d.data.baseData.message,SeverityLevel:o.SeverityLevel[p]});return h},u.createQuickPulseExceptionDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData.exceptions,h="",m="",g="";p&&p.length>0&&(p[0].parsedStack&&p[0].parsedStack.length>0?p[0].parsedStack.forEach(function(y){h+=y.assembly+`
`}):p[0].stack&&p[0].stack.length>0&&(h=p[0].stack),m=p[0].message,g=p[0].typeName);var v=r(r({},f),{Exception:h,ExceptionMessage:m,ExceptionType:g});return v},u.createQuickPulseRequestDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData,h=r(r({},f),{Name:p.name,Success:p.success,Duration:p.duration,ResponseCode:p.responseCode,OperationName:p.name});return h},u.createQuickPulseDependencyDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData,h=r(r({},f),{Name:p.name,Target:p.target,Success:p.success,Duration:p.duration,ResultCode:p.resultCode,CommandName:p.data,OperationName:f.OperationId,DependencyTypeName:p.type});return h},u.createQuickPulseDocument=function(d){var f,p,h,m;d.data.baseType?(p=i.TelemetryTypeStringToQuickPulseType[d.data.baseType],f=i.TelemetryTypeStringToQuickPulseDocumentType[d.data.baseType]):a.warn("Document type invalid; not sending live metric document",d.data.baseType),h=d.tags[u.keys.operationId],m=u.aggregateProperties(d);var g={DocumentType:f,__type:p,OperationId:h,Version:"1.0",Properties:m};return g},u.aggregateProperties=function(d){var f=[],p=d.data.baseData.measurements||{};for(var h in p)if(p.hasOwnProperty(h)){var m=p[h],g={key:h,value:m};f.push(g)}var v=d.data.baseData.properties||{};for(var h in v)if(v.hasOwnProperty(h)){var m=v[h],g={key:h,value:m};f.push(g)}return f},u.keys=new o.ContextTagKeys,u}();e.exports=l}),dee=O((t,e)=>{"use strict";var r=function(){return(Date.now()+621355968e5)*1e4};e.exports={getTransmissionTime:r}}),fee=O((t,e)=>{"use strict";var r=t&&t.__awaiter||function(d,f,p,h){function m(g){return g instanceof p?g:new p(function(v){v(g)})}return new(p||(p=Promise))(function(g,v){function y(_){try{C(h.next(_))}catch(P){v(P)}}function b(_){try{C(h.throw(_))}catch(P){v(P)}}function C(_){_.done?g(_.value):m(_.value).then(y,b)}C((h=h.apply(d,f||[])).next())})},n=t&&t.__generator||function(d,f){var p={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},h,m,g,v;return v={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function y(C){return function(_){return b([C,_])}}function b(C){if(h)throw new TypeError("Generator is already executing.");for(;p;)try{if(h=1,m&&(g=C[0]&2?m.return:C[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,C[1])).done)return g;switch(m=0,g&&(C=[C[0]&2,g.value]),C[0]){case 0:case 1:g=C;break;case 4:return p.label++,{value:C[1],done:!1};case 5:p.label++,m=C[1],C=[0];continue;case 7:C=p.ops.pop(),p.trys.pop();continue;default:if(g=p.trys,!(g=g.length>0&&g[g.length-1])&&(C[0]===6||C[0]===2)){p=0;continue}if(C[0]===3&&(!g||C[1]>g[0]&&C[1]<g[3])){p.label=C[1];break}if(C[0]===6&&p.label<g[1]){p.label=g[1],g=C;break}if(g&&p.label<g[2]){p.label=g[2],p.ops.push(C);break}g[2]&&p.ops.pop(),p.trys.pop();continue}C=f.call(d,p)}catch(_){C=[6,_],m=0}finally{h=g=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},o=require("https"),i=Gu(),s=Jt(),a=dee(),c=bn(),l={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},u=function(){function d(f){this._config=f,this._consecutiveErrors=0}return d.prototype.ping=function(f,p,h){var m=[{name:l.streamId,value:f.StreamId},{name:l.machineName,value:f.MachineName},{name:l.roleName,value:f.RoleName},{name:l.instanceName,value:f.Instance},{name:l.invariantVersion,value:f.InvariantVersion.toString()}];this._submitData(f,p,h,"ping",m)},d.prototype.post=function(f,p,h){return r(this,void 0,void 0,function(){return n(this,function(m){switch(m.label){case 0:return[4,this._submitData([f],p,h,"post")];case 1:return m.sent(),[2]}})})},d.prototype._submitData=function(f,p,h,m,g){return r(this,void 0,void 0,function(){var v,y,b,C,_,P=this;return n(this,function(S){return v=JSON.stringify(f),y=(C={},C[i.disableCollectionRequestOption]=!0,C.host=p&&p.length>0?p:this._config.quickPulseHost,C.method=l.method,C.path="/QuickPulseService.svc/"+m+"?ikey="+this._config.instrumentationKey,C.headers=(_={Expect:"100-continue"},_[l.time]=a.getTransmissionTime(),_["Content-Type"]="application/json",_["Content-Length"]=Buffer.byteLength(v),_),C),g&&g.length>0&&g.forEach(function(k){return y.headers[k.name]=k.value}),this._config.httpsAgent?y.agent=this._config.httpsAgent:y.agent=c.tlsRestrictedAgent,b=o.request(y,function(k){if(k.statusCode==200){var T=k.headers[l.subscribed]==="true",A=k.headers[l.endpointRedirect]?k.headers[l.endpointRedirect].toString():null,F=k.headers[l.pollingIntervalHint]?parseInt(k.headers[l.pollingIntervalHint].toString()):null;P._consecutiveErrors=0,h(T,k,A,F)}else P._onError("StatusCode:"+k.statusCode+" StatusMessage:"+k.statusMessage),h()}),b.on("error",function(k){P._onError(k),h()}),b.write(v),b.end(),[2]})})},d.prototype._onError=function(f){this._consecutiveErrors++;var p="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%d.MAX_QPS_FAILURES_BEFORE_WARN==0?(p="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",s.warn(d.TAG,p,f)):s.info(d.TAG,p,f)},d.TAG="QuickPulseSender",d.MAX_QPS_FAILURES_BEFORE_WARN=25,d}();e.exports=u}),pee=O((t,e)=>{"use strict";var r=t&&t.__awaiter||function(u,d,f,p){function h(m){return m instanceof f?m:new f(function(g){g(m)})}return new(f||(f=Promise))(function(m,g){function v(C){try{b(p.next(C))}catch(_){g(_)}}function y(C){try{b(p.throw(C))}catch(_){g(_)}}function b(C){C.done?m(C.value):h(C.value).then(v,y)}b((p=p.apply(u,d||[])).next())})},n=t&&t.__generator||function(u,d){var f={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},p,h,m,g;return g={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function v(b){return function(C){return y([b,C])}}function y(b){if(p)throw new TypeError("Generator is already executing.");for(;f;)try{if(p=1,h&&(m=b[0]&2?h.return:b[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,b[1])).done)return m;switch(h=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return f.label++,{value:b[1],done:!1};case 5:f.label++,h=b[1],b=[0];continue;case 7:b=f.ops.pop(),f.trys.pop();continue;default:if(m=f.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){f=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){f.label=b[1];break}if(b[0]===6&&f.label<m[1]){f.label=m[1],m=b;break}if(m&&f.label<m[2]){f.label=m[2],f.ops.push(b);break}m[2]&&f.ops.pop(),f.trys.pop();continue}b=d.call(u,f)}catch(C){b=[6,C],h=0}finally{p=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},o=Jt(),i=uee(),s=fee(),a=ji(),c=pm(),l=function(){function u(d,f){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=d,this.context=f||new c,this._sender=new s(this.config),this._isEnabled=!1}return u.prototype.addCollector=function(d){this._collectors.push(d)},u.prototype.trackMetric=function(d){this._addMetric(d)},u.prototype.addDocument=function(d){var f=i.telemetryEnvelopeToQuickPulseDocument(d);f&&this._documents.push(f)},u.prototype.enable=function(d){d&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!d&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},u.prototype.enableCollectors=function(d){this._collectors.forEach(function(f){f.enable(d)})},u.prototype._addMetric=function(d){var f=d.value,p=d.count||1,h=a.PerformanceToQuickPulseCounter[d.name];h&&(this._metrics[h]?(this._metrics[h].Value=(this._metrics[h].Value*this._metrics[h].Weight+f*p)/(this._metrics[h].Weight+p),this._metrics[h].Weight+=p):(this._metrics[h]=i.createQuickPulseMetric(d),this._metrics[h].Name=h,this._metrics[h].Weight=1))},u.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},u.prototype._goQuickPulse=function(){return r(this,void 0,void 0,function(){var d,f,p,h,m=this;return n(this,function(g){switch(g.label){case 0:return d=Object.keys(this._metrics).map(function(v){return m._metrics[v]}),f=i.createQuickPulseEnvelope(d,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(f)]:[3,2];case 1:return g.sent(),[3,3];case 2:this._ping(f),g.label=3;case 3:return p=this._pollingIntervalHint>0?this._pollingIntervalHint:u.PING_INTERVAL,h=this._isCollectingData?u.POST_INTERVAL:p,this._isCollectingData&&Date.now()-this._lastSuccessTime>=u.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,h=u.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=u.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(h=u.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),h),this._handle.unref(),[2]}})})},u.prototype._ping=function(d){this._sender.ping(d,this._redirectedHost,this._quickPulseDone.bind(this))},u.prototype._post=function(d){return r(this,void 0,void 0,function(){return n(this,function(f){switch(f.label){case 0:return[4,this._sender.post(d,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return f.sent(),[2]}})})},u.prototype._quickPulseDone=function(d,f,p,h){d!=null?(this._isCollectingData!==d&&(o.info("Live Metrics sending data",d),this.enableCollectors(d)),this._isCollectingData=d,p&&p.length>0&&(this._redirectedHost=p,o.info("Redirecting endpoint to: ",p)),h&&h>0&&(this._pollingIntervalHint=h),f&&f.statusCode<300&&f.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},u.MAX_POST_WAIT_TIME=2e4,u.MAX_PING_WAIT_TIME=6e4,u.FALLBACK_INTERVAL=6e4,u.PING_INTERVAL=5e3,u.POST_INTERVAL=1e3,u}();e.exports=l}),hee=O((t,e)=>{"use strict";var r=ji(),n=function(){function o(){}return o.parse=function(i){if(!i)return{};var s=i.split(o._FIELDS_SEPARATOR),a=s.reduce(function(l,u){var d=u.split(o._FIELD_KEY_VALUE_SEPARATOR);if(d.length===2){var f=d[0].toLowerCase(),p=d[1];l[f]=p}return l},{});if(Object.keys(a).length>0){if(a.endpointsuffix){var c=a.location?a.location+".":"";a.ingestionendpoint=a.ingestionendpoint||"https://"+c+"dc."+a.endpointsuffix,a.liveendpoint=a.liveendpoint||"https://"+c+"live."+a.endpointsuffix}a.ingestionendpoint=a.ingestionendpoint||r.DEFAULT_BREEZE_ENDPOINT,a.liveendpoint=a.liveendpoint||r.DEFAULT_LIVEMETRICS_ENDPOINT}return a},o._FIELDS_SEPARATOR=";",o._FIELD_KEY_VALUE_SEPARATOR="=",o}();e.exports=n}),pF=O((t,e)=>{"use strict";var r=Ac(),n=hee(),o=Jt(),i=ji(),s=require("url"),a=function(){function c(l){var u=this;this.endpointBase=i.DEFAULT_BREEZE_ENDPOINT;var d=process.env[c.ENV_connectionString],f=n.parse(l),p=n.parse(d),h=!f.instrumentationkey&&Object.keys(f).length>0?null:l;this.instrumentationKey=f.instrumentationkey||h||p.instrumentationkey||c._getInstrumentationKey(),c._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(f.ingestionendpoint||p.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(m){return u.correlationId=m},this.proxyHttpUrl=process.env[c.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[c.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=f.ingestionendpoint||p.ingestionendpoint||process.env[c.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=f.liveendpoint||p.liveendpoint||process.env[c.ENV_quickPulseHost]||i.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=s.parse(this._quickPulseHost).host)}return Object.defineProperty(c.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(l){r.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=l,this.correlationId=r.correlationIdPrefix,r.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(l){this._quickPulseHost=l},enumerable:!1,configurable:!0}),c._getInstrumentationKey=function(){var l=process.env[c.ENV_iKey]||process.env[c.ENV_azurePrefix+c.ENV_iKey]||process.env[c.legacy_ENV_iKey]||process.env[c.ENV_azurePrefix+c.legacy_ENV_iKey];if(!l||l=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return l},c._validateInstrumentationKey=function(l){var u="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",d=new RegExp(u);return d.test(l)},c.ENV_azurePrefix="APPSETTING_",c.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",c.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",c.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",c.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",c.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",c.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",c.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",c.ENV_http_proxy="http_proxy",c.ENV_https_proxy="https_proxy",c}();e.exports=a}),mee=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(s){for(var a,c=1,l=arguments.length;c<l;c++){a=arguments[c];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(s[u]=a[u])}return s},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoCollectNativePerformance=void 0;var r=pF(),n=pm(),o=Jt(),i=function(){function s(a){this._disabledMetrics={},s.INSTANCE&&s.INSTANCE.dispose(),s.INSTANCE=this,this._client=a}return s.isNodeVersionCompatible=function(){var a=process.versions.node.split(".");return parseInt(a[0])>=6},s.prototype.enable=function(a,c,l){var u=this;if(c===void 0&&(c={}),l===void 0&&(l=6e4),!!s.isNodeVersionCompatible()){if(s._metricsAvailable==null&&a&&!this._isInitialized)try{var d=require("applicationinsights-native-metrics");s._emitter=new d,s._metricsAvailable=!0,o.info("Native metrics module successfully loaded!")}catch{s._metricsAvailable=!1;return}this._isEnabled=a,this._disabledMetrics=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&s._emitter?(s._emitter.enable(!0,l),this._handle||(this._handle=setInterval(function(){return u._trackNativeMetrics()},l),this._handle.unref())):s._emitter&&(s._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},s.prototype.dispose=function(){this.enable(!1)},s.parseEnabled=function(a){var c=process.env[r.ENV_nativeMetricsDisableAll],l=process.env[r.ENV_nativeMetricsDisablers];if(c)return{isEnabled:!1,disabledMetrics:{}};if(l){var u=l.split(","),d={};if(u.length>0)for(var f=0,p=u;f<p.length;f++){var h=p[f];d[h]=!0}return typeof a=="object"?{isEnabled:!0,disabledMetrics:e(e({},a),d)}:{isEnabled:a,disabledMetrics:d}}return typeof a=="boolean"?{isEnabled:a,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:a}},s.prototype._trackNativeMetrics=function(){var a=!0;typeof this._isEnabled!="object"&&(a=this._isEnabled),a&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},s.prototype._trackGarbageCollection=function(){var a;if(!this._disabledMetrics.gc){var c=s._emitter.getGCData();for(var l in c){var u=c[l].metrics,d=l+" Garbage Collection Duration",f=Math.sqrt(u.sumSquares/u.count-Math.pow(u.total/u.count,2))||0;this._client.trackMetric({name:d,value:u.total,count:u.count,max:u.max,min:u.min,stdDev:f,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)})}}},s.prototype._trackEventLoop=function(){var a;if(!this._disabledMetrics.loop){var c=s._emitter.getLoopData(),l=c.loopUsage;if(l.count!=0){var u="Event Loop CPU Time",d=Math.sqrt(l.sumSquares/l.count-Math.pow(l.total/l.count,2))||0;this._client.trackMetric({name:u,value:l.total,count:l.count,min:l.min,max:l.max,stdDev:d,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)})}}},s.prototype._trackHeapUsage=function(){var a,c,l;if(!this._disabledMetrics.heap){var u=process.memoryUsage(),d=u.heapUsed,f=u.heapTotal,p=u.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:d,count:1,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)}),this._client.trackMetric({name:"Memory Total (Heap)",value:f,count:1,tagOverrides:(c={},c[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,c)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:p-f,count:1,tagOverrides:(l={},l[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,l)})}},s}();t.AutoCollectNativePerformance=i}),gee=O((t,e)=>{"use strict";var r=Jt(),n=function(){function o(i,s,a,c){this._buffer=[],this._lastSend=0,this._isDisabled=i,this._getBatchSize=s,this._getBatchIntervalMs=a,this._sender=c}return o.prototype.setUseDiskRetryCaching=function(i,s,a){this._sender.setDiskRetryMode(i,s,a)},o.prototype.send=function(i){var s=this;if(!this._isDisabled()){if(!i){r.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(i),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){s._timeoutHandle=null,s.triggerSend(!1)},this._getBatchIntervalMs()))}},o.prototype.triggerSend=function(i,s){var a=this._buffer.length<1;a||(i?(this._sender.saveOnCrash(this._buffer),typeof s=="function"&&s("data saved on crash")):this._sender.send(this._buffer,s)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,a&&typeof s=="function"&&s("no data to send")},o}();e.exports=n}),vee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.azureRoleEnvironmentTelemetryProcessor=void 0;function e(r,n){process.env.WEBSITE_SITE_NAME&&(r.tags[n.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}t.azureRoleEnvironmentTelemetryProcessor=e}),yee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSamplingHashCode=t.samplingTelemetryProcessor=void 0;var e=kr();function r(o,i){var s=o.sampleRate,a=!1;return s==null||s>=100||o.data&&e.TelemetryType.Metric===e.baseTypeToTelemetryType(o.data.baseType)?!0:(i.correlationContext&&i.correlationContext.operation?a=n(i.correlationContext.operation.id)<s:a=Math.random()*100<s,a)}t.samplingTelemetryProcessor=r;function n(o){var i=-2147483648,s=2147483647,a=5381;if(!o)return 0;for(;o.length<8;)o=o+o;for(var c=0;c<o.length;c++)a=((a<<5)+a|0)+o.charCodeAt(c)|0;return a=a<=i?s:Math.abs(a),a/s*100}t.getSamplingHashCode=n}),wee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performanceMetricsTelemetryProcessor=void 0;var e=Ab(),r=kr();function n(o,i){switch(i&&i.addDocument(o),o.data.baseType){case r.TelemetryTypeString.Exception:e.countException();break;case r.TelemetryTypeString.Request:var s=o.data.baseData;e.countRequest(s.duration,s.success);break;case r.TelemetryTypeString.Dependency:var a=o.data.baseData;e.countDependency(a.duration,a.success);break}return!0}t.performanceMetricsTelemetryProcessor=n}),Cee=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(s){for(var a,c=1,l=arguments.length;c<l;c++){a=arguments[c];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(s[u]=a[u])}return s},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.preAggregatedMetricsTelemetryProcessor=void 0;var r=kr(),n=dF(),o=kr();function i(s,a){if(n.isEnabled())switch(s.data.baseType){case o.TelemetryTypeString.Exception:var c=s.data.baseData;c.properties=e(e({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var l={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole]};n.countException(l);break;case o.TelemetryTypeString.Trace:var u=s.data.baseData;u.properties=e(e({},u.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var d={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole],traceSeverityLevel:r.SeverityLevel[u.severity]};n.countTrace(d);break;case o.TelemetryTypeString.Request:var f=s.data.baseData;f.properties=e(e({},f.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var p={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole],operationSynthetic:s.tags[a.keys.operationSyntheticSource],requestSuccess:f.success,requestResultCode:f.responseCode};n.countRequest(f.duration,p);break;case o.TelemetryTypeString.Dependency:var h=s.data.baseData;h.properties=e(e({},h.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var m={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole],operationSynthetic:s.tags[a.keys.operationSyntheticSource],dependencySuccess:h.success,dependencyType:h.type,dependencyTarget:h.target,dependencyResultCode:h.resultCode};n.countDependency(h.duration,m);break}return!0}t.preAggregatedMetricsTelemetryProcessor=i}),bee=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=t&&t.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(vee(),t),r(yee(),t),r(wee(),t),r(Cee(),t)}),Eee=O((t,e)=>{"use strict";var r=t&&t.__awaiter||function(p,h,m,g){function v(y){return y instanceof m?y:new m(function(b){b(y)})}return new(m||(m=Promise))(function(y,b){function C(S){try{P(g.next(S))}catch(k){b(k)}}function _(S){try{P(g.throw(S))}catch(k){b(k)}}function P(S){S.done?y(S.value):v(S.value).then(C,_)}P((g=g.apply(p,h||[])).next())})},n=t&&t.__generator||function(p,h){var m={label:0,sent:function(){if(y[0]&1)throw y[1];return y[1]},trys:[],ops:[]},g,v,y,b;return b={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function C(P){return function(S){return _([P,S])}}function _(P){if(g)throw new TypeError("Generator is already executing.");for(;m;)try{if(g=1,v&&(y=P[0]&2?v.return:P[0]?v.throw||((y=v.return)&&y.call(v),0):v.next)&&!(y=y.call(v,P[1])).done)return y;switch(v=0,y&&(P=[P[0]&2,y.value]),P[0]){case 0:case 1:y=P;break;case 4:return m.label++,{value:P[1],done:!1};case 5:m.label++,v=P[1],P=[0];continue;case 7:P=m.ops.pop(),m.trys.pop();continue;default:if(y=m.trys,!(y=y.length>0&&y[y.length-1])&&(P[0]===6||P[0]===2)){m=0;continue}if(P[0]===3&&(!y||P[1]>y[0]&&P[1]<y[3])){m.label=P[1];break}if(P[0]===6&&m.label<y[1]){m.label=y[1],y=P;break}if(y&&m.label<y[2]){m.label=y[2],m.ops.push(P);break}y[2]&&m.ops.pop(),m.trys.pop();continue}P=h.call(p,m)}catch(S){P=[6,S],v=0}finally{g=y=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}},o=require("fs"),i=require("os"),s=require("path"),a=require("zlib"),c=require("child_process"),l=Jt(),u=Gu(),d=bn(),f=function(){function p(h,m,g){if(this._redirectedHost=null,this._config=h,this._onSuccess=m,this._onError=g,this._enableDiskRetryMode=!1,this._resendInterval=p.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=p.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=s.join(i.tmpdir(),p.TEMPDIR_PREFIX+this._config.instrumentationKey),!p.OS_PROVIDES_FILE_PROTECTION)if(p.USE_ICACLS){try{p.OS_PROVIDES_FILE_PROTECTION=o.existsSync(p.ICACLS_PATH)}catch{}p.OS_PROVIDES_FILE_PROTECTION||l.warn(p.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else p.OS_PROVIDES_FILE_PROTECTION=!0}return p.prototype.setDiskRetryMode=function(h,m,g){var v=this;this._enableDiskRetryMode=p.OS_PROVIDES_FILE_PROTECTION&&h,typeof m=="number"&&m>=0&&(this._resendInterval=Math.floor(m)),typeof g=="number"&&g>=0&&(this._maxBytesOnDisk=Math.floor(g)),h&&!p.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,l.warn(p.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){v._fileCleanupTask()},p.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},p.prototype.send=function(h,m){return r(this,void 0,void 0,function(){var g,v,y,b,C=this;return n(this,function(_){return h&&(g=this._redirectedHost||this._config.endpointUrl,v={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},y="",h.forEach(function(P){var S=C._stringify(P);typeof S=="string"&&(y+=S+`
`)}),y.length>0&&(y=y.substring(0,y.length-1)),b=Buffer.from?Buffer.from(y):new Buffer(y),a.gzip(b,function(P,S){var k=S;P?(l.warn(P),k=b,v.headers["Content-Length"]=b.length.toString()):(v.headers["Content-Encoding"]="gzip",v.headers["Content-Length"]=S.length.toString()),l.info(p.TAG,v),v[u.disableCollectionRequestOption]=!0;var T=function(F){F.setEncoding("utf-8");var j="";F.on("data",function(J){j+=J}),F.on("end",function(){if(C._numConsecutiveFailures=0,C._enableDiskRetryMode){if(F.statusCode===200)C._resendTimer||(C._resendTimer=setTimeout(function(){C._resendTimer=null,C._sendFirstFileOnDisk()},C._resendInterval),C._resendTimer.unref());else if(C._isRetriable(F.statusCode))try{var J=JSON.parse(j),Y=[];J.errors.forEach(function(te){C._isRetriable(te.statusCode)&&Y.push(h[te.index])}),Y.length>0&&C._storeToDisk(Y)}catch{C._storeToDisk(h)}}if(F.statusCode===307||F.statusCode===308)if(C._numConsecutiveRedirects++,C._numConsecutiveRedirects<10){var ae=F.headers.location?F.headers.location.toString():null;ae&&(C._redirectedHost=ae,C.send(h,m))}else typeof m=="function"&&m("Error sending telemetry because of circular redirects.");else C._numConsecutiveRedirects=0,typeof m=="function"&&m(j),l.info(p.TAG,j),typeof C._onSuccess=="function"&&C._onSuccess(j)})},A=d.makeRequest(C._config,g,v,T);A.on("error",function(F){if(C._numConsecutiveFailures++,!C._enableDiskRetryMode||C._numConsecutiveFailures>0&&C._numConsecutiveFailures%p.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var j="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";C._enableDiskRetryMode&&(j="Ingestion endpoint could not be reached "+C._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),l.warn(p.TAG,j,d.dumpObj(F))}else{var j="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";l.info(p.TAG,j,d.dumpObj(F))}C._onErrorHelper(F),typeof m=="function"&&(F&&m(d.dumpObj(F)),m("Error sending telemetry")),C._enableDiskRetryMode&&C._storeToDisk(h)}),A.write(k),A.end()})),[2]})})},p.prototype.saveOnCrash=function(h){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(h))},p.prototype._isRetriable=function(h){return h===206||h===408||h===429||h===439||h===500||h===503},p.prototype._runICACLS=function(h,m){var g=c.spawn(p.ICACLS_PATH,h,{windowsHide:!0});g.on("error",function(v){return m(v)}),g.on("close",function(v,y){return m(v===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+v+")"))})},p.prototype._runICACLSSync=function(h){if(c.spawnSync){var m=c.spawnSync(p.ICACLS_PATH,h,{windowsHide:!0});if(m.error)throw m.error;if(m.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+m.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},p.prototype._getACLIdentity=function(h){if(p.ACL_IDENTITY)return h(null,p.ACL_IDENTITY);var m=c.spawn(p.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),g="";m.stdout.on("data",function(v){return g+=v}),m.on("error",function(v){return h(v,null)}),m.on("close",function(v,y){return p.ACL_IDENTITY=g&&g.trim(),h(v===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+v+")"),p.ACL_IDENTITY)})},p.prototype._getACLIdentitySync=function(){if(p.ACL_IDENTITY)return p.ACL_IDENTITY;if(c.spawnSync){var h=c.spawnSync(p.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(h.error)throw h.error;if(h.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+h.status+")");return p.ACL_IDENTITY=h.stdout&&h.stdout.toString().trim(),p.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},p.prototype._getACLArguments=function(h,m){return[h,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",m+":(OI)(CI)F","/inheritance:r"]},p.prototype._applyACLRules=function(h,m){var g=this;if(!p.USE_ICACLS)return m(null);if(p.ACLED_DIRECTORIES[h]===void 0)p.ACLED_DIRECTORIES[h]=!1,this._getACLIdentity(function(v,y){if(v)return p.ACLED_DIRECTORIES[h]=!1,m(v);g._runICACLS(g._getACLArguments(h,y),function(b){return p.ACLED_DIRECTORIES[h]=!b,m(b)})});else return m(p.ACLED_DIRECTORIES[h]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},p.prototype._applyACLRulesSync=function(h){if(p.USE_ICACLS){if(p.ACLED_DIRECTORIES[h]===void 0){this._runICACLSSync(this._getACLArguments(h,this._getACLIdentitySync())),p.ACLED_DIRECTORIES[h]=!0;return}else if(!p.ACLED_DIRECTORIES[h])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},p.prototype._confirmDirExists=function(h,m){var g=this;o.lstat(h,function(v,y){v&&v.code==="ENOENT"?o.mkdir(h,function(b){b&&b.code!=="EEXIST"?m(b):g._applyACLRules(h,m)}):!v&&y.isDirectory()?g._applyACLRules(h,m):m(v||new Error("Path existed but was not a directory"))})},p.prototype._getShallowDirectorySize=function(h,m){o.readdir(h,function(g,v){if(g)return m(g,-1);var y=null,b=0,C=0;if(v.length===0){m(null,0);return}for(var _=0;_<v.length;_++)o.stat(s.join(h,v[_]),function(P,S){C++,P?y=P:S.isFile()&&(b+=S.size),C===v.length&&(y?m(y,-1):m(y,b))})})},p.prototype._getShallowDirectorySizeSync=function(h){for(var m=o.readdirSync(h),g=0,v=0;v<m.length;v++)g+=o.statSync(s.join(h,m[v])).size;return g},p.prototype._storeToDisk=function(h){var m=this;l.info(p.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(g){if(g){l.warn(p.TAG,"Error while checking/creating directory: "+(g&&g.message)),m._onErrorHelper(g);return}m._getShallowDirectorySize(m._tempDir,function(v,y){if(v||y<0){l.warn(p.TAG,"Error while checking directory size: "+(v&&v.message)),m._onErrorHelper(v);return}else if(y>m._maxBytesOnDisk){l.warn(p.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+y);return}var b=new Date().getTime()+".ai.json",C=s.join(m._tempDir,b);l.info(p.TAG,"saving data to disk at: "+C),o.writeFile(C,m._stringify(h),{mode:384},function(_){return m._onErrorHelper(_)})})})},p.prototype._storeToDiskSync=function(h){try{l.info(p.TAG,"Checking existence of data storage directory: "+this._tempDir),o.existsSync(this._tempDir)||o.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var m=this._getShallowDirectorySizeSync(this._tempDir);if(m>this._maxBytesOnDisk){l.info(p.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+m);return}var g=new Date().getTime()+".ai.json",v=s.join(this._tempDir,g);l.info(p.TAG,"saving data before crash to disk at: "+v),o.writeFileSync(v,h,{mode:384})}catch(y){l.warn(p.TAG,"Error while saving data to disk: "+(y&&y.message)),this._onErrorHelper(y)}},p.prototype._sendFirstFileOnDisk=function(){var h=this;o.exists(this._tempDir,function(m){m&&o.readdir(h._tempDir,function(g,v){if(g)h._onErrorHelper(g);else if(v=v.filter(function(C){return s.basename(C).indexOf(".ai.json")>-1}),v.length>0){var y=v[0],b=s.join(h._tempDir,y);o.readFile(b,function(C,_){C?h._onErrorHelper(C):o.unlink(b,function(P){if(P)h._onErrorHelper(P);else try{var S=JSON.parse(_.toString());h.send(S)}catch(k){l.warn("Failed to read persisted file",k)}})})}})})},p.prototype._onErrorHelper=function(h){typeof this._onError=="function"&&this._onError(h)},p.prototype._stringify=function(h){try{return JSON.stringify(h)}catch(m){l.warn("Failed to serialize payload",m,h)}},p.prototype._fileCleanupTask=function(){var h=this;o.exists(this._tempDir,function(m){m&&o.readdir(h._tempDir,function(g,v){g?h._onErrorHelper(g):(v=v.filter(function(y){return s.basename(y).indexOf(".ai.json")>-1}),v.length>0&&v.forEach(function(y){var b=new Date(parseInt(y.split(".ai.json")[0])),C=new Date(+new Date-p.FILE_RETEMPTION_PERIOD)>b;if(C){var _=s.join(h._tempDir,y);o.unlink(_,function(P){P&&h._onErrorHelper(P)})}}))})})},p.TAG="Sender",p.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",p.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",p.ACLED_DIRECTORIES={},p.ACL_IDENTITY=null,p.WAIT_BETWEEN_RESEND=60*1e3,p.MAX_BYTES_ON_DISK=50*1024*1024,p.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,p.CLEANUP_TIMEOUT=60*60*1e3,p.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,p.TEMPDIR_PREFIX="appInsights-node",p.OS_PROVIDES_FILE_PROTECTION=!1,p.USE_ICACLS=i.type()==="Windows_NT",p}();e.exports=f}),_ee=O((t,e)=>{"use strict";var r=kr(),n=bn(),o=Dc(),i=function(){function a(){}return a.createEnvelope=function(c,l,u,d,f){var p=null;switch(l){case r.TelemetryType.Trace:p=a.createTraceData(c);break;case r.TelemetryType.Dependency:p=a.createDependencyData(c);break;case r.TelemetryType.Event:p=a.createEventData(c);break;case r.TelemetryType.Exception:p=a.createExceptionData(c);break;case r.TelemetryType.Request:p=a.createRequestData(c);break;case r.TelemetryType.Metric:p=a.createMetricData(c);break;case r.TelemetryType.Availability:p=a.createAvailabilityData(c);break;case r.TelemetryType.PageView:p=a.createPageViewData(c);break}if(u&&r.domainSupportsProperties(p.baseData)){if(p&&p.baseData)if(!p.baseData.properties)p.baseData.properties=u;else for(var h in u)p.baseData.properties[h]||(p.baseData.properties[h]=u[h]);p.baseData.properties=n.validateStringMap(p.baseData.properties)}var m=f&&f.instrumentationKey||"",g=new r.Envelope;return g.data=p,g.iKey=m,g.name="Microsoft.ApplicationInsights."+m.replace(/-/g,"")+"."+p.baseType.substr(0,p.baseType.length-4),g.tags=this.getTags(d,c.tagOverrides),g.time=new Date().toISOString(),g.ver=1,g.sampleRate=f?f.samplingPercentage:100,l===r.TelemetryType.Metric&&(g.sampleRate=100),g},a.createTraceData=function(c){var l=new r.MessageData;l.message=c.message,l.properties=c.properties,isNaN(c.severity)?l.severityLevel=r.SeverityLevel.Information:l.severityLevel=c.severity;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Trace),u.baseData=l,u},a.createDependencyData=function(c){var l=new r.RemoteDependencyData;typeof c.name=="string"&&(l.name=c.name.length>1024?c.name.slice(0,1021)+"...":c.name),l.data=c.data,l.target=c.target,l.duration=n.msToTimeSpan(c.duration),l.success=c.success,l.type=c.dependencyTypeName,l.properties=c.properties,l.resultCode=c.resultCode?c.resultCode+"":"",c.id?l.id=c.id:l.id=n.w3cTraceId();var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Dependency),u.baseData=l,u},a.createEventData=function(c){var l=new r.EventData;l.name=c.name,l.properties=c.properties,l.measurements=c.measurements;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Event),u.baseData=l,u},a.createExceptionData=function(c){var l=new r.ExceptionData;l.properties=c.properties,isNaN(c.severity)?l.severityLevel=r.SeverityLevel.Error:l.severityLevel=c.severity,l.measurements=c.measurements,l.exceptions=[];var u=c.exception.stack,d=new r.ExceptionDetails;d.message=c.exception.message,d.typeName=c.exception.name,d.parsedStack=this.parseStack(u),d.hasFullStack=n.isArray(d.parsedStack)&&d.parsedStack.length>0,l.exceptions.push(d);var f=new r.Data;return f.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Exception),f.baseData=l,f},a.createRequestData=function(c){var l=new r.RequestData;c.id?l.id=c.id:l.id=n.w3cTraceId(),l.name=c.name,l.url=c.url,l.source=c.source,l.duration=n.msToTimeSpan(c.duration),l.responseCode=c.resultCode?c.resultCode+"":"",l.success=c.success,l.properties=c.properties;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Request),u.baseData=l,u},a.createMetricData=function(c){var l=new r.MetricData;l.metrics=[];var u=new r.DataPoint;u.count=isNaN(c.count)?1:c.count,u.kind=r.DataPointType.Aggregation,u.max=isNaN(c.max)?c.value:c.max,u.min=isNaN(c.min)?c.value:c.min,u.name=c.name,u.stdDev=isNaN(c.stdDev)?0:c.stdDev,u.value=c.value,l.metrics.push(u),l.properties=c.properties;var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Metric),d.baseData=l,d},a.createAvailabilityData=function(c){var l=new r.AvailabilityData;c.id?l.id=c.id:l.id=n.w3cTraceId(),l.name=c.name,l.duration=n.msToTimeSpan(c.duration),l.success=c.success,l.runLocation=c.runLocation,l.message=c.message,l.measurements=c.measurements,l.properties=c.properties;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Availability),u.baseData=l,u},a.createPageViewData=function(c){var l=new r.PageViewData;l.name=c.name,l.duration=n.msToTimeSpan(c.duration),l.url=c.url,l.measurements=c.measurements,l.properties=c.properties;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.PageView),u.baseData=l,u},a.getTags=function(c,l){var u=o.CorrelationContextManager.getCurrentContext(),d={};if(c&&c.tags)for(var f in c.tags)d[f]=c.tags[f];if(l)for(var f in l)d[f]=l[f];return u&&(d[c.keys.operationId]=d[c.keys.operationId]||u.operation.id,d[c.keys.operationName]=d[c.keys.operationName]||u.operation.name,d[c.keys.operationParentId]=d[c.keys.operationParentId]||u.operation.parentId),d},a.parseStack=function(c){var l=void 0;if(typeof c=="string"){var u=c.split(`
`);l=[];for(var d=0,f=0,p=0;p<=u.length;p++){var h=u[p];if(s.regex.test(h)){var m=new s(u[p],d++);f+=m.sizeInBytes,l.push(m)}}var g=32*1024;if(f>g)for(var v=0,y=l.length-1,b=0,C=v,_=y;v<y;){var P=l[v].sizeInBytes,S=l[y].sizeInBytes;if(b+=P+S,b>g){var k=_-C+1;l.splice(C,k);break}C=v,_=y,v++,y--}}return l},a}(),s=function(){function a(c,l){this.sizeInBytes=0,this.level=l,this.method="<no_method>",this.assembly=n.trim(c);var u=c.match(a.regex);u&&u.length>=5&&(this.method=n.trim(u[2])||this.method,this.fileName=n.trim(u[4])||"<no_filename>",this.line=parseInt(u[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=a.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return a.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,a.baseSize=58,a}();e.exports=i}),See=O((t,e)=>{"use strict";var r=require("url"),n=pF(),o=pm(),i=kr(),s=gee(),a=bee(),c=Dc(),l=Eee(),u=bn(),d=Jt(),f=_ee(),p=function(){function h(m){this._telemetryProcessors=[],this._enableAzureProperties=!1;var g=new n(m);this.config=g,this.context=new o,this.commonProperties={};var v=new l(this.config);this.channel=new s(function(){return g.disableAppInsights},function(){return g.maxBatchSize},function(){return g.maxBatchIntervalMs},v)}return h.prototype.trackAvailability=function(m){this.track(m,i.TelemetryType.Availability)},h.prototype.trackPageView=function(m){this.track(m,i.TelemetryType.PageView)},h.prototype.trackTrace=function(m){this.track(m,i.TelemetryType.Trace)},h.prototype.trackMetric=function(m){this.track(m,i.TelemetryType.Metric)},h.prototype.trackException=function(m){m&&m.exception&&!u.isError(m.exception)&&(m.exception=new Error(m.exception.toString())),this.track(m,i.TelemetryType.Exception)},h.prototype.trackEvent=function(m){this.track(m,i.TelemetryType.Event)},h.prototype.trackRequest=function(m){this.track(m,i.TelemetryType.Request)},h.prototype.trackDependency=function(m){m&&!m.target&&m.data&&(m.target=r.parse(m.data).host),this.track(m,i.TelemetryType.Dependency)},h.prototype.flush=function(m){this.channel.triggerSend(m?!!m.isAppCrashing:!1,m?m.callback:void 0)},h.prototype.track=function(m,g){if(m&&i.telemetryTypeToBaseType(g)){var v=f.createEnvelope(m,g,this.commonProperties,this.context,this.config);m.time&&(v.time=m.time.toISOString()),this._enableAzureProperties&&a.azureRoleEnvironmentTelemetryProcessor(v,this.context);var y=this.runTelemetryProcessors(v,m.contextObjects);y=y&&a.samplingTelemetryProcessor(v,{correlationContext:c.CorrelationContextManager.getCurrentContext()}),a.preAggregatedMetricsTelemetryProcessor(v,this.context),y&&(a.performanceMetricsTelemetryProcessor(v,this.quickPulseClient),this.channel.send(v))}else d.warn("track() requires telemetry object and telemetryType to be specified.")},h.prototype.setAutoPopulateAzureProperties=function(m){this._enableAzureProperties=m},h.prototype.addTelemetryProcessor=function(m){this._telemetryProcessors.push(m)},h.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},h.prototype.runTelemetryProcessors=function(m,g){var v=!0,y=this._telemetryProcessors.length;if(y===0)return v;g=g||{},g.correlationContext=c.CorrelationContextManager.getCurrentContext();for(var b=0;b<y;++b)try{var C=this._telemetryProcessors[b];if(C&&C.apply(null,[m,g])===!1){v=!1;break}}catch(_){v=!0,d.warn("One of telemetry processors failed, telemetry item will be sent.",_,m)}return v&&(m&&m.tags&&(m.tags=u.validateStringMap(m.tags)),m&&m.data&&m.data.baseData&&m.data.baseData.properties&&(m.data.baseData.properties=u.validateStringMap(m.data.baseData.properties))),v},h}();e.exports=p}),xee=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var c=function(l,u){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(d[p]=f[p])},c(l,u)};return function(l,u){c(l,u);function d(){this.constructor=l}l.prototype=u===null?Object.create(u):(d.prototype=u.prototype,new d)}}(),n=See(),o=fF(),i=Gu(),s=Jt(),a=function(c){r(l,c);function l(){return c!==null&&c.apply(this,arguments)||this}return l.prototype.trackNodeHttpRequestSync=function(u){u&&u.request&&u.response&&u.duration?o.trackRequestSync(this,u):s.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},l.prototype.trackNodeHttpRequest=function(u){(u.duration||u.error)&&s.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),u&&u.request&&u.response?o.trackRequest(this,u):s.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},l.prototype.trackNodeHttpDependency=function(u){u&&u.request?i.trackRequest(this,u):s.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},l}(n);e.exports=a}),Pee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),kee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.Configuration=t.wrapWithCorrelationContext=t.startOperation=t.getCorrelationContext=t.start=t.setup=t.liveMetricsClient=t.defaultClient=t.DistributedTracingModes=void 0;var e=Dc(),r=XZ(),n=ZZ(),o=Ab(),i=dF(),s=lee(),a=Gu(),c=fF(),l=Ac(),u=Jt(),d=pee(),f=mee();t.TelemetryClient=xee(),t.Contracts=kr(),t.azureFunctionsTypes=Pee();var p;(function(ye){ye[ye.AI=0]="AI",ye[ye.AI_AND_W3C=1]="AI_AND_W3C"})(p=t.DistributedTracingModes||(t.DistributedTracingModes={}));var h=!0,m=!1,g=!0,v=!0,y=!0,b=!1,C=!0,_=!0,P=!0,S=!0,k,T=!1,A=!0,F,j=void 0,J=void 0,Y,ae,te,M,L,q,W,z,ne=!1,X;function ve(ye){return t.defaultClient?u.info("The default client is already setup"):(t.defaultClient=new t.TelemetryClient(ye),Y=new r(t.defaultClient),ae=new n(t.defaultClient),te=new o(t.defaultClient),M=new i(t.defaultClient),L=new s(t.defaultClient),W=new c(t.defaultClient),z=new a(t.defaultClient),q||(q=new f.AutoCollectNativePerformance(t.defaultClient))),t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(P,j,J),yt}t.setup=ve;function Pe(){return t.defaultClient?(ne=!0,Y.enable(h,m),ae.enable(g),te.enable(v),M.enable(y),L.enable(b,t.defaultClient.config),q.enable(A,F),W.useAutoCorrelation(S,k),W.enable(C),z.enable(_),t.liveMetricsClient&&T&&t.liveMetricsClient.enable(T)):u.warn("Start cannot be called before setup"),yt}t.start=Pe;function Se(){return S?e.CorrelationContextManager.getCurrentContext():null}t.getCorrelationContext=Se;function De(ye,fe){return e.CorrelationContextManager.startOperation(ye,fe)}t.startOperation=De;function pe(ye,fe){return e.CorrelationContextManager.wrapCallback(ye,fe)}t.wrapWithCorrelationContext=pe;var yt=function(){function ye(){}return ye.setDistributedTracingMode=function(fe){return l.w3cEnabled=fe===p.AI_AND_W3C,ye},ye.setAutoCollectConsole=function(fe,Ee){return Ee===void 0&&(Ee=!1),h=fe,m=Ee,ne&&Y.enable(fe,Ee),ye},ye.setAutoCollectExceptions=function(fe){return g=fe,ne&&ae.enable(fe),ye},ye.setAutoCollectPerformance=function(fe,Ee){Ee===void 0&&(Ee=!0),v=fe;var je=f.AutoCollectNativePerformance.parseEnabled(Ee);return A=je.isEnabled,F=je.disabledMetrics,ne&&(te.enable(fe),q.enable(je.isEnabled,je.disabledMetrics)),ye},ye.setAutoCollectPreAggregatedMetrics=function(fe){return y=fe,ne&&M.enable(fe),ye},ye.setAutoCollectHeartbeat=function(fe){return b=fe,ne&&L.enable(fe,t.defaultClient.config),ye},ye.setAutoCollectRequests=function(fe){return C=fe,ne&&W.enable(fe),ye},ye.setAutoCollectDependencies=function(fe){return _=fe,ne&&z.enable(fe),ye},ye.setAutoDependencyCorrelation=function(fe,Ee){return S=fe,k=Ee,ne&&W.useAutoCorrelation(fe,Ee),ye},ye.setUseDiskRetryCaching=function(fe,Ee,je){return P=fe,j=Ee,J=je,t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(fe,Ee,je),ye},ye.setInternalLogging=function(fe,Ee){return fe===void 0&&(fe=!1),Ee===void 0&&(Ee=!0),u.enableDebug=fe,u.disableWarnings=!Ee,ye},ye.setSendLiveMetrics=function(fe){return fe===void 0&&(fe=!1),t.defaultClient?(!t.liveMetricsClient&&fe?(t.liveMetricsClient=new d(t.defaultClient.config,null),X=new o(t.liveMetricsClient,1e3,!0),t.liveMetricsClient.addCollector(X),t.defaultClient.quickPulseClient=t.liveMetricsClient):t.liveMetricsClient&&t.liveMetricsClient.enable(fe),T=fe,ye):(u.warn("Live metrics client cannot be setup without the default client"),ye)},ye.start=Pe,ye}();t.Configuration=yt;function It(){l.w3cEnabled=!0,t.defaultClient=null,ne=!1,Y&&Y.dispose(),ae&&ae.dispose(),te&&te.dispose(),M&&M.dispose(),L&&L.dispose(),q&&q.dispose(),W&&W.dispose(),z&&z.dispose(),t.liveMetricsClient&&(t.liveMetricsClient.enable(!1),T=!1,t.liveMetricsClient=void 0)}t.dispose=It}),hF={};iQ(hF,{default:()=>Ree});mF.exports=sQ(hF);var Db=Uu(require("os")),Rc=Uu(require("vscode")),bt=Uu(require("vscode")),hm=Uu(require("vscode"));function zu(){let t="telemetry",e="enableTelemetry";try{let r=hm.env.telemetryConfiguration;return r.isUsageEnabled&&r.isErrorsEnabled&&r.isCrashEnabled?"on":r.isErrorsEnabled&&r.isCrashEnabled?"error":"off"}catch{return hm.env.isTelemetryEnabled!==void 0?hm.env.isTelemetryEnabled?"on":"off":hm.workspace.getConfiguration(t).get(e)?"on":"off"}}function Rb(t,e){for(let r of Object.keys(t))for(let n of e)n.lookup.test(r)&&(n.replacementString!==void 0?t[r]=n.replacementString:delete t[r])}var Iee=class{constructor(t,e,r,n,o){this.extensionId=t,this.extensionVersion=e,this.telemetryAppender=r,this.osShim=n,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!o,this.updateUserOptStatus(),bt.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(bt.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(bt.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(bt.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let t=zu();this.userOptIn=t==="on",this.errorOptIn=t==="error"||this.userOptIn,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(t){if(!t)return"none";let e="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach(r=>{t.indexOf(`${r}`)===0&&(e=r)}),e}get extension(){return this._extension===void 0&&(this._extension=bt.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(t,e){if(t===null||typeof t!="object"||typeof e!="function")return t;let r={};for(let n in t)r[n]=e(n,t[n]);return r}shouldSendErrorTelemetry(){return this.errorOptIn===!1?!1:this.firstParty?!(bt.env.remoteName&&this.cleanRemoteName(bt.env.remoteName)==="other"):!0}getCommonProperties(){let t=Object.create(null);if(t["common.os"]=this.osShim.platform,t["common.nodeArch"]=this.osShim.architecture,t["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),t["common.extname"]=this.extensionId,t["common.extversion"]=this.extensionVersion,bt&&bt.env){switch(t["common.vscodemachineid"]=bt.env.machineId,t["common.vscodesessionid"]=bt.env.sessionId,t["common.vscodeversion"]=bt.version,t["common.isnewappinstall"]=bt.env.isNewAppInstall?bt.env.isNewAppInstall.toString():"false",t["common.product"]=bt.env.appHost,bt.env.uiKind){case bt.UIKind.Web:t["common.uikind"]="web";break;case bt.UIKind.Desktop:t["common.uikind"]="desktop";break;default:t["common.uikind"]="unknown"}t["common.remotename"]=this.cleanRemoteName(bt.env.remoteName)}return t}anonymizeFilePaths(t,e){let r;if(t==null)return"";let n=[];bt.env.appRoot!==""&&n.push(new RegExp(bt.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&n.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let o=t;if(e){let i=[];for(let l of n)for(;(r=l.exec(t))&&r;)i.push([r.index,l.lastIndex]);let s=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,a=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,c=0;for(o="";(r=a.exec(t))&&r;)r[0]&&!s.test(r[0])&&i.every(([l,u])=>r.index<l||r.index>=u)&&(o+=t.substring(c,r.index)+"<REDACTED: user-file-path>",c=a.lastIndex);c<t.length&&(o+=t.substr(c))}for(let i of n)o=o.replace(i,"");return o}removePropertiesWithPossibleUserInfo(t){if(typeof t!="object")return;let e=Object.create(null);for(let r of Object.keys(t)){let n=t[r];if(!n)continue;let o=/@[a-zA-Z0-9-.]+/,i=/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/,s=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;i.test(n.toLowerCase())?e[r]="<REDACTED: secret>":o.test(n)?e[r]="<REDACTED: email>":s.test(n)?e[r]="<REDACTED: token>":e[r]=n}return e}get telemetryLevel(){switch(zu()){case"on":return"all";case"error":return"error";case"off":return"off"}}sendTelemetryEvent(t,e,r){if(this.userOptIn&&t!==""){e=qi(qi({},e),this.getCommonProperties());let n=this.cloneAndChange(e,(o,i)=>this.anonymizeFilePaths(i,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${t}`,{properties:this.removePropertiesWithPossibleUserInfo(n),measurements:r})}}sendRawTelemetryEvent(t,e,r){this.userOptIn&&t!==""&&(e=qi(qi({},e),this.getCommonProperties()),this.telemetryAppender.logEvent(`${this.extensionId}/${t}`,{properties:e,measurements:r}))}sendTelemetryErrorEvent(t,e,r,n){if(this.errorOptIn&&t!==""){e=qi(qi({},e),this.getCommonProperties());let o=this.cloneAndChange(e,(i,s)=>this.shouldSendErrorTelemetry()?this.anonymizeFilePaths(s,this.firstParty):n===void 0||n.indexOf(i)!==-1?"REDACTED":this.anonymizeFilePaths(s,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${t}`,{properties:this.removePropertiesWithPossibleUserInfo(o),measurements:r})}}sendTelemetryException(t,e,r){if(this.shouldSendErrorTelemetry()&&this.errorOptIn&&t){e=qi(qi({},e),this.getCommonProperties());let n=this.cloneAndChange(e,(o,i)=>this.anonymizeFilePaths(i,this.firstParty));t.stack&&(t.stack=this.anonymizeFilePaths(t.stack,this.firstParty)),this.telemetryAppender.logException(t,{properties:this.removePropertiesWithPossibleUserInfo(n),measurements:r})}}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(t=>t.dispose()))}},Tee=class{constructor(t,e){this._isInstantiated=!1,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=e,this._key=t,zu()!=="off"&&this.instantiateAppender()}logEvent(t,e){if(!this._telemetryClient){!this._isInstantiated&&zu()==="on"&&this._eventQueue.push({eventName:t,data:e});return}this._telemetryClient.logEvent(t,e)}logException(t,e){if(!this._telemetryClient){!this._isInstantiated&&zu()!=="off"&&this._exceptionQueue.push({exception:t,data:e});return}this._telemetryClient.logException(t,e)}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:t,data:e})=>this.logEvent(t,e)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:t,data:e})=>this.logException(t,e)),this._exceptionQueue=[]}instantiateAppender(){this._isInstantiated||this._clientFactory(this._key).then(t=>{this._telemetryClient=t,this._isInstantiated=!0,this._flushQueues()}).catch(t=>{console.error(t)})}},Aee=async(t,e)=>{let r;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let n=await Promise.resolve().then(()=>Uu(kee()));n.defaultClient?(r=new n.TelemetryClient(t),r.channel.setUseDiskRetryCaching(!0)):(n.setup(t).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),r=n.defaultClient),Rc&&Rc.env&&(r.context.tags[r.context.keys.userId]=Rc.env.machineId,r.context.tags[r.context.keys.sessionId]=Rc.env.sessionId,r.context.tags[r.context.keys.cloudRole]=Rc.env.appName,r.context.tags[r.context.keys.cloudRoleInstance]=Rc.env.appName),t&&t.indexOf("AIF-")===0&&(r.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1")}catch(n){return Promise.reject(`Failed to initialize app insights!
`+n.message)}return e!=null&&e.length&&Dee(r,e),{logEvent:(n,o)=>{try{r==null||r.trackEvent({name:n,properties:o==null?void 0:o.properties,measurements:o==null?void 0:o.measurements})}catch(i){throw new Error(`Failed to log event to app insights!
`+i.message)}},logException:(n,o)=>{try{r==null||r.trackException({exception:n,properties:o==null?void 0:o.properties,measurements:o==null?void 0:o.measurements})}catch(i){throw new Error(`Failed to log exception to app insights!
`+i.message)}},flush:async()=>{try{r==null||r.flush()}catch(n){throw new Error(`Failed to flush app insights!
`+n.message)}}}};function Dee(t,e){t.addTelemetryProcessor(r=>(Array.isArray(r.tags)?r.tags.forEach(n=>Rb(n,e)):r.tags&&Rb(r.tags,e),r.data.baseData&&Rb(r.data.baseData,e),!0))}var Ree=class extends Iee{constructor(t,e,r,n,o){let i=new Tee(r,s=>Aee(s,o));r&&r.indexOf("AIF-")===0&&(n=!0),super(t,e,i,{release:Db.release(),platform:Db.platform(),architecture:Db.arch()},n)}}});var Ob=I(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});var mm=require("vscode"),Ku=class{constructor(e,r,n){this.extensionName=e,this.extensionVersion=r,this.targetPopulation=n}static trimVersionSuffix(e){let r=/\-[a-zA-Z0-9]+$/;return e.split(r)[0]}getFilterValue(e){switch(e){case Go.ApplicationVersion:return Ku.trimVersionSuffix(mm.version);case Go.Build:return mm.env.appName;case Go.ClientId:return mm.env.machineId;case Go.ExtensionName:return this.extensionName;case Go.ExtensionVersion:return Ku.trimVersionSuffix(this.extensionVersion);case Go.Language:return mm.env.language;case Go.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,r=Object.values(Go);for(let n of r)e.set(n,this.getFilterValue(n));return e}};oa.VSCodeFilterProvider=Ku;var Go;(function(t){t.Market="X-MSEdge-Market",t.CorpNet="X-FD-Corpnet",t.ApplicationVersion="X-VSCode-AppVersion",t.Build="X-VSCode-Build",t.ClientId="X-MSEdge-ClientId",t.ExtensionName="X-VSCode-ExtensionName",t.ExtensionVersion="X-VSCode-ExtensionVersion",t.Language="X-VSCode-Language",t.TargetPopulation="X-VSCode-TargetPopulation"})(Go=oa.Filters||(oa.Filters={}));var Oee;(function(t){t.Team="team",t.Internal="internal",t.Insiders="insider",t.Public="public"})(Oee=oa.TargetPopulation||(oa.TargetPopulation={}))});var yF=I(Nb=>{"use strict";Object.defineProperty(Nb,"__esModule",{value:!0});var vF=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}};Nb.BaseFeatureProvider=vF});var CF=I(Lb=>{"use strict";Object.defineProperty(Lb,"__esModule",{value:!0});var Nee=yF(),wF=class extends Nee.BaseFeatureProvider{constructor(e,r){super(e);this.telemetry=e,this.filterProviders=r,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let r of this.filterProviders){let n=r.getFilters();for(let o of n.keys()){let i=n.get(o);e.set(o,i)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;let r=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",r]])),this.cachedTelemetryEvents.push(e)}};Lb.FilteredFeatureProvider=wF});var EF=I(Fb=>{"use strict";Object.defineProperty(Fb,"__esModule",{value:!0});var Lee=CF(),bF=class extends Lee.FilteredFeatureProvider{constructor(e,r,n){super(r,n);this.httpClient=e,this.telemetry=r,this.filterProviders=n}async fetch(){let e=this.getFilters(),r={};for(let a of e.keys()){let c=e.get(a);r[a]=c}let n=await this.httpClient.get({headers:r});e.keys.length>0&&this.PostEventToTelemetry(r);let o=n.data,i=o.Configs,s=[];for(let a of i)if(!!a.Parameters)for(let c of Object.keys(a.Parameters)){let l=c+(a.Parameters[c]?"":"cf");s.includes(l)||s.push(l)}return{features:s,assignmentContext:o.AssignmentContext,configs:i}}};Fb.TasApiFeatureProvider=bF});var Mb=I((Kbe,_F)=>{"use strict";_F.exports=function(e,r){return function(){for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];return e.apply(r,o)}}});var gr=I((Ybe,PF)=>{"use strict";var Fee=Mb(),ia=Object.prototype.toString;function qb(t){return ia.call(t)==="[object Array]"}function $b(t){return typeof t=="undefined"}function Mee(t){return t!==null&&!$b(t)&&t.constructor!==null&&!$b(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function qee(t){return ia.call(t)==="[object ArrayBuffer]"}function $ee(t){return typeof FormData!="undefined"&&t instanceof FormData}function jee(t){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function Uee(t){return typeof t=="string"}function Bee(t){return typeof t=="number"}function SF(t){return t!==null&&typeof t=="object"}function gm(t){if(ia.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Hee(t){return ia.call(t)==="[object Date]"}function Vee(t){return ia.call(t)==="[object File]"}function Wee(t){return ia.call(t)==="[object Blob]"}function xF(t){return ia.call(t)==="[object Function]"}function Gee(t){return SF(t)&&xF(t.pipe)}function zee(t){return typeof URLSearchParams!="undefined"&&t instanceof URLSearchParams}function Kee(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Yee(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function jb(t,e){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),qb(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}function Ub(){var t={};function e(o,i){gm(t[i])&&gm(o)?t[i]=Ub(t[i],o):gm(o)?t[i]=Ub({},o):qb(o)?t[i]=o.slice():t[i]=o}for(var r=0,n=arguments.length;r<n;r++)jb(arguments[r],e);return t}function Jee(t,e,r){return jb(e,function(o,i){r&&typeof o=="function"?t[i]=Fee(o,r):t[i]=o}),t}function Qee(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}PF.exports={isArray:qb,isArrayBuffer:qee,isBuffer:Mee,isFormData:$ee,isArrayBufferView:jee,isString:Uee,isNumber:Bee,isObject:SF,isPlainObject:gm,isUndefined:$b,isDate:Hee,isFile:Vee,isBlob:Wee,isFunction:xF,isStream:Gee,isURLSearchParams:zee,isStandardBrowserEnv:Yee,forEach:jb,merge:Ub,extend:Jee,trim:Kee,stripBOM:Qee}});var vm=I((Jbe,IF)=>{"use strict";var Oc=gr();function kF(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}IF.exports=function(e,r,n){if(!r)return e;var o;if(n)o=n(r);else if(Oc.isURLSearchParams(r))o=r.toString();else{var i=[];Oc.forEach(r,function(c,l){c===null||typeof c=="undefined"||(Oc.isArray(c)?l=l+"[]":c=[c],Oc.forEach(c,function(d){Oc.isDate(d)?d=d.toISOString():Oc.isObject(d)&&(d=JSON.stringify(d)),i.push(kF(l)+"="+kF(d))}))}),o=i.join("&")}if(o){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}});var AF=I((Qbe,TF)=>{"use strict";var Xee=gr();function ym(){this.handlers=[]}ym.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};ym.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};ym.prototype.forEach=function(e){Xee.forEach(this.handlers,function(n){n!==null&&e(n)})};TF.exports=ym});var RF=I((Xbe,DF)=>{"use strict";var Zee=gr();DF.exports=function(e,r){Zee.forEach(e,function(o,i){i!==r&&i.toUpperCase()===r.toUpperCase()&&(e[r]=o,delete e[i])})}});var wm=I((Zbe,OF)=>{"use strict";OF.exports=function(e,r,n,o,i){return e.config=r,n&&(e.code=n),e.request=o,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}});var Cm=I((eEe,NF)=>{"use strict";var ete=wm();NF.exports=function(e,r,n,o,i){var s=new Error(e);return ete(s,r,n,o,i)}});var Bb=I((tEe,LF)=>{"use strict";var tte=Cm();LF.exports=function(e,r,n){var o=n.config.validateStatus;!n.status||!o||o(n.status)?e(n):r(tte("Request failed with status code "+n.status,n.config,null,n.request,n))}});var MF=I((rEe,FF)=>{"use strict";var bm=gr();FF.exports=bm.isStandardBrowserEnv()?function(){return{write:function(r,n,o,i,s,a){var c=[];c.push(r+"="+encodeURIComponent(n)),bm.isNumber(o)&&c.push("expires="+new Date(o).toGMTString()),bm.isString(i)&&c.push("path="+i),bm.isString(s)&&c.push("domain="+s),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var $F=I((nEe,qF)=>{"use strict";qF.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}});var UF=I((oEe,jF)=>{"use strict";jF.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}});var Hb=I((iEe,BF)=>{"use strict";var rte=$F(),nte=UF();BF.exports=function(e,r){return e&&!rte(r)?nte(e,r):r}});var VF=I((sEe,HF)=>{"use strict";var Vb=gr(),ote=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];HF.exports=function(e){var r={},n,o,i;return e&&Vb.forEach(e.split(`
`),function(a){if(i=a.indexOf(":"),n=Vb.trim(a.substr(0,i)).toLowerCase(),o=Vb.trim(a.substr(i+1)),n){if(r[n]&&ote.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([o]):r[n]=r[n]?r[n]+", "+o:o}}),r}});var zF=I((aEe,GF)=>{"use strict";var WF=gr();GF.exports=WF.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function o(i){var s=i;return e&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=o(window.location.href),function(s){var a=WF.isString(s)?o(s):s;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}()});var Nc=I((cEe,KF)=>{"use strict";function Wb(t){this.message=t}Wb.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Wb.prototype.__CANCEL__=!0;KF.exports=Wb});var JF=I((lEe,YF)=>{"use strict";var Em=gr(),ite=Bb(),ste=MF(),ate=vm(),cte=Hb(),lte=VF(),ute=zF(),Gb=Cm(),dte=Lc(),fte=Nc();YF.exports=function(e){return new Promise(function(n,o){var i=e.data,s=e.headers,a=e.responseType,c;function l(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}Em.isFormData(i)&&delete s["Content-Type"];var u=new XMLHttpRequest;if(e.auth){var d=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.Authorization="Basic "+btoa(d+":"+f)}var p=cte(e.baseURL,e.url);u.open(e.method.toUpperCase(),ate(p,e.params,e.paramsSerializer),!0),u.timeout=e.timeout;function h(){if(!!u){var g="getAllResponseHeaders"in u?lte(u.getAllResponseHeaders()):null,v=!a||a==="text"||a==="json"?u.responseText:u.response,y={data:v,status:u.status,statusText:u.statusText,headers:g,config:e,request:u};ite(function(C){n(C),l()},function(C){o(C),l()},y),u=null}}if("onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(h)},u.onabort=function(){!u||(o(Gb("Request aborted",e,"ECONNABORTED",u)),u=null)},u.onerror=function(){o(Gb("Network Error",e,null,u)),u=null},u.ontimeout=function(){var v="timeout of "+e.timeout+"ms exceeded",y=e.transitional||dte.transitional;e.timeoutErrorMessage&&(v=e.timeoutErrorMessage),o(Gb(v,e,y.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",u)),u=null},Em.isStandardBrowserEnv()){var m=(e.withCredentials||ute(p))&&e.xsrfCookieName?ste.read(e.xsrfCookieName):void 0;m&&(s[e.xsrfHeaderName]=m)}"setRequestHeader"in u&&Em.forEach(s,function(v,y){typeof i=="undefined"&&y.toLowerCase()==="content-type"?delete s[y]:u.setRequestHeader(y,v)}),Em.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&a!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(c=function(g){!u||(o(!g||g&&g.type?new fte("canceled"):g),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c))),i||(i=null),u.send(i)})}});var _m=I((uEe,QF)=>{QF.exports={version:"0.22.0"}});var nM=I((dEe,rM)=>{"use strict";var Yu=gr(),XF=Bb(),pte=Hb(),hte=vm(),mte=require("http"),gte=require("https"),vte=Ga().http,yte=Ga().https,ZF=require("url"),wte=require("zlib"),Cte=_m().version,Sm=Cm(),zb=wm(),bte=Lc(),Ete=Nc(),eM=/https:?/;function tM(t,e,r){if(t.hostname=e.host,t.host=e.host,t.port=e.port,t.path=r,e.auth){var n=Buffer.from(e.auth.username+":"+e.auth.password,"utf8").toString("base64");t.headers["Proxy-Authorization"]="Basic "+n}t.beforeRedirect=function(i){i.headers.host=i.host,tM(i,e,i.href)}}rM.exports=function(e){return new Promise(function(n,o){var i;function s(){e.cancelToken&&e.cancelToken.unsubscribe(i),e.signal&&e.signal.removeEventListener("abort",i)}var a=function(z){s(),n(z)},c=function(z){s(),o(z)},l=e.data,u=e.headers,d={};if(Object.keys(u).forEach(function(z){d[z.toLowerCase()]=z}),"user-agent"in d?u[d["user-agent"]]||delete u[d["user-agent"]]:u["User-Agent"]="axios/"+Cte,l&&!Yu.isStream(l)){if(!Buffer.isBuffer(l))if(Yu.isArrayBuffer(l))l=Buffer.from(new Uint8Array(l));else if(Yu.isString(l))l=Buffer.from(l,"utf-8");else return c(Sm("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));d["content-length"]||(u["Content-Length"]=l.length)}var f=void 0;if(e.auth){var p=e.auth.username||"",h=e.auth.password||"";f=p+":"+h}var m=pte(e.baseURL,e.url),g=ZF.parse(m),v=g.protocol||"http:";if(!f&&g.auth){var y=g.auth.split(":"),b=y[0]||"",C=y[1]||"";f=b+":"+C}f&&d.authorization&&delete u[d.authorization];var _=eM.test(v),P=_?e.httpsAgent:e.httpAgent,S={path:hte(g.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:u,agent:P,agents:{http:e.httpAgent,https:e.httpsAgent},auth:f};e.socketPath?S.socketPath=e.socketPath:(S.hostname=g.hostname,S.port=g.port);var k=e.proxy;if(!k&&k!==!1){var T=v.slice(0,-1)+"_proxy",A=process.env[T]||process.env[T.toUpperCase()];if(A){var F=ZF.parse(A),j=process.env.no_proxy||process.env.NO_PROXY,J=!0;if(j){var Y=j.split(",").map(function(z){return z.trim()});J=!Y.some(function(z){return z?z==="*"||z[0]==="."&&g.hostname.substr(g.hostname.length-z.length)===z?!0:g.hostname===z:!1})}if(J&&(k={host:F.hostname,port:F.port,protocol:F.protocol},F.auth)){var ae=F.auth.split(":");k.auth={username:ae[0],password:ae[1]}}}}k&&(S.headers.host=g.hostname+(g.port?":"+g.port:""),tM(S,k,v+"//"+g.hostname+(g.port?":"+g.port:"")+S.path));var te,M=_&&(k?eM.test(k.protocol):!0);e.transport?te=e.transport:e.maxRedirects===0?te=M?gte:mte:(e.maxRedirects&&(S.maxRedirects=e.maxRedirects),te=M?yte:vte),e.maxBodyLength>-1&&(S.maxBodyLength=e.maxBodyLength),e.insecureHTTPParser&&(S.insecureHTTPParser=e.insecureHTTPParser);var L=te.request(S,function(z){if(!L.aborted){var ne=z,X=z.req||L;if(z.statusCode!==204&&X.method!=="HEAD"&&e.decompress!==!1)switch(z.headers["content-encoding"]){case"gzip":case"compress":case"deflate":ne=ne.pipe(wte.createUnzip()),delete z.headers["content-encoding"];break}var ve={status:z.statusCode,statusText:z.statusMessage,headers:z.headers,config:e,request:X};if(e.responseType==="stream")ve.data=ne,XF(a,c,ve);else{var Pe=[],Se=0;ne.on("data",function(pe){Pe.push(pe),Se+=pe.length,e.maxContentLength>-1&&Se>e.maxContentLength&&(ne.destroy(),c(Sm("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,X)))}),ne.on("error",function(pe){L.aborted||c(zb(pe,e,null,X))}),ne.on("end",function(){var pe=Buffer.concat(Pe);e.responseType!=="arraybuffer"&&(pe=pe.toString(e.responseEncoding),(!e.responseEncoding||e.responseEncoding==="utf8")&&(pe=Yu.stripBOM(pe))),ve.data=pe,XF(a,c,ve)})}}});if(L.on("error",function(z){L.aborted&&z.code!=="ERR_FR_TOO_MANY_REDIRECTS"||c(zb(z,e,null,L))}),e.timeout){var q=parseInt(e.timeout,10);if(isNaN(q)){c(Sm("error trying to parse `config.timeout` to int",e,"ERR_PARSE_TIMEOUT",L));return}L.setTimeout(q,function(){L.abort();var z=e.transitional||bte.transitional;c(Sm("timeout of "+q+"ms exceeded",e,z.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",L))})}(e.cancelToken||e.signal)&&(i=function(W){L.aborted||(L.abort(),c(!W||W&&W.type?new Ete("canceled"):W))},e.cancelToken&&e.cancelToken.subscribe(i),e.signal&&(e.signal.aborted?i():e.signal.addEventListener("abort",i))),Yu.isStream(l)?l.on("error",function(z){c(zb(z,e,null,L))}).pipe(L):L.end(l)})}});var Lc=I((fEe,sM)=>{"use strict";var Qt=gr(),oM=RF(),_te=wm(),Ste={"Content-Type":"application/x-www-form-urlencoded"};function iM(t,e){!Qt.isUndefined(t)&&Qt.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function xte(){var t;return typeof XMLHttpRequest!="undefined"?t=JF():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(t=nM()),t}function Pte(t,e,r){if(Qt.isString(t))try{return(e||JSON.parse)(t),Qt.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var xm={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:xte(),transformRequest:[function(e,r){return oM(r,"Accept"),oM(r,"Content-Type"),Qt.isFormData(e)||Qt.isArrayBuffer(e)||Qt.isBuffer(e)||Qt.isStream(e)||Qt.isFile(e)||Qt.isBlob(e)?e:Qt.isArrayBufferView(e)?e.buffer:Qt.isURLSearchParams(e)?(iM(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Qt.isObject(e)||r&&r["Content-Type"]==="application/json"?(iM(r,"application/json"),Pte(e)):e}],transformResponse:[function(e){var r=this.transitional||xm.transitional,n=r&&r.silentJSONParsing,o=r&&r.forcedJSONParsing,i=!n&&this.responseType==="json";if(i||o&&Qt.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(i)throw s.name==="SyntaxError"?_te(s,this,"E_JSON_PARSE"):s}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Qt.forEach(["delete","get","head"],function(e){xm.headers[e]={}});Qt.forEach(["post","put","patch"],function(e){xm.headers[e]=Qt.merge(Ste)});sM.exports=xm});var cM=I((pEe,aM)=>{"use strict";var kte=gr(),Ite=Lc();aM.exports=function(e,r,n){var o=this||Ite;return kte.forEach(n,function(s){e=s.call(o,e,r)}),e}});var Kb=I((hEe,lM)=>{"use strict";lM.exports=function(e){return!!(e&&e.__CANCEL__)}});var fM=I((mEe,dM)=>{"use strict";var uM=gr(),Yb=cM(),Tte=Kb(),Ate=Lc(),Dte=Nc();function Jb(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Dte("canceled")}dM.exports=function(e){Jb(e),e.headers=e.headers||{},e.data=Yb.call(e,e.data,e.headers,e.transformRequest),e.headers=uM.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),uM.forEach(["delete","get","head","post","put","patch","common"],function(o){delete e.headers[o]});var r=e.adapter||Ate.adapter;return r(e).then(function(o){return Jb(e),o.data=Yb.call(e,o.data,o.headers,e.transformResponse),o},function(o){return Tte(o)||(Jb(e),o&&o.response&&(o.response.data=Yb.call(e,o.response.data,o.response.headers,e.transformResponse))),Promise.reject(o)})}});var Qb=I((gEe,pM)=>{"use strict";var Yr=gr();pM.exports=function(e,r){r=r||{};var n={};function o(u,d){return Yr.isPlainObject(u)&&Yr.isPlainObject(d)?Yr.merge(u,d):Yr.isPlainObject(d)?Yr.merge({},d):Yr.isArray(d)?d.slice():d}function i(u){if(Yr.isUndefined(r[u])){if(!Yr.isUndefined(e[u]))return o(void 0,e[u])}else return o(e[u],r[u])}function s(u){if(!Yr.isUndefined(r[u]))return o(void 0,r[u])}function a(u){if(Yr.isUndefined(r[u])){if(!Yr.isUndefined(e[u]))return o(void 0,e[u])}else return o(void 0,r[u])}function c(u){if(u in r)return o(e[u],r[u]);if(u in e)return o(void 0,e[u])}var l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return Yr.forEach(Object.keys(e).concat(Object.keys(r)),function(d){var f=l[d]||i,p=f(d);Yr.isUndefined(p)&&f!==c||(n[d]=p)}),n}});var gM=I((vEe,mM)=>{"use strict";var Rte=_m().version,Xb={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Xb[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var hM={};Xb.transitional=function(e,r,n){function o(i,s){return"[Axios v"+Rte+"] Transitional option '"+i+"'"+s+(n?". "+n:"")}return function(i,s,a){if(e===!1)throw new Error(o(s," has been removed"+(r?" in "+r:"")));return r&&!hM[s]&&(hM[s]=!0,console.warn(o(s," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,s,a):!0}};function Ote(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),o=n.length;o-- >0;){var i=n[o],s=e[i];if(s){var a=t[i],c=a===void 0||s(a,i,t);if(c!==!0)throw new TypeError("option "+i+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+i)}}mM.exports={assertOptions:Ote,validators:Xb}});var EM=I((yEe,bM)=>{"use strict";var vM=gr(),Nte=vm(),yM=AF(),wM=fM(),Pm=Qb(),CM=gM(),Fc=CM.validators;function Ju(t){this.defaults=t,this.interceptors={request:new yM,response:new yM}}Ju.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=Pm(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&CM.assertOptions(r,{silentJSONParsing:Fc.transitional(Fc.boolean),forcedJSONParsing:Fc.transitional(Fc.boolean),clarifyTimeoutError:Fc.transitional(Fc.boolean)},!1);var n=[],o=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(e)===!1||(o=o&&f.synchronous,n.unshift(f.fulfilled,f.rejected))});var i=[];this.interceptors.response.forEach(function(f){i.push(f.fulfilled,f.rejected)});var s;if(!o){var a=[wM,void 0];for(Array.prototype.unshift.apply(a,n),a=a.concat(i),s=Promise.resolve(e);a.length;)s=s.then(a.shift(),a.shift());return s}for(var c=e;n.length;){var l=n.shift(),u=n.shift();try{c=l(c)}catch(d){u(d);break}}try{s=wM(c)}catch(d){return Promise.reject(d)}for(;i.length;)s=s.then(i.shift(),i.shift());return s};Ju.prototype.getUri=function(e){return e=Pm(this.defaults,e),Nte(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};vM.forEach(["delete","get","head","options"],function(e){Ju.prototype[e]=function(r,n){return this.request(Pm(n||{},{method:e,url:r,data:(n||{}).data}))}});vM.forEach(["post","put","patch"],function(e){Ju.prototype[e]=function(r,n,o){return this.request(Pm(o||{},{method:e,url:r,data:n}))}});bM.exports=Ju});var SM=I((wEe,_M)=>{"use strict";var Lte=Nc();function Mc(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(o){e=o});var r=this;this.promise.then(function(n){if(!!r._listeners){var o,i=r._listeners.length;for(o=0;o<i;o++)r._listeners[o](n);r._listeners=null}}),this.promise.then=function(n){var o,i=new Promise(function(s){r.subscribe(s),o=s}).then(n);return i.cancel=function(){r.unsubscribe(o)},i},t(function(o){r.reason||(r.reason=new Lte(o),e(r.reason))})}Mc.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Mc.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};Mc.prototype.unsubscribe=function(e){if(!!this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};Mc.source=function(){var e,r=new Mc(function(o){e=o});return{token:r,cancel:e}};_M.exports=Mc});var PM=I((CEe,xM)=>{"use strict";xM.exports=function(e){return function(n){return e.apply(null,n)}}});var IM=I((bEe,kM)=>{"use strict";kM.exports=function(e){return typeof e=="object"&&e.isAxiosError===!0}});var DM=I((EEe,Zb)=>{"use strict";var TM=gr(),Fte=Mb(),km=EM(),Mte=Qb(),qte=Lc();function AM(t){var e=new km(t),r=Fte(km.prototype.request,e);return TM.extend(r,km.prototype,e),TM.extend(r,e),r.create=function(o){return AM(Mte(t,o))},r}var po=AM(qte);po.Axios=km;po.Cancel=Nc();po.CancelToken=SM();po.isCancel=Kb();po.VERSION=_m().version;po.all=function(e){return Promise.all(e)};po.spread=PM();po.isAxiosError=IM();Zb.exports=po;Zb.exports.default=po});var OM=I((_Ee,RM)=>{RM.exports=DM()});var LM=I(eE=>{"use strict";Object.defineProperty(eE,"__esModule",{value:!0});var $te=OM(),NM=class{constructor(e){this.endpoint=e}get(e){return $te.default.get(this.endpoint,Object.assign(Object.assign({},e),{proxy:!1}))}};eE.AxiosHttpClient=NM});var MM=I(tE=>{"use strict";Object.defineProperty(tE,"__esModule",{value:!0});var FM=class{constructor(){this.storage=new Map}async getValue(e,r){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(r||void 0)}setValue(e,r){this.storage.set(e,r)}};tE.MemoryKeyValueStorage=FM});var $M=I(rE=>{"use strict";Object.defineProperty(rE,"__esModule",{value:!0});var jte=MM(),qM=class{constructor(e,r,n,o,i,s){this.telemetry=e,this.featuresTelemetryPropertyName=r,this.assignmentContextTelemetryPropertyName=n,this.telemetryEventName=o,this.storageKey=i,this.storage=s,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(s=new jte.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((a,c)=>{this.resolveInitialFetchPromise=a})}get features(){return this._features}set features(e){this._features=e,this.telemetry&&(this.telemetry.setSharedProperty(this.featuresTelemetryPropertyName,this.features.features.join(";")),this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext))}async getFeaturesAsync(e=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch{}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});this.fetchPromise=Promise.all(this.featureProviders.map(async r=>await r.getFeatures()));try{let r=await this.fetchPromise;this.updateFeatures(r,e)}catch{}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,r=!1){let n={features:[],assignmentContext:"",configs:[]};for(let o of e){for(let i of o.features)n.features.includes(i)||n.features.push(i);for(let i of o.configs){let s=n.configs.find(a=>a.Id===i.Id);s?s.Parameters=Object.assign(Object.assign({},s.Parameters),i.Parameters):n.configs.push(i)}n.assignmentContext+=o.assignmentContext}(r||!this.featuresConsumed)&&(this.features=n),this.storage&&this.storage.setValue(this.storageKey,n)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),e!==void 0&&e.configs===void 0&&(e.configs=[])),this.features.features.length===0&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){let r=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),r.features.includes(e)}getTreatmentVariable(e,r){var n;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${r}`),(n=this.features.configs.find(i=>i.Id===e))===null||n===void 0?void 0:n.Parameters[r]}async getTreatmentVariableAsync(e,r,n){if(n){let o=this.featuresConsumed,i=this.getTreatmentVariable(e,r);if(i===void 0)this.featuresConsumed=o;else return i}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,r)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(!(e==null||this.featureProviders==null))for(let r of e)this.featureProviders.push(r)}};rE.ExperimentationServiceBase=qM});var UM=I(nE=>{"use strict";Object.defineProperty(nE,"__esModule",{value:!0});var jM=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(e&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};nE.PollingService=jM});var HM=I(oE=>{"use strict";Object.defineProperty(oE,"__esModule",{value:!0});var Ute=$M(),Bte=UM(),BM=class extends Ute.ExperimentationServiceBase{constructor(e,r,n,o,i,s,a,c){super(e,o,i,s,a,c);if(this.telemetry=e,this.filterProviders=r,this.refreshRateMs=n,this.featuresTelemetryPropertyName=o,this.assignmentContextTelemetryPropertyName=i,this.telemetryEventName=s,this.storageKey=a,this.storage=c,n<1e3&&n!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");n>0&&(this.pollingService=new Bte.PollingService(n),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let r=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),r}else return await super.getFeaturesAsync(e)}};oE.ExperimentationServiceAutoPolling=BM});var VM=I(sE=>{"use strict";Object.defineProperty(sE,"__esModule",{value:!0});var Hte=EF(),Vte=LM(),Wte=HM(),iE=class extends Wte.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],e.refetchInterval!=null?e.refetchInterval:0,e.featuresTelemetryPropertyName,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage);this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new Hte.TasApiFeatureProvider(new Vte.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};sE.ExperimentationService=iE;iE.REFRESH_RATE_IN_MINUTES=30});var WM=I(aE=>{"use strict";Object.defineProperty(aE,"__esModule",{value:!0});var Gte=VM();aE.ExperimentationService=Gte.ExperimentationService});var zM=I(cE=>{"use strict";Object.defineProperty(cE,"__esModule",{value:!0});var GM=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,r){return await this.mementoGlobalStorage.get(e)||r}setValue(e,r){this.mementoGlobalStorage.update(e,r)}};cE.MementoKeyValueStorage=GM});var YM=I(lE=>{"use strict";Object.defineProperty(lE,"__esModule",{value:!0});var KM=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}};lE.default=KM});var QM=I(Im=>{"use strict";Object.defineProperty(Im,"__esModule",{value:!0});var zte=Ob(),Kte=WM(),uE=require("vscode"),Yte=zM(),Jte=YM(),Qte="https://default.exp-tas.com/vscode/ab",Xte="query-expfeature",Zte="VSCode.ABExp.Features",ere="abexp.assignmentcontext",tre="VSCode.ABExp.FeatureData",rre=1e3*60*30;function JM(t,e,r,n,o,...i){if(!o)throw new Error("Memento storage was not provided.");let s=uE.workspace.getConfiguration("telemetry");if(!(uE.env.isTelemetryEnabled===void 0?s.get("enableTelemetry",!0):uE.env.isTelemetryEnabled))return new Jte.default;let l=[new zte.VSCodeFilterProvider(t,e,r),...i],u=new Yte.MementoKeyValueStorage(o);return new Kte.ExperimentationService({filterProviders:l,telemetry:n,storageKey:tre,keyValueStorage:u,featuresTelemetryPropertyName:Zte,assignmentContextTelemetryPropertyName:ere,telemetryEventName:Xte,endpoint:Qte,refetchInterval:rre})}Im.getExperimentationService=JM;async function nre(t,e,r,n,o,...i){let s=JM(t,e,r,n,o,...i);return await s.initializePromise,s}Im.getExperimentationServiceAsync=nre});var ZM=I(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});var XM=QM();Qu.getExperimentationService=XM.getExperimentationService;Qu.getExperimentationServiceAsync=XM.getExperimentationServiceAsync;var ore=Ob();Qu.TargetPopulation=ore.TargetPopulation});var Ye=I(Ut=>{"use strict";var SE=Symbol.for("yaml.alias"),Sq=Symbol.for("yaml.document"),$m=Symbol.for("yaml.map"),xq=Symbol.for("yaml.pair"),xE=Symbol.for("yaml.scalar"),jm=Symbol.for("yaml.seq"),wo=Symbol.for("yaml.node.type"),kre=t=>!!t&&typeof t=="object"&&t[wo]===SE,Ire=t=>!!t&&typeof t=="object"&&t[wo]===Sq,Tre=t=>!!t&&typeof t=="object"&&t[wo]===$m,Are=t=>!!t&&typeof t=="object"&&t[wo]===xq,Pq=t=>!!t&&typeof t=="object"&&t[wo]===xE,Dre=t=>!!t&&typeof t=="object"&&t[wo]===jm;function kq(t){if(t&&typeof t=="object")switch(t[wo]){case $m:case jm:return!0}return!1}function Rre(t){if(t&&typeof t=="object")switch(t[wo]){case SE:case $m:case xE:case jm:return!0}return!1}var Ore=t=>(Pq(t)||kq(t))&&!!t.anchor,Iq=class{constructor(e){Object.defineProperty(this,wo,{value:e})}clone(){let e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}};Ut.ALIAS=SE;Ut.DOC=Sq;Ut.MAP=$m;Ut.NODE_TYPE=wo;Ut.NodeBase=Iq;Ut.PAIR=xq;Ut.SCALAR=xE;Ut.SEQ=jm;Ut.hasAnchor=Ore;Ut.isAlias=kre;Ut.isCollection=kq;Ut.isDocument=Ire;Ut.isMap=Tre;Ut.isNode=Rre;Ut.isPair=Are;Ut.isScalar=Pq;Ut.isSeq=Dre});var cd=I(Tq=>{"use strict";var Ir=Ye(),ca=Symbol("break visit"),Nre=Symbol("skip children"),ad=Symbol("remove node");function Um(t,e){typeof e=="object"&&(e.Collection||e.Node||e.Value)&&(e=Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e)),Ir.isDocument(t)?Bc(null,t.contents,e,Object.freeze([t]))===ad&&(t.contents=null):Bc(null,t,e,Object.freeze([]))}Um.BREAK=ca;Um.SKIP=Nre;Um.REMOVE=ad;function Bc(t,e,r,n){let o;if(typeof r=="function"?o=r(t,e,n):Ir.isMap(e)?r.Map&&(o=r.Map(t,e,n)):Ir.isSeq(e)?r.Seq&&(o=r.Seq(t,e,n)):Ir.isPair(e)?r.Pair&&(o=r.Pair(t,e,n)):Ir.isScalar(e)?r.Scalar&&(o=r.Scalar(t,e,n)):Ir.isAlias(e)&&r.Alias&&(o=r.Alias(t,e,n)),Ir.isNode(o)||Ir.isPair(o)){let i=n[n.length-1];if(Ir.isCollection(i))i.items[t]=o;else if(Ir.isPair(i))t==="key"?i.key=o:i.value=o;else if(Ir.isDocument(i))i.contents=o;else{let s=Ir.isAlias(i)?"alias":"scalar";throw new Error(`Cannot replace node with ${s} parent`)}return Bc(t,o,r,n)}if(typeof o!="symbol"){if(Ir.isCollection(e)){n=Object.freeze(n.concat(e));for(let i=0;i<e.items.length;++i){let s=Bc(i,e.items[i],r,n);if(typeof s=="number")i=s-1;else{if(s===ca)return ca;s===ad&&(e.items.splice(i,1),i-=1)}}}else if(Ir.isPair(e)){n=Object.freeze(n.concat(e));let i=Bc("key",e.key,r,n);if(i===ca)return ca;i===ad&&(e.key=null);let s=Bc("value",e.value,r,n);if(s===ca)return ca;s===ad&&(e.value=null)}}return o}Tq.visit=Um});var PE=I(Dq=>{"use strict";var Aq=Ye(),Lre=cd(),Fre={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},Mre=t=>t.replace(/[!,[\]{}]/g,e=>Fre[e]),Jr=class{constructor(e,r){this.marker=null,this.yaml=Object.assign({},Jr.defaultYaml,e),this.tags=Object.assign({},Jr.defaultTags,r)}clone(){let e=new Jr(this.yaml,this.tags);return e.marker=this.marker,e}atDocument(){let e=new Jr(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Jr.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Jr.defaultTags);break}return e}add(e,r){this.atNextDocument&&(this.yaml={explicit:Jr.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Jr.defaultTags),this.atNextDocument=!1);let n=e.trim().split(/[ \t]+/),o=n.shift();switch(o){case"%TAG":{if(n.length!==2&&(r(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;let[i,s]=n;return this.tags[i]=s,!0}case"%YAML":{if(this.yaml.explicit=!0,n.length<1)return r(0,"%YAML directive should contain exactly one part"),!1;let[i]=n;return i==="1.1"||i==="1.2"?(this.yaml.version=i,!0):(r(6,`Unsupported YAML version ${i}`,!0),!1)}default:return r(0,`Unknown directive ${o}`,!0),!1}}tagName(e,r){if(e==="!")return"!";if(e[0]!=="!")return r(`Not a valid tag: ${e}`),null;if(e[1]==="<"){let s=e.slice(2,-1);return s==="!"||s==="!!"?(r(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&r("Verbatim tags must end with a >"),s)}let[,n,o]=e.match(/^(.*!)([^!]*)$/);o||r(`The ${e} tag has no suffix`);let i=this.tags[n];return i?i+decodeURIComponent(o):n==="!"?e:(r(`Could not resolve tag: ${e}`),null)}tagString(e){for(let[r,n]of Object.entries(this.tags))if(e.startsWith(n))return r+Mre(e.substring(n.length));return e[0]==="!"?e:`!<${e}>`}toString(e){let r=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags),o;if(e&&n.length>0&&Aq.isNode(e.contents)){let i={};Lre.visit(e.contents,(s,a)=>{Aq.isNode(a)&&a.tag&&(i[a.tag]=!0)}),o=Object.keys(i)}else o=[];for(let[i,s]of n)i==="!!"&&s==="tag:yaml.org,2002:"||(!e||o.some(a=>a.startsWith(s)))&&r.push(`%TAG ${i} ${s}`);return r.join(`
`)}};Jr.defaultYaml={explicit:!1,version:"1.2"};Jr.defaultTags={"!!":"tag:yaml.org,2002:"};Dq.Directives=Jr});var Bm=I(ld=>{"use strict";var Rq=Ye(),qre=cd();function $re(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){let r=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(r)}return!0}function Oq(t){let e=new Set;return qre.visit(t,{Value(r,n){n.anchor&&e.add(n.anchor)}}),e}function Nq(t,e){for(let r=1;;++r){let n=`${t}${r}`;if(!e.has(n))return n}}function jre(t,e){let r=[],n=new Map,o=null;return{onAnchor(i){r.push(i),o||(o=Oq(t));let s=Nq(e,o);return o.add(s),s},setAnchors(){for(let i of r){let s=n.get(i);if(typeof s=="object"&&s.anchor&&(Rq.isScalar(s.node)||Rq.isCollection(s.node)))s.node.anchor=s.anchor;else{let a=new Error("Failed to resolve repeated object (this should not happen)");throw a.source=i,a}}},sourceObjects:n}}ld.anchorIsValid=$re;ld.anchorNames=Oq;ld.createNodeAnchors=jre;ld.findNewAnchor=Nq});var dd=I(Mq=>{"use strict";var Ure=Bm(),Lq=cd(),ud=Ye(),Fq=class extends ud.NodeBase{constructor(e){super(ud.ALIAS);this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let r;return Lq.visit(e,{Node:(n,o)=>{if(o===this)return Lq.visit.BREAK;o.anchor===this.source&&(r=o)}}),r}toJSON(e,r){if(!r)return{source:this.source};let{anchors:n,doc:o,maxAliasCount:i}=r,s=this.resolve(o);if(!s){let c=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(c)}let a=n.get(s);if(!a||a.res===void 0){let c="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(c)}if(i>=0&&(a.count+=1,a.aliasCount===0&&(a.aliasCount=Hm(o,s,n)),a.count*a.aliasCount>i)){let c="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(c)}return a.res}toString(e,r,n){let o=`*${this.source}`;if(e){if(Ure.anchorIsValid(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){let i=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(i)}if(e.implicitKey)return`${o} `}return o}};function Hm(t,e,r){if(ud.isAlias(e)){let n=e.resolve(t),o=r&&n&&r.get(n);return o?o.count*o.aliasCount:0}else if(ud.isCollection(e)){let n=0;for(let o of e.items){let i=Hm(t,o,r);i>n&&(n=i)}return n}else if(ud.isPair(e)){let n=Hm(t,e.key,r),o=Hm(t,e.value,r);return Math.max(n,o)}return 1}Mq.Alias=Fq});var Hc=I($q=>{"use strict";var Bre=Ye();function qq(t,e,r){if(Array.isArray(t))return t.map((n,o)=>qq(n,String(o),r));if(t&&typeof t.toJSON=="function"){if(!r||!Bre.hasAnchor(t))return t.toJSON(e,r);let n={aliasCount:0,count:1,res:void 0};r.anchors.set(t,n),r.onCreate=i=>{n.res=i,delete r.onCreate};let o=t.toJSON(e,r);return r.onCreate&&r.onCreate(o),o}return typeof t=="bigint"&&!(r&&r.keep)?Number(t):t}$q.toJS=qq});var kt=I(kE=>{"use strict";var jq=Ye(),Hre=Hc(),Vre=t=>!t||typeof t!="function"&&typeof t!="object",la=class extends jq.NodeBase{constructor(e){super(jq.SCALAR);this.value=e}toJSON(e,r){return r&&r.keep?this.value:Hre.toJS(this.value,e,r)}toString(){return String(this.value)}};la.BLOCK_FOLDED="BLOCK_FOLDED";la.BLOCK_LITERAL="BLOCK_LITERAL";la.PLAIN="PLAIN";la.QUOTE_DOUBLE="QUOTE_DOUBLE";la.QUOTE_SINGLE="QUOTE_SINGLE";kE.Scalar=la;kE.isScalarValue=Vre});var fd=I(Bq=>{"use strict";var Wre=dd(),ua=Ye(),Uq=kt(),Gre="tag:yaml.org,2002:";function zre(t,e,r){if(e){let n=r.filter(i=>i.tag===e),o=n.find(i=>!i.format)||n[0];if(!o)throw new Error(`Tag ${e} not found`);return o}return r.find(n=>n.identify&&n.identify(t)&&!n.format)}function Kre(t,e,r){var n,o;if(ua.isDocument(t)&&(t=t.contents),ua.isNode(t))return t;if(ua.isPair(t)){let p=(o=(n=r.schema[ua.MAP]).createNode)===null||o===void 0?void 0:o.call(n,r.schema,null,r);return p.items.push(t),p}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt=="function"&&t instanceof BigInt)&&(t=t.valueOf());let{aliasDuplicateObjects:i,onAnchor:s,onTagObj:a,schema:c,sourceObjects:l}=r,u;if(i&&t&&typeof t=="object"){if(u=l.get(t),u)return u.anchor||(u.anchor=s(t)),new Wre.Alias(u.anchor);u={anchor:null,node:null},l.set(t,u)}e&&e.startsWith("!!")&&(e=Gre+e.slice(2));let d=zre(t,e,c.tags);if(!d){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){let p=new Uq.Scalar(t);return u&&(u.node=p),p}d=t instanceof Map?c[ua.MAP]:Symbol.iterator in Object(t)?c[ua.SEQ]:c[ua.MAP]}a&&(a(d),delete r.onTagObj);let f=(d==null?void 0:d.createNode)?d.createNode(r.schema,t,r):new Uq.Scalar(t);return e&&(f.tag=e),u&&(u.node=f),f}Bq.createNode=Kre});var pd=I(Vm=>{"use strict";var Yre=fd(),Un=Ye();function IE(t,e,r){let n=r;for(let o=e.length-1;o>=0;--o){let i=e[o];if(typeof i=="number"&&Number.isInteger(i)&&i>=0){let s=[];s[i]=n,n=s}else n=new Map([[i,n]])}return Yre.createNode(n,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}var Hq=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done,TE=class extends Un.NodeBase{constructor(e,r){super(e);Object.defineProperty(this,"schema",{value:r,configurable:!0,enumerable:!1,writable:!0})}clone(e){let r=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(r.schema=e),r.items=r.items.map(n=>Un.isNode(n)||Un.isPair(n)?n.clone(e):n),this.range&&(r.range=this.range.slice()),r}addIn(e,r){if(Hq(e))this.add(r);else{let[n,...o]=e,i=this.get(n,!0);if(Un.isCollection(i))i.addIn(o,r);else if(i===void 0&&this.schema)this.set(n,IE(this.schema,o,r));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${o}`)}}deleteIn(e){let[r,...n]=e;if(n.length===0)return this.delete(r);let o=this.get(r,!0);if(Un.isCollection(o))return o.deleteIn(n);throw new Error(`Expected YAML collection at ${r}. Remaining path: ${n}`)}getIn(e,r){let[n,...o]=e,i=this.get(n,!0);return o.length===0?!r&&Un.isScalar(i)?i.value:i:Un.isCollection(i)?i.getIn(o,r):void 0}hasAllNullValues(e){return this.items.every(r=>{if(!Un.isPair(r))return!1;let n=r.value;return n==null||e&&Un.isScalar(n)&&n.value==null&&!n.commentBefore&&!n.comment&&!n.tag})}hasIn(e){let[r,...n]=e;if(n.length===0)return this.has(r);let o=this.get(r,!0);return Un.isCollection(o)?o.hasIn(n):!1}setIn(e,r){let[n,...o]=e;if(o.length===0)this.set(n,r);else{let i=this.get(n,!0);if(Un.isCollection(i))i.setIn(o,r);else if(i===void 0&&this.schema)this.set(n,IE(this.schema,o,r));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${o}`)}}};TE.maxFlowStringSingleLineLength=60;Vm.Collection=TE;Vm.collectionFromPath=IE;Vm.isEmptyPath=Hq});var hd=I(Wm=>{"use strict";var Jre=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function Vq(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}var Qre=(t,e,r)=>r.includes(`
`)?`
`+Vq(r,e):(t.endsWith(" ")?"":" ")+r;Wm.indentComment=Vq;Wm.lineComment=Qre;Wm.stringifyComment=Jre});var Gq=I(md=>{"use strict";var Xre="flow",AE="block",Gm="quoted";function Zre(t,e,r="flow",{indentAtStart:n,lineWidth:o=80,minContentWidth:i=20,onFold:s,onOverflow:a}={}){if(!o||o<0)return t;let c=Math.max(1+i,1+o-e.length);if(t.length<=c)return t;let l=[],u={},d=o-e.length;typeof n=="number"&&(n>o-Math.max(2,i)?l.push(0):d=o-n);let f,p,h=!1,m=-1,g=-1,v=-1;r===AE&&(m=Wq(t,m),m!==-1&&(d=m+c));for(let b;b=t[m+=1];){if(r===Gm&&b==="\\"){switch(g=m,t[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}v=m}if(b===`
`)r===AE&&(m=Wq(t,m)),d=m+c,f=void 0;else{if(b===" "&&p&&p!==" "&&p!==`
`&&p!=="	"){let C=t[m+1];C&&C!==" "&&C!==`
`&&C!=="	"&&(f=m)}if(m>=d)if(f)l.push(f),d=f+c,f=void 0;else if(r===Gm){for(;p===" "||p==="	";)p=b,b=t[m+=1],h=!0;let C=m>v+1?m-2:g-1;if(u[C])return t;l.push(C),u[C]=!0,d=C+c,f=void 0}else h=!0}p=b}if(h&&a&&a(),l.length===0)return t;s&&s();let y=t.slice(0,l[0]);for(let b=0;b<l.length;++b){let C=l[b],_=l[b+1]||t.length;C===0?y=`
${e}${t.slice(0,_)}`:(r===Gm&&u[C]&&(y+=`${t[C]}\\`),y+=`
${e}${t.slice(C+1,_)}`)}return y}function Wq(t,e){let r=t[e+1];for(;r===" "||r==="	";){do r=t[e+=1];while(r&&r!==`
`);r=t[e+1]}return e}md.FOLD_BLOCK=AE;md.FOLD_FLOW=Xre;md.FOLD_QUOTED=Gm;md.foldFlowLines=Zre});var yd=I(zq=>{"use strict";var Co=kt(),Hi=Gq(),zm=t=>({indentAtStart:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),Km=t=>/^(%|---|\.\.\.)/m.test(t);function ene(t,e,r){if(!e||e<0)return!1;let n=e-r,o=t.length;if(o<=n)return!1;for(let i=0,s=0;i<o;++i)if(t[i]===`
`){if(i-s>n)return!0;if(s=i+1,o-s<=n)return!1}return!0}function gd(t,e){let r=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return r;let{implicitKey:n}=e,o=e.options.doubleQuotedMinMultiLineLength,i=e.indent||(Km(t)?"  ":""),s="",a=0;for(let c=0,l=r[c];l;l=r[++c])if(l===" "&&r[c+1]==="\\"&&r[c+2]==="n"&&(s+=r.slice(a,c)+"\\ ",c+=1,a=c,l="\\"),l==="\\")switch(r[c+1]){case"u":{s+=r.slice(a,c);let u=r.substr(c+2,4);switch(u){case"0000":s+="\\0";break;case"0007":s+="\\a";break;case"000b":s+="\\v";break;case"001b":s+="\\e";break;case"0085":s+="\\N";break;case"00a0":s+="\\_";break;case"2028":s+="\\L";break;case"2029":s+="\\P";break;default:u.substr(0,2)==="00"?s+="\\x"+u.substr(2):s+=r.substr(c,6)}c+=5,a=c+1}break;case"n":if(n||r[c+2]==='"'||r.length<o)c+=1;else{for(s+=r.slice(a,c)+`

`;r[c+2]==="\\"&&r[c+3]==="n"&&r[c+4]!=='"';)s+=`
`,c+=2;s+=i,r[c+2]===" "&&(s+="\\"),c+=1,a=c+1}break;default:c+=1}return s=a?s+r.slice(a):r,n?s:Hi.foldFlowLines(s,i,Hi.FOLD_QUOTED,zm(e))}function DE(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return gd(t,e);let r=e.indent||(Km(t)?"  ":""),n="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${r}`)+"'";return e.implicitKey?n:Hi.foldFlowLines(n,r,Hi.FOLD_FLOW,zm(e))}function vd(t,e){let{singleQuote:r}=e.options,n;if(r===!1)n=gd;else{let o=t.includes('"'),i=t.includes("'");o&&!i?n=DE:i&&!o?n=gd:n=r?DE:gd}return n(t,e)}function Ym({comment:t,type:e,value:r},n,o,i){let{blockQuote:s,commentString:a,lineWidth:c}=n.options;if(!s||/\n[\t ]+$/.test(r)||/^\s*$/.test(r))return vd(r,n);let l=n.indent||(n.forceBlockIndent||Km(r)?"  ":""),u=s==="literal"?!0:s==="folded"||e===Co.Scalar.BLOCK_FOLDED?!1:e===Co.Scalar.BLOCK_LITERAL?!0:!ene(r,c,l.length);if(!r)return u?`|
`:`>
`;let d,f;for(f=r.length;f>0;--f){let P=r[f-1];if(P!==`
`&&P!=="	"&&P!==" ")break}let p=r.substring(f),h=p.indexOf(`
`);h===-1?d="-":r===p||h!==p.length-1?(d="+",i&&i()):d="",p&&(r=r.slice(0,-p.length),p[p.length-1]===`
`&&(p=p.slice(0,-1)),p=p.replace(/\n+(?!\n|$)/g,`$&${l}`));let m=!1,g,v=-1;for(g=0;g<r.length;++g){let P=r[g];if(P===" ")m=!0;else if(P===`
`)v=g;else break}let y=r.substring(0,v<g?v+1:g);y&&(r=r.substring(y.length),y=y.replace(/\n+/g,`$&${l}`));let C=(u?"|":">")+(m?l?"2":"1":"")+d;if(t&&(C+=" "+a(t.replace(/ ?[\r\n]+/g," ")),o&&o()),u)return r=r.replace(/\n+/g,`$&${l}`),`${C}
${l}${y}${r}${p}`;r=r.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${l}`);let _=Hi.foldFlowLines(`${y}${r}${p}`,l,Hi.FOLD_BLOCK,zm(n));return`${C}
${l}${_}`}function tne(t,e,r,n){let{type:o,value:i}=t,{actualString:s,implicitKey:a,indent:c,inFlow:l}=e;if(a&&/[\n[\]{},]/.test(i)||l&&/[[\]{},]/.test(i))return vd(i,e);if(!i||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(i))return a||l||i.indexOf(`
`)===-1?vd(i,e):Ym(t,e,r,n);if(!a&&!l&&o!==Co.Scalar.PLAIN&&i.indexOf(`
`)!==-1)return Ym(t,e,r,n);if(c===""&&Km(i))return e.forceBlockIndent=!0,Ym(t,e,r,n);let u=i.replace(/\n+/g,`$&
${c}`);if(s){let d=h=>{var m;return h.default&&h.tag!=="tag:yaml.org,2002:str"&&((m=h.test)===null||m===void 0?void 0:m.test(u))},{compat:f,tags:p}=e.doc.schema;if(p.some(d)||(f==null?void 0:f.some(d)))return vd(i,e)}return a?u:Hi.foldFlowLines(u,c,Hi.FOLD_FLOW,zm(e))}function rne(t,e,r,n){let{implicitKey:o,inFlow:i}=e,s=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)}),{type:a}=t;a!==Co.Scalar.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(s.value)&&(a=Co.Scalar.QUOTE_DOUBLE);let c=u=>{switch(u){case Co.Scalar.BLOCK_FOLDED:case Co.Scalar.BLOCK_LITERAL:return o||i?vd(s.value,e):Ym(s,e,r,n);case Co.Scalar.QUOTE_DOUBLE:return gd(s.value,e);case Co.Scalar.QUOTE_SINGLE:return DE(s.value,e);case Co.Scalar.PLAIN:return tne(s,e,r,n);default:return null}},l=c(a);if(l===null){let{defaultKeyType:u,defaultStringType:d}=e.options,f=o&&u||d;if(l=c(f),l===null)throw new Error(`Unsupported default string type ${f}`)}return l}zq.stringifyString=rne});var Vc=I(RE=>{"use strict";var nne=Bm(),Vi=Ye(),one=hd(),ine=yd();function sne(t,e){let r=Object.assign({blockQuote:!0,commentString:one.stringifyComment,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e),n;switch(r.collectionStyle){case"block":n=!1;break;case"flow":n=!0;break;default:n=null}return{anchors:new Set,doc:t,indent:"",indentStep:typeof r.indent=="number"?" ".repeat(r.indent):"  ",inFlow:n,options:r}}function ane(t,e){if(e.tag){let o=t.filter(i=>i.tag===e.tag);if(o.length>0)return o.find(i=>i.format===e.format)||o[0]}let r,n;if(Vi.isScalar(e)){n=e.value;let o=t.filter(i=>i.identify&&i.identify(n));r=o.find(i=>i.format===e.format)||o.find(i=>!i.format)}else n=e,r=t.find(o=>o.nodeClass&&n instanceof o.nodeClass);if(!r){let o=n&&n.constructor?n.constructor.name:typeof n;throw new Error(`Tag not resolved for ${o} value`)}return r}function cne(t,e,{anchors:r,doc:n}){if(!n.directives)return"";let o=[],i=(Vi.isScalar(t)||Vi.isCollection(t))&&t.anchor;i&&nne.anchorIsValid(i)&&(r.add(i),o.push(`&${i}`));let s=t.tag||(e.default?null:e.tag);return s&&o.push(n.directives.tagString(s)),o.join(" ")}function lne(t,e,r,n){var o;if(Vi.isPair(t))return t.toString(e,r,n);if(Vi.isAlias(t)){if(e.doc.directives)return t.toString(e);if((o=e.resolvedAliases)===null||o===void 0?void 0:o.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let i,s=Vi.isNode(t)?t:e.doc.createNode(t,{onTagObj:l=>i=l});i||(i=ane(e.doc.schema.tags,s));let a=cne(s,i,e);a.length>0&&(e.indentAtStart=(e.indentAtStart||0)+a.length+1);let c=typeof i.stringify=="function"?i.stringify(s,e,r,n):Vi.isScalar(s)?ine.stringifyString(s,e,r,n):s.toString(e,r,n);return a?Vi.isScalar(s)||c[0]==="{"||c[0]==="["?`${a} ${c}`:`${a}
${e.indent}${c}`:c}RE.createStringifyContext=sne;RE.stringify=lne});var Qq=I(Jq=>{"use strict";var Wi=Ye(),Kq=kt(),Yq=Vc(),wd=hd();function une({key:t,value:e},r,n,o){let{allNullValues:i,doc:s,indent:a,indentStep:c,options:{commentString:l,indentSeq:u,simpleKeys:d}}=r,f=Wi.isNode(t)&&t.comment||null;if(d){if(f)throw new Error("With simple keys, key nodes cannot have comments");if(Wi.isCollection(t)){let P="With simple keys, collection cannot be used as a key value";throw new Error(P)}}let p=!d&&(!t||f&&e==null&&!r.inFlow||Wi.isCollection(t)||(Wi.isScalar(t)?t.type===Kq.Scalar.BLOCK_FOLDED||t.type===Kq.Scalar.BLOCK_LITERAL:typeof t=="object"));r=Object.assign({},r,{allNullValues:!1,implicitKey:!p&&(d||!i),indent:a+c});let h=!1,m=!1,g=Yq.stringify(t,r,()=>h=!0,()=>m=!0);if(!p&&!r.inFlow&&g.length>1024){if(d)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");p=!0}if(r.inFlow){if(i||e==null)return h&&n&&n(),p?`? ${g}`:g}else if(i&&!d||e==null&&p)return g=`? ${g}`,f&&!h?g+=wd.lineComment(g,r.indent,l(f)):m&&o&&o(),g;h&&(f=null),p?(f&&(g+=wd.lineComment(g,r.indent,l(f))),g=`? ${g}
${a}:`):(g=`${g}:`,f&&(g+=wd.lineComment(g,r.indent,l(f))));let v="",y=null;if(Wi.isNode(e)){if(e.spaceBefore&&(v=`
`),e.commentBefore){let P=l(e.commentBefore);v+=`
${wd.indentComment(P,r.indent)}`}y=e.comment}else e&&typeof e=="object"&&(e=s.createNode(e));r.implicitKey=!1,!p&&!f&&Wi.isScalar(e)&&(r.indentAtStart=g.length+1),m=!1,!u&&c.length>=2&&!r.inFlow&&!p&&Wi.isSeq(e)&&!e.flow&&!e.tag&&!e.anchor&&(r.indent=r.indent.substr(2));let b=!1,C=Yq.stringify(e,r,()=>b=!0,()=>m=!0),_=" ";return v||f?_=C===""&&!r.inFlow?v:`${v}
${r.indent}`:!p&&Wi.isCollection(e)?(!(C[0]==="["||C[0]==="{")||C.includes(`
`))&&(_=`
${r.indent}`):(C===""||C[0]===`
`)&&(_=""),g+=_+C,r.inFlow?b&&n&&n():y&&!b?g+=wd.lineComment(g,r.indent,l(y)):m&&o&&o(),g}Jq.stringifyPair=une});var NE=I(OE=>{"use strict";function dne(t,...e){t==="debug"&&console.log(...e)}function fne(t,e){(t==="debug"||t==="warn")&&(typeof process!="undefined"&&process.emitWarning?process.emitWarning(e):console.warn(e))}OE.debug=dne;OE.warn=fne});var ME=I(Zq=>{"use strict";var pne=NE(),hne=Vc(),Wc=Ye(),mne=kt(),LE=Hc(),Xq="<<";function gne(t,e,{key:r,value:n}){if(t&&t.doc.schema.merge&&vne(r))if(n=Wc.isAlias(n)?n.resolve(t.doc):n,Wc.isSeq(n))for(let o of n.items)FE(t,e,o);else if(Array.isArray(n))for(let o of n)FE(t,e,o);else FE(t,e,n);else{let o=LE.toJS(r,"",t);if(e instanceof Map)e.set(o,LE.toJS(n,o,t));else if(e instanceof Set)e.add(o);else{let i=yne(r,o,t),s=LE.toJS(n,i,t);i in e?Object.defineProperty(e,i,{value:s,writable:!0,enumerable:!0,configurable:!0}):e[i]=s}}return e}var vne=t=>t===Xq||Wc.isScalar(t)&&t.value===Xq&&(!t.type||t.type===mne.Scalar.PLAIN);function FE(t,e,r){let n=t&&Wc.isAlias(r)?r.resolve(t.doc):r;if(!Wc.isMap(n))throw new Error("Merge sources must be maps or map aliases");let o=n.toJSON(null,t,Map);for(let[i,s]of o)e instanceof Map?e.has(i)||e.set(i,s):e instanceof Set?e.add(i):Object.prototype.hasOwnProperty.call(e,i)||Object.defineProperty(e,i,{value:s,writable:!0,enumerable:!0,configurable:!0});return e}function yne(t,e,r){if(e===null)return"";if(typeof e!="object")return String(e);if(Wc.isNode(t)&&r&&r.doc){let n=hne.createStringifyContext(r.doc,{});n.anchors=new Set;for(let i of r.anchors.keys())n.anchors.add(i.anchor);n.inFlow=!0,n.inStringifyKey=!0;let o=t.toString(n);if(!r.mapKeyWarned){let i=JSON.stringify(o);i.length>40&&(i=i.substring(0,36)+'..."'),pne.warn(r.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${i}. Set mapAsMap: true to use object keys.`),r.mapKeyWarned=!0}return o}return JSON.stringify(e)}Zq.addPairToJSMap=gne});var Jo=I(qE=>{"use strict";var e$=fd(),wne=Qq(),Cne=ME(),Jm=Ye();function bne(t,e,r){let n=e$.createNode(t,void 0,r),o=e$.createNode(e,void 0,r);return new Cd(n,o)}var Cd=class{constructor(e,r=null){Object.defineProperty(this,Jm.NODE_TYPE,{value:Jm.PAIR}),this.key=e,this.value=r}clone(e){let{key:r,value:n}=this;return Jm.isNode(r)&&(r=r.clone(e)),Jm.isNode(n)&&(n=n.clone(e)),new Cd(r,n)}toJSON(e,r){let n=r&&r.mapAsMap?new Map:{};return Cne.addPairToJSMap(r,n,this)}toString(e,r,n){return e&&e.doc?wne.stringifyPair(this,e,r,n):JSON.stringify(this)}};qE.Pair=Cd;qE.createPair=bne});var Qm=I(t$=>{"use strict";var Ene={intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"};t$.defaultOptions=Ene});var $E=I(n$=>{"use strict";var _ne=pd(),da=Ye(),r$=Vc(),bd=hd();function Sne(t,e,r){var n;return(((n=e.inFlow)!==null&&n!==void 0?n:t.flow)?Pne:xne)(t,e,r)}function xne({comment:t,items:e},r,{blockItemPrefix:n,flowChars:o,itemIndent:i,onChompKeep:s,onComment:a}){let{indent:c,options:{commentString:l}}=r,u=Object.assign({},r,{indent:i,type:null}),d=!1,f=[];for(let h=0;h<e.length;++h){let m=e[h],g=null;if(da.isNode(m))!d&&m.spaceBefore&&f.push(""),Xm(r,f,m.commentBefore,d),m.comment&&(g=m.comment);else if(da.isPair(m)){let y=da.isNode(m.key)?m.key:null;y&&(!d&&y.spaceBefore&&f.push(""),Xm(r,f,y.commentBefore,d))}d=!1;let v=r$.stringify(m,u,()=>g=null,()=>d=!0);g&&(v+=bd.lineComment(v,i,l(g))),d&&g&&(d=!1),f.push(n+v)}let p;if(f.length===0)p=o.start+o.end;else{p=f[0];for(let h=1;h<f.length;++h){let m=f[h];p+=m?`
${c}${m}`:`
`}}return t?(p+=`
`+bd.indentComment(l(t),c),a&&a()):d&&s&&s(),p}function Pne({comment:t,items:e},r,{flowChars:n,itemIndent:o,onComment:i}){let{indent:s,indentStep:a,options:{commentString:c}}=r;o+=a;let l=Object.assign({},r,{indent:o,inFlow:!0,type:null}),u=!1,d=0,f=[];for(let g=0;g<e.length;++g){let v=e[g],y=null;if(da.isNode(v))v.spaceBefore&&f.push(""),Xm(r,f,v.commentBefore,!1),v.comment&&(y=v.comment);else if(da.isPair(v)){let C=da.isNode(v.key)?v.key:null;C&&(C.spaceBefore&&f.push(""),Xm(r,f,C.commentBefore,!1),C.comment&&(u=!0));let _=da.isNode(v.value)?v.value:null;_?(_.comment&&(y=_.comment),_.commentBefore&&(u=!0)):v.value==null&&C&&C.comment&&(y=C.comment)}y&&(u=!0);let b=r$.stringify(v,l,()=>y=null);g<e.length-1&&(b+=","),y&&(b+=bd.lineComment(b,o,c(y))),!u&&(f.length>d||b.includes(`
`))&&(u=!0),f.push(b),d=f.length}let p,{start:h,end:m}=n;if(f.length===0)p=h+m;else if(u||(u=f.reduce((v,y)=>v+y.length+2,2)>_ne.Collection.maxFlowStringSingleLineLength),u){p=h;for(let g of f)p+=g?`
${a}${s}${g}`:`
`;p+=`
${s}${m}`}else p=`${h} ${f.join(" ")} ${m}`;return t&&(p+=bd.lineComment(p,c(t),s),i&&i()),p}function Xm({indent:t,options:{commentString:e}},r,n,o){if(n&&o&&(n=n.replace(/^\n+/,"")),n){let i=bd.indentComment(e(n),t);r.push(i.trimStart())}}n$.stringifyCollection=Sne});var fa=I(UE=>{"use strict";var kne=$E(),Ine=ME(),Tne=pd(),Gi=Ye(),jE=Jo(),Ane=kt();function Ed(t,e){let r=Gi.isScalar(e)?e.value:e;for(let n of t)if(Gi.isPair(n)&&(n.key===e||n.key===r||Gi.isScalar(n.key)&&n.key.value===r))return n}var o$=class extends Tne.Collection{constructor(e){super(Gi.MAP,e);this.items=[]}static get tagName(){return"tag:yaml.org,2002:map"}add(e,r){let n;Gi.isPair(e)?n=e:!e||typeof e!="object"||!("key"in e)?n=new jE.Pair(e,e.value):n=new jE.Pair(e.key,e.value);let o=Ed(this.items,n.key),i=this.schema&&this.schema.sortMapEntries;if(o){if(!r)throw new Error(`Key ${n.key} already set`);Gi.isScalar(o.value)&&Ane.isScalarValue(n.value)?o.value.value=n.value:o.value=n.value}else if(i){let s=this.items.findIndex(a=>i(n,a)<0);s===-1?this.items.push(n):this.items.splice(s,0,n)}else this.items.push(n)}delete(e){let r=Ed(this.items,e);return r?this.items.splice(this.items.indexOf(r),1).length>0:!1}get(e,r){let n=Ed(this.items,e),o=n&&n.value;return!r&&Gi.isScalar(o)?o.value:o}has(e){return!!Ed(this.items,e)}set(e,r){this.add(new jE.Pair(e,r),!0)}toJSON(e,r,n){let o=n?new n:r&&r.mapAsMap?new Map:{};r&&r.onCreate&&r.onCreate(o);for(let i of this.items)Ine.addPairToJSMap(r,o,i);return o}toString(e,r,n){if(!e)return JSON.stringify(this);for(let o of this.items)if(!Gi.isPair(o))throw new Error(`Map items must all be pairs; found ${JSON.stringify(o)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),kne.stringifyCollection(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:n,onComment:r})}};UE.YAMLMap=o$;UE.findPair=Ed});var Gc=I(s$=>{"use strict";var Dne=Ye(),Rne=Jo(),i$=fa();function One(t,e,r){let{keepUndefined:n,replacer:o}=r,i=new i$.YAMLMap(t),s=(a,c)=>{if(typeof o=="function")c=o.call(e,a,c);else if(Array.isArray(o)&&!o.includes(a))return;(c!==void 0||n)&&i.items.push(Rne.createPair(a,c,r))};if(e instanceof Map)for(let[a,c]of e)s(a,c);else if(e&&typeof e=="object")for(let a of Object.keys(e))s(a,e[a]);return typeof t.sortMapEntries=="function"&&i.items.sort(t.sortMapEntries),i}var Nne={collection:"map",createNode:One,default:!0,nodeClass:i$.YAMLMap,tag:"tag:yaml.org,2002:map",resolve(t,e){return Dne.isMap(t)||e("Expected a mapping for this tag"),t}};s$.map=Nne});var pa=I(c$=>{"use strict";var Lne=$E(),Fne=pd(),Zm=Ye(),Mne=kt(),qne=Hc(),a$=class extends Fne.Collection{constructor(e){super(Zm.SEQ,e);this.items=[]}static get tagName(){return"tag:yaml.org,2002:seq"}add(e){this.items.push(e)}delete(e){let r=eg(e);return typeof r!="number"?!1:this.items.splice(r,1).length>0}get(e,r){let n=eg(e);if(typeof n!="number")return;let o=this.items[n];return!r&&Zm.isScalar(o)?o.value:o}has(e){let r=eg(e);return typeof r=="number"&&r<this.items.length}set(e,r){let n=eg(e);if(typeof n!="number")throw new Error(`Expected a valid index, not ${e}.`);let o=this.items[n];Zm.isScalar(o)&&Mne.isScalarValue(r)?o.value=r:this.items[n]=r}toJSON(e,r){let n=[];r&&r.onCreate&&r.onCreate(n);let o=0;for(let i of this.items)n.push(qne.toJS(i,String(o++),r));return n}toString(e,r,n){return e?Lne.stringifyCollection(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:n,onComment:r}):JSON.stringify(this)}};function eg(t){let e=Zm.isScalar(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}c$.YAMLSeq=a$});var zc=I(u$=>{"use strict";var $ne=fd(),jne=Ye(),l$=pa();function Une(t,e,r){let{replacer:n}=r,o=new l$.YAMLSeq(t);if(e&&Symbol.iterator in Object(e)){let i=0;for(let s of e){if(typeof n=="function"){let a=e instanceof Set?s:String(i++);s=n.call(e,a,s)}o.items.push($ne.createNode(s,void 0,r))}}return o}var Bne={collection:"seq",createNode:Une,default:!0,nodeClass:l$.YAMLSeq,tag:"tag:yaml.org,2002:seq",resolve(t,e){return jne.isSeq(t)||e("Expected a sequence for this tag"),t}};u$.seq=Bne});var _d=I(d$=>{"use strict";var Hne=yd(),Vne={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,r,n){return e=Object.assign({actualString:!0},e),Hne.stringifyString(t,e,r,n)}};d$.string=Vne});var tg=I(h$=>{"use strict";var f$=kt(),p$={identify:t=>t==null,createNode:()=>new f$.Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new f$.Scalar(null),stringify:({source:t},e)=>t&&p$.test.test(t)?t:e.options.nullStr};h$.nullTag=p$});var BE=I(g$=>{"use strict";var Wne=kt(),m$={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new Wne.Scalar(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},r){if(t&&m$.test.test(t)){let n=t[0]==="t"||t[0]==="T";if(e===n)return t}return e?r.options.trueStr:r.options.falseStr}};g$.boolTag=m$});var Kc=I(v$=>{"use strict";function Gne({format:t,minFractionDigits:e,tag:r,value:n}){if(typeof n=="bigint")return String(n);let o=typeof n=="number"?n:Number(n);if(!isFinite(o))return isNaN(o)?".nan":o<0?"-.inf":".inf";let i=JSON.stringify(n);if(!t&&e&&(!r||r==="tag:yaml.org,2002:float")&&/^\d/.test(i)){let s=i.indexOf(".");s<0&&(s=i.length,i+=".");let a=e-(i.length-s-1);for(;a-- >0;)i+="0"}return i}v$.stringifyNumber=Gne});var VE=I(rg=>{"use strict";var zne=kt(),HE=Kc(),Kne={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:HE.stringifyNumber},Yne={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){let e=Number(t.value);return isFinite(e)?e.toExponential():HE.stringifyNumber(t)}},Jne={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){let e=new zne.Scalar(parseFloat(t)),r=t.indexOf(".");return r!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-r-1),e},stringify:HE.stringifyNumber};rg.float=Jne;rg.floatExp=Yne;rg.floatNaN=Kne});var GE=I(og=>{"use strict";var y$=Kc(),ng=t=>typeof t=="bigint"||Number.isInteger(t),WE=(t,e,r,{intAsBigInt:n})=>n?BigInt(t):parseInt(t.substring(e),r);function w$(t,e,r){let{value:n}=t;return ng(n)&&n>=0?r+n.toString(e):y$.stringifyNumber(t)}var Qne={identify:t=>ng(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,r)=>WE(t,2,8,r),stringify:t=>w$(t,8,"0o")},Xne={identify:ng,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,r)=>WE(t,0,10,r),stringify:y$.stringifyNumber},Zne={identify:t=>ng(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,r)=>WE(t,2,16,r),stringify:t=>w$(t,16,"0x")};og.int=Xne;og.intHex=Zne;og.intOct=Qne});var b$=I(C$=>{"use strict";var eoe=Gc(),toe=tg(),roe=zc(),noe=_d(),ooe=BE(),zE=VE(),KE=GE(),ioe=[eoe.map,roe.seq,noe.string,toe.nullTag,ooe.boolTag,KE.intOct,KE.int,KE.intHex,zE.floatNaN,zE.floatExp,zE.float];C$.schema=ioe});var S$=I(_$=>{"use strict";var soe=kt(),aoe=Gc(),coe=zc();function E$(t){return typeof t=="bigint"||Number.isInteger(t)}var ig=({value:t})=>JSON.stringify(t),loe=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:ig},{identify:t=>t==null,createNode:()=>new soe.Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:ig},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:t=>t==="true",stringify:ig},{identify:E$,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:r})=>r?BigInt(t):parseInt(t,10),stringify:({value:t})=>E$(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:ig}],uoe={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},doe=[aoe.map,coe.seq].concat(loe,uoe);_$.schema=doe});var JE=I(x$=>{"use strict";var YE=kt(),foe=yd(),poe={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof Buffer=="function")return Buffer.from(t,"base64");if(typeof atob=="function"){let r=atob(t.replace(/[\n\r]/g,"")),n=new Uint8Array(r.length);for(let o=0;o<r.length;++o)n[o]=r.charCodeAt(o);return n}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:r},n,o,i){let s=r,a;if(typeof Buffer=="function")a=s instanceof Buffer?s.toString("base64"):Buffer.from(s.buffer).toString("base64");else if(typeof btoa=="function"){let c="";for(let l=0;l<s.length;++l)c+=String.fromCharCode(s[l]);a=btoa(c)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e||(e=YE.Scalar.BLOCK_LITERAL),e!==YE.Scalar.QUOTE_DOUBLE){let c=Math.max(n.options.lineWidth-n.indent.length,n.options.minContentWidth),l=Math.ceil(a.length/c),u=new Array(l);for(let d=0,f=0;d<l;++d,f+=c)u[d]=a.substr(f,c);a=u.join(e===YE.Scalar.BLOCK_LITERAL?`
`:" ")}return foe.stringifyString({comment:t,type:e,value:a},n,o,i)}};x$.binary=poe});var cg=I(ag=>{"use strict";var sg=Ye(),QE=Jo(),hoe=kt(),moe=pa();function P$(t,e){if(sg.isSeq(t))for(let r=0;r<t.items.length;++r){let n=t.items[r];if(!sg.isPair(n)){if(sg.isMap(n)){n.items.length>1&&e("Each pair must have its own sequence indicator");let o=n.items[0]||new QE.Pair(new hoe.Scalar(null));if(n.commentBefore&&(o.key.commentBefore=o.key.commentBefore?`${n.commentBefore}
${o.key.commentBefore}`:n.commentBefore),n.comment){let i=o.value||o.key;i.comment=i.comment?`${n.comment}
${i.comment}`:n.comment}n=o}t.items[r]=sg.isPair(n)?n:new QE.Pair(n)}}else e("Expected a sequence for this tag");return t}function k$(t,e,r){let{replacer:n}=r,o=new moe.YAMLSeq(t);o.tag="tag:yaml.org,2002:pairs";let i=0;if(e&&Symbol.iterator in Object(e))for(let s of e){typeof n=="function"&&(s=n.call(e,String(i++),s));let a,c;if(Array.isArray(s))if(s.length===2)a=s[0],c=s[1];else throw new TypeError(`Expected [key, value] tuple: ${s}`);else if(s&&s instanceof Object){let l=Object.keys(s);if(l.length===1)a=l[0],c=s[a];else throw new TypeError(`Expected { key: value } tuple: ${s}`)}else a=s;o.items.push(QE.createPair(a,c,r))}return o}var goe={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:P$,createNode:k$};ag.createPairs=k$;ag.pairs=goe;ag.resolvePairs=P$});var e0=I(ZE=>{"use strict";var voe=pa(),XE=Hc(),I$=Ye(),Sd=fa(),T$=cg(),zi=class extends voe.YAMLSeq{constructor(){super();this.add=Sd.YAMLMap.prototype.add.bind(this),this.delete=Sd.YAMLMap.prototype.delete.bind(this),this.get=Sd.YAMLMap.prototype.get.bind(this),this.has=Sd.YAMLMap.prototype.has.bind(this),this.set=Sd.YAMLMap.prototype.set.bind(this),this.tag=zi.tag}toJSON(e,r){if(!r)return super.toJSON(e);let n=new Map;r&&r.onCreate&&r.onCreate(n);for(let o of this.items){let i,s;if(I$.isPair(o)?(i=XE.toJS(o.key,"",r),s=XE.toJS(o.value,i,r)):i=XE.toJS(o,"",r),n.has(i))throw new Error("Ordered maps must not include duplicate keys");n.set(i,s)}return n}};zi.tag="tag:yaml.org,2002:omap";var yoe={collection:"seq",identify:t=>t instanceof Map,nodeClass:zi,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){let r=T$.resolvePairs(t,e),n=[];for(let{key:o}of r.items)I$.isScalar(o)&&(n.includes(o.value)?e(`Ordered maps must not include duplicate keys: ${o.value}`):n.push(o.value));return Object.assign(new zi,r)},createNode(t,e,r){let n=T$.createPairs(t,e,r),o=new zi;return o.items=n.items,o}};ZE.YAMLOMap=zi;ZE.omap=yoe});var N$=I(t0=>{"use strict";var A$=kt();function D$({value:t,source:e},r){return e&&(t?R$:O$).test.test(e)?e:t?r.options.trueStr:r.options.falseStr}var R$={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new A$.Scalar(!0),stringify:D$},O$={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new A$.Scalar(!1),stringify:D$};t0.falseTag=O$;t0.trueTag=R$});var L$=I(lg=>{"use strict";var woe=kt(),r0=Kc(),Coe={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:r0.stringifyNumber},boe={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){let e=Number(t.value);return isFinite(e)?e.toExponential():r0.stringifyNumber(t)}},Eoe={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){let e=new woe.Scalar(parseFloat(t.replace(/_/g,""))),r=t.indexOf(".");if(r!==-1){let n=t.substring(r+1).replace(/_/g,"");n[n.length-1]==="0"&&(e.minFractionDigits=n.length)}return e},stringify:r0.stringifyNumber};lg.float=Eoe;lg.floatExp=boe;lg.floatNaN=Coe});var M$=I(Pd=>{"use strict";var F$=Kc(),xd=t=>typeof t=="bigint"||Number.isInteger(t);function ug(t,e,r,{intAsBigInt:n}){let o=t[0];if((o==="-"||o==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),n){switch(r){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}let s=BigInt(t);return o==="-"?BigInt(-1)*s:s}let i=parseInt(t,r);return o==="-"?-1*i:i}function n0(t,e,r){let{value:n}=t;if(xd(n)){let o=n.toString(e);return n<0?"-"+r+o.substr(1):r+o}return F$.stringifyNumber(t)}var _oe={identify:xd,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,r)=>ug(t,2,2,r),stringify:t=>n0(t,2,"0b")},Soe={identify:xd,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,r)=>ug(t,1,8,r),stringify:t=>n0(t,8,"0")},xoe={identify:xd,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,r)=>ug(t,0,10,r),stringify:F$.stringifyNumber},Poe={identify:xd,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,r)=>ug(t,2,16,r),stringify:t=>n0(t,16,"0x")};Pd.int=xoe;Pd.intBin=_oe;Pd.intHex=Poe;Pd.intOct=Soe});var i0=I(o0=>{"use strict";var dg=Ye(),fg=Jo(),pg=fa(),Ki=class extends pg.YAMLMap{constructor(e){super(e);this.tag=Ki.tag}add(e){let r;dg.isPair(e)?r=e:typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?r=new fg.Pair(e.key,null):r=new fg.Pair(e,null),pg.findPair(this.items,r.key)||this.items.push(r)}get(e,r){let n=pg.findPair(this.items,e);return!r&&dg.isPair(n)?dg.isScalar(n.key)?n.key.value:n.key:n}set(e,r){if(typeof r!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof r}`);let n=pg.findPair(this.items,e);n&&!r?this.items.splice(this.items.indexOf(n),1):!n&&r&&this.items.push(new fg.Pair(e))}toJSON(e,r){return super.toJSON(e,r,Set)}toString(e,r,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),r,n);throw new Error("Set items must all have null values")}};Ki.tag="tag:yaml.org,2002:set";var koe={collection:"map",identify:t=>t instanceof Set,nodeClass:Ki,default:!1,tag:"tag:yaml.org,2002:set",resolve(t,e){if(dg.isMap(t)){if(t.hasAllNullValues(!0))return Object.assign(new Ki,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t},createNode(t,e,r){let{replacer:n}=r,o=new Ki(t);if(e&&Symbol.iterator in Object(e))for(let i of e)typeof n=="function"&&(i=n.call(e,i,i)),o.items.push(fg.createPair(i,null,r));return o}};o0.YAMLSet=Ki;o0.set=koe});var a0=I(hg=>{"use strict";var Ioe=Kc();function s0(t,e){let r=t[0],n=r==="-"||r==="+"?t.substring(1):t,o=s=>e?BigInt(s):Number(s),i=n.replace(/_/g,"").split(":").reduce((s,a)=>s*o(60)+o(a),o(0));return r==="-"?o(-1)*i:i}function q$(t){let{value:e}=t,r=s=>s;if(typeof e=="bigint")r=s=>BigInt(s);else if(isNaN(e)||!isFinite(e))return Ioe.stringifyNumber(t);let n="";e<0&&(n="-",e*=r(-1));let o=r(60),i=[e%o];return e<60?i.unshift(0):(e=(e-i[0])/o,i.unshift(e%o),e>=60&&(e=(e-i[0])/o,i.unshift(e))),n+i.map(s=>s<10?"0"+String(s):String(s)).join(":").replace(/000000\d*$/,"")}var Toe={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:r})=>s0(t,r),stringify:q$},Aoe={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>s0(t,!1),stringify:q$},$$={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){let e=t.match($$.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");let[,r,n,o,i,s,a]=e.map(Number),c=e[7]?Number((e[7]+"00").substr(1,3)):0,l=Date.UTC(r,n-1,o,i||0,s||0,a||0,c),u=e[8];if(u&&u!=="Z"){let d=s0(u,!1);Math.abs(d)<30&&(d*=60),l-=6e4*d}return new Date(l)},stringify:({value:t})=>t.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")};hg.floatTime=Aoe;hg.intTime=Toe;hg.timestamp=$$});var B$=I(U$=>{"use strict";var Doe=Gc(),Roe=tg(),Ooe=zc(),Noe=_d(),Loe=JE(),j$=N$(),c0=L$(),mg=M$(),Foe=e0(),Moe=cg(),qoe=i0(),l0=a0(),$oe=[Doe.map,Ooe.seq,Noe.string,Roe.nullTag,j$.trueTag,j$.falseTag,mg.intBin,mg.intOct,mg.int,mg.intHex,c0.floatNaN,c0.floatExp,c0.float,Loe.binary,Foe.omap,Moe.pairs,qoe.set,l0.intTime,l0.floatTime,l0.timestamp];U$.schema=$oe});var X$=I(f0=>{"use strict";var H$=Gc(),joe=tg(),V$=zc(),Uoe=_d(),Boe=BE(),u0=VE(),d0=GE(),Hoe=b$(),Voe=S$(),W$=JE(),G$=e0(),z$=cg(),K$=B$(),Y$=i0(),gg=a0(),J$=new Map([["core",Hoe.schema],["failsafe",[H$.map,V$.seq,Uoe.string]],["json",Voe.schema],["yaml11",K$.schema],["yaml-1.1",K$.schema]]),Q$={binary:W$.binary,bool:Boe.boolTag,float:u0.float,floatExp:u0.floatExp,floatNaN:u0.floatNaN,floatTime:gg.floatTime,int:d0.int,intHex:d0.intHex,intOct:d0.intOct,intTime:gg.intTime,map:H$.map,null:joe.nullTag,omap:G$.omap,pairs:z$.pairs,seq:V$.seq,set:Y$.set,timestamp:gg.timestamp},Woe={"tag:yaml.org,2002:binary":W$.binary,"tag:yaml.org,2002:omap":G$.omap,"tag:yaml.org,2002:pairs":z$.pairs,"tag:yaml.org,2002:set":Y$.set,"tag:yaml.org,2002:timestamp":gg.timestamp};function Goe(t,e){let r=J$.get(e);if(!r)if(Array.isArray(t))r=[];else{let n=Array.from(J$.keys()).filter(o=>o!=="yaml11").map(o=>JSON.stringify(o)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${n} or define customTags array`)}if(Array.isArray(t))for(let n of t)r=r.concat(n);else typeof t=="function"&&(r=t(r.slice()));return r.map(n=>{if(typeof n!="string")return n;let o=Q$[n];if(o)return o;let i=Object.keys(Q$).map(s=>JSON.stringify(s)).join(", ");throw new Error(`Unknown custom tag "${n}"; use one of ${i}`)})}f0.coreKnownTags=Woe;f0.getTags=Goe});var h0=I(Z$=>{"use strict";var p0=Ye(),zoe=Gc(),Koe=zc(),Yoe=_d(),vg=X$(),Joe=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0,yg=class{constructor({compat:e,customTags:r,merge:n,resolveKnownTags:o,schema:i,sortMapEntries:s,toStringDefaults:a}){this.compat=Array.isArray(e)?vg.getTags(e,"compat"):e?vg.getTags(null,e):null,this.merge=!!n,this.name=typeof i=="string"&&i||"core",this.knownTags=o?vg.coreKnownTags:{},this.tags=vg.getTags(r,this.name),this.toStringOptions=a||null,Object.defineProperty(this,p0.MAP,{value:zoe.map}),Object.defineProperty(this,p0.SCALAR,{value:Yoe.string}),Object.defineProperty(this,p0.SEQ,{value:Koe.seq}),this.sortMapEntries=s===!0?Joe:s||null}clone(){let e=Object.create(yg.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}};Z$.Schema=yg});var tj=I(ej=>{"use strict";var Qoe=Ye(),m0=Vc(),wg=hd();function Xoe(t,e){let r=[],n=e.directives===!0;if(e.directives!==!1&&t.directives){let l=t.directives.toString(t);l?(r.push(l),n=!0):t.directives.marker&&(n=!0)}n&&r.push("---");let o=m0.createStringifyContext(t,e),{commentString:i}=o.options;if(t.commentBefore){r.length!==1&&r.unshift("");let l=i(t.commentBefore);r.unshift(wg.indentComment(l,""))}let s=!1,a=null;if(t.contents){if(Qoe.isNode(t.contents)){if(t.contents.spaceBefore&&n&&r.push(""),t.contents.commentBefore){let d=i(t.contents.commentBefore);r.push(wg.indentComment(d,""))}o.forceBlockIndent=!!t.comment,a=t.contents.comment}let l=a?void 0:()=>s=!0,u=m0.stringify(t.contents,o,()=>a=null,l);a&&(u+=wg.lineComment(u,"",i(a))),(u[0]==="|"||u[0]===">")&&r[r.length-1]==="---"?r[r.length-1]=`--- ${u}`:r.push(u)}else r.push(m0.stringify(t.contents,o));let c=t.comment;return c&&s&&(c=c.replace(/^\n+/,"")),c&&((!s||a)&&r[r.length-1]!==""&&r.push(""),r.push(wg.indentComment(i(c),""))),r.join(`
`)+`
`}ej.stringifyDocument=Xoe});var nj=I(rj=>{"use strict";function kd(t,e,r,n){if(n&&typeof n=="object")if(Array.isArray(n))for(let o=0,i=n.length;o<i;++o){let s=n[o],a=kd(t,n,String(o),s);a===void 0?delete n[o]:a!==s&&(n[o]=a)}else if(n instanceof Map)for(let o of Array.from(n.keys())){let i=n.get(o),s=kd(t,n,o,i);s===void 0?n.delete(o):s!==i&&n.set(o,s)}else if(n instanceof Set)for(let o of Array.from(n)){let i=kd(t,n,o,o);i===void 0?n.delete(o):i!==o&&(n.delete(o),n.add(i))}else for(let[o,i]of Object.entries(n)){let s=kd(t,n,o,i);s===void 0?delete n[o]:s!==i&&(n[o]=s)}return t.call(e,r,n)}rj.applyReviver=kd});var Id=I(oj=>{"use strict";var Zoe=dd(),Yc=pd(),En=Ye(),eie=Jo(),tie=Hc(),rie=Qm(),nie=h0(),oie=Vc(),iie=tj(),g0=Bm(),sie=nj(),aie=fd(),v0=PE(),Cg=class{constructor(e,r,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,En.NODE_TYPE,{value:En.DOC});let o=null;typeof r=="function"||Array.isArray(r)?o=r:n===void 0&&r&&(n=r,r=void 0);let i=Object.assign({},rie.defaultOptions,n);this.options=i;let{version:s}=i;(n==null?void 0:n.directives)?(this.directives=n.directives.atDocument(),this.directives.yaml.explicit&&(s=this.directives.yaml.version)):this.directives=new v0.Directives({version:s}),this.setSchema(s,n),e===void 0?this.contents=null:this.contents=this.createNode(e,o,n)}clone(){let e=Object.create(Cg.prototype,{[En.NODE_TYPE]:{value:En.DOC}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=En.isNode(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){Jc(this.contents)&&this.contents.add(e)}addIn(e,r){Jc(this.contents)&&this.contents.addIn(e,r)}createAlias(e,r){if(!e.anchor){let n=g0.anchorNames(this);e.anchor=!r||n.has(r)?g0.findNewAnchor(r||"a",n):r}return new Zoe.Alias(e.anchor)}createNode(e,r,n){let o;if(typeof r=="function")e=r.call({"":e},"",e),o=r;else if(Array.isArray(r)){let g=y=>typeof y=="number"||y instanceof String||y instanceof Number,v=r.filter(g).map(String);v.length>0&&(r=r.concat(v)),o=r}else n===void 0&&r&&(n=r,r=void 0);let{aliasDuplicateObjects:i,anchorPrefix:s,flow:a,keepUndefined:c,onTagObj:l,tag:u}=n||{},{onAnchor:d,setAnchors:f,sourceObjects:p}=g0.createNodeAnchors(this,s||"a"),h={aliasDuplicateObjects:i!=null?i:!0,keepUndefined:c!=null?c:!1,onAnchor:d,onTagObj:l,replacer:o,schema:this.schema,sourceObjects:p},m=aie.createNode(e,u,h);return a&&En.isCollection(m)&&(m.flow=!0),f(),m}createPair(e,r,n={}){let o=this.createNode(e,null,n),i=this.createNode(r,null,n);return new eie.Pair(o,i)}delete(e){return Jc(this.contents)?this.contents.delete(e):!1}deleteIn(e){return Yc.isEmptyPath(e)?this.contents==null?!1:(this.contents=null,!0):Jc(this.contents)?this.contents.deleteIn(e):!1}get(e,r){return En.isCollection(this.contents)?this.contents.get(e,r):void 0}getIn(e,r){return Yc.isEmptyPath(e)?!r&&En.isScalar(this.contents)?this.contents.value:this.contents:En.isCollection(this.contents)?this.contents.getIn(e,r):void 0}has(e){return En.isCollection(this.contents)?this.contents.has(e):!1}hasIn(e){return Yc.isEmptyPath(e)?this.contents!==void 0:En.isCollection(this.contents)?this.contents.hasIn(e):!1}set(e,r){this.contents==null?this.contents=Yc.collectionFromPath(this.schema,[e],r):Jc(this.contents)&&this.contents.set(e,r)}setIn(e,r){Yc.isEmptyPath(e)?this.contents=r:this.contents==null?this.contents=Yc.collectionFromPath(this.schema,Array.from(e),r):Jc(this.contents)&&this.contents.setIn(e,r)}setSchema(e,r={}){typeof e=="number"&&(e=String(e));let n;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new v0.Directives({version:"1.1"}),n={merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":this.directives?this.directives.yaml.version="1.2":this.directives=new v0.Directives({version:"1.2"}),n={merge:!1,resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,n=null;break;default:{let o=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${o}`)}}if(r.schema instanceof Object)this.schema=r.schema;else if(n)this.schema=new nie.Schema(Object.assign(n,r));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:r,mapAsMap:n,maxAliasCount:o,onAnchor:i,reviver:s}={}){let a={anchors:new Map,doc:this,keep:!e,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof o=="number"?o:100,stringify:oie.stringify},c=tie.toJS(this.contents,r||"",a);if(typeof i=="function")for(let{count:l,res:u}of a.anchors.values())i(u,l);return typeof s=="function"?sie.applyReviver(s,{"":c},"",c):c}toJSON(e,r){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:r})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){let r=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${r}`)}return iie.stringifyDocument(this,e)}};function Jc(t){if(En.isCollection(t))return!0;throw new Error("Expected a YAML collection as document contents")}oj.Document=Cg});var Ad=I(Td=>{"use strict";var bg=class extends Error{constructor(e,r,n,o){super();this.name=e,this.code=n,this.message=o,this.pos=r}},ij=class extends bg{constructor(e,r,n){super("YAMLParseError",e,r,n)}},sj=class extends bg{constructor(e,r,n){super("YAMLWarning",e,r,n)}},cie=(t,e)=>r=>{if(r.pos[0]===-1)return;r.linePos=r.pos.map(a=>e.linePos(a));let{line:n,col:o}=r.linePos[0];r.message+=` at line ${n}, column ${o}`;let i=o-1,s=t.substring(e.lineStarts[n-1],e.lineStarts[n]).replace(/[\n\r]+$/,"");if(i>=60&&s.length>80){let a=Math.min(i-39,s.length-79);s="\u2026"+s.substring(a),i-=a-1}if(s.length>80&&(s=s.substring(0,79)+"\u2026"),n>1&&/^ *$/.test(s.substring(0,i))){let a=t.substring(e.lineStarts[n-2],e.lineStarts[n-1]);a.length>80&&(a=a.substring(0,79)+`\u2026
`),s=a+s}if(/[^ ]/.test(s)){let a=1,c=r.linePos[1];c&&c.line===n&&c.col>o&&(a=Math.min(c.col-o,80-i));let l=" ".repeat(i)+"^".repeat(a);r.message+=`:

${s}
${l}
`}};Td.YAMLError=bg;Td.YAMLParseError=ij;Td.YAMLWarning=sj;Td.prettifyError=cie});var Dd=I(aj=>{"use strict";function lie(t,{flow:e,indicator:r,next:n,offset:o,onError:i,startOnNewline:s}){let a=!1,c=s,l=s,u="",d="",f=!1,p=!1,h=null,m=null,g=null,v=null,y=null;for(let _ of t)switch(p&&(_.type!=="space"&&_.type!=="newline"&&_.type!=="comma"&&i(_.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),p=!1),_.type){case"space":!e&&c&&r!=="doc-start"&&_.source[0]==="	"&&i(_,"TAB_AS_INDENT","Tabs are not allowed as indentation"),l=!0;break;case"comment":{l||i(_,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let P=_.source.substring(1)||" ";u?u+=d+P:u=P,d="",c=!1;break}case"newline":c?u?u+=_.source:a=!0:d+=_.source,c=!0,f=!0,l=!0;break;case"anchor":h&&i(_,"MULTIPLE_ANCHORS","A node can have at most one anchor"),h=_,y===null&&(y=_.offset),c=!1,l=!1,p=!0;break;case"tag":{m&&i(_,"MULTIPLE_TAGS","A node can have at most one tag"),m=_,y===null&&(y=_.offset),c=!1,l=!1,p=!0;break}case r:(h||m)&&i(_,"BAD_PROP_ORDER",`Anchors and tags must be after the ${_.source} indicator`),v&&i(_,"UNEXPECTED_TOKEN",`Unexpected ${_.source} in ${e||"collection"}`),v=_,c=!1,l=!1;break;case"comma":if(e){g&&i(_,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),g=_,c=!1,l=!1;break}default:i(_,"UNEXPECTED_TOKEN",`Unexpected ${_.type} token`),c=!1,l=!1}let b=t[t.length-1],C=b?b.offset+b.source.length:o;return p&&n&&n.type!=="space"&&n.type!=="newline"&&n.type!=="comma"&&(n.type!=="scalar"||n.source!=="")&&i(n.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:g,found:v,spaceBefore:a,comment:u,hasNewline:f,anchor:h,tag:m,end:C,start:y!=null?y:C}}aj.resolveProps=lie});var Eg=I(cj=>{"use strict";function y0(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(let e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(let e of t.items){for(let r of e.start)if(r.type==="newline")return!0;if(e.sep){for(let r of e.sep)if(r.type==="newline")return!0}if(y0(e.key)||y0(e.value))return!0}return!1;default:return!0}}cj.containsNewline=y0});var w0=I(lj=>{"use strict";var uie=Eg();function die(t,e,r){if((e==null?void 0:e.type)==="flow-collection"){let n=e.end[0];n.indent===t&&(n.source==="]"||n.source==="}")&&uie.containsNewline(e)&&r(n,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}lj.flowIndentCheck=die});var C0=I(dj=>{"use strict";var uj=Ye();function fie(t,e,r){let{uniqueKeys:n}=t.options;if(n===!1)return!1;let o=typeof n=="function"?n:(i,s)=>i===s||uj.isScalar(i)&&uj.isScalar(s)&&i.value===s.value&&!(i.value==="<<"&&t.schema.merge);return e.some(i=>o(i.key,r))}dj.mapIncludes=fie});var vj=I(gj=>{"use strict";var fj=Jo(),pie=fa(),pj=Dd(),hie=Eg(),hj=w0(),mie=C0(),mj="All mapping items must start at the same column";function gie({composeNode:t,composeEmptyNode:e},r,n,o){var i;let s=new pie.YAMLMap(r.schema);r.atRoot&&(r.atRoot=!1);let a=n.offset;for(let c of n.items){let{start:l,key:u,sep:d,value:f}=c,p=pj.resolveProps(l,{indicator:"explicit-key-ind",next:u||(d==null?void 0:d[0]),offset:a,onError:o,startOnNewline:!0}),h=!p.found;if(h){if(u&&(u.type==="block-seq"?o(a,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in u&&u.indent!==n.indent&&o(a,"BAD_INDENT",mj)),!p.anchor&&!p.tag&&!d){p.comment&&(s.comment?s.comment+=`
`+p.comment:s.comment=p.comment);continue}}else((i=p.found)===null||i===void 0?void 0:i.indent)!==n.indent&&o(a,"BAD_INDENT",mj);h&&hie.containsNewline(u)&&o(u,"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line");let m=p.end,g=u?t(r,u,p,o):e(r,m,l,null,p,o);r.schema.compat&&hj.flowIndentCheck(n.indent,u,o),mie.mapIncludes(r,s.items,g)&&o(m,"DUPLICATE_KEY","Map keys must be unique");let v=pj.resolveProps(d||[],{indicator:"map-value-ind",next:f,offset:g.range[2],onError:o,startOnNewline:!u||u.type==="block-scalar"});if(a=v.end,v.found){h&&((f==null?void 0:f.type)==="block-map"&&!v.hasNewline&&o(a,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),r.options.strict&&p.start<v.found.offset-1024&&o(g.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));let y=f?t(r,f,v,o):e(r,a,d,null,v,o);r.schema.compat&&hj.flowIndentCheck(n.indent,f,o),a=y.range[2];let b=new fj.Pair(g,y);r.options.keepSourceTokens&&(b.srcToken=c),s.items.push(b)}else{h&&o(g.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),v.comment&&(g.comment?g.comment+=`
`+v.comment:g.comment=v.comment);let y=new fj.Pair(g);r.options.keepSourceTokens&&(y.srcToken=c),s.items.push(y)}}return s.range=[n.offset,a,a],s}gj.resolveBlockMap=gie});var wj=I(yj=>{"use strict";var vie=pa(),yie=Dd(),wie=w0();function Cie({composeNode:t,composeEmptyNode:e},r,n,o){let i=new vie.YAMLSeq(r.schema);r.atRoot&&(r.atRoot=!1);let s=n.offset;for(let{start:a,value:c}of n.items){let l=yie.resolveProps(a,{indicator:"seq-item-ind",next:c,offset:s,onError:o,startOnNewline:!0});if(s=l.end,!l.found)if(l.anchor||l.tag||c)c&&c.type==="block-seq"?o(s,"BAD_INDENT","All sequence items must start at the same column"):o(s,"MISSING_CHAR","Sequence item without - indicator");else{l.comment&&(i.comment=l.comment);continue}let u=c?t(r,c,l,o):e(r,s,a,null,l,o);r.schema.compat&&wie.flowIndentCheck(n.indent,c,o),s=u.range[2],i.items.push(u)}return i.range=[n.offset,s,s],i}yj.resolveBlockSeq=Cie});var Qc=I(Cj=>{"use strict";function bie(t,e,r,n){let o="";if(t){let i=!1,s="";for(let a of t){let{source:c,type:l}=a;switch(l){case"space":i=!0;break;case"comment":{r&&!i&&n(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let u=c.substring(1)||" ";o?o+=s+u:o=u,s="";break}case"newline":o&&(s+=c),i=!0;break;default:n(a,"UNEXPECTED_TOKEN",`Unexpected ${l} at node end`)}e+=c.length}}return{comment:o,offset:e}}Cj.resolveEnd=bie});var Sj=I(_j=>{"use strict";var Eie=Ye(),_ie=Jo(),bj=fa(),Sie=pa(),xie=Qc(),Ej=Dd(),Pie=Eg(),kie=C0(),b0="Block collections are not allowed within flow collections",E0=t=>t&&(t.type==="block-map"||t.type==="block-seq");function Iie({composeNode:t,composeEmptyNode:e},r,n,o){let i=n.start.source==="{",s=i?"flow map":"flow sequence",a=i?new bj.YAMLMap(r.schema):new Sie.YAMLSeq(r.schema);a.flow=!0;let c=r.atRoot;c&&(r.atRoot=!1);let l=n.offset+n.start.source.length;for(let h=0;h<n.items.length;++h){let m=n.items[h],{start:g,key:v,sep:y,value:b}=m,C=Ej.resolveProps(g,{flow:s,indicator:"explicit-key-ind",next:v||(y==null?void 0:y[0]),offset:l,onError:o,startOnNewline:!1});if(!C.found){if(!C.anchor&&!C.tag&&!y&&!b){h===0&&C.comma?o(C.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`):h<n.items.length-1&&o(C.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${s}`),C.comment&&(a.comment?a.comment+=`
`+C.comment:a.comment=C.comment),l=C.end;continue}!i&&r.options.strict&&Pie.containsNewline(v)&&o(v,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(h===0)C.comma&&o(C.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`);else if(C.comma||o(C.start,"MISSING_CHAR",`Missing , between ${s} items`),C.comment){let _="";e:for(let P of g)switch(P.type){case"comma":case"space":break;case"comment":_=P.source.substring(1);break e;default:break e}if(_){let P=a.items[a.items.length-1];Eie.isPair(P)&&(P=P.value||P.key),P.comment?P.comment+=`
`+_:P.comment=_,C.comment=C.comment.substring(_.length+1)}}if(!i&&!y&&!C.found){let _=b?t(r,b,C,o):e(r,C.end,y,null,C,o);a.items.push(_),l=_.range[2],E0(b)&&o(_.range,"BLOCK_IN_FLOW",b0)}else{let _=C.end,P=v?t(r,v,C,o):e(r,_,g,null,C,o);E0(v)&&o(P.range,"BLOCK_IN_FLOW",b0);let S=Ej.resolveProps(y||[],{flow:s,indicator:"map-value-ind",next:b,offset:P.range[2],onError:o,startOnNewline:!1});if(S.found){if(!i&&!C.found&&r.options.strict){if(y)for(let A of y){if(A===S.found)break;if(A.type==="newline"){o(A,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}C.start<S.found.offset-1024&&o(S.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else b&&("source"in b&&b.source&&b.source[0]===":"?o(b,"MISSING_CHAR",`Missing space after : in ${s}`):o(S.start,"MISSING_CHAR",`Missing , or : between ${s} items`));let k=b?t(r,b,S,o):S.found?e(r,S.end,y,null,S,o):null;k?E0(b)&&o(k.range,"BLOCK_IN_FLOW",b0):S.comment&&(P.comment?P.comment+=`
`+S.comment:P.comment=S.comment);let T=new _ie.Pair(P,k);if(r.options.keepSourceTokens&&(T.srcToken=m),i){let A=a;kie.mapIncludes(r,A.items,P)&&o(_,"DUPLICATE_KEY","Map keys must be unique"),A.items.push(T)}else{let A=new bj.YAMLMap(r.schema);A.flow=!0,A.items.push(T),a.items.push(A)}l=k?k.range[2]:S.end}}let u=i?"}":"]",[d,...f]=n.end,p=l;if(d&&d.source===u)p=d.offset+d.source.length;else{let h=s[0].toUpperCase()+s.substring(1),m=c?`${h} must end with a ${u}`:`${h} in block collection must be sufficiently indented and end with a ${u}`;o(l,c?"MISSING_CHAR":"BAD_INDENT",m),d&&d.source.length!==1&&f.unshift(d)}if(f.length>0){let h=xie.resolveEnd(f,p,r.options.strict,o);h.comment&&(a.comment?a.comment+=`
`+h.comment:a.comment=h.comment),a.range=[n.offset,p,h.offset]}else a.range=[n.offset,p,p];return a}_j.resolveFlowCollection=Iie});var kj=I(Pj=>{"use strict";var xj=Ye(),Tie=kt(),Aie=vj(),Die=wj(),Rie=Sj();function Oie(t,e,r,n,o){let i;switch(r.type){case"block-map":{i=Aie.resolveBlockMap(t,e,r,o);break}case"block-seq":{i=Die.resolveBlockSeq(t,e,r,o);break}case"flow-collection":{i=Rie.resolveFlowCollection(t,e,r,o);break}}if(!n)return i;let s=e.directives.tagName(n.source,f=>o(n,"TAG_RESOLVE_FAILED",f));if(!s)return i;let a=i.constructor;if(s==="!"||s===a.tagName)return i.tag=a.tagName,i;let c=xj.isMap(i)?"map":"seq",l=e.schema.tags.find(f=>f.collection===c&&f.tag===s);if(!l){let f=e.schema.knownTags[s];if(f&&f.collection===c)e.schema.tags.push(Object.assign({},f,{default:!1})),l=f;else return o(n,"TAG_RESOLVE_FAILED",`Unresolved tag: ${s}`,!0),i.tag=s,i}let u=l.resolve(i,f=>o(n,"TAG_RESOLVE_FAILED",f),e.options),d=xj.isNode(u)?u:new Tie.Scalar(u);return d.range=i.range,d.tag=s,(l==null?void 0:l.format)&&(d.format=l.format),d}Pj.composeCollection=Oie});var S0=I(Ij=>{"use strict";var _0=kt();function Nie(t,e,r){let n=t.offset,o=Lie(t,e,r);if(!o)return{value:"",type:null,comment:"",range:[n,n,n]};let i=o.mode===">"?_0.Scalar.BLOCK_FOLDED:_0.Scalar.BLOCK_LITERAL,s=t.source?Fie(t.source):[],a=s.length;for(let m=s.length-1;m>=0;--m){let g=s[m][1];if(g===""||g==="\r")a=m;else break}if(!t.source||a===0){let m=o.chomp==="+"?`
`.repeat(Math.max(0,s.length-1)):"",g=n+o.length;return t.source&&(g+=t.source.length),{value:m,type:i,comment:o.comment,range:[n,g,g]}}let c=t.indent+o.indent,l=t.offset+o.length,u=0;for(let m=0;m<a;++m){let[g,v]=s[m];if(v===""||v==="\r")o.indent===0&&g.length>c&&(c=g.length);else{if(g.length<c){let y="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";r(l+g.length,"MISSING_CHAR",y)}o.indent===0&&(c=g.length),u=m;break}l+=g.length+v.length+1}let d="",f="",p=!1;for(let m=0;m<u;++m)d+=s[m][0].slice(c)+`
`;for(let m=u;m<a;++m){let[g,v]=s[m];l+=g.length+v.length+1;let y=v[v.length-1]==="\r";if(y&&(v=v.slice(0,-1)),v&&g.length<c){let C=`Block scalar lines must not be less indented than their ${o.indent?"explicit indentation indicator":"first line"}`;r(l-v.length-(y?2:1),"BAD_INDENT",C),g=""}i===_0.Scalar.BLOCK_LITERAL?(d+=f+g.slice(c)+v,f=`
`):g.length>c||v[0]==="	"?(f===" "?f=`
`:!p&&f===`
`&&(f=`

`),d+=f+g.slice(c)+v,f=`
`,p=!0):v===""?f===`
`?d+=`
`:f=`
`:(d+=f+v,f=" ",p=!1)}switch(o.chomp){case"-":break;case"+":for(let m=a;m<s.length;++m)d+=`
`+s[m][0].slice(c);d[d.length-1]!==`
`&&(d+=`
`);break;default:d+=`
`}let h=n+o.length+t.source.length;return{value:d,type:i,comment:o.comment,range:[n,h,h]}}function Lie({offset:t,props:e},r,n){if(e[0].type!=="block-scalar-header")return n(e[0],"IMPOSSIBLE","Block scalar header not found"),null;let{source:o}=e[0],i=o[0],s=0,a="",c=-1;for(let f=1;f<o.length;++f){let p=o[f];if(!a&&(p==="-"||p==="+"))a=p;else{let h=Number(p);!s&&h?s=h:c===-1&&(c=t+f)}}c!==-1&&n(c,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${o}`);let l=!1,u="",d=o.length;for(let f=1;f<e.length;++f){let p=e[f];switch(p.type){case"space":l=!0;case"newline":d+=p.source.length;break;case"comment":r&&!l&&n(p,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),d+=p.source.length,u=p.source.substring(1);break;case"error":n(p,"UNEXPECTED_TOKEN",p.message),d+=p.source.length;break;default:{let h=`Unexpected token in block scalar header: ${p.type}`;n(p,"UNEXPECTED_TOKEN",h);let m=p.source;m&&typeof m=="string"&&(d+=m.length)}}}return{mode:i,indent:s,chomp:a,comment:u,length:d}}function Fie(t){let e=t.split(/\n( *)/),r=e[0],n=r.match(/^( *)/),i=[n&&n[1]?[n[1],r.slice(n[1].length)]:["",r]];for(let s=1;s<e.length;s+=2)i.push([e[s],e[s+1]]);return i}Ij.resolveBlockScalar=Nie});var P0=I(Aj=>{"use strict";var x0=kt(),Mie=Qc();function qie(t,e,r){let{offset:n,type:o,source:i,end:s}=t,a,c,l=(f,p,h)=>r(n+f,p,h);switch(o){case"scalar":a=x0.Scalar.PLAIN,c=$ie(i,l);break;case"single-quoted-scalar":a=x0.Scalar.QUOTE_SINGLE,c=jie(i,l);break;case"double-quoted-scalar":a=x0.Scalar.QUOTE_DOUBLE,c=Uie(i,l);break;default:return r(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${o}`),{value:"",type:null,comment:"",range:[n,n+i.length,n+i.length]}}let u=n+i.length,d=Mie.resolveEnd(s,u,e,r);return{value:c,type:a,comment:d.comment,range:[n,u,d.offset]}}function $ie(t,e){let r="";switch(t[0]){case"	":r="a tab character";break;case",":r="flow indicator character ,";break;case"%":r="directive indicator character %";break;case"|":case">":{r=`block scalar indicator ${t[0]}`;break}case"@":case"`":{r=`reserved character ${t[0]}`;break}}return r&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${r}`),Tj(t)}function jie(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),Tj(t.slice(1,-1)).replace(/''/g,"'")}function Tj(t){let e,r;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),r=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,r=/[ \t]*(.*?)[ \t]*\r?\n/sy}let n=e.exec(t);if(!n)return t;let o=n[1],i=" ",s=e.lastIndex;for(r.lastIndex=s;n=r.exec(t);)n[1]===""?i===`
`?o+=i:i=`
`:(o+=i+n[1],i=" "),s=r.lastIndex;let a=/[ \t]*(.*)/sy;return a.lastIndex=s,n=a.exec(t),o+i+(n&&n[1]||"")}function Uie(t,e){let r="";for(let n=1;n<t.length-1;++n){let o=t[n];if(!(o==="\r"&&t[n+1]===`
`))if(o===`
`){let{fold:i,offset:s}=Bie(t,n);r+=i,n=s}else if(o==="\\"){let i=t[++n],s=Hie[i];if(s)r+=s;else if(i===`
`)for(i=t[n+1];i===" "||i==="	";)i=t[++n+1];else if(i==="\r"&&t[n+1]===`
`)for(i=t[++n+1];i===" "||i==="	";)i=t[++n+1];else if(i==="x"||i==="u"||i==="U"){let a={x:2,u:4,U:8}[i];r+=Vie(t,n+1,a,e),n+=a}else{let a=t.substr(n-1,2);e(n-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),r+=a}}else if(o===" "||o==="	"){let i=n,s=t[n+1];for(;s===" "||s==="	";)s=t[++n+1];s!==`
`&&!(s==="\r"&&t[n+2]===`
`)&&(r+=n>i?t.slice(i,n+1):o)}else r+=o}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),r}function Bie(t,e){let r="",n=t[e+1];for(;(n===" "||n==="	"||n===`
`||n==="\r")&&!(n==="\r"&&t[e+2]!==`
`);)n===`
`&&(r+=`
`),e+=1,n=t[e+1];return r||(r=" "),{fold:r,offset:e}}var Hie={"0":"\0",a:"\x07",b:"\b",e:"",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"\x85",_:"\xA0",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function Vie(t,e,r,n){let o=t.substr(e,r),s=o.length===r&&/^[0-9a-fA-F]+$/.test(o)?parseInt(o,16):NaN;if(isNaN(s)){let a=t.substr(e-2,r+2);return n(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),a}return String.fromCodePoint(s)}Aj.resolveFlowScalar=qie});var Oj=I(Rj=>{"use strict";var Xc=Ye(),Dj=kt(),Wie=S0(),Gie=P0();function zie(t,e,r,n){let{value:o,type:i,comment:s,range:a}=e.type==="block-scalar"?Wie.resolveBlockScalar(e,t.options.strict,n):Gie.resolveFlowScalar(e,t.options.strict,n),c=r?t.directives.tagName(r.source,d=>n(r,"TAG_RESOLVE_FAILED",d)):null,l=r&&c?Kie(t.schema,o,c,r,n):e.type==="scalar"?Yie(t,o,e,n):t.schema[Xc.SCALAR],u;try{let d=l.resolve(o,f=>n(r||e,"TAG_RESOLVE_FAILED",f),t.options);u=Xc.isScalar(d)?d:new Dj.Scalar(d)}catch(d){let f=d instanceof Error?d.message:String(d);n(r||e,"TAG_RESOLVE_FAILED",f),u=new Dj.Scalar(o)}return u.range=a,u.source=o,i&&(u.type=i),c&&(u.tag=c),l.format&&(u.format=l.format),s&&(u.comment=s),u}function Kie(t,e,r,n,o){var i;if(r==="!")return t[Xc.SCALAR];let s=[];for(let c of t.tags)if(!c.collection&&c.tag===r)if(c.default&&c.test)s.push(c);else return c;for(let c of s)if((i=c.test)===null||i===void 0?void 0:i.test(e))return c;let a=t.knownTags[r];return a&&!a.collection?(t.tags.push(Object.assign({},a,{default:!1,test:void 0})),a):(o(n,"TAG_RESOLVE_FAILED",`Unresolved tag: ${r}`,r!=="tag:yaml.org,2002:str"),t[Xc.SCALAR])}function Yie({directives:t,schema:e},r,n,o){let i=e.tags.find(s=>{var a;return s.default&&((a=s.test)===null||a===void 0?void 0:a.test(r))})||e[Xc.SCALAR];if(e.compat){let s=e.compat.find(a=>{var c;return a.default&&((c=a.test)===null||c===void 0?void 0:c.test(r))})||e[Xc.SCALAR];if(i.tag!==s.tag){let a=t.tagString(i.tag),c=t.tagString(s.tag),l=`Value may be parsed as either ${a} or ${c}`;o(n,"TAG_RESOLVE_FAILED",l,!0)}}return i}Rj.composeScalar=zie});var Lj=I(Nj=>{"use strict";function Jie(t,e,r){if(e){r===null&&(r=e.length);for(let n=r-1;n>=0;--n){let o=e[n];switch(o.type){case"space":case"comment":case"newline":t-=o.source.length;continue}for(o=e[++n];(o==null?void 0:o.type)==="space";)t+=o.source.length,o=e[++n];break}}return t}Nj.emptyScalarPosition=Jie});var $j=I(k0=>{"use strict";var Qie=dd(),Xie=kj(),Fj=Oj(),Zie=Qc(),ese=Lj(),tse={composeNode:Mj,composeEmptyNode:qj};function Mj(t,e,r,n){let{spaceBefore:o,comment:i,anchor:s,tag:a}=r,c;switch(e.type){case"alias":c=rse(t,e,n),(s||a)&&n(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=Fj.composeScalar(t,e,a,n),s&&(c.anchor=s.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=Xie.composeCollection(tse,t,e,a,n),s&&(c.anchor=s.source.substring(1));break;default:throw console.log(e),new Error(`Unsupporten token type: ${e.type}`)}return s&&c.anchor===""&&n(s,"BAD_ALIAS","Anchor cannot be an empty string"),o&&(c.spaceBefore=!0),i&&(e.type==="scalar"&&e.source===""?c.comment=i:c.commentBefore=i),t.options.keepSourceTokens&&(c.srcToken=e),c}function qj(t,e,r,n,{spaceBefore:o,comment:i,anchor:s,tag:a},c){let l={type:"scalar",offset:ese.emptyScalarPosition(e,r,n),indent:-1,source:""},u=Fj.composeScalar(t,l,a,c);return s&&(u.anchor=s.source.substring(1),u.anchor===""&&c(s,"BAD_ALIAS","Anchor cannot be an empty string")),o&&(u.spaceBefore=!0),i&&(u.comment=i),u}function rse({options:t},{offset:e,source:r,end:n},o){let i=new Qie.Alias(r.substring(1));i.source===""&&o(e,"BAD_ALIAS","Alias cannot be an empty string");let s=e+r.length,a=Zie.resolveEnd(n,s,t.strict,o);return i.range=[e,s,a.offset],a.comment&&(i.comment=a.comment),i}k0.composeEmptyNode=qj;k0.composeNode=Mj});var Bj=I(Uj=>{"use strict";var nse=Id(),jj=$j(),ose=Qc(),ise=Dd();function sse(t,e,{offset:r,start:n,value:o,end:i},s){let a=Object.assign({directives:e},t),c=new nse.Document(void 0,a),l={atRoot:!0,directives:c.directives,options:c.options,schema:c.schema},u=ise.resolveProps(n,{indicator:"doc-start",next:o||(i==null?void 0:i[0]),offset:r,onError:s,startOnNewline:!0});u.found&&(c.directives.marker=!0,o&&(o.type==="block-map"||o.type==="block-seq")&&!u.hasNewline&&s(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),c.contents=o?jj.composeNode(l,o,u,s):jj.composeEmptyNode(l,u.end,n,null,u,s);let d=c.contents.range[2],f=ose.resolveEnd(i,d,!1,s);return f.comment&&(c.comment=f.comment),c.range=[r,d,f.offset],c}Uj.composeDoc=sse});var I0=I(Gj=>{"use strict";var ase=PE(),cse=Id(),Rd=Ad(),Hj=Ye(),lse=Qm(),use=Bj(),dse=Qc();function Od(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];let{offset:e,source:r}=t;return[e,e+(typeof r=="string"?r.length:1)]}function Vj(t){var e;let r="",n=!1,o=!1;for(let i=0;i<t.length;++i){let s=t[i];switch(s[0]){case"#":r+=(r===""?"":o?`

`:`
`)+(s.substring(1)||" "),n=!0,o=!1;break;case"%":((e=t[i+1])===null||e===void 0?void 0:e[0])!=="#"&&(i+=1),n=!1;break;default:n||(o=!0),n=!1}}return{comment:r,afterEmptyLine:o}}var Wj=class{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(r,n,o,i)=>{let s=Od(r);i?this.warnings.push(new Rd.YAMLWarning(s,n,o)):this.errors.push(new Rd.YAMLParseError(s,n,o))},this.directives=new ase.Directives({version:e.version||lse.defaultOptions.version}),this.options=e}decorate(e,r){let{comment:n,afterEmptyLine:o}=Vj(this.prelude);if(n){let i=e.contents;if(r)e.comment=e.comment?`${e.comment}
${n}`:n;else if(o||e.directives.marker||!i)e.commentBefore=n;else if(Hj.isCollection(i)&&!i.flow&&i.items.length>0){let s=i.items[0];Hj.isPair(s)&&(s=s.key);let a=s.commentBefore;s.commentBefore=a?`${n}
${a}`:n}else{let s=i.commentBefore;i.commentBefore=s?`${n}
${s}`:n}}r?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:Vj(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,r=!1,n=-1){for(let o of e)yield*this.next(o);yield*this.end(r,n)}*next(e){switch(process.env.LOG_STREAM&&console.dir(e,{depth:null}),e.type){case"directive":this.directives.add(e.source,(r,n,o)=>{let i=Od(e);i[0]+=r,this.onError(i,"BAD_DIRECTIVE",n,o)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{let r=use.composeDoc(this.options,this.directives,e,this.onError);this.atDirectives&&!r.directives.marker&&this.onError(e,"MISSING_CHAR","Missing directives-end indicator line"),this.decorate(r,!1),this.doc&&(yield this.doc),this.doc=r,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{let r=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,n=new Rd.YAMLParseError(Od(e),"UNEXPECTED_TOKEN",r);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){let n="Unexpected doc-end without preceding document";this.errors.push(new Rd.YAMLParseError(Od(e),"UNEXPECTED_TOKEN",n));break}let r=dse.resolveEnd(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),r.comment){let n=this.doc.comment;this.doc.comment=n?`${n}
${r.comment}`:r.comment}this.doc.range[2]=r.offset;break}default:this.errors.push(new Rd.YAMLParseError(Od(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,r=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){let n=Object.assign({directives:this.directives},this.options),o=new cse.Document(void 0,n);this.atDirectives&&this.onError(r,"MISSING_CHAR","Missing directives-end indicator line"),o.range=[0,r,r],this.decorate(o,!1),yield o}}};Gj.Composer=Wj});var Yj=I(_g=>{"use strict";var fse=S0(),pse=P0(),hse=Ad(),zj=yd();function mse(t,e=!0,r){if(t){let n=(o,i,s)=>{let a=typeof o=="number"?o:Array.isArray(o)?o[0]:o.offset;if(r)r(a,i,s);else throw new hse.YAMLParseError([a,a+1],i,s)};switch(t.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return pse.resolveFlowScalar(t,e,n);case"block-scalar":return fse.resolveBlockScalar(t,e,n)}}return null}function gse(t,e){var r;let{implicitKey:n=!1,indent:o,inFlow:i=!1,offset:s=-1,type:a="PLAIN"}=e,c=zj.stringifyString({type:a,value:t},{implicitKey:n,indent:o>0?" ".repeat(o):"",inFlow:i,options:{blockQuote:!0,lineWidth:-1}}),l=(r=e.end)!==null&&r!==void 0?r:[{type:"newline",offset:-1,indent:o,source:`
`}];switch(c[0]){case"|":case">":{let u=c.indexOf(`
`),d=c.substring(0,u),f=c.substring(u+1)+`
`,p=[{type:"block-scalar-header",offset:s,indent:o,source:d}];return Kj(p,l)||p.push({type:"newline",offset:-1,indent:o,source:`
`}),{type:"block-scalar",offset:s,indent:o,props:p,source:f}}case'"':return{type:"double-quoted-scalar",offset:s,indent:o,source:c,end:l};case"'":return{type:"single-quoted-scalar",offset:s,indent:o,source:c,end:l};default:return{type:"scalar",offset:s,indent:o,source:c,end:l}}}function vse(t,e,r={}){let{afterKey:n=!1,implicitKey:o=!1,inFlow:i=!1,type:s}=r,a="indent"in t?t.indent:null;if(n&&typeof a=="number"&&(a+=2),!s)switch(t.type){case"single-quoted-scalar":s="QUOTE_SINGLE";break;case"double-quoted-scalar":s="QUOTE_DOUBLE";break;case"block-scalar":{let l=t.props[0];if(l.type!=="block-scalar-header")throw new Error("Invalid block scalar header");s=l.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:s="PLAIN"}let c=zj.stringifyString({type:s,value:e},{implicitKey:o||a===null,indent:a!==null&&a>0?" ".repeat(a):"",inFlow:i,options:{blockQuote:!0,lineWidth:-1}});switch(c[0]){case"|":case">":yse(t,c);break;case'"':T0(t,c,"double-quoted-scalar");break;case"'":T0(t,c,"single-quoted-scalar");break;default:T0(t,c,"scalar")}}function yse(t,e){let r=e.indexOf(`
`),n=e.substring(0,r),o=e.substring(r+1)+`
`;if(t.type==="block-scalar"){let i=t.props[0];if(i.type!=="block-scalar-header")throw new Error("Invalid block scalar header");i.source=n,t.source=o}else{let{offset:i}=t,s="indent"in t?t.indent:-1,a=[{type:"block-scalar-header",offset:i,indent:s,source:n}];Kj(a,"end"in t?t.end:void 0)||a.push({type:"newline",offset:-1,indent:s,source:`
`});for(let c of Object.keys(t))c!=="type"&&c!=="offset"&&delete t[c];Object.assign(t,{type:"block-scalar",indent:s,props:a,source:o})}}function Kj(t,e){if(e)for(let r of e)switch(r.type){case"space":case"comment":t.push(r);break;case"newline":return t.push(r),!0}return!1}function T0(t,e,r){switch(t.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":t.type=r,t.source=e;break;case"block-scalar":{let n=t.props.slice(1),o=e.length;t.props[0].type==="block-scalar-header"&&(o-=t.props[0].source.length);for(let i of n)i.offset+=o;delete t.props,Object.assign(t,{type:r,source:e,end:n});break}case"block-map":case"block-seq":{let n=t.offset+e.length,o={type:"newline",offset:n,indent:t.indent,source:`
`};delete t.items,Object.assign(t,{type:r,source:e,end:[o]});break}default:{let n="indent"in t?t.indent:-1,o="end"in t&&Array.isArray(t.end)?t.end.filter(i=>i.type==="space"||i.type==="comment"||i.type==="newline"):[];for(let i of Object.keys(t))i!=="type"&&i!=="offset"&&delete t[i];Object.assign(t,{type:r,indent:n,source:e,end:o})}}}_g.createScalarToken=gse;_g.resolveAsScalar=mse;_g.setScalarValue=vse});var Qj=I(Jj=>{"use strict";var wse=t=>"type"in t?Sg(t):xg(t);function Sg(t){switch(t.type){case"block-scalar":{let e="";for(let r of t.props)e+=Sg(r);return e+t.source}case"block-map":case"block-seq":{let e="";for(let r of t.items)e+=xg(r);return e}case"flow-collection":{let e=t.start.source;for(let r of t.items)e+=xg(r);for(let r of t.end)e+=r.source;return e}case"document":{let e=xg(t);if(t.end)for(let r of t.end)e+=r.source;return e}default:{let e=t.source;if("end"in t&&t.end)for(let r of t.end)e+=r.source;return e}}}function xg({start:t,key:e,sep:r,value:n}){let o="";for(let i of t)o+=i.source;if(e&&(o+=Sg(e)),r)for(let i of r)o+=i.source;return n&&(o+=Sg(n)),o}Jj.stringify=wse});var tU=I(eU=>{"use strict";var A0=Symbol("break visit"),Cse=Symbol("skip children"),Xj=Symbol("remove item");function ha(t,e){"type"in t&&t.type==="document"&&(t={start:t.start,value:t.value}),Zj(Object.freeze([]),t,e)}ha.BREAK=A0;ha.SKIP=Cse;ha.REMOVE=Xj;ha.itemAtPath=(t,e)=>{let r=t;for(let[n,o]of e){let i=r&&r[n];if(i&&"items"in i)r=i.items[o];else return}return r};ha.parentCollection=(t,e)=>{let r=ha.itemAtPath(t,e.slice(0,-1)),n=e[e.length-1][0],o=r&&r[n];if(o&&"items"in o)return o;throw new Error("Parent collection not found")};function Zj(t,e,r){let n=r(e,t);if(typeof n=="symbol")return n;for(let o of["key","value"]){let i=e[o];if(i&&"items"in i){for(let s=0;s<i.items.length;++s){let a=Zj(Object.freeze(t.concat([[o,s]])),i.items[s],r);if(typeof a=="number")s=a-1;else{if(a===A0)return A0;a===Xj&&(i.items.splice(s,1),s-=1)}}typeof n=="function"&&o==="key"&&(n=n(e,t))}}return typeof n=="function"?n(e,t):n}eU.visit=ha});var Pg=I(Tr=>{"use strict";var D0=Yj(),bse=Qj(),Ese=tU(),R0="\uFEFF",O0="",N0="",L0="",_se=t=>!!t&&"items"in t,Sse=t=>!!t&&(t.type==="scalar"||t.type==="single-quoted-scalar"||t.type==="double-quoted-scalar"||t.type==="block-scalar");function xse(t){switch(t){case R0:return"<BOM>";case O0:return"<DOC>";case N0:return"<FLOW_END>";case L0:return"<SCALAR>";default:return JSON.stringify(t)}}function Pse(t){switch(t){case R0:return"byte-order-mark";case O0:return"doc-mode";case N0:return"flow-error-end";case L0:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}Tr.createScalarToken=D0.createScalarToken;Tr.resolveAsScalar=D0.resolveAsScalar;Tr.setScalarValue=D0.setScalarValue;Tr.stringify=bse.stringify;Tr.visit=Ese.visit;Tr.BOM=R0;Tr.DOCUMENT=O0;Tr.FLOW_END=N0;Tr.SCALAR=L0;Tr.isCollection=_se;Tr.isScalar=Sse;Tr.prettyToken=xse;Tr.tokenType=Pse});var M0=I(iU=>{"use strict";var Nd=Pg();function _n(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}var rU="0123456789ABCDEFabcdef".split(""),kse="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),nU=",[]{}".split(""),Ise=` ,[]{}
\r	`.split(""),F0=t=>!t||Ise.includes(t),oU=class{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,r=!1){e&&(this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null),this.atEnd=!r;let n=this.next||"stream";for(;n&&(r||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let e=this.pos,r=this.buffer[e];for(;r===" "||r==="	";)r=this.buffer[++e];return!r||r==="#"||r===`
`?!0:r==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let r=this.buffer[e];if(this.indentNext>0){let n=0;for(;r===" ";)r=this.buffer[++n+e];if(r==="\r"){let o=this.buffer[n+e+1];if(o===`
`||!o&&!this.atEnd)return e+n+1}return r===`
`||n>=this.indentNext||!r&&!this.atEnd?e+n:-1}if(r==="-"||r==="."){let n=this.buffer.substr(e,3);if((n==="---"||n==="...")&&_n(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===Nd.BOM&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let r=e.length,n=e.indexOf("#");if(n!==-1){let i=e[n-1];(i===" "||i==="	")&&(r=n-1)}for(;;){let i=e[r-1];if(i===" "||i==="	")r-=1;else break}let o=(yield*this.pushCount(r))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-o),this.pushNewline(),"stream"}if(this.atLineEnd()){let r=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-r),yield*this.pushNewline(),"stream"}return yield Nd.DOCUMENT,yield*this.parseLineStart()}*parseLineStart(){let e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");let r=this.peek(3);if(r==="---"&&_n(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if(r==="..."&&_n(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!_n(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){let[e,r]=this.peek(2);if(!r&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&_n(r)){let n=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=n,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);let e=this.getLine();if(e===null)return this.setNext("doc");let r=yield*this.pushIndicators();switch(e[r]){case"#":yield*this.pushCount(e.length-r);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(F0),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return r+=yield*this.parseBlockScalarHeader(),r+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-r),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,r,n=-1;do e=yield*this.pushNewline(),r=yield*this.pushSpaces(!0),e>0&&(this.indentValue=n=r);while(e+r>0);let o=this.getLine();if(o===null)return this.setNext("flow");if((n!==-1&&n<this.indentNext&&o[0]!=="#"||n===0&&(o.startsWith("---")||o.startsWith("..."))&&_n(o[3]))&&!(n===this.indentNext-1&&this.flowLevel===1&&(o[0]==="]"||o[0]==="}")))return this.flowLevel=0,yield Nd.FLOW_END,yield*this.parseLineStart();let i=0;for(;o[i]===",";)i+=yield*this.pushCount(1),i+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(i+=yield*this.pushIndicators(),o[i]){case void 0:return"flow";case"#":return yield*this.pushCount(o.length-i),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(F0),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{let s=this.charAt(1);if(this.flowKey||_n(s)||s===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){let e=this.charAt(0),r=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;r!==-1&&this.buffer[r+1]==="'";)r=this.buffer.indexOf("'",r+2);else for(;r!==-1;){let i=0;for(;this.buffer[r-1-i]==="\\";)i+=1;if(i%2==0)break;r=this.buffer.indexOf('"',r+1)}let n=this.buffer.substring(0,r),o=n.indexOf(`
`,this.pos);if(o!==-1){for(;o!==-1;){let i=this.continueScalar(o+1);if(i===-1)break;o=n.indexOf(`
`,i)}o!==-1&&(r=o-(n[o-1]==="\r"?2:1))}if(r===-1){if(!this.atEnd)return this.setNext("quoted-scalar");r=this.buffer.length}return yield*this.pushToIndex(r+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){let r=this.buffer[++e];if(r==="+")this.blockScalarKeep=!0;else if(r>"0"&&r<="9")this.blockScalarIndent=Number(r)-1;else if(r!=="-")break}return yield*this.pushUntil(r=>_n(r)||r==="#")}*parseBlockScalar(){let e=this.pos-1,r=0,n;e:for(let o=this.pos;n=this.buffer[o];++o)switch(n){case" ":r+=1;break;case`
`:e=o,r=0;break;case"\r":{let i=this.buffer[o+1];if(!i&&!this.atEnd)return this.setNext("block-scalar");if(i===`
`)break}default:break e}if(!n&&!this.atEnd)return this.setNext("block-scalar");if(r>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=r:this.indentNext+=this.blockScalarIndent;do{let o=this.continueScalar(e+1);if(o===-1)break;e=this.buffer.indexOf(`
`,o)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}if(!this.blockScalarKeep)do{let o=e-1,i=this.buffer[o];for(i==="\r"&&(i=this.buffer[--o]);i===" "||i==="	";)i=this.buffer[--o];if(i===`
`&&o>=this.pos)e=o;else break}while(!0);return yield Nd.SCALAR,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){let e=this.flowLevel>0,r=this.pos-1,n=this.pos-1,o;for(;o=this.buffer[++n];)if(o===":"){let i=this.buffer[n+1];if(_n(i)||e&&i===",")break;r=n}else if(_n(o)){let i=this.buffer[n+1];if(o==="\r"&&(i===`
`?(n+=1,o=`
`,i=this.buffer[n+1]):r=n),i==="#"||e&&nU.includes(i))break;if(o===`
`){let s=this.continueScalar(n+1);if(s===-1)break;n=Math.max(n,s-2)}}else{if(e&&nU.includes(o))break;r=n}return!o&&!this.atEnd?this.setNext("plain-scalar"):(yield Nd.SCALAR,yield*this.pushToIndex(r+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,r){let n=this.buffer.slice(this.pos,e);return n?(yield n,this.pos+=n.length,n.length):(r&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(F0))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case":":case"?":case"-":if(_n(this.charAt(1)))return this.flowLevel===0?this.indentNext=this.indentValue+1:this.flowKey&&(this.flowKey=!1),(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,r=this.buffer[e];for(;!_n(r)&&r!==">";)r=this.buffer[++e];return yield*this.pushToIndex(r===">"?e+1:e,!1)}else{let e=this.pos+1,r=this.buffer[e];for(;r;)if(kse.includes(r))r=this.buffer[++e];else if(r==="%"&&rU.includes(this.buffer[e+1])&&rU.includes(this.buffer[e+2]))r=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){let e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let r=this.pos-1,n;do n=this.buffer[++r];while(n===" "||e&&n==="	");let o=r-this.pos;return o>0&&(yield this.buffer.substr(this.pos,o),this.pos=r),o}*pushUntil(e){let r=this.pos,n=this.buffer[r];for(;!e(n);)n=this.buffer[++r];return yield*this.pushToIndex(r,!1)}};iU.Lexer=oU});var q0=I(aU=>{"use strict";var sU=class{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let r=0,n=this.lineStarts.length;for(;r<n;){let i=r+n>>1;this.lineStarts[i]<e?r=i+1:n=i}if(this.lineStarts[r]===e)return{line:r+1,col:1};if(r===0)return{line:0,col:e};let o=this.lineStarts[r-1];return{line:r,col:e-o+1}}}};aU.LineCounter=sU});var j0=I(fU=>{"use strict";var cU=Pg(),Tse=M0();function bo(t,e){for(let r=0;r<t.length;++r)if(t[r].type===e)return!0;return!1}function $0(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return!0}return!1}function lU(t){switch(t==null?void 0:t.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function kg(t){switch(t.type){case"document":return t.start;case"block-map":{let e=t.items[t.items.length-1];return e.sep||e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function Ld(t){var e;if(t.length===0)return[];let r=t.length;e:for(;--r>=0;)switch(t[r].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;((e=t[++r])===null||e===void 0?void 0:e.type)==="space";);return t.splice(r,t.length)}function uU(t){if(t.start.type==="flow-seq-start")for(let e of t.items)e.sep&&!e.value&&!bo(e.start,"explicit-key-ind")&&!bo(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,lU(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}var dU=class{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Tse.Lexer,this.onNewLine=e}*parse(e,r=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(let n of this.lexer.lex(e,r))yield*this.next(n);r||(yield*this.end())}*next(e){if(this.source=e,process.env.LOG_TOKENS&&console.log("|",cU.prettyToken(e)),this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}let r=cU.tokenType(e);if(r)if(r==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=r,yield*this.step(),r){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{let n=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:n,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){let e=this.peek(1);if(this.type==="doc-end"&&(!e||e.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){let r=e||this.stack.pop();if(r)if(this.stack.length===0)yield r;else{let n=this.peek(1);switch(r.type==="block-scalar"?r.indent="indent"in n?n.indent:0:r.type==="flow-collection"&&n.type==="document"&&(r.indent=0),r.type==="flow-collection"&&uU(r),n.type){case"document":n.value=r;break;case"block-scalar":n.props.push(r);break;case"block-map":{let o=n.items[n.items.length-1];if(o.value){n.items.push({start:[],key:r,sep:[]}),this.onKeyLine=!0;return}else if(o.sep)o.value=r;else{Object.assign(o,{key:r,sep:[]}),this.onKeyLine=!bo(o.start,"explicit-key-ind");return}break}case"block-seq":{let o=n.items[n.items.length-1];o.value?n.items.push({start:[],value:r}):o.value=r;break}case"flow-collection":{let o=n.items[n.items.length-1];!o||o.value?n.items.push({start:[],key:r,sep:[]}):o.sep?o.value=r:Object.assign(o,{key:r,sep:[]});return}default:yield*this.pop(),yield*this.pop(r)}if((n.type==="document"||n.type==="block-map"||n.type==="block-seq")&&(r.type==="block-map"||r.type==="block-seq")){let o=r.items[r.items.length-1];o&&!o.sep&&!o.value&&o.start.length>0&&!$0(o.start)&&(r.indent===0||o.start.every(i=>i.type!=="comment"||i.indent<r.indent))&&(n.type==="document"?n.end=o.start:n.items.push({start:o.start}),r.items.splice(-1,1))}}else{let n="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:n}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{let e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{$0(e.start)?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}let r=this.startBlockValue(e);r?this.stack.push(r):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){let r=kg(this.peek(2)),n=Ld(r),o;e.end?(o=e.end,o.push(this.sourceToken),delete e.end):o=[this.sourceToken];let i={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:n,key:e,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=i}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let r=this.source.indexOf(`
`)+1;for(;r!==0;)this.onNewLine(this.offset+r),r=this.source.indexOf(`
`,r)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){var r;let n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){let o="end"in n.value?n.value.end:void 0,i=Array.isArray(o)?o[o.length-1]:void 0;(i==null?void 0:i.type)==="comment"?o==null||o.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,e.indent)){let o=e.items[e.items.length-2],i=(r=o==null?void 0:o.value)===null||r===void 0?void 0:r.end;if(Array.isArray(i)){Array.prototype.push.apply(i,n.start),i.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=e.indent){let o=!this.onKeyLine&&this.indent===e.indent&&(n.sep||$0(n.start));switch(this.type){case"anchor":case"tag":o||n.value?(e.items.push({start:[this.sourceToken]}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!bo(n.start,"explicit-key-ind")?n.start.push(this.sourceToken):o||n.value?e.items.push({start:[this.sourceToken]}):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}),this.onKeyLine=!0;return;case"map-value-ind":if(!n.sep)Object.assign(n,{key:null,sep:[this.sourceToken]});else if(n.value||o&&!bo(n.start,"explicit-key-ind"))e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(bo(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]});else if(bo(n.start,"explicit-key-ind")&&lU(n.key)&&!bo(n.sep,"newline")){let i=Ld(n.start),s=n.key,a=n.sep;a.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:i,key:s,sep:a}]})}else n.sep.push(this.sourceToken);this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let i=this.flowScalar(this.type);o||n.value?(e.items.push({start:[],key:i,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(i):(Object.assign(n,{key:i,sep:[]}),this.onKeyLine=!0);return}default:{let i=this.startBlockValue(e);if(i){o&&i.type!=="block-seq"&&bo(n.start,"explicit-key-ind")&&e.items.push({start:[]}),this.stack.push(i);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){var r;let n=e.items[e.items.length-1];switch(this.type){case"newline":if(n.value){let o="end"in n.value?n.value.end:void 0,i=Array.isArray(o)?o[o.length-1]:void 0;(i==null?void 0:i.type)==="comment"?o==null||o.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,e.indent)){let o=e.items[e.items.length-2],i=(r=o==null?void 0:o.value)===null||r===void 0?void 0:r.end;if(Array.isArray(i)){Array.prototype.push.apply(i,n.start),i.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;n.value||bo(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>e.indent){let o=this.startBlockValue(e);if(o){this.stack.push(o);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){let r=e.items[e.items.length-1];if(this.type==="flow-error-end"){let n;do yield*this.pop(),n=this.peek(1);while(n&&n.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!r||r.sep?e.items.push({start:[this.sourceToken]}):r.start.push(this.sourceToken);return;case"map-value-ind":!r||r.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):Object.assign(r,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!r||r.value?e.items.push({start:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):r.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let o=this.flowScalar(this.type);!r||r.value?e.items.push({start:[],key:o,sep:[]}):r.sep?this.stack.push(o):Object.assign(r,{key:o,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}let n=this.startBlockValue(e);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{let n=this.peek(2);if(n.type==="block-map"&&(this.type==="map-value-ind"||this.type==="newline"&&!n.items[n.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&n.type!=="flow-collection"){let o=kg(n),i=Ld(o);uU(e);let s=e.end.splice(1,e.end.length);s.push(this.sourceToken);let a={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:i,key:e,sep:s}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let r=this.source.indexOf(`
`)+1;for(;r!==0;)this.onNewLine(this.offset+r),r=this.source.indexOf(`
`,r)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;let r=kg(e),n=Ld(r);return n.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n}]}}case"map-value-ind":{this.onKeyLine=!0;let r=kg(e),n=Ld(r);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,r){return this.type!=="comment"||this.indent<=r?!1:e.every(n=>n.type==="newline"||n.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}};fU.Parser=dU});var vU=I(Md=>{"use strict";var pU=I0(),Ase=Id(),Fd=Ad(),Dse=NE(),Rse=q0(),hU=j0();function mU(t){let e=t.prettyErrors!==!1;return{lineCounter:t.lineCounter||e&&new Rse.LineCounter||null,prettyErrors:e}}function Ose(t,e={}){let{lineCounter:r,prettyErrors:n}=mU(e),o=new hU.Parser(r==null?void 0:r.addNewLine),i=new pU.Composer(e),s=Array.from(i.compose(o.parse(t)));if(n&&r)for(let a of s)a.errors.forEach(Fd.prettifyError(t,r)),a.warnings.forEach(Fd.prettifyError(t,r));return s.length>0?s:Object.assign([],{empty:!0},i.streamInfo())}function gU(t,e={}){let{lineCounter:r,prettyErrors:n}=mU(e),o=new hU.Parser(r==null?void 0:r.addNewLine),i=new pU.Composer(e),s=null;for(let a of i.compose(o.parse(t),!0,t.length))if(!s)s=a;else if(s.options.logLevel!=="silent"){s.errors.push(new Fd.YAMLParseError(a.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return n&&r&&(s.errors.forEach(Fd.prettifyError(t,r)),s.warnings.forEach(Fd.prettifyError(t,r))),s}function Nse(t,e,r){let n;typeof e=="function"?n=e:r===void 0&&e&&typeof e=="object"&&(r=e);let o=gU(t,r);if(!o)return null;if(o.warnings.forEach(i=>Dse.warn(o.options.logLevel,i)),o.errors.length>0){if(o.options.logLevel!=="silent")throw o.errors[0];o.errors=[]}return o.toJS(Object.assign({reviver:n},r))}function Lse(t,e,r){let n=null;if(typeof e=="function"||Array.isArray(e)?n=e:r===void 0&&e&&(r=e),typeof r=="string"&&(r=r.length),typeof r=="number"){let o=Math.round(r);r=o<1?void 0:o>8?{indent:8}:{indent:o}}if(t===void 0){let{keepUndefined:o}=r||e||{};if(!o)return}return new Ase.Document(t,n,r).toString(r)}Md.parse=Nse;Md.parseAllDocuments=Ose;Md.parseDocument=gU;Md.stringify=Lse});var B0=I(Je=>{"use strict";var Fse=I0(),Mse=Id(),qse=h0(),U0=Ad(),$se=dd(),Yi=Ye(),jse=Jo(),Use=kt(),Bse=fa(),Hse=pa(),Vse=Qm(),Wse=Pg(),Gse=M0(),zse=q0(),Kse=j0(),Ig=vU(),Yse=cd();Je.Composer=Fse.Composer;Je.Document=Mse.Document;Je.Schema=qse.Schema;Je.YAMLError=U0.YAMLError;Je.YAMLParseError=U0.YAMLParseError;Je.YAMLWarning=U0.YAMLWarning;Je.Alias=$se.Alias;Je.isAlias=Yi.isAlias;Je.isCollection=Yi.isCollection;Je.isDocument=Yi.isDocument;Je.isMap=Yi.isMap;Je.isNode=Yi.isNode;Je.isPair=Yi.isPair;Je.isScalar=Yi.isScalar;Je.isSeq=Yi.isSeq;Je.Pair=jse.Pair;Je.Scalar=Use.Scalar;Je.YAMLMap=Bse.YAMLMap;Je.YAMLSeq=Hse.YAMLSeq;Je.defaultOptions=Vse.defaultOptions;Je.CST=Wse;Je.Lexer=Gse.Lexer;Je.LineCounter=zse.LineCounter;Je.Parser=Kse.Parser;Je.parse=Ig.parse;Je.parseAllDocuments=Ig.parseAllDocuments;Je.parseDocument=Ig.parseDocument;Je.stringify=Ig.stringify;Je.visit=Yse.visit});var yU=I((q_e,Jse)=>{Jse.exports={Aacute:"\xC1",aacute:"\xE1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223E",acd:"\u223F",acE:"\u223E\u0333",Acirc:"\xC2",acirc:"\xE2",acute:"\xB4",Acy:"\u0410",acy:"\u0430",AElig:"\xC6",aelig:"\xE6",af:"\u2061",Afr:"\u{1D504}",afr:"\u{1D51E}",Agrave:"\xC0",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03B1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2A3F",amp:"&",AMP:"&",andand:"\u2A55",And:"\u2A53",and:"\u2227",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",ange:"\u29A4",angle:"\u2220",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angmsd:"\u2221",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angst:"\xC5",angzarr:"\u237C",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1D538}",aopf:"\u{1D552}",apacir:"\u2A6F",ap:"\u2248",apE:"\u2A70",ape:"\u224A",apid:"\u224B",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224A",Aring:"\xC5",aring:"\xE5",Ascr:"\u{1D49C}",ascr:"\u{1D4B6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224D",Atilde:"\xC3",atilde:"\xE3",Auml:"\xC4",auml:"\xE4",awconint:"\u2233",awint:"\u2A11",backcong:"\u224C",backepsilon:"\u03F6",backprime:"\u2035",backsim:"\u223D",backsimeq:"\u22CD",Backslash:"\u2216",Barv:"\u2AE7",barvee:"\u22BD",barwed:"\u2305",Barwed:"\u2306",barwedge:"\u2305",bbrk:"\u23B5",bbrktbrk:"\u23B6",bcong:"\u224C",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201E",becaus:"\u2235",because:"\u2235",Because:"\u2235",bemptyv:"\u29B0",bepsi:"\u03F6",bernou:"\u212C",Bernoullis:"\u212C",Beta:"\u0392",beta:"\u03B2",beth:"\u2136",between:"\u226C",Bfr:"\u{1D505}",bfr:"\u{1D51F}",bigcap:"\u22C2",bigcirc:"\u25EF",bigcup:"\u22C3",bigodot:"\u2A00",bigoplus:"\u2A01",bigotimes:"\u2A02",bigsqcup:"\u2A06",bigstar:"\u2605",bigtriangledown:"\u25BD",bigtriangleup:"\u25B3",biguplus:"\u2A04",bigvee:"\u22C1",bigwedge:"\u22C0",bkarow:"\u290D",blacklozenge:"\u29EB",blacksquare:"\u25AA",blacktriangle:"\u25B4",blacktriangledown:"\u25BE",blacktriangleleft:"\u25C2",blacktriangleright:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bNot:"\u2AED",bnot:"\u2310",Bopf:"\u{1D539}",bopf:"\u{1D553}",bot:"\u22A5",bottom:"\u22A5",bowtie:"\u22C8",boxbox:"\u29C9",boxdl:"\u2510",boxdL:"\u2555",boxDl:"\u2556",boxDL:"\u2557",boxdr:"\u250C",boxdR:"\u2552",boxDr:"\u2553",boxDR:"\u2554",boxh:"\u2500",boxH:"\u2550",boxhd:"\u252C",boxHd:"\u2564",boxhD:"\u2565",boxHD:"\u2566",boxhu:"\u2534",boxHu:"\u2567",boxhU:"\u2568",boxHU:"\u2569",boxminus:"\u229F",boxplus:"\u229E",boxtimes:"\u22A0",boxul:"\u2518",boxuL:"\u255B",boxUl:"\u255C",boxUL:"\u255D",boxur:"\u2514",boxuR:"\u2558",boxUr:"\u2559",boxUR:"\u255A",boxv:"\u2502",boxV:"\u2551",boxvh:"\u253C",boxvH:"\u256A",boxVh:"\u256B",boxVH:"\u256C",boxvl:"\u2524",boxvL:"\u2561",boxVl:"\u2562",boxVL:"\u2563",boxvr:"\u251C",boxvR:"\u255E",boxVr:"\u255F",boxVR:"\u2560",bprime:"\u2035",breve:"\u02D8",Breve:"\u02D8",brvbar:"\xA6",bscr:"\u{1D4B7}",Bscr:"\u212C",bsemi:"\u204F",bsim:"\u223D",bsime:"\u22CD",bsolb:"\u29C5",bsol:"\\",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bump:"\u224E",bumpE:"\u2AAE",bumpe:"\u224F",Bumpeq:"\u224E",bumpeq:"\u224F",Cacute:"\u0106",cacute:"\u0107",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",cap:"\u2229",Cap:"\u22D2",capcup:"\u2A47",capdot:"\u2A40",CapitalDifferentialD:"\u2145",caps:"\u2229\uFE00",caret:"\u2041",caron:"\u02C7",Cayleys:"\u212D",ccaps:"\u2A4D",Ccaron:"\u010C",ccaron:"\u010D",Ccedil:"\xC7",ccedil:"\xE7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2A4C",ccupssm:"\u2A50",Cdot:"\u010A",cdot:"\u010B",cedil:"\xB8",Cedilla:"\xB8",cemptyv:"\u29B2",cent:"\xA2",centerdot:"\xB7",CenterDot:"\xB7",cfr:"\u{1D520}",Cfr:"\u212D",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03A7",chi:"\u03C7",circ:"\u02C6",circeq:"\u2257",circlearrowleft:"\u21BA",circlearrowright:"\u21BB",circledast:"\u229B",circledcirc:"\u229A",circleddash:"\u229D",CircleDot:"\u2299",circledR:"\xAE",circledS:"\u24C8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cir:"\u25CB",cirE:"\u29C3",cire:"\u2257",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201D",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",colon:":",Colon:"\u2237",Colone:"\u2A74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2A6D",Congruent:"\u2261",conint:"\u222E",Conint:"\u222F",ContourIntegral:"\u222E",copf:"\u{1D554}",Copf:"\u2102",coprod:"\u2210",Coproduct:"\u2210",copy:"\xA9",COPY:"\xA9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21B5",cross:"\u2717",Cross:"\u2A2F",Cscr:"\u{1D49E}",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",cuesc:"\u22DF",cularr:"\u21B6",cularrp:"\u293D",cupbrcap:"\u2A48",cupcap:"\u2A46",CupCap:"\u224D",cup:"\u222A",Cup:"\u22D3",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curarrm:"\u293C",curlyeqprec:"\u22DE",curlyeqsucc:"\u22DF",curlyvee:"\u22CE",curlywedge:"\u22CF",curren:"\xA4",curvearrowleft:"\u21B6",curvearrowright:"\u21B7",cuvee:"\u22CE",cuwed:"\u22CF",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232D",dagger:"\u2020",Dagger:"\u2021",daleth:"\u2138",darr:"\u2193",Darr:"\u21A1",dArr:"\u21D3",dash:"\u2010",Dashv:"\u2AE4",dashv:"\u22A3",dbkarow:"\u290F",dblac:"\u02DD",Dcaron:"\u010E",dcaron:"\u010F",Dcy:"\u0414",dcy:"\u0434",ddagger:"\u2021",ddarr:"\u21CA",DD:"\u2145",dd:"\u2146",DDotrahd:"\u2911",ddotseq:"\u2A77",deg:"\xB0",Del:"\u2207",Delta:"\u0394",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",Dfr:"\u{1D507}",dfr:"\u{1D521}",dHar:"\u2965",dharl:"\u21C3",dharr:"\u21C2",DiacriticalAcute:"\xB4",DiacriticalDot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",DiacriticalGrave:"`",DiacriticalTilde:"\u02DC",diam:"\u22C4",diamond:"\u22C4",Diamond:"\u22C4",diamondsuit:"\u2666",diams:"\u2666",die:"\xA8",DifferentialD:"\u2146",digamma:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231E",dlcrop:"\u230D",dollar:"$",Dopf:"\u{1D53B}",dopf:"\u{1D555}",Dot:"\xA8",dot:"\u02D9",DotDot:"\u20DC",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22A1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222F",DoubleDot:"\xA8",DoubleDownArrow:"\u21D3",DoubleLeftArrow:"\u21D0",DoubleLeftRightArrow:"\u21D4",DoubleLeftTee:"\u2AE4",DoubleLongLeftArrow:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",DoubleLongRightArrow:"\u27F9",DoubleRightArrow:"\u21D2",DoubleRightTee:"\u22A8",DoubleUpArrow:"\u21D1",DoubleUpDownArrow:"\u21D5",DoubleVerticalBar:"\u2225",DownArrowBar:"\u2913",downarrow:"\u2193",DownArrow:"\u2193",Downarrow:"\u21D3",DownArrowUpArrow:"\u21F5",DownBreve:"\u0311",downdownarrows:"\u21CA",downharpoonleft:"\u21C3",downharpoonright:"\u21C2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVectorBar:"\u2956",DownLeftVector:"\u21BD",DownRightTeeVector:"\u295F",DownRightVectorBar:"\u2957",DownRightVector:"\u21C1",DownTeeArrow:"\u21A7",DownTee:"\u22A4",drbkarow:"\u2910",drcorn:"\u231F",drcrop:"\u230C",Dscr:"\u{1D49F}",dscr:"\u{1D4B9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29F6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",dtrif:"\u25BE",duarr:"\u21F5",duhar:"\u296F",dwangle:"\u29A6",DZcy:"\u040F",dzcy:"\u045F",dzigrarr:"\u27FF",Eacute:"\xC9",eacute:"\xE9",easter:"\u2A6E",Ecaron:"\u011A",ecaron:"\u011B",Ecirc:"\xCA",ecirc:"\xEA",ecir:"\u2256",ecolon:"\u2255",Ecy:"\u042D",ecy:"\u044D",eDDot:"\u2A77",Edot:"\u0116",edot:"\u0117",eDot:"\u2251",ee:"\u2147",efDot:"\u2252",Efr:"\u{1D508}",efr:"\u{1D522}",eg:"\u2A9A",Egrave:"\xC8",egrave:"\xE8",egs:"\u2A96",egsdot:"\u2A98",el:"\u2A99",Element:"\u2208",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",elsdot:"\u2A97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25FB",emptyv:"\u2205",EmptyVerySmallSquare:"\u25AB",emsp13:"\u2004",emsp14:"\u2005",emsp:"\u2003",ENG:"\u014A",eng:"\u014B",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1D53C}",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",Epsilon:"\u0395",epsilon:"\u03B5",epsiv:"\u03F5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2A96",eqslantless:"\u2A95",Equal:"\u2A75",equals:"=",EqualTilde:"\u2242",equest:"\u225F",Equilibrium:"\u21CC",equiv:"\u2261",equivDD:"\u2A78",eqvparsl:"\u29E5",erarr:"\u2971",erDot:"\u2253",escr:"\u212F",Escr:"\u2130",esdot:"\u2250",Esim:"\u2A73",esim:"\u2242",Eta:"\u0397",eta:"\u03B7",ETH:"\xD0",eth:"\xF0",Euml:"\xCB",euml:"\xEB",euro:"\u20AC",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",exponentiale:"\u2147",ExponentialE:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",Ffr:"\u{1D509}",ffr:"\u{1D523}",filig:"\uFB01",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",Fopf:"\u{1D53D}",fopf:"\u{1D557}",forall:"\u2200",ForAll:"\u2200",fork:"\u22D4",forkv:"\u2AD9",Fouriertrf:"\u2131",fpartint:"\u2A0D",frac12:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",fscr:"\u{1D4BB}",Fscr:"\u2131",gacute:"\u01F5",Gamma:"\u0393",gamma:"\u03B3",Gammad:"\u03DC",gammad:"\u03DD",gap:"\u2A86",Gbreve:"\u011E",gbreve:"\u011F",Gcedil:"\u0122",Gcirc:"\u011C",gcirc:"\u011D",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",ge:"\u2265",gE:"\u2267",gEl:"\u2A8C",gel:"\u22DB",geq:"\u2265",geqq:"\u2267",geqslant:"\u2A7E",gescc:"\u2AA9",ges:"\u2A7E",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",Gfr:"\u{1D50A}",gfr:"\u{1D524}",gg:"\u226B",Gg:"\u22D9",ggg:"\u22D9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gla:"\u2AA5",gl:"\u2277",glE:"\u2A92",glj:"\u2AA4",gnap:"\u2A8A",gnapprox:"\u2A8A",gne:"\u2A88",gnE:"\u2269",gneq:"\u2A88",gneqq:"\u2269",gnsim:"\u22E7",Gopf:"\u{1D53E}",gopf:"\u{1D558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22DB",GreaterFullEqual:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2A7E",GreaterTilde:"\u2273",Gscr:"\u{1D4A2}",gscr:"\u210A",gsim:"\u2273",gsime:"\u2A8E",gsiml:"\u2A90",gtcc:"\u2AA7",gtcir:"\u2A7A",gt:">",GT:">",Gt:"\u226B",gtdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrapprox:"\u2A86",gtrarr:"\u2978",gtrdot:"\u22D7",gtreqless:"\u22DB",gtreqqless:"\u2A8C",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",Hacek:"\u02C7",hairsp:"\u200A",half:"\xBD",hamilt:"\u210B",HARDcy:"\u042A",hardcy:"\u044A",harrcir:"\u2948",harr:"\u2194",hArr:"\u21D4",harrw:"\u21AD",Hat:"^",hbar:"\u210F",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22B9",hfr:"\u{1D525}",Hfr:"\u210C",HilbertSpace:"\u210B",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",hookrightarrow:"\u21AA",hopf:"\u{1D559}",Hopf:"\u210D",horbar:"\u2015",HorizontalLine:"\u2500",hscr:"\u{1D4BD}",Hscr:"\u210B",hslash:"\u210F",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224E",HumpEqual:"\u224F",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xCD",iacute:"\xED",ic:"\u2063",Icirc:"\xCE",icirc:"\xEE",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xA1",iff:"\u21D4",ifr:"\u{1D526}",Ifr:"\u2111",Igrave:"\xCC",igrave:"\xEC",ii:"\u2148",iiiint:"\u2A0C",iiint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Imacr:"\u012A",imacr:"\u012B",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",Im:"\u2111",imof:"\u22B7",imped:"\u01B5",Implies:"\u21D2",incare:"\u2105",in:"\u2208",infin:"\u221E",infintie:"\u29DD",inodot:"\u0131",intcal:"\u22BA",int:"\u222B",Int:"\u222C",integers:"\u2124",Integral:"\u222B",intercal:"\u22BA",Intersection:"\u22C2",intlarhk:"\u2A17",intprod:"\u2A3C",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012E",iogon:"\u012F",Iopf:"\u{1D540}",iopf:"\u{1D55A}",Iota:"\u0399",iota:"\u03B9",iprod:"\u2A3C",iquest:"\xBF",iscr:"\u{1D4BE}",Iscr:"\u2110",isin:"\u2208",isindot:"\u22F5",isinE:"\u22F9",isins:"\u22F4",isinsv:"\u22F3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xCF",iuml:"\xEF",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1D50D}",jfr:"\u{1D527}",jmath:"\u0237",Jopf:"\u{1D541}",jopf:"\u{1D55B}",Jscr:"\u{1D4A5}",jscr:"\u{1D4BF}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039A",kappa:"\u03BA",kappav:"\u03F0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041A",kcy:"\u043A",Kfr:"\u{1D50E}",kfr:"\u{1D528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040C",kjcy:"\u045C",Kopf:"\u{1D542}",kopf:"\u{1D55C}",Kscr:"\u{1D4A6}",kscr:"\u{1D4C0}",lAarr:"\u21DA",Lacute:"\u0139",lacute:"\u013A",laemptyv:"\u29B4",lagran:"\u2112",Lambda:"\u039B",lambda:"\u03BB",lang:"\u27E8",Lang:"\u27EA",langd:"\u2991",langle:"\u27E8",lap:"\u2A85",Laplacetrf:"\u2112",laquo:"\xAB",larrb:"\u21E4",larrbfs:"\u291F",larr:"\u2190",Larr:"\u219E",lArr:"\u21D0",larrfs:"\u291D",larrhk:"\u21A9",larrlp:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",latail:"\u2919",lAtail:"\u291B",lat:"\u2AAB",late:"\u2AAD",lates:"\u2AAD\uFE00",lbarr:"\u290C",lBarr:"\u290E",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",Lcaron:"\u013D",lcaron:"\u013E",Lcedil:"\u013B",lcedil:"\u013C",lceil:"\u2308",lcub:"{",Lcy:"\u041B",lcy:"\u043B",ldca:"\u2936",ldquo:"\u201C",ldquor:"\u201E",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",le:"\u2264",lE:"\u2266",LeftAngleBracket:"\u27E8",LeftArrowBar:"\u21E4",leftarrow:"\u2190",LeftArrow:"\u2190",Leftarrow:"\u21D0",LeftArrowRightArrow:"\u21C6",leftarrowtail:"\u21A2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVectorBar:"\u2959",LeftDownVector:"\u21C3",LeftFloor:"\u230A",leftharpoondown:"\u21BD",leftharpoonup:"\u21BC",leftleftarrows:"\u21C7",leftrightarrow:"\u2194",LeftRightArrow:"\u2194",Leftrightarrow:"\u21D4",leftrightarrows:"\u21C6",leftrightharpoons:"\u21CB",leftrightsquigarrow:"\u21AD",LeftRightVector:"\u294E",LeftTeeArrow:"\u21A4",LeftTee:"\u22A3",LeftTeeVector:"\u295A",leftthreetimes:"\u22CB",LeftTriangleBar:"\u29CF",LeftTriangle:"\u22B2",LeftTriangleEqual:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVectorBar:"\u2958",LeftUpVector:"\u21BF",LeftVectorBar:"\u2952",LeftVector:"\u21BC",lEg:"\u2A8B",leg:"\u22DA",leq:"\u2264",leqq:"\u2266",leqslant:"\u2A7D",lescc:"\u2AA8",les:"\u2A7D",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessapprox:"\u2A85",lessdot:"\u22D6",lesseqgtr:"\u22DA",lesseqqgtr:"\u2A8B",LessEqualGreater:"\u22DA",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2AA1",lesssim:"\u2272",LessSlantEqual:"\u2A7D",LessTilde:"\u2272",lfisht:"\u297C",lfloor:"\u230A",Lfr:"\u{1D50F}",lfr:"\u{1D529}",lg:"\u2276",lgE:"\u2A91",lHar:"\u2962",lhard:"\u21BD",lharu:"\u21BC",lharul:"\u296A",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",llarr:"\u21C7",ll:"\u226A",Ll:"\u22D8",llcorner:"\u231E",Lleftarrow:"\u21DA",llhard:"\u296B",lltri:"\u25FA",Lmidot:"\u013F",lmidot:"\u0140",lmoustache:"\u23B0",lmoust:"\u23B0",lnap:"\u2A89",lnapprox:"\u2A89",lne:"\u2A87",lnE:"\u2268",lneq:"\u2A87",lneqq:"\u2268",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",lobrk:"\u27E6",longleftarrow:"\u27F5",LongLeftArrow:"\u27F5",Longleftarrow:"\u27F8",longleftrightarrow:"\u27F7",LongLeftRightArrow:"\u27F7",Longleftrightarrow:"\u27FA",longmapsto:"\u27FC",longrightarrow:"\u27F6",LongRightArrow:"\u27F6",Longrightarrow:"\u27F9",looparrowleft:"\u21AB",looparrowright:"\u21AC",lopar:"\u2985",Lopf:"\u{1D543}",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25CA",lozenge:"\u25CA",lozf:"\u29EB",lpar:"(",lparlt:"\u2993",lrarr:"\u21C6",lrcorner:"\u231F",lrhar:"\u21CB",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",lscr:"\u{1D4C1}",Lscr:"\u2112",lsh:"\u21B0",Lsh:"\u21B0",lsim:"\u2272",lsime:"\u2A8D",lsimg:"\u2A8F",lsqb:"[",lsquo:"\u2018",lsquor:"\u201A",Lstrok:"\u0141",lstrok:"\u0142",ltcc:"\u2AA6",ltcir:"\u2A79",lt:"<",LT:"<",Lt:"\u226A",ltdot:"\u22D6",lthree:"\u22CB",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltri:"\u25C3",ltrie:"\u22B4",ltrif:"\u25C2",ltrPar:"\u2996",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",macr:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21A6",mapsto:"\u21A6",mapstodown:"\u21A7",mapstoleft:"\u21A4",mapstoup:"\u21A5",marker:"\u25AE",mcomma:"\u2A29",Mcy:"\u041C",mcy:"\u043C",mdash:"\u2014",mDDot:"\u223A",measuredangle:"\u2221",MediumSpace:"\u205F",Mellintrf:"\u2133",Mfr:"\u{1D510}",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",midast:"*",midcir:"\u2AF0",mid:"\u2223",middot:"\xB7",minusb:"\u229F",minus:"\u2212",minusd:"\u2238",minusdu:"\u2A2A",MinusPlus:"\u2213",mlcp:"\u2ADB",mldr:"\u2026",mnplus:"\u2213",models:"\u22A7",Mopf:"\u{1D544}",mopf:"\u{1D55E}",mp:"\u2213",mscr:"\u{1D4C2}",Mscr:"\u2133",mstpos:"\u223E",Mu:"\u039C",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20D2",nap:"\u2249",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",napprox:"\u2249",natural:"\u266E",naturals:"\u2115",natur:"\u266E",nbsp:"\xA0",nbump:"\u224E\u0338",nbumpe:"\u224F\u0338",ncap:"\u2A43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",Ncy:"\u041D",ncy:"\u043D",ndash:"\u2013",nearhk:"\u2924",nearr:"\u2197",neArr:"\u21D7",nearrow:"\u2197",ne:"\u2260",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226B",NestedLessLess:"\u226A",NewLine:`
`,nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1D511}",nfr:"\u{1D52B}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",nGg:"\u22D9\u0338",ngsim:"\u2275",nGt:"\u226B\u20D2",ngt:"\u226F",ngtr:"\u226F",nGtv:"\u226B\u0338",nharr:"\u21AE",nhArr:"\u21CE",nhpar:"\u2AF2",ni:"\u220B",nis:"\u22FC",nisd:"\u22FA",niv:"\u220B",NJcy:"\u040A",njcy:"\u045A",nlarr:"\u219A",nlArr:"\u21CD",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nleftarrow:"\u219A",nLeftarrow:"\u21CD",nleftrightarrow:"\u21AE",nLeftrightarrow:"\u21CE",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",nless:"\u226E",nLl:"\u22D8\u0338",nlsim:"\u2274",nLt:"\u226A\u20D2",nlt:"\u226E",nltri:"\u22EA",nltrie:"\u22EC",nLtv:"\u226A\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xA0",nopf:"\u{1D55F}",Nopf:"\u2115",Not:"\u2AEC",not:"\xAC",NotCongruent:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226F",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",notin:"\u2209",notindot:"\u22F5\u0338",notinE:"\u22F9\u0338",notinva:"\u2209",notinvb:"\u22F7",notinvc:"\u22F6",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangle:"\u22EA",NotLeftTriangleEqual:"\u22EC",NotLess:"\u226E",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",notni:"\u220C",notniva:"\u220C",notnivb:"\u22FE",notnivc:"\u22FD",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",NotReverseElement:"\u220C",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangle:"\u22EB",NotRightTriangleEqual:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",NotSubset:"\u2282\u20D2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",nparallel:"\u2226",npar:"\u2226",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",npr:"\u2280",nprcue:"\u22E0",nprec:"\u2280",npreceq:"\u2AAF\u0338",npre:"\u2AAF\u0338",nrarrc:"\u2933\u0338",nrarr:"\u219B",nrArr:"\u21CF",nrarrw:"\u219D\u0338",nrightarrow:"\u219B",nRightarrow:"\u21CF",nrtri:"\u22EB",nrtrie:"\u22ED",nsc:"\u2281",nsccue:"\u22E1",nsce:"\u2AB0\u0338",Nscr:"\u{1D4A9}",nscr:"\u{1D4C3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22E2",nsqsupe:"\u22E3",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsube:"\u2288",nsubset:"\u2282\u20D2",nsubseteq:"\u2288",nsubseteqq:"\u2AC5\u0338",nsucc:"\u2281",nsucceq:"\u2AB0\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20D2",nsupseteq:"\u2289",nsupseteqq:"\u2AC6\u0338",ntgl:"\u2279",Ntilde:"\xD1",ntilde:"\xF1",ntlg:"\u2278",ntriangleleft:"\u22EA",ntrianglelefteq:"\u22EC",ntriangleright:"\u22EB",ntrianglerighteq:"\u22ED",Nu:"\u039D",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224D\u20D2",nvdash:"\u22AC",nvDash:"\u22AD",nVdash:"\u22AE",nVDash:"\u22AF",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvHarr:"\u2904",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwarhk:"\u2923",nwarr:"\u2196",nwArr:"\u21D6",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xD3",oacute:"\xF3",oast:"\u229B",Ocirc:"\xD4",ocirc:"\xF4",ocir:"\u229A",Ocy:"\u041E",ocy:"\u043E",odash:"\u229D",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2A38",odot:"\u2299",odsold:"\u29BC",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29BF",Ofr:"\u{1D512}",ofr:"\u{1D52C}",ogon:"\u02DB",Ograve:"\xD2",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",ohm:"\u03A9",oint:"\u222E",olarr:"\u21BA",olcir:"\u29BE",olcross:"\u29BB",oline:"\u203E",olt:"\u29C0",Omacr:"\u014C",omacr:"\u014D",Omega:"\u03A9",omega:"\u03C9",Omicron:"\u039F",omicron:"\u03BF",omid:"\u29B6",ominus:"\u2296",Oopf:"\u{1D546}",oopf:"\u{1D560}",opar:"\u29B7",OpenCurlyDoubleQuote:"\u201C",OpenCurlyQuote:"\u2018",operp:"\u29B9",oplus:"\u2295",orarr:"\u21BB",Or:"\u2A54",or:"\u2228",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oS:"\u24C8",Oscr:"\u{1D4AA}",oscr:"\u2134",Oslash:"\xD8",oslash:"\xF8",osol:"\u2298",Otilde:"\xD5",otilde:"\xF5",otimesas:"\u2A36",Otimes:"\u2A37",otimes:"\u2297",Ouml:"\xD6",ouml:"\xF6",ovbar:"\u233D",OverBar:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",OverParenthesis:"\u23DC",para:"\xB6",parallel:"\u2225",par:"\u2225",parsim:"\u2AF3",parsl:"\u2AFD",part:"\u2202",PartialD:"\u2202",Pcy:"\u041F",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",perp:"\u22A5",pertenk:"\u2031",Pfr:"\u{1D513}",pfr:"\u{1D52D}",Phi:"\u03A6",phi:"\u03C6",phiv:"\u03D5",phmmat:"\u2133",phone:"\u260E",Pi:"\u03A0",pi:"\u03C0",pitchfork:"\u22D4",piv:"\u03D6",planck:"\u210F",planckh:"\u210E",plankv:"\u210F",plusacir:"\u2A23",plusb:"\u229E",pluscir:"\u2A22",plus:"+",plusdo:"\u2214",plusdu:"\u2A25",pluse:"\u2A72",PlusMinus:"\xB1",plusmn:"\xB1",plussim:"\u2A26",plustwo:"\u2A27",pm:"\xB1",Poincareplane:"\u210C",pointint:"\u2A15",popf:"\u{1D561}",Popf:"\u2119",pound:"\xA3",prap:"\u2AB7",Pr:"\u2ABB",pr:"\u227A",prcue:"\u227C",precapprox:"\u2AB7",prec:"\u227A",preccurlyeq:"\u227C",Precedes:"\u227A",PrecedesEqual:"\u2AAF",PrecedesSlantEqual:"\u227C",PrecedesTilde:"\u227E",preceq:"\u2AAF",precnapprox:"\u2AB9",precneqq:"\u2AB5",precnsim:"\u22E8",pre:"\u2AAF",prE:"\u2AB3",precsim:"\u227E",prime:"\u2032",Prime:"\u2033",primes:"\u2119",prnap:"\u2AB9",prnE:"\u2AB5",prnsim:"\u22E8",prod:"\u220F",Product:"\u220F",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prop:"\u221D",Proportional:"\u221D",Proportion:"\u2237",propto:"\u221D",prsim:"\u227E",prurel:"\u22B0",Pscr:"\u{1D4AB}",pscr:"\u{1D4C5}",Psi:"\u03A8",psi:"\u03C8",puncsp:"\u2008",Qfr:"\u{1D514}",qfr:"\u{1D52E}",qint:"\u2A0C",qopf:"\u{1D562}",Qopf:"\u211A",qprime:"\u2057",Qscr:"\u{1D4AC}",qscr:"\u{1D4C6}",quaternions:"\u210D",quatint:"\u2A16",quest:"?",questeq:"\u225F",quot:'"',QUOT:'"',rAarr:"\u21DB",race:"\u223D\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221A",raemptyv:"\u29B3",rang:"\u27E9",Rang:"\u27EB",rangd:"\u2992",range:"\u29A5",rangle:"\u27E9",raquo:"\xBB",rarrap:"\u2975",rarrb:"\u21E5",rarrbfs:"\u2920",rarrc:"\u2933",rarr:"\u2192",Rarr:"\u21A0",rArr:"\u21D2",rarrfs:"\u291E",rarrhk:"\u21AA",rarrlp:"\u21AC",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21A3",rarrw:"\u219D",ratail:"\u291A",rAtail:"\u291C",ratio:"\u2236",rationals:"\u211A",rbarr:"\u290D",rBarr:"\u290F",RBarr:"\u2910",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201D",rdquor:"\u201D",rdsh:"\u21B3",real:"\u211C",realine:"\u211B",realpart:"\u211C",reals:"\u211D",Re:"\u211C",rect:"\u25AD",reg:"\xAE",REG:"\xAE",ReverseElement:"\u220B",ReverseEquilibrium:"\u21CB",ReverseUpEquilibrium:"\u296F",rfisht:"\u297D",rfloor:"\u230B",rfr:"\u{1D52F}",Rfr:"\u211C",rHar:"\u2964",rhard:"\u21C1",rharu:"\u21C0",rharul:"\u296C",Rho:"\u03A1",rho:"\u03C1",rhov:"\u03F1",RightAngleBracket:"\u27E9",RightArrowBar:"\u21E5",rightarrow:"\u2192",RightArrow:"\u2192",Rightarrow:"\u21D2",RightArrowLeftArrow:"\u21C4",rightarrowtail:"\u21A3",RightCeiling:"\u2309",RightDoubleBracket:"\u27E7",RightDownTeeVector:"\u295D",RightDownVectorBar:"\u2955",RightDownVector:"\u21C2",RightFloor:"\u230B",rightharpoondown:"\u21C1",rightharpoonup:"\u21C0",rightleftarrows:"\u21C4",rightleftharpoons:"\u21CC",rightrightarrows:"\u21C9",rightsquigarrow:"\u219D",RightTeeArrow:"\u21A6",RightTee:"\u22A2",RightTeeVector:"\u295B",rightthreetimes:"\u22CC",RightTriangleBar:"\u29D0",RightTriangle:"\u22B3",RightTriangleEqual:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVectorBar:"\u2954",RightUpVector:"\u21BE",RightVectorBar:"\u2953",RightVector:"\u21C0",ring:"\u02DA",risingdotseq:"\u2253",rlarr:"\u21C4",rlhar:"\u21CC",rlm:"\u200F",rmoustache:"\u23B1",rmoust:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",robrk:"\u27E7",ropar:"\u2986",ropf:"\u{1D563}",Ropf:"\u211D",roplus:"\u2A2E",rotimes:"\u2A35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rrarr:"\u21C9",Rrightarrow:"\u21DB",rsaquo:"\u203A",rscr:"\u{1D4C7}",Rscr:"\u211B",rsh:"\u21B1",Rsh:"\u21B1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22CC",rtimes:"\u22CA",rtri:"\u25B9",rtrie:"\u22B5",rtrif:"\u25B8",rtriltri:"\u29CE",RuleDelayed:"\u29F4",ruluhar:"\u2968",rx:"\u211E",Sacute:"\u015A",sacute:"\u015B",sbquo:"\u201A",scap:"\u2AB8",Scaron:"\u0160",scaron:"\u0161",Sc:"\u2ABC",sc:"\u227B",sccue:"\u227D",sce:"\u2AB0",scE:"\u2AB4",Scedil:"\u015E",scedil:"\u015F",Scirc:"\u015C",scirc:"\u015D",scnap:"\u2ABA",scnE:"\u2AB6",scnsim:"\u22E9",scpolint:"\u2A13",scsim:"\u227F",Scy:"\u0421",scy:"\u0441",sdotb:"\u22A1",sdot:"\u22C5",sdote:"\u2A66",searhk:"\u2925",searr:"\u2198",seArr:"\u21D8",searrow:"\u2198",sect:"\xA7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1D516}",sfr:"\u{1D530}",sfrown:"\u2322",sharp:"\u266F",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xAD",Sigma:"\u03A3",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",sim:"\u223C",simdot:"\u2A6A",sime:"\u2243",simeq:"\u2243",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2A33",smeparsl:"\u29E4",smid:"\u2223",smile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",SOFTcy:"\u042C",softcy:"\u044C",solbar:"\u233F",solb:"\u29C4",sol:"/",Sopf:"\u{1D54A}",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\uFE00",sqcup:"\u2294",sqcups:"\u2294\uFE00",Sqrt:"\u221A",sqsub:"\u228F",sqsube:"\u2291",sqsubset:"\u228F",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",square:"\u25A1",Square:"\u25A1",SquareIntersection:"\u2293",SquareSubset:"\u228F",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25AA",squ:"\u25A1",squf:"\u25AA",srarr:"\u2192",Sscr:"\u{1D4AE}",sscr:"\u{1D4C8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22C6",Star:"\u22C6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03F5",straightphi:"\u03D5",strns:"\xAF",sub:"\u2282",Sub:"\u22D0",subdot:"\u2ABD",subE:"\u2AC5",sube:"\u2286",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subne:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",subset:"\u2282",Subset:"\u22D0",subseteq:"\u2286",subseteqq:"\u2AC5",SubsetEqual:"\u2286",subsetneq:"\u228A",subsetneqq:"\u2ACB",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",succapprox:"\u2AB8",succ:"\u227B",succcurlyeq:"\u227D",Succeeds:"\u227B",SucceedsEqual:"\u2AB0",SucceedsSlantEqual:"\u227D",SucceedsTilde:"\u227F",succeq:"\u2AB0",succnapprox:"\u2ABA",succneqq:"\u2AB6",succnsim:"\u22E9",succsim:"\u227F",SuchThat:"\u220B",sum:"\u2211",Sum:"\u2211",sung:"\u266A",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",sup:"\u2283",Sup:"\u22D1",supdot:"\u2ABE",supdsub:"\u2AD8",supE:"\u2AC6",supe:"\u2287",supedot:"\u2AC4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supne:"\u228B",supplus:"\u2AC0",supset:"\u2283",Supset:"\u22D1",supseteq:"\u2287",supseteqq:"\u2AC6",supsetneq:"\u228B",supsetneqq:"\u2ACC",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swarhk:"\u2926",swarr:"\u2199",swArr:"\u21D9",swarrow:"\u2199",swnwar:"\u292A",szlig:"\xDF",Tab:"	",target:"\u2316",Tau:"\u03A4",tau:"\u03C4",tbrk:"\u23B4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20DB",telrec:"\u2315",Tfr:"\u{1D517}",tfr:"\u{1D531}",there4:"\u2234",therefore:"\u2234",Therefore:"\u2234",Theta:"\u0398",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",thickapprox:"\u2248",thicksim:"\u223C",ThickSpace:"\u205F\u200A",ThinSpace:"\u2009",thinsp:"\u2009",thkap:"\u2248",thksim:"\u223C",THORN:"\xDE",thorn:"\xFE",tilde:"\u02DC",Tilde:"\u223C",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",timesbar:"\u2A31",timesb:"\u22A0",times:"\xD7",timesd:"\u2A30",tint:"\u222D",toea:"\u2928",topbot:"\u2336",topcir:"\u2AF1",top:"\u22A4",Topf:"\u{1D54B}",topf:"\u{1D565}",topfork:"\u2ADA",tosa:"\u2929",tprime:"\u2034",trade:"\u2122",TRADE:"\u2122",triangle:"\u25B5",triangledown:"\u25BF",triangleleft:"\u25C3",trianglelefteq:"\u22B4",triangleq:"\u225C",triangleright:"\u25B9",trianglerighteq:"\u22B5",tridot:"\u25EC",trie:"\u225C",triminus:"\u2A3A",TripleDot:"\u20DB",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",Tscr:"\u{1D4AF}",tscr:"\u{1D4C9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040B",tshcy:"\u045B",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226C",twoheadleftarrow:"\u219E",twoheadrightarrow:"\u21A0",Uacute:"\xDA",uacute:"\xFA",uarr:"\u2191",Uarr:"\u219F",uArr:"\u21D1",Uarrocir:"\u2949",Ubrcy:"\u040E",ubrcy:"\u045E",Ubreve:"\u016C",ubreve:"\u016D",Ucirc:"\xDB",ucirc:"\xFB",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21C5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296E",ufisht:"\u297E",Ufr:"\u{1D518}",ufr:"\u{1D532}",Ugrave:"\xD9",ugrave:"\xF9",uHar:"\u2963",uharl:"\u21BF",uharr:"\u21BE",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",Umacr:"\u016A",umacr:"\u016B",uml:"\xA8",UnderBar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",UnionPlus:"\u228E",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1D54C}",uopf:"\u{1D566}",UpArrowBar:"\u2912",uparrow:"\u2191",UpArrow:"\u2191",Uparrow:"\u21D1",UpArrowDownArrow:"\u21C5",updownarrow:"\u2195",UpDownArrow:"\u2195",Updownarrow:"\u21D5",UpEquilibrium:"\u296E",upharpoonleft:"\u21BF",upharpoonright:"\u21BE",uplus:"\u228E",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",upsi:"\u03C5",Upsi:"\u03D2",upsih:"\u03D2",Upsilon:"\u03A5",upsilon:"\u03C5",UpTeeArrow:"\u21A5",UpTee:"\u22A5",upuparrows:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",Uring:"\u016E",uring:"\u016F",urtri:"\u25F9",Uscr:"\u{1D4B0}",uscr:"\u{1D4CA}",utdot:"\u22F0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25B5",utrif:"\u25B4",uuarr:"\u21C8",Uuml:"\xDC",uuml:"\xFC",uwangle:"\u29A7",vangrt:"\u299C",varepsilon:"\u03F5",varkappa:"\u03F0",varnothing:"\u2205",varphi:"\u03D5",varpi:"\u03D6",varpropto:"\u221D",varr:"\u2195",vArr:"\u21D5",varrho:"\u03F1",varsigma:"\u03C2",varsubsetneq:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vartheta:"\u03D1",vartriangleleft:"\u22B2",vartriangleright:"\u22B3",vBar:"\u2AE8",Vbar:"\u2AEB",vBarv:"\u2AE9",Vcy:"\u0412",vcy:"\u0432",vdash:"\u22A2",vDash:"\u22A8",Vdash:"\u22A9",VDash:"\u22AB",Vdashl:"\u2AE6",veebar:"\u22BB",vee:"\u2228",Vee:"\u22C1",veeeq:"\u225A",vellip:"\u22EE",verbar:"|",Verbar:"\u2016",vert:"|",Vert:"\u2016",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200A",Vfr:"\u{1D519}",vfr:"\u{1D533}",vltri:"\u22B2",vnsub:"\u2282\u20D2",vnsup:"\u2283\u20D2",Vopf:"\u{1D54D}",vopf:"\u{1D567}",vprop:"\u221D",vrtri:"\u22B3",Vscr:"\u{1D4B1}",vscr:"\u{1D4CB}",vsubnE:"\u2ACB\uFE00",vsubne:"\u228A\uFE00",vsupnE:"\u2ACC\uFE00",vsupne:"\u228B\uFE00",Vvdash:"\u22AA",vzigzag:"\u299A",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2A5F",wedge:"\u2227",Wedge:"\u22C0",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1D51A}",wfr:"\u{1D534}",Wopf:"\u{1D54E}",wopf:"\u{1D568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1D4B2}",wscr:"\u{1D4CC}",xcap:"\u22C2",xcirc:"\u25EF",xcup:"\u22C3",xdtri:"\u25BD",Xfr:"\u{1D51B}",xfr:"\u{1D535}",xharr:"\u27F7",xhArr:"\u27FA",Xi:"\u039E",xi:"\u03BE",xlarr:"\u27F5",xlArr:"\u27F8",xmap:"\u27FC",xnis:"\u22FB",xodot:"\u2A00",Xopf:"\u{1D54F}",xopf:"\u{1D569}",xoplus:"\u2A01",xotime:"\u2A02",xrarr:"\u27F6",xrArr:"\u27F9",Xscr:"\u{1D4B3}",xscr:"\u{1D4CD}",xsqcup:"\u2A06",xuplus:"\u2A04",xutri:"\u25B3",xvee:"\u22C1",xwedge:"\u22C0",Yacute:"\xDD",yacute:"\xFD",YAcy:"\u042F",yacy:"\u044F",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042B",ycy:"\u044B",yen:"\xA5",Yfr:"\u{1D51C}",yfr:"\u{1D536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1D550}",yopf:"\u{1D56A}",Yscr:"\u{1D4B4}",yscr:"\u{1D4CE}",YUcy:"\u042E",yucy:"\u044E",yuml:"\xFF",Yuml:"\u0178",Zacute:"\u0179",zacute:"\u017A",Zcaron:"\u017D",zcaron:"\u017E",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017B",zdot:"\u017C",zeetrf:"\u2128",ZeroWidthSpace:"\u200B",Zeta:"\u0396",zeta:"\u03B6",zfr:"\u{1D537}",Zfr:"\u2128",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21DD",zopf:"\u{1D56B}",Zopf:"\u2124",Zscr:"\u{1D4B5}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"}});var H0=I(($_e,wU)=>{"use strict";wU.exports=yU()});var Tg=I((j_e,CU)=>{CU.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/});var _U=I((U_e,EU)=>{"use strict";var bU={};function Qse(t){var e,r,n=bU[t];if(n)return n;for(n=bU[t]=[],e=0;e<128;e++)r=String.fromCharCode(e),/^[0-9a-z]$/i.test(r)?n.push(r):n.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2));for(e=0;e<t.length;e++)n[t.charCodeAt(e)]=t[e];return n}function Ag(t,e,r){var n,o,i,s,a,c="";for(typeof e!="string"&&(r=e,e=Ag.defaultChars),typeof r=="undefined"&&(r=!0),a=Qse(e),n=0,o=t.length;n<o;n++){if(i=t.charCodeAt(n),r&&i===37&&n+2<o&&/^[0-9a-f]{2}$/i.test(t.slice(n+1,n+3))){c+=t.slice(n,n+3),n+=2;continue}if(i<128){c+=a[i];continue}if(i>=55296&&i<=57343){if(i>=55296&&i<=56319&&n+1<o&&(s=t.charCodeAt(n+1),s>=56320&&s<=57343)){c+=encodeURIComponent(t[n]+t[n+1]),n++;continue}c+="%EF%BF%BD";continue}c+=encodeURIComponent(t[n])}return c}Ag.defaultChars=";/?:@&=+$,-_.!~*'()#";Ag.componentChars="-_.!~*'()";EU.exports=Ag});var PU=I((B_e,xU)=>{"use strict";var SU={};function Xse(t){var e,r,n=SU[t];if(n)return n;for(n=SU[t]=[],e=0;e<128;e++)r=String.fromCharCode(e),n.push(r);for(e=0;e<t.length;e++)r=t.charCodeAt(e),n[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2);return n}function Dg(t,e){var r;return typeof e!="string"&&(e=Dg.defaultChars),r=Xse(e),t.replace(/(%[a-f0-9]{2})+/gi,function(n){var o,i,s,a,c,l,u,d="";for(o=0,i=n.length;o<i;o+=3){if(s=parseInt(n.slice(o+1,o+3),16),s<128){d+=r[s];continue}if((s&224)==192&&o+3<i&&(a=parseInt(n.slice(o+4,o+6),16),(a&192)==128)){u=s<<6&1984|a&63,u<128?d+="\uFFFD\uFFFD":d+=String.fromCharCode(u),o+=3;continue}if((s&240)==224&&o+6<i&&(a=parseInt(n.slice(o+4,o+6),16),c=parseInt(n.slice(o+7,o+9),16),(a&192)==128&&(c&192)==128)){u=s<<12&61440|a<<6&4032|c&63,u<2048||u>=55296&&u<=57343?d+="\uFFFD\uFFFD\uFFFD":d+=String.fromCharCode(u),o+=6;continue}if((s&248)==240&&o+9<i&&(a=parseInt(n.slice(o+4,o+6),16),c=parseInt(n.slice(o+7,o+9),16),l=parseInt(n.slice(o+10,o+12),16),(a&192)==128&&(c&192)==128&&(l&192)==128)){u=s<<18&1835008|a<<12&258048|c<<6&4032|l&63,u<65536||u>1114111?d+="\uFFFD\uFFFD\uFFFD\uFFFD":(u-=65536,d+=String.fromCharCode(55296+(u>>10),56320+(u&1023))),o+=9;continue}d+="\uFFFD"}return d})}Dg.defaultChars=";/?:@&=+$,#";Dg.componentChars="";xU.exports=Dg});var IU=I((H_e,kU)=>{"use strict";kU.exports=function(e){var r="";return r+=e.protocol||"",r+=e.slashes?"//":"",r+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?r+="["+e.hostname+"]":r+=e.hostname||"",r+=e.port?":"+e.port:"",r+=e.pathname||"",r+=e.search||"",r+=e.hash||"",r}});var LU=I((V_e,NU)=>{"use strict";function Rg(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var Zse=/^([a-z0-9.+-]+:)/i,eae=/:[0-9]*$/,tae=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,rae=["<",">",'"',"`"," ","\r",`
`,"	"],nae=["{","}","|","\\","^","`"].concat(rae),oae=["'"].concat(nae),TU=["%","/","?",";","#"].concat(oae),AU=["/","?","#"],iae=255,DU=/^[+a-z0-9A-Z_-]{0,63}$/,sae=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,RU={javascript:!0,"javascript:":!0},OU={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function aae(t,e){if(t&&t instanceof Rg)return t;var r=new Rg;return r.parse(t,e),r}Rg.prototype.parse=function(t,e){var r,n,o,i,s,a=t;if(a=a.trim(),!e&&t.split("#").length===1){var c=tae.exec(a);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}var l=Zse.exec(a);if(l&&(l=l[0],o=l.toLowerCase(),this.protocol=l,a=a.substr(l.length)),(e||l||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(s=a.substr(0,2)==="//",s&&!(l&&RU[l])&&(a=a.substr(2),this.slashes=!0)),!RU[l]&&(s||l&&!OU[l])){var u=-1;for(r=0;r<AU.length;r++)i=a.indexOf(AU[r]),i!==-1&&(u===-1||i<u)&&(u=i);var d,f;for(u===-1?f=a.lastIndexOf("@"):f=a.lastIndexOf("@",u),f!==-1&&(d=a.slice(0,f),a=a.slice(f+1),this.auth=d),u=-1,r=0;r<TU.length;r++)i=a.indexOf(TU[r]),i!==-1&&(u===-1||i<u)&&(u=i);u===-1&&(u=a.length),a[u-1]===":"&&u--;var p=a.slice(0,u);a=a.slice(u),this.parseHost(p),this.hostname=this.hostname||"";var h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){var m=this.hostname.split(/\./);for(r=0,n=m.length;r<n;r++){var g=m[r];if(!!g&&!g.match(DU)){for(var v="",y=0,b=g.length;y<b;y++)g.charCodeAt(y)>127?v+="x":v+=g[y];if(!v.match(DU)){var C=m.slice(0,r),_=m.slice(r+1),P=g.match(sae);P&&(C.push(P[1]),_.unshift(P[2])),_.length&&(a=_.join(".")+a),this.hostname=C.join(".");break}}}}this.hostname.length>iae&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var S=a.indexOf("#");S!==-1&&(this.hash=a.substr(S),a=a.slice(0,S));var k=a.indexOf("?");return k!==-1&&(this.search=a.substr(k),a=a.slice(0,k)),a&&(this.pathname=a),OU[o]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Rg.prototype.parseHost=function(t){var e=eae.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};NU.exports=aae});var V0=I((W_e,qd)=>{"use strict";qd.exports.encode=_U();qd.exports.decode=PU();qd.exports.format=IU();qd.exports.parse=LU()});var W0=I((G_e,FU)=>{FU.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/});var G0=I((z_e,MU)=>{MU.exports=/[\0-\x1F\x7F-\x9F]/});var $U=I((K_e,qU)=>{qU.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/});var z0=I((Y_e,jU)=>{jU.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/});var UU=I(Zc=>{"use strict";Zc.Any=W0();Zc.Cc=G0();Zc.Cf=$U();Zc.P=Tg();Zc.Z=z0()});var ze=I(Nt=>{"use strict";function cae(t){return Object.prototype.toString.call(t)}function lae(t){return cae(t)==="[object String]"}var uae=Object.prototype.hasOwnProperty;function BU(t,e){return uae.call(t,e)}function dae(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(r){if(!!r){if(typeof r!="object")throw new TypeError(r+"must be object");Object.keys(r).forEach(function(n){t[n]=r[n]})}}),t}function fae(t,e,r){return[].concat(t.slice(0,e),r,t.slice(e+1))}function HU(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)==65535||(t&65535)==65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function VU(t){if(t>65535){t-=65536;var e=55296+(t>>10),r=56320+(t&1023);return String.fromCharCode(e,r)}return String.fromCharCode(t)}var WU=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,pae=/&([a-z#][a-z0-9]{1,31});/gi,hae=new RegExp(WU.source+"|"+pae.source,"gi"),mae=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,GU=H0();function gae(t,e){var r=0;return BU(GU,e)?GU[e]:e.charCodeAt(0)===35&&mae.test(e)&&(r=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10),HU(r))?VU(r):t}function vae(t){return t.indexOf("\\")<0?t:t.replace(WU,"$1")}function yae(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(hae,function(e,r,n){return r||gae(e,n)})}var wae=/[&<>"]/,Cae=/[&<>"]/g,bae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Eae(t){return bae[t]}function _ae(t){return wae.test(t)?t.replace(Cae,Eae):t}var Sae=/[.?*+^$[\]\\(){}|-]/g;function xae(t){return t.replace(Sae,"\\$&")}function Pae(t){switch(t){case 9:case 32:return!0}return!1}function kae(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var Iae=Tg();function Tae(t){return Iae.test(t)}function Aae(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Dae(t){return t=t.trim().replace(/\s+/g," "),"\u1E9E".toLowerCase()==="\u1E7E"&&(t=t.replace(//g,"\xDF")),t.toLowerCase().toUpperCase()}Nt.lib={};Nt.lib.mdurl=V0();Nt.lib.ucmicro=UU();Nt.assign=dae;Nt.isString=lae;Nt.has=BU;Nt.unescapeMd=vae;Nt.unescapeAll=yae;Nt.isValidEntityCode=HU;Nt.fromCodePoint=VU;Nt.escapeHtml=_ae;Nt.arrayReplaceAt=fae;Nt.isSpace=Pae;Nt.isWhiteSpace=kae;Nt.isMdAsciiPunct=Aae;Nt.isPunctChar=Tae;Nt.escapeRE=xae;Nt.normalizeReference=Dae});var KU=I((X_e,zU)=>{"use strict";zU.exports=function(e,r,n){var o,i,s,a,c=-1,l=e.posMax,u=e.pos;for(e.pos=r+1,o=1;e.pos<l;){if(s=e.src.charCodeAt(e.pos),s===93&&(o--,o===0)){i=!0;break}if(a=e.pos,e.md.inline.skipToken(e),s===91){if(a===e.pos-1)o++;else if(n)return e.pos=u,-1}}return i&&(c=e.pos),e.pos=u,c}});var QU=I((Z_e,JU)=>{"use strict";var YU=ze().unescapeAll;JU.exports=function(e,r,n){var o,i,s=0,a=r,c={ok:!1,pos:0,lines:0,str:""};if(e.charCodeAt(r)===60){for(r++;r<n;){if(o=e.charCodeAt(r),o===10||o===60)return c;if(o===62)return c.pos=r+1,c.str=YU(e.slice(a+1,r)),c.ok=!0,c;if(o===92&&r+1<n){r+=2;continue}r++}return c}for(i=0;r<n&&(o=e.charCodeAt(r),!(o===32||o<32||o===127));){if(o===92&&r+1<n){if(e.charCodeAt(r+1)===32)break;r+=2;continue}if(o===40&&(i++,i>32))return c;if(o===41){if(i===0)break;i--}r++}return a===r||i!==0||(c.str=YU(e.slice(a,r)),c.lines=s,c.pos=r,c.ok=!0),c}});var ZU=I((eSe,XU)=>{"use strict";var Rae=ze().unescapeAll;XU.exports=function(e,r,n){var o,i,s=0,a=r,c={ok:!1,pos:0,lines:0,str:""};if(r>=n||(i=e.charCodeAt(r),i!==34&&i!==39&&i!==40))return c;for(r++,i===40&&(i=41);r<n;){if(o=e.charCodeAt(r),o===i)return c.pos=r+1,c.lines=s,c.str=Rae(e.slice(a+1,r)),c.ok=!0,c;if(o===40&&i===41)return c;o===10?s++:o===92&&r+1<n&&(r++,e.charCodeAt(r)===10&&s++),r++}return c}});var eB=I(Og=>{"use strict";Og.parseLinkLabel=KU();Og.parseLinkDestination=QU();Og.parseLinkTitle=ZU()});var rB=I((rSe,tB)=>{"use strict";var Oae=ze().assign,Nae=ze().unescapeAll,ma=ze().escapeHtml,Eo={};Eo.code_inline=function(t,e,r,n,o){var i=t[e];return"<code"+o.renderAttrs(i)+">"+ma(t[e].content)+"</code>"};Eo.code_block=function(t,e,r,n,o){var i=t[e];return"<pre"+o.renderAttrs(i)+"><code>"+ma(t[e].content)+`</code></pre>
`};Eo.fence=function(t,e,r,n,o){var i=t[e],s=i.info?Nae(i.info).trim():"",a="",c="",l,u,d,f,p;return s&&(d=s.split(/(\s+)/g),a=d[0],c=d.slice(2).join("")),r.highlight?l=r.highlight(i.content,a,c)||ma(i.content):l=ma(i.content),l.indexOf("<pre")===0?l+`
`:s?(u=i.attrIndex("class"),f=i.attrs?i.attrs.slice():[],u<0?f.push(["class",r.langPrefix+a]):(f[u]=f[u].slice(),f[u][1]+=" "+r.langPrefix+a),p={attrs:f},"<pre><code"+o.renderAttrs(p)+">"+l+`</code></pre>
`):"<pre><code"+o.renderAttrs(i)+">"+l+`</code></pre>
`};Eo.image=function(t,e,r,n,o){var i=t[e];return i.attrs[i.attrIndex("alt")][1]=o.renderInlineAsText(i.children,r,n),o.renderToken(t,e,r)};Eo.hardbreak=function(t,e,r){return r.xhtmlOut?`<br />
`:`<br>
`};Eo.softbreak=function(t,e,r){return r.breaks?r.xhtmlOut?`<br />
`:`<br>
`:`
`};Eo.text=function(t,e){return ma(t[e].content)};Eo.html_block=function(t,e){return t[e].content};Eo.html_inline=function(t,e){return t[e].content};function el(){this.rules=Oae({},Eo)}el.prototype.renderAttrs=function(e){var r,n,o;if(!e.attrs)return"";for(o="",r=0,n=e.attrs.length;r<n;r++)o+=" "+ma(e.attrs[r][0])+'="'+ma(e.attrs[r][1])+'"';return o};el.prototype.renderToken=function(e,r,n){var o,i="",s=!1,a=e[r];return a.hidden?"":(a.block&&a.nesting!==-1&&r&&e[r-1].hidden&&(i+=`
`),i+=(a.nesting===-1?"</":"<")+a.tag,i+=this.renderAttrs(a),a.nesting===0&&n.xhtmlOut&&(i+=" /"),a.block&&(s=!0,a.nesting===1&&r+1<e.length&&(o=e[r+1],(o.type==="inline"||o.hidden||o.nesting===-1&&o.tag===a.tag)&&(s=!1))),i+=s?`>
`:">",i)};el.prototype.renderInline=function(t,e,r){for(var n,o="",i=this.rules,s=0,a=t.length;s<a;s++)n=t[s].type,typeof i[n]!="undefined"?o+=i[n](t,s,e,r,this):o+=this.renderToken(t,s,e);return o};el.prototype.renderInlineAsText=function(t,e,r){for(var n="",o=0,i=t.length;o<i;o++)t[o].type==="text"?n+=t[o].content:t[o].type==="image"?n+=this.renderInlineAsText(t[o].children,e,r):t[o].type==="softbreak"&&(n+=`
`);return n};el.prototype.render=function(t,e,r){var n,o,i,s="",a=this.rules;for(n=0,o=t.length;n<o;n++)i=t[n].type,i==="inline"?s+=this.renderInline(t[n].children,e,r):typeof a[i]!="undefined"?s+=a[t[n].type](t,n,e,r,this):s+=this.renderToken(t,n,e,r);return s};tB.exports=el});var Ng=I((nSe,nB)=>{"use strict";function Bn(){this.__rules__=[],this.__cache__=null}Bn.prototype.__find__=function(t){for(var e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};Bn.prototype.__compile__=function(){var t=this,e=[""];t.__rules__.forEach(function(r){!r.enabled||r.alt.forEach(function(n){e.indexOf(n)<0&&e.push(n)})}),t.__cache__={},e.forEach(function(r){t.__cache__[r]=[],t.__rules__.forEach(function(n){!n.enabled||r&&n.alt.indexOf(r)<0||t.__cache__[r].push(n.fn)})})};Bn.prototype.at=function(t,e,r){var n=this.__find__(t),o=r||{};if(n===-1)throw new Error("Parser rule not found: "+t);this.__rules__[n].fn=e,this.__rules__[n].alt=o.alt||[],this.__cache__=null};Bn.prototype.before=function(t,e,r,n){var o=this.__find__(t),i=n||{};if(o===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(o,0,{name:e,enabled:!0,fn:r,alt:i.alt||[]}),this.__cache__=null};Bn.prototype.after=function(t,e,r,n){var o=this.__find__(t),i=n||{};if(o===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(o+1,0,{name:e,enabled:!0,fn:r,alt:i.alt||[]}),this.__cache__=null};Bn.prototype.push=function(t,e,r){var n=r||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:n.alt||[]}),this.__cache__=null};Bn.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);var r=[];return t.forEach(function(n){var o=this.__find__(n);if(o<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[o].enabled=!0,r.push(n)},this),this.__cache__=null,r};Bn.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(r){r.enabled=!1}),this.enable(t,e)};Bn.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);var r=[];return t.forEach(function(n){var o=this.__find__(n);if(o<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[o].enabled=!1,r.push(n)},this),this.__cache__=null,r};Bn.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};nB.exports=Bn});var iB=I((oSe,oB)=>{"use strict";var Lae=/\r\n?|\n/g,Fae=/\0/g;oB.exports=function(e){var r;r=e.src.replace(Lae,`
`),r=r.replace(Fae,"\uFFFD"),e.src=r}});var aB=I((iSe,sB)=>{"use strict";sB.exports=function(e){var r;e.inlineMode?(r=new e.Token("inline","",0),r.content=e.src,r.map=[0,1],r.children=[],e.tokens.push(r)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}});var lB=I((sSe,cB)=>{"use strict";cB.exports=function(e){var r=e.tokens,n,o,i;for(o=0,i=r.length;o<i;o++)n=r[o],n.type==="inline"&&e.md.inline.parse(n.content,e.md,e.env,n.children)}});var dB=I((aSe,uB)=>{"use strict";var Mae=ze().arrayReplaceAt;function qae(t){return/^<a[>\s]/i.test(t)}function $ae(t){return/^<\/a\s*>/i.test(t)}uB.exports=function(e){var r,n,o,i,s,a,c,l,u,d,f,p,h,m,g,v,y=e.tokens,b;if(!!e.md.options.linkify){for(n=0,o=y.length;n<o;n++)if(!(y[n].type!=="inline"||!e.md.linkify.pretest(y[n].content)))for(i=y[n].children,h=0,r=i.length-1;r>=0;r--){if(a=i[r],a.type==="link_close"){for(r--;i[r].level!==a.level&&i[r].type!=="link_open";)r--;continue}if(a.type==="html_inline"&&(qae(a.content)&&h>0&&h--,$ae(a.content)&&h++),!(h>0)&&a.type==="text"&&e.md.linkify.test(a.content)){for(u=a.content,b=e.md.linkify.match(u),c=[],p=a.level,f=0,l=0;l<b.length;l++)m=b[l].url,g=e.md.normalizeLink(m),!!e.md.validateLink(g)&&(v=b[l].text,b[l].schema?b[l].schema==="mailto:"&&!/^mailto:/i.test(v)?v=e.md.normalizeLinkText("mailto:"+v).replace(/^mailto:/,""):v=e.md.normalizeLinkText(v):v=e.md.normalizeLinkText("http://"+v).replace(/^http:\/\//,""),d=b[l].index,d>f&&(s=new e.Token("text","",0),s.content=u.slice(f,d),s.level=p,c.push(s)),s=new e.Token("link_open","a",1),s.attrs=[["href",g]],s.level=p++,s.markup="linkify",s.info="auto",c.push(s),s=new e.Token("text","",0),s.content=v,s.level=p,c.push(s),s=new e.Token("link_close","a",-1),s.level=--p,s.markup="linkify",s.info="auto",c.push(s),f=b[l].lastIndex);f<u.length&&(s=new e.Token("text","",0),s.content=u.slice(f),s.level=p,c.push(s)),y[n].children=i=Mae(i,r,c)}}}}});var hB=I((cSe,pB)=>{"use strict";var fB=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,jae=/\((c|tm|r|p)\)/i,Uae=/\((c|tm|r|p)\)/ig,Bae={c:"\xA9",r:"\xAE",p:"\xA7",tm:"\u2122"};function Hae(t,e){return Bae[e.toLowerCase()]}function Vae(t){var e,r,n=0;for(e=t.length-1;e>=0;e--)r=t[e],r.type==="text"&&!n&&(r.content=r.content.replace(Uae,Hae)),r.type==="link_open"&&r.info==="auto"&&n--,r.type==="link_close"&&r.info==="auto"&&n++}function Wae(t){var e,r,n=0;for(e=t.length-1;e>=0;e--)r=t[e],r.type==="text"&&!n&&fB.test(r.content)&&(r.content=r.content.replace(/\+-/g,"\xB1").replace(/\.{2,}/g,"\u2026").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1\u2014").replace(/(^|\s)--(?=\s|$)/mg,"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1\u2013")),r.type==="link_open"&&r.info==="auto"&&n--,r.type==="link_close"&&r.info==="auto"&&n++}pB.exports=function(e){var r;if(!!e.md.options.typographer)for(r=e.tokens.length-1;r>=0;r--)e.tokens[r].type==="inline"&&(jae.test(e.tokens[r].content)&&Vae(e.tokens[r].children),fB.test(e.tokens[r].content)&&Wae(e.tokens[r].children))}});var bB=I((lSe,CB)=>{"use strict";var mB=ze().isWhiteSpace,gB=ze().isPunctChar,vB=ze().isMdAsciiPunct,Gae=/['"]/,yB=/['"]/g,wB="\u2019";function Lg(t,e,r){return t.substr(0,e)+r+t.substr(e+1)}function zae(t,e){var r,n,o,i,s,a,c,l,u,d,f,p,h,m,g,v,y,b,C,_,P;for(C=[],r=0;r<t.length;r++){for(n=t[r],c=t[r].level,y=C.length-1;y>=0&&!(C[y].level<=c);y--);if(C.length=y+1,n.type!=="text")continue;o=n.content,s=0,a=o.length;e:for(;s<a&&(yB.lastIndex=s,i=yB.exec(o),!!i);){if(g=v=!0,s=i.index+1,b=i[0]==="'",u=32,i.index-1>=0)u=o.charCodeAt(i.index-1);else for(y=r-1;y>=0&&!(t[y].type==="softbreak"||t[y].type==="hardbreak");y--)if(!!t[y].content){u=t[y].content.charCodeAt(t[y].content.length-1);break}if(d=32,s<a)d=o.charCodeAt(s);else for(y=r+1;y<t.length&&!(t[y].type==="softbreak"||t[y].type==="hardbreak");y++)if(!!t[y].content){d=t[y].content.charCodeAt(0);break}if(f=vB(u)||gB(String.fromCharCode(u)),p=vB(d)||gB(String.fromCharCode(d)),h=mB(u),m=mB(d),m?g=!1:p&&(h||f||(g=!1)),h?v=!1:f&&(m||p||(v=!1)),d===34&&i[0]==='"'&&u>=48&&u<=57&&(v=g=!1),g&&v&&(g=f,v=p),!g&&!v){b&&(n.content=Lg(n.content,i.index,wB));continue}if(v){for(y=C.length-1;y>=0&&(l=C[y],!(C[y].level<c));y--)if(l.single===b&&C[y].level===c){l=C[y],b?(_=e.md.options.quotes[2],P=e.md.options.quotes[3]):(_=e.md.options.quotes[0],P=e.md.options.quotes[1]),n.content=Lg(n.content,i.index,P),t[l.token].content=Lg(t[l.token].content,l.pos,_),s+=P.length-1,l.token===r&&(s+=_.length-1),o=n.content,a=o.length,C.length=y;continue e}}g?C.push({token:r,pos:i.index,single:b,level:c}):v&&b&&(n.content=Lg(n.content,i.index,wB))}}}CB.exports=function(e){var r;if(!!e.md.options.typographer)for(r=e.tokens.length-1;r>=0;r--)e.tokens[r].type!=="inline"||!Gae.test(e.tokens[r].content)||zae(e.tokens[r].children,e)}});var Fg=I((uSe,EB)=>{"use strict";function tl(t,e,r){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=r,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}tl.prototype.attrIndex=function(e){var r,n,o;if(!this.attrs)return-1;for(r=this.attrs,n=0,o=r.length;n<o;n++)if(r[n][0]===e)return n;return-1};tl.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};tl.prototype.attrSet=function(e,r){var n=this.attrIndex(e),o=[e,r];n<0?this.attrPush(o):this.attrs[n]=o};tl.prototype.attrGet=function(e){var r=this.attrIndex(e),n=null;return r>=0&&(n=this.attrs[r][1]),n};tl.prototype.attrJoin=function(e,r){var n=this.attrIndex(e);n<0?this.attrPush([e,r]):this.attrs[n][1]=this.attrs[n][1]+" "+r};EB.exports=tl});var xB=I((dSe,SB)=>{"use strict";var Kae=Fg();function _B(t,e,r){this.src=t,this.env=r,this.tokens=[],this.inlineMode=!1,this.md=e}_B.prototype.Token=Kae;SB.exports=_B});var kB=I((fSe,PB)=>{"use strict";var Yae=Ng(),K0=[["normalize",iB()],["block",aB()],["inline",lB()],["linkify",dB()],["replacements",hB()],["smartquotes",bB()]];function Y0(){this.ruler=new Yae;for(var t=0;t<K0.length;t++)this.ruler.push(K0[t][0],K0[t][1])}Y0.prototype.process=function(t){var e,r,n;for(n=this.ruler.getRules(""),e=0,r=n.length;e<r;e++)n[e](t)};Y0.prototype.State=xB();PB.exports=Y0});var AB=I((pSe,TB)=>{"use strict";var J0=ze().isSpace;function Q0(t,e){var r=t.bMarks[e]+t.tShift[e],n=t.eMarks[e];return t.src.substr(r,n-r)}function IB(t){var e=[],r=0,n=t.length,o,i=!1,s=0,a="";for(o=t.charCodeAt(r);r<n;)o===124&&(i?(a+=t.substring(s,r-1),s=r):(e.push(a+t.substring(s,r)),a="",s=r+1)),i=o===92,r++,o=t.charCodeAt(r);return e.push(a+t.substring(s)),e}TB.exports=function(e,r,n,o){var i,s,a,c,l,u,d,f,p,h,m,g,v,y,b,C,_,P;if(r+2>n||(u=r+1,e.sCount[u]<e.blkIndent)||e.sCount[u]-e.blkIndent>=4||(a=e.bMarks[u]+e.tShift[u],a>=e.eMarks[u])||(_=e.src.charCodeAt(a++),_!==124&&_!==45&&_!==58)||a>=e.eMarks[u]||(P=e.src.charCodeAt(a++),P!==124&&P!==45&&P!==58&&!J0(P))||_===45&&J0(P))return!1;for(;a<e.eMarks[u];){if(i=e.src.charCodeAt(a),i!==124&&i!==45&&i!==58&&!J0(i))return!1;a++}for(s=Q0(e,r+1),d=s.split("|"),h=[],c=0;c<d.length;c++){if(m=d[c].trim(),!m){if(c===0||c===d.length-1)continue;return!1}if(!/^:?-+:?$/.test(m))return!1;m.charCodeAt(m.length-1)===58?h.push(m.charCodeAt(0)===58?"center":"right"):m.charCodeAt(0)===58?h.push("left"):h.push("")}if(s=Q0(e,r).trim(),s.indexOf("|")===-1||e.sCount[r]-e.blkIndent>=4||(d=IB(s),d.length&&d[0]===""&&d.shift(),d.length&&d[d.length-1]===""&&d.pop(),f=d.length,f===0||f!==h.length))return!1;if(o)return!0;for(y=e.parentType,e.parentType="table",C=e.md.block.ruler.getRules("blockquote"),p=e.push("table_open","table",1),p.map=g=[r,0],p=e.push("thead_open","thead",1),p.map=[r,r+1],p=e.push("tr_open","tr",1),p.map=[r,r+1],c=0;c<d.length;c++)p=e.push("th_open","th",1),h[c]&&(p.attrs=[["style","text-align:"+h[c]]]),p=e.push("inline","",0),p.content=d[c].trim(),p.children=[],p=e.push("th_close","th",-1);for(p=e.push("tr_close","tr",-1),p=e.push("thead_close","thead",-1),u=r+2;u<n&&!(e.sCount[u]<e.blkIndent);u++){for(b=!1,c=0,l=C.length;c<l;c++)if(C[c](e,u,n,!0)){b=!0;break}if(b||(s=Q0(e,u).trim(),!s)||e.sCount[u]-e.blkIndent>=4)break;for(d=IB(s),d.length&&d[0]===""&&d.shift(),d.length&&d[d.length-1]===""&&d.pop(),u===r+2&&(p=e.push("tbody_open","tbody",1),p.map=v=[r+2,0]),p=e.push("tr_open","tr",1),p.map=[u,u+1],c=0;c<f;c++)p=e.push("td_open","td",1),h[c]&&(p.attrs=[["style","text-align:"+h[c]]]),p=e.push("inline","",0),p.content=d[c]?d[c].trim():"",p.children=[],p=e.push("td_close","td",-1);p=e.push("tr_close","tr",-1)}return v&&(p=e.push("tbody_close","tbody",-1),v[1]=u),p=e.push("table_close","table",-1),g[1]=u,e.parentType=y,e.line=u,!0}});var RB=I((hSe,DB)=>{"use strict";DB.exports=function(e,r,n){var o,i,s;if(e.sCount[r]-e.blkIndent<4)return!1;for(i=o=r+1;o<n;){if(e.isEmpty(o)){o++;continue}if(e.sCount[o]-e.blkIndent>=4){o++,i=o;continue}break}return e.line=i,s=e.push("code_block","code",0),s.content=e.getLines(r,i,4+e.blkIndent,!1)+`
`,s.map=[r,e.line],!0}});var NB=I((mSe,OB)=>{"use strict";OB.exports=function(e,r,n,o){var i,s,a,c,l,u,d,f=!1,p=e.bMarks[r]+e.tShift[r],h=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||p+3>h||(i=e.src.charCodeAt(p),i!==126&&i!==96)||(l=p,p=e.skipChars(p,i),s=p-l,s<3)||(d=e.src.slice(l,p),a=e.src.slice(p,h),i===96&&a.indexOf(String.fromCharCode(i))>=0))return!1;if(o)return!0;for(c=r;c++,!(c>=n||(p=l=e.bMarks[c]+e.tShift[c],h=e.eMarks[c],p<h&&e.sCount[c]<e.blkIndent));)if(e.src.charCodeAt(p)===i&&!(e.sCount[c]-e.blkIndent>=4)&&(p=e.skipChars(p,i),!(p-l<s)&&(p=e.skipSpaces(p),!(p<h)))){f=!0;break}return s=e.sCount[r],e.line=c+(f?1:0),u=e.push("fence","code",0),u.info=a,u.content=e.getLines(r+1,c,s,!0),u.markup=d,u.map=[r,e.line],!0}});var MB=I((gSe,FB)=>{"use strict";var LB=ze().isSpace;FB.exports=function(e,r,n,o){var i,s,a,c,l,u,d,f,p,h,m,g,v,y,b,C,_,P,S,k,T=e.lineMax,A=e.bMarks[r]+e.tShift[r],F=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||e.src.charCodeAt(A++)!==62)return!1;if(o)return!0;for(c=p=e.sCount[r]+1,e.src.charCodeAt(A)===32?(A++,c++,p++,i=!1,C=!0):e.src.charCodeAt(A)===9?(C=!0,(e.bsCount[r]+p)%4==3?(A++,c++,p++,i=!1):i=!0):C=!1,h=[e.bMarks[r]],e.bMarks[r]=A;A<F&&(s=e.src.charCodeAt(A),LB(s));){s===9?p+=4-(p+e.bsCount[r]+(i?1:0))%4:p++;A++}for(m=[e.bsCount[r]],e.bsCount[r]=e.sCount[r]+1+(C?1:0),u=A>=F,y=[e.sCount[r]],e.sCount[r]=p-c,b=[e.tShift[r]],e.tShift[r]=A-e.bMarks[r],P=e.md.block.ruler.getRules("blockquote"),v=e.parentType,e.parentType="blockquote",f=r+1;f<n&&(k=e.sCount[f]<e.blkIndent,A=e.bMarks[f]+e.tShift[f],F=e.eMarks[f],!(A>=F));f++){if(e.src.charCodeAt(A++)===62&&!k){for(c=p=e.sCount[f]+1,e.src.charCodeAt(A)===32?(A++,c++,p++,i=!1,C=!0):e.src.charCodeAt(A)===9?(C=!0,(e.bsCount[f]+p)%4==3?(A++,c++,p++,i=!1):i=!0):C=!1,h.push(e.bMarks[f]),e.bMarks[f]=A;A<F&&(s=e.src.charCodeAt(A),LB(s));){s===9?p+=4-(p+e.bsCount[f]+(i?1:0))%4:p++;A++}u=A>=F,m.push(e.bsCount[f]),e.bsCount[f]=e.sCount[f]+1+(C?1:0),y.push(e.sCount[f]),e.sCount[f]=p-c,b.push(e.tShift[f]),e.tShift[f]=A-e.bMarks[f];continue}if(u)break;for(_=!1,a=0,l=P.length;a<l;a++)if(P[a](e,f,n,!0)){_=!0;break}if(_){e.lineMax=f,e.blkIndent!==0&&(h.push(e.bMarks[f]),m.push(e.bsCount[f]),b.push(e.tShift[f]),y.push(e.sCount[f]),e.sCount[f]-=e.blkIndent);break}h.push(e.bMarks[f]),m.push(e.bsCount[f]),b.push(e.tShift[f]),y.push(e.sCount[f]),e.sCount[f]=-1}for(g=e.blkIndent,e.blkIndent=0,S=e.push("blockquote_open","blockquote",1),S.markup=">",S.map=d=[r,0],e.md.block.tokenize(e,r,f),S=e.push("blockquote_close","blockquote",-1),S.markup=">",e.lineMax=T,e.parentType=v,d[1]=e.line,a=0;a<b.length;a++)e.bMarks[a+r]=h[a],e.tShift[a+r]=b[a],e.sCount[a+r]=y[a],e.bsCount[a+r]=m[a];return e.blkIndent=g,!0}});var $B=I((vSe,qB)=>{"use strict";var Jae=ze().isSpace;qB.exports=function(e,r,n,o){var i,s,a,c,l=e.bMarks[r]+e.tShift[r],u=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||(i=e.src.charCodeAt(l++),i!==42&&i!==45&&i!==95))return!1;for(s=1;l<u;){if(a=e.src.charCodeAt(l++),a!==i&&!Jae(a))return!1;a===i&&s++}return s<3?!1:(o||(e.line=r+1,c=e.push("hr","hr",0),c.map=[r,e.line],c.markup=Array(s+1).join(String.fromCharCode(i))),!0)}});var VB=I((ySe,HB)=>{"use strict";var jB=ze().isSpace;function UB(t,e){var r,n,o,i;return n=t.bMarks[e]+t.tShift[e],o=t.eMarks[e],r=t.src.charCodeAt(n++),r!==42&&r!==45&&r!==43||n<o&&(i=t.src.charCodeAt(n),!jB(i))?-1:n}function BB(t,e){var r,n=t.bMarks[e]+t.tShift[e],o=n,i=t.eMarks[e];if(o+1>=i||(r=t.src.charCodeAt(o++),r<48||r>57))return-1;for(;;){if(o>=i)return-1;if(r=t.src.charCodeAt(o++),r>=48&&r<=57){if(o-n>=10)return-1;continue}if(r===41||r===46)break;return-1}return o<i&&(r=t.src.charCodeAt(o),!jB(r))?-1:o}function Qae(t,e){var r,n,o=t.level+2;for(r=e+2,n=t.tokens.length-2;r<n;r++)t.tokens[r].level===o&&t.tokens[r].type==="paragraph_open"&&(t.tokens[r+2].hidden=!0,t.tokens[r].hidden=!0,r+=2)}HB.exports=function(e,r,n,o){var i,s,a,c,l,u,d,f,p,h,m,g,v,y,b,C,_,P,S,k,T,A,F,j,J,Y,ae,te,M=!1,L=!0;if(e.sCount[r]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[r]-e.listIndent>=4&&e.sCount[r]<e.blkIndent)return!1;if(o&&e.parentType==="paragraph"&&e.sCount[r]>=e.blkIndent&&(M=!0),(F=BB(e,r))>=0){if(d=!0,J=e.bMarks[r]+e.tShift[r],v=Number(e.src.slice(J,F-1)),M&&v!==1)return!1}else if((F=UB(e,r))>=0)d=!1;else return!1;if(M&&e.skipSpaces(F)>=e.eMarks[r])return!1;if(g=e.src.charCodeAt(F-1),o)return!0;for(m=e.tokens.length,d?(te=e.push("ordered_list_open","ol",1),v!==1&&(te.attrs=[["start",v]])):te=e.push("bullet_list_open","ul",1),te.map=h=[r,0],te.markup=String.fromCharCode(g),b=r,j=!1,ae=e.md.block.ruler.getRules("list"),P=e.parentType,e.parentType="list";b<n;){for(A=F,y=e.eMarks[b],u=C=e.sCount[b]+F-(e.bMarks[r]+e.tShift[r]);A<y;){if(i=e.src.charCodeAt(A),i===9)C+=4-(C+e.bsCount[b])%4;else if(i===32)C++;else break;A++}if(s=A,s>=y?l=1:l=C-u,l>4&&(l=1),c=u+l,te=e.push("list_item_open","li",1),te.markup=String.fromCharCode(g),te.map=f=[r,0],d&&(te.info=e.src.slice(J,F-1)),T=e.tight,k=e.tShift[r],S=e.sCount[r],_=e.listIndent,e.listIndent=e.blkIndent,e.blkIndent=c,e.tight=!0,e.tShift[r]=s-e.bMarks[r],e.sCount[r]=C,s>=y&&e.isEmpty(r+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,r,n,!0),(!e.tight||j)&&(L=!1),j=e.line-r>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=_,e.tShift[r]=k,e.sCount[r]=S,e.tight=T,te=e.push("list_item_close","li",-1),te.markup=String.fromCharCode(g),b=r=e.line,f[1]=b,s=e.bMarks[r],b>=n||e.sCount[b]<e.blkIndent||e.sCount[r]-e.blkIndent>=4)break;for(Y=!1,a=0,p=ae.length;a<p;a++)if(ae[a](e,b,n,!0)){Y=!0;break}if(Y)break;if(d){if(F=BB(e,b),F<0)break;J=e.bMarks[b]+e.tShift[b]}else if(F=UB(e,b),F<0)break;if(g!==e.src.charCodeAt(F-1))break}return d?te=e.push("ordered_list_close","ol",-1):te=e.push("bullet_list_close","ul",-1),te.markup=String.fromCharCode(g),h[1]=b,e.line=b,e.parentType=P,L&&Qae(e,m),!0}});var GB=I((wSe,WB)=>{"use strict";var Xae=ze().normalizeReference,Mg=ze().isSpace;WB.exports=function(e,r,n,o){var i,s,a,c,l,u,d,f,p,h,m,g,v,y,b,C,_=0,P=e.bMarks[r]+e.tShift[r],S=e.eMarks[r],k=r+1;if(e.sCount[r]-e.blkIndent>=4||e.src.charCodeAt(P)!==91)return!1;for(;++P<S;)if(e.src.charCodeAt(P)===93&&e.src.charCodeAt(P-1)!==92){if(P+1===S||e.src.charCodeAt(P+1)!==58)return!1;break}for(c=e.lineMax,b=e.md.block.ruler.getRules("reference"),h=e.parentType,e.parentType="reference";k<c&&!e.isEmpty(k);k++)if(!(e.sCount[k]-e.blkIndent>3)&&!(e.sCount[k]<0)){for(y=!1,u=0,d=b.length;u<d;u++)if(b[u](e,k,c,!0)){y=!0;break}if(y)break}for(v=e.getLines(r,k,e.blkIndent,!1).trim(),S=v.length,P=1;P<S;P++){if(i=v.charCodeAt(P),i===91)return!1;if(i===93){p=P;break}else i===10?_++:i===92&&(P++,P<S&&v.charCodeAt(P)===10&&_++)}if(p<0||v.charCodeAt(p+1)!==58)return!1;for(P=p+2;P<S;P++)if(i=v.charCodeAt(P),i===10)_++;else if(!Mg(i))break;if(m=e.md.helpers.parseLinkDestination(v,P,S),!m.ok||(l=e.md.normalizeLink(m.str),!e.md.validateLink(l)))return!1;for(P=m.pos,_+=m.lines,s=P,a=_,g=P;P<S;P++)if(i=v.charCodeAt(P),i===10)_++;else if(!Mg(i))break;for(m=e.md.helpers.parseLinkTitle(v,P,S),P<S&&g!==P&&m.ok?(C=m.str,P=m.pos,_+=m.lines):(C="",P=s,_=a);P<S&&(i=v.charCodeAt(P),!!Mg(i));)P++;if(P<S&&v.charCodeAt(P)!==10&&C)for(C="",P=s,_=a;P<S&&(i=v.charCodeAt(P),!!Mg(i));)P++;return P<S&&v.charCodeAt(P)!==10||(f=Xae(v.slice(1,p)),!f)?!1:(o||(typeof e.env.references=="undefined"&&(e.env.references={}),typeof e.env.references[f]=="undefined"&&(e.env.references[f]={title:C,href:l}),e.parentType=h,e.line=r+_+1),!0)}});var KB=I((CSe,zB)=>{"use strict";zB.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]});var Z0=I((bSe,X0)=>{"use strict";var Zae="[a-zA-Z_:][a-zA-Z0-9:._-]*",ece="[^\"'=<>`\\x00-\\x20]+",tce="'[^']*'",rce='"[^"]*"',nce="(?:"+ece+"|"+tce+"|"+rce+")",oce="(?:\\s+"+Zae+"(?:\\s*=\\s*"+nce+")?)",YB="<[A-Za-z][A-Za-z0-9\\-]*"+oce+"*\\s*\\/?>",JB="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",ice="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",sce="<[?][\\s\\S]*?[?]>",ace="<![A-Z]+\\s+[^>]*>",cce="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",lce=new RegExp("^(?:"+YB+"|"+JB+"|"+ice+"|"+sce+"|"+ace+"|"+cce+")"),uce=new RegExp("^(?:"+YB+"|"+JB+")");X0.exports.HTML_TAG_RE=lce;X0.exports.HTML_OPEN_CLOSE_TAG_RE=uce});var XB=I((ESe,QB)=>{"use strict";var dce=KB(),fce=Z0().HTML_OPEN_CLOSE_TAG_RE,rl=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+dce.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(fce.source+"\\s*$"),/^$/,!1]];QB.exports=function(e,r,n,o){var i,s,a,c,l=e.bMarks[r]+e.tShift[r],u=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(l)!==60)return!1;for(c=e.src.slice(l,u),i=0;i<rl.length&&!rl[i][0].test(c);i++);if(i===rl.length)return!1;if(o)return rl[i][2];if(s=r+1,!rl[i][1].test(c)){for(;s<n&&!(e.sCount[s]<e.blkIndent);s++)if(l=e.bMarks[s]+e.tShift[s],u=e.eMarks[s],c=e.src.slice(l,u),rl[i][1].test(c)){c.length!==0&&s++;break}}return e.line=s,a=e.push("html_block","",0),a.map=[r,s],a.content=e.getLines(r,s,e.blkIndent,!0),!0}});var t2=I((_Se,e2)=>{"use strict";var ZB=ze().isSpace;e2.exports=function(e,r,n,o){var i,s,a,c,l=e.bMarks[r]+e.tShift[r],u=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||(i=e.src.charCodeAt(l),i!==35||l>=u))return!1;for(s=1,i=e.src.charCodeAt(++l);i===35&&l<u&&s<=6;)s++,i=e.src.charCodeAt(++l);return s>6||l<u&&!ZB(i)?!1:(o||(u=e.skipSpacesBack(u,l),a=e.skipCharsBack(u,35,l),a>l&&ZB(e.src.charCodeAt(a-1))&&(u=a),e.line=r+1,c=e.push("heading_open","h"+String(s),1),c.markup="########".slice(0,s),c.map=[r,e.line],c=e.push("inline","",0),c.content=e.src.slice(l,u).trim(),c.map=[r,e.line],c.children=[],c=e.push("heading_close","h"+String(s),-1),c.markup="########".slice(0,s)),!0)}});var n2=I((SSe,r2)=>{"use strict";r2.exports=function(e,r,n){var o,i,s,a,c,l,u,d,f,p=r+1,h,m=e.md.block.ruler.getRules("paragraph");if(e.sCount[r]-e.blkIndent>=4)return!1;for(h=e.parentType,e.parentType="paragraph";p<n&&!e.isEmpty(p);p++)if(!(e.sCount[p]-e.blkIndent>3)){if(e.sCount[p]>=e.blkIndent&&(l=e.bMarks[p]+e.tShift[p],u=e.eMarks[p],l<u&&(f=e.src.charCodeAt(l),(f===45||f===61)&&(l=e.skipChars(l,f),l=e.skipSpaces(l),l>=u)))){d=f===61?1:2;break}if(!(e.sCount[p]<0)){for(i=!1,s=0,a=m.length;s<a;s++)if(m[s](e,p,n,!0)){i=!0;break}if(i)break}}return d?(o=e.getLines(r,p,e.blkIndent,!1).trim(),e.line=p+1,c=e.push("heading_open","h"+String(d),1),c.markup=String.fromCharCode(f),c.map=[r,e.line],c=e.push("inline","",0),c.content=o,c.map=[r,e.line-1],c.children=[],c=e.push("heading_close","h"+String(d),-1),c.markup=String.fromCharCode(f),e.parentType=h,!0):!1}});var i2=I((xSe,o2)=>{"use strict";o2.exports=function(e,r){var n,o,i,s,a,c,l=r+1,u=e.md.block.ruler.getRules("paragraph"),d=e.lineMax;for(c=e.parentType,e.parentType="paragraph";l<d&&!e.isEmpty(l);l++)if(!(e.sCount[l]-e.blkIndent>3)&&!(e.sCount[l]<0)){for(o=!1,i=0,s=u.length;i<s;i++)if(u[i](e,l,d,!0)){o=!0;break}if(o)break}return n=e.getLines(r,l,e.blkIndent,!1).trim(),e.line=l,a=e.push("paragraph_open","p",1),a.map=[r,e.line],a=e.push("inline","",0),a.content=n,a.map=[r,e.line],a.children=[],a=e.push("paragraph_close","p",-1),e.parentType=c,!0}});var c2=I((PSe,a2)=>{"use strict";var s2=Fg(),qg=ze().isSpace;function _o(t,e,r,n){var o,i,s,a,c,l,u,d;for(this.src=t,this.md=e,this.env=r,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",i=this.src,d=!1,s=a=l=u=0,c=i.length;a<c;a++){if(o=i.charCodeAt(a),!d)if(qg(o)){l++,o===9?u+=4-u%4:u++;continue}else d=!0;(o===10||a===c-1)&&(o!==10&&a++,this.bMarks.push(s),this.eMarks.push(a),this.tShift.push(l),this.sCount.push(u),this.bsCount.push(0),d=!1,l=0,u=0,s=a+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}_o.prototype.push=function(t,e,r){var n=new s2(t,e,r);return n.block=!0,r<0&&this.level--,n.level=this.level,r>0&&this.level++,this.tokens.push(n),n};_o.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};_o.prototype.skipEmptyLines=function(e){for(var r=this.lineMax;e<r&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};_o.prototype.skipSpaces=function(e){for(var r,n=this.src.length;e<n&&(r=this.src.charCodeAt(e),!!qg(r));e++);return e};_o.prototype.skipSpacesBack=function(e,r){if(e<=r)return e;for(;e>r;)if(!qg(this.src.charCodeAt(--e)))return e+1;return e};_o.prototype.skipChars=function(e,r){for(var n=this.src.length;e<n&&this.src.charCodeAt(e)===r;e++);return e};_o.prototype.skipCharsBack=function(e,r,n){if(e<=n)return e;for(;e>n;)if(r!==this.src.charCodeAt(--e))return e+1;return e};_o.prototype.getLines=function(e,r,n,o){var i,s,a,c,l,u,d,f=e;if(e>=r)return"";for(u=new Array(r-e),i=0;f<r;f++,i++){for(s=0,d=c=this.bMarks[f],f+1<r||o?l=this.eMarks[f]+1:l=this.eMarks[f];c<l&&s<n;){if(a=this.src.charCodeAt(c),qg(a))a===9?s+=4-(s+this.bsCount[f])%4:s++;else if(c-d<this.tShift[f])s++;else break;c++}s>n?u[i]=new Array(s-n+1).join(" ")+this.src.slice(c,l):u[i]=this.src.slice(c,l)}return u.join("")};_o.prototype.Token=s2;a2.exports=_o});var u2=I((kSe,l2)=>{"use strict";var pce=Ng(),$g=[["table",AB(),["paragraph","reference"]],["code",RB()],["fence",NB(),["paragraph","reference","blockquote","list"]],["blockquote",MB(),["paragraph","reference","blockquote","list"]],["hr",$B(),["paragraph","reference","blockquote","list"]],["list",VB(),["paragraph","reference","blockquote"]],["reference",GB()],["html_block",XB(),["paragraph","reference","blockquote"]],["heading",t2(),["paragraph","reference","blockquote"]],["lheading",n2()],["paragraph",i2()]];function jg(){this.ruler=new pce;for(var t=0;t<$g.length;t++)this.ruler.push($g[t][0],$g[t][1],{alt:($g[t][2]||[]).slice()})}jg.prototype.tokenize=function(t,e,r){for(var n,o,i=this.ruler.getRules(""),s=i.length,a=e,c=!1,l=t.md.options.maxNesting;a<r&&(t.line=a=t.skipEmptyLines(a),!(a>=r||t.sCount[a]<t.blkIndent));){if(t.level>=l){t.line=r;break}for(o=0;o<s&&(n=i[o](t,a,r,!1),!n);o++);t.tight=!c,t.isEmpty(t.line-1)&&(c=!0),a=t.line,a<r&&t.isEmpty(a)&&(c=!0,a++,t.line=a)}};jg.prototype.parse=function(t,e,r,n){var o;!t||(o=new this.State(t,e,r,n),this.tokenize(o,o.line,o.lineMax))};jg.prototype.State=c2();l2.exports=jg});var f2=I((ISe,d2)=>{"use strict";function hce(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}d2.exports=function(e,r){for(var n=e.pos;n<e.posMax&&!hce(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(r||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}});var h2=I((TSe,p2)=>{"use strict";var mce=ze().isSpace;p2.exports=function(e,r){var n,o,i,s=e.pos;if(e.src.charCodeAt(s)!==10)return!1;if(n=e.pending.length-1,o=e.posMax,!r)if(n>=0&&e.pending.charCodeAt(n)===32)if(n>=1&&e.pending.charCodeAt(n-1)===32){for(i=n-1;i>=1&&e.pending.charCodeAt(i-1)===32;)i--;e.pending=e.pending.slice(0,i),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(s++;s<o&&mce(e.src.charCodeAt(s));)s++;return e.pos=s,!0}});var g2=I((ASe,m2)=>{"use strict";var gce=ze().isSpace,e_=[];for(t_=0;t_<256;t_++)e_.push(0);var t_;"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){e_[t.charCodeAt(0)]=1});m2.exports=function(e,r){var n,o=e.pos,i=e.posMax;if(e.src.charCodeAt(o)!==92)return!1;if(o++,o<i){if(n=e.src.charCodeAt(o),n<256&&e_[n]!==0)return r||(e.pending+=e.src[o]),e.pos+=2,!0;if(n===10){for(r||e.push("hardbreak","br",0),o++;o<i&&(n=e.src.charCodeAt(o),!!gce(n));)o++;return e.pos=o,!0}}return r||(e.pending+="\\"),e.pos++,!0}});var y2=I((DSe,v2)=>{"use strict";v2.exports=function(e,r){var n,o,i,s,a,c,l,u,d=e.pos,f=e.src.charCodeAt(d);if(f!==96)return!1;for(n=d,d++,o=e.posMax;d<o&&e.src.charCodeAt(d)===96;)d++;if(i=e.src.slice(n,d),l=i.length,e.backticksScanned&&(e.backticks[l]||0)<=n)return r||(e.pending+=i),e.pos+=l,!0;for(a=c=d;(a=e.src.indexOf("`",c))!==-1;){for(c=a+1;c<o&&e.src.charCodeAt(c)===96;)c++;if(u=c-a,u===l)return r||(s=e.push("code_inline","code",0),s.markup=i,s.content=e.src.slice(d,a).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),e.pos=c,!0;e.backticks[u]=a}return e.backticksScanned=!0,r||(e.pending+=i),e.pos+=l,!0}});var n_=I((RSe,r_)=>{"use strict";r_.exports.tokenize=function(e,r){var n,o,i,s,a,c=e.pos,l=e.src.charCodeAt(c);if(r||l!==126||(o=e.scanDelims(e.pos,!0),s=o.length,a=String.fromCharCode(l),s<2))return!1;for(s%2&&(i=e.push("text","",0),i.content=a,s--),n=0;n<s;n+=2)i=e.push("text","",0),i.content=a+a,e.delimiters.push({marker:l,length:0,token:e.tokens.length-1,end:-1,open:o.can_open,close:o.can_close});return e.pos+=o.length,!0};function w2(t,e){var r,n,o,i,s,a=[],c=e.length;for(r=0;r<c;r++)o=e[r],o.marker===126&&o.end!==-1&&(i=e[o.end],s=t.tokens[o.token],s.type="s_open",s.tag="s",s.nesting=1,s.markup="~~",s.content="",s=t.tokens[i.token],s.type="s_close",s.tag="s",s.nesting=-1,s.markup="~~",s.content="",t.tokens[i.token-1].type==="text"&&t.tokens[i.token-1].content==="~"&&a.push(i.token-1));for(;a.length;){for(r=a.pop(),n=r+1;n<t.tokens.length&&t.tokens[n].type==="s_close";)n++;n--,r!==n&&(s=t.tokens[n],t.tokens[n]=t.tokens[r],t.tokens[r]=s)}}r_.exports.postProcess=function(e){var r,n=e.tokens_meta,o=e.tokens_meta.length;for(w2(e,e.delimiters),r=0;r<o;r++)n[r]&&n[r].delimiters&&w2(e,n[r].delimiters)}});var i_=I((OSe,o_)=>{"use strict";o_.exports.tokenize=function(e,r){var n,o,i,s=e.pos,a=e.src.charCodeAt(s);if(r||a!==95&&a!==42)return!1;for(o=e.scanDelims(e.pos,a===42),n=0;n<o.length;n++)i=e.push("text","",0),i.content=String.fromCharCode(a),e.delimiters.push({marker:a,length:o.length,token:e.tokens.length-1,end:-1,open:o.can_open,close:o.can_close});return e.pos+=o.length,!0};function C2(t,e){var r,n,o,i,s,a,c=e.length;for(r=c-1;r>=0;r--)n=e[r],!(n.marker!==95&&n.marker!==42)&&n.end!==-1&&(o=e[n.end],a=r>0&&e[r-1].end===n.end+1&&e[r-1].marker===n.marker&&e[r-1].token===n.token-1&&e[n.end+1].token===o.token+1,s=String.fromCharCode(n.marker),i=t.tokens[n.token],i.type=a?"strong_open":"em_open",i.tag=a?"strong":"em",i.nesting=1,i.markup=a?s+s:s,i.content="",i=t.tokens[o.token],i.type=a?"strong_close":"em_close",i.tag=a?"strong":"em",i.nesting=-1,i.markup=a?s+s:s,i.content="",a&&(t.tokens[e[r-1].token].content="",t.tokens[e[n.end+1].token].content="",r--))}o_.exports.postProcess=function(e){var r,n=e.tokens_meta,o=e.tokens_meta.length;for(C2(e,e.delimiters),r=0;r<o;r++)n[r]&&n[r].delimiters&&C2(e,n[r].delimiters)}});var E2=I((NSe,b2)=>{"use strict";var vce=ze().normalizeReference,s_=ze().isSpace;b2.exports=function(e,r){var n,o,i,s,a,c,l,u,d,f="",p="",h=e.pos,m=e.posMax,g=e.pos,v=!0;if(e.src.charCodeAt(e.pos)!==91||(a=e.pos+1,s=e.md.helpers.parseLinkLabel(e,e.pos,!0),s<0))return!1;if(c=s+1,c<m&&e.src.charCodeAt(c)===40){for(v=!1,c++;c<m&&(o=e.src.charCodeAt(c),!(!s_(o)&&o!==10));c++);if(c>=m)return!1;if(g=c,l=e.md.helpers.parseLinkDestination(e.src,c,e.posMax),l.ok){for(f=e.md.normalizeLink(l.str),e.md.validateLink(f)?c=l.pos:f="",g=c;c<m&&(o=e.src.charCodeAt(c),!(!s_(o)&&o!==10));c++);if(l=e.md.helpers.parseLinkTitle(e.src,c,e.posMax),c<m&&g!==c&&l.ok)for(p=l.str,c=l.pos;c<m&&(o=e.src.charCodeAt(c),!(!s_(o)&&o!==10));c++);}(c>=m||e.src.charCodeAt(c)!==41)&&(v=!0),c++}if(v){if(typeof e.env.references=="undefined")return!1;if(c<m&&e.src.charCodeAt(c)===91?(g=c+1,c=e.md.helpers.parseLinkLabel(e,c),c>=0?i=e.src.slice(g,c++):c=s+1):c=s+1,i||(i=e.src.slice(a,s)),u=e.env.references[vce(i)],!u)return e.pos=h,!1;f=u.href,p=u.title}return r||(e.pos=a,e.posMax=s,d=e.push("link_open","a",1),d.attrs=n=[["href",f]],p&&n.push(["title",p]),e.md.inline.tokenize(e),d=e.push("link_close","a",-1)),e.pos=c,e.posMax=m,!0}});var S2=I((LSe,_2)=>{"use strict";var yce=ze().normalizeReference,a_=ze().isSpace;_2.exports=function(e,r){var n,o,i,s,a,c,l,u,d,f,p,h,m,g="",v=e.pos,y=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91||(c=e.pos+2,a=e.md.helpers.parseLinkLabel(e,e.pos+1,!1),a<0))return!1;if(l=a+1,l<y&&e.src.charCodeAt(l)===40){for(l++;l<y&&(o=e.src.charCodeAt(l),!(!a_(o)&&o!==10));l++);if(l>=y)return!1;for(m=l,d=e.md.helpers.parseLinkDestination(e.src,l,e.posMax),d.ok&&(g=e.md.normalizeLink(d.str),e.md.validateLink(g)?l=d.pos:g=""),m=l;l<y&&(o=e.src.charCodeAt(l),!(!a_(o)&&o!==10));l++);if(d=e.md.helpers.parseLinkTitle(e.src,l,e.posMax),l<y&&m!==l&&d.ok)for(f=d.str,l=d.pos;l<y&&(o=e.src.charCodeAt(l),!(!a_(o)&&o!==10));l++);else f="";if(l>=y||e.src.charCodeAt(l)!==41)return e.pos=v,!1;l++}else{if(typeof e.env.references=="undefined")return!1;if(l<y&&e.src.charCodeAt(l)===91?(m=l+1,l=e.md.helpers.parseLinkLabel(e,l),l>=0?s=e.src.slice(m,l++):l=a+1):l=a+1,s||(s=e.src.slice(c,a)),u=e.env.references[yce(s)],!u)return e.pos=v,!1;g=u.href,f=u.title}return r||(i=e.src.slice(c,a),e.md.inline.parse(i,e.md,e.env,h=[]),p=e.push("image","img",0),p.attrs=n=[["src",g],["alt",""]],p.children=h,p.content=i,f&&n.push(["title",f])),e.pos=l,e.posMax=y,!0}});var P2=I((FSe,x2)=>{"use strict";var wce=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Cce=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/;x2.exports=function(e,r){var n,o,i,s,a,c,l=e.pos;if(e.src.charCodeAt(l)!==60)return!1;for(a=e.pos,c=e.posMax;;){if(++l>=c||(s=e.src.charCodeAt(l),s===60))return!1;if(s===62)break}return n=e.src.slice(a+1,l),Cce.test(n)?(o=e.md.normalizeLink(n),e.md.validateLink(o)?(r||(i=e.push("link_open","a",1),i.attrs=[["href",o]],i.markup="autolink",i.info="auto",i=e.push("text","",0),i.content=e.md.normalizeLinkText(n),i=e.push("link_close","a",-1),i.markup="autolink",i.info="auto"),e.pos+=n.length+2,!0):!1):wce.test(n)?(o=e.md.normalizeLink("mailto:"+n),e.md.validateLink(o)?(r||(i=e.push("link_open","a",1),i.attrs=[["href",o]],i.markup="autolink",i.info="auto",i=e.push("text","",0),i.content=e.md.normalizeLinkText(n),i=e.push("link_close","a",-1),i.markup="autolink",i.info="auto"),e.pos+=n.length+2,!0):!1):!1}});var I2=I((MSe,k2)=>{"use strict";var bce=Z0().HTML_TAG_RE;function Ece(t){var e=t|32;return e>=97&&e<=122}k2.exports=function(e,r){var n,o,i,s,a=e.pos;return!e.md.options.html||(i=e.posMax,e.src.charCodeAt(a)!==60||a+2>=i)||(n=e.src.charCodeAt(a+1),n!==33&&n!==63&&n!==47&&!Ece(n))||(o=e.src.slice(a).match(bce),!o)?!1:(r||(s=e.push("html_inline","",0),s.content=e.src.slice(a,a+o[0].length)),e.pos+=o[0].length,!0)}});var R2=I((qSe,D2)=>{"use strict";var T2=H0(),_ce=ze().has,Sce=ze().isValidEntityCode,A2=ze().fromCodePoint,xce=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Pce=/^&([a-z][a-z0-9]{1,31});/i;D2.exports=function(e,r){var n,o,i,s=e.pos,a=e.posMax;if(e.src.charCodeAt(s)!==38)return!1;if(s+1<a){if(n=e.src.charCodeAt(s+1),n===35){if(i=e.src.slice(s).match(xce),i)return r||(o=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),e.pending+=Sce(o)?A2(o):A2(65533)),e.pos+=i[0].length,!0}else if(i=e.src.slice(s).match(Pce),i&&_ce(T2,i[1]))return r||(e.pending+=T2[i[1]]),e.pos+=i[0].length,!0}return r||(e.pending+="&"),e.pos++,!0}});var L2=I(($Se,N2)=>{"use strict";function O2(t,e){var r,n,o,i,s,a,c,l,u={},d=e.length;if(!!d){var f=0,p=-2,h=[];for(r=0;r<d;r++)if(o=e[r],h.push(0),(e[f].marker!==o.marker||p!==o.token-1)&&(f=r),p=o.token,o.length=o.length||0,!!o.close){for(u.hasOwnProperty(o.marker)||(u[o.marker]=[-1,-1,-1,-1,-1,-1]),s=u[o.marker][(o.open?3:0)+o.length%3],n=f-h[f]-1,a=n;n>s;n-=h[n]+1)if(i=e[n],i.marker===o.marker&&i.open&&i.end<0&&(c=!1,(i.close||o.open)&&(i.length+o.length)%3==0&&(i.length%3!=0||o.length%3!=0)&&(c=!0),!c)){l=n>0&&!e[n-1].open?h[n-1]+1:0,h[r]=r-n+l,h[n]=l,o.open=!1,i.end=r,i.close=!1,a=-1,p=-2;break}a!==-1&&(u[o.marker][(o.open?3:0)+(o.length||0)%3]=a)}}}N2.exports=function(e){var r,n=e.tokens_meta,o=e.tokens_meta.length;for(O2(e,e.delimiters),r=0;r<o;r++)n[r]&&n[r].delimiters&&O2(e,n[r].delimiters)}});var M2=I((jSe,F2)=>{"use strict";F2.exports=function(e){var r,n,o=0,i=e.tokens,s=e.tokens.length;for(r=n=0;r<s;r++)i[r].nesting<0&&o--,i[r].level=o,i[r].nesting>0&&o++,i[r].type==="text"&&r+1<s&&i[r+1].type==="text"?i[r+1].content=i[r].content+i[r+1].content:(r!==n&&(i[n]=i[r]),n++);r!==n&&(i.length=n)}});var B2=I((USe,U2)=>{"use strict";var c_=Fg(),q2=ze().isWhiteSpace,$2=ze().isPunctChar,j2=ze().isMdAsciiPunct;function $d(t,e,r,n){this.src=t,this.env=r,this.md=e,this.tokens=n,this.tokens_meta=Array(n.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1}$d.prototype.pushPending=function(){var t=new c_("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};$d.prototype.push=function(t,e,r){this.pending&&this.pushPending();var n=new c_(t,e,r),o=null;return r<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),n.level=this.level,r>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],o={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(n),this.tokens_meta.push(o),n};$d.prototype.scanDelims=function(t,e){var r=t,n,o,i,s,a,c,l,u,d,f=!0,p=!0,h=this.posMax,m=this.src.charCodeAt(t);for(n=t>0?this.src.charCodeAt(t-1):32;r<h&&this.src.charCodeAt(r)===m;)r++;return i=r-t,o=r<h?this.src.charCodeAt(r):32,l=j2(n)||$2(String.fromCharCode(n)),d=j2(o)||$2(String.fromCharCode(o)),c=q2(n),u=q2(o),u?f=!1:d&&(c||l||(f=!1)),c?p=!1:l&&(u||d||(p=!1)),e?(s=f,a=p):(s=f&&(!p||l),a=p&&(!f||d)),{can_open:s,can_close:a,length:i}};$d.prototype.Token=c_;U2.exports=$d});var W2=I((BSe,V2)=>{"use strict";var H2=Ng(),l_=[["text",f2()],["newline",h2()],["escape",g2()],["backticks",y2()],["strikethrough",n_().tokenize],["emphasis",i_().tokenize],["link",E2()],["image",S2()],["autolink",P2()],["html_inline",I2()],["entity",R2()]],u_=[["balance_pairs",L2()],["strikethrough",n_().postProcess],["emphasis",i_().postProcess],["text_collapse",M2()]];function jd(){var t;for(this.ruler=new H2,t=0;t<l_.length;t++)this.ruler.push(l_[t][0],l_[t][1]);for(this.ruler2=new H2,t=0;t<u_.length;t++)this.ruler2.push(u_[t][0],u_[t][1])}jd.prototype.skipToken=function(t){var e,r,n=t.pos,o=this.ruler.getRules(""),i=o.length,s=t.md.options.maxNesting,a=t.cache;if(typeof a[n]!="undefined"){t.pos=a[n];return}if(t.level<s)for(r=0;r<i&&(t.level++,e=o[r](t,!0),t.level--,!e);r++);else t.pos=t.posMax;e||t.pos++,a[n]=t.pos};jd.prototype.tokenize=function(t){for(var e,r,n=this.ruler.getRules(""),o=n.length,i=t.posMax,s=t.md.options.maxNesting;t.pos<i;){if(t.level<s)for(r=0;r<o&&(e=n[r](t,!1),!e);r++);if(e){if(t.pos>=i)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};jd.prototype.parse=function(t,e,r,n){var o,i,s,a=new this.State(t,e,r,n);for(this.tokenize(a),i=this.ruler2.getRules(""),s=i.length,o=0;o<s;o++)i[o](a)};jd.prototype.State=B2();V2.exports=jd});var z2=I((HSe,G2)=>{"use strict";G2.exports=function(t){var e={};e.src_Any=W0().source,e.src_Cc=G0().source,e.src_Z=z0().source,e.src_P=Tg().source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");var r="[><\uFF5C]";return e.src_pseudo_letter="(?:(?!"+r+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+r+"|"+e.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+r+`|[()[\\]{}.,"'?!\\-]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-]).|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]).|"+(t&&t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+e.src_ZCc+").|\\!+(?!"+e.src_ZCc+"|[!]).|\\?(?!"+e.src_ZCc+"|[?]).)+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+r+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}});var Z2=I((VSe,X2)=>{"use strict";function d_(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(r){!r||Object.keys(r).forEach(function(n){t[n]=r[n]})}),t}function Ug(t){return Object.prototype.toString.call(t)}function kce(t){return Ug(t)==="[object String]"}function Ice(t){return Ug(t)==="[object Object]"}function Tce(t){return Ug(t)==="[object RegExp]"}function K2(t){return Ug(t)==="[object Function]"}function Ace(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var Y2={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function Dce(t){return Object.keys(t||{}).reduce(function(e,r){return e||Y2.hasOwnProperty(r)},!1)}var Rce={"http:":{validate:function(t,e,r){var n=t.slice(e);return r.re.http||(r.re.http=new RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(n)?n.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,r){var n=t.slice(e);return r.re.no_http||(r.re.no_http=new RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(n)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:n.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,r){var n=t.slice(e);return r.re.mailto||(r.re.mailto=new RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(n)?n.match(r.re.mailto)[0].length:0}}},Oce="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Nce="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function Lce(t){t.__index__=-1,t.__text_cache__=""}function Fce(t){return function(e,r){var n=e.slice(r);return t.test(n)?n.match(t)[0].length:0}}function J2(){return function(t,e){e.normalize(t)}}function Bg(t){var e=t.re=z2()(t.__opts__),r=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||r.push(Oce),r.push(e.src_xn),e.src_tlds=r.join("|");function n(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(n(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(n(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(n(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(n(e.tpl_host_fuzzy_test),"i");var o=[];t.__compiled__={};function i(a,c){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+c)}Object.keys(t.__schemas__).forEach(function(a){var c=t.__schemas__[a];if(c!==null){var l={validate:null,link:null};if(t.__compiled__[a]=l,Ice(c)){Tce(c.validate)?l.validate=Fce(c.validate):K2(c.validate)?l.validate=c.validate:i(a,c),K2(c.normalize)?l.normalize=c.normalize:c.normalize?i(a,c):l.normalize=J2();return}if(kce(c)){o.push(a);return}i(a,c)}}),o.forEach(function(a){!t.__compiled__[t.__schemas__[a]]||(t.__compiled__[a].validate=t.__compiled__[t.__schemas__[a]].validate,t.__compiled__[a].normalize=t.__compiled__[t.__schemas__[a]].normalize)}),t.__compiled__[""]={validate:null,normalize:J2()};var s=Object.keys(t.__compiled__).filter(function(a){return a.length>0&&t.__compiled__[a]}).map(Ace).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+s+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+s+")","ig"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),Lce(t)}function Mce(t,e){var r=t.__index__,n=t.__last_index__,o=t.__text_cache__.slice(r,n);this.schema=t.__schema__.toLowerCase(),this.index=r+e,this.lastIndex=n+e,this.raw=o,this.text=o,this.url=o}function Q2(t,e){var r=new Mce(t,e);return t.__compiled__[r.schema].normalize(r,t),r}function Sn(t,e){if(!(this instanceof Sn))return new Sn(t,e);e||Dce(t)&&(e=t,t={}),this.__opts__=d_({},Y2,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=d_({},Rce,t),this.__compiled__={},this.__tlds__=Nce,this.__tlds_replaced__=!1,this.re={},Bg(this)}Sn.prototype.add=function(e,r){return this.__schemas__[e]=r,Bg(this),this};Sn.prototype.set=function(e){return this.__opts__=d_(this.__opts__,e),this};Sn.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var r,n,o,i,s,a,c,l,u;if(this.re.schema_test.test(e)){for(c=this.re.schema_search,c.lastIndex=0;(r=c.exec(e))!==null;)if(i=this.testSchemaAt(e,r[2],c.lastIndex),i){this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test),l>=0&&(this.__index__<0||l<this.__index__)&&(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=n.index+n[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=n.index+n[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(u=e.indexOf("@"),u>=0&&(o=e.match(this.re.email_fuzzy))!==null&&(s=o.index+o[1].length,a=o.index+o[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=a))),this.__index__>=0};Sn.prototype.pretest=function(e){return this.re.pretest.test(e)};Sn.prototype.testSchemaAt=function(e,r,n){return this.__compiled__[r.toLowerCase()]?this.__compiled__[r.toLowerCase()].validate(e,n,this):0};Sn.prototype.match=function(e){var r=0,n=[];this.__index__>=0&&this.__text_cache__===e&&(n.push(Q2(this,r)),r=this.__last_index__);for(var o=r?e.slice(r):e;this.test(o);)n.push(Q2(this,r)),o=o.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};Sn.prototype.tlds=function(e,r){return e=Array.isArray(e)?e:[e],r?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(n,o,i){return n!==i[o-1]}).reverse(),Bg(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,Bg(this),this)};Sn.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};Sn.prototype.onCompile=function(){};X2.exports=Sn});var tH=I((WSe,eH)=>{"use strict";eH.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}});var nH=I((GSe,rH)=>{"use strict";rH.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}}});var iH=I((zSe,oH)=>{"use strict";oH.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}}});var lH=I((KSe,cH)=>{"use strict";var Ud=ze(),qce=eB(),$ce=rB(),jce=kB(),Uce=u2(),Bce=W2(),Hce=Z2(),ga=V0(),sH=require("punycode"),Vce={default:tH(),zero:nH(),commonmark:iH()},Wce=/^(vbscript|javascript|file|data):/,Gce=/^data:image\/(gif|png|jpeg|webp);/;function zce(t){var e=t.trim().toLowerCase();return Wce.test(e)?!!Gce.test(e):!0}var aH=["http:","https:","mailto:"];function Kce(t){var e=ga.parse(t,!0);if(e.hostname&&(!e.protocol||aH.indexOf(e.protocol)>=0))try{e.hostname=sH.toASCII(e.hostname)}catch{}return ga.encode(ga.format(e))}function Yce(t){var e=ga.parse(t,!0);if(e.hostname&&(!e.protocol||aH.indexOf(e.protocol)>=0))try{e.hostname=sH.toUnicode(e.hostname)}catch{}return ga.decode(ga.format(e),ga.decode.defaultChars+"%")}function xn(t,e){if(!(this instanceof xn))return new xn(t,e);e||Ud.isString(t)||(e=t||{},t="default"),this.inline=new Bce,this.block=new Uce,this.core=new jce,this.renderer=new $ce,this.linkify=new Hce,this.validateLink=zce,this.normalizeLink=Kce,this.normalizeLinkText=Yce,this.utils=Ud,this.helpers=Ud.assign({},qce),this.options={},this.configure(t),e&&this.set(e)}xn.prototype.set=function(t){return Ud.assign(this.options,t),this};xn.prototype.configure=function(t){var e=this,r;if(Ud.isString(t)&&(r=t,t=Vce[r],!t))throw new Error('Wrong `markdown-it` preset "'+r+'", check name');if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(n){t.components[n].rules&&e[n].ruler.enableOnly(t.components[n].rules),t.components[n].rules2&&e[n].ruler2.enableOnly(t.components[n].rules2)}),this};xn.prototype.enable=function(t,e){var r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(o){r=r.concat(this[o].ruler.enable(t,!0))},this),r=r.concat(this.inline.ruler2.enable(t,!0));var n=t.filter(function(o){return r.indexOf(o)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this};xn.prototype.disable=function(t,e){var r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(o){r=r.concat(this[o].ruler.disable(t,!0))},this),r=r.concat(this.inline.ruler2.disable(t,!0));var n=t.filter(function(o){return r.indexOf(o)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this};xn.prototype.use=function(t){var e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};xn.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");var r=new this.core.State(t,this,e);return this.core.process(r),r.tokens};xn.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};xn.prototype.parseInline=function(t,e){var r=new this.core.State(t,this,e);return r.inlineMode=!0,this.core.process(r),r.tokens};xn.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};cH.exports=xn});var dH=I((YSe,uH)=>{"use strict";uH.exports=lH()});var FV=I((NIe,lue)=>{lue.exports={name:"remote-containers",displayName:"Remote - Containers",description:"Open any folder or repository inside a Docker container and take advantage of Visual Studio Code's full feature set.",version:"0.238.2",preview:!0,publisher:"ms-vscode-remote",icon:"resources/remote-containers.png",repository:{type:"git",url:"https://github.com/Microsoft/vscode-remote-release.git"},bugs:{url:"https://github.com/Microsoft/vscode-remote-release/issues"},license:"SEE LICENSE IN LICENSE.txt",engines:{vscode:"^1.64.0"},extensionKind:["ui"],capabilities:{untrustedWorkspaces:{supported:"limited",description:"Opening a folder in a container requires workspace trust."},virtualWorkspaces:!0},categories:["Other"],keywords:["remote","docker","containers","remote development","dev container","development container"],aiKey:"AIF-d9b70cd4-b9f9-4d70-929b-a071c400b217",activationEvents:["onStartupFinished","onCommand:remote-containers.reopenInContainer","onCommand:remote-containers.rebuildAndReopenInContainer","onCommand:remote-containers.rebuildNoCacheAndReopenInContainer","onCommand:remote-containers.reopenLocally","onCommand:remote-containers.reopenInWSL","onCommand:remote-containers.reopenInSSH","onCommand:remote-containers.openFolder","onCommand:remote-containers.openRepositoryInVolume","onCommand:remote-containers.openRepositoryInUniqueVolume","onCommand:remote-containers.openRepositoryFromRemoteHub","onCommand:remote-containers.openPullRequestInVolume","onCommand:remote-containers.inspectVolume","onCommand:remote-containers.inspectVolumeFromViewlet","onCommand:remote-containers.inspectInBasicDevContainer","onCommand:remote-containers.cloneInVolumeFromViewlet","onCommand:remote-containers.pruneVolumes","onCommand:remote-containers.openWorkspace","onCommand:remote-containers.attachToRunningContainer","onCommand:remote-containers.attachToRunningContainerFromViewlet","onCommand:remote-containers.attachToK8sContainerFromViewlet","onCommand:remote-containers.checkoutPRInVolume","onCommand:remote-containers.rebuildContainer","onCommand:remote-containers.rebuildContainerNoCache","onCommand:remote-containers.createDevContainerFile","onCommand:remote-containers.openDevContainerFile","onCommand:remote-containers.openAttachDevContainerFile","onCommand:remote-containers.settings","onCommand:remote-containers.getHelp","onCommand:remote-containers.getStarted","onCommand:remote-containers.trySample","onCommand:remote-containers.reportIssue","onCommand:remote-containers.provideFeedback","onCommand:remote-containers.revealLogTerminal","onCommand:remote-containers.openLogFile","onCommand:remote-containers.openLastLogFile","onCommand:remote-containers.addExtensionToConfig","onCommand:remote-containers.showReopenInContainerNotificationReset","onCommand:remote-containers.showRecoveryContainerNotificationReset","onCommand:remote-containers.labelPortAndUpdateConfig","onCommand:remote-containers.installDocker","onCommand:remote-containers.installUserCLI","onCommand:remote-containers.configureContainerFeatures","workspaceContains:.devcontainer/devcontainer.json","workspaceContains:.devcontainer.json","onResolveRemoteAuthority:dev-container","onResolveRemoteAuthority:attached-container","onResolveRemoteAuthority:k8s-container","onDebugResolve:extensionHost","onView:targetsContainers"],main:"./dist/extension/extension",enabledApiProposals:["resolvers","workspaceTrust","terminalDimensions","contribViewsRemote"],contributes:{virtualWorkspaces:{menus:{continueOn:[{command:"remote-containers.openRepositoryFromRemoteHub",group:"0_local@2",when:"!isWeb && remoteHub:hasVirtualFolders"}]}},languages:[{id:"jsonc",filenames:["devcontainer-features.json"]}],jsonValidation:[{fileMatch:"devcontainer-features.json",url:"./schemas/devcontainer-features.schema.json"}],configuration:{title:"Remote - Containers",properties:{"remote.containers.defaultExtensions":{scope:"application",type:"array",description:"Configures the list of extensions to always install while creating a container.",default:[],items:{type:"string",pattern:"([a-z0-9A-Z][a-z0-9\\-A-Z]*)\\.([a-z0-9A-Z][a-z0-9\\-A-Z]*)",errorMessage:"Expected format '${publisher}.${name}'. Example: 'vscode.csharp'."}},"remote.containers.workspaceMountConsistency":{scope:"application",type:"string",enum:["consistent","cached","delegated"],enumDescriptions:["Perfect consistency.","The host\u2019s view is authoritative.","The container\u2019s view is authoritative."],description:"The consistency level used for the workspace mount (existing containers must be rebuilt to take effect).",default:"cached"},"remote.containers.cacheVolume":{scope:"application",type:"boolean",description:"Controls whether a Docker volume should be used to cache the VS Code server and extensions. Currently only applies to single container and not Docker Compose configurations.",default:!0},"remote.containers.copyGitConfig":{scope:"machine",type:"boolean",markdownDescription:"Controls whether the Git configuration (`~/.gitconfig`) should be copied into the container. This is done after installing any `#dotfiles.repository#` and will not overwrite an existing Git configuration file.",default:!0},"remote.containers.gitCredentialHelperConfigLocation":{scope:"machine",type:"string",enum:["system","global","none"],enumDescriptions:["Write to system config (`/etc/gitconfig`, requires root access).","Write to user config (`~/.gitconfig`).","Do not set a credential helper."],description:"Where to write the configuration for the Git credential helper.",default:"global"},"remote.containers.logLevel":{scope:"application",type:"string",description:"The log level for the extension.",default:"debug",enum:["info","debug","trace"]},"remote.containers.dockerPath":{scope:"application",type:"string",description:"Docker (or Podman) executable name or path.",default:"docker"},"remote.containers.dockerComposePath":{scope:"application",type:"string",description:"Docker Compose executable name or path.",default:"docker-compose"},"remote.containers.executeInWSL":{scope:"application",type:"boolean",description:"Controls whether CLI commands should always be executed in WSL. The default is to only execute in WSL for workspace folders in WSL. This setting has no effect on other platforms than Windows.",default:!1},"remote.containers.executeInWSLDistro":{scope:"application",type:"string",markdownDescription:"WSL distro to use when not reopening a WSL folder. The default is to use the default WSL distro (see `wsl -l`). This setting has no effect when `#remote.containers.executeInWSL#` is not enabled or on other platforms than Windows."},"dotfiles.repository":{scope:"machine",type:"string",description:"URL of a dotfiles Git repository (e.g., https://github.com/owner/repository.git) or owner/repository of a GitHub repository."},"dotfiles.installCommand":{scope:"machine",type:"string",description:"The command to run after cloning the dotfiles repository. Defaults to run the first file of `install.sh`, `install`, `bootstrap.sh`, `bootstrap`, `setup.sh` and `setup` found in the dotfiles repository's root folder."},"dotfiles.targetPath":{scope:"machine",type:"string",description:"The path to clone the dotfiles repository to. Defaults to `~/dotfiles`.",default:"~/dotfiles"},"remote.containers.dotfiles.repository":{scope:"machine",type:"string",description:"URL of a dotfiles Git repository (e.g., https://github.com/owner/repository.git) or owner/repository of a GitHub repository for DevContainers. This overrides the common setting for the dotfiles repository."},"remote.containers.dotfiles.installCommand":{scope:"machine",type:"string",description:"The command to run after cloning the dotfiles repository for DevContainers. This overrides the common setting for the dotfiles install command."},"remote.containers.dotfiles.targetPath":{scope:"machine",type:"string",description:"The path to clone the dotfiles repository to for DevContainers. This overrides the common setting for the dotfiles target path."},"remote.containers.repositoryConfigurationPaths":{scope:"application",type:"array",markdownDescription:"List of additional paths to search for [repository configurations](https://github.com/microsoft/vscode-dev-containers/tree/main/repository-containers).",default:[],items:{type:"string"}}}},commands:[{command:"remote-containers.reopenInContainer",title:"Reopen in Container",category:"Remote-Containers"},{command:"remote-containers.rebuildAndReopenInContainer",title:"Rebuild and Reopen in Container",category:"Remote-Containers"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",title:"Rebuild Without Cache and Reopen in Container",category:"Remote-Containers"},{command:"remote-containers.reopenLocally",title:"Reopen Folder Locally",category:"Remote-Containers"},{command:"remote-containers.reopenInWSL",title:"Reopen Folder in WSL",category:"Remote-Containers"},{command:"remote-containers.reopenInSSH",title:"Reopen Folder in SSH",category:"Remote-Containers"},{command:"remote-containers.openFolder",title:"Open Folder in Container...",category:"Remote-Containers",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.startAndOpenFolder",title:"Open Folder in Container",category:"Remote-Containers",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.openRepositoryInVolume",title:"Clone Repository in Named Container Volume...",category:"Remote-Containers"},{command:"remote-containers.openRepositoryInUniqueVolume",title:"Clone Repository in Container Volume...",icon:"$(repo-clone)",category:"Remote-Containers"},{command:"remote-containers.openRepositoryFromRemoteHub",title:"Clone Repository in a Container Volume",icon:"$(repo-clone)",category:"Remote-Containers"},{command:"remote-containers.openPullRequestInVolume",title:"Clone GitHub Pull Request in Container Volume...",category:"Remote-Containers"},{command:"remote-containers.inspectVolume",title:"Explore a Volume in a Development Container...",category:"Remote-Containers"},{command:"remote-containers.openWorkspace",title:"Open Workspace in Container...",category:"Remote-Containers"},{command:"remote-containers.attachToRunningContainer",title:"Attach to Running Container...",category:"Remote-Containers"},{command:"remote-containers.attachToRunningContainerFromViewlet",title:"Attach Visual Studio Code",category:"Remote-Containers"},{command:"remote-containers.inspectVolumeFromViewlet",title:"Explore in a Development Container",category:"Remote-Containers"},{command:"remote-containers.cloneInVolumeFromViewlet",title:"Clone into existing Volume",category:"Remote-Containers"},{command:"remote-containers.pruneVolumes",title:"Remove Unused Volumes...",category:"Remote-Containers",icon:"$(clear-all)"},{command:"remote-containers.explorerVolumesRefresh",title:"Refresh",category:"Remote-Containers",icon:"$(refresh)"},{command:"remote-containers.attachToK8sContainerFromViewlet",title:"Attach Visual Studio Code",category:"Remote-Containers"},{command:"remote-containers.rebuildContainer",title:"Rebuild Container",category:"Remote-Containers",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.rebuildContainerNoCache",title:"Rebuild Container Without Cache",category:"Remote-Containers",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.createDevContainerFile",title:"Add Development Container Configuration Files...",category:"Remote-Containers"},{command:"remote-containers.settings",title:"Settings for Remote-Containers",category:"Remote-Containers"},{command:"remote-containers.getHelp",title:"Help for Remote-Containers",category:"Remote-Containers"},{command:"remote-containers.getStarted",title:"Getting Started with Remote-Containers",category:"Remote-Containers"},{command:"remote-containers.trySample",title:"Try a Development Container Sample...",category:"Remote-Containers"},{command:"remote-containers.reportIssue",title:"Report Issue with Remote-Containers...",category:"Remote-Containers"},{command:"remote-containers.provideFeedback",title:"Provide Feedback",category:"Remote-Containers"},{command:"remote-containers.openDevContainerFile",title:"Open Container Configuration File",category:"Remote-Containers",icon:{light:"resources/light/gear.svg",dark:"resources/dark/gear.svg"}},{command:"remote-containers.openAttachConfigByNameFile",title:"Open Named Container Configuration File",category:"Remote-Containers"},{command:"remote-containers.openAttachDevContainerFile",title:"Open Attached Container Configuration File...",category:"Remote-Containers"},{command:"remote-containers.revealLogTerminal",title:"Show Container Log",category:"Remote-Containers"},{command:"remote-containers.openLogFile",title:"Show All Logs...",category:"Remote-Containers Developer"},{command:"remote-containers.openLastLogFile",title:"Show Previous Log",category:"Remote-Containers"},{command:"remote-containers.attachToContainer",title:"Attach to Container",category:"Remote-Containers",icon:{light:"resources/light/empty-window.svg",dark:"resources/dark/empty-window.svg"}},{command:"remote-containers.attachToContainerNewWindow",title:"Attach in New Window",category:"Remote-Containers"},{command:"remote-containers.stopContainer",title:"Stop Container",category:"Remote-Containers"},{command:"remote-containers.startContainer",title:"Start Container",category:"Remote-Containers",icon:{light:"resources/light/vm-start.svg",dark:"resources/dark/vm-start.svg"}},{command:"remote-containers.removeContainer",title:"Remove Container",category:"Remote-Containers",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.removeRecentFolder",title:"Remove Recent Folder",category:"Remote-Containers",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.showDetails",title:"Show Details",category:"Remote-Containers"},{command:"remote-containers.explorerTargetsRefresh",title:"Refresh",category:"Remote-Containers",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.explorerDetailsRefresh",title:"Refresh",category:"Remote-Containers",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.inspectDockerResource",title:"Inspect",category:"Remote-Containers"},{command:"remote-containers.inspectInBasicDevContainer",title:"Explore in Development Container",category:"Remote-Containers"},{command:"remote-containers.cloneInVolume",title:"Clone Repository in Volume",category:"Remote-Containers"},{command:"remote-containers.removeVolume",title:"Remove",category:"Remote-Containers"},{command:"remote-containers.newContainer",title:"New Container",category:"Remote-Containers",icon:{light:"resources/light/plus.svg",dark:"resources/dark/plus.svg"}},{command:"remote-containers.showContainerLog",title:"Show Container Log",category:"Remote-Containers"},{command:"remote-containers.addExtensionToConfig",title:"Add to devcontainer.json",category:"Remote-Containers"},{command:"remote-containers.checkoutPRInVolume",title:"Checkout Pull Request in Dev Container",category:"Remote-Containers"},{command:"remote-containers.showReopenInContainerNotificationReset",title:"Reset Don't Show Reopen Notification",category:"Remote-Containers"},{command:"remote-containers.showRecoveryContainerNotificationReset",title:"Reset Don't Show Recovery Container Notification",category:"Remote-Containers"},{command:"remote-containers.labelPortAndUpdateConfig",title:"Set Label and Update devcontainer.json",category:"Remote-Containers",icon:"$(tag)"},{command:"remote-containers.installDocker",title:"Install Docker",category:"Remote-Containers"},{command:"remote-containers.installUserCLI",title:"Install devcontainer CLI",category:"Remote-Containers"},{command:"remote-containers.configureContainerFeatures",title:"Configure Container Features...",category:"Remote-Containers"}],menus:{commandPalette:[{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && remoteName == dev-container && isRecoveryContainer"},{command:"remote-containers.rebuildAndReopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildAndReopenInContainer",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.reopenLocally",when:"canReopenLocally"},{command:"remote-containers.reopenInWSL",when:"canReopenInWSL"},{command:"remote-containers.reopenInSSH",when:"canReopenInSSH"},{command:"remote-containers.openFolder",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openRepositoryInVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openPullRequestInVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openWorkspace",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.attachToRunningContainer",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.attachToRunningContainerFromViewlet",when:"false"},{command:"remote-containers.inspectVolumeFromViewlet",when:"false"},{command:"remote-containers.openRepositoryFromRemoteHub",when:"false"},{command:"remote-containers.cloneInVolumeFromViewlet",when:"false"},{command:"remote-containers.inspectInBasicDevContainer",when:"false"},{command:"remote-containers.cloneInVolume",when:"false"},{command:"remote-containers.removeVolume",when:"false"},{command:"remote-containers.attachToK8sContainerFromViewlet",when:"false"},{command:"remote-containers.checkoutPRInVolume",when:"false"},{command:"remote-containers.rebuildContainer",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainerNoCache",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.createDevContainerFile",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",when:"remoteName =~ /^(dev-container|wsl|ssh-remote)$/"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.openDevContainerFile",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.openAttachConfigByNameFile",when:"remoteName == attached-container"},{command:"remote-containers.openAttachDevContainerFile",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.getStarted",when:"false"},{command:"remote-containers.trySample",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.trySample",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.provideFeedback",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.attachToContainer",when:"false"},{command:"remote-containers.attachToContainerNewWindow",when:"false"},{command:"remote-containers.stopContainer",when:"false"},{command:"remote-containers.removeContainer",when:"false"},{command:"remote-containers.startContainer",when:"false"},{command:"remote-containers.removeRecentFolder",when:"false"},{command:"remote-containers.showDetails",when:"false"},{command:"remote-containers.explorerTargetsRefresh",when:"false"},{command:"remote-containers.explorerVolumesRefresh",when:"false"},{command:"remote-containers.explorerDetailsRefresh",when:"false"},{command:"remote-containers.inspectDockerResource",when:"false"},{command:"remote-containers.startAndOpenFolder",when:"false"},{command:"remote-containers.newContainer",when:"false"},{command:"remote-containers.showContainerLog",when:"false"},{command:"remote-containers.labelPortAndUpdateConfig",when:"false"},{command:"remote-containers.addExtensionToConfig",when:"false"},{command:"remote-containers.configureContainerFeatures",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.configureContainerFeatures",when:"remoteName =~ /^(dev-container|wsl|ssh-remote)$/"}],"statusBar/remoteIndicator":[{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@1",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@1",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_2_actions@2",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_2_actions@2",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@4",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@4",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_2_actions@5",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_2_actions@5",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@6",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@6",when:"remoteName =~ /^(dev-container|wsl|ssh-remote)$/"},{command:"remote-containers.trySample",group:"remote_30_dev-container_2_actions@7",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.trySample",group:"remote_30_dev-container_2_actions@7",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.getStarted",group:"remote_30_dev-container_2_actions@8",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.getStarted",group:"remote_30_dev-container_2_actions@8",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.reopenInWSL",group:"remote_30_dev-container_1_actions@1",when:"canReopenInWSL"},{command:"remote-containers.reopenInSSH",group:"remote_30_dev-container_1_actions@1",when:"canReopenInSSH"},{command:"remote-containers.reopenLocally",group:"remote_30_dev-container_1_actions@2",when:"canReopenLocally"},{command:"remote-containers.rebuildContainer",group:"remote_30_dev-container_1_actions@3",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.openDevContainerFile",group:"remote_30_dev-container_1_actions@4",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.revealLogTerminal",group:"remote_30_dev-container_1_actions@5",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_1_actions@6",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/ && remoteConnectionState == connected"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_1_actions@8",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/ && remoteConnectionState == connected"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_1_actions@9",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.settings",group:"remote_30_dev-container_9_help@1",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.reportIssue",group:"remote_30_dev-container_9_help@2",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.getHelp",group:"remote_30_dev-container_9_help@4",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"}],"view/title":[{command:"remote-containers.explorerTargetsRefresh",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation"},{command:"remote-containers.newContainer",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation"},{command:"remote-containers.explorerDetailsRefresh",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.attachToContainer",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.rebuildContainer",when:"view == detailsContainers && remoteName == dev-container",group:"navigation"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && remoteName =~ /^(dev|attached)-container$/",group:"navigation"},{command:"remote-containers.pruneVolumes",when:"view == devVolumes",group:"navigation@2"},{command:"remote-containers.explorerVolumesRefresh",when:"view == devVolumes",group:"navigation@3"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"view == devVolumes",group:"navigation@1"}],"view/item/context":[{command:"remote-containers.attachToRunningContainerFromViewlet",when:"view == dockerContainers && viewItem =~ /^runningContainer$/i && vscode-docker:aciContext != true",group:"containers_1_general@2"},{command:"remote-containers.inspectVolumeFromViewlet",when:"view == dockerVolumes && viewItem == volume && vscode-docker:aciContext != true",group:"volumes_1_general@2"},{command:"remote-containers.checkoutPRInVolume",when:"view =~ /pr:/ && viewItem =~ /pullrequest(:local)?:nonactive|description/"},{command:"remote-containers.attachToK8sContainerFromViewlet",group:"2@4",when:"remoteName =~ /^(wsl)?$/ && view == extension.vsKubernetesExplorer && viewItem =~ /vsKubernetes\\.resource\\.pod/i"},{command:"remote-containers.startAndOpenFolder",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"1_folder@1"},{command:"remote-containers.startAndOpenFolder",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"inline@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"2_folder@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"inline@2"},{command:"workbench.action.closeFolder",when:"view == targetsContainers && viewItem =~ /active.*Folder/",group:"1_folder@1"},{command:"remote-containers.reopenLocally",when:"canReopenLocally && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInWSL",when:"canReopenInWSL && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInSSH",when:"canReopenInSSH && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.attachToContainer",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"1_container@1"},{command:"remote-containers.attachToContainer",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"inline@1"},{command:"remote-containers.attachToContainerNewWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"1_container@2"},{command:"remote-containers.stopContainer",when:"view == targetsContainers && viewItem =~ /^(active|running)(Dev|)Container/",group:"2_container@2"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"2_container@3"},{command:"remote-containers.rebuildContainer",when:"view == targetsContainers && viewItem =~ /activeDevContainer/",group:"2_container@1"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"inline@2"},{command:"remote-containers.startContainer",when:"view == targetsContainers && viewItem =~ /^exited(Dev|)Container/",group:"1_container@3"},{command:"remote-containers.showDetails",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@4"},{command:"remote-containers.inspectDockerResource",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@5"},{command:"remote-containers.showContainerLog",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@6"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && viewItem == devContainer"},{command:"remote-containers.inspectDockerResource",when:"view == detailsContainers && viewItem =~ /^(image|volume)$/"},{command:"remote-containers.cloneInVolume",when:"view == devVolumes && viewItem =~ /^(devVolume)$/",group:"1_volumes@1"},{command:"remote-containers.inspectInBasicDevContainer",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@1"},{command:"remote-containers.inspectDockerResource",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@2"},{command:"remote-containers.removeVolume",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"3_volumes-destructive@1"}],"ports/item/port/inline":[{command:"remote-containers.labelPortAndUpdateConfig",group:"0_manage@4",when:"remoteName =~ /^(dev|attached)-container$/ && tunnelType == Forwarded"}],"extension/context":[{command:"remote-containers.addExtensionToConfig",group:"2_configure",when:"!isBuiltinExtension && remoteName =~ /^(dev-container|attached-container|wsl|ssh-remote)?$/"}]},resourceLabelFormatters:[{scheme:"vscode-remote",authority:"dev-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Dev Container"}},{scheme:"vscode-remote",authority:"attached-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Container"}},{scheme:"vscode-remote",authority:"exec+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Exec"}},{scheme:"vscode-remote",authority:"k8s-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Kubernetes"}}],views:{remote:[{id:"targetsContainers",name:"Containers",group:"targets@2",remoteName:["dev-container","attached-container","exec","k8s-container"]},{id:"detailsContainers",name:"Details (Containers)",when:"remote-containers:showDetails",group:"details@1",remoteName:["dev-container","attached-container"]},{id:"devVolumes",name:"DevVolumes",group:"details@2",remoteName:["dev-container","attached-container"]}]},viewsWelcome:[{view:"targetsContainers",when:"remote-containers:needsDockerStartOrInstall",contents:"Get started with containers by [installing Docker](command:remote-containers.installDocker) or by visiting the [help view](command:~remote.helpPanel.focus). [Refresh](command:remote-containers.explorerTargetsRefresh) after installation and startup."},{view:"targetsContainers",when:"remote-containers:needsSSHCredentials",contents:"[Refresh](command:remote-containers.explorerTargetsRefresh) to provide SSH credentials."},{view:"targetsContainers",when:"remote-containers:noContainersWithFolder",contents:`Get started with containers by running one of the [Remote-Containers](command:remote-containers.newContainer) commands.
You can [reopen the current folder in a container](command:remote-containers.reopenInContainer), or open another folder in a container.
[Open Folder in Container](command:remote-containers.openFolder)
If you're new to containers and want to [try a sample](command:remote-containers.trySample), there are several to choose from.`},{view:"targetsContainers",when:"remote-containers:noContainersWithoutFolder",contents:`Get started with containers by running one of the [Remote-Containers](command:remote-containers.newContainer) commands.
You can open an existing folder in a container.
[Open Folder in Container](command:remote-containers.openFolder)
If you're new to containers and want to [try a sample](command:remote-containers.trySample), there are several to choose from.`},{view:"devVolumes",when:"remote-containers:noDevVolumes",contents:`If there's a repository you want to work with you can clone that directly in a container volume.
[Clone Repository in Container Volume](command:remote-containers.openRepositoryInUniqueVolume)
`}],remoteHelp:{getStarted:"https://aka.ms/vscode-remote/containers/tutorial-sandbox",feedback:"https://aka.ms/vscode-remote/containers/provide-feedback",documentation:"https://aka.ms/vscode-remote/containers",issues:"https://aka.ms/vscode-remote/containers/issues",remoteName:["dev-container","attached-container","exec","k8s-container"]}},scripts:{"vscode:prepublish":"npm-run-all clean definitions compile-prod dev-containers-user-cli-prepare",compile:"npm-run-all clean-dist definitions compile-dev",watch:"npm-run-all clean-dist definitions compile-watch",precommit:"node build/hygiene.js",package:"vsce package --yarn",definitions:"npm-run-all definitions-clean definitions-copy",lint:"eslint -c .eslintrc.js --rulesdir ./build/eslint --ext .ts ./src ./test","compile-prod":"node esbuild.js --production","compile-dev":"node esbuild.js","compile-watch":"node esbuild.js --watch","type-check":"npm-run-all clean-built tsc-b","tsc-b":"tsc -b","type-check-watch":"npm-run-all clean-built tsc-b-w","tsc-b-w":"tsc -b -w","definitions-clean":"rimraf dist/node_modules/vscode-dev-containers","definitions-copy":'copyfiles --all "node_modules/vscode-dev-containers/**/*" dist',"dev-containers-cli-publish":"npm-run-all dev-containers-cli-prepare dev-containers-cli-npm-publish","dev-containers-cli-package":"npm-run-all dev-containers-cli-prepare dev-containers-cli-npm-pack","dev-containers-cli-prepare":"npm-run-all clean dev-containers-cli-compile dev-containers-cli-copy-module dev-containers-cli-copy-definitions","dev-containers-cli-compile":"npm-run-all compile-prod","dev-containers-cli-copy-module":'copyfiles ThirdPartyNotices.txt dist/node/devContainersCLI.js dist/spec-node/devContainersSpecCLI.js "scripts/**/*" dev-containers-cli',"dev-containers-cli-copy-definitions":'copyfiles --all "node_modules/vscode-dev-containers/**/*" dev-containers-cli/dist',"dev-containers-cli-npm-publish":"cd dev-containers-cli && npm publish","dev-containers-cli-npm-pack":"cd dev-containers-cli && npm pack","dev-containers-user-cli-package":"npm-run-all dev-containers-user-cli-prepare dev-containers-user-cli-npm-pack","dev-containers-user-cli-prepare":"npm-run-all dev-containers-user-cli-copy-module dev-containers-user-cli-copy-definitions","dev-containers-user-cli-clean-prepare":"npm-run-all clean dev-containers-user-prepare","dev-containers-user-cli-copy-module":'copyfiles ThirdPartyNotices.txt dist/node/devContainersUserCLI.js dist/spec-node/devContainersSpecCLI.js "scripts/**/*" dev-containers-user-cli',"dev-containers-user-cli-copy-definitions":'copyfiles --all "node_modules/vscode-dev-containers/**/*" dev-containers-user-cli/dist',"dev-containers-user-cli-npm-pack":"cd dev-containers-user-cli && npm pack",clean:"npm-run-all clean-dist clean-built","clean-dist":"rimraf dist dev-containers-cli/dist dev-containers-cli/scripts dev-containers-user-cli/dist dev-containers-user-cli/scripts","clean-built":"rimraf built",test:"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit test/core/**/*.test.ts","test-no-env":"mocha -r ts-node/register --exit test/core/**/*.test.ts","test-dev-containers":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/**/*.test.ts",copytestconfigsforalpine:"/bin/bash -c 'cd test/configs && for f in *; do if [[ -d $f ]] && [[ $f != *alpine* ]]; then cp -r -T $f $f-alpine ; fi ; done'"},devDependencies:{"@types/chai":"^4.3.0","@types/follow-redirects":"^1.13.1","@types/js-yaml":"^4.0.5","@types/markdown-it":"^12.2.3","@types/minimist":"^1.2.2","@types/mocha":"^9.1.0","@types/node":"^16.11.7","@types/pull-stream":"^3.6.2","@types/semver":"^7.3.9","@types/shell-quote":"^1.7.1","@types/stats-lite":"^2.2.0","@types/tar":"^6.1.1","@types/uuid":"^8.3.4","@types/vscode":"^1.63.1","@types/yargs":"^17.0.8","@typescript-eslint/eslint-plugin":"^4.31.2","@typescript-eslint/parser":"^4.31.2",ajv:"^8.9.0",chai:"^4.3.4",copyfiles:"^2.4.1",esbuild:"^0.13.14",eslint:"^7.32.0","event-stream":"^4.0.1","gulp-eslint":"^6.0.0","gulp-filter":"^7.0.0",husky:"^7.0.4",jsonc:"^2.0.0",mocha:"^9.2.1","mocha-junit-reporter":"^2.0.2","npm-run-all":"^4.1.5","p-all":"^4.0.0",rimraf:"^3.0.2","ts-node":"^10.4.0",typescript:"^4.5.5","typescript-formatter":"^7.2.2",vinyl:"^2.2.1","vinyl-fs":"^3.0.3",vsce:"^2.6.7"},dependencies:{"@devcontainers/cli":"https://github.com/devcontainers/cli.git","@vscode/extension-telemetry":"^0.5.0",applicationinsights:"^2.2.0","find-process":"^1.4.7","follow-redirects":"^1.14.8","js-yaml":"^4.1.0","jsonc-parser":"^3.0.0","markdown-it":"^12.3.2",minimist:"^1.2.6",muxrpc:"^6.5.4","node-pty":"^0.10.1","pull-pushable":"^2.2.0","pull-stream":"^3.6.14","pull-stream-to-stream":"^2.0.0",semver:"^7.3.5","shell-quote":"^1.7.3","stats-lite":"^2.2.0","stream-to-pull-stream":"^1.7.3",tar:"^6.1.11",uuid:"^8.3.2","vscode-dev-containers":"https://github.com/microsoft/vscode-dev-containers/releases/download/v0.238.0/vscode-dev-containers-0.238.0.tgz","vscode-tas-client":"^0.1.27","vscode-uri":"^3.0.3",yaml:"^2.0.0-10",yargs:"~17.0.1"}}});O3(exports,{activate:()=>uue,attachToContainer:()=>sv,deactivate:()=>hue});var U=K(require("vscode")),MV=K(require("os")),lv=K(require("fs")),Ft=K(require("path")),qV=K(require("querystring"));var pt=K(require("fs")),Yn=K(require("util"));function ht(t){return new Promise(e=>pt.stat(t,(r,n)=>e(!r&&n.isFile())))}function pl(t){return new Promise(e=>pt.stat(t,(r,n)=>e(!r&&n.isDirectory())))}var Oe=(0,Yn.promisify)(pt.readFile),hl=(0,Yn.promisify)(pt.writeFile),Mue=(0,Yn.promisify)(pt.appendFile),Po=(0,Yn.promisify)(pt.rename),en=(0,Yn.promisify)(pt.readdir),eS=(0,Yn.promisify)(pt.unlink),Mr=t=>new Promise((e,r)=>pt.mkdir(t,{recursive:!0},n=>n?r(n):e())),tS=(0,Yn.promisify)(pt.rmdir),oi=(0,Yn.promisify)(pt.rm),que=(0,Yn.promisify)(pt.copyFile),ml;(function(o){o[o.Unknown=0]="Unknown",o[o.File=1]="File",o[o.Directory=2]="Directory",o[o.SymbolicLink=64]="SymbolicLink"})(ml||(ml={}));var Me=K(require("vscode")),I_=K(require("path"));var Kr=K(require("path")),YJ=K(require("crypto")),u1=K(Ba());var ro=K(Ck()),zde=ro.default.v1,Kde=ro.default.v3,Br=ro.default.v4,Yde=ro.default.v5,Jde=ro.default.NIL,Qde=ro.default.version,Xde=ro.default.validate,Zde=ro.default.stringify,efe=ro.default.parse;var Ek=K(require("os")),Fl=K(require("fs")),_k=K(require("path"));async function bk(t,e){return{sendTelemetryEvent:async()=>{},isCachedFlightEnabled:async()=>!1,product:await e,package:await t,getTelemetryLevel:()=>"off"}}var ie;(function(a){a[a.Trace=1]="Trace",a[a.Debug=2]="Debug",a[a.Info=3]="Info",a[a.Warning=4]="Warning",a[a.Error=5]="Error",a[a.Critical=6]="Critical",a[a.Off=7]="Off"})(ie||(ie={}));var Jy={info:3,debug:2,trace:1},f4=Object.keys(Jy).reduce((t,e)=>(t[Jy[e]]=e,t),[]);function Sk(t){return Jy[t]||3}function yi(t){return f4[t]||3}var ot={write:()=>{},raw:()=>{},start:()=>Date.now(),stop:()=>{},event:()=>{}},wi=/(\x9B|\x1B\[)[0-?]*[ -\/]*[@-~]/g;function xk(t,e){let r=!!e;return{event:n=>{r&&(r=!1,t.forEach(o=>o.event({type:"text",level:3,timestamp:Date.now(),text:e}))),t.forEach(o=>o.event(n))}}}function Pk(t,e){let r=m4(t);return{event(n){let o=h4(n,e());o&&r.write(o)},join:r.join}}function kk(t,e,r){return{event(n){let o=p4(n,e(),r.getTime());o&&t(o)}}}function or(t,e=2){return{event:t.event,write(r,n=e){t.event({type:"text",level:n,timestamp:Date.now(),text:r})},raw(r,n=e){t.event({type:"raw",level:n,timestamp:Date.now(),text:r})},start(r,n=e){let o=Date.now();return t.event({type:"start",level:n,timestamp:o,text:r}),o},stop(r,n,o=e){t.event({type:"stop",level:o,timestamp:Date.now(),text:r,startTimestamp:n})},get dimensions(){return t.dimensions},onDidChangeDimensions:t.onDidChangeDimensions}}function p4(t,e,r){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":return`[${Ml(Ak,`${t.timestamp-r} ms`)}] ${dp(t.text)}`;case"raw":return t.text;case"start":return 1>=e?`${Ml(w4,`[${t.timestamp-r} ms] Start`)}: ${dp(t.text)}`:`[${Ml(Ak,`${t.timestamp-r} ms`)}] Start: ${dp(t.text)}`;case"stop":return 1>=e?`${Ml(y4,`[${t.timestamp-r} ms] Stop`)} (${t.timestamp-t.startTimestamp} ms): ${dp(t.text)}`:void 0;default:throw Ik(t)}}function dp(t){return b4(t).replace(/\r?\n/g,`\r
`).replace(/(\r?\n)?$/,`\r
`)}function h4(t,e){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":case"raw":return`[${new Date(t.timestamp).toISOString()}] ${Qy(t.text)}`;case"start":return`[${new Date(t.timestamp).toISOString()}] Start: ${Qy(t.text)}`;case"stop":return 2>=e?`[${new Date(t.timestamp).toISOString()}] Stop (${t.timestamp-t.startTimestamp} ms): ${Qy(t.text)}`:void 0;default:throw Ik(t)}}function Qy(t){return t.replace(wi,"").replace(/(\r?\n)?$/,Ek.EOL)}function Ik(t){return new Error(`Unknown log event type: ${t.type}`)}function m4(t){let e=[],r=!1,n,o;function i(){r=!1,o&&!e.length&&(n=void 0,o(),o=void 0)}function s(a,c=!1){if(a&&e.push(a),!c&&!r&&e.length){r=!0;let l=e.join("");e.length=0,Fl.appendFile(t,l,u=>{u&&(u.code==="ENOENT"?Fl.mkdir(_k.dirname(t),{recursive:!0},d=>{d?(i(),console.error(d)):Fl.appendFile(t,l,f=>{i(),f&&console.error(f),s()})}):(i(),console.error(u))),i(),s()})}}return{write:s,join:()=>n||(r?n=new Promise(a=>o=a):Promise.resolve())}}var g4="38;2;143;99;79",Tk="38;2;99;143;79",v4="38;2;86;156;214",y4=g4,w4=Tk,Ak=Tk,C4=v4;function Ml(t,e){return e.split(`
`).map(r=>`[1m[${t}m${r}[39m[22m`).join(`
`)}function b4(t){let e,r=0,n=[];for(wi.lastIndex=0;e=wi.exec(t);)n.push(Dk(t.substring(r,e.index))),n.push(e[0]),r=wi.lastIndex;return n.push(Dk(t.substr(r))),n.join("")}function Dk(t){let e=/(?<=^|[^A-Za-z0-9_\-\.])[0-9]+(\.[0-9]+)*(?=$|[^A-Za-z0-9_\-\.])/g,r,n=0,o=[];for(;r=e.exec(t);)o.push(t.substring(n,r.index)),o.push(Ml(C4,r[0])),n=e.lastIndex;return o.push(t.substr(n)),o.join("")}function Ne(t){return t.split(/\r?\n/).map(e=>`[1m[31m${e}[39m[22m`).join(`\r
`)+`\r
`}function Xy(t){return t.split(/\r?\n/).map(e=>`[1m[33m${e}[39m[22m`).join(`\r
`)+`\r
`}var we=class extends Error{constructor(e){super(e.originalError&&e.originalError.message||e.description);this.manageContainer=!1;this.actions=[];this.data={};var r;Object.assign(this,e),((r=this.originalError)==null?void 0:r.stack)&&(this.stack=this.originalError.stack)}};var he=K(require("path")),oh=K(require("fs")),sR=K(Ga()),iC=K(require("string_decoder")),ih=K(Ba());"use strict";function $l(t,e){e===void 0&&(e=!1);var r=t.length,n=0,o="",i=0,s=16,a=0,c=0,l=0,u=0,d=0;function f(b,C){for(var _=0,P=0;_<b||!C;){var S=t.charCodeAt(n);if(S>=48&&S<=57)P=P*16+S-48;else if(S>=65&&S<=70)P=P*16+S-65+10;else if(S>=97&&S<=102)P=P*16+S-97+10;else break;n++,_++}return _<b&&(P=-1),P}function p(b){n=b,o="",i=0,s=16,d=0}function h(){var b=n;if(t.charCodeAt(n)===48)n++;else for(n++;n<t.length&&za(t.charCodeAt(n));)n++;if(n<t.length&&t.charCodeAt(n)===46)if(n++,n<t.length&&za(t.charCodeAt(n)))for(n++;n<t.length&&za(t.charCodeAt(n));)n++;else return d=3,t.substring(b,n);var C=n;if(n<t.length&&(t.charCodeAt(n)===69||t.charCodeAt(n)===101))if(n++,(n<t.length&&t.charCodeAt(n)===43||t.charCodeAt(n)===45)&&n++,n<t.length&&za(t.charCodeAt(n))){for(n++;n<t.length&&za(t.charCodeAt(n));)n++;C=n}else d=3;return t.substring(b,C)}function m(){for(var b="",C=n;;){if(n>=r){b+=t.substring(C,n),d=2;break}var _=t.charCodeAt(n);if(_===34){b+=t.substring(C,n),n++;break}if(_===92){if(b+=t.substring(C,n),n++,n>=r){d=2;break}var P=t.charCodeAt(n++);switch(P){case 34:b+='"';break;case 92:b+="\\";break;case 47:b+="/";break;case 98:b+="\b";break;case 102:b+="\f";break;case 110:b+=`
`;break;case 114:b+="\r";break;case 116:b+="	";break;case 117:var S=f(4,!0);S>=0?b+=String.fromCharCode(S):d=4;break;default:d=5}C=n;continue}if(_>=0&&_<=31)if(jl(_)){b+=t.substring(C,n),d=2;break}else d=6;n++}return b}function g(){if(o="",d=0,i=n,c=a,u=l,n>=r)return i=r,s=17;var b=t.charCodeAt(n);if(sw(b)){do n++,o+=String.fromCharCode(b),b=t.charCodeAt(n);while(sw(b));return s=15}if(jl(b))return n++,o+=String.fromCharCode(b),b===13&&t.charCodeAt(n)===10&&(n++,o+=`
`),a++,l=n,s=14;switch(b){case 123:return n++,s=1;case 125:return n++,s=2;case 91:return n++,s=3;case 93:return n++,s=4;case 58:return n++,s=6;case 44:return n++,s=5;case 34:return n++,o=m(),s=10;case 47:var C=n-1;if(t.charCodeAt(n+1)===47){for(n+=2;n<r&&!jl(t.charCodeAt(n));)n++;return o=t.substring(C,n),s=12}if(t.charCodeAt(n+1)===42){n+=2;for(var _=r-1,P=!1;n<_;){var S=t.charCodeAt(n);if(S===42&&t.charCodeAt(n+1)===47){n+=2,P=!0;break}n++,jl(S)&&(S===13&&t.charCodeAt(n)===10&&n++,a++,l=n)}return P||(n++,d=1),o=t.substring(C,n),s=13}return o+=String.fromCharCode(b),n++,s=16;case 45:if(o+=String.fromCharCode(b),n++,n===r||!za(t.charCodeAt(n)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return o+=h(),s=11;default:for(;n<r&&v(b);)n++,b=t.charCodeAt(n);if(i!==n){switch(o=t.substring(i,n),o){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return o+=String.fromCharCode(b),n++,s=16}}function v(b){if(sw(b)||jl(b))return!1;switch(b){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function y(){var b;do b=g();while(b>=12&&b<=15);return b}return{setPosition:p,getPosition:function(){return n},scan:e?y:g,getToken:function(){return s},getTokenValue:function(){return o},getTokenOffset:function(){return i},getTokenLength:function(){return n-i},getTokenStartLine:function(){return c},getTokenStartCharacter:function(){return i-u},getTokenError:function(){return d}}}function sw(t){return t===32||t===9||t===11||t===12||t===160||t===5760||t>=8192&&t<=8203||t===8239||t===8287||t===12288||t===65279}function jl(t){return t===10||t===13||t===8232||t===8233}function za(t){return t>=48&&t<=57}"use strict";function aw(t,e,r){var n,o,i,s,a;if(e){for(s=e.offset,a=s+e.length,i=s;i>0&&!Ul(t,i-1);)i--;for(var c=a;c<t.length&&!Ul(t,c);)c++;o=t.substring(i,c),n=e6(o,r)}else o=t,n=0,i=0,s=0,a=t.length;var l=t6(r,t),u=!1,d=0,f;r.insertSpaces?f=cw(" ",r.tabSize||4):f="	";var p=$l(o,!1),h=!1;function m(){return l+cw(f,n+d)}function g(){var j=p.scan();for(u=!1;j===15||j===14;)u=u||j===14,j=p.scan();return h=j===16||p.getTokenError()!==0,j}var v=[];function y(j,J,Y){!h&&(!e||J<a&&Y>s)&&t.substring(J,Y)!==j&&v.push({offset:J,length:Y-J,content:j})}var b=g();if(b!==17){var C=p.getTokenOffset()+i,_=cw(f,n);y(_,i,C)}for(;b!==17;){for(var P=p.getTokenOffset()+p.getTokenLength()+i,S=g(),k="",T=!1;!u&&(S===12||S===13);){var A=p.getTokenOffset()+i;y(" ",P,A),P=p.getTokenOffset()+p.getTokenLength()+i,T=S===12,k=T?m():"",S=g()}if(S===2)b!==1&&(d--,k=m());else if(S===4)b!==3&&(d--,k=m());else{switch(b){case 3:case 1:d++,k=m();break;case 5:case 12:k=m();break;case 13:u?k=m():T||(k=" ");break;case 6:T||(k=" ");break;case 10:if(S===6){T||(k="");break}case 7:case 8:case 9:case 11:case 2:case 4:S===12||S===13?T||(k=" "):S!==5&&S!==17&&(h=!0);break;case 16:h=!0;break}u&&(S===12||S===13)&&(k=m())}S===17&&(k=r.insertFinalNewline?l:"");var F=p.getTokenOffset()+i;y(k,P,F),b=S}return v}function cw(t,e){for(var r="",n=0;n<e;n++)r+=t;return r}function e6(t,e){for(var r=0,n=0,o=e.tabSize||4;r<t.length;){var i=t.charAt(r);if(i===" ")n++;else if(i==="	")n+=o;else break;r++}return Math.floor(n/o)}function t6(t,e){for(var r=0;r<e.length;r++){var n=e.charAt(r);if(n==="\r")return r+1<e.length&&e.charAt(r+1)===`
`?`\r
`:"\r";if(n===`
`)return`
`}return t&&t.eol||`
`}function Ul(t,e){return`\r
`.indexOf(t.charAt(e))!==-1}"use strict";var Bl;(function(t){t.DEFAULT={allowTrailingComma:!1}})(Bl||(Bl={}));function Xk(t,e){var r=[],n=new Object,o=void 0,i={value:{},offset:0,length:0,type:"object",parent:void 0},s=!1;function a(c,l,u,d){i.value=c,i.offset=l,i.length=u,i.type=d,i.colonOffset=void 0,o=i}try{Cp(t,{onObjectBegin:function(c,l){if(e<=c)throw n;o=void 0,s=e>c,r.push("")},onObjectProperty:function(c,l,u){if(e<l||(a(c,l,u,"property"),r[r.length-1]=c,e<=l+u))throw n},onObjectEnd:function(c,l){if(e<=c)throw n;o=void 0,r.pop()},onArrayBegin:function(c,l){if(e<=c)throw n;o=void 0,r.push(0)},onArrayEnd:function(c,l){if(e<=c)throw n;o=void 0,r.pop()},onLiteralValue:function(c,l,u){if(e<l||(a(c,l,u,eI(c)),e<=l+u))throw n},onSeparator:function(c,l,u){if(e<=l)throw n;if(c===":"&&o&&o.type==="property")o.colonOffset=l,s=!1,o=void 0;else if(c===","){var d=r[r.length-1];typeof d=="number"?r[r.length-1]=d+1:(s=!0,r[r.length-1]=""),o=void 0}}})}catch(c){if(c!==n)throw c}return{path:r,previousNode:o,isAtPropertyKey:s,matches:function(c){for(var l=0,u=0;l<c.length&&u<r.length;u++)if(c[l]===r[u]||c[l]==="*")l++;else if(c[l]!=="**")return!1;return l===c.length}}}function Zk(t,e,r){e===void 0&&(e=[]),r===void 0&&(r=Bl.DEFAULT);var n=null,o=[],i=[];function s(c){Array.isArray(o)?o.push(c):n!==null&&(o[n]=c)}var a={onObjectBegin:function(){var c={};s(c),i.push(o),o=c,n=null},onObjectProperty:function(c){n=c},onObjectEnd:function(){o=i.pop()},onArrayBegin:function(){var c=[];s(c),i.push(o),o=c,n=null},onArrayEnd:function(){o=i.pop()},onLiteralValue:s,onError:function(c,l,u){e.push({error:c,offset:l,length:u})}};return Cp(t,a,r),o[0]}function yp(t,e,r){e===void 0&&(e=[]),r===void 0&&(r=Bl.DEFAULT);var n={type:"array",offset:-1,length:-1,children:[],parent:void 0};function o(c){n.type==="property"&&(n.length=c-n.offset,n=n.parent)}function i(c){return n.children.push(c),c}var s={onObjectBegin:function(c){n=i({type:"object",offset:c,length:-1,parent:n,children:[]})},onObjectProperty:function(c,l,u){n=i({type:"property",offset:l,length:-1,parent:n,children:[]}),n.children.push({type:"string",value:c,offset:l,length:u,parent:n})},onObjectEnd:function(c,l){o(c+l),n.length=c+l-n.offset,n=n.parent,o(c+l)},onArrayBegin:function(c,l){n=i({type:"array",offset:c,length:-1,parent:n,children:[]})},onArrayEnd:function(c,l){n.length=c+l-n.offset,n=n.parent,o(c+l)},onLiteralValue:function(c,l,u){i({type:eI(c),offset:l,length:u,parent:n,value:c}),o(l+u)},onSeparator:function(c,l,u){n.type==="property"&&(c===":"?n.colonOffset=l:c===","&&o(l))},onError:function(c,l,u){e.push({error:c,offset:l,length:u})}};Cp(t,s,r);var a=n.children[0];return a&&delete a.parent,a}function Hl(t,e){if(!!t){for(var r=t,n=0,o=e;n<o.length;n++){var i=o[n];if(typeof i=="string"){if(r.type!=="object"||!Array.isArray(r.children))return;for(var s=!1,a=0,c=r.children;a<c.length;a++){var l=c[a];if(Array.isArray(l.children)&&l.children[0].value===i){r=l.children[1],s=!0;break}}if(!s)return}else{var u=i;if(r.type!=="array"||u<0||!Array.isArray(r.children)||u>=r.children.length)return;r=r.children[u]}}return r}}function wp(t){switch(t.type){case"array":return t.children.map(wp);case"object":for(var e=Object.create(null),r=0,n=t.children;r<n.length;r++){var o=n[r],i=o.children[1];i&&(e[o.children[0].value]=wp(i))}return e;case"null":case"string":case"number":case"boolean":return t.value;default:return}}function Cp(t,e,r){r===void 0&&(r=Bl.DEFAULT);var n=$l(t,!1);function o(T){return T?function(){return T(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}function i(T){return T?function(A){return T(A,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}var s=o(e.onObjectBegin),a=i(e.onObjectProperty),c=o(e.onObjectEnd),l=o(e.onArrayBegin),u=o(e.onArrayEnd),d=i(e.onLiteralValue),f=i(e.onSeparator),p=o(e.onComment),h=i(e.onError),m=r&&r.disallowComments,g=r&&r.allowTrailingComma;function v(){for(;;){var T=n.scan();switch(n.getTokenError()){case 4:y(14);break;case 5:y(15);break;case 3:y(13);break;case 1:m||y(11);break;case 2:y(12);break;case 6:y(16);break}switch(T){case 12:case 13:m?y(10):p();break;case 16:y(1);break;case 15:case 14:break;default:return T}}}function y(T,A,F){if(A===void 0&&(A=[]),F===void 0&&(F=[]),h(T),A.length+F.length>0)for(var j=n.getToken();j!==17;){if(A.indexOf(j)!==-1){v();break}else if(F.indexOf(j)!==-1)break;j=v()}}function b(T){var A=n.getTokenValue();return T?d(A):a(A),v(),!0}function C(){switch(n.getToken()){case 11:var T=n.getTokenValue(),A=Number(T);isNaN(A)&&(y(2),A=0),d(A);break;case 7:d(null);break;case 8:d(!0);break;case 9:d(!1);break;default:return!1}return v(),!0}function _(){return n.getToken()!==10?(y(3,[],[2,5]),!1):(b(!1),n.getToken()===6?(f(":"),v(),k()||y(4,[],[2,5])):y(5,[],[2,5]),!0)}function P(){s(),v();for(var T=!1;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(T||y(4,[],[]),f(","),v(),n.getToken()===2&&g)break}else T&&y(6,[],[]);_()||y(4,[],[2,5]),T=!0}return c(),n.getToken()!==2?y(7,[2],[]):v(),!0}function S(){l(),v();for(var T=!1;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(T||y(4,[],[]),f(","),v(),n.getToken()===4&&g)break}else T&&y(6,[],[]);k()||y(4,[],[4,5]),T=!0}return u(),n.getToken()!==4?y(8,[4],[]):v(),!0}function k(){switch(n.getToken()){case 3:return S();case 1:return P();case 10:return b(!0);default:return C()}}return v(),n.getToken()===17?r.allowEmptyContent?!0:(y(4,[],[]),!1):k()?(n.getToken()!==17&&y(9,[],[]),!0):(y(4,[],[]),!1)}function eI(t){switch(typeof t){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(t){if(Array.isArray(t))return"array"}else return"null";return"object"}default:return"null"}}"use strict";function tI(t,e,r,n){for(var o,i=e.slice(),s=[],a=yp(t,s),c=void 0,l=void 0;i.length>0&&(l=i.pop(),c=Hl(a,i),c===void 0&&r!==void 0);)typeof l=="string"?r=(o={},o[l]=r,o):r=[r];if(c)if(c.type==="object"&&typeof l=="string"&&Array.isArray(c.children)){var u=Hl(c,[l]);if(u!==void 0)if(r===void 0){if(!u.parent)throw new Error("Malformed AST");var d=c.children.indexOf(u.parent),f=void 0,p=u.parent.offset+u.parent.length;if(d>0){var h=c.children[d-1];f=h.offset+h.length}else if(f=c.offset+1,c.children.length>1){var m=c.children[1];p=m.offset}return Fs(t,{offset:f,length:p-f,content:""},n)}else return Fs(t,{offset:u.offset,length:u.length,content:JSON.stringify(r)},n);else{if(r===void 0)return[];var g=JSON.stringify(l)+": "+JSON.stringify(r),v=n.getInsertionIndex?n.getInsertionIndex(c.children.map(function(T){return T.children[0].value})):c.children.length,y=void 0;if(v>0){var h=c.children[v-1];y={offset:h.offset+h.length,length:0,content:","+g}}else c.children.length===0?y={offset:c.offset+1,length:0,content:g}:y={offset:c.offset+1,length:0,content:g+","};return Fs(t,y,n)}}else if(c.type==="array"&&typeof l=="number"&&Array.isArray(c.children)){var b=l;if(b===-1){var g=""+JSON.stringify(r),y=void 0;if(c.children.length===0)y={offset:c.offset+1,length:0,content:g};else{var h=c.children[c.children.length-1];y={offset:h.offset+h.length,length:0,content:","+g}}return Fs(t,y,n)}else if(r===void 0&&c.children.length>=0){var C=l,_=c.children[C],y=void 0;if(c.children.length===1)y={offset:c.offset+1,length:c.length-2,content:""};else if(c.children.length-1===C){var h=c.children[C-1],P=h.offset+h.length,S=c.offset+c.length;y={offset:P,length:S-2-P,content:""}}else y={offset:_.offset,length:c.children[C+1].offset-_.offset,content:""};return Fs(t,y,n)}else if(r!==void 0){var y=void 0,g=""+JSON.stringify(r);if(!n.isArrayInsertion&&c.children.length>l){var k=c.children[l];y={offset:k.offset,length:k.length,content:g}}else if(c.children.length===0||l===0)y={offset:c.offset+1,length:0,content:c.children.length===0?g:g+","};else{var v=l>c.children.length?c.children.length:l,h=c.children[v-1];y={offset:h.offset+h.length,length:0,content:","+g}}return Fs(t,y,n)}else throw new Error("Can not "+(r===void 0?"remove":n.isArrayInsertion?"insert":"modify")+" Array index "+b+" as length is not sufficient")}else throw new Error("Can not add "+(typeof l!="number"?"index":"property")+" to parent of type "+c.type);else{if(r===void 0)throw new Error("Can not delete in empty document");return Fs(t,{offset:a?a.offset:0,length:a?a.length:0,content:JSON.stringify(r)},n)}}function Fs(t,e,r){if(!r.formattingOptions)return[e];var n=bp(t,e),o=e.offset,i=e.offset+e.content.length;if(e.length===0||e.content.length===0){for(;o>0&&!Ul(n,o-1);)o--;for(;i<n.length&&!Ul(n,i);)i++}for(var s=aw(n,{offset:o,length:i-o},r.formattingOptions),a=s.length-1;a>=0;a--){var c=s[a];n=bp(n,c),o=Math.min(o,c.offset),i=Math.max(i,c.offset+c.length),i+=c.content.length-c.length}var l=t.length-(n.length-i)-o;return[{offset:o,length:l,content:n.substring(o,i)}]}function bp(t,e){return t.substring(0,e.offset)+e.content+t.substring(e.offset+e.length)}"use strict";var rI=Xk,Ve=Zk,Ep=yp,Ci=Hl;var _p=wp;function st(t,e,r,n){return tI(t,e,r,n)}function St(t,e){for(var r=e.length-1;r>=0;r--)t=bp(t,e[r]);return t}var aR=K(require("crypto")),cR=K(require("util"));var rK=K(require("path")),Jw=K(require("string_decoder"));var Gt=K(require("path")),DD=K(require("fs")),ic=K(require("child_process")),Kw=K(require("string_decoder"));var _D=K(require("path"));var nI;nI=(()=>{"use strict";var t={470:n=>{function o(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function i(a,c){for(var l,u="",d=0,f=-1,p=0,h=0;h<=a.length;++h){if(h<a.length)l=a.charCodeAt(h);else{if(l===47)break;l=47}if(l===47){if(!(f===h-1||p===1))if(f!==h-1&&p===2){if(u.length<2||d!==2||u.charCodeAt(u.length-1)!==46||u.charCodeAt(u.length-2)!==46){if(u.length>2){var m=u.lastIndexOf("/");if(m!==u.length-1){m===-1?(u="",d=0):d=(u=u.slice(0,m)).length-1-u.lastIndexOf("/"),f=h,p=0;continue}}else if(u.length===2||u.length===1){u="",d=0,f=h,p=0;continue}}c&&(u.length>0?u+="/..":u="..",d=2)}else u.length>0?u+="/"+a.slice(f+1,h):u=a.slice(f+1,h),d=h-f-1;f=h,p=0}else l===46&&p!==-1?++p:p=-1}return u}var s={resolve:function(){for(var a,c="",l=!1,u=arguments.length-1;u>=-1&&!l;u--){var d;u>=0?d=arguments[u]:(a===void 0&&(a=process.cwd()),d=a),o(d),d.length!==0&&(c=d+"/"+c,l=d.charCodeAt(0)===47)}return c=i(c,!l),l?c.length>0?"/"+c:"/":c.length>0?c:"."},normalize:function(a){if(o(a),a.length===0)return".";var c=a.charCodeAt(0)===47,l=a.charCodeAt(a.length-1)===47;return(a=i(a,!c)).length!==0||c||(a="."),a.length>0&&l&&(a+="/"),c?"/"+a:a},isAbsolute:function(a){return o(a),a.length>0&&a.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var a,c=0;c<arguments.length;++c){var l=arguments[c];o(l),l.length>0&&(a===void 0?a=l:a+="/"+l)}return a===void 0?".":s.normalize(a)},relative:function(a,c){if(o(a),o(c),a===c||(a=s.resolve(a))===(c=s.resolve(c)))return"";for(var l=1;l<a.length&&a.charCodeAt(l)===47;++l);for(var u=a.length,d=u-l,f=1;f<c.length&&c.charCodeAt(f)===47;++f);for(var p=c.length-f,h=d<p?d:p,m=-1,g=0;g<=h;++g){if(g===h){if(p>h){if(c.charCodeAt(f+g)===47)return c.slice(f+g+1);if(g===0)return c.slice(f+g)}else d>h&&(a.charCodeAt(l+g)===47?m=g:g===0&&(m=0));break}var v=a.charCodeAt(l+g);if(v!==c.charCodeAt(f+g))break;v===47&&(m=g)}var y="";for(g=l+m+1;g<=u;++g)g!==u&&a.charCodeAt(g)!==47||(y.length===0?y+="..":y+="/..");return y.length>0?y+c.slice(f+m):(f+=m,c.charCodeAt(f)===47&&++f,c.slice(f))},_makeLong:function(a){return a},dirname:function(a){if(o(a),a.length===0)return".";for(var c=a.charCodeAt(0),l=c===47,u=-1,d=!0,f=a.length-1;f>=1;--f)if((c=a.charCodeAt(f))===47){if(!d){u=f;break}}else d=!1;return u===-1?l?"/":".":l&&u===1?"//":a.slice(0,u)},basename:function(a,c){if(c!==void 0&&typeof c!="string")throw new TypeError('"ext" argument must be a string');o(a);var l,u=0,d=-1,f=!0;if(c!==void 0&&c.length>0&&c.length<=a.length){if(c.length===a.length&&c===a)return"";var p=c.length-1,h=-1;for(l=a.length-1;l>=0;--l){var m=a.charCodeAt(l);if(m===47){if(!f){u=l+1;break}}else h===-1&&(f=!1,h=l+1),p>=0&&(m===c.charCodeAt(p)?--p==-1&&(d=l):(p=-1,d=h))}return u===d?d=h:d===-1&&(d=a.length),a.slice(u,d)}for(l=a.length-1;l>=0;--l)if(a.charCodeAt(l)===47){if(!f){u=l+1;break}}else d===-1&&(f=!1,d=l+1);return d===-1?"":a.slice(u,d)},extname:function(a){o(a);for(var c=-1,l=0,u=-1,d=!0,f=0,p=a.length-1;p>=0;--p){var h=a.charCodeAt(p);if(h!==47)u===-1&&(d=!1,u=p+1),h===46?c===-1?c=p:f!==1&&(f=1):c!==-1&&(f=-1);else if(!d){l=p+1;break}}return c===-1||u===-1||f===0||f===1&&c===u-1&&c===l+1?"":a.slice(c,u)},format:function(a){if(a===null||typeof a!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);return function(c,l){var u=l.dir||l.root,d=l.base||(l.name||"")+(l.ext||"");return u?u===l.root?u+d:u+"/"+d:d}(0,a)},parse:function(a){o(a);var c={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return c;var l,u=a.charCodeAt(0),d=u===47;d?(c.root="/",l=1):l=0;for(var f=-1,p=0,h=-1,m=!0,g=a.length-1,v=0;g>=l;--g)if((u=a.charCodeAt(g))!==47)h===-1&&(m=!1,h=g+1),u===46?f===-1?f=g:v!==1&&(v=1):f!==-1&&(v=-1);else if(!m){p=g+1;break}return f===-1||h===-1||v===0||v===1&&f===h-1&&f===p+1?h!==-1&&(c.base=c.name=p===0&&d?a.slice(1,h):a.slice(p,h)):(p===0&&d?(c.name=a.slice(1,f),c.base=a.slice(1,h)):(c.name=a.slice(p,f),c.base=a.slice(p,h)),c.ext=a.slice(f,h)),p>0?c.dir=a.slice(0,p-1):d&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};s.posix=s,n.exports=s},447:(n,o,i)=>{var s;if(i.r(o),i.d(o,{URI:()=>y,Utils:()=>J}),typeof process=="object")s=process.platform==="win32";else if(typeof navigator=="object"){var a=navigator.userAgent;s=a.indexOf("Windows")>=0}var c,l,u=(c=function(M,L){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,W){q.__proto__=W}||function(q,W){for(var z in W)Object.prototype.hasOwnProperty.call(W,z)&&(q[z]=W[z])})(M,L)},function(M,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function q(){this.constructor=M}c(M,L),M.prototype=L===null?Object.create(L):(q.prototype=L.prototype,new q)}),d=/^\w[\w\d+.-]*$/,f=/^\//,p=/^\/\//;function h(M,L){if(!M.scheme&&L)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(M.authority,'", path: "').concat(M.path,'", query: "').concat(M.query,'", fragment: "').concat(M.fragment,'"}'));if(M.scheme&&!d.test(M.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(M.path){if(M.authority){if(!f.test(M.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(p.test(M.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}var m="",g="/",v=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,y=function(){function M(L,q,W,z,ne,X){X===void 0&&(X=!1),typeof L=="object"?(this.scheme=L.scheme||m,this.authority=L.authority||m,this.path=L.path||m,this.query=L.query||m,this.fragment=L.fragment||m):(this.scheme=function(ve,Pe){return ve||Pe?ve:"file"}(L,X),this.authority=q||m,this.path=function(ve,Pe){switch(ve){case"https":case"http":case"file":Pe?Pe[0]!==g&&(Pe=g+Pe):Pe=g}return Pe}(this.scheme,W||m),this.query=z||m,this.fragment=ne||m,h(this,X))}return M.isUri=function(L){return L instanceof M||!!L&&typeof L.authority=="string"&&typeof L.fragment=="string"&&typeof L.path=="string"&&typeof L.query=="string"&&typeof L.scheme=="string"&&typeof L.fsPath=="string"&&typeof L.with=="function"&&typeof L.toString=="function"},Object.defineProperty(M.prototype,"fsPath",{get:function(){return k(this,!1)},enumerable:!1,configurable:!0}),M.prototype.with=function(L){if(!L)return this;var q=L.scheme,W=L.authority,z=L.path,ne=L.query,X=L.fragment;return q===void 0?q=this.scheme:q===null&&(q=m),W===void 0?W=this.authority:W===null&&(W=m),z===void 0?z=this.path:z===null&&(z=m),ne===void 0?ne=this.query:ne===null&&(ne=m),X===void 0?X=this.fragment:X===null&&(X=m),q===this.scheme&&W===this.authority&&z===this.path&&ne===this.query&&X===this.fragment?this:new C(q,W,z,ne,X)},M.parse=function(L,q){q===void 0&&(q=!1);var W=v.exec(L);return W?new C(W[2]||m,j(W[4]||m),j(W[5]||m),j(W[7]||m),j(W[9]||m),q):new C(m,m,m,m,m)},M.file=function(L){var q=m;if(s&&(L=L.replace(/\\/g,g)),L[0]===g&&L[1]===g){var W=L.indexOf(g,2);W===-1?(q=L.substring(2),L=g):(q=L.substring(2,W),L=L.substring(W)||g)}return new C("file",q,L,m,m)},M.from=function(L){var q=new C(L.scheme,L.authority,L.path,L.query,L.fragment);return h(q,!0),q},M.prototype.toString=function(L){return L===void 0&&(L=!1),T(this,L)},M.prototype.toJSON=function(){return this},M.revive=function(L){if(L){if(L instanceof M)return L;var q=new C(L);return q._formatted=L.external,q._fsPath=L._sep===b?L.fsPath:null,q}return L},M}(),b=s?1:void 0,C=function(M){function L(){var q=M!==null&&M.apply(this,arguments)||this;return q._formatted=null,q._fsPath=null,q}return u(L,M),Object.defineProperty(L.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=k(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),L.prototype.toString=function(q){return q===void 0&&(q=!1),q?T(this,!0):(this._formatted||(this._formatted=T(this,!1)),this._formatted)},L.prototype.toJSON=function(){var q={$mid:1};return this._fsPath&&(q.fsPath=this._fsPath,q._sep=b),this._formatted&&(q.external=this._formatted),this.path&&(q.path=this.path),this.scheme&&(q.scheme=this.scheme),this.authority&&(q.authority=this.authority),this.query&&(q.query=this.query),this.fragment&&(q.fragment=this.fragment),q},L}(y),_=((l={})[58]="%3A",l[47]="%2F",l[63]="%3F",l[35]="%23",l[91]="%5B",l[93]="%5D",l[64]="%40",l[33]="%21",l[36]="%24",l[38]="%26",l[39]="%27",l[40]="%28",l[41]="%29",l[42]="%2A",l[43]="%2B",l[44]="%2C",l[59]="%3B",l[61]="%3D",l[32]="%20",l);function P(M,L){for(var q=void 0,W=-1,z=0;z<M.length;z++){var ne=M.charCodeAt(z);if(ne>=97&&ne<=122||ne>=65&&ne<=90||ne>=48&&ne<=57||ne===45||ne===46||ne===95||ne===126||L&&ne===47)W!==-1&&(q+=encodeURIComponent(M.substring(W,z)),W=-1),q!==void 0&&(q+=M.charAt(z));else{q===void 0&&(q=M.substr(0,z));var X=_[ne];X!==void 0?(W!==-1&&(q+=encodeURIComponent(M.substring(W,z)),W=-1),q+=X):W===-1&&(W=z)}}return W!==-1&&(q+=encodeURIComponent(M.substring(W))),q!==void 0?q:M}function S(M){for(var L=void 0,q=0;q<M.length;q++){var W=M.charCodeAt(q);W===35||W===63?(L===void 0&&(L=M.substr(0,q)),L+=_[W]):L!==void 0&&(L+=M[q])}return L!==void 0?L:M}function k(M,L){var q;return q=M.authority&&M.path.length>1&&M.scheme==="file"?"//".concat(M.authority).concat(M.path):M.path.charCodeAt(0)===47&&(M.path.charCodeAt(1)>=65&&M.path.charCodeAt(1)<=90||M.path.charCodeAt(1)>=97&&M.path.charCodeAt(1)<=122)&&M.path.charCodeAt(2)===58?L?M.path.substr(1):M.path[1].toLowerCase()+M.path.substr(2):M.path,s&&(q=q.replace(/\//g,"\\")),q}function T(M,L){var q=L?S:P,W="",z=M.scheme,ne=M.authority,X=M.path,ve=M.query,Pe=M.fragment;if(z&&(W+=z,W+=":"),(ne||z==="file")&&(W+=g,W+=g),ne){var Se=ne.indexOf("@");if(Se!==-1){var De=ne.substr(0,Se);ne=ne.substr(Se+1),(Se=De.indexOf(":"))===-1?W+=q(De,!1):(W+=q(De.substr(0,Se),!1),W+=":",W+=q(De.substr(Se+1),!1)),W+="@"}(Se=(ne=ne.toLowerCase()).indexOf(":"))===-1?W+=q(ne,!1):(W+=q(ne.substr(0,Se),!1),W+=ne.substr(Se))}if(X){if(X.length>=3&&X.charCodeAt(0)===47&&X.charCodeAt(2)===58)(pe=X.charCodeAt(1))>=65&&pe<=90&&(X="/".concat(String.fromCharCode(pe+32),":").concat(X.substr(3)));else if(X.length>=2&&X.charCodeAt(1)===58){var pe;(pe=X.charCodeAt(0))>=65&&pe<=90&&(X="".concat(String.fromCharCode(pe+32),":").concat(X.substr(2)))}W+=q(X,!0)}return ve&&(W+="?",W+=q(ve,!1)),Pe&&(W+="#",W+=L?Pe:P(Pe,!1)),W}function A(M){try{return decodeURIComponent(M)}catch{return M.length>3?M.substr(0,3)+A(M.substr(3)):M}}var F=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function j(M){return M.match(F)?M.replace(F,function(L){return A(L)}):M}var J,Y=i(470),ae=function(M,L,q){if(q||arguments.length===2)for(var W,z=0,ne=L.length;z<ne;z++)!W&&z in L||(W||(W=Array.prototype.slice.call(L,0,z)),W[z]=L[z]);return M.concat(W||Array.prototype.slice.call(L))},te=Y.posix||Y;(function(M){M.joinPath=function(L){for(var q=[],W=1;W<arguments.length;W++)q[W-1]=arguments[W];return L.with({path:te.join.apply(te,ae([L.path],q,!1))})},M.resolvePath=function(L){for(var q=[],W=1;W<arguments.length;W++)q[W-1]=arguments[W];var z=L.path||"/";return L.with({path:te.resolve.apply(te,ae([z],q,!1))})},M.dirname=function(L){var q=te.dirname(L.path);return q.length===1&&q.charCodeAt(0)===46?L:L.with({path:q})},M.basename=function(L){return te.basename(L.path)},M.extname=function(L){return te.extname(L.path)}})(J||(J={}))}},e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}return r.d=(n,o)=>{for(var i in o)r.o(o,i)&&!r.o(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:o[i]})},r.o=(n,o)=>Object.prototype.hasOwnProperty.call(n,o),r.r=n=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r(447)})();var{URI:be,Utils:cn}=nI;var oI=K(require("path"));function Ue(t,e){if(Vl(e)){let r=t.dirname(e);return{isWorkspaceFile:!0,workspaceOrFolderPath:e,rootFolderPath:r,configFolderPath:r}}return{isWorkspaceFile:!1,workspaceOrFolderPath:e,rootFolderPath:e,configFolderPath:e}}function Vl(t){return oI.extname(t)===".code-workspace"}async function Ka(t,e){if(!!e.isWorkspaceFile)try{let r=e.rootFolderPath,n=(await t.readFile(e.workspaceOrFolderPath)).toString(),i=Ve(n).folders;if(i&&i.length>0){for(let s of i){let a=s.path,c;if(a){if(t.path.isAbsolute(a))return`Workspace contains an absolute folder path '${a}'.`;c=t.path.resolve(r,a)}else{let l=s.uri;return l?be.parse(l).scheme!=="file"?`Workspace contains folder '${l}' not on the local file system.`:`Workspace contains an absolute folder path '${l}'.`:"Workspace contains a folder that defines neither a path nor a URI."}if(!r6(t,c,r))return`Folder '${c}' is not a subfolder of shared root folder '${r}'.`}return}return"Workspace does not define any folders"}catch(r){return`Problems loading workspace file ${e.workspaceOrFolderPath}: ${r&&(r.message||r.toString())}`}}function r6(t,e,r){return e===r?!0:!e||!r||r.length>e.length||e.length>r.length&&e.charAt(r.length)!==t.path.sep?!1:n6(t.platform,r,e.substr(0,r.length))}function n6(t,e,r){return t==="linux"?e===r:e.toLowerCase()===r.toLowerCase()}var Wr=K(require("path")),Up=K(Ba()),vD=K(require("crypto")),Bp=K(kp()),yD=K(require("util")),wD=K(require("string_decoder"));var Wl=K(require("path"));async function hw(t,e,r){let n=await aT(t,"agent-extra-socket",r);if(!n)return;let o=await mw(e,"agent-socket");if(!o)return;let i=await mw(e,"homedir");try{let{stdout:a}=await e.exec(`ls '${i}/private-keys-v1.d' 2>/dev/null`);if(a.trim())return}catch{}let s=(async()=>{await e.exec(`mkdir -p -m 700 '${Wl.posix.dirname(o)}'`);let a=await aT(t,"homedir",r),c=await mw(e,"homedir");a&&c&&(await Qa({cliHost:t},{shellServer:e},t.path.join(a,"pubring.kbx"),Wl.posix.join(c,"pubring.kbx"),"gpg"),await Qa({cliHost:t},{shellServer:e},t.path.join(a,"pubring.gpg"),Wl.posix.join(c,"pubring.gpg"),"gpg"),await Qa({cliHost:t},{shellServer:e},t.path.join(a,"trustdb.gpg"),Wl.posix.join(c,"trustdb.gpg"),"gpg")),await I6(t,r)})();return{cliHost:t,remoteGpgSocket:o,localGpgSocket:n,ready:s}}async function aT(t,e,r){try{let{stdout:n}=await xe({exec:t.exec,cmd:"gpgconf",args:["--list-dir",e],output:r,print:!0}),o=n.toString().trim();if(o.indexOf(`
`)!==-1){let i=new RegExp(`^${e}:(.*)$`,"m").exec(o);i&&(o=i[1])}return t.platform==="win32"&&/^\/.\//.test(o)&&(o=`${o.charAt(1)}:${o.substr(2).replace(/\//g,"\\")}`),o}catch{return}}async function mw(t,e){try{let{stdout:r}=await t.exec(`gpgconf --list-dir ${e}`),n=r.trim();if(n.indexOf(`
`)!==-1){let o=new RegExp(`^${e}:(.*)$`,"m").exec(n);if(o)return o[1]}return n}catch{return}}async function I6(t,e){try{await xe({exec:t.exec,cmd:"gpg-connect-agent",args:["updatestartuptty","/bye"],output:e})}catch{}}async function gw(t,e,r){if(!("exec"in t)){for(let n=e,o="";n!==o;o=n,n=t.path.dirname(n))if(await t.isFile(t.path.join(n,".git","config")))return n;return}try{let{stdout:n}=await xe({exec:t.exec,cmd:"git",args:["rev-parse","--show-cdup"],cwd:e,output:r}),o=n.toString().trim();return t.path.resolve(e,o)}catch{return}}async function vw(t,e,r){try{return await xe({exec:t.exec,cmd:"git",args:["ls-remote",e],cwd:".",output:r}),!0}catch{return!1}}async function yw({exec:t},e,r){try{let{stdout:n,stderr:o}=await xe({exec:t,cmd:"git",args:["credential",e],env:{GIT_TERMINAL_PROMPT:"0"},stdin:Buffer.from(r),output:ot});return{stdout:n.toString(),stderr:o.toString(),code:0}}catch(n){if(!(n&&n.stdout&&n.stderr))throw n;let{stdout:o,stderr:i,code:s}=n;return{stdout:o.toString(),stderr:i.toString(),code:s||0}}}async function cT(t,e,r){if(!("exec"in t)){let o=await gw(t,e.rootFolderPath,r);if(!o)return;try{return(await t.readFile(t.path.join(o,".git","config"))).toString().split(/^\[/m).filter(a=>a.startsWith("remote")).map(a=>(/^\s*url\s*=\s*(\S+)/m.exec(a)||[])[1]).filter(Boolean)}catch(i){if((i==null?void 0:i.code)!=="ENOENT")throw i;return[]}}let n;try{let{stdout:o}=await xe({exec:t.exec,cmd:"git",args:["remote","-v"],cwd:e.rootFolderPath,output:r});n=o.toString()}catch{return}return Array.from(new Set(T6(/^[^\s]+\s+([^\s]+)/gm,n,1)))}function T6(t,e,r){return{[Symbol.iterator]:function*(){let n;for(;n=t.exec(e);)yield n[r],t.lastIndex===n.index&&t.lastIndex++}}}async function lT(t,e,r){return await A6(t,e,r)||D6(t,e,r)}async function A6(t,e,r){try{let{stdout:n}=await xe({exec:t.exec,cmd:"git",args:["status","--porcelain"],cwd:e.rootFolderPath,output:r});return!!n.toString().trim()}catch{return}}async function D6(t,e,r){let n=await R6(t,e,r);if(!!n)try{let{stdout:o}=await xe({exec:t.exec,cmd:"git",args:["log",`${n}..HEAD`],cwd:e.rootFolderPath,output:r});return!!o.toString().trim()}catch{return}}async function R6(t,e,r){try{let{stdout:n}=await xe({exec:t.exec,cmd:"git",args:["rev-parse","--abbrev-ref","--symbolic-full-name","@{u}"],cwd:e.rootFolderPath,output:r});return n.toString().trim()}catch{return}}async function Ip(t,e,r,n,o,i){let{extensionPath:s}=t;if(await e.isFolder(e.path.join(r,".git")))return{gitClone:void 0,gitUnshallow:void 0};await e.mkdirp(r);let a=n.tokenEnvVar?se(V({},n.env),{GIT_ASKPASS:e.path.join(s,"scripts","gitAskPass.sh"),GIT_TOKEN:e.env[n.tokenEnvVar]}):n.env,c=[];n.fullClone||c.push("--depth","1"),n.branch&&c.push("--branch",n.branch),n.recurseSubmodules&&c.push("--recurse-submodules");let l=bi({ptyExec:e.ptyExec,cmd:"git",args:["clone",...c,n.url,"."],cwd:r,env:a,output:or(o,ie.Info)}),u=n.fullClone?l:(async()=>(await l,await bi({ptyExec:e.ptyExec,cmd:"git",args:["config","remote.origin.fetch","+refs/heads/*:refs/remotes/origin/*"],cwd:r,env:a,output:i}),bi({ptyExec:e.ptyExec,cmd:"git",args:["fetch","--unshallow","--tags"],cwd:r,env:a,output:i})))();return{gitClone:l,gitUnshallow:u}}var Ei=K(require("stream"));async function uT(t,e){let{stdout:r}=await t.exec(`cat /proc/${e}/environ`,{logOutput:!1});return r.split("\0").map(n=>{let o=n.indexOf("=");return o!==-1?[n.slice(0,o),n.slice(o+1)]:[]}).reduce((n,[o,i])=>(o&&(n[o]=i),n),{})}async function ww(t){let e='for pid in `cd /proc && ls -d [0-9]*`; do { echo $pid ; readlink /proc/$pid/cwd ; readlink /proc/$pid/ns/mnt ; cat /proc/$pid/stat | tr "\n" " " ; echo ; xargs -0 < /proc/$pid/environ ; xargs -0 < /proc/$pid/cmdline ; } ; echo --- ; done ; readlink /proc/self/ns/mnt 2>/dev/null',{stdout:r}=await t.exec(e,{logOutput:!1}),n=6,o=r.split(`
---
`),i=o.pop().trim();return{processes:o.map(a=>a.split(`
`)).filter(a=>a.length>=n).map(([a,c,l,u,d,f])=>{let p=/.*\) [^ ]* ([^ ]*) ([^ ]*)/.exec(u)||[];return{pid:a,ppid:p[1],pgrp:p[2],cwd:c,mntNS:l,cmd:f,env:d.split(" ").reduce((h,m)=>{let g=m.indexOf("=");return g!==-1&&(h[m.substr(0,g)]=m.substr(g+1)),h},{})}}),mntNS:i}}function dT(t){let e={};return t.forEach(r=>e[r.pid]={process:r,childProcesses:[]}),t.filter(r=>r.ppid).forEach(r=>{var n;return(n=e[r.ppid])==null?void 0:n.childProcesses.push(e[r.pid])}),e}function Cw(t,e="  ",r="  "){return`${r}${t.process.pid}: ${t.process.cmd}
${t.childProcesses.map(n=>Cw(n,e,r+e))}`}var bw=K(require("events")),Tp=class{constructor(){this.nodeEmitter=new bw.EventEmitter;this.event=e=>(this.nodeEmitter.on("event",e),{dispose:()=>{this.nodeEmitter.off("event",e)}})}fire(e){this.nodeEmitter.emit("event",e)}dispose(){this.nodeEmitter.removeAllListeners()}},Ew=class{constructor(){this.nodeEmitter=new bw.EventEmitter;this.event=e=>{let r=n=>n.results.push(e(n.data));return this.nodeEmitter.on("event",r),{dispose:()=>{this.nodeEmitter.off("event",r)}}}}fire(e){let r=[];return this.nodeEmitter.emit("event",{data:e,results:r}),r}dispose(){this.nodeEmitter.removeAllListeners()}};var j9=lD(),CD=Lw(),Mw=hD(),U9=gD();async function Ql(t,e){var _,P,S,k;let{cliHost:r,output:n}=t,o="Launching Remote-Containers helper.",i=n.start(o);if(no)return n.stop(o,i),{remoteEnv:{},ready:Promise.resolve(),reconnect:()=>Promise.resolve()};let s=r.type==="local",a=s?r:await Vp(process.cwd(),t.loadNativeModule,n),l=(await(0,yD.promisify)(vD.randomBytes)(20)).toString("hex"),u={},d=ED(t.cliHost)||ED(a),f=d?Wr.posix.join(((_=e.env)==null?void 0:_.TMPDIR)||"/tmp",`vscode-ssh-auth-${l}.sock`):void 0;d?(u[f]=d,n.write(`ssh-agent: SSH_AUTH_SOCK in container (${f}) forwarded to ${d.cliHost!==a?"remote":"local"} host (${d.socketPath}).`)):n.write("ssh-agent: SSH_AUTH_SOCK not set on host.");let p=await hw(r,e.shellServer,n)||(s?void 0:await hw(a,e.shellServer,n));p&&(u[p.remoteGpgSocket]={cliHost:p.cliHost,socketPath:p.localGpgSocket});let h=Wr.posix.join(((P=e.env)==null?void 0:P.TMPDIR)||"/tmp",`vscode-remote-containers-ipc-${l}.sock`),m=Wr.posix.join(((S=e.env)==null?void 0:S.TMPDIR)||"/tmp",`vscode-remote-containers-server-${l}.js`),g=Wr.posix.join(((k=e.env)==null?void 0:k.TMPDIR)||"/tmp",`vscode-remote-containers-${l}.js`),v=bD(t,e,"Container",void 0,!1,!1,m,g,u,h,a),y=v.then(T=>T.ready),b=v.then(T=>T.mrpcExec),C=v.then(T=>T.mrpcPtyExec);return y.catch(console.error),t.onAdoptProcess(T=>G9(e.shellServer,h,f,T).catch(console.error)),n.stop(o,i),{remoteContainersCLI:g,remoteEnv:f?{SSH_AUTH_SOCK:f,REMOTE_CONTAINERS_IPC:h}:{REMOTE_CONTAINERS_IPC:h},mrpcExec:b,mrpcPtyExec:C,ready:y,reconnect:()=>v.then(T=>T.reconnect())}}async function Xl(t,e,r,n,o){let{passwdUser:i,homeFolder:s,nodeExecutable:a,mrpcExec:c,mrpcPtyExec:l,setBaseEnv:u,connect:d,reconnect:f,terminate:p}=await bD(t,{remoteExec:e,platform:o},"Host",r,!0,n,void 0);return{passwdUser:i,homeFolder:s,nodeExecutable:a,exec:c,ptyExec:l,setBaseEnv:u,connect:d,reconnect:f,terminate:p}}async function bD(t,{remoteExec:e,platform:r,nodeExecutable:n},o,i,s,a,c,l,u,d,f){let{product:p,output:h}=t,m=l&&Oe(Wr.join(t.extensionPath,"dist","common","remoteContainersCLI.js"),{encoding:"utf8"}),g=Oe(Wr.join(t.extensionPath,"dist","common","remoteContainersServer.js"),{encoding:"utf8"}),v=await Lo(e,h,void 0,r,o),y=s?await jw(v,await $w(v)):void 0,b=(await v.exec({posix:"echo ~",win32:"echo $env:userprofile"})).stdout.trim().split(`
`)[0],C=!0;if(!n||!c){let k=v.path.join(b,".vscode-remote-containers");n||(n=await z9(t,v,k,b,p,a)),c||(c=v.path.join(k,"dist",`vscode-remote-containers-server-${t.package.version}.js`),await Zl(v,c)?C=!1:await v.exec(`mkdir -p '${v.path.dirname(c)}'`))}if(l){let k=`EOF-${l}`;await v.exec(`cat <<'${k}' >${l}
${await m}
${k}
`)}if(C){let k=`EOF-${c}`,T=`${c}_${Date.now()}`;await v.exec(`cat <<'${k}' >${T}
${await g}
${k}
mv ${T} ${c}`)}let _=()=>B9(t,o,v,n,c,u,d,f),P=await _(),S;return{ready:P.ready,passwdUser:y,nodeExecutable:n,homeFolder:b,mrpcExec:H9(()=>P.mrpc,o,i||b),mrpcPtyExec:V9(()=>P.mrpc,o,i||b),mrpcExecToEnd:W9(()=>P.mrpc,o,i||b),setBaseEnv:k=>new Promise((T,A)=>{S=k,P.mrpc.setBaseEnv(k,F=>F?A(F):T())}),connect:P.mrpc.connect,reconnect:async()=>{let k=`${o}: Reconnecting exec server`,T=h.start(k);await P.process.terminate().catch(()=>{}),v=await Lo(e,h,void 0,void 0,o),P=await _(),S&&await new Promise((A,F)=>{P.mrpc.setBaseEnv(S,j=>j?F(j):A())}),h.stop(k,T)},terminate:()=>P.process.terminate()}}async function B9(t,e,r,n,o,i,s,a){let{cliHost:c,output:l}=t,u=Object.keys(i||{}),d=se(V({},u.reduce((S,k)=>(S[k]="duplex",S),{})),{rpc:"async",connected:"async",ready:"async"}),f={exec:"async",stdin:"sink",stdout:"source",stderr:"source",exit:"async",terminate:"async",dispose:"async",ptyExec:"async",ptyIn:"sink",ptyOut:"source",ptyResize:"async",ptyExit:"async",ptyTerminate:"async",ptyDispose:"async",execToEnd:"async",setBaseEnv:"async",connect:"duplex"},p=r.process,h=`echo -n ${Gr} >&2 ; ${s?`rm -f '${s}' ; `:""}REMOTE_CONTAINERS_SOCKETS='${JSON.stringify(u)}' REMOTE_CONTAINERS_IPC='${s||""}' '${n}' '${o}'
`;p.stdin.write(h);let m,g=new Promise(S=>m=S),v=new wD.StringDecoder;p.stderr.on("data",S=>{let k=v.write(S).replace(/^.*DeprecationWarning: Buffer\(\) is deprecated.*$\r?\n?/mg,"").trim();if(m){let T=k.indexOf(Gr);T!==-1&&(m(),m=void 0,k=k.substr(0,T)+k.substr(T+1))}k&&l.write(Ne(`${e} server: ${k}`))}),p.exit.then(({code:S,signal:k})=>{l.write(`${e} server terminated (code: ${S}, signal: ${k}).`)},S=>{l.write(`${e} server did not launch or terminated: ${S&&S.message||String(S)}`)});let b=(c==null?void 0:c.type)==="local",C,_=new Promise(S=>C=S),P=j9(f,d)(se(V({},u.reduce((S,k)=>{let T=i[k];return S[k]=()=>T.cliHost.connect(T.socketPath),S},{})),{rpc:async(S,k)=>{try{let T=JSON.parse(S),A=await yw(b?a:c,T.command,T.stdin).catch(F=>{if(b)throw F});!b&&(A==null?void 0:A.code)!==0&&(A=await yw(a,T.command,T.stdin),A.code===0&&(b=!0)),k(void 0,JSON.stringify(A))}catch(T){console.error(T),k(T)}},connected:S=>{S()},ready:S=>{C(),S()}}));return(0,Bp.default)(CD.source(p.stdout),P.createStream(),CD.sink(p.stdin)),await Promise.race([g,p.exit.then(({code:S,signal:k})=>{throw new Error(`${e} server terminated (code: ${S}, signal: ${k}).`)})]),{ready:_,mrpc:P,process:p}}function H9(t,e,r){return async n=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=n,l=`Run in ${e}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),d=t(),f=await new Promise((p,h)=>{d.exec({cmd:o,args:i,cwd:s||r,env:a},(m,g)=>{m?h(m):p(g)})});return{stdin:Mw.sink(d.stdin(f,p=>{p&&p.message!=="unexpected end of parent stream"&&console.error(p)})),stdout:Mw.source(d.stdout(f)),stderr:Mw.source(d.stderr(f)),exit:new Promise((p,h)=>{d.exit(f,(m,g)=>{var v;c.stop(l,u),m?(((v=m.message)==null?void 0:v.endsWith("ENOENT"))&&!m.code&&(m.code="ENOENT"),h(m)):p(g)})}),terminate:async()=>new Promise((p,h)=>{d.terminate(f,m=>{m?h(m):p()})})}}}function V9(t,e,r){return async n=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=n,l=`Run in ${e}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),d=t(),f=await new Promise((g,v)=>{var y,b;d.ptyExec({cmd:o,args:i,cwd:s||r,env:a,rows:(y=c.dimensions)==null?void 0:y.rows,cols:(b=c.dimensions)==null?void 0:b.columns},(C,_)=>{C?v(C):g(_)})}),p=[c.onDidChangeDimensions&&c.onDidChangeDimensions(g=>d.ptyResize(f,g.columns,g.rows))],h=U9();(0,Bp.default)(h,d.ptyIn(f,g=>{g&&g.message!=="unexpected end of parent stream"&&console.error(g)}));let m=new Tp;return(0,Bp.default)(d.ptyOut(f),g=>{g(null,function v(y,b){if(y!==!0){if(y)throw y;m.fire(b),g(null,v)}})}),{write:g=>h.push(g),onData:m.event,resize:(g,v)=>d.ptyResize(f,g,v),exit:new Promise((g,v)=>{d.ptyExit(f,(y,b)=>{p.forEach(C=>C==null?void 0:C.dispose()),c.stop(l,u),y?v(y):g(b)})}),terminate:async()=>new Promise((g,v)=>{d.ptyTerminate(f,y=>{y?v(y):g()})})}}}function W9(t,e,r){return async n=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=n,l=`Run in ${e}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),d=t();return new Promise((f,p)=>{d.execToEnd({cmd:o,args:i,cwd:s||r,env:a},(h,m)=>{if(c.stop(l,u),h||!m)p({stdin:new Ei.Writable,stdout:Ei.Readable.from([]),stderr:Ei.Readable.from([]),exit:Promise.reject(h),terminate:async()=>{}});else{let g=Ei.Readable.from([Buffer.from(m.stdout.data)]),v=new Promise(C=>g.on("end",C)),y=Ei.Readable.from([Buffer.from(m.stderr.data)]),b=new Promise(C=>y.on("end",C));f({stdin:new Ei.Writable,stdout:g,stderr:y,exit:Promise.all([v,b]).then(()=>({code:m.code,signal:m.signal})),terminate:async()=>{}})}})})}}var qw="\\\\.\\pipe\\openssh-ssh-agent";function ED(t){if(t.env.SSH_AUTH_SOCK)return{cliHost:t,socketPath:t.env.SSH_AUTH_SOCK};if(t.platform==="win32")return{cliHost:t,socketPath:qw}}var Hp=new Set;async function G9(t,e,r,n){let o=await n.processId;if(o&&o>0){let i=await uT(t,o),s=i.REMOTE_CONTAINERS_IPC;s&&s!==e&&!Hp.has(s)&&s.indexOf("vscode-remote-containers-ipc")!==-1&&(Hp.add(s),await t.exec(`rm '${s}' && ln -s '${e}' '${s}'`));let a=i.SSH_AUTH_SOCK;a&&r&&a!==r&&!Hp.has(a)&&a.indexOf("vscode-ssh-auth")!==-1&&(Hp.add(a),await t.exec(`rm '${a}' && ln -s '${r}' '${a}'`))}}async function z9(t,e,r,n,o,i){let s=(o==null?void 0:o.commit)||"b3318bc0524af3d74034b8bb8a64df0ccf35549a",a=(o==null?void 0:o.commit)?o.quality||"insider":"stable",{localCacheFolder:c,output:l,alternateDownload:u}=t,d=Wr.posix.join(r,"bin",s),f=Wr.posix.join(d,"node");try{await e.exec(`test -x '${f}'`)}catch{if(o)try{let v=Wr.posix.join(Uw(n,o),"bin",s),y=Wr.posix.join(v,"node");await e.exec(`test -x '${y}'`);let b=Wr.posix.join(v,"node_modules","node-pty","package.json");return await e.exec(`test -f '${b}'`),y}catch{}let p;if((await e.exec("uname -s")).stdout.trim().split(`
`)[0]==="Darwin")p=Bw;else{let v=await Vw(e);p=Hw(v,!1)}let m={localCacheFolder:c,build:p,commit:s,quality:a,web:!1,output:l,alternateDownload:u},g=tu(m);if(await ht(g)||await Wp(m),p===Bw)await eu({output:l},e,g,d,i);else{let v=[];await Up.t({file:g,filter:b=>/^[^/]*\/(LICENSE$|node$|node_modules\/node-pty\/)/.test(b),onentry:b=>{new Up.WriteEntry.Tar(b).on("data",_=>v.push(_))}});let y=Buffer.concat(v);await eu({output:l},e,y,d,i,!1)}}return f}var Gw=K(require("path"));var K9=K(require("http")),Y9=K(require("https"));function Ww(t,e={}){return new Promise((r,n)=>{let o=t.startsWith("https:")?Y9:K9,i;if(Object.keys(e).length>0){let a=new URL(t);i={headers:e,host:a.host,path:a.pathname}}o.get(i!=null?i:t,a=>{var c;if(a.statusCode<200||a.statusCode>299){if(a.statusCode===302){let l=(c=a.headers)==null?void 0:c.location;l&&r(Ww(l,e))}n(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`))}else{a.on("error",n);let l=[];a.on("data",u=>l.push(u)),a.on("end",()=>r(Buffer.concat(l)))}}).on("error",n)})}async function un(t){let e=await Oe(Gw.join(t,"package.json"),"utf8");return JSON.parse(e)}async function ru(t){let e=await Oe(Gw.join(t,"product.json"),"utf8"),r=JSON.parse(e);return r.commit||(r.commit=await J9(r.quality)),r.serverDataFolderName||(r.serverDataFolderName=".vscode-server-oss"),r}async function J9(t="insider"){let e=`https://update.code.visualstudio.com/api/update/server-linux-x64/${t}/latest`,r=await Ww(e);return JSON.parse(r.toString()).version}var nu=!0;function ou(t,e=!1){let{serverApplicationName:r}=t;return!e&&r?["bin",r]:["server.sh"]}var SD=/^\\\\wsl(\.localhost|\$)?\\/;function Wt(t){return SD.test(t.toLowerCase())}function _i(t){let e=t.toLowerCase(),r=SD.exec(e);if(!r)return"";let n=e.indexOf("\\",r[0].length);return t.substring(r[0].length,n)}async function Gp(t){let{stdout:e}=await xe({exec:xi(void 0),cmd:"wsl",args:["-l","-v"],output:t}),r=e.toString(e[1]===0?"utf16le":"utf8").trim();return(/^\*\s*(\S+)/m.exec(r)||[])[1]}async function Fo(t,e,r){let{stdout:n}=await xe({exec:xi(void 0),cmd:"wsl",args:["-d",t,"-e","wslpath","-u",e],output:r});return n.toString().trim()}async function Q9(t,e){let{stdout:r}=await xe({exec:xi(void 0),cmd:"wsl",args:["-d",t,"-e","/bin/sh","-c","echo ~"],output:e});return r.toString().trim()}async function tc(t,e){let r=_i(t),n=await Fo(r,t,e);return be.parse(`vscode-remote://wsl+${r}${n}`)}function rc(t){if(t.scheme==="vscode-remote"){let e=zp(t.authority);if(e){let r=t.path;return Vl(r)&&(r=_D.posix.dirname(r)),{wslDistro:e,wslPath:r}}}}function zp(t){return(/wsl\+(.*)/.exec(t)||[])[1]}async function xD(t,e,r,n,o,i,s,a){var h;let{distro:c,cwd:l}=await zw(t,e,s),u=nc("wsl",["-d",c,"-e"],l),d=await Xl({extensionPath:r,localCacheFolder:n,package:await un(r),product:o,loadNativeModule:i,output:s,alternateDownload:a},u,l,!1),f=await oc({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:s},{shell:((h=d.passwdUser)==null?void 0:h.shell)||"/bin/sh",remoteExec:d.exec});delete f.WSL_INTEROP,await d.setBaseEnv(f);let p=Si("wsl",l,f,d.exec,d.ptyExec,d.connect,d.nodeExecutable,s);return p.toCommonURI=async m=>{try{return be.file((await xe({exec:d.exec,cmd:"wslpath",args:["-w",m],output:s})).stdout.toString().trim())}catch{return}},p}async function zw(t,{defaultDistro:e},r){let n,o;return typeof t=="object"?(n=t.wslDistro,o=t.wslPath):t&&Wt(t)?(n=_i(t),o=await Fo(n,t,r)):(n=e||await Gp(r)||(()=>{throw new Error("No default WSL distro found.")})(),o=t?await Fo(n,t,r):await Q9(n,r)),{distro:n,cwd:o}}var ID=K(require("path")),Kp=K(require("net")),Yp=K(require("os"));var PD=K(require("os"));async function kD(t,e,r,n,o,i,s,a,c,l){var v;let u=t.substr(6),d=u.indexOf(":"),f=[(l==null?void 0:l.settings.executablePath)||"ssh"];(l==null?void 0:l.settings.configFilePath)&&f.push("-F",X9(l==null?void 0:l.settings.configFilePath)),d!==-1?f.push("-p",u.substr(d+1),u.substr(0,d)):f.push(u);let p=nc(f[0],f.slice(1),void 0,await(l==null?void 0:l.sshAskpassEnv)||{}),h=await Xl({extensionPath:n,localCacheFolder:o,package:await un(n),product:i,loadNativeModule:s,output:a,alternateDownload:c},p,e,!1),m=await oc({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:a},{shell:((v=h.passwdUser)==null?void 0:v.shell)||"/bin/sh",remoteExec:h.exec});await h.setBaseEnv(m);let g=Si("ssh",e||h.homeFolder,m,h.exec,h.ptyExec,h.connect,h.nodeExecutable,a);return g.toCommonURI=()=>Promise.resolve(void 0),g.reconnect=()=>h.reconnect(),g.terminate=()=>h.terminate(),g}function X9(t){return t.replace(/^~($|\/|\\)/,`${PD.homedir()}$1`)}function iu(t,e){let r=Z9(t);if(!r)return;let n=r.hostName;if(r.user||r.hostName.toLowerCase()!==r.hostName||r.port||r.hostName.match(/[\/\\\+]/)){let o=JSON.stringify(r);n=Buffer.from(o,"utf8").toString("hex")}return be.parse(`vscode-remote://ssh-remote+${n}${e}`)}function Z9(t){if(!t.startsWith("ssh://"))return;let e=t.substr(6),r=e.match(/^(?:(.*)@)?(.+?)(?::(\d+))?$/);if(r){let[,n,o,i]=r;return{hostName:o,user:n,port:i?parseInt(i,10):void 0}}return{hostName:e}}var TD=Lw(),$s;(function(o){o[o.Unknown=0]="Unknown",o[o.File=1]="File",o[o.Directory=2]="Directory",o[o.SymbolicLink=64]="SymbolicLink"})($s||($s={}));async function Nn(t,e,r,n,o,i,s,a,c,l){return(t==null?void 0:t.startsWith("ssh://"))&&!(l==null?void 0:l.localDocker)?kD(t,e,n,o,i,s,r,a,c,l):typeof e=="object"||n.executeInWSL==="forWSLPath"&&e&&Wt(e)||n.executeInWSL==="always"?xD(e,n,o,i,s,r,a,c):Vp(e||process.cwd(),r,a)}async function Vp(t,e,r){let n=xi(t),o=await AD(t,e);return eK(t,n,o,tK)}function Si(t,e,r,n,o,i,s,a){let c;return{type:t,platform:"linux",exec:n,ptyExec:o,cwd:e,env:r,path:ID.posix,async homedir(){var l;return typeof c=="undefined"&&(c=this.env.HOME||((l=Jp((await this.readFile("/etc/passwd")).toString(),(await this.getuid()).toString()))==null?void 0:l.home)||"/"),c},async tmpdir(){return this.env.TMPDIR||"/tmp"},isFile:async l=>{try{return await xe({exec:n,cmd:"test",args:["-f",l],output:ot}),!0}catch(u){if((u==null?void 0:u.code)!==1)throw u;return!1}},isFolder:async l=>{try{return await xe({exec:n,cmd:"test",args:["-d",l],output:ot}),!0}catch(u){if((u==null?void 0:u.code)!==1)throw u;return!1}},readFile:async l=>{try{return(await xe({exec:n,cmd:"cat",args:[l],output:ot})).stdout}catch(u){let d=new Error(`Could not read file: ${l}`);throw d.originalError=u,d.code="ENOENT",d}},writeFile:async(l,u)=>{await xe({exec:n,cmd:"/bin/sh",args:["-c",`cat >'${l}'`],stdin:u,output:ot})},rename:async(l,u)=>{await xe({exec:n,cmd:"mv",args:[l,u],output:ot})},rm:async(l,{recursive:u,force:d})=>{await xe({exec:n,cmd:"rm",args:[...u?["-r"]:[],...d?["-f"]:[],l],output:ot})},mkdirp:async l=>{await xe({exec:n,cmd:"mkdir",args:["-p",l],output:ot})},readDir:async l=>(await xe({exec:n,cmd:"ls",args:["-a",l],output:ot})).stdout.toString().trim().split(`
`).filter(u=>u!=="."&&u!==".."),readDirWithTypes:async l=>{let u={f:1,"*":1,"/":2,"@":64};return(await xe({exec:n,cmd:"ls",args:["-aF",l],output:ot})).stdout.toString().trim().split(`
`).map(d=>"/*@=%|>".indexOf(d[d.length-1])!==-1?[d.substr(0,d.length-1),d[d.length-1]]:[d,"f"]).filter(([d])=>d!=="."&&d!=="..").map(([d,f])=>[d,u[f]||0])},getuid:async()=>{let l=await xe({exec:n,cmd:"id",args:["-u"],output:ot});return parseInt(l.stdout.toString().trim(),10)},getgid:async()=>{let l=await xe({exec:n,cmd:"id",args:["-g"],output:ot});return parseInt(l.stdout.toString().trim(),10)},toCommonURI:()=>Promise.resolve(void 0),connect:i,nodeExecutable:s}}function eK(t,e,r,n){return{type:"local",platform:process.platform,exec:e,ptyExec:r,cwd:t,env:process.env,path:ID,homedir:async()=>Yp.homedir(),tmpdir:async()=>Yp.tmpdir(),isFile:ht,isFolder:pl,readFile:Oe,writeFile:hl,rename:Po,rm:oi,mkdirp:async o=>{await Mr(o)},readDir:en,getuid:async()=>process.getuid(),getgid:async()=>process.getgid(),toCommonURI:async o=>be.file(o),connect:n}}function tK(t){if(process.platform!=="win32"||t.startsWith("\\\\.\\pipe\\"))return TD.duplex(Kp.connect(t));let e=new Kp.Socket;return(async()=>{let r=await Oe(t),n=r.indexOf(10),o=parseInt(r.slice(0,n).toString(),10),i=r.slice(n+1);e.connect(o,"127.0.0.1",()=>{e.write(i,s=>{s&&(console.error(s),e.destroy())})})})().catch(r=>{console.error(r),e.destroy()}),TD.duplex(e)}function RD(t,e,r){return t==="linux"?e===r:e.toLowerCase()===r.toLowerCase()}var Yw=Gt.join(__dirname,"..","..","node_modules",".bin","ts-node"),no=Gt.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;async function xe(t){let{exec:e,cmd:r,args:n,cwd:o,env:i,stdin:s,output:a,print:c}=t,l=await e({cmd:r,args:n,cwd:o,env:i,output:a});return new Promise((u,d)=>{let f=[],p=[],h=c==="continuous"?new Kw.StringDecoder:void 0;l.stdout.on("data",v=>{f.push(v),c==="continuous"&&a.write(h.write(v))}),l.stdout.on("error",v=>{if((v==null?void 0:v.code)!=="ENOTCONN")throw v});let m=c==="continuous"?new Kw.StringDecoder:void 0;l.stderr.on("data",v=>{p.push(v),c==="continuous"&&a.write(Ne(m.write(v)))}),l.stderr.on("error",v=>{if((v==null?void 0:v.code)!=="ENOTCONN")throw v});let g=[];l.exit.then(({code:v})=>{try{g.forEach(C=>C.dispose());let y=Buffer.concat(f),b=Buffer.concat(p);(c===!0||v&&c==="onerror")&&(a.write(y.toString().replace(/\r?\n/g,`\r
`)),a.write(Ne(b.toString()))),c&&v&&a.write(`Exit code ${v}`),v?d({message:`Command failed: ${r} ${(n||[]).join(" ")}`,stdout:y,stderr:b,code:v}):u({stdout:y,stderr:b})}catch(y){d(y)}},d),s instanceof Buffer?(l.stdin.write(s,v=>{v&&d(v)}),l.stdin.end()):s instanceof DD.ReadStream?s.pipe(l.stdin):typeof s=="function"&&g.push(s(v=>l.stdin.write(v)))})}async function bi(t){let{ptyExec:e,cmd:r,args:n,cwd:o,env:i,output:s,resolveOn:a,onDidInput:c}=t,l=await e({cmd:r,args:n,cwd:o,env:i,output:s});return new Promise((u,d)=>{let f="",p=[c&&c(h=>l.write(h))];l.onData(h=>{f+=h,s.raw(h),a&&a.exec(f)&&u({cmdOutput:f})}),l.exit.then(({code:h,signal:m})=>{try{p.forEach(g=>g==null?void 0:g.dispose()),h||m?d({message:`Command failed: ${r} ${(n||[]).join(" ")}`,cmdOutput:f,code:h,signal:m}):u({cmdOutput:f})}catch(g){d(g)}},h=>{p.forEach(m=>m==null?void 0:m.dispose()),d(h)})})}function xi(t){return async function(e){let{cmd:r,args:n,output:o}=e,i=`Run: ${r} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,s=o.start(i),a=e.cwd||t,c=e.env?V(V({},process.env),e.env):process.env,l=await Qp(r,a,c,o),u=ic.spawn(l,n,{cwd:a,env:c,windowsHide:!0});return{stdin:u.stdin,stdout:u.stdout,stderr:u.stderr,exit:new Promise((d,f)=>{u.once("error",p=>{o.stop(i,s),f(p)}),u.once("close",(p,h)=>{o.stop(i,s),d({code:p,signal:h})})}),async terminate(){u.kill("SIGKILL")}}}}async function AD(t,e){let r=await e("node-pty");if(!r)throw new Error("Missing node-pty");return async function(n){var m,g;let{cmd:o,args:i,output:s}=n,a=`Run: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,c=s.start(a),l=!1,u=n.cwd||t,d=n.env?V(V({},process.env),n.env):process.env,f=await Qp(o,u,d,s),p=r.spawn(f,i||[],{cwd:u,env:d,cols:(m=s.dimensions)==null?void 0:m.columns,rows:(g=s.dimensions)==null?void 0:g.rows,useConpty:l}),h=[s.onDidChangeDimensions&&s.onDidChangeDimensions(v=>p.resize(v.columns,v.rows))];return{onData:p.onData.bind(p),write:p.write.bind(p),resize:p.resize.bind(p),exit:new Promise(v=>{p.onExit(({exitCode:y,signal:b})=>{if(h.forEach(C=>C==null?void 0:C.dispose()),s.stop(a,c),v({code:y,signal:b}),process.platform==="win32")try{p.kill()}catch{}})}),async terminate(){p.kill("SIGKILL")}}}}function nc(t,e,r,n){return async function(o){let{env:i,cmd:s,args:a,output:c}=o,l=o.cwd||r,u=l?`cd '${l}' && `:"",d=Object.keys(i||{}).map(C=>`${C}='${i[C]}' `).join(""),f=(a||[]).map(C=>` '${C.replace(/'/g,`'"'"'`)}'`).join(""),p=`${u}${d}${s}${f}`,h=p!==s?["/bin/sh","-c",p]:[p],m=[...e,...h],g=`Run: ${t} ${m.join(" ").replace(/\n.*/g,"")}`,v=c.start(g),y=await Qp(t,process.cwd(),process.env,c),b=ic.spawn(y,m,{windowsHide:!0,env:n?V(V({},process.env),n):void 0});return{stdin:b.stdin,stdout:b.stdout,stderr:b.stderr,exit:new Promise((C,_)=>{b.once("error",P=>{c.stop(g,v),_(P)}),b.once("close",(P,S)=>{c.stop(g,v),C({code:P,signal:S})})}),async terminate(){b.kill("SIGKILL")}}}}async function OD(t,e,r,n){let o=await n("node-pty");if(!o)throw new Error("Missing node-pty");return async function(i){var P,S;let{env:s,cmd:a,args:c,output:l}=i,u=i.cwd||r,d=u?`cd '${u}' && `:"",f=Object.keys(s||{}).map(k=>`${k}='${s[k]}' `).join(""),p=(c||[]).map(k=>` '${k.replace(/'/g,`'"'"'`)}'`).join(""),h=`${d}${f}${a}${p}`,m=[...e,"/bin/sh","-c",h],g=`Run: ${t} ${m.join(" ").replace(/\n.*/g,"")}`,v=l.start(g),y=!1,b=await Qp(t,process.cwd(),process.env,l),C=o.spawn(b,m,{cols:(P=l.dimensions)==null?void 0:P.columns,rows:(S=l.dimensions)==null?void 0:S.rows,useConpty:y}),_=[l.onDidChangeDimensions&&l.onDidChangeDimensions(k=>C.resize(k.columns,k.rows))];return{onData:C.onData.bind(C),write:C.write.bind(C),resize:C.resize.bind(C),exit:new Promise(k=>{C.onExit(({exitCode:T,signal:A})=>{if(_.forEach(F=>F==null?void 0:F.dispose()),l.stop(g,v),k({code:T,signal:A}),process.platform==="win32")try{C.kill()}catch{}})}),async terminate(){C.kill("SIGKILL")}}}}async function Qp(t,e=process.cwd(),r,n){if(process.platform!=="win32")return t;if(Gt.isAbsolute(t))return await su(t)||t;if(/[/\\]/.test(t)){let a=Gt.join(e,t);return await su(a)||a}let o,i;if(r){for(let a of Object.keys(r))if(a.toLowerCase()==="path"){let c=r[a];typeof c=="string"&&(o=c,i=c.split(Gt.delimiter).filter(Boolean),i.push(Gt.join(r.ProgramW6432||"C:\\Program Files","Docker\\Docker\\resources\\bin")));break}}if(i===void 0||i.length===0){n.write(`findLocalWindowsExecutable: No PATH to look up exectuable '${t}'.`);let a=Gt.join(e,t);return await su(a)||a}for(let a of i){let c;Gt.isAbsolute(a)?c=Gt.join(a,t):c=Gt.join(e,a,t);let l=await su(c);if(l)return l}n.write(`findLocalWindowsExecutable: Exectuable '${t}' not found on PATH '${o}'.`);let s=Gt.join(e,t);return await su(s)||s}var ND=process.env.PATHEXT,LD=ND?ND.toLowerCase().split(";"):[".com",".exe",".bat",".cmd"];async function su(t){if(LD.indexOf(Gt.extname(t))!==-1)return await ht(t)?t:void 0;for(let e of LD){let r=t+e;if(await ht(r))return r}}function js(t){let e=/^'?v?(\d+(\.\d+)*)/.exec(t);if(!!e)return e[1].split(".").map(r=>parseInt(r,10))}function sc(t,e){for(let r=0,n=Math.max(t.length,e.length);r<n;r++){let o=t[r]||0,i=e[r]||0;if(o!==i)return o<i}return!1}var FD=no?(t,e,r)=>ic.spawn(Yw,[t,...e||[]],se(V({},r),{windowsHide:!0})):ic.fork;async function MD(t,e){if(!e){try{return require(t)}catch{}return}try{return require(`${e}/node_modules.asar/${t}`)}catch{}try{return require(`${e}/node_modules/${t}`)}catch{}}function au(t){let{output:e}=t,r=[];return{output:or(se(V({},e),{get dimensions(){return e.dimensions},event:o=>r?r.push(o):e.event(o)})),flush:()=>{r&&(r.forEach(o=>e.event(o)),r=void 0)}}}function qD(t,e,r){return or(se(V({},t),{get dimensions(){return t.dimensions},event:o=>{o.channel===e&&t.event(o),r.event(o)}}))}function Xp(t,e){return typeof e!="string"&&"win32"in e?t==="win32"?e.win32:e.posix:e}async function Zl(t,e){return Xp(t.platform,{posix:async()=>{try{return await t.exec(`test -f '${e}'`),!0}catch{return!1}},win32:async()=>(await t.exec(`Test-Path '${e}' -PathType Leaf`)).stdout.trim()==="True"})()}var Gr="\u2404";async function Lo(t,e,r,n="linux",o="Container"){let i=typeof t=="function",s=n==="win32",a=i?await t({env:r?{VSCODE_REMOTE_CONTAINERS_SESSION:r}:{},cmd:s?"powershell":"/bin/sh",args:s?["-NoProfile","-Command","-"]:[],output:e}):t;if(!i){let f=s?`powershell -NoProfile -Command "powershell -NoProfile -Command -"
`:`/bin/sh -c 'echo ${Gr}; /bin/sh'
`;a.stdin.write(f),await new Promise(h=>{let m="",g=new Jw.StringDecoder;a.stdout.on("data",function v(y){m+=g.write(y),m.includes(f)&&(a.stdout.off("data",v),h())})})}let c=nK(a),l;async function u(f,p){let h=l=(async()=>{try{await l}catch{}return d(Xp(n,f),p)})();try{return await Promise.race([h,c.unexpectedExit])}finally{c.disposeStdioListeners(),l===h&&(l=void 0)}}async function d(f,p){let h=`Run in ${o.toLowerCase()}: ${f.replace(/\n.*/g,"")}`,m;if((p==null?void 0:p.logOutput)!=="silent"&&(m=e.start(h,p==null?void 0:p.logLevel)),a.stdin.destroyed){e.write("Stdin closed!");let{code:S,signal:k}=await a.exit;return Promise.reject({message:`Shell server terminated (code: ${S}, signal: ${k})`,code:S,signal:k})}n==="win32"?a.stdin.write(`[Console]::Write('${Gr}'); ( ${f} ); [Console]::Write("${Gr}$LastExitCode ${Gr}"); [Console]::Error.Write('${Gr}')
`):a.stdin.write(`echo -n ${Gr}; ( ${f} ); echo -n ${Gr}$?${Gr}; echo -n ${Gr} >&2
`);let[g,v]=$D(a.stdout,[1,2],(p==null?void 0:p.logOutput)==="continuous"?(S,k,T)=>{k===1&&T===0&&e.write(S,p==null?void 0:p.logLevel)}:()=>{}),y=$D(a.stderr,[1],(p==null?void 0:p.logOutput)==="continuous"?(S,k,T)=>{k===0&&T===0&&e.write(S,p==null?void 0:p.logLevel)}:()=>{})[0];(p==null?void 0:p.stdin)&&(await g,a.stdin.write(p==null?void 0:p.stdin));let[b,C]=await v,[_]=await y,P=parseInt(C,10)||0;return((p==null?void 0:p.logOutput)===void 0||(p==null?void 0:p.logOutput)===!0)&&(e.write(b,p==null?void 0:p.logLevel),e.write(_,p==null?void 0:p.logLevel),P&&e.write(`Exit code ${P}`,p==null?void 0:p.logLevel)),(p==null?void 0:p.logOutput)==="continuous"&&P&&e.write(`Exit code ${P}`,p==null?void 0:p.logLevel),(p==null?void 0:p.logOutput)!=="silent"&&e.stop(h,m,p==null?void 0:p.logLevel),P?Promise.reject({message:`Command in ${o.toLowerCase()} failed: ${f}`,code:P,stdout:b,stderr:_}):{stdout:b,stderr:_}}return{exec:u,process:a,platform:n,path:Xp(n,rK)}}function $D(t,e,r){let n=e.map(()=>{let u,d=new Promise((f,p)=>u={resolve:f,reject:p});return V({promise:d},u)}),o=new Jw.StringDecoder("utf8"),i=[],s=0,a=[];function c(u){let d=o.write(u);l(d)}function l(u){let d=u.indexOf(Gr);if(d!==-1){let f=u.substr(0,d);i.push(f),r(f,s,a.length),a.push(i.join("")),i.length=0,a.length===e[s]&&(n[s].resolve(a),s++,a=[],s===e.length&&t.off("data",c)),d+1<u.length&&l(u.substr(d+1))}else i.push(u),r(u,s,a.length)}return t.on("data",c),n.map(u=>u.promise)}function nK(t){let e,r=new Promise((c,l)=>e=l),n=[],o=[],i=c=>n.push(c),s=c=>o.push(c);return t.stdout.on("data",i),t.stderr.on("data",s),t.exit.then(({code:c,signal:l})=>{e(`Shell server terminated (code: ${c}, signal: ${l})
${Buffer.concat(n).toString()}
${Buffer.concat(o).toString()}`)},c=>{e(`Shell server failed: ${c&&(c.stack||c.message)}`)}),{unexpectedExit:r,disposeStdioListeners:()=>{t.stdout.off("data",i),t.stderr.off("data",s),n.length=0,o.length=0}}}var jD=K(require("path"));var oK=["install.sh","install","bootstrap.sh","bootstrap","script/bootstrap","setup.sh","setup","script/setup"];async function Qw(t,e,r,n,o){let{repository:i,installCommand:s,targetPath:a}=t.dotfilesConfiguration;if(i=o["remote.containers.dotfiles.repository"]||o["dotfiles.repository"]||i,s=o["remote.containers.dotfiles.installCommand"]||o["dotfiles.installCommand"]||s,a=o["remote.containers.dotfiles.targetPath"]||o["dotfiles.targetPath"]||a,!i)return;await n;let c=await r;i.indexOf(":")===-1&&!/^\.{0,2}\//.test(i)&&(i=`https://github.com/${i}.git`);let l=e.shellServer,u=sK(e),d=Object.keys(c).filter(f=>!(f.startsWith("BASH_FUNC_")&&f.endsWith("%%"))).reduce((f,p)=>`${f}${p}=${iK(c[p])} `,"");try{t.output.event({type:"progress",name:"Installing Dotfiles",status:"running"}),s?await l.exec(`# Clone & install dotfiles
${Zp(u)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${d}git clone ${i} ${a} || exit $?
if [ -x ${s} ]
then
	echo Executing script ${s}
	cd ${a} && ${d}${s}
else
	echo Error: ${s} not executable
	exit 126
fi
`,{logOutput:"continuous",logLevel:ie.Info}):await l.exec(`# Clone & install dotfiles
${Zp(u)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${d}git clone ${i} ${a} || exit $?
cd ${a}
for f in ${oK.join(" ")}
do
	if [ -e $f ]
	then
		installCommand=$f
		break
	fi
done
if [ -z "$installCommand" ]
then
	dotfiles=$(ls -d ${a}/.* 2>/dev/null | grep -v -E '/(.|..|.git)$')
	if [ ! -z "$dotfiles" ]
	then
		echo Linking dotfiles: $dotfiles
		ln -sf $dotfiles ~ 2>/dev/null
	else
		echo No dotfiles found.
	fi
else
	if [ -x "$installCommand" ]
	then
		echo Executing script '${a}'/"$installCommand"
		${d}./"$installCommand"
	else
		echo Error: '${a}'/"$installCommand" not executable
		exit 126
	fi
fi
`,{logOutput:"continuous",logLevel:ie.Info}),t.output.event({type:"progress",name:"Installing Dotfiles",status:"succeeded"})}catch{t.output.event({type:"progress",name:"Installing Dotfiles",status:"failed"})}}function iK(t){return`'${(t||"").replace(/'+/g,`'"$&"'`)}'`}function sK(t){return jD.posix.join(dn(t),".dotfilesMarker")}var tR=K(require("net")),rR=K(eR());async function nC({forwardedPorts:t,output:e,getLogLevel:r},n,o,i){e.write(`Port forwarding for container port ${o} starts listening on local port.`,ie.Debug);let s=i?{VSCODE_REMOTE_CONTAINERS_SESSION:i}:void 0;return new Promise((a,c)=>{let l=new Set,u=tR.createServer({pauseOnConnect:!0},d=>{let f=d.remotePort,p=u.address().port;e.write(`Port forwarding connection from ${f} > ${p} > ${o} in the container.`),r()===ie.Trace&&(async()=>{let h=await(0,rR.default)("port",f);e.write(`Port forwarding process for ${f} > ${p} > ${o} in the container:
${JSON.stringify(h,void 0,"  ")}`)})().catch(console.error),hK(e,n,[n.nodeExecutable,"-e",`
				const net = require('net');
				const fs = require('fs');
				process.stdin.pause();
				const client = net.createConnection({ port: ${o} }, () => {
					console.error('Connection established');
					client.pipe(process.stdout);
					process.stdin.pipe(client);
				});
				client.on('close', function (hadError) {
					console.error(hadError ? 'Remote close with error' : 'Remote close');
					process.exit(hadError ? 1 : 0);
				});
				client.on('error', function (err) {
					process.stderr.write(err && (err.stack || err.message) || String(err));
				});
				process.stdin.on('close', function (hadError) {
					console.error(hadError ? 'Remote stdin close with error' : 'Remote stdin close');
					process.exit(hadError ? 1 : 0);
				});
				process.on('uncaughtException', function (err) {
					fs.writeSync(process.stderr.fd, \`Uncaught Exception: \${String(err && (err.stack || err.message) || err)}\\n\`);
				});
			`],s).then(h=>{let m;h.exit.then(({code:g,signal:v})=>{m||(l.delete(d),d.end()),e.write(`Port forwarding ${f} > ${p} > ${o} terminated${m?` by extension (${m})`:""} with code ${g} and signal ${v}.`)},g=>{l.delete(d),d.end(),e.write(`Port forwarding ${f} > ${p} > ${o} terminated with error: ${g&&g.message||String(g)}`)}),h.stderr.on("data",g=>{e.write(`Port forwarding ${f} > ${p} > ${o} stderr: ${g.toString("utf8")}`,ie.Debug)}),d.on("close",g=>{e.write(`Port forwarding ${f} > ${p} > ${o}: Local close${g?" with error":""}`,ie.Debug),l.delete(d),m="closed",h.stdin.end(),setTimeout(()=>{m="killed",h.terminate().catch(console.error)},5e3)}),h.stdout.pipe(d),d.pipe(h.stdin),l.add(d)}).catch(console.error)});u.on("listening",()=>{let d={targetPort:o,server:u,connections:l};u.on("close",()=>{t.delete(d)}),t.add(d),e.write(`Port forwarding local port ${u.address().port} to container port ${o}`),a(u)}),u.on("error",d=>{if(d&&(d.code==="EADDRINUSE"||d.code==="EACCES")){u.listen(0,"127.0.0.1");return}c(d)}),u.on("close",()=>{c(new Error("Closed"))}),u.listen(o,"127.0.0.1")})}async function hK(t,e,r,n){return e.remoteExec({env:n,cmd:r[0],args:r.slice(1),output:t})}var ac=K(require("path"));function rh(t,e){let r,n=t.platform==="win32",o=se(V({},t),{get env(){return r||(r=nR(n,t.env))}}),i=vK.bind(void 0,n,o);return t.containerWorkspaceFolder&&(o.containerWorkspaceFolder=oR(i,t.containerWorkspaceFolder)),nh(i,e)}function oC(t,e,r,n){let o=t==="win32";return nh(yK.bind(void 0,o,e,nR(o,r)),n)}function nh(t,e){if(typeof e=="string")return oR(t,e);if(Array.isArray(e))return e.map(r=>nh(t,r));if(e&&typeof e=="object"){let r=Object.create(null);return Object.keys(e).forEach(n=>{r[n]=nh(t,e[n])}),r}return e}var mK=/\$\{(.*?)\}/g;function nR(t,e){if(t){let r=Object.create(null);return Object.keys(e).forEach(n=>{r[n.toLowerCase()]=e[n]}),r}return e}function oR(t,e){return e.replace(mK,gK.bind(void 0,t))}function gK(t,e,r){let n,o=r.split(":");return o.length>1&&(r=o[0],n=o[1]),t(e,r,n)}function vK(t,e,r,n,o){switch(n){case"env":case"localEnv":return iR(t,e.env,o,r,e.configFile);case"localWorkspaceFolder":return e.localWorkspaceFolder!==void 0?e.localWorkspaceFolder:r;case"localWorkspaceFolderBasename":return e.localWorkspaceFolder!==void 0?(t?ac.win32:ac.posix).basename(e.localWorkspaceFolder):r;case"containerWorkspaceFolder":return e.containerWorkspaceFolder!==void 0?e.containerWorkspaceFolder:r;case"containerWorkspaceFolderBasename":return e.containerWorkspaceFolder!==void 0?ac.posix.basename(e.containerWorkspaceFolder):r;default:return r}}function yK(t,e,r,n,o,i){switch(o){case"containerEnv":return iR(t,r,i,n,e);default:return n}}function iR(t,e,r,n,o){if(r){t&&(r=r.toLowerCase());let i=e[r];return typeof i=="string"?i:""}throw new we({description:`'${n}'${o?` in ${ac.posix.basename(o.path)}`:""} can not be resolved because no environment variable name is given.`})}async function oo(t){return new Promise(e=>setTimeout(e,t))}var ki=0,lR=/Extension host agent listening on (\d+)/;var ir;(function(a){a[a.Begin=0]="Begin",a[a.CloningRepository=1]="CloningRepository",a[a.BuildingImage=2]="BuildingImage",a[a.StartingContainer=3]="StartingContainer",a[a.InstallingServer=4]="InstallingServer",a[a.StartingServer=5]="StartingServer",a[a.End=6]="End"})(ir||(ir={}));var sC="updateContentCommand";async function sh(t){let{params:e,createdAt:r,startedAt:n,sharedDataFolder:o,sharedDataFolderIsLocalCacheFolder:i,remoteWorkspaceFolder:s,containerUser:a,containerGroup:c,containerEnv:l,remoteExec:u,remotePtyExec:d,remoteExecAsRoot:f,rootShellServer:p}=t,h;if(p&&a==="root"?h=p:h=await Lo(u,e.output,e.sessionId),!l){let j=(await h.exec("echo $PATH")).stdout.trim();l=j?{PATH:j}:{}}a||(a=await $w(h)),!f&&a==="root"&&(f=u);let m=await Vw(h),g=await jw(h,a);g||e.output.write(Xy(`User ${a} not found in /etc/passwd.`));let v=await wK(l,g),y=await uR(l,g),b=Uw(y,e.product),{commit:C,quality:_}=e.product,P=C&&await CK(b,C,_||"insider",e.web),S=Hw(m,_==="stable"),k=C&&o&&await dR(he.posix,o,S,C,_||"insider",e.web),T=P&&await EK(P),A;p?A=Promise.resolve(p):a==="root"&&(A=Promise.resolve(h));let F={createdAt:r,startedAt:n,osRelease:m,build:S,user:a,gid:c||(g==null?void 0:g.gid),env:l,shell:v,homeFolder:y,userDataFolder:b,sharedDataFolderIsLocalCacheFolder:i,sharedDataFolder:o,installFolder:P,sharedInstallFolder:k,remoteWorkspaceFolder:s,nodeExecutable:T,remoteExec:u,remotePtyExec:d,remoteExecAsRoot:f,shellServer:h};return(A||f)&&(F.launchRootShellServer=()=>A||(A=Lo(f,e.output))),F}async function $w(t){return(await t.exec("id -un")).stdout.trim()}async function uR(t,e){return t.HOME||e&&e.home||"/root"}async function wK(t,e){return t.SHELL||e&&e.shell||"/bin/sh"}async function jw(t,e){let{stdout:r}=await t.exec("cat /etc/passwd",{logOutput:!1});return Jp(r,e)}function Jp(t,e){return t.split(/\r?\n/).map(n=>n.split(":")).map(n=>({name:n[0],uid:n[2],gid:n[3],home:n[5],shell:n[6]})).find(n=>n.name===e||n.uid===e)}async function CK(t,e,r,n){return he.posix.join(t,"bin",`${e}${r==="stable"?"":`-${r}`}${n?"-web":""}`)}async function dR(t,e,r,n,o,i){return t.join(e,"bin",r.id,`${n}${o==="stable"?"":`-${o}`}${i?"-web":""}`)}function fR(t){return he.posix.join(t.userDataFolder,"extensions")}function dn(t){return he.posix.join(typeof t=="string"?t:t.userDataFolder,"data/Machine")}function ah(t){return he.posix.join(t.userDataFolder,"data/Machine/settings.json")}function bK(t){return he.posix.join(t,".vscode-remote")}function Uw(t,e){return he.posix.join(t,e.serverDataFolderName)}function cc(t){return he.posix.join("/var",/^\.*(.*)$/.exec(t)[1])}async function EK(t){return he.posix.join(t,"node")}async function ch(t,e,r,n,o=ki){var y;await pR(t,e),await BK(t,e),await HK(t,e);let i=await hR(t,e,r,n),{serverDownloaded:s}=await mR(t,e),a,c,l=Promise.resolve(),u;if(!t.cliMode&&e.nodeExecutable){let b=await Ql(t,e);a=b.remoteContainersCLI,c=b.remoteEnv,l=b.ready,u=b.mrpcExec;let C=t.cliHost.reconnect;C&&(t.cliHost.reconnect=async()=>{await C(),b.reconnect().catch(_=>t.output.write(Ne(_&&(_.stack||_.message)||String(_))))})}let f=t.computeExtensionHostEnv||e.installFolder&&t.cliMode||t.postCreate.enabled?oc(t,e,r,u).then(b=>V(V(V(V({},b),c),t.cliMode?{}:{REMOTE_CONTAINERS:"true"}),r.remoteEnv?oC(t.cliHost.platform,r.configFilePath,e.env,r.remoteEnv):{})):Promise.resolve({}),p=(y=i["remote.containers.gitCredentialHelperConfigLocation"])!=null?y:t.credentialHelperConfigLocation;!t.cliMode&&e.nodeExecutable&&(await Us(t,e,[".ssh","known_hosts"],"ssh"),p!=="none"&&await lc(e,a,t.output,"system"));let h,m,g,v;if(e.installFolder){let C=await ER(t,e,o,u,async()=>yR(t,e,async()=>{var S,k,T;return Array.from(new Set([...((k=(S=r.customizations)==null?void 0:S.vscode)==null?void 0:k.extensions)||[],...((T=await n())==null?void 0:T.allFeatures.filter(A=>(nu||A.included)&&A.value).reduce((A,F)=>{var j,J;return A.concat(((J=(j=F.customizations)==null?void 0:j.vscode)==null?void 0:J.extensions)||[])},[]))||[]]))}),f),_=C.serverPort;g=C.connectionToken,v=C.webConnectionToken,h=_,t.forwardServerPort&&e.nodeExecutable&&(m=await nC(t,e,_,t.sessionId),h=m.address().port,t.backgroundTasks.push(async()=>PR(t,e,r)))}if(t.postCreate.enabled){let b,C=!1,_=new Promise(S=>b=()=>{C=!0,S()}),P=(async()=>{var S;if((r.waitFor||sC)==="initializeCommand"&&b(),!(t.postCreate.skipNonBlocking&&C)&&(await cC(t,e,r,"onCreateCommand",f,l,!1,b),!(t.postCreate.skipNonBlocking&&C)&&(await cC(t,e,r,"updateContentCommand",f,l,!!t.prebuild,b),!(t.postCreate.skipNonBlocking&&C)))){if(!t.prebuild){if(await cC(t,e,r,"postCreateCommand",f,l,!1,b),t.postCreate.skipNonBlocking&&C||(await Qw(t,e,f,l,i),!t.cliMode&&e.nodeExecutable&&(((S=i["remote.containers.copyGitConfig"])!=null?S:t.isCopyGitConfigEnabled)&&(await Us(t,e,[".gitconfig"],"git"),await dh(t,e,f.then(k=>V(V({},e.env),k)))),await lc(e,a,t.output,p)),await LK(t,e,r,f,l,b),t.postCreate.skipNonBlocking&&C))return;await FK(t,e,r,f,l,b)}t.postCreate.done()}})();t.backgroundTasks.push(P),await Promise.race([_,P])}return{hostOrContainerPort:h,hostPortServer:m,connectionToken:g,webConnectionToken:v,remoteEnv:t.computeExtensionHostEnv?await f:{},serverDownloaded:s}}async function lh(t,e,r,n,o=ki,i){var b;await pR(t,e);let s=await hR(t,e,r,n),{serverDownloaded:a}=await mR(t,e),c,l,u=Promise.resolve(),d;if(!t.cliMode&&e.nodeExecutable){let C=await Ql(t,e);c=C.remoteContainersCLI,l=C.remoteEnv,u=C.ready,d=C.mrpcExec;let _=t.cliHost.reconnect;_&&(t.cliHost.reconnect=async()=>{await _(),C.reconnect().catch(P=>t.output.write(Ne(P&&(P.stack||P.message)||String(P))))})}let p=t.computeExtensionHostEnv||e.installFolder&&t.cliMode||t.postCreate.enabled?oc(t,e,r,d).then(C=>V(V(V(V({},C),l),t.cliMode?{}:{REMOTE_CONTAINERS:"true"}),r.remoteEnv?oC(t.cliHost.platform,r.configFilePath,e.env,r.remoteEnv):{})):Promise.resolve({}),h=(b=s["remote.containers.gitCredentialHelperConfigLocation"])!=null?b:t.credentialHelperConfigLocation;!t.cliMode&&e.nodeExecutable&&(await Us(t,e,[".ssh","known_hosts"],"ssh"),h!=="none"&&await lc(e,c,t.output,"system"));let m,g,v,y;if(e.installFolder){let _=await ER(t,e,o,d,async()=>yR(t,e,async()=>{var k,T,A;return Array.from(new Set([...((T=(k=r.customizations)==null?void 0:k.vscode)==null?void 0:T.extensions)||[],...((A=await n())==null?void 0:A.allFeatures.filter(F=>(nu||F.included)&&F.value).reduce((F,j)=>{var J,Y;return F.concat(((Y=(J=j.customizations)==null?void 0:J.vscode)==null?void 0:Y.extensions)||[])},[]))||[]]))}),p),P=_.serverPort;v=_.connectionToken,y=_.webConnectionToken,m=P,t.forwardServerPort&&e.nodeExecutable&&(g=await nC(t,e,P,t.sessionId),m=g.address().port,t.backgroundTasks.push(async()=>PR(t,e,r)))}if(t.postCreate.enabled){let C,_=new Promise(S=>C=()=>{S()}),P=(async()=>{var T;let S=V(V({},l),t.cliMode?{}:{REMOTE_CONTAINERS:"true"}),k=["onCreateCommand","updateContentCommand","postCreateCommand","postStartCommand","postAttachCommand"];if(t.prebuild){let A=k.indexOf("updateContentCommand");if((!k.slice(0,A+1).some(J=>r[J])?"prebuild":await i(!1,!1,!0,S))!=="prebuild")throw new Error('"prebuild" expected')}else{let A=!0,F=!0,j=k.indexOf(r.waitFor||sC),J=k.indexOf("postCreateCommand"),Y=j<=J&&!k.slice(0,j+1).some(M=>r[M]),ae=!k.slice(0,J+1).some(M=>r[M]),te=Y?"skipNonBlocking":ae?"stopForPersonalization":await i(A,F,!1,S);if(te==="skipNonBlocking"){if(C(),t.postCreate.skipNonBlocking)return;A=!1,te=!k.slice(j+1,J+1).some(L=>r[L])?"stopForPersonalization":await i(A,F,!1,S)}if(te==="stopForPersonalization"){await Qw(t,e,p,u,s),!t.cliMode&&e.nodeExecutable&&(((T=s["remote.containers.copyGitConfig"])!=null?T:t.isCopyGitConfigEnabled)&&(await Us(t,e,[".gitconfig"],"git"),await dh(t,e,p.then(q=>V(V({},e.env),q)))),await lc(e,c,t.output,h)),F=!1;let M=j>J&&!k.slice(J+1,j+1).some(q=>r[q]),L=!k.slice(J+1).some(q=>r[q]);te=M?"skipNonBlocking":L?"done":await i(A,F,!1,S)}if(te==="skipNonBlocking"){if(C(),t.postCreate.skipNonBlocking)return;A=!1,te=!k.slice(j+1).some(L=>r[L])?"done":await i(A,F,!1,S)}if(te!=="done")throw new Error('"done" expected')}})();P.then(()=>{t.postCreate.done()},S=>{t.postCreate.done(S)}),t.backgroundTasks.push(P),await Promise.race([_,P])}return{hostOrContainerPort:m,hostPortServer:g,connectionToken:v,webConnectionToken:y,remoteEnv:t.computeExtensionHostEnv?await p:{},serverDownloaded:a}}async function pR(t,e){let r=bK(e.homeFolder);!await ph(e.shellServer,e.userDataFolder)&&await ph(e.shellServer,r)&&await Mo(t,e,["/bin/sh","-c",`cp -r '${r}' '${e.userDataFolder}'`])}async function hR(t,e,r,n){var a,c,l;let o=dn(e),i=he.posix.join(o,".writeMachineSettingsMarker"),s=ah(e);if(await fh(e.shellServer,i)){let u=Object.assign({},...((a=await n())==null?void 0:a.allFeatures.filter(d=>{var f,p;return(nu||d.included)&&d.value&&((p=(f=d.customizations)==null?void 0:f.vscode)==null?void 0:p.settings)}).map(d=>{var f,p;return(p=(f=d.customizations)==null?void 0:f.vscode)==null?void 0:p.settings}))||[],(l=(c=r.customizations)==null?void 0:c.vscode)==null?void 0:l.settings);if(_K(u,r.portsAttributes),SK(u,r.otherPortsAttributes),Object.keys(u).length)return await e.shellServer.exec(`mkdir -p '${he.posix.dirname(s)}' && cat >'${s}' <<'settingsJSON'
${JSON.stringify(u,null,"	")}
settingsJSON
`),u}try{let{stdout:u}=await e.shellServer.exec(`cat ${s}`);return Ve(u)||{}}catch{return{}}}function _K(t,e){if(!t||!e)return;let r="remote.portsAttributes";if(!t[r]){t[r]=e;return}for(let n in e)t[r][n]||(t[r][n]=e[n])}function SK(t,e){if(!t||!e)return;let r="remote.otherPortsAttributes";t[r]||(t[r]=e)}async function uh(t,e,r,n){let o=typeof t.gid=="string"?`${t.user}:${t.gid}`:t.user,i=await e();if((await i.exec(`stat -c %u ${r}`)).stdout.trim()==="0"){let c=he.posix.dirname(r);c!=="/"&&await i.exec(`chown ${o} ${c}`),r!=="/"&&await i.exec(`chown -R ${o} ${r}`)}else if(n&&(await i.exec(`stat -c %u ${n}`)).stdout.trim()==="0"){let u=he.posix.dirname(n);u!=="/"&&await i.exec(`chown -R ${o} ${u}`)}}async function lc(t,e,r,n){if((e||no)&&n!=="none"){let o=n==="system"?t.launchRootShellServer&&await t.launchRootShellServer():t.shellServer;o?await o.exec(`command -v git >/dev/null 2>&1 && git config --${n} --replace-all credential.helper '!f() { ${t.nodeExecutable} ${e} $*; }; f' || true`):r.write("Cannot configure system wide Git credential helper without root access.")}}async function Us(t,e,r,n){let{cliHost:o}=t,i=o.path.join(await o.homedir(),...r),s=he.posix.join(e.homeFolder,...r);await Qa(t,e,i,s,n)}async function dh(t,e,r){let{cliHost:n}=t,{env:o}=n,i=["git","config"],s=o.XDG_CONFIG_HOME?[o.XDG_CONFIG_HOME]:[await n.homedir(),".config"],a=n.path.join(...s,...i),c=(async()=>{let l=await r,u=l.XDG_CONFIG_HOME?[l.XDG_CONFIG_HOME]:[e.homeFolder,".config"];return he.posix.join(...u,...i)})();await Qa(t,e,a,c,"git")}async function Qa(t,e,r,n,o){let i=await xK(t.cliHost,r);if(i)try{let s=await n;await e.shellServer.exec(`# Test for ${s} and ${o}
[ -e ${s} ] && echo ${s} exists && exit 1
command -v ${o} >/dev/null 2>&1 || (echo ${o} not found && exit 1) || exit 1
mkdir -p ${he.posix.dirname(s)}`),await e.shellServer.exec(`# Copy ${r} to ${s}
${uC(i.byteLength)} >${s}`,{stdin:i})}catch(s){if(s&&s.code!==1)throw s}}async function xK(t,e){try{return await t.readFile(e)}catch(r){if(r&&(r.code==="ENOENT"||r.code==="EISDIR"))return;throw r}}async function mR(t,e){let{commit:r}=t.product,{installFolder:n,shellServer:o,launchRootShellServer:i,build:s}=e;if(!(r&&n))return{serverDownloaded:void 0};PK(e.osRelease,s),s.preview&&t.output.write(`\r
[1mSupport for ${s.label} is in preview.[22m\r
\r
`);let a=await ph(o,n),c;a||s===CR[s.arch]&&(i?c=(await i()).exec("apk info | grep -e '^libstdc++$' || (apk update && apk add libstdc++)"):c=o.exec(`apk info | grep -e '^libstdc++$' || (echo "ERROR: libstdc++ not found. Please install." >&2 && exit 1)`));let l=e.sharedInstallFolder;if(l&&await ph(o,l))return a||await o.exec(`mkdir -p '${he.posix.dirname(n)}' && ln -snf '${l}' '${n}'`),i&&(async()=>{await(await i()).exec(`touch '${l}'`)})().catch(console.error),await c,{serverDownloaded:!1};if(a)return{serverDownloaded:!1};t.progress(4),t.output.write(`Installing VS Code Server for commit ${r}\r
`);let u=!!(l&&i),d=u?l:n,f=u?await i():o,p={localCacheFolder:t.localCacheFolder,build:s,commit:r,quality:t.product.quality||"insider",web:t.web,output:t.output,alternateDownload:t.alternateDownload},h=tu(p),m=await ht(h);m||await Wp(p);try{e.sharedDataFolderIsLocalCacheFolder?await gR(p):await eu(t,f,h,d)}catch(g){if(g&&g.stderr&&/unexpected end of file|not in gzip format/i.test(g.stderr.toString()))await Wp(p),e.sharedDataFolderIsLocalCacheFolder?await gR(p):await eu(t,f,h,d);else throw g}return u&&(await o.exec(`mkdir -p '${he.posix.dirname(n)}' && ln -snf '${l}' '${n}'`),(async()=>{await f.exec(`cd '${he.posix.dirname(l)}' && ls -t | tail -n +10 | xargs rm -rf`)})().catch(console.error)),await c,{serverDownloaded:!m}}function PK(t,e){let r=t.version;if(e.minVersion&&r){let n=js(r.trim());if(n&&sc(n,e.minVersion)){let o=`${e.label} ${e.minVersion.join(".")} or later required.`;throw new we({description:o,data:{reload:!1}})}}}async function Wp(t){let{build:e,commit:r,quality:n,web:o,output:i}=t,s="Downloading VS Code Server",a=i.start(s);i.write(`${r} ${e.id} ${n} ${o?"web":""}`);let c=tu(t);await Mr(he.dirname(c));let l=`https://update.code.visualstudio.com/commit:${r}/server-${e.id}${o?"-web":""}/${n}`;try{let u=`${c}_${Date.now()}`;await new Promise((d,f)=>{let p=oh.createWriteStream(u);sR.https.get(l,m=>{if(m.statusCode<200||m.statusCode>299){f(new we({description:"Downloading the VS Code Server failed. Please try again later.",originalError:`Failed to download VS Code Server (${l}): HTTP ${m.statusCode} - ${m.statusMessage}`}));return}m.on("error",f),m.pipe(p),m.on("end",d)}).on("error",f)}),await Po(u,c)}catch(u){if(t.alternateDownload){i.write(u&&(u.originalError||u.message)),i.write("Retrying to download VS Code Server.");let d=`${c}_${Date.now()}`;await t.alternateDownload(l,d),await Po(d,c)}else throw u||new Error("Failed to download VS Code Server.")}finally{i.stop(s,a)}}async function eu(t,e,r,n,o,i=!0){let s="Installing VS Code Server",a=t.output.start(s);try{let c=`${n}_${Date.now()}`;if(await e.exec(`mkdir -p ${c}`),o)typeof r=="string"&&r.endsWith(".zip")?await e.exec(`unzip ${r} -d ${c}`):await e.exec(`cat ${r} | tar --no-same-owner -x${i?"z":""} -C ${c}`);else{let l=typeof r=="string"?await Oe(r):r;await e.exec(`${uC(l.byteLength)} | tar --no-same-owner -x${i?"z":""} -C ${c}`,{stdin:l})}await e.exec(`mv -n ${he.posix.join(c,"*",".")} ${n} && rmdir ${c}`)}finally{t.output.stop(s,a)}}async function gR(t){let{localCacheFolder:e,build:r,commit:n,quality:o,web:i,output:s}=t,a="Unpacking VS Code Server",c=s.start(a);s.write(`${n} ${r.id} ${o} ${i?"web":""}`);try{let l=await dR(he,e,r,n,o,i),u=`${l}_${Date.now()}`;await Mr(u);let d=tu(t);await(await xi(void 0)({cmd:"tar",args:["--no-same-owner","-xzf",d,"--strip-components","1","-C",u],cwd:process.cwd(),output:s})).exit,await oi(l,{recursive:!0,force:!0}),await Po(u,l)}finally{s.stop(a,c)}}function tu(t){let{localCacheFolder:e,build:r,commit:n,quality:o,web:i}=t,s=he.join(e,"serverCache",n),a=`vscode-server-${r.id}${o==="stable"?"":`-${o}`}${i?"-web":""}${r.archiveExt||".tar.gz"}`;return he.join(s,a)}async function vR(t,e){let r={VSCODE_AGENT_FOLDER:e.userDataFolder},{stdout:n}=await Mo(t,e,[he.posix.join(e.installFolder,...ou(t.product)),..._R(e.userDataFolder),...xR(t.getTelemetryLevel()),"--list-extensions"],e.installFolder,{remoteEnv:r});return n.toString().split(`
`).filter(o=>!!o)}async function yR(t,e,r){let n="Preparing Extensions",o=t.output.start(n),{sharedDataFolder:i}=e,s=i?RK(i):void 0,a=wR(e),c=await kK(t,e,r);if(e.sharedDataFolderIsLocalCacheFolder)e.shellServer.exec(`mkdir -p '${s}' && ln -s -T '${s}' '${a}' || true`),e.launchRootShellServer&&(await e.launchRootShellServer()).exec(`chown -R ${e.user} ${s}`);else{let l=DK(t.localCacheFolder),u=await IK(t,e,l,s,a,[...c.builtinExtensions,...c.extensions]);TK(t,e,l,s,a,u).catch(console.error)}return t.output.stop(n,o),c}async function kK(t,e,r){let n=dn(e),o=he.posix.join(n,".installExtensionsMarker"),i=!await fh(e.shellServer,o),s=i?[]:t.installBuiltinExtensions||[],a=await t.getAdditionalExtensionsToInstall(i),c=i?[]:await r();for(let u of a)c.indexOf(u)===-1&&c.push(u);let l=[].concat(...s.map(u=>["--install-builtin-extension",u]),...c.map(u=>["--install-extension",u]));return t.cliMode&&l.length&&l.push("--do-not-sync"),{builtinExtensions:s,extensions:c,args:l}}async function IK(t,e,r,n,o,i){t.output.write(`Extensions cache, install extensions: ${i.join(", ")||"None"}`);let{shellServer:s}=e,a=(await s.exec(`test -d ${o} && ls ${o} || true`)).stdout.trim().split(`
`).filter(c=>!!c);if(n){let c=(await s.exec(`test -d ${n} && ls ${n} || true`)).stdout.trim().split(`
`).filter(u=>!!u),l=c.filter(u=>i.some(d=>u.toLowerCase().startsWith(d.toLowerCase()))&&a.indexOf(u)===-1);if(t.output.write(`Extensions cache, link in container: ${l.join(", ")||"None"}`),l.length){await s.exec(`mkdir -p '${o}' && ln -s '${n}'/* '${o}' || true`);let{launchRootShellServer:u}=e;u&&(async()=>{await(await u()).exec(`cd ${n} && touch ${l.map(f=>`'${f}'`).join(" ")}`)})().catch(console.error)}return{remoteExtensions:[...new Set([...a,...c])],cachedExtensions:c}}else{await Mr(r);let c=await en(r),l=c.filter(u=>i.some(d=>u.toLowerCase().startsWith(d.toLowerCase()))&&a.indexOf(u)===-1);if(t.output.write(`Extensions cache, copy to remote: ${l.join(", ")||"None"}`),l.length){let u=he.basename(r),d=ih.c({cwd:he.dirname(r)},l.map(h=>he.join(u,h))),f=he.posix.join(o,`tmp-${Date.now()}`),p=await new Promise(h=>{let m=[];d.on("data",g=>m.push(g)),d.on("end",()=>h(Buffer.concat(m)))});await s.exec(`# Copy extensions to remote
mkdir -p ${f}
${uC(p.byteLength)} | tar --no-same-owner -x --strip-components 1 -C ${f}
mv ${f}/* ${o} && rmdir ${f}`,{stdin:p})}return{remoteExtensions:a.concat(l),cachedExtensions:c}}}async function TK(t,e,r,n,o,i){if(n&&!e.launchRootShellServer)return;let s=1e4,a=6e4;for(await oo(s);;)i=await AK(t,e,r,n,o,i),await oo(a)}async function AK(t,e,r,n,o,{remoteExtensions:i,cachedExtensions:s}){let{shellServer:a,launchRootShellServer:c,remoteExec:l}=e,u=(await a.exec(`ls ${o} || true`,{logOutput:"silent"})).stdout.trim().split(`
`).filter(f=>!!f);if(!n){let f=i.filter(p=>u.indexOf(p)===-1);t.output.write(`Extensions cache, remote removals: ${f.join(", ")||"None"}`);for(let p of f)try{await eS(he.join(r,p))}catch(h){if(!(h&&h.code==="ENOENT"))throw h}}let d=u.filter(f=>i.indexOf(f)===-1&&s.indexOf(f)===-1);if(t.output.write(`Extensions cache, copy to ${n?"shared cache":"local"}: ${d.join(", ")||"None"}`,ie.Trace),d.length)if(n){let f=await c();await f.exec(`mkdir -p '${n}' && cd '${o}' && cp ${d.map(p=>`'${p}'`).join(" ")} '${n}'`),await f.exec(`cd '${n}' && ls -t | tail -n +50 | xargs rm -f`)}else{let f=he.posix.basename(o),p=await l({cmd:"tar",cwd:he.posix.dirname(o),args:["c",...d.map(v=>he.posix.join(f,v))],output:t.output}),h=he.join(he.dirname(r),`${he.basename(r)}-${Date.now()}`);await Mr(h);let m=ih.x({cwd:h,strip:1}),g=new Promise((v,y)=>{m.on("error",y),m.on("finish",v)});p.stdout.pipe(m),await g;for(let v of await en(h))await Po(he.join(h,v),he.join(r,v));await tS(h)}return{remoteExtensions:u,cachedExtensions:s}}var aC="extensionsCache";function DK(t){return he.join(t,aC)}function RK(t){return he.posix.join(t,aC)}function wR(t){return he.posix.join(t.userDataFolder,aC)}var OK={x64:{label:"x86-64",id:"linux-x64",arch:"x64",stable:!0,preview:!1},armhf:{label:"ARM",id:"linux-armhf",arch:"armhf",stable:!0,preview:!0},arm64:{label:"ARM64",id:"linux-arm64",arch:"arm64",stable:!0,preview:!0}},CR={x64:{label:"Alpine Linux",id:"linux-alpine",arch:"x64",stable:!0,preview:!0,minVersion:[3,9]},arm64:{label:"Alpine Linux ARM64",id:"alpine-arm64",arch:"arm64",stable:!0,preview:!0,minVersion:[3,9]}},Bw={label:"Mac",id:"darwin",arch:"x64",stable:!0,preview:!0,archiveExt:".zip"},NK={x86_64:"x64",armv7l:"armhf",arm64:"arm64",aarch64:"arm64"};function Hw(t,e){let r=NK[t.hardware];if(t.id==="alpine"){let o=r&&CR[r];if(!o)throw new we({description:`Alpine Linux is not supported on the hardware architecture '${t.hardware}' of the container.`,data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return o}let n=r&&OK[r];if(!n||e&&!n.stable)throw new we({description:`The hardware architecture '${t.hardware}' of the container is not supported.`,data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return n}async function Vw(t){let e="unknown",r="unknown",n="unknown";try{e=(await t.exec("uname -m")).stdout.trim();let{stdout:o}=await t.exec("(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null");r=(o.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",n=(o.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound"}catch(o){console.error(o)}return{hardware:e,id:r,version:n}}async function cC(t,e,r,n,o,i,s,a){let c=he.posix.join(dn(e),`.${n}Marker`),l=!!e.createdAt&&await bR(e.shellServer,c,e.createdAt)||s;await lC(t,e,r,n,o,i,l,a)}async function LK(t,e,r,n,o,i){let s=he.posix.join(dn(e),".postStartCommandMarker"),a=!!e.startedAt&&await bR(e.shellServer,s,e.startedAt);await lC(t,e,r,"postStartCommand",n,o,a,i)}async function bR(t,e,r){try{return await t.exec(`mkdir -p '${he.posix.dirname(e)}' && CONTENT="$(cat '${e}' 2>/dev/null || echo ENOENT)" && [ "\${CONTENT:-${r}}" != '${r}' ] && echo '${r}' > '${e}'`),!0}catch{return!1}}async function FK(t,e,r,n,o,i){await lC(t,e,r,"postAttachCommand",n,o,!0,i)}async function lC({postCreate:t},e,r,n,o,i,s,a){let c=r[n];if(s&&c&&(typeof c=="string"?c.trim():c.length)){await i;let l=`Running ${n}...`,u=typeof c=="string"?c:c.join(" "),d=or({event(f){t.output.event(f),f.type==="raw"&&f.text.includes("::endstep::")&&t.output.event({type:"progress",name:l,status:"running",stepDetail:""}),f.type==="raw"&&f.text.includes("::step::")&&t.output.event({type:"progress",name:l,status:"running",stepDetail:`${f.text.split("::step::")[1].split(`\r
`)[0]}`})},get dimensions(){return t.output.dimensions},onDidChangeDimensions:t.output.onDidChangeDimensions},ie.Info);try{d.event({type:"progress",name:l,status:"running",stepDetail:u});let f=e.remoteWorkspaceFolder||e.homeFolder;d.raw(`[1mRunning the ${n} from devcontainer.json...[0m\r
\r
`),await UK(se(V({},t),{output:d}),e,typeof c=="string"?["/bin/sh","-c",c]:c,f,{remoteEnv:await o,print:"continuous"}),d.raw(`\r
`),d.event({type:"progress",name:l,status:"succeeded"})}catch(f){if(d.event({type:"progress",name:l,status:"failed"}),f&&(f.code===130||f.signal===2))d.raw(`\r
[1m${n} interrupted.[0m\r
\r
`);else throw(f==null?void 0:f.code)&&d.write(Ne(`${n} failed with exit code ${f.code}. Skipping any further user-provided commands.`)),new we({description:`The ${n} in the devcontainer.json failed.`,originalError:f})}}n===(r.waitFor||sC)&&a()}async function fh(t,e){try{return await t.exec(Zp(e)),!0}catch{return!1}}function Zp(t){return`test ! -f '${t}' && set -o noclobber && mkdir -p '${he.posix.dirname(t)}' && { > '${t}' ; } 2> /dev/null`}async function ph(t,e){try{return await MK(t,e),!0}catch{return!1}}async function MK(t,e){return t.exec(`test -d ${e}`)}async function ER(t,e,r,n,o,i){let{userDataFolder:s,installFolder:a,sharedInstallFolder:c,shellServer:l}=e,{processes:u,mntNS:d}=await ww(l),f=`(${he.posix.join(...ou(t.product,!1))}|${he.posix.join(...ou(t.product,!0))})`.replace(".","\\."),p=new RegExp(`${he.posix.join(he.posix.dirname(a).replace(".","\\."),"[^/]*",f)}`),h=u.filter(Y=>Y.mntNS===d&&p.test(Y.cmd));t.output.write(`Running extension host agents:
${JSON.stringify(h,void 0,"  ")}`,ie.Trace);let{current:m,others:g}=h.reduce((Y,ae)=>(Y[(ae.cwd===a||ae.cwd===c)&&p.test(ae.cmd)?"current":"others"].push(ae),Y),{current:[],others:[]});if(!t.cliMode&&g.length){t.output.write(`Terminating old extension host agent.\r
`);try{await l.exec(`kill -9 ${g.map(Y=>Y.pgrp?`-${Y.pgrp}`:Y.pid).join(" ")}`)}catch{}}let{commit:v,quality:y}=t.product,b=he.posix.join(dn(e),`.connection-token-${v}${y==="stable"?"":`-${y}`}${t.web?"-web":""}`),C=he.posix.join(dn(e),`.devport-${v}${y==="stable"?"":`-${y}`}${t.web?"-web":""}`);if(m.length){t.output.write(`Extension host agent is already running.\r
`);try{let{stdout:Y}=await l.exec(`cat '${C}' 2>/dev/null`),ae=Y.toString().trim(),te=parseInt(ae,10),M=new RegExp(` '?${SR(t.product)}'? `).test(m[0].cmd)?(await l.exec(`cat '${b}'`)).stdout.toString().trim():void 0,L=(/'?--connectionToken'? '?([^ ']+)'? /.exec(m[0].cmd)||[])[1];return{serverPort:te,connectionToken:M,webConnectionToken:L}}catch(Y){console.error(Y),t.output.write(`Agent port not found. Terminating old extension host agent.\r
`);try{await l.exec(`kill -9 ${m.map(ae=>ae.pgrp?`-${ae.pgrp}`:ae.pid).join(" ")}`)}catch{}}}let _=!!t.webConnectionToken,P;if(!_){let Y=`${b}-${Br()}`,{stdout:ae}=await l.exec(`cat '${b}' 2>/dev/null || (umask 377 && echo '${Br()}' >'${Y}' && mv -n '${Y}' '${b}' && rm -f '${Y}' && cat '${b}')`);P=ae.toString().trim()}t.progress(5);let S="Starting VS Code Server",k=t.output.start(S),T=[he.posix.join(a,...ou(t.product,_)),"--log",yi(t.getLogLevel()),"--force-disable-user-env",..._R(e.userDataFolder),...qK(t),...xR(t.getTelemetryLevel()),"--accept-server-license-terms","--host","127.0.0.1","--port",String(r),...t.webConnectionToken?["--connectionToken",t.webConnectionToken]:[],...P?[SR(t.product),b]:[],"--extensions-download-dir",wR(e),...(await o()).args,"--start-server",...t.isLocalContainer?["--disable-websocket-compression"]:[""],...t.cliMode?["--enable-remote-auto-shutdown"]:[]],F=(await Mo(t,{remoteExec:e.remoteExec},T,a,{remoteEnv:V({SHELL:e.shell,VSCODE_AGENT_FOLDER:s},t.cliMode?await i:{}),resolveOn:lR,print:"continuous"})).cmdOutput;t.output.stop(S,k);let j=(lR.exec(F)||[])[1];if(!j)throw new Error("Port not found");return await l.exec(`echo ${j} >'${C}'`),{serverPort:parseInt(j,10),connectionToken:P,webConnectionToken:t.webConnectionToken}}function _R(t){return["--server-data-dir",t]}function SR(t){return t.serverApplicationName?"--connection-token-file":"--connection-secret"}function qK(t){return t.isLocalContainer?["--use-host-proxy"]:[]}function xR(t){return t?["--telemetry-level",t]:[]}var $K=/^([a-z0-9\-]+):(\d{1,5})$/;function jK(t){let e=t.match($K);if(!(!e||e.length!==3))return{host:e[1],port:Number(e[2])}}async function PR(t,e,r){let n=await t.getTunnels();await Promise.all((r.forwardPorts||[]).filter(o=>!n.find(i=>i.remoteAddress.port===o)).map(async o=>{let i,s;if(typeof o=="number")i=o;else{let a=jK(o);if(!a)return;s=a.host,i=a.port}return t.openTunnel(e,i,s)}))}async function UK(t,{remotePtyExec:e},r,n,o={}){let i=o.print||(o.silent?"off":"end"),s=await e({env:o.remoteEnv,cwd:n,cmd:r[0],args:r.slice(1),output:o.silent?ot:t.output}),a="",c,l=new Promise(f=>{c=f});s.onData(f=>{a+=f,i==="continuous"&&t.output.raw(f),o.resolveOn&&o.resolveOn.exec(a)&&c()});let u=t.onDidInput&&t.onDidInput(f=>s.write(f)),d=await Promise.race([s.exit,l]);return u&&u.dispose(),i==="end"&&t.output.raw(a),d&&(d.code||d.signal)?Promise.reject({message:`Command failed: ${r.join(" ")}`,cmdOutput:a,code:d.code,signal:d.signal}):{cmdOutput:a}}async function Mo(t,{remoteExec:e},r,n,o={}){let i=o.print||(o.silent?"off":"end"),s=await e({env:o.remoteEnv,cwd:n,cmd:r[0],args:r.slice(1),output:o.silent?ot:t.output}),a=[],c=[],l=new iC.StringDecoder,u=new iC.StringDecoder,d="",f="",p,h,m=new Promise((C,_)=>{p=C,h=_});s.stdout.on("data",C=>{a.push(C);let _=l.write(C);i==="continuous"&&t.output.write(_.replace(/\r?\n/g,`\r
`)),d+=_,o.resolveOn&&o.resolveOn.exec(d)&&p()}),s.stderr.on("data",C=>{c.push(C),f+=u.write(C)}),o.stdin instanceof Buffer?(s.stdin.write(o.stdin,C=>{C&&h(C)}),s.stdin.end()):o.stdin instanceof oh.ReadStream&&o.stdin.pipe(s.stdin);let g=await Promise.race([s.exit,m]),v=Buffer.concat(a),y=Buffer.concat(c);i==="end"&&(t.output.write(d.replace(/\r?\n/g,`\r
`)),t.output.write(Ne(f)));let b=`${d}
${f}`;return g&&(g.code||g.signal)?Promise.reject({message:`Command failed: ${r.join(" ")}`,cmdOutput:b,stdout:v,stderr:y,code:g.code,signal:g.signal}):{cmdOutput:b,stdout:v,stderr:y}}function uC(t){let e=8*1024,r=t%e,n=(t-r)/e;return`(dd iflag=fullblock bs=${e} count=${n} 2>/dev/null; dd iflag=fullblock bs=${r} count=1 2>/dev/null)`}async function BK(t,e){let r=he.posix.join(cc(t.product.serverDataFolderName),".patchEtcEnvironmentMarker");if(t.allowSystemConfigChange&&e.launchRootShellServer&&!await Zl(e.shellServer,r)){let n=await e.launchRootShellServer();await fh(n,r)&&await n.exec(`cat >> /etc/environment <<'etcEnvrionmentEOF'
${Object.keys(e.env).map(o=>`
${o}="${e.env[o]}"`).join("")}
etcEnvrionmentEOF
`)}}async function HK(t,e){let r=he.posix.join(cc(t.product.serverDataFolderName),".patchEtcProfileMarker");if(t.allowSystemConfigChange&&e.launchRootShellServer&&!await Zl(e.shellServer,r)){let n=await e.launchRootShellServer();await fh(n,r)&&await n.exec("sed -i -E 's/((^|\\s)PATH=)([^\\$]*)$/\\1${PATH:-\\3}/g' /etc/profile || true")}}async function oc(t,e,r,n){let o=await kR(t,e,r,n,"cat /proc/self/environ","\0");return o||(t.output.write("userEnvProbe: falling back to printenv"),await kR(t,e,r,n,"printenv",`
`)||{})}async function kR(t,e,r,n,o,i){var a;let{userEnvProbe:s}=r||{};if(t.output.write(`userEnvProbe: ${s||t.defaultUserEnvProbe}${s?"":" (default)"}`),s||(s=t.defaultUserEnvProbe),s==="none")return{};try{let l=(await(0,cR.promisify)(aR.randomBytes)(16)).toString("hex"),u=new RegExp(l+"([^]*)"+l),d=e.shell;t.output.write(`userEnvProbe shell: ${d}`);let f=he.posix.basename(d),p=`echo -n ${l}; ${o}; echo -n ${l}`,h;/^pwsh(-preview)?$/.test(f)?h=s==="loginInteractiveShell"||s==="loginShell"?["-Login","-Command"]:["-Command"]:h=[s==="loginInteractiveShell"?"-lic":s==="loginShell"?"-lc":s==="interactiveShell"?"-ic":"-c"];let m=or(t.output,ie.Trace),g=Mo({output:m},{remoteExec:await n||e.remoteExec},[d,...h,p],e.installFolder);Promise.race([g,oo(2e3)]).then(async T=>{if(!T){let A,F=e.shellServer||await Lo(e.remoteExec,t.output);try{({processes:A}=await ww(F))}finally{e.shellServer||await F.process.terminate()}let j=A.find(J=>J.cmd.startsWith(d)&&J.cmd.indexOf(l)!==-1);if(j){let Y=dT(A)[j.pid];t.output.write(`userEnvProbe is taking longer than 2 seconds. Process tree:
${Cw(Y)}`)}else t.output.write("userEnvProbe is taking longer than 2 seconds. Process not found.")}},()=>{}).catch(T=>t.output.write(Ne(T&&(T.stack||T.message)||"Error reading process tree.")));let v=await Promise.race([g,oo(1e4)]);if(!v)return t.output.write(Ne("userEnvProbe is taking longer than 10 seconds. Avoid waiting for user input in your shell's startup scripts. Continuing.")),{};let y=v.stdout.toString(),b=u.exec(y),C=b?b[1]:"";if(!C||C.trim()==="-n")return;let _=C.split(i).reduce((T,A)=>{let F=A.indexOf("=");return F!==-1&&(T[A.substring(0,F)]=A.substring(F+1)),T},{});t.output.write(`userEnvProbe parsed: ${JSON.stringify(_,void 0,"  ")}`,ie.Trace),delete _.PWD;let P=_.PATH,S=(a=e.env)==null?void 0:a.PATH,k=!(t.allowSystemConfigChange&&e.launchRootShellServer)&&P&&S;if(k){let T=e.user;_.PATH=VK(P,S,T==="root"||T==="0")}return t.output.write(`userEnvProbe PATHs:
Probe:     ${typeof P=="string"?`'${P}'`:"None"}
Container: ${typeof S=="string"?`'${S}'`:"None"}${k?`
Merged:    ${typeof _.PATH=="string"?`'${_.PATH}'`:"None"}`:""}`),_}catch(c){return t.output.write(Ne(c&&(c.stack||c.message)||"Error reading shell environment.")),{}}}function VK(t,e,r){let n=t.split(":"),o=0;for(let i of e.split(":")){let s=n.indexOf(i);s===-1?(r||!/\/sbin(\/|$)/.test(i))&&n.splice(o++,0,i):o=s+1}return n.join(":")}async function IR(t){for(let e of t)await(typeof e=="function"?e():e)}var wO=K(require("crypto")),hu=K(require("path"));function TR(t){return typeof t=="undefined"||t===null}function WK(t){return typeof t=="object"&&t!==null}function GK(t){return Array.isArray(t)?t:TR(t)?[]:[t]}function zK(t,e){var r,n,o,i;if(e)for(i=Object.keys(e),r=0,n=i.length;r<n;r+=1)o=i[r],t[o]=e[o];return t}function KK(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function YK(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var JK=TR,QK=WK,XK=GK,ZK=KK,e8=YK,t8=zK,Rt={isNothing:JK,isObject:QK,toArray:XK,repeat:ZK,isNegativeZero:e8,extend:t8};function AR(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function cu(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=AR(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}cu.prototype=Object.create(Error.prototype);cu.prototype.constructor=cu;cu.prototype.toString=function(e){return this.name+": "+AR(this,e)};var _r=cu;function dC(t,e,r,n,o){var i="",s="",a=Math.floor(o/2)-1;return n-e>a&&(i=" ... ",e=n-a+i.length),r-n>a&&(s=" ...",r=n+a-s.length),{str:i+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+i.length}}function fC(t,e){return Rt.repeat(" ",e-t.length)+t}function r8(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],o=[],i,s=-1;i=r.exec(t.buffer);)o.push(i.index),n.push(i.index+i[0].length),t.position<=i.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var a="",c,l,u=Math.min(t.line+e.linesAfter,o.length).toString().length,d=e.maxLength-(e.indent+u+3);for(c=1;c<=e.linesBefore&&!(s-c<0);c++)l=dC(t.buffer,n[s-c],o[s-c],t.position-(n[s]-n[s-c]),d),a=Rt.repeat(" ",e.indent)+fC((t.line-c+1).toString(),u)+" | "+l.str+`
`+a;for(l=dC(t.buffer,n[s],o[s],t.position,d),a+=Rt.repeat(" ",e.indent)+fC((t.line+1).toString(),u)+" | "+l.str+`
`,a+=Rt.repeat("-",e.indent+u+3+l.pos)+`^
`,c=1;c<=e.linesAfter&&!(s+c>=o.length);c++)l=dC(t.buffer,n[s+c],o[s+c],t.position-(n[s]-n[s+c]),d),a+=Rt.repeat(" ",e.indent)+fC((t.line+c+1).toString(),u)+" | "+l.str+`
`;return a.replace(/\n$/,"")}var n8=r8,o8=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],i8=["scalar","sequence","mapping"];function s8(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function a8(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(o8.indexOf(r)===-1)throw new _r('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=s8(e.styleAliases||null),i8.indexOf(this.kind)===-1)throw new _r('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var sr=a8;function DR(t,e){var r=[];return t[e].forEach(function(n){var o=r.length;r.forEach(function(i,s){i.tag===n.tag&&i.kind===n.kind&&i.multi===n.multi&&(o=s)}),r[o]=n}),r}function c8(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(o){o.multi?(t.multi[o.kind].push(o),t.multi.fallback.push(o)):t[o.kind][o.tag]=t.fallback[o.tag]=o}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function pC(t){return this.extend(t)}pC.prototype.extend=function(e){var r=[],n=[];if(e instanceof sr)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new _r("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(i){if(!(i instanceof sr))throw new _r("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(i.loadKind&&i.loadKind!=="scalar")throw new _r("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(i.multi)throw new _r("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(i){if(!(i instanceof sr))throw new _r("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var o=Object.create(pC.prototype);return o.implicit=(this.implicit||[]).concat(r),o.explicit=(this.explicit||[]).concat(n),o.compiledImplicit=DR(o,"implicit"),o.compiledExplicit=DR(o,"explicit"),o.compiledTypeMap=c8(o.compiledImplicit,o.compiledExplicit),o};var l8=pC,u8=new sr("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),d8=new sr("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),f8=new sr("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),p8=new l8({explicit:[u8,d8,f8]});function h8(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function m8(){return null}function g8(t){return t===null}var v8=new sr("tag:yaml.org,2002:null",{kind:"scalar",resolve:h8,construct:m8,predicate:g8,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function y8(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function w8(t){return t==="true"||t==="True"||t==="TRUE"}function C8(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var b8=new sr("tag:yaml.org,2002:bool",{kind:"scalar",resolve:y8,construct:w8,predicate:C8,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function E8(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function _8(t){return 48<=t&&t<=55}function S8(t){return 48<=t&&t<=57}function x8(t){if(t===null)return!1;var e=t.length,r=0,n=!1,o;if(!e)return!1;if(o=t[r],(o==="-"||o==="+")&&(o=t[++r]),o==="0"){if(r+1===e)return!0;if(o=t[++r],o==="b"){for(r++;r<e;r++)if(o=t[r],o!=="_"){if(o!=="0"&&o!=="1")return!1;n=!0}return n&&o!=="_"}if(o==="x"){for(r++;r<e;r++)if(o=t[r],o!=="_"){if(!E8(t.charCodeAt(r)))return!1;n=!0}return n&&o!=="_"}if(o==="o"){for(r++;r<e;r++)if(o=t[r],o!=="_"){if(!_8(t.charCodeAt(r)))return!1;n=!0}return n&&o!=="_"}}if(o==="_")return!1;for(;r<e;r++)if(o=t[r],o!=="_"){if(!S8(t.charCodeAt(r)))return!1;n=!0}return!(!n||o==="_")}function P8(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function k8(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1==0&&!Rt.isNegativeZero(t)}var I8=new sr("tag:yaml.org,2002:int",{kind:"scalar",resolve:x8,construct:P8,predicate:k8,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),T8=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function A8(t){return!(t===null||!T8.test(t)||t[t.length-1]==="_")}function D8(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var R8=/^[-+]?[0-9]+e/;function O8(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Rt.isNegativeZero(t))return"-0.0";return r=t.toString(10),R8.test(r)?r.replace("e",".e"):r}function N8(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!=0||Rt.isNegativeZero(t))}var L8=new sr("tag:yaml.org,2002:float",{kind:"scalar",resolve:A8,construct:D8,predicate:N8,represent:O8,defaultStyle:"lowercase"}),F8=p8.extend({implicit:[v8,b8,I8,L8]}),M8=F8,RR=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),OR=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function q8(t){return t===null?!1:RR.exec(t)!==null||OR.exec(t)!==null}function $8(t){var e,r,n,o,i,s,a,c=0,l=null,u,d,f;if(e=RR.exec(t),e===null&&(e=OR.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,o=+e[3],!e[4])return new Date(Date.UTC(r,n,o));if(i=+e[4],s=+e[5],a=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(u=+e[10],d=+(e[11]||0),l=(u*60+d)*6e4,e[9]==="-"&&(l=-l)),f=new Date(Date.UTC(r,n,o,i,s,a,c)),l&&f.setTime(f.getTime()-l),f}function j8(t){return t.toISOString()}var U8=new sr("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:q8,construct:$8,instanceOf:Date,represent:j8});function B8(t){return t==="<<"||t===null}var H8=new sr("tag:yaml.org,2002:merge",{kind:"scalar",resolve:B8}),hC=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function V8(t){if(t===null)return!1;var e,r,n=0,o=t.length,i=hC;for(r=0;r<o;r++)if(e=i.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8==0}function W8(t){var e,r,n=t.replace(/[\r\n=]/g,""),o=n.length,i=hC,s=0,a=[];for(e=0;e<o;e++)e%4==0&&e&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|i.indexOf(n.charAt(e));return r=o%4*6,r===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):r===18?(a.push(s>>10&255),a.push(s>>2&255)):r===12&&a.push(s>>4&255),new Uint8Array(a)}function G8(t){var e="",r=0,n,o,i=t.length,s=hC;for(n=0;n<i;n++)n%3==0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return o=i%3,o===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):o===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):o===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function z8(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var K8=new sr("tag:yaml.org,2002:binary",{kind:"scalar",resolve:V8,construct:W8,predicate:z8,represent:G8}),Y8=Object.prototype.hasOwnProperty,J8=Object.prototype.toString;function Q8(t){if(t===null)return!0;var e=[],r,n,o,i,s,a=t;for(r=0,n=a.length;r<n;r+=1){if(o=a[r],s=!1,J8.call(o)!=="[object Object]")return!1;for(i in o)if(Y8.call(o,i))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(i)===-1)e.push(i);else return!1}return!0}function X8(t){return t!==null?t:[]}var Z8=new sr("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Q8,construct:X8}),e5=Object.prototype.toString;function t5(t){if(t===null)return!0;var e,r,n,o,i,s=t;for(i=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],e5.call(n)!=="[object Object]"||(o=Object.keys(n),o.length!==1))return!1;i[e]=[o[0],n[o[0]]]}return!0}function r5(t){if(t===null)return[];var e,r,n,o,i,s=t;for(i=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],o=Object.keys(n),i[e]=[o[0],n[o[0]]];return i}var n5=new sr("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:t5,construct:r5}),o5=Object.prototype.hasOwnProperty;function i5(t){if(t===null)return!0;var e,r=t;for(e in r)if(o5.call(r,e)&&r[e]!==null)return!1;return!0}function s5(t){return t!==null?t:{}}var a5=new sr("tag:yaml.org,2002:set",{kind:"mapping",resolve:i5,construct:s5}),NR=M8.extend({implicit:[U8,H8],explicit:[K8,Z8,n5,a5]}),Ii=Object.prototype.hasOwnProperty,hh=1,LR=2,FR=3,mh=4,mC=1,c5=2,MR=3,l5=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,u5=/[\x85\u2028\u2029]/,d5=/[,\[\]\{\}]/,qR=/^(?:!|!!|![a-z\-]+!)$/i,$R=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function jR(t){return Object.prototype.toString.call(t)}function io(t){return t===10||t===13}function Bs(t){return t===9||t===32}function Sr(t){return t===9||t===32||t===10||t===13}function uc(t){return t===44||t===91||t===93||t===123||t===125}function f5(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function p5(t){return t===120?2:t===117?4:t===85?8:0}function h5(t){return 48<=t&&t<=57?t-48:-1}function UR(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function m5(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var BR=new Array(256),HR=new Array(256);for(Hs=0;Hs<256;Hs++)BR[Hs]=UR(Hs)?1:0,HR[Hs]=UR(Hs);var Hs;function g5(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||NR,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function VR(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=n8(r),new _r(e,r)}function me(t,e){throw VR(t,e)}function gh(t,e){t.onWarning&&t.onWarning.call(null,VR(t,e))}var WR={YAML:function(e,r,n){var o,i,s;e.version!==null&&me(e,"duplication of %YAML directive"),n.length!==1&&me(e,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),o===null&&me(e,"ill-formed argument of the YAML directive"),i=parseInt(o[1],10),s=parseInt(o[2],10),i!==1&&me(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&gh(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var o,i;n.length!==2&&me(e,"TAG directive accepts exactly two arguments"),o=n[0],i=n[1],qR.test(o)||me(e,"ill-formed tag handle (first argument) of the TAG directive"),Ii.call(e.tagMap,o)&&me(e,'there is a previously declared suffix for "'+o+'" tag handle'),$R.test(i)||me(e,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch{me(e,"tag prefix is malformed: "+i)}e.tagMap[o]=i}};function Ti(t,e,r,n){var o,i,s,a;if(e<r){if(a=t.input.slice(e,r),n)for(o=0,i=a.length;o<i;o+=1)s=a.charCodeAt(o),s===9||32<=s&&s<=1114111||me(t,"expected valid JSON character");else l5.test(a)&&me(t,"the stream contains non-printable characters");t.result+=a}}function GR(t,e,r,n){var o,i,s,a;for(Rt.isObject(r)||me(t,"cannot merge mappings; the provided source object is unacceptable"),o=Object.keys(r),s=0,a=o.length;s<a;s+=1)i=o[s],Ii.call(e,i)||(e[i]=r[i],n[i]=!0)}function dc(t,e,r,n,o,i,s,a,c){var l,u;if(Array.isArray(o))for(o=Array.prototype.slice.call(o),l=0,u=o.length;l<u;l+=1)Array.isArray(o[l])&&me(t,"nested arrays are not supported inside keys"),typeof o=="object"&&jR(o[l])==="[object Object]"&&(o[l]="[object Object]");if(typeof o=="object"&&jR(o)==="[object Object]"&&(o="[object Object]"),o=String(o),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(i))for(l=0,u=i.length;l<u;l+=1)GR(t,e,i[l],r);else GR(t,e,i,r);else!t.json&&!Ii.call(r,o)&&Ii.call(e,o)&&(t.line=s||t.line,t.lineStart=a||t.lineStart,t.position=c||t.position,me(t,"duplicated mapping key")),o==="__proto__"?Object.defineProperty(e,o,{configurable:!0,enumerable:!0,writable:!0,value:i}):e[o]=i,delete r[o];return e}function gC(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):me(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function xt(t,e,r){for(var n=0,o=t.input.charCodeAt(t.position);o!==0;){for(;Bs(o);)o===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),o=t.input.charCodeAt(++t.position);if(e&&o===35)do o=t.input.charCodeAt(++t.position);while(o!==10&&o!==13&&o!==0);if(io(o))for(gC(t),o=t.input.charCodeAt(t.position),n++,t.lineIndent=0;o===32;)t.lineIndent++,o=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&gh(t,"deficient indentation"),n}function vh(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||Sr(r)))}function vC(t,e){e===1?t.result+=" ":e>1&&(t.result+=Rt.repeat(`
`,e-1))}function v5(t,e,r){var n,o,i,s,a,c,l,u,d=t.kind,f=t.result,p;if(p=t.input.charCodeAt(t.position),Sr(p)||uc(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(o=t.input.charCodeAt(t.position+1),Sr(o)||r&&uc(o)))return!1;for(t.kind="scalar",t.result="",i=s=t.position,a=!1;p!==0;){if(p===58){if(o=t.input.charCodeAt(t.position+1),Sr(o)||r&&uc(o))break}else if(p===35){if(n=t.input.charCodeAt(t.position-1),Sr(n))break}else{if(t.position===t.lineStart&&vh(t)||r&&uc(p))break;if(io(p))if(c=t.line,l=t.lineStart,u=t.lineIndent,xt(t,!1,-1),t.lineIndent>=e){a=!0,p=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=c,t.lineStart=l,t.lineIndent=u;break}}a&&(Ti(t,i,s,!1),vC(t,t.line-c),i=s=t.position,a=!1),Bs(p)||(s=t.position+1),p=t.input.charCodeAt(++t.position)}return Ti(t,i,s,!1),t.result?!0:(t.kind=d,t.result=f,!1)}function y5(t,e){var r,n,o;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=o=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(Ti(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,o=t.position;else return!0;else io(r)?(Ti(t,n,o,!0),vC(t,xt(t,!1,e)),n=o=t.position):t.position===t.lineStart&&vh(t)?me(t,"unexpected end of the document within a single quoted scalar"):(t.position++,o=t.position);me(t,"unexpected end of the stream within a single quoted scalar")}function w5(t,e){var r,n,o,i,s,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return Ti(t,r,t.position,!0),t.position++,!0;if(a===92){if(Ti(t,r,t.position,!0),a=t.input.charCodeAt(++t.position),io(a))xt(t,!1,e);else if(a<256&&BR[a])t.result+=HR[a],t.position++;else if((s=p5(a))>0){for(o=s,i=0;o>0;o--)a=t.input.charCodeAt(++t.position),(s=f5(a))>=0?i=(i<<4)+s:me(t,"expected hexadecimal character");t.result+=m5(i),t.position++}else me(t,"unknown escape sequence");r=n=t.position}else io(a)?(Ti(t,r,n,!0),vC(t,xt(t,!1,e)),r=n=t.position):t.position===t.lineStart&&vh(t)?me(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}me(t,"unexpected end of the stream within a double quoted scalar")}function C5(t,e){var r=!0,n,o,i,s=t.tag,a,c=t.anchor,l,u,d,f,p,h=Object.create(null),m,g,v,y;if(y=t.input.charCodeAt(t.position),y===91)u=93,p=!1,a=[];else if(y===123)u=125,p=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),y=t.input.charCodeAt(++t.position);y!==0;){if(xt(t,!0,e),y=t.input.charCodeAt(t.position),y===u)return t.position++,t.tag=s,t.anchor=c,t.kind=p?"mapping":"sequence",t.result=a,!0;r?y===44&&me(t,"expected the node content, but found ','"):me(t,"missed comma between flow collection entries"),g=m=v=null,d=f=!1,y===63&&(l=t.input.charCodeAt(t.position+1),Sr(l)&&(d=f=!0,t.position++,xt(t,!0,e))),n=t.line,o=t.lineStart,i=t.position,fc(t,e,hh,!1,!0),g=t.tag,m=t.result,xt(t,!0,e),y=t.input.charCodeAt(t.position),(f||t.line===n)&&y===58&&(d=!0,y=t.input.charCodeAt(++t.position),xt(t,!0,e),fc(t,e,hh,!1,!0),v=t.result),p?dc(t,a,h,g,m,v,n,o,i):d?a.push(dc(t,null,h,g,m,v,n,o,i)):a.push(m),xt(t,!0,e),y=t.input.charCodeAt(t.position),y===44?(r=!0,y=t.input.charCodeAt(++t.position)):r=!1}me(t,"unexpected end of the stream within a flow collection")}function b5(t,e){var r,n,o=mC,i=!1,s=!1,a=e,c=0,l=!1,u,d;if(d=t.input.charCodeAt(t.position),d===124)n=!1;else if(d===62)n=!0;else return!1;for(t.kind="scalar",t.result="";d!==0;)if(d=t.input.charCodeAt(++t.position),d===43||d===45)mC===o?o=d===43?MR:c5:me(t,"repeat of a chomping mode identifier");else if((u=h5(d))>=0)u===0?me(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?me(t,"repeat of an indentation width identifier"):(a=e+u-1,s=!0);else break;if(Bs(d)){do d=t.input.charCodeAt(++t.position);while(Bs(d));if(d===35)do d=t.input.charCodeAt(++t.position);while(!io(d)&&d!==0)}for(;d!==0;){for(gC(t),t.lineIndent=0,d=t.input.charCodeAt(t.position);(!s||t.lineIndent<a)&&d===32;)t.lineIndent++,d=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>a&&(a=t.lineIndent),io(d)){c++;continue}if(t.lineIndent<a){o===MR?t.result+=Rt.repeat(`
`,i?1+c:c):o===mC&&i&&(t.result+=`
`);break}for(n?Bs(d)?(l=!0,t.result+=Rt.repeat(`
`,i?1+c:c)):l?(l=!1,t.result+=Rt.repeat(`
`,c+1)):c===0?i&&(t.result+=" "):t.result+=Rt.repeat(`
`,c):t.result+=Rt.repeat(`
`,i?1+c:c),i=!0,s=!0,c=0,r=t.position;!io(d)&&d!==0;)d=t.input.charCodeAt(++t.position);Ti(t,r,t.position,!1)}return!0}function zR(t,e){var r,n=t.tag,o=t.anchor,i=[],s,a=!1,c;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=i),c=t.input.charCodeAt(t.position);c!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,me(t,"tab characters must not be used in indentation")),!(c!==45||(s=t.input.charCodeAt(t.position+1),!Sr(s))));){if(a=!0,t.position++,xt(t,!0,-1)&&t.lineIndent<=e){i.push(null),c=t.input.charCodeAt(t.position);continue}if(r=t.line,fc(t,e,FR,!1,!0),i.push(t.result),xt(t,!0,-1),c=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&c!==0)me(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=n,t.anchor=o,t.kind="sequence",t.result=i,!0):!1}function E5(t,e,r){var n,o,i,s,a,c,l=t.tag,u=t.anchor,d={},f=Object.create(null),p=null,h=null,m=null,g=!1,v=!1,y;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=d),y=t.input.charCodeAt(t.position);y!==0;){if(!g&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,me(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),i=t.line,(y===63||y===58)&&Sr(n))y===63?(g&&(dc(t,d,f,p,h,null,s,a,c),p=h=m=null),v=!0,g=!0,o=!0):g?(g=!1,o=!0):me(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,y=n;else{if(s=t.line,a=t.lineStart,c=t.position,!fc(t,r,LR,!1,!0))break;if(t.line===i){for(y=t.input.charCodeAt(t.position);Bs(y);)y=t.input.charCodeAt(++t.position);if(y===58)y=t.input.charCodeAt(++t.position),Sr(y)||me(t,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(dc(t,d,f,p,h,null,s,a,c),p=h=m=null),v=!0,g=!1,o=!1,p=t.tag,h=t.result;else if(v)me(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=l,t.anchor=u,!0}else if(v)me(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=l,t.anchor=u,!0}if((t.line===i||t.lineIndent>e)&&(g&&(s=t.line,a=t.lineStart,c=t.position),fc(t,e,mh,!0,o)&&(g?h=t.result:m=t.result),g||(dc(t,d,f,p,h,m,s,a,c),p=h=m=null),xt(t,!0,-1),y=t.input.charCodeAt(t.position)),(t.line===i||t.lineIndent>e)&&y!==0)me(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return g&&dc(t,d,f,p,h,null,s,a,c),v&&(t.tag=l,t.anchor=u,t.kind="mapping",t.result=d),v}function _5(t){var e,r=!1,n=!1,o,i,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&me(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,o="!!",s=t.input.charCodeAt(++t.position)):o="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(i=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):me(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Sr(s);)s===33&&(n?me(t,"tag suffix cannot contain exclamation marks"):(o=t.input.slice(e-1,t.position+1),qR.test(o)||me(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);i=t.input.slice(e,t.position),d5.test(i)&&me(t,"tag suffix cannot contain flow indicator characters")}i&&!$R.test(i)&&me(t,"tag name cannot contain such characters: "+i);try{i=decodeURIComponent(i)}catch{me(t,"tag name is malformed: "+i)}return r?t.tag=i:Ii.call(t.tagMap,o)?t.tag=t.tagMap[o]+i:o==="!"?t.tag="!"+i:o==="!!"?t.tag="tag:yaml.org,2002:"+i:me(t,'undeclared tag handle "'+o+'"'),!0}function S5(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&me(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Sr(r)&&!uc(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&me(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function x5(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Sr(n)&&!uc(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&me(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),Ii.call(t.anchorMap,r)||me(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],xt(t,!0,-1),!0}function fc(t,e,r,n,o){var i,s,a,c=1,l=!1,u=!1,d,f,p,h,m,g;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,i=s=a=mh===r||FR===r,n&&xt(t,!0,-1)&&(l=!0,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)),c===1)for(;_5(t)||S5(t);)xt(t,!0,-1)?(l=!0,a=i,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)):a=!1;if(a&&(a=l||o),(c===1||mh===r)&&(hh===r||LR===r?m=e:m=e+1,g=t.position-t.lineStart,c===1?a&&(zR(t,g)||E5(t,g,m))||C5(t,m)?u=!0:(s&&b5(t,m)||y5(t,m)||w5(t,m)?u=!0:x5(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&me(t,"alias node should not have any properties")):v5(t,m,hh===r)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):c===0&&(u=a&&zR(t,g))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&me(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),d=0,f=t.implicitTypes.length;d<f;d+=1)if(h=t.implicitTypes[d],h.resolve(t.result)){t.result=h.construct(t.result),t.tag=h.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Ii.call(t.typeMap[t.kind||"fallback"],t.tag))h=t.typeMap[t.kind||"fallback"][t.tag];else for(h=null,p=t.typeMap.multi[t.kind||"fallback"],d=0,f=p.length;d<f;d+=1)if(t.tag.slice(0,p[d].tag.length)===p[d].tag){h=p[d];break}h||me(t,"unknown tag !<"+t.tag+">"),t.result!==null&&h.kind!==t.kind&&me(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+h.kind+'", not "'+t.kind+'"'),h.resolve(t.result,t.tag)?(t.result=h.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):me(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function P5(t){var e=t.position,r,n,o,i=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(xt(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(i=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!Sr(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),o=[],n.length<1&&me(t,"directive name must not be less than one character in length");s!==0;){for(;Bs(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!io(s));break}if(io(s))break;for(r=t.position;s!==0&&!Sr(s);)s=t.input.charCodeAt(++t.position);o.push(t.input.slice(r,t.position))}s!==0&&gC(t),Ii.call(WR,n)?WR[n](t,n,o):gh(t,'unknown document directive "'+n+'"')}if(xt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,xt(t,!0,-1)):i&&me(t,"directives end mark is expected"),fc(t,t.lineIndent-1,mh,!1,!0),xt(t,!0,-1),t.checkLineBreaks&&u5.test(t.input.slice(e,t.position))&&gh(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&vh(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,xt(t,!0,-1));return}if(t.position<t.length-1)me(t,"end of the stream or a document separator is expected");else return}function KR(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new g5(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,me(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)P5(r);return r.documents}function k5(t,e,r){e!==null&&typeof e=="object"&&typeof r=="undefined"&&(r=e,e=null);var n=KR(t,r);if(typeof e!="function")return n;for(var o=0,i=n.length;o<i;o+=1)e(n[o])}function I5(t,e){var r=KR(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new _r("expected a single document in the stream, but found more")}}var T5=k5,A5=I5,YR={loadAll:T5,load:A5},JR=Object.prototype.toString,QR=Object.prototype.hasOwnProperty,yC=65279,D5=9,lu=10,R5=13,O5=32,N5=33,L5=34,wC=35,F5=37,M5=38,q5=39,$5=42,XR=44,j5=45,yh=58,U5=61,B5=62,H5=63,V5=64,ZR=91,eO=93,W5=96,tO=123,G5=124,rO=125,ar={};ar[0]="\\0";ar[7]="\\a";ar[8]="\\b";ar[9]="\\t";ar[10]="\\n";ar[11]="\\v";ar[12]="\\f";ar[13]="\\r";ar[27]="\\e";ar[34]='\\"';ar[92]="\\\\";ar[133]="\\N";ar[160]="\\_";ar[8232]="\\L";ar[8233]="\\P";var z5=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],K5=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Y5(t,e){var r,n,o,i,s,a,c;if(e===null)return{};for(r={},n=Object.keys(e),o=0,i=n.length;o<i;o+=1)s=n[o],a=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),c=t.compiledTypeMap.fallback[s],c&&QR.call(c.styleAliases,a)&&(a=c.styleAliases[a]),r[s]=a;return r}function J5(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new _r("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Rt.repeat("0",n-e.length)+e}var Q5=1,uu=2;function X5(t){this.schema=t.schema||NR,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Rt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=Y5(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?uu:Q5,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function nO(t,e){for(var r=Rt.repeat(" ",e),n=0,o=-1,i="",s,a=t.length;n<a;)o=t.indexOf(`
`,n),o===-1?(s=t.slice(n),n=a):(s=t.slice(n,o+1),n=o+1),s.length&&s!==`
`&&(i+=r),i+=s;return i}function CC(t,e){return`
`+Rt.repeat(" ",t.indent*e)}function Z5(t,e){var r,n,o;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(o=t.implicitTypes[r],o.resolve(e))return!0;return!1}function wh(t){return t===O5||t===D5}function du(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==yC||65536<=t&&t<=1114111}function oO(t){return du(t)&&t!==yC&&t!==R5&&t!==lu}function iO(t,e,r){var n=oO(t),o=n&&!wh(t);return(r?n:n&&t!==XR&&t!==ZR&&t!==eO&&t!==tO&&t!==rO)&&t!==wC&&!(e===yh&&!o)||oO(e)&&!wh(e)&&t===wC||e===yh&&o}function eY(t){return du(t)&&t!==yC&&!wh(t)&&t!==j5&&t!==H5&&t!==yh&&t!==XR&&t!==ZR&&t!==eO&&t!==tO&&t!==rO&&t!==wC&&t!==M5&&t!==$5&&t!==N5&&t!==G5&&t!==U5&&t!==B5&&t!==q5&&t!==L5&&t!==F5&&t!==V5&&t!==W5}function tY(t){return!wh(t)&&t!==yh}function fu(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function sO(t){var e=/^\n* /;return e.test(t)}var aO=1,bC=2,cO=3,lO=4,pc=5;function rY(t,e,r,n,o,i,s,a){var c,l=0,u=null,d=!1,f=!1,p=n!==-1,h=-1,m=eY(fu(t,0))&&tY(fu(t,t.length-1));if(e||s)for(c=0;c<t.length;l>=65536?c+=2:c++){if(l=fu(t,c),!du(l))return pc;m=m&&iO(l,u,a),u=l}else{for(c=0;c<t.length;l>=65536?c+=2:c++){if(l=fu(t,c),l===lu)d=!0,p&&(f=f||c-h-1>n&&t[h+1]!==" ",h=c);else if(!du(l))return pc;m=m&&iO(l,u,a),u=l}f=f||p&&c-h-1>n&&t[h+1]!==" "}return!d&&!f?m&&!s&&!o(t)?aO:i===uu?pc:bC:r>9&&sO(t)?pc:s?i===uu?pc:bC:f?lO:cO}function nY(t,e,r,n,o){t.dump=function(){if(e.length===0)return t.quotingType===uu?'""':"''";if(!t.noCompatMode&&(z5.indexOf(e)!==-1||K5.test(e)))return t.quotingType===uu?'"'+e+'"':"'"+e+"'";var i=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-i),a=n||t.flowLevel>-1&&r>=t.flowLevel;function c(l){return Z5(t,l)}switch(rY(e,a,t.indent,s,c,t.quotingType,t.forceQuotes&&!n,o)){case aO:return e;case bC:return"'"+e.replace(/'/g,"''")+"'";case cO:return"|"+uO(e,t.indent)+dO(nO(e,i));case lO:return">"+uO(e,t.indent)+dO(nO(oY(e,s),i));case pc:return'"'+iY(e)+'"';default:throw new _r("impossible error: invalid scalar style")}}()}function uO(t,e){var r=sO(t)?String(e):"",n=t[t.length-1]===`
`,o=n&&(t[t.length-2]===`
`||t===`
`),i=o?"+":n?"":"-";return r+i+`
`}function dO(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function oY(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var l=t.indexOf(`
`);return l=l!==-1?l:t.length,r.lastIndex=l,fO(t.slice(0,l),e)}(),o=t[0]===`
`||t[0]===" ",i,s;s=r.exec(t);){var a=s[1],c=s[2];i=c[0]===" ",n+=a+(!o&&!i&&c!==""?`
`:"")+fO(c,e),o=i}return n}function fO(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,o=0,i,s=0,a=0,c="";n=r.exec(t);)a=n.index,a-o>e&&(i=s>o?s:a,c+=`
`+t.slice(o,i),o=i+1),s=a;return c+=`
`,t.length-o>e&&s>o?c+=t.slice(o,s)+`
`+t.slice(s+1):c+=t.slice(o),c.slice(1)}function iY(t){for(var e="",r=0,n,o=0;o<t.length;r>=65536?o+=2:o++)r=fu(t,o),n=ar[r],!n&&du(r)?(e+=t[o],r>=65536&&(e+=t[o+1])):e+=n||J5(r);return e}function sY(t,e,r){var n="",o=t.tag,i,s,a;for(i=0,s=r.length;i<s;i+=1)a=r[i],t.replacer&&(a=t.replacer.call(r,String(i),a)),(qo(t,e,a,!1,!1)||typeof a=="undefined"&&qo(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=o,t.dump="["+n+"]"}function pO(t,e,r,n){var o="",i=t.tag,s,a,c;for(s=0,a=r.length;s<a;s+=1)c=r[s],t.replacer&&(c=t.replacer.call(r,String(s),c)),(qo(t,e+1,c,!0,!0,!1,!0)||typeof c=="undefined"&&qo(t,e+1,null,!0,!0,!1,!0))&&((!n||o!=="")&&(o+=CC(t,e)),t.dump&&lu===t.dump.charCodeAt(0)?o+="-":o+="- ",o+=t.dump);t.tag=i,t.dump=o||"[]"}function aY(t,e,r){var n="",o=t.tag,i=Object.keys(r),s,a,c,l,u;for(s=0,a=i.length;s<a;s+=1)u="",n!==""&&(u+=", "),t.condenseFlow&&(u+='"'),c=i[s],l=r[c],t.replacer&&(l=t.replacer.call(r,c,l)),!!qo(t,e,c,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),!!qo(t,e,l,!1,!1)&&(u+=t.dump,n+=u));t.tag=o,t.dump="{"+n+"}"}function cY(t,e,r,n){var o="",i=t.tag,s=Object.keys(r),a,c,l,u,d,f;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new _r("sortKeys must be a boolean or a function");for(a=0,c=s.length;a<c;a+=1)f="",(!n||o!=="")&&(f+=CC(t,e)),l=s[a],u=r[l],t.replacer&&(u=t.replacer.call(r,l,u)),!!qo(t,e+1,l,!0,!0,!0)&&(d=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,d&&(t.dump&&lu===t.dump.charCodeAt(0)?f+="?":f+="? "),f+=t.dump,d&&(f+=CC(t,e)),!!qo(t,e+1,u,!0,d)&&(t.dump&&lu===t.dump.charCodeAt(0)?f+=":":f+=": ",f+=t.dump,o+=f));t.tag=i,t.dump=o||"{}"}function hO(t,e,r){var n,o,i,s,a,c;for(o=r?t.explicitTypes:t.implicitTypes,i=0,s=o.length;i<s;i+=1)if(a=o[i],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(r?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(c=t.styleMap[a.tag]||a.defaultStyle,JR.call(a.represent)==="[object Function]")n=a.represent(e,c);else if(QR.call(a.represent,c))n=a.represent[c](e,c);else throw new _r("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');t.dump=n}return!0}return!1}function qo(t,e,r,n,o,i,s){t.tag=null,t.dump=r,hO(t,r,!1)||hO(t,r,!0);var a=JR.call(t.dump),c=n,l;n&&(n=t.flowLevel<0||t.flowLevel>e);var u=a==="[object Object]"||a==="[object Array]",d,f;if(u&&(d=t.duplicates.indexOf(r),f=d!==-1),(t.tag!==null&&t.tag!=="?"||f||t.indent!==2&&e>0)&&(o=!1),f&&t.usedDuplicates[d])t.dump="*ref_"+d;else{if(u&&f&&!t.usedDuplicates[d]&&(t.usedDuplicates[d]=!0),a==="[object Object]")n&&Object.keys(t.dump).length!==0?(cY(t,e,t.dump,o),f&&(t.dump="&ref_"+d+t.dump)):(aY(t,e,t.dump),f&&(t.dump="&ref_"+d+" "+t.dump));else if(a==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?pO(t,e-1,t.dump,o):pO(t,e,t.dump,o),f&&(t.dump="&ref_"+d+t.dump)):(sY(t,e,t.dump),f&&(t.dump="&ref_"+d+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&nY(t,t.dump,e,i,c);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new _r("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(l=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?l="!"+l:l.slice(0,18)==="tag:yaml.org,2002:"?l="!!"+l.slice(18):l="!<"+l+">",t.dump=l+" "+t.dump)}return!0}function lY(t,e){var r=[],n=[],o,i;for(EC(t,r,n),o=0,i=n.length;o<i;o+=1)e.duplicates.push(r[n[o]]);e.usedDuplicates=new Array(i)}function EC(t,e,r){var n,o,i;if(t!==null&&typeof t=="object")if(o=e.indexOf(t),o!==-1)r.indexOf(o)===-1&&r.push(o);else if(e.push(t),Array.isArray(t))for(o=0,i=t.length;o<i;o+=1)EC(t[o],e,r);else for(n=Object.keys(t),o=0,i=n.length;o<i;o+=1)EC(t[n[o]],e,r)}function uY(t,e){e=e||{};var r=new X5(e);r.noRefs||lY(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),qo(r,0,n,!0,!0)?r.dump+`
`:""}var dY=uY,fY={dump:dY};function _C(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var xr=YR.load,Nge=YR.loadAll,Lge=fY.dump;var Fge=_C("safeLoad","load"),Mge=_C("safeLoadAll","loadAll"),qge=_C("safeDump","dump");var _h=K(require("path"));var PC=K(require("path")),yO=K(require("os"));var mO=K(require("crypto"));var gO=K(require("util"));var Ln={async readDocument(t){switch(t.scheme){case"file":try{return(await Oe(t.fsPath)).toString()}catch(e){if(e&&e.code==="ENOENT")return;throw e}default:throw new Error(`Unsupported scheme: ${t.toString()}`)}},async applyEdits(t,e,r){switch(t.scheme){case"file":let n=St(r,e);await hl(t.fsPath,n);break;default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}},Ch=class{constructor(e){this.fileHost=e}async readDocument(e){switch(e.scheme){case Ch.scheme:try{return(await this.fileHost.readFile(_e(e,this.fileHost.platform))).toString()}catch{return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,r,n){switch(e.scheme){case Ch.scheme:let o=St(n,r);await this.fileHost.writeFile(_e(e,this.fileHost.platform),Buffer.from(o));break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},wt=Ch;wt.scheme="vscode-fileHost";var Ws=class{constructor(e){this.shellServer=e}async readDocument(e){switch(e.scheme){case Ws.scheme:try{let{stdout:r}=await this.shellServer.exec(`cat ${e.path}`);return r}catch{return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,r,n){switch(e.scheme){case Ws.scheme:try{if(!Ws.nonce){let s=await(0,gO.promisify)(mO.randomBytes)(20);Ws.nonce=s.toString("hex")}let o=St(n,r),i=`EOF-${Ws.nonce}`;await this.shellServer.exec(`cat <<'${i}' >${e.path}
${o}
${i}
`)}catch(o){console.log(o)}break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},Vs=Ws;Vs.scheme="vscode-remote";var vO=class{constructor(e){this.documents=e}async readDocument(e){let r=this.documents[e.scheme];if(!r)throw new Error(`Unsupported scheme: ${e.toString()}`);return r.readDocument(e)}async applyEdits(e,r,n){let o=this.documents[e.scheme];if(!o)throw new Error(`Unsupported scheme: ${e.toString()}`);return o.applyEdits(e,r,n)}};function zt(t,e){let r={file:Ln,[wt.scheme]:new wt(t)};return e&&(r[Vs.scheme]=new Vs(e)),new vO(r)}var SC=new Map;async function xC(t,e){let r=t.toString(),n=SC.get(r);if(n||SC.set(r,n=[]),n.push(e),n.length===1){for(;n.length;)await n[0](),n.shift();SC.delete(r)}}var Ai;(function(s){s[s.Slash=47]="Slash",s[s.Colon=58]="Colon",s[s.A=65]="A",s[s.Z=90]="Z",s[s.a=97]="a",s[s.z=122]="z"})(Ai||(Ai={}));function _e(t,e){let r;return t.authority&&t.path.length>1&&(t.scheme==="file"||t.scheme===wt.scheme)?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,e==="win32"&&(r=r.replace(/\//g,"\\")),r}function hc(t,e){return[t.join(e,".devcontainer","devcontainer.json"),t.join(e,".devcontainer.json")]}async function bh(t,e){let r=hc(t.path,e);for(let n of r)if(await t.isFile(n))return be.file(n).with({scheme:wt.scheme})}async function Eh(t){let e=hc(PC,t);for(let r of e)if(await ht(r))return r}var $o=`{${yO.EOL}}`;async function pn(t,e,r,n){e.scheme==="file"&&await Mr(PC.dirname(e.fsPath)),await t.applyEdits(e,r,n)}function mc(t){let e=PC.posix.dirname(t.path);return t.with({path:e})}function pu(t){if(!(t.extensions||t.settings||t.devPort!==void 0))return t;let e=V({},t),r=e.customizations||(e.customizations={}),n=r.vscode||(r.vscode={});return e.extensions&&(n.extensions=(n.extensions||[]).concat(e.extensions),delete e.extensions),e.settings&&(n.settings=V(V({},e.settings),n.settings||{}),delete e.settings),e.devPort!==void 0&&n.devPort===void 0&&(n.devPort=e.devPort,delete e.devPort),e}function Gs(t,e,r){return jo(t,e.configFilePath,r)}function jo(t,e,r){let n=mc(e);return e.with({path:_h.posix.resolve(n.path,t.platform==="win32"&&e.scheme!==Vs.scheme?(_h.win32.isAbsolute(r)?"/":"")+r.replace(/\\/g,"/"):r)})}function mt(t){return"dockerFile"in t||"build"in t&&"dockerfile"in t.build}function Di(t){return t&&(mt(t)||"image"in t||"dockerComposeFile"in t)}function hr(t,e){return Gs(t,e,pY(e))}function pY(t){return"dockerFile"in t?t.dockerFile:t.build.dockerfile}async function qt(t,e,r,n){if(Array.isArray(e.dockerComposeFile)){if(e.dockerComposeFile.length)return e.dockerComposeFile.map(o=>_e(Gs(t,e,o),t.platform))}else if(typeof e.dockerComposeFile=="string")return[_e(Gs(t,e,e.dockerComposeFile),t.platform)];if(n){let o=r==null?void 0:r.COMPOSE_FILE;if(o)return o.split(t.path.delimiter).map(a=>t.path.resolve(n,a));try{let a=t.path.join(n,".env"),c=await t.readFile(a),l=/^COMPOSE_FILE=(.+)$/m.exec(c.toString()),u=l&&l[1].trim();if(u)return u.split(t.path.delimiter).map(d=>t.path.resolve(n,d))}catch(a){if(!(a&&(a.code==="ENOENT"||a.code==="EISDIR")))throw a}let i=[t.path.resolve(n,"docker-compose.yml")],s=t.path.resolve(n,"docker-compose.override.yml");return await t.isFile(s)&&i.push(s),i}return[]}function hY(){return{contentHashes:{}}}async function CO(t,e,r){let n=t.configurationTracking,o=n.getConfigurationState();if(o){let i=o.contentHashes,s=Object.keys(i),c=(await kC(t,e,r)).contentHashes,l=Object.keys(c),u=new Set(l);s.forEach(p=>u.delete(p));let d=new Set(s);l.forEach(p=>d.delete(p));let f=[];for(let p of s)p in c&&c[p]!==i[p]&&f.push(p);if(u.size||d.size||f.length){let p=await kC(t,e,r);(async()=>{await n.containerOutdated([...u,...d,...f].sort())==="ignore"&&await t.configurationTracking.updateConfigurationState(p)})().catch(console.error)}}else await bO(t,e,r)}async function Sh(t,e,r){let n="Updating configuration state",o=t.common.output.start(n);await bO(t,e,r),t.common.output.stop(n,o)}async function bO(t,e,r){let n=await kC(t,e,r);await t.configurationTracking.updateConfigurationState(n)}async function kC(t,e,r){let n=hY();xh(n,hu.posix.basename(r.configFilePath.path),JSON.stringify(se(V({},r),{forwardPorts:void 0,configFilePath:void 0,postStartCommand:void 0,postAttachCommand:void 0})));let o=mc(r.configFilePath).path;if(mt(r)){let i=hr(t.common.cliHost,r),s=await e.readDocument(i);s!==void 0&&xh(n,hu.posix.relative(o,i.path),s)}if("dockerComposeFile"in r){let i=await qt(t.common.cliHost,r,t.common.cliHost.env,t.common.cliHost.cwd),s=await Promise.all(i.map(async a=>{let c=be.file(a).with({scheme:wt.scheme});return{uri:c,content:await e.readDocument(c)}}));for(let{uri:a,content:c}of s)c!==void 0&&xh(n,hu.posix.relative(o,a.path),c);for(let a=s.length-1;a>=0;a--){let{uri:c,content:l}=s[a];if(l){let u=xr(l),d=u&&u.services,f=d&&d[r.service],p=f&&f.build,h=p&&(typeof p=="string"?p:p.context);if(h){let m=jo(t.common.cliHost,c,h),g=EO(m,p.dockerfile||"Dockerfile"),v=await e.readDocument(g);v!==void 0&&xh(n,hu.posix.relative(o,g.path),v)}if(f&&(f.image||f.build))break}}}return n}function xh(t,e,r){let n=wO.createHash("sha256").update(r).digest("hex");t.contentHashes[e]=n}var Mn=K(require("path")),e1=K(require("crypto"));var jt=K(require("path"));var IO=K(require("net")),RC=K(require("path"));var IC=K(require("path")),TC=K(require("http")),_O=K(require("os")),SO=K(require("crypto"));async function xO(t,e){let r=await AC(t),n=new PO(r,e);return n.listen(),n}var PO=class{constructor(e,r){this.ipcHandlePath=e;this.server=TC.createServer((n,o)=>{Promise.resolve(r(n,o)).catch(i=>console.error(i&&i.message||i))}),this.server.on("error",n=>console.error(n))}listen(){this.server.listen(this.ipcHandlePath)}dispose(){this.server.close()}};async function kO(t){return new Promise((e,r)=>{let n=[];t.setEncoding("utf8"),t.on("data",o=>n.push(o)),t.on("error",o=>r(o)),t.on("end",()=>{let o=JSON.parse(n.join(""));e(o)})})}async function mY(t){return new Promise((e,r)=>{SO.randomBytes(t,(n,o)=>{n?r(n):e(o)})})}async function AC(t){let r=(await mY(20)).toString("hex"),n=`${t}-${r}`;return process.platform==="win32"?`\\\\.\\pipe\\${n}-sock`:process.env.XDG_RUNTIME_DIR?IC.join(process.env.XDG_RUNTIME_DIR,`${n}.sock`):IC.join(_O.tmpdir(),`${n}.sock`)}var DC=class{constructor(){this.messages=[]}push(e){this.messages.push(e),this.dequeueRequest&&(this.dequeueRequest.resolve(this.messages),this.dequeueRequest=void 0,this.messages=[])}async dequeue(e){if(this.messages.length){let r=this.messages;return this.messages=[],r}return this.dequeueRequest&&this.dequeueRequest.resolve([]),new Promise((r,n)=>{this.dequeueRequest={resolve:r,reject:n},typeof e=="number"&&setTimeout(n,e)})}};async function so(t,e,r){let n=await AC("ssh-askpass");return await new Promise((o,i)=>{IO.createServer(s=>{s.setEncoding("utf8");let a="";s.on("data",async c=>{if(a+=c,a.endsWith(`
`))try{r.write(`SSH askpass request: ${a}`,ie.Trace);let l=await e(JSON.parse(a));s.write(l,u=>{u&&console.error(u)}),s.end()}catch(l){console.error(l)}}),s.on("error",c=>console.error(c))}).on("error",s=>{i(s)}).listen(n,()=>{o()})}),{DISPLAY:process.env.DISPLAY||"1",ELECTRON_RUN_AS_NODE:"1",SSH_ASKPASS:RC.join(t,"scripts",`ssh-askpass.${process.platform==="win32"?"bat":"sh"}`),VSCODE_SSH_ASKPASS_NODE:process.execPath,VSCODE_SSH_ASKPASS_EXTRA_ARGS:process.versions.electron?"--ms-enable-electron-run-as-node":"",VSCODE_SSH_ASKPASS_MAIN:RC.join(t,"dist","common","sshAskpass.js"),VSCODE_SSH_ASKPASS_HANDLE:n}}var gY=0;function Ot(t){return t.VSCODE_SSH_ASKPASS_HANDLE?{VSCODE_SSH_ASKPASS_COUNTER:String(++gY)}:{}}async function Pr(t,e){return(await Ri(t,[e]))[0]}async function Ri(t,e){let r=await kh(t,"container",e);for(let n of r){n.Ports=[];let o=n.NetworkSettings.Ports;for(let i in o){let[s,a]=i.split("/");for(let c of o[i]||[]){let{HostIp:l,HostPort:u}=c;n.Ports.push({IP:l,PrivatePort:parseInt(s),PublicPort:parseInt(u),Type:a})}}}return r}async function gc(t,e){return(await kh(t,"image",[e]))[0]}async function Ph(t,e){return(await kh(t,"volume",[e]))[0]}async function mu(t,e){return kh(t,"volume",e)}async function kh(t,e,r){if(!r.length)return[];let n=vu(t),o=await xe(se(V({},n),{args:(n.args||[]).concat(["inspect","--type",e,...r])}));try{return JSON.parse(o.stdout.toString())}catch(i){throw console.error({stdout:o.stdout.toString(),stderr:o.stderr.toString()}),i}}async function Uo(t,e=!1,r=[]){let n=[];e&&n.push("-a");for(let i of r)n.push("--filter",`label=${i}`);return(await Ke(t,"ps","-q",...n)).stdout.toString().split(/\r?\n/).filter(i=>!!i)}async function ao(t,e=[]){let r=[];for(let o of e)r.push("--filter",`label=${o}`);return(await Ke(t,"volume","ls","-q",...r)).stdout.toString().split(/\r?\n/).filter(o=>!!o)}async function OC(t){return(await Ke(t,"volume","ls","-q","-f","dangling=true")).stdout.toString().split(/\r?\n/).filter(r=>!!r)}async function TO(t){return(await Ke(t,"volume","prune","-f")).stdout.toString()}async function Ih(t,e,r){let n=[];for(let o of r||[])n.push("--label",o);await Ke(t,"volume","create",...n,e)}async function Th(t,e){let{exec:r,cmd:n,args:o,env:i,output:s}=vu(t),a=[];for(let f in e)for(let p of e[f])a.push("--filter",`${f}=${p}`);let c=await LC(t)?"json":"{{json .}}",l=(o||[]).concat(["events","--format",c,...a]),u=await r({cmd:n,args:l,env:i,output:s}),d=[];return u.stderr.on("data",f=>d.push(f)),u.exit.then(({code:f,signal:p})=>{d.length&&s.write(Ne(Buffer.concat(d).toString())),(f||p&&p!=="SIGKILL")&&s.write(Ne(`Docker events terminated (code: ${f}, signal: ${p}).`))},f=>{s.write(Ne(f&&(f.stack||f.message)))}),u}async function Ke(t,...e){let r=vu(t);return xe(se(V({},r),{args:(r.args||[]).concat(e)}))}async function NC(t){var e;try{let{stdout:r}=await Ke(t,"context","ls","--format","{{json .}}"),n=`[${r.toString().trim().split(/\r?\n/).join(",")}]`;return(e=JSON.parse(n).find(s=>s.Current))==null?void 0:e.Name}catch{return}}async function LC(t){if(("cliHost"in t?t.cliHost:t.common.cliHost).platform!=="linux")return!1;try{let{stdout:r}=await Ke(t,"-v");return r.toString().toLowerCase().indexOf("podman")!==-1}catch{return!1}}async function Ah(t,...e){let r=yu(t);return bi(se(V({},r),{args:(r.args||[]).concat(e)}))}async function zs(t,...e){let r=vu(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return xe(se(V({},r),{args:(r.args||[]).concat(e)}))}async function AO(t,...e){let r=yu(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return bi(se(V({},r),{args:(r.args||[]).concat(e)}))}function vc(t,e,r){return async function(n){let{exec:o,cmd:i,args:s,env:a}=vu(t),{argsPrefix:c,args:l}=RO(e,r,n,!1);return o({cmd:i,args:(s||[]).concat(l),env:a,output:DO(n.output,i,c)})}}async function gu(t,e,r,n){if(!await n("node-pty"))throw new Error("Missing node-pty");return async function(i){let{ptyExec:s,cmd:a,args:c,env:l}=yu(t),{argsPrefix:u,args:d}=RO(e,r,i,!0);return s({cmd:a,args:(c||[]).concat(d),env:l,output:DO(i.output,a,u)})}}function DO(t,e,r){return vY(t,`Run: ${e} ${(r||[]).join(" ").replace(/\n.*/g,"")}`,"Run in container:")}function vY(t,e,r){let n=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");return or(se(V({},t),{get dimensions(){return t.dimensions},event:i=>t.event("text"in i?se(V({},i),{text:i.text.replace(n,r)}):i)}))}function RO(t,e,r,n){let{env:o,cwd:i,cmd:s,args:a}=r,c=["exec","-i"];n&&c.push("-t"),e&&c.push("-u",e),o&&Object.keys(o).forEach(u=>c.push("-e",`${u}=${o[u]}`)),i&&c.push("-w",i),c.push(t);let l=c.slice();return c.push(s),a&&c.push(...a),{argsPrefix:l,args:c}}function vu(t,e){return"dockerEnv"in t?{exec:t.common.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:V(V({},t.dockerEnv),Ot(t.dockerEnv)),output:t.common.output}:"cliHost"in t?{exec:t.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:V(V({},t.env),Ot(t.env)),output:t.output}:se(V({},t),{env:V(V({},t.env),Ot(t.env))})}function yu(t,e){return"dockerEnv"in t?{ptyExec:t.common.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:V(V({},t.dockerEnv),Ot(t.dockerEnv)),output:t.common.output}:"cliHost"in t?{ptyExec:t.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:V(V({},t.env),Ot(t.env)),output:t.output}:se(V({},t),{env:V(V({},t.env),Ot(t.env))})}function FC(t){return t.toLowerCase().replace(/[^a-z0-9\._-]+/g,"").replace(/(\.[\._-]|_[\.-]|__[\._-]|-+[\._])[\._-]*/g,(e,r)=>r.substr(0,r.length-1))}var Vh=K(require("path")),IL=K(xL()),TL=K(require("url")),_J=K(Ba());var PL=K(Ga()),kL=K(require("url"));function Du(t,e){return new Promise((r,n)=>{let o=new kL.URL(t.url),i={hostname:o.hostname,port:o.port,path:o.pathname+o.search,method:t.type,headers:t.headers},s=PL.https.request(i,a=>{if(a.statusCode<200||a.statusCode>299)n(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`)),e&&e.write(`HTTP request failed with status code ${a.statusCode}: : ${a.statusMessage}`,ie.Error);else{a.on("error",n);let c=[];a.on("data",l=>c.push(l)),a.on("end",()=>r(Buffer.concat(c)))}});s.on("error",n),t.data&&s.write(t.data),s.end()})}var AL="devcontainer-features.tgz";function Wh(t){return t?{allFeatures:t.featureSets.map(r=>r.features).flat()}:void 0}function Xs(t){let e=typeof t=="string"?Vh.join(t,"dist"):t.distFolder;return Vh.join(e,"node_modules","vscode-dev-containers","container-features")}function Gh(t){let{type:e}=t;switch(e){case"local-cache":return"local-cache";case"direct-tarball":return Buffer.from(t.tarballUri).toString("base64");case"github-repo":return`github-${t.owner}-${t.repo}-${t.isLatest?"latest":t.tag}`;case"file-path":return Buffer.from(t.filePath).toString("base64")}}function YC(t){if(!t)return"n/a";let{type:e}=t;switch(e){case"local-cache":return"(cache)";case"direct-tarball":return"(tarball)";case"github-repo":return`${t.owner}/${t.repo}`;case"file-path":return"(file-path)"}}function JC(t,e){let r=new RegExp("^[a-zA-Z0-9_-]*$");if(!t.includes("/"))return e.write(`[${t}] - No slash, must be locally cached feature.`,ie.Trace),{id:t,sourceInformation:{type:"local-cache"}};if(t.startsWith("http://")||t.startsWith("https://")){e.write(`[${t}] - Direct URI`,ie.Trace),t=t.replace(/\/+$/,"");let d=t.lastIndexOf("#"),f=t.substring(d+1);if(f===""||!r.test(f)){e.write(`Parse error. Specify a feature id with alphanumeric, dash, or underscore characters. Provided: ${f}.`,ie.Error);return}let p=new TL.URL(t.substring(0,d)).toString();return e.write(`[${t}] - uri: ${p} , id: ${f}`,ie.Trace),{id:f,sourceInformation:{type:"direct-tarball",tarballUri:p}}}if(t.startsWith("/")||t.startsWith("./")||t.startsWith("../"))return;let n="latest",o=t.split("@");if(o.length>2){e.write("Parse error. Use the '@' symbol only to designate a version tag.",ie.Error);return}o.length===2&&(e.write(`[${t}] has version ${o[1]}`,ie.Trace),n=o[1]);let s=o[0].split("/");if(s.length!==3||s.some(d=>d==="")||!r.test(s[2])){e.write("Invalid parse for GitHub/registry feature identifier. Follow format: '<publisher>/<feature-set>/<feature>'",ie.Error);return}let a=s[0],c=s[1],l=s[2],u=QC({owner:a,repo:c,tag:n});return{id:l,sourceInformation:u}}function QC(t){let{owner:e,repo:r,tag:n}=t;return n==="latest"?{type:"github-repo",apiUri:`https://api.github.com/repos/${e}/${r}/releases/latest`,unauthenticatedUri:`https://github.com/${e}/${r}/releases/latest/download/${AL}`,owner:e,repo:r,isLatest:!0}:{type:"github-repo",apiUri:`https://api.github.com/repos/${e}/${r}/releases/tags/${n}`,unauthenticatedUri:`https://github.com/${e}/${r}/releases/download/${n}/${AL}`,owner:e,repo:r,tag:n,isLatest:!1}}async function SJ(t,e){if(t.length===0){e.write("Parsed featureSet is empty.",ie.Error);return}let r=Ve(t.toString());if(!(r==null?void 0:r.features)||r.features.length===0){e.write("Parsed featureSet contains no features.",ie.Error);return}return e.write(`Loaded devcontainer-features.json declares ${r.features.length} features and ${r.sourceInformation?"contains":"does not contain"} explicit source info.`,ie.Trace),xJ(r)}async function XC(t,e){let r=await Oe(Vh.join(t,"devcontainer-features.json"));return SJ(r,e)}function xJ(t){return t.features.find(e=>e.extensions||e.settings)?se(V({},t),{features:t.features.map(e=>{if(!(e.extensions||e.settings))return e;let r=V({},e),n=r.customizations||(r.customizations={}),o=n.vscode||(n.vscode={});return r.extensions&&(o.extensions=(o.extensions||[]).concat(r.extensions),delete r.extensions),r.settings&&(o.settings=V(V({},r.settings),o.settings||{}),delete r.settings),r})}):t}var ZC=(t,e)=>`${t}-${Gh(e)}`;async function eb(t,e,r,n){var d;let{output:o}=t,i=await n(),s=i["com.visualstudio.code.devcontainers.id"],a=i.version,c=e.features||{},l={};for(let f of Object.keys(c)){let{id:p,sourceInformation:h}=(d=JC(f,o))!=null?d:{};if(p&&h){let m=ZC(p,h);l[m]=c[f]}else{o.write(`Failed to read user declared feature ${f}. Skipping.`,ie.Error);continue}}let u={};for(let f of r.featureSets)for(let p of f.features){PJ(p);let h=ZC(p.id,f.sourceInformation);s&&(p.exclude||[]).some(m=>DL(m,s,a))?p.included=!1:"include"in p?p.included=!!s&&(p.include||[]).some(m=>DL(m,s,a)):p.included=!0,u[h]=u[h]||p.included,p.value=l[h]||!1}t.output.write(`Feature configuration:
`+JSON.stringify(se(V({},r),{imageDetails:void 0}),void 0,"  "),ie.Trace);for(let f of r.featureSets)f.features=f.features.filter(p=>{let h=ZC(p.id,f.sourceInformation);return h in u&&p.included===u[h]?(delete u[p.id],!0):!1});return r}function PJ(t){if(t.values){let e=t.options||(t.options={});e.version={type:"string",[t.customValues?"proposals":"enum"]:t.values,default:t.values[0],description:t.hint}}delete t.type,delete t.values,delete t.customValues,delete t.hint}function DL(t,e,r){let n=t.indexOf("@"),[o,i]=n!==-1?[t.slice(0,n),t.slice(n+1)]:[t,void 0];return e===o&&(!i||!r||IL.satisfies(r,i))}function Vo(t){var e;return((e=t.options)==null?void 0:e.version)?"version":void 0}function Ru(t){var r,n;let e=Vo(t);if(!e)return!!t.value;if(typeof t.value=="object"){let o=t.value[e];return o===void 0&&t.options?(r=t.options[e])==null?void 0:r.default:o}return t.value===void 0&&t.options?(n=t.options[e])==null?void 0:n.default:t.value}function RL(t){var r;let e=Vo(t);return e?t.options&&((r=t.options[e])==null?void 0:r.default):!0}var tb="com.docker.compose.project",OL="com.docker.compose.service";async function NL(t,e,r,n,o,i,s,a,c,l,u,d,f,p){return kJ(t,e,r,n,o,i,LL(n),s,a,c,l,u,d,f,p)}async function kJ(t,e,r,n,o,i,s,a,c,l,u,d,f,p,h){var y,b;let{common:m}=t,{cliHost:g}=e,v;try{let C=await qt(g,n,g.env,g.cwd),_=g.path.join(g.cwd,".env"),P=Array.isArray(n.dockerComposeFile)&&n.dockerComposeFile.length===0&&await g.isFile(_)?_:void 0,S=await Ou(e,r,C),k=!l,T,A=async()=>T||(T=(async()=>{let ne=V(V({},e.env),Ot(e.env)),X={cliHost:g,env:ne,extensionPath:m.extensionPath,appRoot:m.appRoot,package:m.package,output:m.postCreate.output},ve=await Jh(X,i,p,m.getLogLevel(),h,m.cliMode);return Wh(ve.featuresConfiguration)})());v=await _c(t,a.Id,s,n.remoteUser),d&&l&&v.user!=="root"&&(v.launchRootShellServer?await uh(v,v.launchRootShellServer,s,n.configFilePath.path):m.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."));let F=zt(g,v.shellServer);k||await Sh(t,F,n);let j={cwd:o,dockerCLI:t.dockerCLI,dockerComposeCLI:await t.dockerComposeCLI(),env:m.env,containerId:a.Id,user:v.user,sessionId:m.sessionId,shutdownAction:n.shutdownAction,projectName:S,composeFiles:C,envFile:P,buildContainerRunArgs:u,service:n.service,runServices:n.runServices,logLevel:m.getLogLevel(),delay:1e4},{shutdownArgs:J,doneWithDocuments:Y}=await Kh(t,F,"dockerCompose",j,k?n:void 0);m.backgroundTasks.push(Y);let ae=((b=(y=n.customizations)==null?void 0:y.vscode)==null?void 0:b.devPort)||ki,{hostOrContainerPort:te,hostPortServer:M,connectionToken:L,webConnectionToken:q,remoteEnv:W,serverDownloaded:z}=await lh(m,v,n,A,ae,Yh(t,e,i,a.Id,c,p,h));return J.hostPortServer=M,bc(m,v,te,L,q,a,r),{params:m,properties:v,config:n,resolvedAuthority:{host:Ni,port:te,connectionToken:L,extensionHostEnv:W},webConnectionToken:q,tunnelInformation:m.isLocalContainer?Ec(a):{},dockerParams:t,dockerContainerId:a.Id,serverDownloaded:z}}catch(C){let _=C instanceof we?C:new we({description:"An error occurred setting up the container.",originalError:C});throw a&&(_.manageContainer=!0,_.params=t.common,_.containerId=a.Id,_.dockerParams=t),v&&(_.containerProperties=v),_.config=n,_}}function LL(t){return t.workspaceFolder||"/"}async function FL(t,e,r){if(Wt(t)){let n=_i(t),o=[];for(let i=0;i<e.length;i++){let s=await Fo(n,e[i],r);o.push(s)}return o}return e}async function ML(t,e,r){try{let n=[].concat(...e.map(i=>["-f",i]));r&&n.push("--env-file",r);let o=await t.dockerComposeCLI();(js(o.version)||[])[0]>=2&&n.push("--profile","*");try{let{stdout:i}=await zs(t,...n,"config"),s=i.toString();return t.output.write(s),xr(s)||{}}catch(i){if(!Buffer.isBuffer(i==null?void 0:i.stderr)||(i==null?void 0:i.stderr.toString().indexOf("UnicodeEncodeError"))===-1)throw i;if(t.cliHost.platform==="win32"){let{cmdOutput:c}=await AO(se(V({},t),{output:or({event:t.output.event,dimensions:{columns:999999,rows:1}},ie.Info)}),...n,"config");return xr(c.replace(wi,""))||{}}let{stdout:s}=await zs(se(V({},t),{env:se(V({},t.env),{LANG:"en_US.UTF-8",LC_CTYPE:"en_US.UTF-8"})}),...n,"config"),a=s.toString();return t.output.write(a),xr(a)||{}}}catch(n){throw n instanceof we?n:new we({description:"An error occurred retrieving the Docker Compose configuration.",originalError:n,data:{fileWithError:e[0]}})}}async function qL(t,e,r){let n=await Uo(t,!0,[`${tb}=${e}`,`${OL}=${r}`]);return n&&n[0]}async function $L(t,e,r){var n;return(n=t.find(o=>{let i=o.Config.Labels||{};return i[tb]===e&&i[OL]===r}))==null?void 0:n.Id}async function Ou(t,e,r){let{cliHost:n}="cliHost"in t?t:t.common,o=await IJ(t),i=zh(n.env.COMPOSE_PROJECT_NAME||"",o);if(i)return i;try{let c=n.path.join(n.cwd,".env"),l=await n.readFile(c),u=/^COMPOSE_PROJECT_NAME=(.+)$/m.exec(l.toString()),d=u&&u[1].trim(),f=zh(d||"",o);if(f)return f}catch(c){if(!(c&&(c.code==="ENOENT"||c.code==="EISDIR")))throw c}let s=e.configFolderPath,a=r[0]?n.path.dirname(r[0]):n.cwd;return RD(n.platform,a,n.path.join(s,".devcontainer"))?zh(`${n.path.basename(s)}_devcontainer`,o):zh(n.path.basename(a),o)}function rb(t){let e=(t.Config.Labels||{})[tb];return e||void 0}function zh(t,e){return e?t.toLowerCase().replace(/[^-_a-z0-9]/g,""):t.toLowerCase().replace(/[^a-z0-9]/g,"")}async function IJ(t){try{let e=js((await t.dockerComposeCLI()).version);return e?!sc(e,[1,21,0]):!0}catch{return!0}}function co(t,e,r){let n;return()=>n||(n=(async()=>{let o=!1,i;try{i=(await zs(se(V({},t),{cmd:r}),"version","--short")).stdout}catch(s){if((s==null?void 0:s.code)!=="ENOENT")throw s;i=(await zs(se(V({},t),{cmd:e}),"compose","version","--short")).stdout,o=!0}return{version:i.toString().trim(),cmd:o?e:r,args:o?["compose"]:[]}})())}var lo=K(require("url")),jL=K(require("https"));var nb;(function(e){e[e.CannotAccessRepository=2]="CannotAccessRepository"})(nb||(nb={}));function uo(t){return t.toLowerCase().indexOf("github.com")>=0?OJ(t):t.toLowerCase().indexOf("visualstudio.com")>=0?DJ(t):t.toLowerCase().indexOf("dev.azure.com")>=0?AJ(t):t.toLowerCase().indexOf("gitlab.com")>=0?RJ(t):TJ(t)}function Wo(t){let e="owner",r="repository";return{repository:"unknown",repositoryUrl:t,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function TJ(t){var s;let e="unknown-owner",r,n=t,o;o=(s=lo.parse(t))==null?void 0:s.path;let i=o==null?void 0:o.split("/");return!i||i.length<1?Wo(t):(r=i[i.length-1],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),{repository:"unknown",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`})}function AJ(t){var i,s;let e,r,n=t,o;if(Qh(t)){let a=`http://${t}`;o=(i=lo.parse(a))==null?void 0:i.path;let c=o==null?void 0:o.split("/");if(!c||c.length<5)return Wo(t);e=c[3],r=c[4]}else{o=(s=lo.parse(t))==null?void 0:s.path;let a=o==null?void 0:o.split("/");if(!a||a.length<5)return Wo(t);e=a[2],r=a[4],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf(".")))}return{repository:"ado",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function DJ(t){var i,s;let e,r,n=t,o;if(Qh(t)){let a=`http://${t}`;o=(i=lo.parse(a))==null?void 0:i.path;let c=o==null?void 0:o.split("/");if(!c||c.length<5)return Wo(t);e=c[3],r=c[4]}else{o=(s=lo.parse(t))==null?void 0:s.path;let a=o==null?void 0:o.split("/");if(!a||a.length<5)return Wo(t);e=a[2],r=a[4],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf(".")))}return{repository:"vso",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function RJ(t){var i,s;let e,r,n=t,o;if(Qh(t)){let a=`http://${t}`;o=(i=lo.parse(a))==null?void 0:i.path,o&&(o=o.replace("/:","/"));let c=o==null?void 0:o.split("/");if(!c||c.length<3)return Wo(t);e=c[c.length-2],r=c[c.length-1]}else{o=(s=lo.parse(t))==null?void 0:s.path;let a=o==null?void 0:o.split("/");if(!a||a.length<3)return Wo(t);e=a[a.length-2],r=a[a.length-1]}return r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),{repository:"gitlab",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function OJ(t){var c,l;let e,r,n=t,o,i,s;if(Qh(t)){let u=`http://${t}`;s=(c=lo.parse(u))==null?void 0:c.path,s&&(s=s.replace("/:","/"))}else s=(l=lo.parse(t))==null?void 0:l.path;let a=s==null?void 0:s.split("/");if(!a||a.length<=2)return Wo(t);if(e=a[1],r=a[2],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),a.length>=3){if(a[3]==="commit"||a[3]==="tree"){let u=t.match(/\/tree\/|\/commit\//);u&&u.index&&(n=t.substring(0,u.index),o=t.substring(u.index+u[0].length))}if(a[3]==="pull"){i=a[4];let u=t.match(/\/pull\//);u&&u.index&&(n=t.substring(0,u.index))}}return{repository:"github",repositoryUrl:n,ref:o,commit:a[3]==="commit",repositoryOwner:e,repositoryName:r,pullRequestId:i,fullRepositoryName:`${e}/${r}`}}function Qh(t){return t=t.toLowerCase(),t.indexOf("://")<0?t.indexOf("@")<t.indexOf(":"):!1}var Xh=class extends Error{constructor(e,r){super();this.code=e,this.description=r}},Zh=class{constructor(e){this.inputUrl=e,this.gitUrlInfo=uo(this.inputUrl)}repositoryName(){return this.gitUrlInfo.repositoryName}repositoryOwner(){return this.gitUrlInfo.repositoryOwner}async postClone(e,r,n,o){}installExtension(){return null}},UL=class extends Zh{constructor(e){super(e)}async parseUrl(e){var i,s,a;let r=(i=this.gitUrlInfo)==null?void 0:i.repositoryOwner,n=(s=this.gitUrlInfo)==null?void 0:s.repositoryName,o=(a=this.gitUrlInfo)==null?void 0:a.pullRequestId;return this.getPullRequestInfo(e,r,n,o)}async getPullRequestInfo(e,r,n,o){var u,d,f,p,h,m,g,v,y,b,C;let i=await this.fetchPullRequestInfo(e,r,n,o),s=(d=(u=i.head)==null?void 0:u.repo)==null?void 0:d.clone_url,a=(p=(f=i.base)==null?void 0:f.repo)==null?void 0:p.clone_url;if(!a)throw new Xh(2,"Cannot access the head repository of the Pull Request.");let c=(h=i.head)==null?void 0:h.ref,l=((v=(g=(m=i.head)==null?void 0:m.repo)==null?void 0:g.owner)==null?void 0:v.login)===r?null:(C=(b=(y=i.head)==null?void 0:y.repo)==null?void 0:b.owner)==null?void 0:C.login;return{urlToClone:a,prRepositoryUrl:s,ref:c,sourceOwner:l}}async fetchPullRequestInfo(e,r,n,o){let i=`/repos/${r}/${n}/pulls/${o}`,s={"user-agent":"vscode-remote-containers"};e&&(s.authorization=`token ${e}`);let a={hostname:"api.github.com",port:443,path:i,method:"GET",headers:s};return new Promise((c,l)=>{let u="",d=jL.request(a,f=>{if(f.statusCode<200||f.statusCode>=300)return l(new Error(`Status Code: ${f.statusCode}`));f.on("data",p=>{u+=p}),f.on("end",()=>{let p=JSON.parse(u.toString());c(p)})});d.on("error",l),d.end()})}cloneOptions(e){return{url:e.urlToClone,fullClone:!0}}async postClone(e,r,n,o){if(e.sourceOwner){let l=e.prRepositoryUrl.replace(/\.[^/.]+$/,"");await xe({exec:r.exec,cmd:"git",args:["remote","add",e.sourceOwner,l],cwd:n,output:o}),await xe({exec:r.exec,cmd:"git",args:["fetch",e.sourceOwner,e.ref],cwd:n,output:o});try{await xe({exec:r.exec,cmd:"git",args:["checkout","-t",`${e.sourceOwner}/${e.ref}`],cwd:n,output:o})}catch(u){if(!(u.stderr&&u.stderr.startsWith(`fatal: A branch named '${e.ref}' already exists`)))throw u}await xe({exec:r.exec,cmd:"git",args:["config","--local",`remote.${e.sourceOwner}.github-pr-remote`,"true"],cwd:n,output:o})}else await xe({exec:r.exec,cmd:"git",args:["checkout",e.ref],cwd:n,output:o});let i=this.gitUrlInfo.repositoryOwner,s=this.gitUrlInfo.repositoryName,a=this.gitUrlInfo.pullRequestId,c=`${i}#${s}#${a}`;await xe({exec:r.exec,cmd:"git",args:["config","--local",`branch.${e.ref}.github-pr-owner-number`,c],cwd:n,output:o})}installExtension(){return"GitHub.vscode-pull-request-github"}},BL=class extends Zh{constructor(e){super(e)}async parseUrl(e){var r,n;return{urlToClone:(r=this.gitUrlInfo)==null?void 0:r.repositoryUrl,ref:(n=this.gitUrlInfo)==null?void 0:n.ref}}cloneOptions(e){let r=this.gitUrlInfo.commit;return{url:e.urlToClone,branch:!r&&e.ref||void 0,fullClone:r}}async postClone(e,r,n,o){this.gitUrlInfo.commit&&await xe({exec:r.exec,cmd:"git",args:["checkout",e.ref],cwd:n,output:o})}},ob=class extends Zh{constructor(e,r){super(e);this.branch=r}async parseUrl(e){return{urlToClone:this.inputUrl,ref:this.branch}}cloneOptions(e){return{url:e.urlToClone,branch:e.ref||void 0}}};function Sc(t,e){if(e)return new ob(t,e);let r=uo(t);if(r.repository==="github"){if(r.pullRequestId)return new UL(t);if(r.ref)return new BL(t)}return new ob(t)}var Nu=jt.join(__dirname,"..","node_modules","vscode-dev-containers","repository-containers");async function HL(t,e,r,n){if(e&&!/\/\.?devcontainer\.json$/.test(e.path))throw new Error(`Filename must be devcontainer.json or .devcontainer.json (${_e(e,t.common.cliHost.platform)}).`);let o=t.parsedAuthority;if(!o||Yt(o))return NJ(t,o,e,r,n);if(yn(o))return o.inspectVolume?VL(t,o):LJ(t,o,e);if(Fu(o))return VL(t,o);throw new Error(`Unexpected authority: ${JSON.stringify(o)}`)}async function NJ(t,e,r,n,o){let{common:i,dockerCLI:s,dockerComposeCLI:a,dockerComposePath:c}=t,{cliHost:l,env:u,output:d}=i,f=l.cwd,p=t.originalCwd||f,h=e&&Ue(l.path,Vl(e.hostPath)?l.path.join(f,jt.basename(e.hostPath)):f),m;h&&(m=await MJ(t,h),m&&(i.backgroundTasks.push(m==null?void 0:m.gitUnshallow),await m.gitClone()));let g={cliHost:l,dockerCLI:s,dockerComposeCLI:a,dockerComposePath:c,env:u,output:d},v=o?void 0:[`${db}=${p}`],y=o||[`${fb}=${p}`,`${rm}=${i.product.quality}`];return ib(t,g,v,y,p,f,r,n,h,e==null?void 0:e.settings,[],i.cliMode?"never":"on")}async function LJ(t,e,r){let{repositoryPath:n,volumeName:o,folder:i}=e,s=vn(n);o=await YL(t,s,o);let{labels:a,remoteWorkspaceFolder:c}=JL(s,n,i,o),l=[...a],u=[...a,`${rm}=${t.common.product.quality}`],{containerId:d,shellServer:f,config:p}=await s.cloneAndInitializeRepository(t,e,s,o,r),h=Ue(jt.posix,i?s.workspaceFolder(i):s.fullRepositoryName),m=[`type=volume,source=${o},target=${jt.posix.dirname(h.rootFolderPath)},external=true`],g=await QL(t,d,c),v={},{HOME:y,USERPROFILE:b}=t.common.env;y!==void 0&&(v.HOME=y),b!==void 0&&(v.USERPROFILE=b);let C=ub(s,o,i),_=g.cliHost,P,S=mt(p)||"image"in p;if(S||"dockerComposeFile"in p&&p.workspaceFolder){let k=S?se(V({},p),{configFilePath:void 0,workspaceFolder:void 0,workspaceMount:""}):se(V({},p),{configFilePath:void 0,workspaceFolder:h.rootFolderPath}),T=_.path.join(await _.tmpdir(),`devcontainer-${Br()}.json`),A=`EOF-${T}`,F=`${T}_${Date.now()}`;await f.exec(`cat <<'${A}' >${F}
${JSON.stringify(k)}
${A}
mv ${F} ${T}`),P=be.from({scheme:wt.scheme,path:T})}try{return await ib(t,g,l,u,t.common.cliHost.cwd,_.cwd,r,P,h,e.settings,m,"off",C,!0,void 0,v)}finally{Promise.all(t.common.backgroundTasks.filter(k=>typeof k!="function").map(k=>k.catch(()=>{}))).then(()=>Ke(t,"rm","-f",d))}}async function VL(t,e){let{common:r,dockerCLI:n,dockerComposeCLI:o,dockerComposePath:i}=t,{cliHost:s,env:a,output:c}=r,{volumeName:l}=e,u,d,f=Fu(e);f?(u=tm,d="Inspect Volume"):(u=vn(e.repositoryPath).volumeDestination,d="Recovery Container");let p=[`${em}=${l}`],h=[`${em}=${l}`,`${rm}=${r.product.quality}`],m=await KL(t),g=[`type=volume,source=${l},target=${u},external=true`],v={cliHost:s,dockerCLI:n,dockerComposeCLI:o,dockerComposePath:i,env:a,output:c},y=Ue(s.path,m);return ib(t,v,p,h,m,m,void 0,void 0,y,e.settings,g,"never",void 0,!f,d)}async function ib(t,e,r,n,o,i,s,a,c,l,u,d,f,p,h,m){let{common:g,userRepositoryConfigurationPaths:v}=t,{output:y,extensionPath:b,appRoot:C,postCreate:_}=g,{cliHost:P}=e;t.cacheMount==="bind"&&await Mr(g.localCacheFolder);let S=t.cacheMount==="volume"?[...u,"type=volume,source=vscode,target=/vscode,external=true"]:t.cacheMount==="bind"?[...u,`type=bind,source=${g.localCacheFolder},target=/vscode`]:u;if(t.cacheMount==="volume"){let X="vscode";(await ao(e)).indexOf(X)===-1&&await Ih(e,X)}let k=s||(c?await fo(P,c,v,!a,y):void 0);if((k==null?void 0:k.scheme)==="file"&&P.type!=="local"){let X=jt.dirname(k.fsPath),ve=jt.basename(k.fsPath),Pe=ve===".devcontainer.json"?X:jt.dirname(X),Se=P.path.join(await P.tmpdir(),`devcontainer-config-${Br()}`);await Zs(Pe,P,Se,y),k=be.from({scheme:wt.scheme,path:P.path.join(Se,...ve===".devcontainer.json"?[ve]:[jt.basename(X),ve])})}typeof t.removeOnStartup=="string"&&await zr(t,t.removeOnStartup)&&await Ke(t,"rm","-f",t.removeOnStartup);let T=await WL(e,n);T&&t.removeOnStartup===!0&&r&&(await Ke(t,"rm","-f",T.Id),T=void 0);let A=!!T||!r,F=A?n:r,j=t.removeOnStartup===!0||!(T||r&&await WL(e,r)),J=V(V(V({},m),e.env),Ot(e.env)),Y={cliHost:P,env:J,extensionPath:b,appRoot:C,package:g.package,postCreate:_,output:g.postCreate.output},ae=g.postCreate.output.dimensions||g.output.dimensions,te=await Mu(Y,["up",...e.cliHost.type==="local"&&g.persistedFolder?["--user-data-folder",g.persistedFolder]:[],...e.dockerCLI!=="docker"?["--docker-path",e.dockerCLI]:[],...e.dockerComposePath!=="docker-compose"?["--docker-compose-path",e.dockerComposePath]:[],...A?["--container-data-folder",dn(t.common.product.serverDataFolderName)]:[],...A?["--container-system-data-folder",cc(t.common.product.serverDataFolderName)]:[],"--workspace-folder",i,...t.workspaceMountConsistencyDefault?["--workspace-mount-consistency",t.workspaceMountConsistencyDefault]:[],...[].concat(...F.map(X=>["--id-label",X])),"--log-level",yi(g.getLogLevel()),"--log-format","json",...k?["--config",_e(k,P.platform)]:[],...a?["--override-config",_e(a,P.platform)]:[],"--default-user-env-probe",g.defaultUserEnvProbe,...t.buildNoCache?["--build-no-cache"]:[],...t.removeOnStartup===!0?["--remove-existing-container"]:[],...t.expectExistingContainer?["--expect-existing-container"]:[],...[].concat(...S.map(X=>["--mount",X])),"--skip-post-create","--update-remote-user-uid-default",d,"--mount-workspace-git-root",String(!g.cliMode),...ae?["--terminal-columns",String(ae.columns),"--terminal-rows",String(ae.rows)]:[]]);if((te==null?void 0:te.outcome)!=="success")throw new we({description:`devcontainer command failed: ${te?JSON.stringify(te):"data missing"}`});let M=await zr(t,te.containerId);if(!M)return ZL(g.output,"Dev container not found.");let L=await sb(Y,i,k,g.getLogLevel(),a,g.cliMode),q=L.configuration,W=xc(l),z=h||(q.name?`Dev Container: ${q.name}${W}`:`Dev Container${W}`);g.setWorkspaceName(z);let ne;if(mt(q)||"image"in q)ne=await XL(t,e,c,q,L.workspace,o,i,M,A,j,p,F,k,a);else if("dockerComposeFile"in q){if(!c)throw new we({description:"A Dev Container using Docker Compose requires a workspace folder."});ne=await NL(t,e,c,q,o,i,M,A,j,f,p,F,k,a)}else throw new we({description:`Dev container config (${q.configFilePath}) is missing one of "image", "dockerFile" or "dockerComposeFile" properties.`});return ne}async function WL(t,e){let r=await Uo(t,!0,e);return(await Ri(t,r)).filter(o=>o.State.Status!=="removing")[0]}async function sb(t,e,r,n,o,i=!1){let{cliHost:s,output:a}=t,c=await Mu(t,["read-configuration","--workspace-folder",e,"--log-level",yi(n),"--log-format","json",...r?["--config",_e(r,s.platform)]:[],...o?["--override-config",_e(o,s.platform)]:[],"--mount-workspace-git-root",String(!i),...a.dimensions?["--terminal-columns",String(a.dimensions.columns),"--terminal-rows",String(a.dimensions.rows)]:[]]);return c.configuration.configFilePath=be.revive(c.configuration.configFilePath).with({scheme:s.type==="local"?"file":wt.scheme}),c}async function fo(t,e,r,n,o){let i=await ab(t,e,r,n,o);return i==null?void 0:i.uri}async function ab(t,e,r,n,o){let i=await cT(t,e,ot),s=i&&await Lu(i,r);if(s)return{uri:s,location:"user"};let a=await bh(t,e.configFolderPath);if(a)return{uri:a,location:"workspace"};let c=i&&await Lu(i,[Nu]);if(c)return{uri:c,location:"builtin"};n&&o&&((i==null?void 0:i.length)?o.write(`No dev container config found. Additional locations checked:
${[...lb(i,r),...lb(i,[Nu])].map(l=>`- ${jt.join(l,".devcontainer","devcontainer.json")}`).join(`
`)}`):o.write("No dev container config found. No repository connection string found."))}async function Lu(t,e){let r=lb(t,e);for(let n of r){let o=await Eh(n);if(o)return be.file(o)}}function lb(t,e){let r=[],n=new Set(t.map(FJ).filter(o=>!!o));for(let o of n)for(let i of e){let s=jt.join(i,o);r.push(s)}return r}function GL(t,e,r){let n=t.path.relative(e.rootFolderPath,_e(r,t.platform));return n&&!n.startsWith("..")&&!t.path.isAbsolute(n)}function zL(t){if(t.scheme!=="file")return;let e=jt.relative(Nu,t.fsPath);if(e&&!e.startsWith("..")&&!jt.isAbsolute(e))return e}function FJ(t){let e;if(t.startsWith("https://"))e=t.substr(8);else{let r=/[^@:]+@([^:]+):(.+)/.exec(t);if(r)e=`${r[1]}/${r[2]}`;else return}if(!(e.toLowerCase().startsWith("github.com")&&(e=(/^[^/]+\/[^/]+\/[^/]+/.exec(e)||[])[0],!e)))return e.endsWith(".git")&&(e=e.substr(0,e.length-4)),e}async function MJ(t,e){var p;let{common:r,gitClone:n}=t,{cliHost:o}=r;if(!n)return;let i=au(r),s=au(r),a=Sc(n.url,n.branch),c=await a.parseUrl(n.tokenEnvVar?o.env[n.tokenEnvVar]:void 0),l=a.cloneOptions(c),u=se(V(V({},n),l),{env:V(V({},n.env),l.env)}),d=await Ip(r,r.cliHost,e.rootFolderPath,u,i.output,s.output),f=(p=d.gitClone)==null?void 0:p.then(()=>a.postClone(c,o,e.rootFolderPath,i.output));return{gitClone:async()=>{i.flush(),await f},gitUnshallow:async()=>{i.flush(),s.flush(),await d.gitUnshallow}}}function vn(t){return{repositoryPath:t,fullRepositoryName:nm(t),repositoryName:qJ(t),workspaceFolder:t1,volumeDestination:pb(),oldVolumeName:$J(t),alreadyCloned:!1,imageName:jJ(t),uniqueVolumeName:UJ(t),getWorkspaceConfiguration:(e,r)=>BJ(e,r),getOldWorkspacePath:o1,cloneAndInitializeRepository:HJ,getConfigurationFromImage:n1,gitUrlHandler:Sc(t),gitUrlInfo:uo(t)}}function nm(t){let e=uo(t);return e==null?void 0:e.fullRepositoryName}function qJ(t){let e=uo(t);return e==null?void 0:e.repositoryName}function pb(){return"/workspaces"}function $J(t){let e=nm(t);return`vsc-${Mn.posix.basename(e)}-${hb(t)}`}function jJ(t){let e=nm(t),r=hb(t),n=Mn.posix.basename(e);return FC(`vsc-${n}-${r}`)}function UJ(t){let e=uo(t),r="";e&&e.repositoryName&&(r=e.repositoryName,e.ref?r=`${r}-${e.ref.replace(/\//g,"-")}`:e.pullRequestId&&(r=`${r}-pull-${e.pullRequestId}`));let n=hb(t);return`${r}-${n}`}function hb(t){return e1.createHash("md5").update(t).digest("hex")}function BJ(t,e){let r=t1(t),n=`type=volume,src=${e},dst=${pb()}`;return{workspaceFolder:r,workspaceMount:n}}function t1(t){return Mn.posix.join(`${pb()}`,`${t}`)}async function HJ(t,{folder:e,cloneInfo:r},n,o,i){var u;await GJ(t);let{containerId:s,shellServer:a}=await VJ(t,n,o,e,i,t.configProvider,r),{config:c}=await n1(t,n,e,i,a),l=(u=n.gitUrlHandler)==null?void 0:u.installExtension();if(l){let d=c.customizations||(c.customizations={}),f=d.vscode||(d.vscode={}),p=f.extensions||(f.extensions=[]);p.includes(l)||p.push(l)}return{repository:n,volumeName:o,containerId:s,shellServer:a,config:c}}async function VJ(t,e,r,n,o,i,s){let{common:a}=t,{output:c,loadNativeModule:l}=a,u=e.fullRepositoryName,d,f,p,h;t.common.progress(ir.CloningRepository);let m=ub(e,r,n,t.buildContainerRunArgs);n?(c.write(`Cloning Github repository: ${u} into ${e.workspaceFolder(n)}
\r`),d=`fatal: destination path '${e.workspaceFolder(n)}' already exists`,h=e.workspaceFolder(n),p=`Repository '${u}' was already cloned into '${e.workspaceFolder(n)}'.
\r`):(c.write(`Cloning Github repository: ${u} into volume ${r}
\r`),d=`fatal: destination path '${u}' already exists`,h=`${u}`,p=`Repository '${u}' was already cloned into volume.`);let g=e.gitUrlHandler;if(!g)throw new we({description:"Could not analyze the URL."});s?f=g.cloneOptions(s):f={url:e.repositoryPath};let{stdout:v}=await Ke(t,...m),y=v.toString().trim(),b=vc(t,y,"root"),C=await Lo(b,c),_,P,S=Promise.resolve(),k;if(!a.cliMode){let j=await Ql(a,{remoteExec:b,user:"root",nodeExecutable:"node",shellServer:C});_=j.remoteContainersCLI,P=j.remoteEnv,S=j.ready,k=j.mrpcExec}let T=await gu(t,y,"root",l),A=Si("container",h,{},await k||b,T,()=>{throw new Error("not implemented")},void 0,c);try{a.cliMode||(t.common.isCopyGitConfigEnabled&&(await Us(t.common,{homeFolder:"/root",shellServer:C},[".gitconfig"],"git"),await dh(t.common,{homeFolder:"/root",shellServer:C},{})),await lc({shellServer:C,nodeExecutable:"node"},_,c,"global"),await Us(t.common,{homeFolder:"/root",shellServer:C},[".ssh","known_hosts"],"ssh"),await S);let j=au(a),J=await Ip(a,A,h,se(V({},f),{env:V(V({},P),f.env)}),c,j.output);if(await J.gitClone,J.gitUnshallow&&(a.backgroundTasks.push(J.gitUnshallow.then(()=>{})),J.gitUnshallow.then(j.flush,j.flush)),J.gitClone&&s)try{await g.postClone(s,A,h,c)}catch{return mb(t,y,`Failed to checkout the repository ${s.urlToClone}.`)}}catch(j){let J=j&&(j.cmdOutput||j.stack||j.message)||String(j);if(J=J.replace(wi,""),J.replace(/[\r\n]+/gm,"").includes(d))c.write(p),e.alreadyCloned=!0;else return mb(t,y,`Git clone failed. ${J}`)}let{configRaw:F}=await r1(t,e,n,o,C);if(!Di(F)&&i){c.write(`Repository ${u} has no development container files.
\r`);let j=!0;for(;j;){let J=await i.createConfiguration(h,A);if(J)j=!1;else if(J=await i.showError("You must select a container configuration since the repository does not contain a dev container configuration. Without a dev container configuration the container cannot be started.","Select Configuration"),J!=="Select Configuration")return mb(t,y,"Cancelled container configuration selection.")}}return{containerId:y,shellServer:C}}function ub(t,e,r,n=[]){return r?["run","-d","--mount",`type=volume,src=${e},dst=${t.volumeDestination}`,"-v","/var/run/docker.sock:/var/run/docker.sock",...n,`${gb}`,"sleep","infinity"]:["run","-d","--mount",`type=volume,src=${e},dst=${t.fullRepositoryName}`,"-v","/var/run/docker.sock:/var/run/docker.sock",...n,`${gb}`,"sleep","infinity"]}function mb(t,e,r){throw e&&Ke(t,"rm","-f",e),new we({description:r})}async function r1(t,e,r,n,o){let i,s;if(r?s=e.workspaceFolder(r):s=`${o1(e.repositoryPath)}`,n)return i=(await o.exec(`cat ${n.path} 2>/dev/null`,{logOutput:!1})).stdout,{configRaw:i&&Ve(i),configFile:n,workspaceFolder:s};if(n=await Lu([e.repositoryPath],t.userRepositoryConfigurationPaths),n&&(i=(await Oe(n.fsPath)).toString()),!n)for(let a of hc(Mn.posix,s))try{i=(await o.exec(`cat ${a} 2>/dev/null`,{logOutput:!1})).stdout,n=be.from({scheme:"vscode-remote",path:a});break}catch{}return n||(n=await Lu([e.repositoryPath],[Nu]),n&&(i=(await Oe(n.fsPath)).toString())),{configRaw:i&&Ve(i),configFile:n,workspaceFolder:s}}async function n1(t,e,r,n,o){let{configRaw:i,configFile:s,workspaceFolder:a}=await r1(t,e,r,n,o);if(!s||!i)throw new we({description:"The repository does not have a 'devcontainer.json' configuration file."});let{common:c,configUpdater:l}=t,{cliHost:u,output:d}=c,f=pu(V({},i)),p=f;l&&(f.configFilePath=s,p=l(f),delete p.configFilePath);let h=rh({platform:u.platform,configFile:s,env:u.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:a},p);return h.configFilePath=s,("workspaceMount"in h||"workspaceFolder"in h)&&d.write("The options 'workspaceMount' or 'workspaceFolder' are ignored when cloning a repository into a volume."),{workspaceFolder:a,config:h}}function o1(t){return`/workspaces/${Mn.posix.basename(nm(t))}`}var gb="vsc-volume-bootstrap";var vb="bootstrap.Dockerfile",WJ="volume.Dockerfile";async function GJ(t){let{common:e,development:r}=t,{cliHost:n,output:o}=e,i=e.package.version,s=n.path.join(await n.tmpdir(),"vsch","bootstrap-image",r?`${i}-dev-${Date.now()}`:i),a=n.path.join(s,vb),c=!await n.isFolder(s);if(!c&&!await n.isFile(a)){let u="Removing incomplete bootstrap-image folder.",d=o.start(u),f=`${s}-${Br()}`;await n.rename(s,f),await n.rm(f,{recursive:!0,force:!0}),c=!await n.isFolder(s),o.stop(u,d)}if(c){let u=`${s}-${Br()}`,d=n.path.join(u,".vscode-remote-containers","dist",`dev-containers-cli-${i}`);await n.mkdirp(n.path.join(d,"dist","spec-node")),await n.writeFile(n.path.join(u,vb),await Oe(Mn.join(e.extensionPath,"scripts",vb))),await n.writeFile(n.path.join(d,"package.json"),await Oe(Mn.join(e.extensionPath,"package.json"))),await n.writeFile(n.path.join(d,"dist","spec-node","devContainersSpecCLI.js"),await Oe(Mn.join(e.extensionPath,"dist","spec-node","devContainersSpecCLI.js")));let f=Xs(e.extensionPath),p=n.path.join(d,"dist","node_modules","vscode-dev-containers","container-features");await Zs(f,n,p,o),await n.rename(u,s)}await Ah(t,...["build","-f",a,"-t",gb,s])}async function KL(t){let{common:e,development:r}=t,{cliHost:n,output:o}=e,i=e.package.version,s=n.path.join(await n.tmpdir(),"vsch","inspect-volume",r?`${i}-dev-${Date.now()}`:i),a=n.path.join(s,WJ),c=!await n.isFolder(s);if(!c&&!await n.isFile(a)){let l="Removing incomplete inspect-volume folder.",u=o.start(l),d=`${s}-${Br()}`;await n.rename(s,d),await n.rm(d,{recursive:!0,force:!0}),c=!await n.isFolder(s),o.stop(l,u)}if(c){let l=`${s}-${Br()}`;await Zs(Mn.join(e.extensionPath,"scripts","inspect-volume"),n,l,o),await n.rename(l,s)}return s}async function YL(t,e,r){let n=[`vsch.local.repository=${e.repositoryPath}`];return r?r===wn?(r=e.uniqueVolumeName,n.push("vsch.local.repository.unique=true")):n.push("vsch.local.repository.unique=false"):(r=e.oldVolumeName,n.push("vsch.local.repository.unique=false")),e.gitUrlInfo.ref&&n.push(`vsch.local.repository.branch=${e.gitUrlInfo.ref}`),e.gitUrlInfo.pullRequestId&&n.push(`vsch.local.repository.pullRequestId=${e.gitUrlInfo.pullRequestId}`),(await ao(t)).indexOf(r)===-1&&await Ih(t,r,n),r}var om="vsch.local.repository",yb="vsch.local.repository.volume",wb="vsch.local.repository.folder";function JL(t,e,r,n){return r?{labels:[`${om}=${e}`,`${yb}=${n}`,`${wb}=${r}`],remoteWorkspaceFolder:t.workspaceFolder(r)}:{labels:[`${om}=${e}`],remoteWorkspaceFolder:t.getOldWorkspacePath(e)}}async function QL(t,e,r){let{loadNativeModule:n,output:o}=t.common,i=vc(t,e,"root"),s=await gu(t,e,"root",n),a=Si("container",r,{},i,s,()=>{throw new Error("not implemented")},"node",o);return{cliHost:a,dockerCLI:"docker",dockerComposeCLI:co({exec:a.exec,env:{},output:o},"docker","docker-compose"),dockerComposePath:"docker-compose",env:{},output:o}}var db="devcontainer.local_folder",em="vsch.local.volume",tm="/volume",rm="vsch.quality",fb="vsch.local.folder";async function XL(t,e,r,n,o,i,s,a,c,l,u,d,f,p){let{common:h}=t,m,g;try{let v=!l,y;return m=async()=>y||(y=(async()=>{let b=V(V({},e.env),Ot(e.env)),C={cliHost:e.cliHost,env:b,extensionPath:h.extensionPath,appRoot:h.appRoot,package:h.package,output:h.postCreate.output},_=await Jh(C,s,f,h.getLogLevel(),p,h.cliMode);return Wh(_.featuresConfiguration)})()),g=await _c(t,a.Id,o.workspaceFolder,n.remoteUser),u&&l&&o.workspaceFolder&&g.user!=="root"&&(g.launchRootShellServer?await uh(g,g.launchRootShellServer,o.workspaceFolder,n.configFilePath.path):h.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files.")),await KJ(a,c,t,e,g,n,m,r,v,i,s,d,f,p)}catch(v){throw zJ(v,a,t,g,n)}}function zJ(t,e,r,n,o){let i=t instanceof we?t:new we({description:"An error occurred setting up the container.",originalError:t});return e&&(i.manageContainer=!0,i.params=r.common,i.containerId=e.Id,i.dockerParams=r),n&&(i.containerProperties=n),o&&(i.config=o),i}async function KJ(t,e,r,n,o,i,s,a,c,l,u,d,f,p){var k,T;let{common:h}=r,m=zt(h.cliHost,o.shellServer);c||await Sh(r,m,i);let g={cwd:l,dockerCLI:r.dockerCLI,env:h.env,containerId:t.Id,user:o.user,sessionId:h.sessionId,shutdownAction:i.shutdownAction,logLevel:h.getLogLevel(),delay:1e4},{shutdownArgs:v}=await Kh(r,m,"singleContainer",g,c?i:void 0),{hostOrContainerPort:y,hostPortServer:b,connectionToken:C,webConnectionToken:_,remoteEnv:P,serverDownloaded:S}=await lh(h,o,i,s,((T=(k=i.customizations)==null?void 0:k.vscode)==null?void 0:T.devPort)||ki,Yh(r,n,u,t.Id,e,f,p));return v.hostPortServer=b,bc(h,o,y,C,_,t,a),{params:h,properties:o,config:i,resolvedAuthority:{host:Ni,port:y,connectionToken:C,extensionHostEnv:P},webConnectionToken:_,tunnelInformation:h.isLocalContainer?Ec(t):{},dockerParams:r,dockerContainerId:t.Id,serverDownloaded:S}}function Pc(t){let e=t.Config.Labels||{},r=e[db]||e[fb];return r||void 0}function ea(t){let e=(t.Config.Labels||{})[om];return e||void 0}function im(t){let e=(t.Config.Labels||{})[yb];return e||void 0}function i1(t){let e=(t.Config.Labels||{})[em];return e||void 0}function s1(t){let e=(t.Config.Labels||{})[wb];return e||void 0}function ZL(t,e){throw t.write(Ne(e)),new Error(e)}var a1=K(require("path"));async function c1(t,e,r,n,o,i){let s,a=new Promise(h=>s=h),c=new DC,l=[],u=await xO("vscode-remote-containers",async(h,m)=>{let g=await kO(h),v=[];if(g.type==="poll")try{v=await c.dequeue(6e4)}catch{}else if(g.type==="reply"){let y=l[g.sequence];y&&(y(g.reply),delete l[g.sequence])}else g.type==="done"&&s?s():g.type==="log"&&n.event(g.event);m.write(JSON.stringify(v)),m.end()});u.server.unref();let d=a1.join(r,"dist","shutdown","shutdownMonitorProcess"),f=[u.ipcHandlePath,t,ie[e],o||"",i.getTime().toString()];n.write(`Forking shutdown monitor: ${d} ${f.join(" ")}\r
`);let p=FD(d,f,{stdio:["ignore","ignore","ignore","ipc"],detached:!0,execArgv:[]});return p.on("error",h=>{console.error(h)}),p.unref(),{queue:c,sequence:0,replies:l,done:a}}async function sm(t,e,r){let n=t.sequence++,o=new Promise(s=>t.replies[n]=s);return t.queue.push({type:"configure",sequence:n,options:e}),await o}async function l1({queue:t,done:e}){t.push({type:"cleanup"}),await e}var d1=K(require("util"));var qu=K(require("string_decoder"));var wn="__UNIQUE__",Ni="127.0.0.1";function kc(t,e){let r=t.platform==="win32"&&!t.env.SSH_AUTH_SOCK?qw:t.type==="wsl"?t.env.SSH_AUTH_SOCK:void 0,n={DOCKER_CONTEXT:"default"};return e&&("context"in e?n.DOCKER_CONTEXT=e.context:(e.host&&(e.host.startsWith("ssh://")&&t.type==="ssh"?n.VSCODE_DOCKER_HOST=e.host:n.DOCKER_HOST=e.host),e.certPath&&(n.DOCKER_CERT_PATH=e.certPath),e.tlsVerify&&(n.DOCKER_TLS_VERIFY=e.tlsVerify))),r&&(n.SSH_AUTH_SOCK=r),n}function Li(t){let e;if(t.DOCKER_CONTEXT&&t.DOCKER_CONTEXT!=="default")e={context:t.DOCKER_CONTEXT};else{e={};let r=t.VSCODE_DOCKER_HOST||t.DOCKER_HOST;r&&(e.host=r),t.DOCKER_CERT_PATH&&(e.certPath=t.DOCKER_CERT_PATH),t.DOCKER_TLS_VERIFY&&(e.tlsVerify=t.DOCKER_TLS_VERIFY),Object.keys(e).length||(e=void 0)}return e}function am(t,e){e&&("context"in e&&e.context&&t.write(`Context: ${e.context}\r
`),"host"in e&&e.host&&t.write(`Host: ${e.host}\r
`),"certPath"in e&&e.certPath&&t.write(`CertPath: ${e.certPath}\r
`),"tlsVerify"in e&&e.tlsVerify&&t.write(`TLSVerify: ${e.tlsVerify}\r
`))}function cm(t){return!t.VSCODE_DOCKER_HOST&&!t.DOCKER_HOST&&(!t.DOCKER_CONTEXT||t.DOCKER_CONTEXT==="default")}function xc(t){return t&&("context"in t||t.host)?` @ ${"context"in t?t.context:t.host}`:""}async function zr(t,e){try{return await Pr(t,e)}catch{return}}function bc(t,e,r,n,o,i,s){let a=i.Ports.filter(f=>!!f.PublicPort),c="";if(t.authority&&s){let f=s.isWorkspaceFile?"workspace":"folder",p=e.remoteWorkspaceFolder||"/",h=s.isWorkspaceFile?Kr.posix.join(p,t.cliHost.path.basename(s.workspaceOrFolderPath)):p;c=`&${f}=${encodeURIComponent(`vscode-remote://${t.authority}${h}`)}`}let l=[...a.length?["Published Ports:"]:[],...a.map(f=>`${f.PrivatePort}/${f.Type} -> ${f.IP}:${f.PublicPort}`),...a.length?[""]:[],...t.web?[`VS Code Web: http://localhost:${r}?tkn=${n||o}${c}`,""]:[]],u=l.reduce((f,p)=>Math.max(p.length,f),0),d="-".repeat(u);u>0&&t.output.write(`\r
\r
${d}\r
${l.join(`\r
`)}${d}\r
\r
`)}async function lm(t){let{common:e}=t,{output:r}=e,n="Check Docker is running",o=r.start(n);try{let{stdout:i}=await Ke(t,"version","--format","{{.Server.APIVersion}}"),s=i.toString();if(s.toLowerCase().indexOf("cannot connect")!==-1)throw new Error(s);r.write(`Server API version: ${s.trim()}`)}catch(i){console.error(i);let s=i&&(i.stderr?i.stderr.toString():i.message)||"";s&&r.write(Ne(s));let a="Docker returned an error. Make sure the Docker daemon is running and select an option how to proceed.",c=i&&(i.stderr?i.stderr.toString().toLowerCase():i.message)||"";throw c.indexOf("permission denied")!==-1?c.indexOf("ssh")!==-1?a="Cannot connect to Docker daemon using 'ssh'. Make sure public/private keys are set up for connecting without keyboard interaction.":a="Current user does not have permission to run 'docker'. Try adding the user to the 'docker' group.":c.indexOf("ENOENT")!==-1&&(a="The 'docker' command was not found. Make sure Docker is installed."),new we({description:a,originalError:`Docker returned an error code ${i.code}, message: ${i.message}`})}finally{r.stop(n,o)}}function Yt(t){return t.hostPath!==void 0}function yn(t){return t.repositoryPath!==void 0}function Fu(t){return!yn(t)&&t.volumeName!==void 0}function Cn(t){let e=p1("dev-container",t);if(!!e)return typeof e=="string"?{hostPath:e}:"repositoryPath"in e?e.dockerHost?{repositoryPath:e.repositoryPath,settings:{host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`,cloneInfo:e.cloneInfo}}:e:"hostPath"in e&&e.dockerHost?{hostPath:e.hostPath,settings:{host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`}}:e}function $u(t,e,r,n){let o=r?JSON.stringify({hostPath:t,localDocker:n,settings:r}):t;return`vscode-remote://dev-container+${Buffer.from(o,"utf8").toString("hex")}${e}`}function ta(t,e,r,n,o,i){if(t){let a=vn(t);if(!e){let l=JSON.stringify({repositoryPath:t,settings:o,cloneInfo:i,inspectVolume:n});return`vscode-remote://dev-container+${Buffer.from(l,"utf8").toString("hex")}${a.getOldWorkspacePath(t)}`}let c=JSON.stringify({repositoryPath:t,volumeName:e,folder:r,settings:o,cloneInfo:i,inspectVolume:n});return`vscode-remote://dev-container+${Buffer.from(c,"utf8").toString("hex")}${a.workspaceFolder(r)}`}let s=JSON.stringify({volumeName:e,settings:o});return`vscode-remote://dev-container+${Buffer.from(s,"utf8").toString("hex")}${tm}`}function um(t){let e=p1("attached-container",t);if(!!e)return typeof e=="string"?{containerId:e}:(e.dockerHost&&(e.settings={host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`},delete e.dockerHost),e)}function f1(t,e,r){let n=JSON.stringify({containerName:t,settings:e,cwd:r});return`attached-container+${Buffer.from(n,"utf8").toString("hex")}`}function p1(t,e){try{let[r,n]=e.split("+"),o=r===t&&n?Buffer.from(n,"hex").toString("utf8"):void 0;return o?o.startsWith("{")?JSON.parse(o):o:void 0}catch(r){console.warn(r);return}}async function h1(t,e,r,n=!1){return!n&&await gw(t,e,r)||e}function m1(t,e,r){let n=t.path.relative(t.path.dirname(e),r);return`/workspaces/${t.platform==="win32"?n.replace(/\\/g,"/"):n}`}function g1(t,e,r){if(t==="win32")return e;let n=`${JJ(r,"/")}/`;return(t==="linux"?e.startsWith(n):e.toLowerCase().startsWith(n.toLowerCase()))&&(e=`~/${e.substr(n.length)}`),e}function JJ(t,e){if(e.length===0)return t;for(;t.endsWith(e);)t=t.substr(0,t.length-e.length);return t}function EO(t,e){return t.with({path:Kr.posix.resolve(t.path,e)})}async function Kh(t,e,r,n,o){let{common:i,onRemoveOnShutdownChanged:s}=t;if(i.cliMode)return{shutdownArgs:{},doneWithDocuments:Promise.resolve()};let a=i.output.start("Setup shutdown monitor"),c=await c1(r,i.getLogLevel(),i.extensionPath,i.output,i.logFilePath?Kr.dirname(i.logFilePath):void 0,i.sessionStart);sm(c,n,i.output).catch(f=>console.error(f)),s&&s(async f=>{n.rebuild=!!f,n.delay=0,await sm(c,n,i.output)}),i.onDidChangeLogLevel(async f=>{n.logLevel=f,await sm(c,n,i.output)});let l={},u=async()=>{let f=l1(c);l.hostPortServer&&await(0,d1.promisify)(l.hostPortServer.close.bind(l.hostPortServer))(),await f};i.shutdowns.push(u);let d=o?CO(t,e,o).catch(console.error):Promise.resolve();return i.output.stop("Setup shutdown monitor",a),{monitor:c,shutdownArgs:l,doneWithDocuments:d}}function Ec(t){return{environmentTunnels:t.Ports.filter(e=>!!e.PublicPort).map(e=>({remoteAddress:{port:e.PrivatePort,host:e.IP},localAddress:e.IP+":"+e.PublicPort}))}}async function _c(t,e,r,n,o){let{common:i}=t,s="Inspecting container",a=i.output.start(s),c=await Pr(t,e);i.output.stop(s,a);let l=n||c.Config.User||"root",[,u,,d]=/([^:]*)(:(.*))?/.exec(l),f=QJ(c.Config.Env),p=vc(t,e,l),h=await gu(t,e,l,i.loadNativeModule),m=vc(t,e,"root"),g=c.Mounts.find(b=>b.Type==="volume"&&b.Name==="vscode"),v=c.Mounts.find(b=>b.Type==="bind"&&b.Source===i.localCacheFolder),y=g&&Kr.posix.join(g.Destination,/^\.*(.*)$/.exec(i.product.serverDataFolderName)[1])||(v==null?void 0:v.Destination);return sh({params:i,createdAt:c.Created,startedAt:c.State.StartedAt,sharedDataFolder:y,sharedDataFolderIsLocalCacheFolder:!g&&!!v,remoteWorkspaceFolder:r,containerUser:u==="0"?"root":u,containerGroup:d,containerEnv:f,remoteExec:p,remotePtyExec:h,remoteExecAsRoot:m,rootShellServer:o})}function QJ(t){return(t||[]).reduce((e,r)=>{let n=r.indexOf("=");return n!==-1&&(e[r.substr(0,n)]=r.substr(n+1)),e},{})}async function v1(t){let{common:e,dockerCLI:r,dockerComposeCLI:n,dockerComposePath:o,dockerEnv:i}=t,{cliHost:s,output:a}=e;return{cliHost:s,dockerCLI:r,dockerComposeCLI:n,dockerComposePath:o,env:i,output:a}}async function y1(t,e){return t.type==="local"&&e?t.path.join(e,"data"):t.path.join(await t.homedir(),".vscode-remote-containers","data")}async function Zs(t,e,r,n){await e.mkdirp(r);let o=u1.c({cwd:t,filter:l=>(console.log(l),!0)},["."]),i=new Promise((l,u)=>{o.on("error",u),o.on("finish",l)}),s=await e.exec({cmd:"tar",args:["--no-same-owner","-x","-f","-"],cwd:r,output:n}),a=new qu.StringDecoder;s.stdout.on("data",l=>{n.write(a.write(l))});let c=new qu.StringDecoder;s.stderr.on("data",l=>{n.write(Ne(c.write(l)))}),o.pipe(s.stdin),await s.exit,await i}async function Mu(t,e){let{cliHost:r,env:n,appRoot:o,postCreate:i,output:s}=t,a=await ZJ(t),c=r.type==="local"?no?Yw:process.argv[0]:r.nodeExecutable||(()=>{throw new Error("nodeExecutable required")})(),l;return await XJ({exec:r.exec,cwd:a.cwd,cmd:c,args:[a.script,...e],env:V(V(V({},n),r.type==="local"?o?{NODE_PATH:`${r.path.join(o,"node_modules.asar")}${Kr.delimiter}${r.path.join(o,"node_modules")}`}:void 0:r.type==="container"?void 0:{NODE_PATH:r.path.join(r.path.dirname(c),"node_modules")}),no?{TS_NODE_PROJECT:void 0}:{}),stdin:i==null?void 0:i.onDidInput,output:s,stdoutData:u=>l=u,stderrData:u=>{s.event(u)}}),l}async function XJ(t){let{exec:e,cmd:r,args:n,cwd:o,env:i,stdin:s,output:a,stdoutData:c,stderrData:l}=t,u=await e({cmd:r,args:n,cwd:o,env:i,output:a});return new Promise((d,f)=>{let p=new qu.StringDecoder,h="";u.stdout.on("data",y=>{h+=p.write(y);let b=h.split(`
`);h=b.pop();for(let C of b)if(C.trim())try{c(JSON.parse(C))}catch{a.write(C)}}),u.stdout.on("error",y=>{if((y==null?void 0:y.code)!=="ENOTCONN")throw y});let m=new qu.StringDecoder,g="";u.stderr.on("data",y=>{g+=m.write(y);let b=g.split(`
`);g=b.pop();for(let C of b)if(C.trim())try{l(JSON.parse(C))}catch{a.write(C)}}),u.stderr.on("error",y=>{if((y==null?void 0:y.code)!=="ENOTCONN")throw y});let v=[];u.exit.then(({code:y})=>{try{v.forEach(b=>b.dispose()),y?(a.write(`Exit code ${y}`),f({message:`Command failed: ${r} ${(n||[]).join(" ")}`,code:y})):d()}catch(b){f(b)}},f),typeof s=="function"&&v.push(s(y=>u.stdin.write(y)))})}async function ZJ(t){let{cliHost:e,extensionPath:r,output:n}=t,o=Kr.join(r,...no?["node_modules","@devcontainers","cli","src"]:["dist"],"spec-node",`devContainersSpecCLI.${no?"t":"j"}s`),i=e.type==="local"?r:e.path.join(await e.homedir(),".vscode-remote-containers","dist",`dev-containers-cli-${t.package.version}`),s=e.type==="local"?o:e.path.join(i,"dist","spec-node","devContainersSpecCLI.js");if(["wsl","ssh"].indexOf(e.type)!==-1&&!await e.isFile(s)){let a=`${i}-${Br()}`,c=e.path.join(a,"dist","spec-node","devContainersSpecCLI.js");await e.mkdirp(e.path.dirname(c)),await e.writeFile(e.path.join(a,"package.json"),await Oe(Kr.join(r,"package.json"))),await e.writeFile(c,await Oe(o));let l=Xs(r),u=e.path.join(a,"dist","node_modules","vscode-dev-containers","container-features");await Zs(l,e,u,n),await Zs(Kr.join(r,"scripts"),e,e.path.join(a,"scripts"),n),await e.rename(a,i)}return{cwd:i,script:s}}function Yh(t,e,r,n,o,i,s){return async(a,c,l,u)=>{let{common:d}=t,{cliHost:f}=e,p=V(V({},e.env),Ot(e.env)),h={cliHost:e.cliHost,env:p,extensionPath:d.extensionPath,appRoot:d.appRoot,package:d.package,postCreate:d.postCreate,output:d.postCreate.output},m=d.postCreate.output.dimensions||d.output.dimensions,g=await Mu(h,["run-user-commands",...e.cliHost.type==="local"&&d.persistedFolder?["--user-data-folder",d.persistedFolder]:[],...e.dockerCLI!=="docker"?["--docker-path",e.dockerCLI]:[],...e.dockerComposePath!=="docker-compose"?["--docker-compose-path",e.dockerComposePath]:[],...o?["--container-data-folder",dn(t.common.product.serverDataFolderName)]:[],...o?["--container-system-data-folder",cc(t.common.product.serverDataFolderName)]:[],"--workspace-folder",r,"--container-id",n,"--log-level",yi(d.getLogLevel()),"--log-format","json",...i?["--config",_e(i,f.platform)]:[],...s?["--override-config",_e(s,f.platform)]:[],"--default-user-env-probe",d.defaultUserEnvProbe,"--skip-non-blocking-commands",String(a),"--prebuild",String(l),"--stop-for-personalization",String(c),...[].concat(...Object.keys(u).map(v=>["--remote-env",`${v}=${u[v]}`])),"--mount-workspace-git-root",String(!d.cliMode),...m?["--terminal-columns",String(m.columns),"--terminal-rows",String(m.rows)]:[]]);if((g==null?void 0:g.outcome)!=="success")throw new we({description:`devcontainer command failed: ${g?JSON.stringify(g):"data missing"}`});return g.result}}async function Jh(t,e,r,n,o,i=!1){let{cliHost:s,output:a}=t,c=await Mu(t,["read-configuration","--workspace-folder",e,"--log-level",yi(n),"--log-format","json",...r?["--config",_e(r,s.platform)]:[],...o?["--override-config",_e(o,s.platform)]:[],"--include-features-configuration","--mount-workspace-git-root",String(!i),...a.dimensions?["--terminal-columns",String(a.dimensions.columns),"--terminal-rows",String(a.dimensions.rows)]:[]]);return c.configuration.configFilePath=be.revive(c.configuration.configFilePath).with({scheme:s.type==="local"?"file":wt.scheme}),c}var dt=K(require("vscode"));var ra={id:"openDocumentation",title:"Open Documentation",isLastAction:!1,applicable:(t,e)=>!e,execute:async t=>{await dt.env.openExternal(dt.Uri.parse("https://aka.ms/vscode-remote/container/resolve-failed"))}},na={id:"reloadWindow",title:"Reload Window",isLastAction:!0,applicable:(t,e)=>!e&&t.data.reload!==!1,execute:async t=>{t.manageContainer&&t.dockerParams&&t.containerId&&await Ke(t.dockerParams,"stop","-t","0",t.containerId),await dt.commands.executeCommand("workbench.action.reloadWindow")}},w1={id:"rebuildContainer",title:"Rebuild Container",isLastAction:!0,applicable:(t,e)=>t.manageContainer&&!!t.dockerParams&&!!t.containerId&&!e,execute:async t=>{await Ke(t.dockerParams,"rm","-f",t.containerId),await dt.commands.executeCommand("workbench.action.reloadWindow")}},Ic={id:"openRecent",title:"Open Recent...",isLastAction:!0,applicable:(t,e)=>!e,execute:async t=>{await dt.commands.executeCommand("workbench.action.openRecent")}},C1={id:"startContainer",title:"Start Container",isLastAction:!0,applicable:t=>!!t.dockerParams&&!!t.containerId&&t.data.start===!0,execute:async t=>{await Ke(t.dockerParams,"start",t.containerId),await dt.commands.executeCommand("workbench.action.reloadWindow")}},b1={id:"chooseContainer",title:"Choose Container",isLastAction:!0,applicable:t=>t.data.attach===!0,execute:async()=>{await dt.commands.executeCommand("remote-containers.attachToRunningContainer")}},Fi={id:"closeRemote",title:"Close Remote",isLastAction:!0,applicable:(t,e)=>{if(!e)return!1;let r=dt.workspace.workspaceFile;return!(r&&r.scheme==="untitled"||dt.workspace.textDocuments.some(o=>o.isDirty))},execute:async t=>{await dt.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null})}},Tc=[{id:"retry",title:"Retry",isLastAction:!0,applicable:(t,e)=>e&&t.data.reload!==!1,execute:na.execute},{id:"moreActions",title:"More Actions...",isCloseAffordance:!0,isLastAction:!1,applicable:(t,e)=>e,execute:async t=>{}},{id:"learnMore",title:"Learn More",isLastAction:!1,applicable:(t,e)=>e&&!!t.data.learnMoreUrl,async execute(t){await dt.env.openExternal(dt.Uri.parse(t.data.learnMoreUrl))}}];async function Mi(t,e,r,n=!1,o){var f,p,h,m,g,v;let i=t instanceof we?t:new we({description:"An error occurred setting up the container.",originalError:t});if(o){o.show();let y=i.originalError&&(i.originalError.stack||i.originalError.message)||i.originalError;if(y!==void 0){o.log.write(Ne(String(y)));let b=(p=(f=i.originalError)==null?void 0:f.stdout)==null?void 0:p.toString().trim();b&&o.log.write(b);let C=(m=(h=i.originalError)==null?void 0:h.stderr)==null?void 0:m.toString().trim();C&&o.log.write(Ne(C)),((g=i.originalError)==null?void 0:g.code)&&o.log.write(`Exit code ${(v=i.originalError)==null?void 0:v.code}`)}}if(t.message.indexOf("Cancelled container configuration selection")!==-1)throw await dt.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),dt.RemoteAuthorityResolverError.NotAvailable(void 0,!1);let s=i.actions;s.length||(s=[ra]);let a=await s.reduce(async(y,b)=>await b.applicable(i,!0)?[...await y,b]:y,Promise.resolve([])),c=await dt.window.showErrorMessage(i.description,{modal:!0},...a);if(c&&(E1(r,e,c.id),await c.execute(i)),c&&c.isLastAction){if(n)throw dt.RemoteAuthorityResolverError.NotAvailable(void 0,!0);return}let l=await s.reduce(async(y,b)=>await b.applicable(i,!1)?[...await y,b]:y,Promise.resolve([])),u=l.map(y=>({label:y.title,action:y}));async function d(){let b=await(l.length?dt.window.showQuickPick(u,{ignoreFocusOut:!0,placeHolder:"Pick an action to help resolve the problem."}):Promise.resolve(void 0));b&&(E1(r,e,b.action.id),b.action.execute(i).catch(console.error),b.action.isLastAction||await d())}if(d().catch(console.error),n)throw dt.RemoteAuthorityResolverError.NotAvailable(void 0,!0)}function E1(t,e,r){t.sendTelemetryEvent("errorAction",{resolver:e,action:r})}var oe=K(require("vscode")),Xu=K(require("path")),eq=K(require("os"));var tq=K(gF()),Ui=K(ZM());var ire="remote.containers.defaultExtensions",ho="remote-containers.revealLogTerminal",dE="remote-containers.revealPostCreateTerminal",Zu="remote-containers.openDevContainerFile",rq="remote-containers.openRepositoryInVolume",Tm="remote-containers.openRepositoryInUniqueVolume",nq="remote-containers.openRepositoryFromRemoteHub",oq="remote-containers.openPullRequestInVolume",ed=oe.Uri.parse("https://aka.ms/vscode-remote/containers/folder-setup"),td=oe.Uri.parse("https://aka.ms/vscode-dev-containers"),iq=new Ew,ur={onRemoveOnShutdownChangedEmitter:iq,onRemoveOnShutdownChanged:iq.event,results:new Map},sa,mo=t=>MD(t,oe.env.appRoot);function Am(t,e,r,n){return async(o,i)=>{if(oe.commands.executeCommand("setContext","forwardedPortsViewEnabled",!0),i.resolveAttempt>1){let s=r.get(o);if(!s)throw new Error("Reconnect attempt without old result.");let a=`Reconnection attempt ${i.resolveAttempt-1}`,c=t.log.start(a),{cliHost:l}=s.params;if(l.reconnect)try{await l.reconnect()}catch(u){throw t.log.write(Ne(String(u&&(u.stack||u.message)||u))),oe.RemoteAuthorityResolverError.TemporarilyNotAvailable("Cannot reconnect to remote host.")}if(s.dockerContainerId){let u=await zr(s.dockerParams,s.dockerContainerId);if(!u)throw oe.RemoteAuthorityResolverError.NotAvailable("Container no longer exists.");if(u.State.Status==="paused")throw oe.RemoteAuthorityResolverError.TemporarilyNotAvailable("Container is paused.");if(u.State.Status!=="running")throw oe.RemoteAuthorityResolverError.NotAvailable("Container is no longer running.")}return t.log.stop(a,c),se(V({},s.resolvedAuthority),{isTrusted:s.isTrusted})}else{let s="Resolving Remote",a=t.log.start(s),c=await n(o,t,e);return sre(c.params,c.properties).catch(l=>{}),r.set(o,c),t.log.stop(s,a),oe.window.withProgress({location:oe.ProgressLocation.Window,title:Ere,cancellable:!1},async l=>{await IR(c.params.backgroundTasks)}).then(void 0,l=>{t.log.write(Ne(String(l&&(l.stack||l.message)||l)))}),se(V(V({},c.resolvedAuthority),c.tunnelInformation),{isTrusted:c.isTrusted})}}}async function sre(t,e){if(!e.nodeExecutable)return;let r=await Oe(Xu.join(t.extensionPath,"dist","node","remoteCloudGuesser.js"),{encoding:"utf8"}),{stdout:n}=await Mo(t,e,[e.nodeExecutable,"-e",r],void 0,{silent:!0}),o=n.toString().trim();t.sendTelemetryEvent("extraInfo",{remoteCloud:o})}var fE;async function are(t){return fE||(fE=so(Xu.join(__dirname,"..",".."),zo,t)),fE}var rd={};async function zo(t,e=!0){var r;if(t.counter&&((r=rd[t.prompt])==null?void 0:r.from)===t.counter&&delete rd[t.prompt],!rd[t.prompt]){if(!e)return"";rd[t.prompt]={result:Promise.resolve(oe.window.showInputBox({prompt:t.prompt||"Enter password",password:!0,ignoreFocusOut:!0}).then(n=>n||"")),from:t.counter}}return rd[t.prompt].result}async function We(t,e,r,n=!0,o=are(e),i=!0){let s=!r;if(s){if(ur.results.size){let g=[...ur.results.values()].filter(v=>v.dockerParams)[0];return v1(g.dockerParams)}if(sa)return sa}r&&typeof r!="string"&&"scheme"in r&&(r.scheme==="file"?r=r.fsPath:r=rc(r));let a;if(!r){let g=(oe.workspace.workspaceFolders||[])[0];if(oe.env.remoteName==="wsl")g?r=rc(g.uri):r={wslDistro:zp(oe.env.remoteAuthority),wslPath:"/"};else if(oe.env.remoteName==="ssh-remote"){let v=cre(oe.env.remoteAuthority);if(v){let{user:y,hostName:b,port:C}=v;a={host:`ssh://${y?`${y}@`:""}${b}${C?`:${C}`:""}`},g?r=g.uri.path:r="/"}}else(g==null?void 0:g.uri.scheme)==="file"&&(r=g.uri.fsPath);r||(r=process.cwd())}let c=a&&"host"in a&&a.host||void 0,l=n?jn():{executeInWSL:"never",defaultDistro:void 0},u=Nn(c,r,mo,l,t.extensionPath,Yo(),await ru(oe.env.appRoot),e,yo,{sshAskpassEnv:o,settings:qc()});i&&!await Promise.race([u,oo(1e3)])&&await oe.window.withProgress({location:oe.ProgressLocation.Notification,title:`[Setting up Remote-Containers (show log)](command:${ho} "Show details in terminal")`,cancellable:!1},async()=>{await u});let d=await u,f=$n(),p=go();if(!a){let g=oe.workspace.getConfiguration("docker"),v=g.get("context")||d.env.DOCKER_CONTEXT;if(!v){let y={cliHost:d,dockerCLI:f,dockerComposeCLI:co({exec:d.exec,env:{},output:ot},f,p),dockerComposePath:p,env:{},output:ot};v=await NC(y)||"default"}v&&v!=="default"?a={context:v}:(a=Li(d.env)||{},"context"in a||(pE(a,g,"host"),pE(a,g,"certPath"),pE(a,g,"tlsVerify"),Object.keys(a).length||(a=void 0)))}let h=V(V({},await o),kc(d,a)),m={cliHost:d,dockerCLI:f,dockerComposeCLI:co({exec:d.exec,env:h,output:e},f,p),dockerComposePath:p,env:h,output:e};return s&&(sa=m),m}var Dm;function sq(t){if(Dm)return Dm;let e=ure(t);return t.subscriptions.push(e),t.subscriptions.push(e.event(()=>{let r=sa==null?void 0:sa.cliHost;sa=void 0,(r==null?void 0:r.terminate)&&r.terminate()})),Dm=e.event,Dm}function cre(t){let e=/^ssh-remote\+(.*)$/.exec(t);if(!e)return;let r=e[1];try{let n=JSON.parse(Buffer.from(r,"hex").toString("utf8"));if(n&&n.hostName)return n}catch{}return{hostName:r}}function pE(t,e,r){let n=e.get(r);n&&(t[r]=n)}var lre=["remote.containers.dockerPath","remote.containers.executeInWSL","remote.containers.executeInWSLDistro","docker.context","docker.host","docker.certPath","docker.tlsVerify"];function ure(t){let e=new oe.EventEmitter,r=oe.workspace.onDidChangeConfiguration(async c=>{lre.some(l=>c.affectsConfiguration(l))&&e.fire()}),n,o,i,s=()=>{(async()=>{o||(o=await Nn(void 0,process.cwd(),mo,jn(),t.extensionPath,Yo(),void 0,ot,yo));let c={cliHost:o,dockerCLI:$n(),dockerComposeCLI:co({exec:o.exec,env:{},output:ot},$n(),go()),dockerComposePath:go(),env:{},output:ot},l=await NC(c);l===void 0?i=setTimeout(s,2*60*1e3):(l!==n&&(n!==void 0&&e.fire(),n=l),i=setTimeout(s,2*1e3))})().catch(console.error)};s();let a=e.dispose;return e.dispose=()=>{r.dispose(),i&&clearTimeout(i),a.call(e)},e}async function aa(){let t=oe.workspace.workspaceFolders;if((t==null?void 0:t.length)===1){let e=t[0].uri;return hE(e)}return null}async function hE(t){if(t&&t.scheme==="vscode-remote"&&/dev-container\+(.*)/.exec(t.authority)){let r=Cn(t.authority);if(Yt(r))return null;if(yn(r)&&r.inspectVolume&&r.inspectVolume===!0)return r}return null}function Rm(t){return{getConfigurationState:()=>t.get("configurationState"),updateConfigurationState:async e=>t.update("configurationState",e),containerOutdated:dre}}async function dre(t){let e="Rebuild",r="Ignore",n=await oe.window.showInformationMessage(`Configuration file(s) changed: ${t.join(", ")}. The container might need to be rebuilt to apply the changes.`,e,r);if(n===e)return oe.commands.executeCommand("remote-containers.rebuildContainer");if(n===r)return"ignore"}async function fre(t){return t?aq():Array.from(new Set([...oe.workspace.getConfiguration().get(ire)||[],...aq()]))}function aq(){let t=oe.env.language,e=t.indexOf("-"),r=cq(t)||(e!==-1?cq(t.substr(0,e)):void 0);return r?[r]:[]}function cq(t){let e=t.toLowerCase();return oe.extensions.all.filter(r=>{var o;let n=r.packageJSON&&r.packageJSON.contributes;return((o=n==null?void 0:n.localizations)==null?void 0:o.length)?!!n.localizations.find(i=>{var s;return((s=i==null?void 0:i.languageId)==null?void 0:s.toLowerCase())===e}):!1}).map(r=>r.id)[0]}function lq(){return!!oe.workspace.getConfiguration().get("workbench.enableExperiments")}function pre(){return!!oe.workspace.getConfiguration().get("remote.containers.enableWebAccess")}function Om(){return oe.workspace.getConfiguration().get("remote.containers.workspaceMountConsistency")||"cached"}function Nm(){return!!oe.workspace.getConfiguration().get("remote.containers.experimentalUpdateRemoteUserUIDOnMacOS")}function Lm(){var t;return(t=oe.workspace.getConfiguration().get("remote.containers.cacheVolume"))!=null?t:!0}function hre(){let t=oe.workspace.getConfiguration().get("remote.containers.copyGitConfig");return typeof t=="boolean"?t:!0}function mre(){return oe.workspace.getConfiguration().get("remote.containers.gitCredentialHelperConfigLocation")||"global"}function $n(){return oe.workspace.getConfiguration().get("remote.containers.dockerPath")||"docker"}function jn(){return{executeInWSL:mE(),defaultDistro:gE()}}function mE(){return process.platform!=="win32"?"never":oe.workspace.getConfiguration().get("remote.containers.executeInWSL",!1)?"always":"forWSLPath"}function gE(){if(process.platform==="win32")return oe.workspace.getConfiguration().get("remote.containers.executeInWSLDistro")||void 0}function go(){return oe.workspace.getConfiguration().get("remote.containers.dockerComposePath")||"docker-compose"}function Fm(){let t=oe.workspace.getConfiguration().get("remote.containers.logLevel")||"debug";return Sk(t)}var gre=t=>oe.workspace.onDidChangeConfiguration(e=>{e.affectsConfiguration("remote.containers.logLevel")&&t(Fm())});function vre(){let t=oe.workspace.getConfiguration();return{repository:(t.get("remote.containers.dotfiles.repository","")||t.get("dotfiles.repository","")).trim()||void 0,installCommand:(t.get("remote.containers.dotfiles.installCommand","")||t.get("dotfiles.installCommand","")).trim()||void 0,targetPath:(t.get("remote.containers.dotfiles.targetPath","")||t.get("dotfiles.targetPath","")).trim()||"~/dotfiles"}}function qc(){let t=oe.workspace.getConfiguration();return{executablePath:t.get("remote.SSH.path"),configFilePath:t.get("remote.SSH.configFile")}}function Ko(t,e,r,n,o,i,s){var u,d;let a={resolver:e,outcome:r};n&&(a.hostType=n.cliHost.type),o&&(a.configProperties=JSON.stringify(Object.keys(o)),a.configExtensions=JSON.stringify(((d=(u=o.customizations)==null?void 0:u.vscode)==null?void 0:d.extensions)||[]),a.configFeatures=JSON.stringify(Object.keys(o.features||{})),"image"in o?a.configType="image":mt(o)?a.configType="dockerfile":"dockerComposeFile"in o&&(a.configType="dockerCompose")),i&&(a.hardwareId=i.osRelease.hardware,a.osReleaseId=i.osRelease.id,a.osReleaseVersion=i.osRelease.version);let c=s&&s.originalError,l=c&&(c.stack||c.message||String(c))||s&&s.description;l&&(a.errorMessage=l),t.sendTelemetryEvent("resolver",a)}var uq=class{constructor(e){this.onClose=e;this.writeEmitter=new oe.EventEmitter;this.onDidWrite=this.writeEmitter.event;this.inputEmitter=new oe.EventEmitter;this.onDidInput=this.inputEmitter.event;this.queue=[];this.ready=!1}open(){this.ready=!0,this.queue.forEach(e=>this.writeEmitter.fire(e))}close(){this.ready=!1,this.onClose()}write(e){this.queue.push(e),this.ready&&this.writeEmitter.fire(e)}handleInput(e){this.inputEmitter.fire(e)}},Mm=class{constructor(e,r,n=void 0){this.sessionStart=r;this.outputTerminal=new uq(()=>this._terminal=void 0);this.onDidInput=this.outputTerminal.onDidInput;this._name="Dev Containers";this._revealOnNextOutput=!1;let o=i=>{this.outputTerminal.write(i),this.revealOnNextOutput&&(this.revealOnNextOutput=!1,this.show())};this.logFilePath=e?Xu.join(e,`remoteContainers-${r.toISOString().replace(/:/g,"-")}.log`):void 0,this.log=yre(o,Fm,this.logFilePath,r,n),Object.defineProperty(this.log,"dimensions",{get:()=>{var i;return(i=this._terminal)==null?void 0:i.dimensions}}),this.log.onDidChangeDimensions=i=>oe.window.onDidChangeTerminalDimensions(s=>{s.terminal===this._terminal&&i(s.dimensions)})}get name(){return this._name}set name(e){this._name=e}get revealOnNextOutput(){return this._revealOnNextOutput}set revealOnNextOutput(e){this._revealOnNextOutput=e}show(){this._terminal||(this._terminal=oe.window.createTerminal({name:this.name,pty:this.outputTerminal})),this._terminal.show()}dispose(){this._terminal&&this._terminal.dispose()}get shown(){return!!this._terminal}};function yre(t,e,r,n,o=void 0){let i=[];return r&&i.push(Pk(r,()=>Math.min(ie.Debug,e()))),i.push(kk(t,e,n)),or(xk(i,o))}async function vE(t,e){let r=await zr(t,e.Id);if(r&&r.State.Status==="running")try{await Ke(t,"stop",r.Id)}catch(n){oe.window.showErrorMessage(`Error stopping container: ${n.message}`)}}async function qm(t,e){let r=await zr(t,e.Id);if(r&&r.State.Status!=="running")try{await Ke(t,"start",r.Id)}catch(n){oe.window.showErrorMessage(`Error starting container: ${n.message}`)}}async function dq(t,e){try{await Ke(t,"rm",e)}catch(r){oe.window.showErrorMessage(`Error removing container: ${r.message}`)}}async function yE(t,e){try{await Ke(t,"volume","rm","--force",e)}catch(r){oe.window.showErrorMessage(`Error removing volume: ${r.message}`)}}function wre(){return oe.env.sessionId!=="someValue.sessionId"?oe.env.sessionId:`${oe.env.sessionId}_${Date.now()}`}function Cre(t,e){let r=oe.workspace.registerResourceLabelFormatter({scheme:"vscode-remote",authority:t.authority,formatting:{label:"${path}",separator:"/",workspaceSuffix:e,tildify:!0}});t.shutdowns.push(r.dispose.bind(r))}async function fq(t,e){if(t.globalState.get("removeOnStartup")===e)return await t.globalState.update("removeOnStartup",null),!0;let r=t.workspaceState.get("removeOnStartup",!1);return r&&await t.workspaceState.update("removeOnStartup",null),r}async function pq(t,e){await t.workspaceState.update("removeOnStartup",e)}async function wE(t,e){await t.globalState.update("removeOnStartup",e)}async function hq(t,e){return t.globalState.get("buildNoCache")===e?(await t.globalState.update("buildNoCache",null),!0):!1}async function nd(t,e){await t.globalState.update("buildNoCache",e)}async function od(t,e,r,n,o){await t.globalState.update("openEditorsOnStartup",{workspaceFolder:e,fileWithError:r==null?void 0:r.toString(),logFile:n,openLog:o})}async function mq(t){var r;let e=t.globalState.get("openEditorsOnStartup");if(e){await t.globalState.update("openEditorsOnStartup",void 0);let n=(r=oe.workspace.workspaceFolders)==null?void 0:r.some(i=>i.uri.fsPath===e.workspaceFolder||i.uri.path===e.workspaceFolder),o=await aa();if(n||o&&o.repositoryPath===e.workspaceFolder&&(n=!0),n){let i=e.fileWithError?be.parse(e.fileWithError):void 0;if(e.openLog==="onTheSide"&&await vq(i),e.openLog&&e.logFile){let s={viewColumn:e.openLog==="onTheSide"?oe.ViewColumn.Beside:oe.ViewColumn.One,preserveFocus:!0},a=await oe.window.showTextDocument(oe.Uri.file(e.logFile),s),c=new oe.Position(a.document.lineCount-1,0);a.selection=new oe.Selection(c,c),a.revealRange(a.selection)}return e.openLog!=="onTheSide"&&await vq(i),!0}}return!1}function gq(t){return[`vscode-remote:/workspaces/${t}/.devcontainer/devcontainer.json`,`vscode-remote:/workspaces/${t}/.devcontainer.json`]}async function vq(t){return t?oe.commands.executeCommand("vscode.open",oe.Uri.parse(t.toString()),{viewColumn:oe.ViewColumn.One}):oe.commands.executeCommand("remote-containers.openDevContainerFile",void 0,{viewColumn:oe.ViewColumn.One})}async function CE(t){if(ur.results.size)return[...ur.results.values()].filter(i=>i.config).map(i=>i.config.configFilePath);let e=vo(),r=oe.workspace.workspaceFolders||[],n=await Promise.all(r.map(async i=>{let s=Ue(t.path,_e(i.uri,t.platform));return await fo(t,s,e)})),o=oe.workspace.workspaceFile;if(o&&o.scheme!=="untitled"){let i=Ue(t.path,_e(o,t.platform)),s=await fo(t,i,e);s&&n.indexOf(s)===-1&&n.unshift(s)}return n.filter(i=>!!i)}function vo(){return oe.workspace.getConfiguration().get("remote.containers.repositoryConfigurationPaths")||[]}async function bre(t,e,r="localhost"){await oe.workspace.openTunnel({remoteAddress:{host:r,port:e}})}function yq(t,e){let r=new Mm(void 0,e);r.name="Configuring...",r.revealOnNextOutput=!0;let n=!1;r.onDidInput(()=>{n&&(n=!1,r.dispose())});let o,i={enabled:!0,skipNonBlocking:!1,output:qD(r.log,"postCreate",t),onDidInput:r.onDidInput,done:()=>{r.shown&&(r.log.raw("[1mDone. Press any key to close the terminal.[0m"),n=!0),o()},promise:new Promise(s=>o=s)};return{channel:r,postCreate:i}}async function $c(t){let{authority:e,extensionContext:r,sessionStart:n,progress:o,cliHost:i,env:s,cwd:a,isLocalContainer:c,telemetry:l,output:u,logFilePath:d,allowSystemConfigChange:f,postCreate:p}=t,h=pre(),m=se(V({computeExtensionHostEnv:!0},l),{appRoot:oe.env.appRoot,localCacheFolder:Yo(),extensionPath:r.extensionPath,webConnectionToken:void 0,sessionId:wre(),sessionStart:n,authority:e,cliHost:i,env:s,cwd:a,isLocalContainer:c,getAdditionalExtensionsToInstall:fre,isCopyGitConfigEnabled:hre(),credentialHelperConfigLocation:mre(),dotfilesConfiguration:vre(),progress:Sre(o),output:u,logFilePath:d,allowSystemConfigChange:f,defaultUserEnvProbe:"loginInteractiveShell",postCreate:p,getTelemetryLevel:()=>l.getTelemetryLevel(),forwardServerPort:!0,web:h,getLogLevel:Fm,onDidChangeLogLevel:gre,loadNativeModule:mo,shutdowns:[],forwardedPorts:new Set,backgroundTasks:[],setWorkspaceName:g=>Cre(m,g),openTunnel:bre,getTunnels:()=>Promise.resolve(oe.workspace.tunnels),onAdoptProcess:oe.window.onDidOpenTerminal,persistedFolder:await y1(i,r.globalStoragePath),alternateDownload:yo});return m}async function yo(t,e){let r=await oe.commands.executeCommand("_workbench.downloadResource",oe.Uri.parse(t));if(!r)throw new we({description:"Downloading the VS Code Server failed. Please try again later."});await Po(r.fsPath,e)}var jc=`[Starting Dev Container (show log)](command:${ho} "Show details in terminal")`,Ere=`[Configuring Dev Container](command:${dE} "Show details in terminal")`,_re={[ir.Begin]:"",[ir.CloningRepository]:"Cloning Repository",[ir.BuildingImage]:"Building image",[ir.StartingContainer]:"Starting container",[ir.InstallingServer]:"Installing server",[ir.StartingServer]:"Starting server",[ir.End]:""};function Yo(){return Xu.join(eq.tmpdir(),"vsch")}function Sre(t){let e=0;return r=>{let n=ir.End-r,o=(100-e)/(n+1);t.report({message:_re[r],increment:o}),e+=o}}async function wq(t,e,r){let{name:n,publisher:o,version:i,aiKey:s}=e;if(!s)return bk(e,r);let a=o?`${o}.${n}`:n,c=new tq.default(a,i,s);t.subscriptions.push(c);let l=new Cq(c),u=xre(r),d=lq()?(0,Ui.getExperimentationService)(a,i,u,l,t.globalState):void 0;return{sendTelemetryEvent:l.sendTelemetryEvent.bind(l),isCachedFlightEnabled:async f=>d&&lq()?d.isCachedFlightEnabled(f):!1,product:r,package:e,getTelemetryLevel:()=>c.telemetryLevel}}var Cq=class{constructor(e){this.baseReporter=e;this.sharedProperties={}}sendTelemetryEvent(e,r,n){this.baseReporter.sendTelemetryEvent(e,V(V({},this.sharedProperties),r),n)}setSharedProperty(e,r){this.sharedProperties[e]=r}postEvent(e,r){let n={};for(let[o,i]of r)n[o]=i;this.sendTelemetryEvent(e,n)}};function xre(t){switch(t.quality){case"stable":return Ui.TargetPopulation.Public;case"insider":return Ui.TargetPopulation.Insiders;case"exploration":return Ui.TargetPopulation.Internal;case void 0:return Ui.TargetPopulation.Team;default:return Ui.TargetPopulation.Public}}var id="Opening a folder in a Dev Container may execute arbitrary code both inside and outside the container.",bE="userConfirmedCloneRepositoryInDevContainerRequiresTrust";async function sd(t,e){if((e==null?void 0:e.toLowerCase().startsWith("https://github.com/microsoft/vscode-remote-try-"))||t.globalState.get(bE))return!0;let r="Got It",n="Learn More",o=await oe.window.showWarningMessage("Cloning a repository in a Dev Container may execute arbitrary code. ",{modal:!0,detail:"Only clone a repository in a Dev Container if you trust its authors."},r,n);return o===r?(await t.globalState.update(bE,!0),!0):(o===n&&oe.env.openExternal(oe.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}var EE="userConfirmedAttachToContainerRequiresTrust";async function Bi(t){if(t.globalState.get(EE))return!0;let e="Got It",r="Learn More",n=await oe.window.showWarningMessage("Attaching to a container may execute arbitrary code.",{modal:!0,detail:"Only attach to a container if you trust its origin."},e,r);return n===e?(await t.globalState.update(EE,!0),!0):(n===r&&oe.env.openExternal(oe.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}function bq(t){t.globalState.setKeysForSync([bE,EE,_E])}function Eq(){let t=process.env.PATH||"";process.platform==="darwin"&&!/(^|:)\/usr\/local\/bin(:|$)/i.test(t)&&(process.env.PATH=`${t}:/usr/local/bin`)}var _E="updatedToPreRelease2",Pre="2022-01-19T05:14:31.474Z";async function _q(t,e){try{e.quality==="insider"&&e.date&&e.date.localeCompare(Pre)>=0&&!t.globalState.get(_E,!1)&&(await t.globalState.update(_E,!0),await oe.commands.executeCommand("workbench.extensions.installExtension","ms-vscode-remote.remote-containers",{installPreReleaseVersion:!0}))}catch(r){console.error(r)}}async function Uc(t,e,r,n,o=!1){try{return sb(t,e,r,Fm(),n,o)}catch{return}}var Qe=K(require("vscode")),Fe=K(require("path")),DH=K(require("fs"));var Xo=K(B0()),RH=K(dH());var OH=K(require("util"));var fH=K(require("path"));var Jce=["png","md","json","txt","map"],Qce=["node_modules",".git","bin","out","dist",".vscode-test"],Xce=[{tag:"function.json",pattern:/^function\.json$/i},{tag:"package.json",pattern:/^package\.json$/i},{tag:"sln",pattern:/^.+\.sln$/i},{tag:"project.json",pattern:/^project\.json$/i},{tag:"csproj",pattern:/^.+\.csproj$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"amlignore",pattern:/^.+\.amlignore$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"environment.yml",pattern:/^environment\.yml$/i},{tag:"_config.yml",pattern:/^_config\.yml$/i},{tag:"_config.toml",pattern:/^_config\.toml$/i},{tag:"server.xml",pattern:/^server\.xml$/i},{tag:"web.xml",pattern:/^web\.xml$/i}],pH={"Node.js":["package.json"],".NET Core":["sln","project.json","csproj"],"Azure Functions":["function.json"],"Azure Machine Learning":["azureml","amlignore"],Anaconda:["environment.yml"],Jekyll:["_config.yml","_config.toml"],Tomcat:["server.xml","web.xml"],Dapr:[]},hH={"C#":["cs"],"C++":["cpp","cxx",".cc","c++"],"F#":["fs"],JavaScript:["js"],TypeScript:["ts"],Java:["java"],Elm:["elm"],Go:["go"],Python:["py","ipynb"],Ruby:["rb"],Perl:["pl"],PHP:["php"],R:["r"],PowerShell:["ps1"],Dart:["dart"],Rust:["rs"],Swift:["swift"],ReasonML:["re"],TerraForm:["tf"]},Zce=["docker-existing-docker-compose","docker-existing-dockerfile","codespaces-linux"];async function f_(t,e){for(let r of e)if(r.metaData){if(Zce.indexOf(fH.basename(r.definitionFolder))>-1)continue;let n=0,o=0,i=r.metaData.get("languagesPlatforms");if(i){let s=i.split(",").map(a=>a.trim());if(s[0]==="Any")n+=5;else for(let a of s)if(hH[a]){let c=hH[a];for(let l of c)t.fileTypes.get(l.toLowerCase())&&(n+=10),t.mostPopularFileType===l&&(n+=10)}else if(pH[a]){let c=pH[a],l=!1;for(let u of c)t.configFiles.get(u)&&(l=!0,o+=20);l||(o-=20)}}r.recommendationScore=n+(o<0?-4:o)}}async function mH(t,e){return ele(t,e.rootFolderPath,Qce,Jce)}async function ele(t,e,r,n){let o=new Map,i=new Map,s=500;function a(p,h,m,g){let v=[];(t.readDirWithTypes||t.readDir)(p).then(b=>{if(m.count>=s)return m.count+=b.length,m.maxReached=!0,g(v);let C=b.length;if(C===0)return g(v);let _=b;m.count+b.length>s&&(m.maxReached=!0,C=s-m.count,_=b.slice(0,C)),m.count+=b.length;for(let P of _){let S=Array.isArray(P)?P[0]:P;(Array.isArray(P)?Promise.resolve((P[1]&ml.File)!=0):t.isFile(t.path.join(p,S))).then(T=>{T?(v.push(S),--C==0&&g(v)):h.indexOf(S)===-1?a(t.path.join(p,S),h,m,A=>{if(v=v.concat(A),--C==0)return g(v)}):--C==0&&g(v)},()=>{if(--C==0)return g(v)})}},()=>g(v))}let c=p=>{o.has(p)?o.set(p,o.get(p)+1):o.set(p,1)},l=p=>{for(let h of Xce)h.pattern.test(p)&&(i.has(h.tag)?i.set(h.tag,i.get(h.tag)+1):i.set(h.tag,1))},u=p=>{if(p.lastIndexOf(".")>=0){let h=p.split(".").pop();h&&!n.includes(h)&&c(h.toLowerCase())}l(p)},d=p=>[...p.entries()].reduce((h,m)=>m[1]>h[1]?m:h,["",0])[0],f={count:0,maxReached:!1};return new Promise((p,h)=>{a(e,r,f,async m=>{m.forEach(u),p({configFiles:i,fileTypes:o,fileCount:f.count,mostPopularFileType:d(o)})})})}var Hg=K(require("path"));var Ji=K(require("vscode"));async function Vg(){await Ji.window.showInformationMessage("You need to first save your workspace in a folder containing all its workspace folders.",{modal:!0})}function Qi(t,e){let r=Ji.workspace.fs;return{platform:t,path:t==="win32"?Hg.win32:Hg.posix,async isFile(n){try{return((await r.stat(Qo(t,e,n))).type&Ji.FileType.File)!=0}catch(o){if((o==null?void 0:o.code)==="FileNotFound")return!1;throw o}},async readFile(n){try{let o=await r.readFile(Qo(t,e,n));return Buffer.from(o)}catch(o){if((o==null?void 0:o.code)==="FileNotFound"){let i=new Error(`Could not read file: ${n}`);throw i.originalError=o,i.code="ENOENT",i}throw o}},async rename(n,o){try{let i=Qo(t,e,n),s=Qo(t,e,n);await r.rename(i,s)}catch(i){if((i==null?void 0:i.code)==="FileNotFound"){let s=new Error(`Could not rename  ${n} -> ${o}`);throw s.originalError=i,s.code="ENOENT",s}throw i}},async writeFile(n,o){await r.writeFile(Qo(t,e,n),o)},async readDir(n){return(await r.readDirectory(Qo(t,e,n))).map(i=>i[0])},async readDirWithTypes(n){return r.readDirectory(Qo(t,e,n))},async mkdirp(n){await r.createDirectory(Qo(t,e,n))},async toCommonURI(n){return Qo(t,e,n)}}}function Qo(t,e,r){let n=t==="win32"?"/"+r.replace(/\\/g,"/"):r;return e.with({path:n})}var Wg=class{async readDocument(e){try{let r=await Ji.workspace.fs.readFile(e);return Buffer.from(r).toString()}catch{return}}async applyEdits(e,r,n){let o=St(n,r);await Ji.workspace.fs.writeFile(e,Buffer.from(o))}};var ge=K(require("vscode"));var gt=K(require("vscode")),Gg=K(require("path"));async function p_(t,e){var o,i;let{fileHost:r}=t,n=await t.findDevContainerFiles();if(n.length){let s=n.length>1?(o=await gt.window.showQuickPick(n.map(d=>({label:d.scheme==="file"?d.fsPath:d.toString(),uri:d})),{placeHolder:"Select a container configuration file"}))==null?void 0:o.uri:n[0];if(!s)return;let a=r.path.dirname(_e(s,r.platform)),c=r.path.basename(a)===".devcontainer"?r.path.dirname(a):a,l=Ue(r.path,c),u=await Gd(r,l);if(u){let d=se(V({},u.object),{configFilePath:u.uri}),f=await So();if("image"in d)return{workspace:l,config:u,imageName:d.image,manifest:await zd(d.image,f)};if(mt(d)){let p=((i=d.build)==null?void 0:i.args)||{},h=hr(r,d),m=await h_(r,h,p);if(m)return V({workspace:l,config:u},m)}if("dockerComposeFile"in d){let p=await qt(r,d),h=await e.readDockerComposeConfig(p,void 0),m=await gH(r,p,c,u.uri,d,h);if(m)return V({workspace:l,config:u},m)}return{workspace:l,config:u}}}else{let s="Add Files...";await gt.window.showInformationMessage("No container configuration file found.",{modal:!0},s)===s&&await Wd(t)}}async function gH(t,e,r,n,o,i){var d;let s=((i==null?void 0:i.services)||{})[o.service]||{},a=zg(t,e,r,s),c=a?jo(t,n,a):void 0,l=c&&await h_(t,c,((d=s.build)==null?void 0:d.args)||{}),u=await So();if(l)return l;if(typeof s.image=="string")return{imageName:s.image,manifest:await zd(s.image,u)}}function zg(t,e,r,n){let o=e.length?t.path.dirname(e[0]):r,i=n.build;if(typeof i=="string")return t.path.resolve(o,i,"Dockerfile");if(i&&typeof i=="object"&&typeof i.context=="string"){let s=typeof i.dockerfile=="string"?i.dockerfile:"Dockerfile";return t.path.resolve(o,i.context,s)}}async function h_(t,e,r){let o=await zt(t).readDocument(e);if(o){let i=(/^\s*FROM\s+(\S+)(\s|$)/m.exec(o)||[])[1]||void 0;if(i){let s=i.replace(/\$\{([^\}]+)\}/,(c,l)=>r[l]||c),a=await So();return{imageName:s,manifest:await zd(s,a)}}}}async function vH(t){let e=await p_(t,{readDockerComposeConfig:async(r,n)=>{if(r[0])try{let o=await t.fileHost.readFile(r[0]);return xr(o.toString())}catch(o){t.output.write(Ne(String(o&&(o.stack||o.message)||o)))}return{}}});e&&await m_(t,e,{})}async function m_(t,e,r){var h;let{fileHost:n}=t,{workspace:o,config:i}=e,s=gt.window.createQuickPick();s.ignoreFocusOut=!0;let a={fileHost:n,workspace:o,quickPick:s,telemetry:await t.telemetry,output:t.output},c={featureSets:[]},l=await Yg(),u=Xs({distFolder:l}),d=await XC(u,a.output);if(!d)return;d=se(V({},d),{sourceInformation:{type:"local-cache"}}),c.featureSets.push(d),c=await eb(a,i.object,c,async()=>{var m,g;return V({"com.visualstudio.code.devcontainers.id":(m=e.manifest)==null?void 0:m.definitionName,version:(g=e.manifest)==null?void 0:g.definitionVersion},r)});let f=((h=c.featureSets.find(m=>m.sourceInformation.type==="local-cache"))==null?void 0:h.features.filter(m=>m.included))||[];if(!f.length){await gt.window.showInformationMessage("No container features available for the current base image.",{modal:!0});return}let p=await Hd(a,f,f.filter(m=>m.value!==!1));try{if(p){let m=i.text,g=i.text;for(let v of f){let y=p[v.id];if(y!==Ru(v)){let b=["features",v.id];if(y!==!1&&typeof v.value=="object"){let _=Vo(v);_&&b.push(_)}let C=st(g,b,y!==!1?y:void 0,{formattingOptions:{}});g=St(g,C)}}m!==g&&await zt(n).applyEdits(i.uri,[{content:g,offset:0,length:i.text.length}],i.text)}}finally{s.dispose()}}async function Kg(t,e,r,n){var u,d;if(!Vd())return e;let o=e.configText,i=(u=t.existingConfig)==null?void 0:u.object.features;if(!t.replaceExistingConfig&&i){r=se(V({},r),{features:V(V({},r.features),i)});for(let f in i){let p=st(o,["features",f],i[f],{formattingOptions:{}});o=St(o,p)}}let s=Qi(process.platform,be.file(e.configFilePath)),a=await g_(t,s,r,e.basePath,Gg.basename(e.definitionFolder)),c=((d=((a==null?void 0:a.featureSets)||[]).find(f=>f.sourceInformation.type==="local-cache"))==null?void 0:d.features.filter(f=>f.included))||[],l=await Hd(t,c,c.filter(f=>f.value!==!1),!0);if(!!l){if(l==="back")return n();for(let f of c){let p=l[f.id];if(p!==Ru(f)){let h=["features",f.id];if(p!==!1&&typeof f.value=="object"){let g=Vo(f);g&&h.push(g)}let m=st(o,h,p!==!1?p:void 0,{formattingOptions:{}});o=St(o,m)}}return se(V({},e),{configText:o})}}async function g_(t,e,r,n,o){var u;let i;if("image"in r)i=await zd(r.image,n);else if(mt(r)){let d=((u=r.build)==null?void 0:u.args)||{},f=hr(e,r),p=await h_(e,f,d);i=p==null?void 0:p.manifest}else if("dockerComposeFile"in r){let d=await qt(e,r);if(d.length&&await e.isFile(d[0])){let f=await e.readFile(d[0]),p=xr(f.toString()),h=await gH(e,d,t.workspace.rootFolderPath,r.configFilePath,r,p);i=h==null?void 0:h.manifest}i=i||o&&await v_(o,Gg.join(n,"manifests"))||void 0}let s=await Yg(),a=Xs({distFolder:s}),c={featureSets:[]},l=await XC(a,t.output);if(!!l)return l=se(V({},l),{sourceInformation:{type:"local-cache"}}),c.featureSets.push(l),c=await eb(t,r,c,async()=>({"com.visualstudio.code.devcontainers.id":i==null?void 0:i.definitionName,version:i==null?void 0:i.definitionVersion})),c}var Bd={iconPath:new gt.ThemeIcon("check-all"),tooltip:"Finish"};async function Hd(t,e,r,n=!1){if(!e.length)return{};let o={iconPath:new gt.ThemeIcon("info"),tooltip:"Open Documentation"},i=t.quickPick.onDidTriggerItemButton(l=>{let u=l.item.feature.documentationURL;gt.env.openExternal(gt.Uri.parse(u))}),s=await Ar(t.quickPick,e.map(l=>({label:l.name,picked:r.indexOf(l)!==-1,buttons:l.documentationURL?[o]:void 0,feature:l})).sort((l,u)=>l.label.localeCompare(u.label)),"Select additional features to install",void 0,!0,n?[gt.QuickInputButtons.Back,Bd]:[Bd]);if(i.dispose(),!s)return;if(s.button===gt.QuickInputButtons.Back)return"back";let a=s.pick.map(l=>l.feature),c={};for(let l of e){let u=a.indexOf(l)!==-1;c[l.id]=u?Ru(l)||RL(l):!1}return s.button===Bd?c:rle(t,c,a,()=>Hd(t,e,a))}function tle(t){let e=Vo(t),r=e&&t.options&&t.options[e];return!!r&&r.type==="string"&&("enum"in r||"proposals"in r)}async function rle(t,e,r,n){let o=r.filter(tle);return async function i(s,a,c){if(!a.length)return s;let l=a[0],u=l.options[Vo(l)],d=("enum"in u&&u.enum||"proposals"in u&&u.proposals||[]).map(h=>({label:String(h),value:h,picked:Ru(l)===h})),f=d.length===1?{pick:d[0],button:"ok"}:await Ar(t.quickPick,d,u.description||"Select a value",void 0,void 0,[gt.QuickInputButtons.Back,Bd],"proposals"in u);if(!f)return;if(f.button===gt.QuickInputButtons.Back)return c();let p=se(V({},s),{[l.id]:f.pick.value});return f.button===Bd?s:i(p,a.slice(1),()=>i(s,a,c))}(e,o,n)}var yH="remote.containers.experimentalContainerFeatures";function wH(){return gt.commands.executeCommand("setContext","experimentalContainerFeatures",Vd()),gt.workspace.onDidChangeConfiguration(t=>{t.affectsConfiguration(yH)&&gt.commands.executeCommand("setContext","experimentalContainerFeatures",Vd())})}function Vd(){return gt.workspace.getConfiguration().get(yH,!0)}var y_=K(require("path"));function CH(t){return{provideCompletionItems(e,r,n){let o=rI(e.getText(),e.offsetAt(r)),i=e.getWordRangeAtPosition(r)||new ge.Range(r,r);if(o.path[0]==="extensions"||o.path[0]==="vscode"&&o.path[1]==="extensions"){let s=Ve(e.getText());return s.configFilePath=e.uri,nle(s,i)}if(Vd()&&o.path[0]==="features"){let s=Ve(e.getText());s.configFilePath=e.uri;try{return ole(t,s,o,i)}catch(a){console.error(a)}}return[]}}}function nle(t,e){var n,o;let r=((t==null?void 0:t.extensions)||[]).concat(((o=(n=t==null?void 0:t.customizations)==null?void 0:n.vscode)==null?void 0:o.extensions)||[]);if(Array.isArray(r)){let i=ge.extensions.all.filter(s=>!(s.id.startsWith("vscode.")||s.id==="Microsoft.vscode-markdown"||r.indexOf(s.id)>-1));if(i.length)return i.map(s=>{let a=new ge.CompletionItem(s.id),c=`"${s.id}"`;return a.kind=ge.CompletionItemKind.Value,a.insertText=c,a.range=e,a.filterText=c,a})}}async function ole(t,e,r,n){var i,s;let o=e&&e.features||{};if(typeof o=="object"){if(e.configFilePath.scheme==="vscode-remote"&&t.fileHost.type==="local"){e=se(V({},e),{configFilePath:e.configFilePath.with({scheme:wt.scheme,authority:""})});let m=ge.env.remoteName&&ge.env.remoteName!=="test"?"linux":process.platform,g=((i=(ge.workspace.workspaceFolders||[])[0])==null?void 0:i.uri)||be.file(process.cwd());t=se(V({},t),{fileHost:await Qi(m,g)})}let{path:a}=t.fileHost,c=_e(e.configFilePath,t.fileHost.platform),l=a.basename(c),u=a.dirname(c),d=Ue(a,l===".devcontainer.json"?u:a.dirname(u)),f=await So(),p=await g_(se(V({},t),{workspace:d}),t.fileHost,e,f),h=((s=((p==null?void 0:p.featureSets)||[]).find(m=>m.sourceInformation.type==="local-cache"))==null?void 0:s.features.filter(m=>m.included))||[];if(r.path.length===2)if(r.isAtPropertyKey){let m=h.filter(g=>!(g.id in o));if(m.length)return m.map(g=>{let v=new ge.CompletionItem(g.id),y=`"${g.id}": `;return v.kind=ge.CompletionItemKind.Property,v.insertText=y,v.range=n,v.filterText=y,v})}else{let m=r.path[1],g=h.find(v=>v.id===m);if(g){let v=Vo(g),y=v&&(g.options||{})[v]||{type:"boolean",description:"Set to true to install."},b=(y.type==="string"?("enum"in y&&y.enum||"proposals"in y&&y.proposals||[""]).map(C=>`"${C}"`):["true","false"]).map(C=>({label:C,text:C}));return b.push({label:"{}",text:new ge.SnippetString(`{
	$1
}$0`)}),b.map(({label:C,text:_},P)=>{let S=new ge.CompletionItem(C);return S.kind=ge.CompletionItemKind.Value,S.insertText=_,S.range=n,S.sortText=`${P}_${C}`,S})}}else if(r.path.length===3){let m=r.path[1],g=h.find(v=>v.id===m);if(g){let v=g.options||{};if(r.isAtPropertyKey)return Object.keys(v).filter(y=>!(y in(o[m]||{}))).map(y=>{let b=new ge.CompletionItem(y),C=`"${y}": `;return b.kind=ge.CompletionItemKind.Property,b.insertText=C,b.range=n,b.filterText=C,b.detail=v[y].description,b});{let y=r.path[2],b=v[y];if(b)return(b.type==="string"?("enum"in b&&b.enum||"proposals"in b&&b.proposals||[""]).map(_=>`"${_}"`):["true","false"]).map((_,P)=>{let S=new ge.CompletionItem(_),k=_;return S.kind=ge.CompletionItemKind.Value,S.insertText=k,S.range=n,S.filterText=k,S.sortText=`${P}_${_}`,S})}}}}}async function bH(t){let e=await w_(t);if((e==null?void 0:e.scheme)===wt.scheme){let r=_e(e,t.fileHost.platform);e=await t.fileHost.toCommonURI(r)}e&&await ge.window.showTextDocument(ge.Uri.parse(e.toString()))}async function w_(t){let e=await t.findDevContainerFiles();if(!e.length){let n="Add Files...";await ge.window.showInformationMessage("No container configuration file found.",{modal:!0},n)===n&&await Wd(t)&&(e=await t.findDevContainerFiles())}if(!e.length)return;let r;return e.length===1?r={uri:e[0]}:r=await ge.window.showQuickPick(e.map(n=>({label:n.scheme==="file"?n.fsPath:n.toString(),uri:n})),{placeHolder:"Select a container configuration file"}),r==null?void 0:r.uri}async function EH(t,e){var n,o,i,s,a,c,l;let r=await w_(t);if(r){let u=zt(t.fileHost);r.scheme==="file"&&!await ht(r.fsPath)?await pn(Ln,r,[],$o):r.scheme==="vscode-remote"&&(u=new Wg);let d=await u.readDocument(r);if(d){let f=!/\.?devcontainer\.json/.test(y_.default.posix.basename(r.path)),p=Ve(d),h=!f&&(((o=(n=p.customizations)==null?void 0:n.vscode)==null?void 0:o.extensions)||!p.extensions),m=(h?(s=(i=p.customizations)==null?void 0:i.vscode)==null?void 0:s.extensions:p.extensions)||[],g=t.openConfigurationCommandId?`[Dev Container configuration](command:${t.openConfigurationCommandId})`:"Dev Container configuration";if((p.extensions||[]).concat(((c=(a=p.customizations)==null?void 0:a.vscode)==null?void 0:c.extensions)||[]).indexOf(e)===-1){m.push(e);let v;h?((l=p.customizations)==null?void 0:l.vscode)?v=st(d,["customizations","vscode","extensions"],m,{formattingOptions:{}}):p.customizations?v=st(d,["customizations","vscode"],{extensions:m},{formattingOptions:{}}):v=st(d,["customizations"],{vscode:{extensions:m}},{formattingOptions:{}}):v=st(d,["extensions"],m,{formattingOptions:{}}),await u.applyEdits(r,v,d),await ge.window.showInformationMessage(`Extension has been added to the ${g}.`)}else await ge.window.showInformationMessage(`Extension is already included in the ${g}.`)}}}async function _H(t,e){var s,a;let r=await ge.commands.executeCommand("remote.tunnel.label",e);if(r===void 0)return;let n=r.label,o=r.port,i=await w_(t);if(i){let c=zt(t.fileHost);i.scheme==="file"&&!await ht(i.fsPath)?await pn(Ln,i,[],$o):i.scheme==="vscode-remote"&&(c=new Wg);let l=await c.readDocument(i);if(l){let d=(s=Ve(l).portsAttributes)!=null?s:{},f=(a=d[`${o}`])!=null?a:{},p=t.openConfigurationCommandId?`[Dev Container configuration](command:${t.openConfigurationCommandId})`:"Dev Container configuration";if(d&&f&&f.label===n)await ge.window.showInformationMessage(`Port attributes are already included in the ${p}.`);else{f.label=n,d[`${o}`]=f;let h=st(l,["portsAttributes"],d,{formattingOptions:{}});await c.applyEdits(i,h,l),await ge.window.showInformationMessage(`Port attributes have been added to the ${p}.`)}}}}function SH(t,e){let r=ge.languages.createDiagnosticCollection("devcontainer");return ge.window.activeTextEditor&&C_(ge.window.activeTextEditor.document,r,e.output),t.subscriptions.push(ge.workspace.onDidChangeTextDocument(n=>{n&&C_(n.document,r,e.output)})),t.subscriptions.push(ge.workspace.onDidOpenTextDocument(n=>{n&&C_(n,r,e.output)})),r.dispose}function C_(t,e,r){let n=y_.default.basename(t.uri.fsPath);if(/\.?devcontainer\.json/.test(n)){let o=Ep(t.getText());if(!o)return;let i=_p(o)||{},s=[...ile(t,i,r),...sle(o,t)];e.set(t.uri,s)}}function ile(t,e,r){let n=e==null?void 0:e.features;if(!n)return[];let o=[];return Object.keys(n).forEach(i=>{let s=JC(i,r);if(!s||s.sourceInformation.type!=="local-cache")for(let a=0;a<t.lineCount;a++){let c=t.lineAt(a);if(c.text.includes(i)){let l=c.text.indexOf(i),u=l+i.length,d=s==null?void 0:s.sourceInformation,f="Expected feature identifier to contain only alphanumeric and/or the '-' characters.",p=ge.DiagnosticSeverity.Error;d&&(f=`WARNING: Provided feature syntax is currently experimental and is subject to change.
`,p=ge.DiagnosticSeverity.Warning);let h={message:f,severity:p,range:new ge.Range(new ge.Position(a,l),new ge.Position(a,u))};o.push(h);break}}if(s&&s.sourceInformation.type==="github-repo")for(let a=0;a<t.lineCount;a++){let c=t.lineAt(a),l=s.sourceInformation;if(c.text.includes(i)){let u=c.text.indexOf(i),d=u+i.length,f={message:"Feature-set source can be found on GitHub.",range:new ge.Range(new ge.Position(a,u),new ge.Position(a,d)),code:{target:ge.Uri.parse(`https://github.com/${l.owner}/${l.repo}`),value:"github-repo"},severity:ge.DiagnosticSeverity.Information};o.push(f);break}}}),o}function sle(t,e){return["extensions","settings","devPort"].filter(r=>Ci(t,[r])&&Ci(t,["vscode",r])).map(r=>{var s,a;let n=(((a=(s=Ci(t,[r]))==null?void 0:s.parent)==null?void 0:a.children)||[])[0],o=e.positionAt(n.offset),i=e.positionAt(n.offset+n.length);return{message:`Legacy "${r}" property when "${r}" property under "vscode" is also present.`,range:new ge.Range(o,i),severity:ge.DiagnosticSeverity.Warning}})}var Xt=K(require("vscode")),xH=K(require("os")),Lt=K(require("path"));var PH=K(Ba()),nl=K(B0());var kH=K(require("fs")),b_={"user-agent":"devcontainer"};async function IH(t){let{fileHost:e,output:r}=t;r.write(" -- CREATEDEVCONTAINER v2");let n=await E_();if(n){let o=_e(n,e.platform),i=Ue(e.path,o),s=await Ka(e,i);if(s){let c="Continue";if(await Xt.window.showInformationMessage(`The workspace could fail to open in a container: ${s}`,{modal:!0},c)!==c)return!1}let a=await ale(t,i);if(a){let c=await e.toCommonURI(a);return c&&Xt.window.showTextDocument(Xt.Uri.parse(c.toString())),!0}}return!1}async function ale(t,e){let{fileHost:r,telemetry:n,output:o}=t,i=await n,s=await Gd(r,e),c=!!Di(s==null?void 0:s.object)&&!!s;if(c){vr(i,"exists");let _=_e(s.uri,r.platform);if(!await Xt.window.showWarningMessage(`Dev Container configuration '${r.path.relative(e.configFolderPath,_)}' file already exists.`,{modal:!0},"Continue")){let S=await r.toCommonURI(_);S&&Xt.window.showTextDocument(Xt.Uri.parse(S.toString()));return}}let l=Xt.window.createQuickPick();l.ignoreFocusOut=!0;let u=new Set,d="remote.containers.additionalDefinitionIndexes",f=Xt.workspace.getConfiguration().get(d)||[];f.length===0?o.write("No additional indexes provided via setting"):(o.write(`${f.length} additional indexes provided via setting.`),f.forEach(_=>u.add(_)));let p=Xt.workspace.getConfiguration().get("remote.containers.useEmbeddedV1PackagedCache")||!1,h=xH.tmpdir(),m=Lt.join(h,"collectionsMetadataCache.json"),g=se(V({},t),{quickPick:l,replaceExistingConfig:c,existingConfig:s,telemetry:i,workspace:e,codespaces:!!t.codespaces,indexes:u,tmpDir:h,collectionsMetadataCache:m,useEmbeddedV1PackagedCache:p}),v=await TH(g,{});if(!v){o.write("Failed to get definitions",ie.Error);return}let{mergedDefinitions:y,cachedAt:b,collectionsContainer:C}=v;return y.sort((_,P)=>{let S=_==null?void 0:_.categories.some(T=>T==="Core"),k=P==null?void 0:P.categories.some(T=>T==="Core");return S&&k?0:S?-1:1}),Jg(g,y,b,C)}async function Jg(t,e,r,n){var p;let{output:o,quickPick:i,fileHost:s,useEmbeddedV1PackagedCache:a}=t,c=[{iconPath:new Xt.ThemeIcon("cloud-download"),tooltip:"Clear definitions cache and refetch.",action:"clear-cache"}],l=await Ar(i,e,`Select a container configuration definition (last cached ${r})`,void 0,void 0,c);if(!l)return;let u=l==null?void 0:l.pick,d=u==null?void 0:u.type,f=l==null?void 0:l.button;if(f!=="ok"&&f.action==="clear-cache"){o.write("Refresh Cache!");let h=await TH(t,{clearCache:!0});if(!h){i.dispose();return}return Jg(t,h.mergedDefinitions,h.cachedAt,h.collectionsContainer)}if(d==="singleContainer"||d==="dockerCompose"){let h=await dle(t,{},u);if(h==="back")return Jg(t,e,r,n);(!h||Object.keys(h).length===0)&&o.write("No options returned",ie.Trace);let m,g=u.srcInfo;if(g){let v=(p=n.collections.find(y=>Gh(y.sourceInformation)===Gh(g)&&y.features))==null?void 0:p.features;if(v){let y=v.map(b=>se(V({},b),{value:!1}));m=await Hd(t,v,y,!0)}}else o.write("No srcInfo for selected definition.  Not offering features.",ie.Warning);if(m==="back")return Jg(t,e,r,n);i.busy=!0,i.enabled=!1;try{let v;if(o.write(`useEmbeddedV1PackagedCache is ${a}`),a)v=await lle(t,u);else{let S=await vle(t,u);if(!S){o.write("Failed to fetch definition",ie.Error),i.dispose();return}v=await cle(t,S)}if(!v){o.write("Failed during configuration copy",ie.Error),i.dispose();return}let{devcontainerjsonPath:y,config:b,configText:C}=v,_=await ule(t,h,b,C);if(!_){o.write("Failed during application of options",ie.Error),i.dispose();return}C=_.configText;let P=await fle(t,m,C);if(!P){o.write("Failed during application of features",ie.Error),i.dispose();return}return C=P.configText,await s.writeFile(y,Buffer.from(C)),y}finally{i&&i.dispose()}}o.write("Undefined behavior in definition selection UX",ie.Error),i.dispose()}async function cle(t,e){let{workspace:r,fileHost:n,output:o}=t,{rootFolderPath:i}=r;await oi(i,{recursive:!0,force:!0}),await n.mkdirp(i),await PH.x({file:e,cwd:i});let s=Lt.join(i,".devcontainer","devcontainer.json");if(!await n.isFile(s)){o.write(`No devcontainer.json found at expected path:  ${s}`),t.quickPick.dispose();return}let a=(await n.readFile(s)).toString(),c=Ve(a),l=JSON.stringify(c,void 0,4);if(c.configFilePath=be.parse(s),!a||a===""||!c){o.write("devcontainer.json has no contents or could not be parsed.",ie.Error),t.quickPick.dispose();return}return{rootFolderPath:i,devcontainerjsonPath:s,config:c,configText:l}}async function lle(t,e){let{workspace:r,fileHost:n,output:o}=t,{rootFolderPath:i}=r;await oi(i,{recursive:!0,force:!0}),await n.mkdirp(Lt.join(i,".devcontainer"));let s=Lt.join(await So(),"containers",e.id),a=(await Qg(s)).map(f=>Lt.relative(s,f));for(let f of a){let p=Lt.join(s,f),h=n.path.sep!==Lt.sep?f.replace(Lt.sep===Lt.win32.sep?/\\/g:/\//g,n.path.sep):f,m=n.path.join(i,h);await n.mkdirp(Lt.dirname(m)),(0,kH.copyFileSync)(p,m)}let c=Lt.join(i,".devcontainer","devcontainer.json"),l=(await n.readFile(c)).toString(),u=Ve(l),d=JSON.stringify(u,void 0,4);if(u.configFilePath=be.parse(c),!l||l===""||!u){o.write("devcontainer.json has no contents or could not be parsed.",ie.Error),t.quickPick.dispose();return}return{rootFolderPath:i,devcontainerjsonPath:c,config:u,configText:d}}async function ule(t,e,r,n){var a;let{output:o,fileHost:i}=t;if(!e||Object.keys(e).length===0)return{configText:n};if(!r)return;o.write("Applying selected options to devcontainer.json");let s=Object.keys(e);if(mt(r)){let c=((a=r.build)==null?void 0:a.args)||{};s.forEach(l=>{let u=e[l];if(!u)return;let d=c[l];if(u!==d){let f=st(n,["build","args",l],u,{formattingOptions:{}});n=St(n,f)}})}else if("dockerComposeFile"in r){let c=await qt(i,r);if(c.length&&await i.isFile(c[0])){let l=(await i.readFile(c[0])).toString(),u;s.forEach(d=>{let f=e[d];if(!f)return;u||(u=nl.parseDocument(l,{lineCounter:new nl.LineCounter}));let p=u.getIn(["services","app","build"]);p.has("args")||p.set("args",new nl.YAMLMap),p.get("args").set(d,String(f))}),u&&await i.writeFile(c[0],Buffer.from(u.toString()))}}return{configText:n}}async function dle(t,e,r){if(!r.options)return;let n=r.options,o=Object.keys(n),i=o.length;if(!!o.length)return async function s(a,c,l){if(!c.length)return a;let u=c[0],d=n[u],f=("enum"in d&&d.enum||"proposals"in d&&d.proposals||[]).map(m=>({label:String(m),value:m})),p=f.length===1?{pick:f[0],button:"ok",picked:void 0}:await Ar(t.quickPick,f,(d==null?void 0:d.description)||"Select a value",void 0,void 0,[Xt.QuickInputButtons.Back]);if(!p)return;if(p.button===Xt.QuickInputButtons.Back)return c.length===i?"back":l();let h=se(V({},a),{[u]:p.pick.value});return s(h,c.slice(1),()=>s(a,c,l))}(e,o,async()=>{})}async function fle(t,e,r){let{output:n}=t;if(!e||!r){n.write("No features selected or no devcontainer.json to apply features to.",ie.Warning);return}let o=r,i=Object.keys(e);for(let s of i){let a=e[s],c=["features",s];if(a!==!1){let l=st(o,c,a,{formattingOptions:{}});o=St(o,l)}}return{configText:o}}async function TH(t,{clearCache:e=!1}){let{output:r,collectionsMetadataCache:n,fileHost:o,useEmbeddedV1PackagedCache:i}=t;r.write("--- In getDefinitions_v2");let s;!e&&n&&await o.isFile(n)?s=Ve((await o.readFile(n)).toString()):i?s=await hle(t):s=await ple(t);let a=s==null?void 0:s.collections,c=s==null?void 0:s.cachedAt;if(!s||!a||!c||a.length===0){r.write("Failed to gather definition collections metadata",ie.Error);return}let l=[];for(let u of a){let d=u.sourceInformation,f=d?YC(d)+"/":"";for(let p of u.definitions)l.push(se(V({},p),{srcInfo:d,label:(p==null?void 0:p.displayName)||p.id||"ERR: No id",description:`${f}${p.id}`,detail:(p==null?void 0:p.description)||"No Description"}))}return{mergedDefinitions:l,cachedAt:c,collectionsContainer:s}}async function ple(t){let{output:e}=t;e.write("Populating collection(s) cache from internet...");let r=await mle(t);if(!r){e.write("Failed to fetch collection names from indexes",ie.Error);return}return await gle(t,r)}async function hle(t){let{output:e,fileHost:r}=t;e.write("Populating collection(s) cache from from embedded package...");let n=[],o=Lt.join(await So(),"devcontainer-collection.json");if(!await r.isFile(o)){e.write("Embedded package does not contain devcontainer-collection.json",ie.Error);return}let i=Ve((await r.readFile(o)).toString()),s={type:"local-cache"};return i.sourceInformation=s,n.push(i),await AH(t,n)}async function AH(t,e){let{output:r,tmpDir:n,collectionsMetadataCache:o,fileHost:i}=t,s={collections:e,cachedAt:"never"};if(s.cachedAt=new Date().toISOString(),r.write(`Fetched ${e.length} collections.`),r.write(`Cached at: ${s.cachedAt}`),o&&n){r.write(`Caching collection metadata to ${t.collectionsMetadataCache}`);let a=Lt.join(n,`metadata-tmp-${new Date().getMilliseconds()}`);await i.writeFile(a,Buffer.from(JSON.stringify(s))),await i.rename(a,o)}else r.write("Did not write collection to cache. Needs cache directory and path to cache to.",ie.Warning);return s}async function mle(t){let{indexes:e,output:r}=t;if(!e)return;let n=new Set;for await(let o of e){let i={type:"GET",url:o,headers:b_},s;try{s=await Du(i,r)}catch(c){r.write(`Failed to fetch index ${o} - ${c==null?void 0:c.message}`,ie.Error);continue}if(!s||s.length===0){r.write(`Did not receive a valid response from index defined at: ${o}`,ie.Error);continue}s.toString().split(`
`).filter(c=>c&&c.trim()!=="").forEach(c=>{n.add(c)})}if(n.add("https://github.com/microsoft/vscode-dev-containers/releases/latest/download/devcontainer-collection.json"),n.size===0){r.write("No collections set. Exiting.",ie.Warning);return}return n}async function gle(t,e){let{output:r,tmpDir:n,collectionsMetadataCache:o}=t;if(!n||!o){r.write("Missing required metadata",ie.Error);return}let i=[];for await(let s of e){let a={type:"GET",url:s,headers:b_},c;try{c=await Du(a,r)}catch(d){r.write(`Failed to fetch collection ${s} - ${d==null?void 0:d.message}`,ie.Error);continue}if(!c||c.length===0){r.write(`Did not receive a valid response from collection defined at: ${s}`,ie.Error);continue}let l=Ve(c.toString()),u=QC(l.sourceInformation);l.sourceInformation=u,i.push(l)}if(i.length===0){r.write("No collections set. Exiting.",ie.Warning);return}return await AH(t,i)}async function vle(t,e){let{output:r,tmpDir:n,fileHost:o}=t;if(!n||n===""){r.write("ERR: No tmpDir defined.",ie.Error);return}let i=`devcontainer-definition-${e.id}`;if(!e.srcInfo){r.write(`ERR: No srcInfo defined for definition ${e.id}`,ie.Error);return}let s=`https://github.com/${YC(e.srcInfo)}/releases/latest/download/${i}.tgz`,a={type:"GET",url:s,headers:b_},c;try{c=await Du(a,r)}catch(u){r.write(`Failed to fetch definition ${s} - ${u==null?void 0:u.message}`,ie.Error);return}if(!c||c.length===0){r.write(`Did not receive a valid response from definition defined at: ${s}`,ie.Error);return}let l=Lt.join(n,`${i}-${new Date().getMilliseconds()}.tgz`);return await o.writeFile(l,c),l}async function NH(t,e){return SH(t,e),{async openConfiguration(){return bH(e)},async createConfiguration(){return Qe.workspace.getConfiguration().get("remote.containers.experimentalAddDefinitionUX")||!1?IH(e):Wd(e)},async addExtensionToConfiguration(r){return EH(e,r)},async addPortLabelToConfiguration(r){return _H(e,r)},async configureContainerFeatures(){return vH(e)},createCompletionItemProvider(){return CH(e)}}}async function Wd(t){let{fileHost:e,output:r}=t;r.write(" -- CREATEDEVCONTAINER v1");let n=await E_();if(n){let o=_e(n,e.platform),i=Ue(e.path,o),s=await Ka(e,i);if(s){let c="Continue";if(await Qe.window.showInformationMessage(`The workspace could fail to open in a container: ${s}`,{modal:!0},c)!==c)return!1}let a=await Kd(t,i);if(a){let c=await e.toCommonURI(a);return c&&Qe.window.showTextDocument(Qe.Uri.parse(c.toString())),!0}}return!1}async function E_(){let t=Qe.workspace.workspaceFile,e=Qe.workspace.workspaceFolders,r;if(t){if(t.scheme==="untitled"){await Vg();return}r=t}else if(e&&e.length)if(e.length>1){let n=await Qe.window.showWorkspaceFolderPick({placeHolder:"Select a folder to create a container configuration for"});n&&(r=n.uri)}else r=e[0].uri;return r}function Ar(t,e,r,n,o,i,s){if(t.value="",t.title=n||"Add Development Container Configuration Files",t.placeholder=r,t.canSelectMany=!!o,Array.isArray(e))if(t.items=e,o)t.selectedItems=e.filter(l=>l.picked);else{let l=e.find(u=>u.picked);l&&(t.activeItems=[l])}t.buttons=i?Array.isArray(i)?i:[Qe.QuickInputButtons.Back]:[];let a=[],c=new Promise((l,u)=>{if(Array.isArray(e)||(t.busy=!0,e.then(d=>{if(t.busy=!1,t.items=d,o)t.selectedItems=d.filter(f=>f.picked);else{let f=d.find(p=>p.picked);f&&(t.activeItems=[f])}},d=>{t.busy=!1,u(d)})),a.push(t.onDidAccept(()=>{let d=o?t.selectedItems.slice():t.selectedItems[0];l(Array.isArray(i)?{pick:d,button:"ok"}:d),a.forEach(f=>f.dispose())})),t.buttons.length&&a.push(t.onDidTriggerButton(d=>{let f=o?t.selectedItems.slice():t.activeItems[0];l(i===!0?"back":{pick:f,button:d}),a.forEach(p=>p.dispose())})),a.push(t.onDidHide(()=>{a.forEach(d=>d.dispose()),t.dispose(),l(void 0)})),s){let d;a.push(t.onDidChangeValue(f=>{let p=f.trim().toLowerCase(),h=!p||t.items.find(m=>m.label.toLowerCase()===p);if(h&&d)t.items=t.items.filter(m=>m!==d),d=void 0;else if(!h){let m=t.items.filter(g=>g!==d);m.push(d={label:`Other: ${f}`,value:f}),t.items=m}}))}});return t.show(),c}var __={label:"Learn More",description:"Documentation on predefined container definitions",alwaysShow:!0,type:"help"};async function Kd(t,e){let{fileHost:r,telemetry:n}=t,o=await n,i=await Gd(r,e),a=!!Di(i==null?void 0:i.object)&&!!i;if(a){vr(o,"exists");let l=_e(i.uri,r.platform);if(!await Qe.window.showWarningMessage(`Dev Container configuration '${r.path.relative(e.configFolderPath,l)}' file already exists.`,{modal:!0},"Continue")){let d=await r.toCommonURI(l);d&&Qe.window.showTextDocument(Qe.Uri.parse(d.toString()));return}}let c=Qe.window.createQuickPick();return c.ignoreFocusOut=!0,S_(se(V({},t),{quickPick:c,replaceExistingConfig:a,existingConfig:i,telemetry:o,workspace:e,codespaces:!!t.codespaces,tmpDir:void 0,indexes:void 0,collectionsMetadataCache:void 0,useEmbeddedV1PackagedCache:void 0}))}async function Xg(){return await Ple(void 0)}async function S_(t){let{fileHost:e,workspace:r,telemetry:n,existingFilesLearnMoreLink:o}=t,i=await e.readDir(r.rootFolderPath),s=i.filter(p=>/docker.*compose/i.test(p)).map(p=>e.path.join(r.rootFolderPath,p)),a=i.filter(p=>/dockerfile/i.test(p)).map(p=>e.path.join(r.rootFolderPath,p)),c=a.map(p=>{let h=e.path.basename(p);return{label:`From '${h}'`,description:HH(e,p),dockerfile:h,dockerfilePath:p,detail:`Refer to the existing '${h}' in the container configuration`,type:"dockerfile"}}),l=s.map(p=>{let h=e.path.basename(p);return{label:`From '${h}'`,description:HH(e,p),dockerComposeFile:h,dockerComposePath:p,detail:`Refer to the existing '${h}' in the container configuration`,type:"dockerComposeFile"}});if(!(a.length>0||s.length>0))return Zg(t,void 0);let d={label:"From a predefined container configuration definition...",detail:"Use a base configuration from the container definition registry",alwaysShow:!0,type:"predefined"},f=await Ar(t.quickPick,[d,...c,...l,...o?[__]:[]],"How would you like to create your container configuration?");if(!f){vr(n,"canceled");return}if(f.type==="help"){vr(n,"help"),Qe.env.openExternal(o);return}if(f.type==="predefined")return Zg(t,()=>S_(t));if(f.type==="dockerComposeFile")return _le(t,f.dockerComposePath,()=>S_(t));if(f.type==="dockerfile")return Ele(t,f.dockerfilePath)}function LH(t){let e=t.metaData.get("categories");return e?e.trim().split(", ").indexOf("Core")>-1:!1}async function yle(t){let{fileHost:e,workspace:r,predefinedDefinitionsLearnMoreLink:n}=t,o=t.stats||(t.stats=await mH(e,r)),i=await WH(t,f_.bind(null,o)),s=[];o.mostPopularFileType.length===0?s=await xle(t):s=i.filter(c=>c.recommendationScore&&c.recommendationScore>0&&LH(c));let a;return s.length>0?a=[{label:"Show All Definitions...",detail:"Show all available predefined container definitions.",alwaysShow:!0,type:"showAll"},...n?[__]:[],...s]:a=[...n?[__]:[],...i],{items:a,stats:o}}async function Zg(t,e){let{telemetry:r,predefinedDefinitionsLearnMoreLink:n}=t,o=yle(t),{infoButton:i,sub:s}=MH(t),a=o.then(l=>l.items.map(u=>u.type==="baseConfiguration"?se(V({},u),{buttons:[i]}):u)),c=await Ar(t.quickPick,a,"Select a container configuration definition",void 0,void 0,!!e);if(s.dispose(),c==="back")return e();if(!c){vr(r,"canceled");return}if(c.type==="help"){vr(r,"help"),Qe.env.openExternal(n);return}if(c.type==="showAll")return FH(t,(await o).stats,()=>Zg(t,e));if(c.type==="baseConfiguration")return qH(t,c,()=>Zg(t,e))}async function FH(t,e,r){let{telemetry:n}=t,o=await WH(t,f_.bind(null,e)),{infoButton:i,sub:s}=MH(t),a=o.map(l=>l.type==="baseConfiguration"?se(V({},l),{buttons:[i]}):l),c=await Ar(t.quickPick,a,"Select a container configuration definition",void 0,void 0,!0);if(s.dispose(),c==="back")return r();if(c&&c.type==="baseConfiguration")return qH(t,c,()=>FH(t,e,r));vr(n,"canceled")}function MH(t){let e={iconPath:new Qe.ThemeIcon("info"),tooltip:"Open Documentation"},r=t.quickPick.onDidTriggerItemButton(n=>{let o=`https://github.com/microsoft/vscode-dev-containers/blob/main/containers/${Fe.basename(n.item.definitionFolder)}/README.md`;Qe.env.openExternal(Qe.Uri.parse(o))});return{infoButton:e,sub:r}}async function qH(t,e,r){let{telemetry:n}=t,o=await wle(t,e);if(!o){vr(n,"canceled");return}return o==="back"?r():(vr(n,"definition",Fe.basename(o.definitionFolder)),x_(t,o))}async function x_(t,e){let{quickPick:r}=t;r.busy=!0,r.enabled=!1;try{return await Ale(t,e)}finally{r.hide()}}async function wle(t,e){let r=Ve(e.configText);if(r.configFilePath=be.file(e.configFilePath),mt(r))return Cle(t,e,r,async()=>"back",(n,o)=>$H(t,n,r,o));if("dockerComposeFile"in r){let n=Qi(process.platform,be.file(e.configFilePath));return ble(t,e,n,r,async()=>"back",(o,i)=>jH(t,o,n,r,i))}return Kg(t,e,r,async()=>"back")}async function Cle(t,e,r,n,o){var c;let i=hr({platform:process.platform},r),s=((c=r.build)==null?void 0:c.args)||{},a=await UH(i,s);return async function l(u,d,f){if(!d.length)return o(se(V({},e),{configText:u}),f);let p=d[0],h=await Ar(t.quickPick,p.items,p.placeholder,void 0,void 0,!0);if(!h)return;if(h==="back")return f();let m=u;if(h.value!==p.default){let g=st(m,["build","args",p.name],h.value,{formattingOptions:{}});m=St(m,g)}return l(m,d.slice(1),()=>l(u,d,f))}(e.configText,a,n)}async function $H(t,e,r,n){var u;let o=hr({platform:process.platform},r),i=((u=r.build)==null?void 0:u.args)||{},{options:s,hasOptions:a}=await BH(o,i),c=s.length?await Ar(t.quickPick,s,a?`Select the options for the '${e.label}' dev container`:`Select the install options for the '${e.label}' dev container`,void 0,!0,!0):[];if(!c)return;if(c==="back")return n();let l=e.configText;for(let d of s){let f=c.indexOf(d)!==-1;if(f!==d.default){let p=st(l,["build","args",d.name],String(f),{formattingOptions:{}});l=St(l,p)}}return Kg(t,se(V({},e),{configText:l}),r,s.length?()=>$H(t,e,r,n):n)}async function ble(t,e,r,n,o,i){var a;let s=await qt(r,n);if(s.length&&await r.isFile(s[0])){let c=e.files||{},l=c[s[0]]||(await r.readFile(s[0])).toString(),u=xr(l),d=((u==null?void 0:u.services)||{})[n.service]||{},f=t.workspace.rootFolderPath,p=zg(r,s,f,d);if(p){let h=n.configFilePath,m=jo(r,h,p),g=((a=d.build)==null?void 0:a.args)||{},v=await UH(m,g),y;return async function b(C,_){if(!C.length)return y&&(c[s[0]]=y.toString()),i(se(V({},e),{files:c}),_);let P=C[0],S=await Ar(t.quickPick,P.items,P.placeholder,void 0,void 0,!0);if(!!S){if(S==="back")return _();if(S.value!==P.default){y||(y=Xo.parseDocument(l,{lineCounter:new Xo.LineCounter}));let k=y.getIn(["services","app","build"]);k.has("args")||k.set("args",new Xo.YAMLMap),k.get("args").set(P.name,S.value)}return b(C.slice(1),()=>b(C,_))}}(v,o)}}return i(e,o)}async function jH(t,e,r,n,o){var c;let i=!1,s=e.files||{},a=await qt(r,n);if(a.length&&await r.isFile(a[0])){let l=s[a[0]]||(await r.readFile(a[0])).toString(),u=xr(l),d=((u==null?void 0:u.services)||{})[n.service]||{},f=t.workspace.rootFolderPath,p=zg(r,a,f,d);if(p){let h=n.configFilePath,m=jo(r,h,p),g=((c=d.build)==null?void 0:c.args)||{},{options:v,hasOptions:y}=await BH(m,g);i=!!v.length;let b=v.length?await Ar(t.quickPick,v,y?`Select the options for the '${e.label}' dev container`:`Select the install options for the '${e.label}' dev container`,void 0,!0,!0):[];if(!b)return;if(b==="back")return o();let C;for(let _ of v){let P=b.indexOf(_)!==-1;if(P!==_.default){C||(C=Xo.parseDocument(l,{lineCounter:new Xo.LineCounter}));let S=C.getIn(["services","app","build"]);S.has("args")||S.set("args",new Xo.YAMLMap),S.get("args").set(_.name,String(P))}}C&&(s[a[0]]=C.toString())}}return Kg(t,se(V({},e),{files:s}),n,i?()=>jH(t,e,r,n,o):o)}async function UH(t,e){let r=(await Oe(t.fsPath)).toString(),n=/^#\s*\[Choice\]\s*([^:\r\n]+):(.*)\r?\nARG\s+([^=\s]+)="?([^"\r\n]*)"?\s*$/gm,o,i=[];for(;o=n.exec(r);)i.push(o);return i.map(([,s,a,c,l])=>{let u=e[c]||l,d=a.trim().split(",").map(p=>p.trim()).map(p=>({label:p,description:p===u?"(default)":void 0,value:p})),f=d.findIndex(p=>p.value===u);return f!==-1&&d.unshift(...d.splice(f,1)),{placeholder:s||c,name:c,default:u,items:d}})}async function BH(t,e){let r=(await Oe(t.fsPath)).toString(),n=/^#\s*\[(Option|Install)\]\s*(.+)\r?\nARG\s+([^=\s]+)="?(true|false)"?\s*$/gm,o,i=[];for(;o=n.exec(r);)i.push(o);let s=i.map(([,c,l,u,d])=>{let p=(e[u]||d)==="true";return{type:c.toLowerCase(),label:l||u,picked:p,name:u,default:p}}),a=s.some(c=>c.type==="option");return a&&s.filter(c=>c.type==="install").forEach(c=>c.label=`Install ${c.label}`),{options:s,hasOptions:a}}function HH(t,e){let r=Qe.workspace.workspaceFolders||[];if(r.length<2)return;let n=r.find(o=>t.platform==="win32"?e.toLowerCase().startsWith(o.uri.fsPath.toLowerCase()):e.startsWith(o.uri.fsPath));return n&&n.name}async function Ele(t,e){let{fileHost:r,workspace:n,telemetry:o}=t,s=(await Xg()).find(a=>Fe.basename(a.definitionFolder)==="docker-existing-dockerfile");if(s){let a=Fe.relative(s.definitionFolder,s.configFilePath),c=r.path.sep!==Fe.sep?a.replace(Fe.sep===Fe.win32.sep?/\\/g:/\//g,r.path.sep):a,l=r.path.resolve(n.configFolderPath,c),u=r.path.relative(r.path.dirname(l),e),d=r.platform==="win32"?u.replace(/\\/g,"/"):u,f="dockerFile"in Ve(s.configText)?["dockerFile"]:["build","dockerfile"],p=st(s.configText,f,d,{formattingOptions:{}}),h=St(s.configText,p);return vr(o,"dockerFile"),x_(t,se(V({},s),{configText:h}))}else{vr(o,"existingDockerfileDefinitionNotFound");return}}async function _le(t,e,r){let{fileHost:n,workspace:o,telemetry:i}=t,s=(await n.readFile(e)).toString(),a=xr(s);if(!a){await Qe.window.showErrorMessage(`Invalid docker-compose file "${e}"`,{modal:!0});return}let c=a.version,l=Object.keys(a&&a.services||{}),u=l.length<2?l[0]||"":await Ar(t.quickPick,l.map(h=>({label:h,type:"service"})),"Select a service",void 0,void 0,!0);if(u==="back")return r();if(u===void 0){vr(i,"canceled");return}let d=typeof u=="string"?u:u.label,p=(await Xg()).find(h=>Fe.basename(h.definitionFolder)==="docker-existing-docker-compose");if(p){let h=Fe.relative(p.definitionFolder,p.configFilePath),m=n.path.sep!==Fe.sep?h.replace(Fe.sep===Fe.win32.sep?/\\/g:/\//g,n.path.sep):h,g=n.path.resolve(o.configFolderPath,m),v=n.path.relative(n.path.dirname(g),e),y=n.platform==="win32"?v.replace(/\\/g,"/"):v,b=Ve(p.configText).dockerComposeFile,C=Array.isArray(b)?b.slice(1):[],_=[y,...C],P=st(p.configText,["dockerComposeFile"],_,{formattingOptions:{}}),S=St(p.configText,P),k=st(S,["service"],d,{formattingOptions:{}}),T=St(S,k),A=C.reduce((j,J)=>(j[Gs({platform:process.platform},{configFilePath:be.file(p.configFilePath)},J).fsPath]=!0,j),{}),F=se(V({},p),{configText:T,async copyFile(j,J){if(A[j]){let Y=this.files&&this.files[j]||(await Oe(j)).toString(),ae=xr(Y);ae.version&&c&&ae.version!==c&&(Y=Y.replace(new RegExp(`^(version:.*)(${ae.version.replace(/\./g,"\\.")})`,"m"),`$1${c}`));let te=Object.keys(ae&&ae.services||{});te.length&&(Y=Y.replace(new RegExp(`\\b${te[0]}\\b`),d)),await n.writeFile(J,Buffer.from(Y))}else{let Y=this.files&&this.files[j]?Buffer.from(this.files[j]):await Oe(j);await n.writeFile(J,Y)}}});return vr(i,"dockerComposeFile"),x_(t,F)}else{vr(i,"existingDockerComposeDefinitionNotFound");return}}function vr(t,e,r){let n={outcome:e};r&&(n.definitionName=r),t.sendTelemetryEvent("createConfiguration",n)}function Sle(t,e){let r=e.recommendationScore===void 0?0:e.recommendationScore,n=t.recommendationScore===void 0?0:t.recommendationScore;return r-n}var VH=["docker-existing-docker-compose","docker-existing-dockerfile"];async function WH(t,e){let{codespaces:r}=t,n=(await Xg()).filter(o=>VH.indexOf(Fe.basename(o.definitionFolder))===-1);return r&&(n=n.filter(o=>!/^\s*no\b/i.test(o.metaData.get("codespaces")||"yes"))),e?(await e(n),n.sort(Sle)):n.sort((o,i)=>o.label.localeCompare(i.label))}async function xle(t){let{codespaces:e}=t,r=(await Xg()).filter(n=>VH.indexOf(Fe.basename(n.definitionFolder))===-1);return r=r.filter(n=>LH(n)),e&&(r=r.filter(n=>!/^\s*no\b/i.test(n.metaData.get("codespaces")||"yes"))),r.sort((n,o)=>n.label.localeCompare(o.label))}async function Ple(t){let e=!t;t=t!=null?t:await So();let r=new RH.default,n=Fe.join(t,"containers"),o=Fe.join(t,"containers-readmes"),i=await en(n);return(await Promise.all(i.map(async a=>{var b;let c=Fe.join(n,a),l=await Eh(c),u=l&&await Tle(l);if(!u)return;let d=Ve(u);d.configFilePath=be.file(l);let[,f,p]=((b=d.name)==null?void 0:b.match(/^(.*)(\([^)]*\))$/))||[],h=(f==null?void 0:f.trim())||d.name||a,m=p,g,v=Fe.join(o,a,"README.md"),y=new Map;if(await ht(v))try{let C=await Oe(v,{encoding:"utf8"}),_=/\#\s*summary.*\n*(.*)/i.exec(C);if(_){let P=r.render(_[1]);g=kle(P);let S=g.indexOf(". ");S!==-1&&(g=g.substr(0,S+1))}y=Ile(C)}catch(C){console.error(C)}return{label:h,description:m,type:"baseConfiguration",detail:g,definitionFolder:c,configText:u,configFilePath:l,metaData:y,isV2:!e,basePath:t}}))).filter(a=>!!a)}function kle(t){return t.replace(/<[^>]*>/g,"").trim().replace(/&#([0-9]+);/g,function(e,r){return String.fromCodePoint(parseInt(r,10))}).replace(/&#x([0-9a-f]+);/g,function(e,r){return String.fromCodePoint(parseInt(r,16))}).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,function(e){switch(e){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return e})}function Ile(t){let e=new Map,r=!1,n=/^\s*\|\s*Metadata\s*\|\s*Value\s*\|/i,o=/^\s*\|/gi,i={categories:/^\s*\|\s*\*Categories\*\s*\|\s*(.*)\s*\|/i,contributors:/^\s*\|\s*\*Contributors\*\s*\|\s*(.*)\s*\|/i,definitionType:/^\s*\|\s*\*Definition type\*\s*\|\s*(.*)\s*\|/i,codespaces:/^\s*\|\s*\*Works in Codespaces\*\s*\|\s*(.*)\s*\|/i,languagesPlatforms:/^\s*\|\s*\*Languages, platforms\*\s*\|\s*(.*)\s*\|/i},s=t.toString().split(`
`);for(let a of s)if(!r)a.match(n)&&(r=!0);else{if(!a.match(o))break;for(let c in i){let l=a.match(i[c]);l&&l[1]&&e.set(c,l[1])}}return e}async function Tle(t){return await ht(t)?(await Oe(t)).toString():void 0}async function Ale(t,e){let{fileHost:r,workspace:n,replaceExistingConfig:o,existingConfig:i,output:s}=t,a=n.configFolderPath,c="Skip",l=(await Qg(e.definitionFolder)).map(f=>Fe.relative(e.definitionFolder,f)),u,d;for(let f of l){let p=Fe.join(e.definitionFolder,f),h=p===e.configFilePath,m=r.path.sep!==Fe.sep?f.replace(Fe.sep===Fe.win32.sep?/\\/g:/\//g,r.path.sep):f,g=r.path.join(a,m);if(h&&!o&&i){let v=Ve(e.configText);try{d=Dle(r,v,g,i)}catch(y){await Ole(y,r,g,m,s);return}g=_e(i.uri,r.platform)}else if(await r.isFile(g)){let v=await Qe.window.showInformationMessage(`File '${m}' already exists, overwrite?`,{modal:!0},c,"Overwrite");if(!v)return;if(v===c)continue}if(await r.mkdirp(r.path.dirname(g)),h)u=g,await r.writeFile(g,Buffer.from(d||e.configText));else if(e.copyFile)await e.copyFile(p,g);else{let v=e.files&&e.files[p]?Buffer.from(e.files[p]):await Oe(p);await r.writeFile(g,v)}}return u}function Dle(t,e,r,n){var u,d,f,p,h,m,g,v,y,b,C,_,P,S;let o=n.text,i=_e(n.uri,t.platform);if("image"in e)o=et(o,["image"],e.image);else if("dockerFile"in e){let k=ol(t,r,i,e.dockerFile);if(o=et(o,["dockerFile"],k),e.context){let T=ol(t,r,i,e.context);o=et(o,["context"],T)}}else if("build"in e){let k=ol(t,r,i,e.build.dockerfile);if(o=et(o,["build","dockerfile"],k),e.build.context){let T=ol(t,r,i,e.build.context);o=et(o,["build","context"],T)}o=et(o,["build","target"],e.build.target),o=et(o,["build","args"],e.build.args)}else if("dockerComposeFile"in e){let k=Rle(t,r,i,e.dockerComposeFile);o=et(o,["dockerComposeFile"],k),o=et(o,["service"],e.service),o=et(o,["workspaceFolder"],e.workspaceFolder)}e.features&&(o=et(o,["features"],e.features));let s=k_(((d=(u=e.customizations)==null?void 0:u.vscode)==null?void 0:d.settings)||e.settings,((p=(f=n.object.customizations)==null?void 0:f.vscode)==null?void 0:p.settings)||n.object.settings);((m=(h=n.object.customizations)==null?void 0:h.vscode)==null?void 0:m.settings)||!n.object.settings?((g=n.object.customizations)==null?void 0:g.vscode)?o=et(o,["customizations","vscode","settings"],s):n.object.customizations?o=et(o,["customizations","vscode"],{settings:s}):o=et(o,["customizations"],{vscode:{settings:s}}):o=et(o,["settings"],s);let a=P_(n.object.forwardPorts,e.forwardPorts);o=et(o,["forwardPorts"],a);let c=P_(((y=(v=n.object.customizations)==null?void 0:v.vscode)==null?void 0:y.extensions)||n.object.extensions,((C=(b=e.customizations)==null?void 0:b.vscode)==null?void 0:C.extensions)||e.extensions);if(((P=(_=n.object.customizations)==null?void 0:_.vscode)==null?void 0:P.extensions)||!n.object.extensions?((S=n.object.customizations)==null?void 0:S.vscode)?o=et(o,["customizations","vscode","extensions"],c):n.object.customizations?o=et(o,["customizations","vscode"],{extensions:c}):o=et(o,["customizations"],{vscode:{extensions:c}}):o=et(o,["extensions"],c),"image"in e||mt(e)){let k=P_(n.object.mounts,e.mounts);o=et(o,["mounts"],k);let T=k_(e.containerEnv,n.object.containerEnv);o=et(o,["containerEnv"],T),o=et(o,["containerUser"],e.containerUser);let A=GH(n.object.runArgs,e.runArgs);o=et(o,["runArgs"],A)}o=et(o,["postCreateCommand"],e.postCreateCommand);let l=k_(e.remoteEnv,n.object.remoteEnv);return o=et(o,["remoteEnv"],l),o=et(o,["remoteUser"],e.remoteUser),o}function et(t,e,r){if(r===void 0)return t;let n=st(t,e,r,{formattingOptions:{}});return St(t,n)}function Rle(t,e,r,n){return Array.isArray(n)?n.map(o=>ol(t,e,r,o)):ol(t,e,r,n)}function ol({path:t},e,r,n){let o=t.resolve(t.dirname(e),n);return t.relative(t.dirname(r),o)||"."}function P_(t,e){var r;return(r=GH(t,e))==null?void 0:r.filter((n,o,i)=>i.indexOf(n)===o)}function GH(t,e){if(!!(e==null?void 0:e.length))return(t||[]).concat(e)}function k_(t,e){if(!(!t||!Object.keys(t).length))return Object.assign({},t,e)}async function Gd(t,e){let r=await bh(t,e.configFolderPath);if(!r)return;let n=await zt(t).readDocument(r);if(!n)return;let o=Ve(n);return{uri:r,text:n,object:o}}async function Qg(t){let e=await en(t);return[].concat(...await Promise.all(e.map(async r=>{let n=Fe.join(t,r);return(await(0,OH.promisify)(DH.lstat)(n)).isDirectory()?Qg(n):n})))}async function Ole(t,e,r,n,o){o.write(Ne(t&&(t.stack||t.message)));let i=await e.toCommonURI(r),s=await Qe.window.showErrorMessage(`Could not update '${n}' due to errors in its content. Try fixing these first.`,{modal:!0},...i?["Open devcontainer.json"]:[]);i&&s&&Qe.window.showTextDocument(Qe.Uri.parse(i.toString()))}async function zd(t,e){return(await Nle(e)).find(n=>{var o,i;return(i=(o=n.build)==null?void 0:o.tags)==null?void 0:i.some(s=>{let l=`^mcr.microsoft.com/vscode/devcontainers/${s.split(/\$\{[^}]*\}/).map(u=>u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g").join(".*")}$`;return new RegExp(l).test(t)})})}async function Nle(t){let e=Fe.join(t,"manifests");return(await Promise.all((await en(e)).map(r=>v_(r,e)))).filter(Boolean)}async function v_(t,e){let r=Fe.join(e,t,"definition-manifest.json");if(await ht(r)){let n=(await Oe(r)).toString(),o=Ve(n);return o.definitionName=t,o}}async function Yg(){let t=await pl(Fe.join(__dirname,"node_modules","vscode-dev-containers"))?[]:await pl(Fe.join(__dirname,"..","node_modules","vscode-dev-containers"))?[".."]:["..",".."];return Fe.join(__dirname,...t)}async function So(){return Fe.join(await Yg(),"node_modules","vscode-dev-containers")}async function zH(t,e,r,n,o,i){let s=Cn(r);if(Yt(s)&&!await Me.workspace.requestWorkspaceTrust({message:id}))return Wt(s.hostPath)?(await Me.window.showInformationMessage("The WSL folder is currently not trusted.",{modal:!0,detail:"Trust is required to build a dev container from it. The folder will now reopen in WSL."}),await Me.commands.executeCommand("remote-containers.reopenInWSL")):(await Me.window.showInformationMessage("The local folder is currently not trusted.",{modal:!0,detail:"Trust is required to build a dev container from it. The folder will now reopen locally."}),await Me.commands.executeCommand("remote-containers.reopenLocally")),new Promise(()=>{});let a=yn(s);return a&&!await sd(t,s.repositoryPath)?(await Me.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{})):se(V({},await Lle(s,t,o,i,e,r,n)),{isTrusted:a||void 0})}async function Lle(t,e,r,n,o,i,s){let{log:a,logFilePath:c}=r,l="hostPath"in t&&Wt(t.hostPath)&&!!Me.extensions.getExtension("ms-vscode-remote.remote-wsl");l&&Me.commands.executeCommand("setContext","canReopenInWSL",!0);let u=t.settings,d="localDocker"in t&&t.localDocker,f=!!(u&&"host"in u&&u.host&&u.host.startsWith("ssh://")&&!d)&&(!!Me.extensions.getExtension("ms-vscode-remote.remote-ssh")||!!Me.extensions.getExtension("ms-vscode-remote.remote-ssh-nightly"));f&&Me.commands.executeCommand("setContext","canReopenInSSH",!0);let p=!(u&&"host"in u&&u.host&&u.host.startsWith("ssh://")&&!d);p&&Me.commands.executeCommand("setContext","canReopenLocally",!0);let h;return Me.window.withProgress({location:Me.ProgressLocation.Notification,title:jc,cancellable:!1},async m=>{let g=so(e.extensionPath,zo,a),{cliHost:v,originalCwd:y}=await Fle(t,e.extensionPath,Yo(),g,o.product,a),b=V(V({},await g),kc(v,t.settings)),C=V(V({},v.env),b),_=await $c({authority:i,extensionContext:e,sessionStart:r.sessionStart,progress:m,cliHost:v,env:C,cwd:v.cwd,isLocalContainer:cm(b),telemetry:o,output:a,logFilePath:c,allowSystemConfigChange:!0,postCreate:n}),P={async createConfiguration(S,k){return Kd({fileHost:k,telemetry:o,output:a,existingFilesLearnMoreLink:ed,predefinedDefinitionsLearnMoreLink:td,openConfigurationCommandId:Zu},Ue(I_.posix,S))},async showError(S,...k){return await Me.window.showErrorMessage(S,{modal:!0},...k)}};return h={common:_,parsedAuthority:t,dockerCLI:$n(),dockerComposePath:go(),dockerComposeCLI:co({exec:_.cliHost.exec,env:V(V({},b),Ot(b)),output:_.output},$n(),go()),dockerEnv:b,workspaceMountConsistencyDefault:Om(),updateRemoteUserUIDOnMacOS:Nm(),cacheMount:Lm()?"volume":"none",configurationTracking:Rm(e.workspaceState),removeOnStartup:await fq(e,i),buildNoCache:await hq(e,i),onRemoveOnShutdownChanged:s,userRepositoryConfigurationPaths:vo(),originalCwd:y,configProvider:P,development:e.extensionMode===Me.ExtensionMode.Development},await lm(h),HL(h)}).then(m=>(s(async g=>{await pq(e,g&&m.dockerContainerId||!1),await nd(e,g==="rebuildNoCache"?i:!1)}),Ko(o,T_(t),"success",h==null?void 0:h.common,m.config,m.properties),m),m=>{var S;let g=m instanceof we?m:new we({description:"An error occurred setting up the container.",originalError:m});yn(t)&&(g.volumeName=t.volumeName,g.volumeName===wn&&(g.volumeName=vn(t.repositoryPath).uniqueVolumeName),g.repositoryPath=t.repositoryPath,g.folderPath=t.folder),Ko(o,T_(t),"failure",h==null?void 0:h.common,g.config,g.containerProperties,g);let v="onTheSide",y=(S=g.data)==null?void 0:S.fileWithError,b=y&&(h==null?void 0:h.common.cliHost.path.basename(y))||"devcontainer.json",C=Yt(t)?[{id:"openFileWithErrorLocally",title:`Open ${b} Locally`,isLastAction:!0,applicable:async(k,T)=>p&&!(T&&l),async execute(){let k=h==null?void 0:h.common.cliHost,T=y?k.type==="wsl"?await k.toCommonURI(y):be.file(y):void 0;await od(e,t.hostPath,T,c,v);let A=Me.Uri.file(t.hostPath);await Me.commands.executeCommand("vscode.openFolder",A)}},{id:"openFileWithErrorinWSL",title:`Open ${b} in WSL`,isLastAction:!0,applicable:async()=>l,async execute(){let k=Me.Uri.parse((await tc(t.hostPath,a)).toString());await od(e,k.path,y?k.with({path:y}):void 0,c,v),await Me.commands.executeCommand("vscode.openFolder",k)}},{id:"openFileWithErrorinSSH",title:`Open ${b} in SSH`,isLastAction:!0,applicable:async()=>f,async execute(){let k=t.settings,T=Me.Uri.parse(iu(k.host,t.hostPath).toString());await od(e,T.path,y?T.with({path:y}):void 0,c,v),await Me.commands.executeCommand("vscode.openFolder",T)}}]:[],_=yn(t)?t.inspectVolume?[Fi]:[{id:"reopenInRecoveryContainer",title:`Open ${b} in Recovery Container`,isLastAction:!0,applicable:(k,T)=>!0,execute:async k=>{await od(e,t.repositoryPath,y?be.file(y).with({scheme:"vscode-remote"}):void 0,c,v),await Me.commands.executeCommand("remote-containers.inspectVolume",k.volumeName,k.repositoryPath,k.folderPath)}},Fi,{id:"openRepository",title:"Open Repository",isLastAction:!1,applicable:(k,T)=>!T,async execute(){Me.env.openExternal(Me.Uri.parse(t.repositoryPath))}}]:[],P=Fu(t)?[Fi]:[];return g.actions=[...Tc,na,w1,...C,..._,...P,Ic,ra],Mle(g),Mi(g,T_(t),o,!0,r)})}async function Fle(t,e,r,n,o,i){let{settings:s}=t,a=s&&"host"in s&&s.host||void 0;if(Yt(t)){let c=Ue(I_,t.hostPath),l=c.rootFolderPath,u=await Nn(a,c.rootFolderPath,mo,jn(),e,r,o,i,yo,{sshAskpassEnv:n,settings:qc(),localDocker:t.localDocker});return u.cwd!==c.rootFolderPath&&(c=Ue(u.path,c.isWorkspaceFile?u.path.join(u.cwd,I_.basename(t.hostPath)):u.cwd)),i.write(`Setting up container for folder or workspace: ${c.workspaceOrFolderPath}\r
`),am(i,t.settings),t.localDocker&&i.write(`Local Docker: ${t.localDocker}\r
`),{cliHost:u,originalCwd:l}}else{let c=await Nn(a,void 0,mo,jn(),e,r,o,i,yo,{sshAskpassEnv:n,settings:qc()});return{cliHost:c,originalCwd:await c.homedir()}}}function T_(t){return Yt(t)?"config":yn(t)?t.inspectVolume?"volume":"repository":"volume"}function Mle(t){let e=(t.originalError&&(t.originalError.cmdOutput||t.originalError.message)||"").toLowerCase();e&&e.indexOf("drive has not been shared")!==-1?t.description="The drive of the workspace folder is not shared. Share it in the Docker settings first.":e&&(e.indexOf("port is already allocated")!==-1||e.indexOf("address already in use")!==-1)?t.description="A port the container is setup to bind to is already in use. See the Dev Containers terminal for details.":e&&e.indexOf('invalid mount config for type "bind"')!==-1?t.description="A mount config is invalid. Make sure it has the right format and a source folder that exists on the machine where the Docker daemon is running.":e&&e.indexOf("deb.debian.org/debian/dists/jessie-updates")!==-1&&(t.description="The base image references the obsolete Debian 8 update repository.",t.actions.push({id:"learnMore",title:"Learn More",isLastAction:!1,applicable:(r,n)=>n,async execute(){Me.env.openExternal(Me.Uri.parse("https://aka.ms/vscode-remote/containers/troubleshooting/jessie"))}}))}var xo=K(require("vscode"));var KH=K(require("util"));var Hn=K(require("path"));async function YH(t,e,r){let{common:n}=t,o;try{let{commit:i}=n.product;if(!i)throw new we({description:"Cannot attach without commit id for the remote extension host."});o=await _c(t,e.Id,r.workspaceFolder,r.remoteUser);let s=zt(n.cliHost,o.shellServer),{hostOrContainerPort:a,hostPortServer:c,connectionToken:l,webConnectionToken:u,remoteEnv:d,serverDownloaded:f}=await ch(n,o,r,async()=>{},ki);if(qle(n,o,s,r.configFilePath),jle(n,o,s,r.configFilePath),bc(n,o,a,l,u,e,Ue(Hn.posix,"/")),c){let p=async()=>{await(0,KH.promisify)(c.close.bind(c))()};n.shutdowns.push(p)}return{params:n,properties:o,config:r,resolvedAuthority:{host:Ni,port:a,connectionToken:l,extensionHostEnv:d},webConnectionToken:u,tunnelInformation:n.isLocalContainer?Ec(e):{},dockerParams:t,dockerContainerId:e.Id,serverDownloaded:f}}catch(i){let s=i instanceof we?i:new we({description:"An error occurred attaching to the container.",originalError:i});throw e&&(s.manageContainer=!1,s.params=t.common,s.containerId=e.Id,s.dockerParams=t),o&&(s.containerProperties=o),s.config=r,s}}function qle(t,e,r,n){e.installFolder&&JH(t,e,r,n).catch(console.error)}async function JH(t,e,r,n){try{await Mo(t,e,["/bin/sh","-c",`# Watch installed extensions
			trap "exit 0" 15
			old=\`ls -A --full-time\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],fR(e),{print:"off"});return}catch(o){(o==null?void 0:o.code)===1?await $le(t,e,r,n):(o==null?void 0:o.code)!==2&&await oo(6e4)}return JH(t,e,r,n)}async function $le(t,e,r,n){let o=await vR(t,e);await xC(n,async()=>{var s,a;let i=await nv(t.cliHost,r,n,e.remoteWorkspaceFolder);if(!Ble(((a=(s=i.config.customizations)==null?void 0:s.vscode)==null?void 0:a.extensions)||[],o)){let c=st(i.text,["extensions"],o,{formattingOptions:{}});await pn(r,n,c,i.text)}})}function jle(t,e,r,n){QH(t,e,r,n).catch(console.error)}async function QH(t,e,r,n){try{let o=ah(e),i=Hn.posix.dirname(o),s=Hn.posix.basename(o);await Mo(t,e,["/bin/sh","-c",`# Watch machine settings
			trap "exit 0" 15
			old=\`ls -A --full-time ${s} 2>/dev/null || true\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time ${s} 2>/dev/null || true\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],i,{print:"off"});return}catch(o){(o==null?void 0:o.code)===1?await Ule(t.cliHost,e,r,n):(o==null?void 0:o.code)!==2&&await oo(6e4)}return QH(t,e,r,n)}async function Ule(t,e,r,n){let{stdout:o}=await e.shellServer.exec(`cat ${ah(e)}`),i=Ve(o)||{};await xC(n,async()=>{var a,c;let s=await nv(t,r,n,e.remoteWorkspaceFolder);if(JSON.stringify(((c=(a=s.config.customizations)==null?void 0:a.vscode)==null?void 0:c.settings)||{})!==JSON.stringify(i)){let l=st(s.text,["settings"],i,{formattingOptions:{}});await pn(r,n,l,s.text)}})}function Ble(t,e){let r=new Set(t),n=new Set(e);return r.size===n.size&&t.every(o=>n.has(o))}async function XH(t,e){let r=tv(t,e.Name),n=await iV(r);return n||(r=tV(t,e.Config.Image),n=await iV(r)),n}async function ZH(t,e,r,n,o){let i=be.file(tv(r,n.Name)),s=await nv(t,e,i,o);return s.exists||(i=be.file(tV(r,n.Config.Image)),s=await nv(t,e,i,o)),s}function ev(t){return Hn.join(t,"nameConfigs")}function tv(t,e){let r=e.startsWith("/")?e.substr(1):e;return Hn.join(ev(t),`${nV(r)}.json`)}async function eV(t){try{let e=ev(t);return(await en(e)).filter(n=>n.endsWith(".json")).map(n=>({name:oV(n.substr(0,n.length-5)),uri:be.file(Hn.join(e,n))}))}catch(e){if(e&&e.code==="ENOENT")return[];throw e}}function rv(t){return Hn.join(t,"imageConfigs")}function tV(t,e){return Hn.join(rv(t),`${nV(e)}.json`)}async function rV(t){try{let e=rv(t);return(await en(e)).filter(n=>n.endsWith(".json")).map(n=>({image:oV(n.substr(0,n.length-5)),uri:be.file(Hn.join(e,n))}))}catch(e){if(e&&e.code==="ENOENT")return[];throw e}}function nV(t){return t.replace(/[:/%]/g,e=>`%${e.charCodeAt(0).toString(16)}`)}function oV(t){return t.replace(/%([0-9a-f]{2})/g,(e,r)=>String.fromCharCode(parseInt(r,16)))}async function iV(t){if(!await ht(t))return;let e=await Oe(t),r=Ve(e.toString())||{},n=pu(r);return n.configFilePath=be.file(t),n}async function nv(t,e,r,n){let o=await e.readDocument(r),i=o||$o,s=Ve(i)||{},a=pu(s),c=rh({platform:t.platform,configFile:r,env:t.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:n},a);return c.configFilePath=r,{exists:!!o,text:i,config:c}}async function sV(t,e,r,n,o){return await Bi(t)?se(V({},await Hle(t,e,r,n,o)),{isTrusted:!0}):(await xo.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function Hle(t,e,r,n,o){let i,s;return xo.window.withProgress({location:xo.ProgressLocation.Notification,title:jc,cancellable:!1},async a=>{var c,l;try{let u=um(r),{settings:d}=u,f="containerName"in u?u.containerName:u.containerId;n.log.write(`Setting up container: ${f}\r
`),am(n.log,d);let p=d&&"host"in d&&d.host||void 0,h=so(t.extensionPath,zo,n.log),m=await Nn(p,u.cwd,mo,jn(),t.extensionPath,Yo(),e.product,n.log,yo,{sshAskpassEnv:h,settings:qc()}),g=$n(),v=V(V({},await h),kc(m,d)),y=co({exec:m.exec,env:V(V({},v),Ot(v)),output:n.log},$n(),go()),b=V(V({},m.env),v),C=await zr({cliHost:m,dockerCLI:g,dockerComposeCLI:y,dockerComposePath:go(),env:b,output:n.log},"containerName"in u?u.containerName:u.containerId);if(!C)throw new we({description:`Cannot attach to the container with name/id ${f}, it no longer exists.`,data:{reload:!1,attach:!0}});let _=(l=(c=(xo.workspace.workspaceFolders||[void 0])[0])==null?void 0:c.uri)==null?void 0:l.path,P=await ZH(m,Ln,t.globalStoragePath,C,_);if(_&&P.config.workspaceFolder!==_){let A=st(P.text,["workspaceFolder"],_,{formattingOptions:{}});await pn(Ln,P.config.configFilePath,A,P.text)}i={common:await $c({authority:r,extensionContext:t,sessionStart:n.sessionStart,progress:a,cliHost:m,env:b,cwd:u.cwd||await m.homedir(),isLocalContainer:cm(v),telemetry:e,output:n.log,logFilePath:n.logFilePath,allowSystemConfigChange:!1,postCreate:o}),parsedAuthority:u,dockerCLI:g,dockerComposePath:go(),dockerComposeCLI:y,dockerEnv:v,workspaceMountConsistencyDefault:Om(),updateRemoteUserUIDOnMacOS:Nm(),cacheMount:Lm()?"volume":"none",configurationTracking:Rm(t.workspaceState),userRepositoryConfigurationPaths:[],development:t.extensionMode===xo.ExtensionMode.Development},await lm(i);let S=xc(d),k=C.Name.startsWith("/")?C.Name.substr(1):C.Name,T=`Container ${C.Config.Image} (${k})${S}`;if(i.common.setWorkspaceName(T),C.State.Status!=="running")throw new we({description:`Cannot attach to the container ${C.Config.Image} (${k})${S}, it is not running.`,params:i.common,containerId:C.Id,dockerParams:i,data:{reload:!1,start:!0}});return await YH(i,C,P.config)}catch(u){let d=u instanceof we?u:new we({description:"An error occurred attaching to the container.",originalError:u});throw d.actions=[C1,b1,...Tc,na,Fi,Ic,ra],d}}).then(a=>(Ko(e,"attach","success",i==null?void 0:i.common,s,a.properties),a),a=>{let c=a instanceof we?a:new we({description:"An error occurred attaching to the container.",originalError:a});return Ko(e,"attach","failure",i==null?void 0:i.common,s,c.containerProperties,c),Mi(c,"attach",e,!0,n)})}var at=K(require("vscode"));var vt=K(require("vscode")),aV=K(require("path")),va=K(require("os")),Yd=K(require("fs")),cV=K(require("child_process")),lV=K(Ga());async function ov(t){Gle()?await new uV().downloadAndInstallDocker(t):fV()?await new dV().downloadAndInstallDocker(t):await vt.env.openExternal(vt.Uri.parse("https://aka.ms/download-docker-linux-vscode"))}var A_=class{async downloadAndInstallDocker(e){if(await this.preInstallCheck(e)){let n="Downloading Docker installer...",o="The Docker Desktop installation is started. Complete the installation and then start Docker Desktop.",i;try{i=await vt.window.withProgress({location:vt.ProgressLocation.Notification,title:n},async()=>this.downloadInstaller())}catch(a){let c="Downloading the Docker Desktop installer failed. Do you want to manually download and install?",l="Download";throw this.handleError(c,l,this.downloadUrl),a}let s=this.getInstallCommand(i);vt.window.showInformationMessage(o);try{await this.install(i,s,e)}catch(a){let c=`Docker Desktop installation failed. ${a}`,l="Install Instruction";throw this.handleError(c,l,"https://aka.ms/AA37qtj"),a}}}async preInstallCheck(e){let r=!0;if(await new pV(e).isDockerInstalledRealTimeCheck()){let n="Docker Desktop is already installed. Would you like to reinstall?",o="Reinstall";r=await vt.window.showInformationMessage(n,{modal:!0},o)!==void 0}return r}async downloadInstaller(){let e=`${Wle()}.${this.fileExtension}`;return await Kle(this.downloadUrl,e),e}handleError(e,r,n){vt.window.showErrorMessage(e,{title:r}).then(o=>{o&&vt.env.openExternal(vt.Uri.parse(n))})}},uV=class extends A_{constructor(){super(...arguments);this.downloadUrl="https://aka.ms/download-docker-windows-vscode";this.fileExtension="exe"}getInstallCommand(e){return`"${e}"`}async install(e,r,n){try{n.write(`Executing command ${r}`),await mV(r,n)}finally{try{await Yd.promises.stat(e),await Yd.promises.unlink(e)}catch{}}}},dV=class extends A_{constructor(){super(...arguments);this.downloadUrl="https://aka.ms/download-docker-mac-vscode";this.fileExtension="dmg"}getInstallCommand(e){return`chmod +x '${e}' && open '${e}'`}async install(e){let r="Docker Install",n=this.getInstallCommand(e);await zle(n,r,{addDockerEnv:!1})}},Vle=0;function Wle(){return aV.join(va.tmpdir(),`${vt.env.sessionId}-${Vle++}.tmp`)}function Gle(){return va.platform()==="win32"}function fV(){return va.platform()==="darwin"}async function zle(t,e,r){var a,c,l;let n;r=r!=null?r:{},r.addDockerEnv&&(n={});let o=new vt.Task({type:"shell"},(a=r.workspaceFolder)!=null?a:vt.TaskScope.Workspace,e,"Docker",new vt.ShellExecution(t,{cwd:r.cwd||((l=(c=r.workspaceFolder)==null?void 0:c.uri)==null?void 0:l.fsPath)||va.homedir(),env:n}),[]);r.alwaysRunNew&&(o.definition.idRandomizer=Math.random()),r.focus&&(o.presentationOptions={focus:!0});let i=await vt.tasks.executeTask(o);return new Promise((u,d)=>{let f=vt.tasks.onDidEndTaskProcess(p=>{p.execution===i&&(f.dispose(),p.exitCode&&r.rejectOnError&&d(p.exitCode),u())})})}var pV=class{constructor(e){this.output=e;this.maxCacheTime=3e4;this.isDockerInstalledLazy=new gV(async()=>{let r=await this.isDockerInstalledRealTimeCheck();return r&&this.isDockerInstalledLazy.cacheForever(),r},this.maxCacheTime)}async isDockerInstalled(){return await this.isDockerInstalledLazy.getValue()}async isDockerInstalledRealTimeCheck(){try{return await mV("docker -v",this.output),!0}catch{return!1}}};async function Kle(t,e){await new Promise((r,n)=>{let o=Yd.createWriteStream(e);lV.https.get(t,s=>{if(s.statusCode<200||s.statusCode>299){n(new Error(`Failed to download Docker (${t}): HTTP ${s.statusCode} - ${s.statusMessage}`));return}s.on("error",n),s.pipe(o),s.on("end",r)}).on("error",n)})}var hV=10*1024;async function mV(t,e,r,n){let o=Buffer.alloc(r&&r.maxBuffer||hV),i=Buffer.alloc(r&&r.maxBuffer||hV);return await Yle(t,e,r,n,o,n,i),{stdout:D_(o),stderr:D_(i)}}async function Yle(t,e,r,n,o,i,s,a){return await new Promise((c,l)=>{let u,d=0,f=0;r=r||{},r.shell=!0,Jle(r,e);let p=cV.spawn(t,r);p.on("error",h=>(u&&(u.dispose(),u=void 0),l(h))),p.on("close",(h,m)=>{if(u&&(u.dispose(),u=void 0),a&&a.isCancellationRequested)return l(new Error("User canceled"));if(h){let g=`Process '${t.length>50?`${t.substring(0,50)}...`:t}' exited with code ${h}`;s&&(g+=`
Error: ${D_(s)}`);let v=new Error(g);return v.code=h,v.signal=m,v.stdErrHandled=i!==null,l(v)}return c()}),(r==null?void 0:r.stdin)&&(p.stdin.write(r.stdin),p.stdin.end()),(n||o)&&p.stdout.on("data",h=>{let m=h.toString();n&&n(m,p),o&&(d+=o.write(m,d))}),(i||s)&&p.stderr.on("data",h=>{let m=h.toString();i&&i(m,p),s&&(f+=s.write(m,f))}),a&&(u=a.onCancellationRequested(()=>{p.kill()}))})}function Jle(t,e){var r,n;!fV()||/(?<=^|:)\/usr\/local\/bin(?=$|:)/i.test(((r=t==null?void 0:t.env)==null?void 0:r.PATH)||process.env.PATH||"")||(t=t!=null?t:{},t.env=(n=t.env)!=null?n:V({},process.env),e.write("WARNING: Adding '/usr/local/bin' to the PATH because it is missing."),t.env.PATH=`${t.env.PATH}:/usr/local/bin`)}function D_(t){return t.toString().replace(/[\x00-\x09\x0B-\x0C\x0E-\x1F]|\r?\n$/g,"")}var gV=class{constructor(e,r){this.valueFactory=e;this._valueLifetime=r;this._isValueCreated=!1}get isValueCreated(){return this._isValueCreated}cacheForever(){this._valueLifetime=void 0}clear(){this._isValueCreated=!1,this._valuePromise=void 0}async getValue(){if(this._isValueCreated)return this._value;let e=this._valuePromise===void 0;e&&(this._valuePromise=this.valueFactory());let r=await this._valuePromise;if(e&&(this._value=r,this._valuePromise=void 0,this._isValueCreated=!0),this._valueLifetime&&e){let n=setTimeout(()=>{this._valueLifetime&&this._valuePromise===void 0&&(this._isValueCreated=!1,this._value=void 0),clearTimeout(n)},this._valueLifetime)}return r}};async function Dr(t,e,r){var i;let n=(i=(at.workspace.workspaceFolders||[])[0])==null?void 0:i.uri;n&&(n.scheme==="file"&&Wt(n.fsPath)||rc(n))&&(e=await We(t,e.output,n));let o=await Jd(e,r);if(o==="permission")return await at.window.showErrorMessage("Current user does not have permission to run 'docker'.",{modal:!0,detail:"Try adding the user to the 'docker' group."},"Documentation")&&at.env.openExternal(at.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079224")),!1;if(o==="ssh")return await at.window.showErrorMessage("Cannot connect to Docker daemon using 'ssh'.",{modal:!0,detail:"Make sure public/private keys are set up for connecting without keyboard interaction."},"Show Log")&&at.commands.executeCommand(ho),!1;if(o==="daemon")return await at.window.showErrorMessage("Docker returned an error.",{modal:!0,detail:"Make sure the Docker daemon is running."},"Show Log")&&at.commands.executeCommand(ho),!1;if(!o||o==="command"){if(e.cliHost.type==="wsl")await at.window.showErrorMessage("Docker Desktop WSL 2 backend required.",{modal:!0},"Read more on docker.com")&&at.env.openExternal(at.Uri.parse("https://docs.docker.com/docker-for-windows/wsl"));else{let s="Install",a="License",c="Ignore",l=o===!1?[s,a,c]:[s,a],u=await at.window.showErrorMessage("Docker version 17.12.0 or later required.",{modal:!0,detail:"Check the license for details."},...l);if(u===s)ov(e.output).then(console.error);else if(u===a)at.env.openExternal(at.Uri.parse("https://aka.ms/docker-subscription-service-agreement"));else if(u===c)return!0}return!1}return o==="wsl1"?(await at.window.showErrorMessage("WSL 2 distro required.",{modal:!0,detail:"The WSL distro is running with WSL 1."},"Read more on docker.com")&&at.env.openExternal(at.Uri.parse("https://docs.docker.com/docker-for-windows/wsl")),!1):!0}async function Jd(t,e){var s,a,c,l;let r;try{let u=await Ke(t,"version","--format","{{.Server.APIVersion}}");r=u.stdout.toString(),t.output.write(r);let d=u.stderr.toString();d&&t.output.write(Ne(d))}catch(u){console.error(u);let d=(s=u==null?void 0:u.stdout)==null?void 0:s.toString();d&&t.output.write(d);let f=u&&(u.stderr?u.stderr.toString():u.message)||"";f&&t.output.write(Ne(f)),Qd(e,"error",void 0,f);let p=f.toLowerCase();return p.indexOf("permission denied")!==-1?p.indexOf("ssh")!==-1?"ssh":"permission":p.indexOf("enoent")!==-1||p.indexOf("not found")!==-1?(t.output.write(`CLI host's PATH: ${t.cliHost.env.PATH}`),"command"):t.cliHost.type==="wsl"&&((l=(c=(a=u==null?void 0:u.stdout)==null?void 0:a.toString())==null?void 0:c.toLowerCase())==null?void 0:l.indexOf("wsl 1"))!==-1?"wsl1":"daemon"}let n=r.trim(),o=js(n);if(!o&&n.toLowerCase().indexOf("error during connect")!==-1)return Qd(e,"error",void 0,n),"daemon";if(!o)return Qd(e,"unparsed",n),!0;let i=!sc(o,[1,35]);return!i&&await LC(t)?(Qd(e,"podman",n),!0):(Qd(e,i?"success":"failure",n),i)}function Qd(t,e,r,n){let o={outcome:e};r&&(o.version=r),n&&(o.errorMessage=n),t.sendTelemetryEvent("dockerVersion",o)}async function vV(t){try{return await zs(t,"version"),!0}catch{return await at.window.showErrorMessage("Docker Compose required",{modal:!0},"Documentation")&&at.env.openExternal(at.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079610")),!1}}var il=K(require("vscode"));var R_=class{constructor(e){this.fileHost=e}async provideDocumentLinks(e,r){let n=[],o=Ep(e.getText());if(!o)return n;let i=_p(o)||{};return i.configFilePath=e.uri,mt(i)&&this._linksForDockerfile(n,i,o,e),"dockerComposeFile"in i&&await this._linksForDockerCompose(n,i,o,e),n}_tryAddDocumentLinkToBucket(e,r,n,o,i){let s=e.positionAt(r),a=e.positionAt(n);s.compareTo(a)!==0&&i.push(new il.DocumentLink(new il.Range(s,a),o))}_linksForDockerfile(e,r,n,o){let i=Ci(n,["build","dockerfile"])||Ci(n,["dockerFile"]);i&&i.type==="string"&&this._tryAddDocumentLinkToBucket(o,i.offset+1,i.offset+i.length-1,hr(this.fileHost,r),e)}async _linksForDockerCompose(e,r,n,o){let s=(await qt(this.fileHost,r)).map(c=>il.Uri.file(c).path),a=Ci(n,["dockerComposeFile"]);if(s.length>0&&a)if(a.type==="array"&&a.children)for(let c=0;c<a.children.length;c++)this._tryAddDocumentLinkToBucket(o,a.children[c].offset+1,a.children[c].offset+a.children[c].length-1,o.uri.with({path:s[c]}),e);else a.type==="string"&&this._tryAddDocumentLinkToBucket(o,a.offset+1,a.offset+a.length-1,o.uri.with({path:s[0]}),e)}};var re=K(require("vscode")),ya=K(require("path"));var yV="Stop Container",wV="Reopen Folder locally",CV="Close Workspace",Xi;(function(o){o.Placeholder="Placeholder",o.Group="Group",o.Container="Container",o.Folder="Folder"})(Xi||(Xi={}));var Zt=class{static isGroupItem(e){return!!e&&e.type===Xi.Group}static isContainerItem(e){return!!e&&e.type===Xi.Container}static isFolderItem(e){return!!e&&e.type===Xi.Folder}},Xd;(function(n){n[n.DevContainers=0]="DevContainers",n[n.AttachContainers=1]="AttachContainers",n[n.OtherContainers=2]="OtherContainers"})(Xd||(Xd={}));var O_=class extends Zt{constructor(e,r){super();this.label=e;this.groupType=r;this.type=Xi.Group}async asTreeItem(e,r,n,o){return new re.TreeItem(this.label,re.TreeItemCollapsibleState.Expanded)}},Wn=class extends Zt{constructor(e,r=[],n,o=!1){super();this.container=e;this.folders=r;this.parent=n;this.isDevContainer=o;this.type=Xi.Container;this._alreadyCheckedRepository=!1}async asTreeItem(e,r,n,o){let i=new re.TreeItem(this.getContainerLabel(),this.getCollapsibleState());i.description=this.containerDescription;let s=this.getContextBase();i.iconPath=iv(r,eue),i.contextValue="exited"+s;let a=!1;return n&&this.container.Id===n.Id?(i.iconPath=iv(r,Zle),i.contextValue="active"+s,a=!0):e&&await this.setTreeItemIconAndContext(e,s,i),i.tooltip=this.getHover(a,i.iconPath instanceof re.ThemeIcon?i.iconPath:new re.ThemeIcon("vm"),i.label),this.folders.length===1&&(i.contextValue+="Folder"),i}getContextBase(){return(this.isDevContainer?"Dev":"")+"Container"}getCollapsibleState(){return this.folders.length>1?re.TreeItemCollapsibleState.Expanded:re.TreeItemCollapsibleState.None}async setTreeItemIconAndContext(e,r,n){switch(this.container.State.Status){case"created":{n.iconPath=new re.ThemeIcon("vm"),n.contextValue="exited"+r;break}case"paused":{n.iconPath=new re.ThemeIcon("vm-outline"),n.contextValue="running"+r;break}case"restarting":{n.iconPath=new re.ThemeIcon("vm-outline"),n.contextValue="exited"+r;break}case"exited":{n.iconPath=new re.ThemeIcon("vm"),n.contextValue="exited"+r;break}case"running":{n.iconPath=new re.ThemeIcon("vm-running"),n.contextValue="running"+r;break}}}getTimeElapsed(e){if(!e)return"";let r="",n=e.State.Status,o=new Date(e.State.StartedAt),i=new Date(e.State.FinishedAt);if(o.getFullYear()>1&&i.getFullYear()>1){let s=new Date,a=new Date(o>i?e.State.StartedAt:e.State.FinishedAt),c,l,u=s.getTime()-a.getTime();(l=Math.round(u/Wn.years))>0?l===1?c="year":c="years":(l=Math.round(u/Wn.days))>0?l===1?c="day":c="days":(l=Math.round(u/Wn.hours))>0?l===1?c="hour":c="hours":(l=Math.round(u/Wn.minutes))>0?l===1?c="minute":c="minutes":(l=Math.round(u/Wn.seconds),l===1?c="second":c="seconds"),r=` ${l} ${c}`+(n.endsWith("ing")?"":" ago")}return`${n.charAt(0).toUpperCase()+n.slice(1)}`+r}getContainerLabel(){if(Pc(this.container)&&this.folders.length>0)return`${ya.basename(this.folders[0].folder.path)}`;{let r=rb(this.container);if(r)return r;let n=this.repository;return n?n.repositoryName:this.container.Config.Image}}get containerDescription(){return this.container.Name.substr(1)}getHover(e,r,n){let o=new re.MarkdownString(void 0,!0);if(o.appendMarkdown(`$(${r.id}) ${n} (${this.container.Name.substr(1)})  
`),this.repository){let s=this.repository.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)";o.appendMarkdown(`${s} [${this.repository.fullRepositoryName}](${this.repository.gitUrlInfo.repositoryUrl})  
`)}let i=im(this.container);return i&&o.appendMarkdown(`$(file-symlink-directory) ${i}  
`),e?o.appendMarkdown("$(remote) Connected"):o.appendMarkdown(`$(history) ${this.getTimeElapsed(this.container)}`),o}get repository(){if(!this._alreadyCheckedRepository){let e=ea(this.container);e&&(this._repository=vn(e)),this._alreadyCheckedRepository=!0}return this._repository}inspect(e){return Pr(e,this.container.Id)}},yr=Wn;yr.seconds=1e3,yr.minutes=Wn.seconds*60,yr.hours=Wn.minutes*60,yr.days=Wn.hours*24,yr.years=Wn.days*365;var wa=class extends Zt{constructor(e,r,n){super();this.container=e;this.folder=r;this.isDevContainer=n;this.type=Xi.Folder}async asTreeItem(e,r,n,o){let i=new re.TreeItem(ya.basename(this.folder.path),re.TreeItemCollapsibleState.None);return i.description=this.folder.path,i.iconPath=iv(r,rue),i.contextValue="attachedFolder",this.isDevContainer&&!ea(this.container)&&(i.contextValue="devFolder"),n&&this.container.Id===n.Id&&o===this.folder.path&&(i.iconPath=iv(r,tue),i.tooltip=`Active Folder ${i.label}`,i.contextValue=`active${i.contextValue}`),i}};function Qle(t,e,r,n){if(!(!re.env.remoteName||re.env.remoteName!=="attached-container"&&re.env.remoteName!=="dev-container"))return bV(t,e,r,n)}function bV(t,e,r,n){re.commands.executeCommand("setContext","remote-containers:showDetails",!0);let o=new IV(t,e,n,e.output),i=re.window.createTreeView("detailsContainers",{treeDataProvider:o});return o.setTitle=s=>{i.title=s},t.subscriptions.push(r.onDidChangeActiveContainer(s=>o.refresh(s))),o}function Xle(t,e){let r=[yV];return t&&t.Id===e.Id&&re.workspace.workspaceFolders&&re.workspace.workspaceFolders.length>0&&(r.push(CV),re.workspace.workspaceFolders[0].uri.authority.startsWith("dev-container")&&r.push(wV)),r}var EV=class{constructor(e,r){this.dockerParams=e;this.containerId=r;this.writeEmitter=new re.EventEmitter;this.onDidWrite=this.writeEmitter.event;this.destroyables=[]}open(){let{cliHost:e,env:r,output:n}=this.dockerParams;e.exec({cmd:$n(),args:["logs","-f",this.containerId],env:r,output:n}).then(o=>{this.destroyables.push(o.stdout.on("data",i=>{this.write(i.toString())})),this.destroyables.push(o.stderr.on("data",i=>{this.write(i.toString())}))}).catch(console.error)}close(){this.writeEmitter.dispose(),this.destroyables.forEach(e=>{e.destroy()})}write(e){this.writeEmitter.fire(e.replace(/\n/g,`\r
`))}},_V=class{constructor(e,r,n,o,i,s){this.targetsTreeData=e;this.detailsTreeData=r;this.devVolumesTreeData=n;this.dockerParams=o;this.context=i;this.telemetry=s}updateDockerParameters(e){this.dockerParams=e}registerCommands(){let e=[];return e.push(re.commands.registerCommand("remote-containers.stopContainer",this.commandStopContainer,this)),e.push(re.commands.registerCommand("remote-containers.removeContainer",this.commandRemoveContainer,this)),e.push(re.commands.registerCommand("remote-containers.startContainer",this.commandStartContainer,this)),e.push(re.commands.registerCommand("remote-containers.removeRecentFolder",this.commandRemoveRecentFolder,this)),e.push(re.commands.registerCommand("remote-containers.showDetails",this.commandShowDetails,this)),e.push(re.commands.registerCommand("remote-containers.explorerDetailsRefresh",this.commandExplorerDetailsRefresh,this)),e.push(re.commands.registerCommand("remote-containers.attachToContainer",this.commandAttachToContainer,this)),e.push(re.commands.registerCommand("remote-containers.attachToContainerNewWindow",this.commandAttachToContainerNewWindow,this)),e.push(re.commands.registerCommand("remote-containers.inspectDockerResource",this.commandInspectDockerResource,this)),e.push(re.commands.registerCommand("remote-containers.inspectInBasicDevContainer",this.commandInspectInBasicDevContainer,this)),e.push(re.commands.registerCommand("remote-containers.cloneInVolume",this.commandCloneInVolume,this)),e.push(re.commands.registerCommand("remote-containers.removeVolume",this.commandRemoveVolume,this)),e.push(re.commands.registerCommand("remote-containers.pruneVolumes",this.commandPruneVolumes,this)),e.push(re.commands.registerCommand("remote-containers.explorerVolumesRefresh",this.commandExplorerVolumesRefresh,this)),e.push(re.commands.registerCommand("remote-containers.startAndOpenFolder",this.commandStartAndOpenFolder,this)),e.push(re.commands.registerCommand("remote-containers.newContainer",this.commandNewContainer,this)),e.push(re.commands.registerCommand("remote-containers.showContainerLog",this.commandShowContainerLog,this)),e}async commandStopContainer(e){if(!Zt.isContainerItem(e))return;let r=this.targetsTreeData.currentContainer&&this.targetsTreeData.currentContainer.Id===e.container.Id?"Stop active container? This will disconnect your current window.":`Stop ${e.getContainerLabel()}?`,n=await re.window.showWarningMessage(r,{modal:!0},...Xle(this.targetsTreeData.currentContainer,e.container));await this.targetsTreeData.withProgress(e,async()=>{switch(n){case yV:{await vE(this.dockerParams,e.container),e.container=await Pr(this.dockerParams,e.container.Id);break}case CV:{await re.commands.executeCommand("workbench.action.closeFolder");break}case wV:{await re.commands.executeCommand("remote-containers.reopenLocally");break}}})}async commandRemoveContainer(e){if(!Zt.isContainerItem(e))return;let r=await zr(this.dockerParams,e.container.Id);if(!r)return;let n=await re.window.showWarningMessage("Remove this container?",{modal:!0,detail:"This action is not reversible and deletes the container permanently."},"Remove");await this.targetsTreeData.withProgress(e.parent,async()=>{n==="Remove"&&(await vE(this.dockerParams,e.container),await dq(this.dockerParams,r.Id),this.detailsTreeData&&await this.detailsTreeData.refresh(void 0),await this.tryRemoveVolume(e.container))})}async tryRemoveVolume(e){let r=im(e);if(r||(r=i1(e)),r){let n=await Ph(this.dockerParams,r);if((await OC(this.dockerParams)).indexOf(r)>=0){let s;(n==null?void 0:n.Labels)&&n.Labels["vsch.local.repository.unique"]==="true"?s="The container is using a volume with a cloned repository.":s=`This is the last container using '${r}'.`,await re.window.showInformationMessage(s,{modal:!0,detail:"Do you want to remove the volume and the data it contains?"},"Remove")==="Remove"&&await yE(this.dockerParams,r)}}}async commandPruneVolumes(e){let r="Are you sure you want to remove all unused volumes?";await re.window.showInformationMessage(r,{modal:!0},"Remove")==="Remove"&&await this.targetsTreeData.withProgress(e,async()=>{await TO(this.dockerParams)})}async commandExplorerVolumesRefresh(e){return await this.devVolumesTreeData.getDockerParams(),this.devVolumesTreeData.refresh(void 0)}async commandStartContainer(e){!Zt.isContainerItem(e)||await this.targetsTreeData.withProgress(e,async()=>{await qm(this.dockerParams,e.container),e.container=await Pr(this.dockerParams,e.container.Id)})}async commandRemoveRecentFolder(e){!Zt.isFolderItem(e)||(await re.commands.executeCommand("vscode.removeFromRecentlyOpened",e.folder.toString()),await this.targetsTreeData.refresh(void 0))}async commandShowDetails(e){!Zt.isContainerItem(e)||(this.detailsTreeData||(this.detailsTreeData=bV(this.context,this.dockerParams,this.targetsTreeData,this.telemetry)),await this.detailsTreeData.refresh(e))}async commandExplorerDetailsRefresh(){this.detailsTreeData&&await this.detailsTreeData.refresh(void 0)}async commandStartAndOpenFolder(e){let r,n;Zt.isFolderItem(e)?(n=e,r=e.container):yr.isContainerItem(e)&&(n=e.folders[0],r=e.container),r&&(await qm(this.dockerParams,r),await re.commands.executeCommand("remote-containers.openFolder",n))}async commandAttachToContainer(e){return this.attachToContainerInternal(e)}async commandAttachToContainerNewWindow(e){return this.attachToContainerInternal(e,!0)}async attachToContainerInternal(e,r=!1){let n;Zt.isContainerItem(e)?n=e.container:this.detailsTreeData&&(n=this.detailsTreeData.container),n&&(await qm(this.dockerParams,n),await sv(this.dockerParams,n,this.context,r))}async commandInspectDockerResource(e){let r;(Zt.isContainerItem(e)||Zi.isImageItem(e)||Zi.isVolume(e)||Zi.isDevVolume(e))&&(r=await e.inspect(this.dockerParams)),r&&re.window.showTextDocument(await re.workspace.openTextDocument({language:"json",content:JSON.stringify(r,null,"	")}))}async commandInspectInBasicDevContainer(e){Zi.isDevVolume(e)&&await e.inspectInBasicDevContainer()}async commandCloneInVolume(e){Zi.isDevVolume(e)&&await e.cloneRepositoryInVolume()}async commandRemoveVolume(e){Zi.isDevVolume(e)&&await e.removeVolume(this.dockerParams)}async commandNewContainer(){let e=[{label:"Open Current Folder in Container",command:"remote-containers.reopenInContainer"},{label:"Open Folder in Container...",command:"remote-containers.openFolder"},{label:"Open Workspace in Container...",command:"remote-containers.openWorkspace"},{label:"Clone Repository in Container Volume...",command:"remote-containers.openRepositoryInVolume"},{label:"Clone GitHub Pull Request in Container Volume...",command:"remote-containers.openPullRequestInVolume"},{label:"Try a Sample...",command:"remote-containers.trySample"}],r=await re.window.showQuickPick(e,{placeHolder:"Select an action to create a container"});if(r)return re.commands.executeCommand(r.command)}async commandShowContainerLog(e){if(!Zt.isContainerItem(e))return;let r=new EV(this.dockerParams,e.container.Id);re.window.createTerminal({name:e.container.Config.Image,pty:r}).show()}};async function SV(t,e,r,n){re.commands.executeCommand("setContext","remote-containers:showDetails",!1);let o=new xV(t,e,s,r,n),i=re.window.createTreeView("targetsContainers",{treeDataProvider:o});o.setMessage=a=>i.message=a,t.subscriptions.push(re.commands.registerCommand("remote-containers.explorerTargetsRefresh",async()=>(await o.getDockerParams(!0),o.refresh(void 0))));function s(a){let c=Qle(t,a,o,r),l=new AV(t,r,n),u=re.window.createTreeView("devVolumes",{treeDataProvider:l});t.subscriptions.push(u);let d=new _V(o,c,l,a,t,r);t.subscriptions.push(...d.registerCommands()),t.subscriptions.push(sq(t)(async()=>{o.refresh(void 0),l.refresh(void 0);let f=await We(t,n);c&&c.updateDockerParameters(f),d.updateDockerParameters(f)}))}}var xV=class{constructor(e,r,n,o,i){this.context=e;this.resolverResults=r;this.onFirstReveal=n;this.telemetry=o;this.output=i;this._onDidChangeTreeData=new re.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._onDidChangeActiveContainer=new re.EventEmitter;this.onDidChangeActiveContainer=this._onDidChangeActiveContainer.event;this.refreshDockerParams=!1;this.needsSSHCredentials=!1;this.setTreeMessage=()=>{};this.devContainers=[];this.attachContainers=[];this.otherContainers=[];this.recentAttachEntries=new Map;this.recentAttachDevContainerEntries=new Map;this.recentDevComposeEntries=new Map;this.containerItems=new Map;this.action=Promise.resolve();this.needsDockerStartOrInstallContext=void 0;this.hasContainersContext=void 0}set setMessage(e){this.setTreeMessage=e}get currentContainer(){return this._currentContainer}async getDockerParams(e=!1){if(!this.dockerParams){this.passiveSSHAskpassEnv||(this.passiveSSHAskpassEnv=so(this.context.extensionPath,async r=>(this.needsSSHCredentials=!0,zo(r,!1)),this.output));try{this.dockerParams=await We(this.context,this.output,void 0,void 0,e?void 0:this.passiveSSHAskpassEnv,!1),await Jd(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0)}catch(r){if(!this.needsSSHCredentials)throw r}}return this.dockerParams}handleDockerEvent(e){try{let r=JSON.parse(e.toString());if(!r.Action)return;let n="exec_create: /root/.vscode-server";if(r.Action==="die"||r.Action==="destroy"||r.Action==="create")this._onDidChangeTreeData.fire();else if(!r.Action.startsWith("exec_create")&&r.Actor&&r.Actor.ID&&this.containerItems.has(r.Actor.ID)){let o=this.containerItems.get(r.Actor.ID);this.dockerParams&&o?(async()=>{o.container=await Pr(this.dockerParams,o.container.Id),this._onDidChangeTreeData.fire(o)})():this._onDidChangeTreeData.fire(o);return}else if(r.Action.startsWith(n)){this._onDidChangeTreeData.fire();return}}catch{}}async tryEnsureDocker(){let e=await this.getDockerParams();if(!!e)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await Th(e,{event:["create","destroy","die","health-status","kill","pause","rename","resize","restart","start","stop","unpause","update","exec_create"]}),this.eventsProcess.stdout.on("data",r=>{this.handleDockerEvent(r)})}catch(r){r.code!=="ENOENT"&&console.log(r),this.dockerParams=void 0}}async getTreeItem(e){return e.asTreeItem(this.dockerParams,this.context,this._currentContainer,this.currentFolder)}async setDockerStartOrInstallContext(e){(this.needsDockerStartOrInstallContext===void 0||this.needsDockerStartOrInstallContext!==e)&&(this.needsDockerStartOrInstallContext=e,!this.needsDockerStartOrInstallContext&&this.hasContainersContext===!1&&this.setHasContainersContext(!0),await re.commands.executeCommand("setContext","remote-containers:needsDockerStartOrInstall",!this.needsDockerStartOrInstallContext&&!this.needsSSHCredentials),await re.commands.executeCommand("setContext","remote-containers:needsSSHCredentials",!this.needsDockerStartOrInstallContext&&this.needsSSHCredentials))}async setHasContainersContext(e){if(this.hasContainersContext===void 0||this.hasContainersContext!==e){this.hasContainersContext=e;let r=re.workspace.workspaceFolders&&re.workspace.workspaceFolders.length>0?"remote-containers:noContainersWithFolder":"remote-containers:noContainersWithoutFolder";await re.commands.executeCommand("setContext",r,!this.hasContainersContext)}}async getDockerOrShowMessage(e){return this.refreshDockerParams&&(this.refreshDockerParams=!1,this.dockerParams=void 0),!this.dockerParams&&(e===void 0&&await this.tryEnsureDocker(),!this.dockerParams)?(this.setDockerStartOrInstallContext(!1),this._onDidChangeActiveContainer.fire(void 0),!1):(this.setDockerStartOrInstallContext(!0),!0)}async getChildGroups(e){this.containerItems.clear(),await this.setCurrents(),await this.setContainerTypes(e);let r=[];return(this.devContainers.length>0||this.attachContainers.length>0)&&r.push(new O_("Dev Containers",0)),this.otherContainers.length>0&&r.push(new O_("Other Containers",2)),r}async getChildDevContainer(e,r){let n=await this.getWorkspaceFolderFromContainer(e),o=n?[new wa(e,n,!0)]:[],i=Pc(e);i&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new wa(e,a,!1))):i&&this.recentAttachEntries.has(e.Id)?o.push(...this.recentAttachEntries.get(e.Id).map(a=>new wa(e,a,!1))):(i=ea(e))&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new wa(e,a,!1))):i===void 0&&this.recentDevComposeEntries.has(e.Id)&&o.push(...this.recentDevComposeEntries.get(e.Id).map(a=>new wa(e,a,!1)));let s=new yr(e,o,r,!0);return this.setContainerItems(s),s}setContainerItems(e){this.containerItems.set(e.container.Id,e),this._currentContainer&&e.container.Id===this._currentContainer.Id&&this._onDidChangeActiveContainer.fire(e)}async getChildContainers(e){if(e.groupType===0){let r=this.devContainers.map(async n=>this.getChildDevContainer(n,e));return r.push(...this.attachContainers.map(async n=>{let o=new yr(n,this.recentAttachEntries.get(n.Id).map(i=>new wa(n,i,!1)),e);return this.setContainerItems(o),o})),Promise.all(r)}else return this.otherContainers.map(r=>{let n=new yr(r,[],e);return this.setContainerItems(n),n})}getChildFolders(e){return e.folders&&e.folders.length>1?e.folders:[]}async getChildItems(e){if(e===void 0){let r=await Uo(this.dockerParams,!0);if(await this.setHasContainersContext(r.length>0),r.length===0)return[];let n=await Ri(this.dockerParams,r);return this.getChildGroups(n)}else{if(Zt.isGroupItem(e))return this.getChildContainers(e);if(Zt.isContainerItem(e))return this.getChildFolders(e)}return[]}async getChildren(e){return await this.action,await this.getDockerOrShowMessage(e)?(this.onFirstReveal&&(this.onFirstReveal(this.dockerParams),this.onFirstReveal=void 0),this.setTreeMessage(void 0),this.getChildItems(e)):[]}async refresh(e){e===void 0&&(this.refreshDockerParams=!0),this._onDidChangeTreeData.fire(e)}async setCurrents(){let e=re.workspace.workspaceFolders,r;if(this.dockerParams){if(e&&e.length>0){let n=this.resolverResults.get(e[0].uri.authority);n&&n.dockerContainerId&&(r=await zr(this.dockerParams,n.dockerContainerId),this.currentFolder=e[0].uri.path)}else if(this.resolverResults.size>0){let n=[...this.resolverResults.values()][0].dockerContainerId;n&&(r=await zr(this.dockerParams,n))}}r!==this._currentContainer&&(this._currentContainer=r)}addContainerToMap(e){if(Pc(e)){this.devContainers.push(e);return}else if(ea(e)){this.devContainers.push(e);return}else if(rb(e)&&this.recentDevComposeEntries.has(e.Id)){this.devContainers.push(e);return}else if(this.recentAttachEntries.has(e.Id)){this.attachContainers.push(e);return}this.otherContainers.push(e)}async setContainerTypes(e){return await this.setRecentEntries(e),this.devContainers.length=0,this.attachContainers.length=0,this.otherContainers.length=0,e.forEach(r=>{this.addContainerToMap(r)}),{hasDev:this.devContainers.length>0,hasAttach:this.attachContainers.length>0}}async getWorkspaceFolderFromHostWorkspace(e){let r=this.dockerParams.cliHost,n=Ue(r.path,e),o=await fo(r,n,vo()),i={cliHost:r,appRoot:re.env.appRoot,extensionPath:this.context.extensionPath,package:await un(this.context.extensionPath),output:this.output},s=o&&await Uc(i,n.rootFolderPath,o);if(s&&mt(s.configuration))return re.Uri.parse($u(e,s.workspace.workspaceFolder,void 0),!0)}async getWorkspaceFolderFromContainer(e){let r=Pc(e);if(r)return this.getWorkspaceFolderFromHostWorkspace(r);{let n=ea(e),o=im(e),i=s1(e);if(n)return re.Uri.parse(ta(n,o,i,!1,void 0,void 0))}}async getWorkspaceFolderFromHostPath(e){let r=this.dockerParams.cliHost,n=await h1(r,e,this.output),o=m1(r,n,e);return re.Uri.parse($u(e,o,void 0),!0)}getWorkspaceFolderFromRepository(e,r,n){return re.Uri.parse(ta(e,r,n,!1,void 0,void 0),!0)}async findComposeTargetContainer(e,r){if(!this.dockerParams)return;let n=Ue(this.dockerParams.cliHost.path,e),o=await fo(this.dockerParams.cliHost,n,vo()),i={cliHost:this.dockerParams.cliHost,appRoot:re.env.appRoot,extensionPath:this.context.extensionPath,package:await un(this.context.extensionPath),output:this.output},s=o&&await Uc(i,n.rootFolderPath,o);if(s&&"dockerComposeFile"in s.configuration){let a=await qt(this.dockerParams.cliHost,s.configuration),c=await Ou(this.dockerParams,n,a);return $L(r,c,s.configuration.service)}}trySetEntryWithAttachAuthority(e,r,n){let o;if("containerName"in r){let i=n.find(s=>s.Name===r.containerName);i&&(o=i.Id)}else o=r.containerId;o&&(this.recentAttachEntries.has(o)?this.recentAttachEntries.get(o).push(e):this.recentAttachEntries.set(o,[e]))}async trySetEntryWithDevAuthority(e,r,n,o){let i=r.hostPath,s=o[i];if(s||(s=await this.getWorkspaceFolderFromHostPath(r.hostPath),o[i]=s),s.path!==e.path){this.recentAttachDevContainerEntries.has(r.hostPath)?this.recentAttachDevContainerEntries.get(r.hostPath).push(e):this.recentAttachDevContainerEntries.set(r.hostPath,[e]);let a=await this.findComposeTargetContainer(r.hostPath,n);a&&this.recentDevComposeEntries.has(a)?this.recentDevComposeEntries.get(a).push(e):a&&this.recentDevComposeEntries.set(a,[e])}}trySetEntryWithRepoAuthority(e,r){this.getWorkspaceFolderFromRepository(r.repositoryPath,r.volumeName,r.folder).path!==e.path&&(this.recentAttachDevContainerEntries.has(r.repositoryPath)?this.recentAttachDevContainerEntries.get(r.repositoryPath).push(e):this.recentAttachDevContainerEntries.set(r.repositoryPath,[e]))}trySetEntryWithVolumeAuthority(e,r){let n=r.volumeName;!n||(this.recentAttachEntries.has(n)?this.recentAttachEntries.get(n).push(e):this.recentAttachEntries.set(n,[e]))}async trySetEntry(e,r,n){var s;if(!e||!e.folderUri&&!e.workspace.configPath)return;let o=(s=e.folderUri)!=null?s:e.workspace.configPath,i=um(o.authority);if(i)this.trySetEntryWithAttachAuthority(o,i,r);else{let a=Cn(o.authority);a&&(Yt(a)?await this.trySetEntryWithDevAuthority(o,a,r,n):yn(a)?this.trySetEntryWithRepoAuthority(o,a):this.trySetEntryWithVolumeAuthority(o,a))}}async setRecentEntries(e){this.recentAttachEntries.clear(),this.recentAttachDevContainerEntries.clear(),this.recentDevComposeEntries.clear();let r=await re.commands.executeCommand("_workbench.getRecentlyOpened");if(r&&r.workspaces){let n={};for(let o of r.workspaces)await this.trySetEntry(o,e,n)}}withProgress(e,r){return this.action=this.action.then(()=>r()),this.refresh(e)}},Vn;(function(s){s.Default="Default",s.Title="Title",s.Image="Image",s.Port="Port",s.Volume="Volume",s.DevVolume="DevVolume"})(Vn||(Vn={}));var Zi=class{constructor(e){this.label=e;this.type=Vn.Default}static isDetailItem(e){return!!e&&e.label!==void 0&&e.type!==void 0}static isImageItem(e){return!!e&&e.type===Vn.Image}static isVolume(e){return!!e&&e.type===Vn.Volume}static isDevVolume(e){return!!e&&e.type===Vn.DevVolume}},PV=class{constructor(e){this.detail=e;this.type=Vn.Image;this.context="image";this.label="Image"}inspect(e){return gc(e,this.detail)}},kV=class{constructor(e,r){this.label=e;this.volumeDetails=r;this.type=Vn.Volume;this.context="volume"}async inspect(e){return Ph(e,this.volumeDetails)}},IV=class{constructor(e,r,n,o){this.context=e;this.dockerParams=r;this.telemetry=n;this.output=o;this._onDidChangeTreeData=new re.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.setTreeTitle=()=>{}}updateDockerParameters(e){this.dockerParams=e}set setTitle(e){this.setTreeTitle=e}get container(){return this._container?this._container.container:void 0}getTreeItem(e){let r=new re.TreeItem(e.label,Array.isArray(e.detail)&&e.detail.length>0?re.TreeItemCollapsibleState.Expanded:re.TreeItemCollapsibleState.None);return r.tooltip=e.label,e.detail&&!Array.isArray(e.detail)&&(r.description=e.detail,r.tooltip+=` ${r.description}`),r.contextValue=e.context,r.command=e.command,r}async getAttributes(e,r,n){let o=[];r&&o.push({label:"Workspace",detail:r});let i=ea(e.container);return i&&o.push({label:"Repository",detail:i}),o.push({label:"Name",detail:e.container.Name}),o.push(new PV(e.container.Config.Image)),n&&o.push({label:"Configuration",detail:n,command:{title:"Open Dev Container File",command:"remote-containers.openDevContainerFile",arguments:[n]},context:"devContainer"}),o}async getMounts(e){let r=[];return e&&e.Mounts.forEach(n=>{if(n.Type==="volume"){let o=n.Name,i=new kV(`Volume: ${o}`,o),s={label:`Destination: ${n.Destination}`,detail:void 0};r.push({label:"Volume mount",detail:[i,s]})}else if(n.Type==="bind"){let o={label:`Source: ${n.Source}`,detail:void 0},i={label:`Destination: ${n.Destination}`,detail:void 0};r.push({label:"Bind mount",detail:[o,i]})}}),r}async getChildrenFromRoot(e){let r=[],n=Pc(e.container),o;if(this.dockerParams&&n){let a=await fo(this.dockerParams.cliHost,Ue(this.dockerParams.cliHost.path,n),vo());a&&(o=_e(a,this.dockerParams.cliHost.platform))}r.push({label:"Attributes",detail:await this.getAttributes(e,n,o),type:Vn.Title});let i;this.dockerParams&&(i=await Pr(this.dockerParams,e.container.Id));let s=await this.getMounts(i);return s.length>0&&r.push({label:"Mounts",detail:s,type:Vn.Title}),r}async testContainer(){let e=!0;try{(this.dockerParams?await Pr(this.dockerParams,this._container.container.Id):void 0)===void 0&&(e=!1)}catch{e=!1}return e||(this._container=void 0,this.setTreeTitle("Details (Containers)")),e}async getChildren(e){if(this._container===void 0)return[];let r=[];return e===void 0?await this.testContainer()&&(this.setTreeTitle(this._container.getContainerLabel()),r=await this.getChildrenFromRoot(this._container)):Array.isArray(e.detail)&&r.push(...e.detail),r}async refresh(e){this.dockerParams=await We(this.context,this.output),await Jd(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0,this._container=void 0),this._container=e||this._container,this._onDidChangeTreeData.fire(void 0)}},TV=class extends Zi{constructor(e){super(e.Name);this.type=Vn.DevVolume;this.volumeDetails=e,this.createdAt=void 0}async asTreeItem(){let e=this.getLabel(),r=new re.TreeItem(e,re.TreeItemCollapsibleState.None);return r.iconPath=this.iconPath,r.description=this.getDescription(),this.isUniqueVolume()?r.contextValue="uniqueDevVolume":r.contextValue="devVolume",r}isUniqueVolume(){let e=this.volumeDetails.Labels;if(e){let r=e["vsch.local.repository.unique"];if(r&&r==="true")return!0}return!1}getLabel(){let e=this.volumeDetails.Name;if(this.volumeDetails.Labels&&this.isUniqueVolume()){let n=this.getRepository();n&&n.gitUrlInfo.repository!=="unknown"&&(e=n.gitUrlInfo.fullRepositoryName)}return e}getDescription(){let e="";if(this.volumeDetails.Labels&&this.isUniqueVolume()){let n=this.getRepository();if(n&&n.gitUrlInfo.repository!=="unknown"){let o=this.getBranchName(),i=this.getPullRequestId();i?e=`#${i}`:o&&(e=`${o}`)}}return e}getBranchName(){let e=this.volumeDetails.Labels;if(e&&this.isUniqueVolume()&&e["vsch.local.repository.branch"])return e["vsch.local.repository.branch"]}getPullRequestId(){let e=this.volumeDetails.Labels;if(e&&this.isUniqueVolume()&&e["vsch.local.repository.pullRequestId"])return e["vsch.local.repository.pullRequestId"]}getRepository(){let e=this.volumeDetails.Labels;if(e){let r=e["vsch.local.repository.unique"];if(r&&r==="true"){let n=e["vsch.local.repository"];return vn(n)}}}get iconPath(){return new re.ThemeIcon("file-symlink-directory")}getTimeElapsed(){if(this.createdAt)return this.createdAt;let e="";if(new Date(this.volumeDetails.CreatedAt).getFullYear()>1){let n=new Date,o=new Date(this.volumeDetails.CreatedAt),i,s,a=n.getTime()-o.getTime();(s=Math.round(a/yr.years))>0?s===1?i="year":i="years":(s=Math.round(a/yr.days))>0?s===1?i="day":i="days":(s=Math.round(a/yr.hours))>0?s===1?i="hour":i="hours":(s=Math.round(a/yr.minutes))>0?s===1?i="minute":i="minutes":(s=Math.round(a/yr.seconds),s===1?i="second":i="seconds"),e=` ${s} ${i} ago`}return this.createdAt=e,e}async inspect(e){return Ph(e,this.volumeDetails.Name)}async inspectInBasicDevContainer(){await re.commands.executeCommand("remote-containers.inspectVolume",this.volumeDetails.Name)}async cloneRepositoryInVolume(){await re.commands.executeCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",this.volumeDetails.Name)}async removeVolume(e){if(!((await OC(e)).indexOf(this.volumeDetails.Name)>=0)){await re.window.showInformationMessage(`Volume '${this.volumeDetails.Name}' is in use and cannot be removed.`,{modal:!0});return}await re.window.showInformationMessage(`Are you sure you want to remove volume '${this.volumeDetails.Name}'?`,{modal:!0},"Remove")==="Remove"&&await yE(e,this.volumeDetails.Name)}},AV=class{constructor(e,r,n){this.context=e;this.telemetry=r;this.output=n;this._onDidChangeTreeData=new re.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event}async getTreeItem(e){return e.asTreeItem()}async getDockerParams(){return this.dockerParams||(this.dockerParams=await We(this.context,this.output,void 0,void 0),await Jd(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0)),this.dockerParams}async setHasVolumesContext(e){await re.commands.executeCommand("setContext","remote-containers:noDevVolumes",e)}async getDockerOrShowMessage(e){return!(!this.dockerParams&&(e===void 0&&await this.tryEnsureDocker(),!this.dockerParams))}async getChildren(e){if(!await this.getDockerOrShowMessage(e))return[];let r=await We(this.context,this.output),n=await ao(r),o=await mu(r,n),i=a=>!(a.Name==="vscode"||a.Name.length===64&&/^[0-9a-fA-F]+$/.test(a.Name)),s=o.filter(i);return await this.setHasVolumesContext(s.length===0),s.sort((a,c)=>{let l=new Date(a.CreatedAt);return new Date(c.CreatedAt).getTime()-l.getTime()}),s.map(a=>new TV(a))}async resolveTreeItem(e,r){let n=await We(this.context,this.output),o=await this.getAssociatedContainers(n,r),i=r.getLabel(),s=r.getRepository(),a=r.getBranchName(),c=r.getPullRequestId(),l=r.getTimeElapsed();return o.length>0?e.tooltip=this.renderMarkdown(i,s,a,c,l,o.join(", ")):e.tooltip=this.renderMarkdown(i,s,a,c,l,"*None*"),e}async getAssociatedContainers(e,r){let n=[],o=await Uo(e,!0),i=await Ri(e,o);for(let s of i)for(let a of s.Mounts)a.Type==="volume"&&a.Name===r.volumeDetails.Name&&n.push(s.Name.substring(1));return n}renderMarkdown(e,r,n,o,i,s){let a=new re.MarkdownString(void 0,!0);if(r){let c=r.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)",l=r.gitUrlInfo.repositoryUrl;l.startsWith("http")?(l=r.gitUrlInfo.repositoryUrl.replace(".git",""),a.appendMarkdown(`${c} [${l}](${l})
`)):a.appendMarkdown(`${c} ${l})
`),a.appendMarkdown(`&nbsp;  
`),n&&(r.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-compare) [${n}](${l}/tree/${n})
`):a.appendMarkdown(`$(git-compare) ${n}
`),a.appendMarkdown(`&nbsp;  
`)),o&&(r.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-pull-request-create) [#${o}](${l}/pull/${o})
`):a.appendMarkdown(`$(git-pull-request-create) #${o}
`),a.appendMarkdown(`&nbsp;  
`)),a.appendMarkdown(`$(history) ${i}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`)}else a.appendMarkdown(`$(file-symlink-directory) ${e}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(history) ${i}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`);return a}handleDockerEvent(e){try{let r=JSON.parse(e.toString());if(!r.Action)return;(r.Action==="die"||r.Action==="destroy"||r.Action==="create"||r.Action==="prune")&&this._onDidChangeTreeData.fire()}catch{}}async tryEnsureDocker(){let e=await this.getDockerParams();if(!!e)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await Th(e,{event:["destroy","die","kill","create","rename","resize","restart","start","stop","unpause","prune"]}),this.eventsProcess.stdout.on("data",r=>{this.handleDockerEvent(r)})}catch(r){r.code!=="ENOENT"&&console.log(r),this.dockerParams=void 0}}async refresh(e){e===void 0&&(this.dockerParams=void 0),this._onDidChangeTreeData.fire(e)}},Zle="vm-active",eue="vm-default",tue="folder-active",rue="folder";function iv(t,e){let r=`${e}.svg`;return{light:re.Uri.file(t.asAbsolutePath(ya.join("resources","light",r))),dark:re.Uri.file(t.asAbsolutePath(ya.join("resources","dark",r))),highContrast:re.Uri.file(t.asAbsolutePath(ya.join("resources","highContrast",r)))}}var N_=K(require("util"));var Pn=K(require("vscode"));async function DV(t,e,r={}){let n=nc(e[0],e.slice(1),void 0),o=await OD(e[0],e.slice(1),void 0,t.loadNativeModule),i=await sh({params:t,createdAt:void 0,startedAt:void 0,sharedDataFolderIsLocalCacheFolder:!1,sharedDataFolder:void 0,remoteWorkspaceFolder:"/",containerUser:void 0,containerGroup:void 0,containerEnv:void 0,remoteExec:n,remotePtyExec:o,remoteExecAsRoot:void 0,rootShellServer:void 0}),{hostOrContainerPort:s,connectionToken:a,webConnectionToken:c,remoteEnv:l,serverDownloaded:u}=await ch(t,i,r,async()=>{},void 0);return{params:t,properties:i,config:void 0,resolvedAuthority:{host:Ni,port:s,connectionToken:a,extensionHostEnv:l},webConnectionToken:c,tunnelInformation:{},dockerParams:void 0,dockerContainerId:void 0,serverDownloaded:u}}async function RV(t,e,r){var n,o,i;if(!!await Bi(t))if(r&&r.name){let s=["get","pod",r.name,"-o","json"];r.namespace&&s.push("--namespace",r.namespace);let{cliHost:a,env:c,output:l}=e,u=(await xe({exec:a.exec,cmd:"kubectl",args:["config","current-context"],env:c,output:l})).stdout.toString().trim(),f=(await xe({exec:a.exec,cmd:"kubectl",args:s,env:c,output:l})).stdout.toString(),p=JSON.parse(f),h=((n=p.spec)==null?void 0:n.containers)||[];if(!h.length){e.output.write(`No containers found. Pod details:
${f}`),await Pn.window.showErrorMessage("No containers found.",{modal:!0},"Show Log")&&Pn.commands.executeCommand(ho);return}let m=h.length>1?(o=await Pn.window.showQuickPick(h.map(g=>({label:g.name,detail:g.image,container:g})),{placeHolder:"Select container"}))==null?void 0:o.container:h[0];if(m){let g=((i=p.metadata)==null?void 0:i.namespace)||r.namespace,v={remoteAuthority:oue({context:u,podname:r.name,namespace:g,name:m.name,image:m.image})};/\d$/.test(t.extensionPath)||(v.reuseWindow=!0),await Pn.commands.executeCommand("vscode.newWindow",v)}}else e.output.write(`No Pod name found. Pod object:
${JSON.stringify(r,void 0,"  ")}`),await Pn.window.showErrorMessage("No Pod name found.",{modal:!0},"Show Log")&&Pn.commands.executeCommand(ho)}async function OV(t,e,r,n,o){return await Bi(t)?se(V({},await nue(t,e,r,n,o)),{isTrusted:!0}):(await Pn.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function nue(t,e,r,n,o){let i;return Pn.window.withProgress({location:Pn.ProgressLocation.Notification,title:jc,cancellable:!1},async s=>{try{let a=iue(r),c=process.cwd(),l=await Nn(void 0,c,mo,jn(),t.extensionPath,Yo(),e.product,n.log,yo);i=await $c({authority:r,extensionContext:t,sessionStart:n.sessionStart,progress:s,cliHost:l,env:l.env,cwd:c,isLocalContainer:!0,telemetry:e,output:n.log,logFilePath:n.logFilePath,allowSystemConfigChange:!1,postCreate:o}),i.setWorkspaceName(`${a.name} in ${a.podname} (${a.image})`);let u=["kubectl","exec","-it",a.podname];return a.context&&u.push("--context",a.context),a.namespace&&u.push("--namespace",a.namespace),u.push("--container",a.name,"--"),await DV(i,u)}catch(a){let c=a instanceof we?a:new we({description:"An error occurred attaching to the container.",originalError:a});throw c.actions=[...Tc,na,Fi,Ic,ra],c}}).then(s=>(Ko(e,"k8s-container","success",i,void 0,s.properties),s),s=>{let a=s instanceof we?s:new we({description:"An error occurred attaching to the container.",originalError:s});return Ko(e,"k8s-container","failure",i,void 0,a.containerProperties,a),Mi(a,"k8s-container",e,!0,n)})}function oue(t){let e=[];for(let r in t){let n=t[r];n&&e.push(`${r}=${encodeURIComponent(n)}`)}return`k8s-container+${e.join("+")}`}function iue(t){return t.substr(t.indexOf("+")+1).split("+").reduce((e,r)=>{let n=r.indexOf("=");return n!==-1&&(e[r.substr(0,n)]=decodeURIComponent(r.substr(n+1))),e},{})}var tt=K(require("vscode")),sl=K(require("fs")),al=K(require("os")),Ca=K(require("path")),av=K(require("child_process")),cl=K(require("util"));function cv(t){switch(t.quality){case"stable":return"";case"insider":return"-insiders";default:return`-${t.quality}`}}async function NV(t,e){var c;let r=t.globalStorageUri,n=cn.joinPath(r,"cli-bin");await tt.workspace.fs.createDirectory(n);let o="";try{o=(await tt.workspace.fs.readFile(cn.joinPath(n,"remote-containers-path"))).toString()}catch(l){if((l==null?void 0:l.code)!=="FileNotFound")return}if(o===t.extensionPath)return;let i=cn.joinPath(t.extensionUri,"dev-containers-user-cli","bin"),s=cv(e),a=[{source:"devcontainer",destination:`devcontainer${s}`},{source:"devcontainer.cmd",destination:`devcontainer${s}.cmd`}];for(let l of a)tt.workspace.fs.copy(cn.joinPath(i,l.source),cn.joinPath(n,l.destination),{overwrite:!0});await tt.workspace.fs.writeFile(cn.joinPath(n,"vscode-app-root"),Buffer.from(tt.env.appRoot,"utf-8")),await tt.workspace.fs.writeFile(cn.joinPath(n,"vscode-path"),Buffer.from(process.argv0,"utf-8")),await tt.workspace.fs.writeFile(cn.joinPath(n,"vscode-quality"),Buffer.from((c=e.quality)!=null?c:"","utf-8")),await tt.workspace.fs.writeFile(cn.joinPath(n,"vscode-machine-id"),Buffer.from(tt.env.machineId,"utf-8")),await tt.workspace.fs.writeFile(cn.joinPath(n,"remote-containers-path"),Buffer.from(t.extensionPath,"utf-8"))}async function sue(t,e){let r=cv(e),n="";try{if(n=(await(0,cl.promisify)(av.exec)(`powershell.exe -NoProfile -NonInteractive -Command "[System.Environment]::GetEnvironmentVariable('PATH', 'User')"`)).stdout.toString().trim(),n.indexOf(t)>=0)return await tt.window.showInformationMessage("The devcontainer CLI is already in your PATH",{modal:!0,detail:`Try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`}),!0;switch(await tt.window.showInformationMessage("The devcontainer CLI needs to be added to your PATH",{modal:!0},"Add","Copy CLI Path")){case"Add":let s=(0,cl.promisify)(av.exec)(`powershell.exe  -NoProfile -NonInteractive -Command "[System.Environment]::SetEnvironmentVariable('PATH', '${n};${t}', 'User')`),a=tt.window.showInformationMessage("The devcontainer CLI has been added to your PATH",{modal:!0,detail:`Try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`});await Promise.all([s,a]);break;case"Copy CLI Path":await tt.env.clipboard.writeText(t),await tt.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break}return!0}catch{return!1}}async function aue(t,e){var a;let n=((a=process.env.PATH)!=null?a:"").split(":"),o=[Ca.join(al.homedir(),"bin"),Ca.join(al.homedir(),".local/bin")],i="/usr/local/bin";al.platform()==="darwin"&&o.push(i);let s=(0,cl.promisify)(sl.stat);for(let c of o){if(n.findIndex(p=>p===c)<0)continue;try{await s(c)}catch{continue}let l=cv(e),u=Ca.join(c,`devcontainer${l}`);try{let p=await s(u);return console.log(p),await tt.window.showInformationMessage(`The devcontainer CLI is already symlinked in ${c}`,{modal:!0,detail:`Try running 'devcontainer${l} --help'
Note: you may need to restart your shell for PATH changes to take effect`}),!0}catch(p){if((p==null?void 0:p.code)!=="ENOENT")return!1}let d=await tt.window.showInformationMessage("The devcontainer CLI needs to be in your PATH",{detail:`Create a symlink in ${c}?`,modal:!0},"Create","Copy CLI Path"),f=Ca.join(t,`devcontainer${l}`);switch(d){case"Create":if(c===i){if(!await cue(f,u))break}else await(0,cl.promisify)(sl.symlink)(f,u);await tt.window.showInformationMessage(`The devcontainer CLI has been symlinked in ${c}`,{modal:!0,detail:`Try running 'devcontainer${l} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break;case"Copy CLI Path":await tt.env.clipboard.writeText(t),await tt.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${l} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break}return!0}return!1}async function cue(t,e){try{return await sl.promises.symlink(t,e),!0}catch(r){if(r.code!=="EACCES"&&r.code!=="ENOENT")throw r;if(await tt.window.showInformationMessage("This will now prompt with 'osascript' for Administrator privileges to install the shell command.",{modal:!0},"OK")==="OK"){let o=`osascript -e "do shell script \\"mkdir -p ${Ca.dirname(e)} && ln -sf '${t}' '${e}'\\" with administrator privileges"`;return await(0,cl.promisify)(av.exec)(o),!0}return!1}}async function LV(t,e){let r=t.globalStorageUri,n=cn.joinPath(r,"cli-bin").fsPath;switch(al.platform()){case"win32":if(await sue(n,e))return;break;case"darwin":case"linux":if(await aue(n,e))return;break}if(await tt.window.showInformationMessage("The devcontainer CLI needs to be included your PATH",{modal:!0},"Copy CLI Path")==="Copy CLI Path"){await tt.env.clipboard.writeText(n);let i=cv(e);await tt.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${i} --help'
Note: you may need to restart your shell for PATH changes to take effect`})}}var $V=class{constructor(e,r,n){this.context=e;this.telemetry=n,this.output=r}handleUri(e){switch(e.path){case"/cloneInVolume":this.cloneInVolume(e)}}async cloneInVolume(e){let r=qV.parse(e.query);if(!r.url){U.window.showErrorMessage(`Failed to handle the URI '${e}' expected a 'url' query parameter.`,{modal:!0});return}let n;Array.isArray(r.url)?n=r.url[0]:n=r.url;let o=await We(this.context,this.output.log);if(!!await Dr(this.context,o,await this.telemetry)){if(!await vw(o.cliHost,n,this.output.log)){await U.window.showErrorMessage(`Cannot access the repository '${n}'.`,{modal:!0});return}await U.commands.executeCommand(Tm,r.url)}}};async function uue(t){var P;Eq();let e=new Date;bq(t);let r=await un(t.extensionPath),n=await ru(U.env.appRoot);_q(t,n);let o=wq(t,r,n),i=`Remote-Containers ${r.version} in VS Code ${U.version} (${n.commit||"out-of-source"}).`,s=new Mm(t.logPath,e,i);t.subscriptions.push(U.commands.registerCommand(ho,()=>s.show()));let{channel:a,postCreate:c}=yq(s.log,e);t.subscriptions.push(U.commands.registerCommand(dE,()=>a.show())),t.subscriptions.push(U.workspace.registerRemoteAuthorityResolver("dev-container",{resolve:Am(s,c,ur.results,async(S,k,T)=>zH(t,await o,S,ur.onRemoveOnShutdownChanged,k,T)),async getCanonicalURI(S){var T;let k=Cn(S.authority);if(k&&Yt(k)){let{hostPath:A,settings:F}=k;return Wt(A)?tc(A,s.log):F&&"host"in F&&((T=F.host)==null?void 0:T.startsWith("ssh://"))?iu(F.host,A):U.Uri.file(A)}return S}}),U.workspace.registerRemoteAuthorityResolver("attached-container",{resolve:Am(s,c,ur.results,async(S,k,T)=>sV(t,await o,S,k,T))}),U.workspace.registerRemoteAuthorityResolver("k8s-container",{resolve:Am(s,c,ur.results,async(S,k,T)=>OV(t,await o,S,k,T))}),U.window.registerUriHandler(new $V(t,s,o)));let l=async(S,k,T)=>{let A=await We(t,s.log);if(!await Dr(t,A,await o))return;let F;if(Zt.isFolderItem(S)?(F=S.folder,T=mue()):F=S,F.scheme==="vscode-remote")return U.commands.executeCommand("vscode.openFolder",F,T);{let j=Ue(A.cliHost.path,_e(F,A.cliHost.platform));return uv(t,j,A,await o,k,T)}};t.subscriptions.push(U.commands.registerCommand("remote-containers.openFolder",async(S,k)=>S?l(S,!1,k):HV(t,!0,await o,!1,s.log))),t.subscriptions.push(U.commands.registerCommand("remote-containers.openWorkspace",async(S,k)=>S?l(S,!1,k):HV(t,!1,await o,!1,s.log))),t.subscriptions.push(U.commands.registerCommand(rq,async S=>Zd(t,await o,s.log,S))),t.subscriptions.push(U.commands.registerCommand(Tm,async S=>Zd(t,await o,s.log,S,wn))),t.subscriptions.push(U.commands.registerCommand(nq,async S=>{if(S.url){let k=S.url;return(S==null?void 0:S.ref)&&(k=`${S.url}/tree/${S.ref}`),Zd(t,await o,s.log,k,wn)}})),t.subscriptions.push(U.commands.registerCommand(oq,async S=>vue(t,await o,s.log,S,wn))),t.subscriptions.push(U.commands.registerCommand("remote-containers.inspectVolume",async(S,k,T)=>WV(t,S,k,T,await o,s.log))),t.subscriptions.push(U.commands.registerCommand("remote-containers.inspectVolumeFromViewlet",async S=>yue(t,S,await o,s.log))),t.subscriptions.push(U.commands.registerCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",async S=>Zd(t,await o,s.log,void 0,S))),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInContainer",()=>u(!1))),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildAndReopenInContainer",()=>u(!0))),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildNoCacheAndReopenInContainer",()=>u("rebuildNoCache")));let u=async S=>{if(!await U.workspace.requestWorkspaceTrust({message:id}))return;let T=await We(t,s.log);if(!await Dr(t,T,await o))return;let A=U.workspace.workspaceFile;if(A&&A.scheme==="untitled"){await Vg();return}let F=U.workspace.workspaceFolders;if(!A&&F&&F.length){let J=F.length>1?await U.window.showWorkspaceFolderPick({placeHolder:"Pick a folder to reopen in a container."}):F[0];J&&(A=J.uri)}let j=await hE(A);if(j){await ef(t,j.repositoryPath,j.volumeName,j.folder,T);return}if(A){let J;if(T.cliHost.type==="wsl"&&A.scheme==="file"){let ae=_e(A,process.platform),te=_i(ae)||gE()||await Gp(T.output)||(()=>{throw new Error("No default WSL distro found.")})();J=await Fo(te,ae,T.output)}else J=_e(A,T.cliHost.platform);let Y=Ue(T.cliHost.path,J);await uv(t,Y,T,await o,S,{forceReuseWindow:!0})}};t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenLocally",async()=>{let S=U.workspace.workspaceFolders,k=U.workspace.workspaceFile||S&&S.length&&S[0].uri;if(k&&k.scheme==="vscode-remote"){let T=Cn(k.authority);if(T&&Yt(T)){let A=U.Uri.file(T.hostPath),F={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",A,F)}else U.window.showInformationMessage("'Reopen Locally' not possible in current context.")}})),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInWSL",async()=>{let S=U.workspace.workspaceFolders,k=U.workspace.workspaceFile||S&&S.length&&S[0].uri;if(k&&k.scheme==="vscode-remote"){let T=Cn(k.authority);if(T&&Yt(T)&&Wt(T.hostPath)){let A=U.Uri.parse((await tc(T.hostPath,s.log)).toString()),F={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",A,F)}else U.window.showInformationMessage("'Reopen in WSL' not possible in current context.")}})),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInSSH",async()=>{let S=U.workspace.workspaceFolders,k=U.workspace.workspaceFile||S&&S.length&&S[0].uri;if(k&&k.scheme==="vscode-remote"){let T=Cn(k.authority),A=T==null?void 0:T.settings;if(T&&Yt(T)&&A&&"host"in A&&A.host&&A.host.startsWith("ssh://")){let F=U.Uri.parse(iu(A.host,T.hostPath).toString()),j={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",F,j)}else U.window.showInformationMessage("'Reopen in SSH' not possible in current context.")}}));let d,f=async S=>{var F;if(!await Bi(t))return;let k,T=typeof S=="string"?S:(F=S==null?void 0:S.containerDesc)==null?void 0:F.Id;if(T){let j=await We(t,s.log);if(!await Dr(t,j,await o))return;k=await Pr(j,T)}else{let j=!1;d||(d=so(t.extensionPath,async Y=>(j=!0,zo(Y)),s.log));let J=await We(t,s.log,void 0,void 0,d);if(k=await Pue(J,Dr(t,J,await o),()=>j),!k)return}let A=await We(t,s.log);sv(A,k,t)};t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToRunningContainer",f)),t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToRunningContainerFromViewlet",f)),t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToK8sContainerFromViewlet",async S=>RV(t,await We(t,s.log),S)));let p=async S=>{var A;let k=await We(t,s.log);if(!await Dr(t,k,await o))return;let T=(A=S==null?void 0:S.pullRequestModel)==null?void 0:A.html_url;Zd(t,await o,s.log,T,wn)};t.subscriptions.push(U.commands.registerCommand("remote-containers.checkoutPRInVolume",p)),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildContainer",async()=>{let S=await aa();if(S){let k=await We(t,s.log);await ef(t,S.repositoryPath,S.volumeName,S.folder,k,!0);return}return await Promise.all(ur.onRemoveOnShutdownChangedEmitter.fire(!0)),U.commands.executeCommand("workbench.action.reloadWindow")})),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildContainerNoCache",async()=>{let S=await aa();if(S){let k=await We(t,s.log);await ef(t,S.repositoryPath,S.volumeName,S.folder,k,"rebuildNoCache");return}return await Promise.all(ur.onRemoveOnShutdownChangedEmitter.fire("rebuildNoCache")),U.commands.executeCommand("workbench.action.reloadWindow")}));let h=U.env.remoteName&&U.env.remoteName!=="test"?"linux":process.platform,m=((P=(U.workspace.workspaceFolders||[])[0])==null?void 0:P.uri)||be.file(process.cwd()),g=Qi(h,m),v={fileHost:g,findDevContainerFiles:()=>CE(g),telemetry:o,output:s.log,existingFilesLearnMoreLink:ed,predefinedDefinitionsLearnMoreLink:td,openConfigurationCommandId:Zu},y=await NH(t,v);t.subscriptions.push(U.commands.registerCommand("remote-containers.createDevContainerFile",async()=>{if(!U.workspace.workspaceFolders){await U.window.showInformationMessage("Open a folder to create the configuration files in first.",{modal:!0},"Open Folder")&&await U.commands.executeCommand(process.platform==="darwin"?"workbench.action.files.openFileFolder":"workbench.action.files.openFolder");return}await q_(t,g,y,await o,s.log)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openDevContainerFile",async(S,k)=>{let T,A=await We(t,s.log),F;if(typeof S=="string"?T=[be.file(S)]:(F=await CE(A.cliHost),T=(await Promise.all(F.map(j=>j.scheme==="file"||j.scheme==="vscode-remote"?j:A.cliHost.toCommonURI(_e(j,A.cliHost.platform))))).filter(j=>!!j)),T.length){let j;T.length===1?j={uri:T[0]}:j=await U.window.showQuickPick(T.map(Y=>({label:Y.scheme==="file"?Y.fsPath:Y.toString(),uri:Y})),{placeHolder:"Select container configuration file to open"});let J=await aa();if(J){let Y=gq(J.folder);for(let ae of Y){try{await U.workspace.openTextDocument(U.Uri.parse(ae.toString()))}catch{continue}await U.commands.executeCommand("vscode.open",U.Uri.parse(ae.toString()),k);return}return}if(j){let Y=j.uri,ae=zL(Y);if(ae){let te=`https://github.com/microsoft/vscode-dev-containers/tree/main/repository-containers/${process.platform==="win32"?ae.replace(/\\/g,"/"):ae}`;return U.env.openExternal(U.Uri.parse(te))}else{if(Y.scheme==="file"&&await ht(Y.fsPath))return await U.commands.executeCommand("vscode.open",U.Uri.parse(Y.toString()),k);if(Y.scheme==="file"&&ur.results.size)return await pn(Ln,Y,[],$o),await U.commands.executeCommand("vscode.open",U.Uri.parse(Y.toString()),k);if(Y.scheme==="vscode-remote"&&ur.results.size)return await U.commands.executeCommand("vscode.open",U.Uri.parse(Y.toString()),k);if(S===void 0)return await q_(t,g,y,await o,s.log)}}}else if(S===void 0&&!(F==null?void 0:F.length))return await q_(t,g,y,await o,s.log)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openAttachConfigByNameFile",async()=>{let{dockerContainerId:S,dockerParams:k}=[...ur.results.values()][0];if(!S||!k)return U.window.showInformationMessage("Named configurations are only available for Docker containers.",{modal:!0});let T=await Pr(k,S),A=tv(t.globalStoragePath,T.Name),F=U.Uri.file(A);return await ht(A)?U.commands.executeCommand("vscode.open",F):(await pn(Ln,F,[],$o),U.commands.executeCommand("vscode.open",F))})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openAttachDevContainerFile",async()=>{let S=[...(await eV(t.globalStoragePath)).map(T=>V({label:T.name},T)).sort((T,A)=>T.label.localeCompare(A.label)),...(await rV(t.globalStoragePath)).map(T=>V({label:T.image},T)).sort((T,A)=>T.label.localeCompare(A.label))],k=await U.window.showQuickPick(S.length?S:[{label:"No configuration found."}],{placeHolder:"Choose a configuration file"});if(k&&"uri"in k)return U.commands.executeCommand("vscode.open",U.Uri.parse(k.uri.toString()))})),t.subscriptions.push(U.commands.registerCommand("remote-containers.settings",async()=>U.commands.executeCommand("workbench.action.openSettings",`@ext:${BV()}`))),t.subscriptions.push(U.commands.registerCommand("remote-containers.getHelp",async()=>U.env.openExternal(U.Uri.parse("https://aka.ms/vscode-remote/containers")))),t.subscriptions.push(U.commands.registerCommand("remote-containers.getStarted",async()=>U.env.openExternal(U.Uri.parse("https://aka.ms/vscode-remote/containers/getting-started")))),t.subscriptions.push(U.commands.registerCommand("remote-containers.reportIssue",async()=>U.commands.executeCommand("vscode.openIssueReporter",BV()))),t.subscriptions.push(U.commands.registerCommand("remote-containers.provideFeedback",async()=>U.env.openExternal(U.Uri.parse("https://aka.ms/vscode-remote/containers/provide-feedback")))),t.subscriptions.push(U.languages.registerDocumentLinkProvider([{pattern:"**/devcontainer.json",language:"jsonc"},{pattern:"**/.devcontainer.json",language:"jsonc"}],new R_(g))),t.subscriptions.push(U.commands.registerCommand("remote-containers.trySample",async()=>{Oue(t,s.log)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openLogFile",()=>Nue(t))),t.subscriptions.push(U.commands.registerCommand("remote-containers.openLastLogFile",()=>Lue(t,"remoteContainers",s.logFilePath))),t.subscriptions.push(U.commands.registerCommand("remote-containers.showReopenInContainerNotificationReset",()=>Tue(t))),t.subscriptions.push(U.commands.registerCommand("remote-containers.showRecoveryContainerNotificationReset",()=>fue(t))),t.subscriptions.push(U.commands.registerCommand("remote-containers.installDocker",()=>ov(s.log))),SV(t,ur.results,await o,s.log),await NV(t,n),t.subscriptions.push(U.commands.registerCommand("remote-containers.installUserCLI",()=>LV(t,n))),(async()=>{await mq(t)||await YV(t,g,await o,s.log)})().catch(console.error),pue(t);let b=U.env.remoteName,C=!b||["dev-container","attached-container","wsl","ssh-remote","exec","k8s-container"].indexOf(b)!==-1?[{pattern:"**/.devcontainer.json"},{pattern:"**/devcontainer.json"}]:[];t.subscriptions.push(U.commands.registerCommand("remote-containers.addExtensionToConfig",y.addExtensionToConfiguration),U.languages.registerCompletionItemProvider([...C,{pattern:Ft.join(rv(t.globalStoragePath),"*.json")},{pattern:Ft.join(ev(t.globalStoragePath),"*.json")}],y.createCompletionItemProvider()),U.commands.registerCommand("remote-containers.configureContainerFeatures",async()=>{var T;let S=await We(t,s.log),k=await p_(v,{readDockerComposeConfig:async(A,F)=>{let j=await FL(S.cliHost.cwd,A,S.output);return ML(S,j,F)}});if(k){let A;if(!k.manifest&&k.imageName)try{A=await gc(S,k.imageName)}catch(F){if(((T=F==null?void 0:F.stdout)==null?void 0:T.toString().replace(/\s/g,""))==="[]")try{await Ke(S,"pull",k.imageName),A=await gc(S,k.imageName)}catch{}}await m_(v,k,(A==null?void 0:A.Config.Labels)||{})}}),U.commands.registerCommand("remote-containers.labelPortAndUpdateConfig",y.addPortLabelToConfiguration)),await aa()&&U.commands.executeCommand("setContext","isRecoveryContainer",!0),t.subscriptions.push(wH())}var jV="showRecoveryContainerNotification",UV="showReopenInContainerNotificationReset",due=5e3;function fue(t){return t.globalState.update(UV,Date.now())}async function pue(t){setTimeout(async()=>{let e=t.globalState.get(UV);if($_(t.globalState.get(jV),e))return;if(await aa()){let n="This is a recovery container that allows you to edit your Dockerfile. Use 'Reopen in Container' to retry.",o="Reopen in Container",i="Don't Show Again",s=await U.window.showInformationMessage(n,o,i);s===o?U.commands.executeCommand("remote-containers.reopenInContainer"):s===i&&await t.globalState.update(jV,Date.now())}},due)}async function hue(){await Promise.all([...ur.results.values()].map(t=>Promise.all(t.params.shutdowns.map(e=>{try{e()}catch(r){console.error(r)}}))))}function BV(){let{name:t,publisher:e}=FV();return`${e}.${t}`}async function HV(t,e,r,n,o){var d;let i=await We(t,o);if(!await Dr(t,i,r))return;let s,a=U.workspace.workspaceFolders;if(a&&a[0]){let f=a[0].uri;if(f.scheme==="vscode-remote"){let p=Cn(f.authority);if(p&&Yt(p)){let h=Ue(i.cliHost.path,p.hostPath);s=U.Uri.file(h.rootFolderPath)}else/^(wsl|ssh-remote)\+/.test(f.authority)&&(s=f)}else f.scheme==="file"&&(s=f)}s||(((d=U.env.remoteName)==null?void 0:d.match(/^(wsl|ssh-remote)$/))?s=U.Uri.from({scheme:"vscode-remote",authority:U.env.remoteAuthority,path:await i.cliHost.homedir()}):s=U.Uri.file(MV.homedir()));let c=e?{defaultUri:s,canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,openLabel:"Open"}:{defaultUri:s,canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{"Code Workspace":["code-workspace"]},openLabel:"Open"},l=await U.window.showOpenDialog(c),u=l&&l[0];if(u){let f=e?u:u.with({path:Ft.posix.dirname(u.path)}),p=await We(t,i.output,f,mE()==="always"),h=_e(u,p.cliHost.platform),m=Ue(p.cliHost.path,h);await uv(t,m,p,r,n)}}function mue(){return U.workspace.getConfiguration("window").get("openFoldersInNewWindow",void 0)==="on"?{forceNewWindow:!0}:{forceReuseWindow:!0}}async function uv(t,e,r,n,o,i){var v;let{cliHost:s}=r;if(Wt(e.rootFolderPath)){if(r=await We(t,r.output,e.rootFolderPath),s=r.cliHost,!await Dr(t,r,n))return;e=Ue(s.path,e.isWorkspaceFile?s.path.join(s.cwd,Ft.basename(e.workspaceOrFolderPath)):s.cwd)}let a=await Ka(s,e);if(a){let y="Continue";if(await U.window.showInformationMessage(`The workspace could fail to open in a container: ${a}`,{modal:!0},y)!==y)return}let c=await fo(s,e,vo(),!0,r.output),l={cliHost:s,appRoot:U.env.appRoot,extensionPath:t.extensionPath,package:await un(t.extensionPath),output:r.output},u=c&&await Uc(l,e.rootFolderPath,c);if(!u||!Di(u.configuration)){let y=await Kd({fileHost:s,telemetry:n,output:r.output,existingFilesLearnMoreLink:ed,predefinedDefinitionsLearnMoreLink:td,openConfigurationCommandId:Zu},e);if(!y||(u=await Uc(l,e.rootFolderPath,be.file(y).with({scheme:wt.scheme})),!u))return}let d=u.configuration;if(!await gue(r,d))return;let f=u.workspace.workspaceFolder;if(mt(d)){let y=hr(s,d);if(!d.initializeCommand&&!await zt(s).readDocument(y))return tf(`"${y.fsPath}" does not exist.`,s,d.configFilePath);if(d.workspaceFolder&&!Ft.posix.isAbsolute(d.workspaceFolder))return tf("Workspace folder in devcontainer.json must be an absolute path.",s,d.configFilePath)}else if(!("image"in d))if("dockerComposeFile"in d){if(!await vV(r)||!await kue(e,r,d))return}else{let y=d.configFilePath;return tf(`Configuration "${s.path.relative(e.rootFolderPath,_e(y,s.platform))}" not valid.`,s,y)}e.isWorkspaceFile&&(f=Ft.posix.join(f,s.path.basename(e.workspaceOrFolderPath)));let p=Li(r.env),h=s.type==="wsl"?(await s.toCommonURI(e.workspaceOrFolderPath)).fsPath:e.workspaceOrFolderPath,m=(s.type==="local"||s.type==="wsl")&&p&&"host"in p&&((v=p.host)==null?void 0:v.startsWith("ssh://")),g=U.Uri.parse($u(h,f,p,m));await fv({uri:g,type:e.isWorkspaceFile?"workspace":"folder",label:`${g1(s.platform,e.workspaceOrFolderPath,await s.homedir())}${xc(p)} [Dev Container]`}),await wE(t,o?g.authority:!1),await nd(t,o==="rebuildNoCache"?g.authority:!1),await U.commands.executeCommand("vscode.openFolder",g,i)}async function gue(t,e){let r=e.hostRequirements;if(r&&(r.cpus||r.memory)){let n=await Ke(t,"info","--format","{{json .}}"),o=JSON.parse(n.stdout.toString()),i=o.NCPU&&r.cpus&&r.cpus>o.NCPU,s=o.MemTotal&&r.memory&&L_(r.memory)>o.MemTotal;if(i||s){let a=[];o.NCPU&&a.push(`CPUs ${o.NCPU}`),o.MemTotal&&a.push(`RAM ${F_(o.MemTotal)}`);let c=[];r.cpus&&c.push(`CPUs ${r.cpus}`),r.memory&&c.push(`RAM ${F_(L_(r.memory))}`),r.storage&&c.push(`disk ${F_(L_(r.storage))}`);let l=`Docker daemon: ${a.join(", ")}
devcontainer.json: ${c.join(", ")}`;if(!await U.window.showInformationMessage("Not all host requirements in devcontainer.json are met by the Docker daemon.",{modal:!0,detail:l},"Continue"))return!1}}return!0}function L_(t){let e=/^(\d+)([tgmk]b)?$/.exec(t);if(e){let[,r,n]=e,o=parseInt(r,10),i=n&&{t:2**40,g:2**30,m:2**20,k:2**10}[n[0]]||1;return o*i}return 0}function F_(t){let e=Math.min(Math.floor(Math.log2(Math.max(Math.abs(t),1))/10),4),r=t/Math.pow(2,10*e),n=Math.max(Math.pow(10,2-Math.floor(Math.log10(Math.max(Math.abs(r),1)))),1),o=Math.round(r*n)/n,i=[" bytes","kb","mb","gb","tb"][e];return`${o}${i}`}async function Zd(t,e,r,n,o){if(!await sd(t))return;let i=await We(t,r),s=null;if(!!await Dr(t,i,e)){if(typeof n=="string")s=n;else{let a=await U.commands.executeCommand("git-base.api.getRemoteSources",{providerLabel:c=>`Clone a repository from ${c.name} in a Container Volume`,urlLabel:"Clone git repository from URL",branch:!0});if(a){s=(typeof a=="string"?a:a.url).trim(),s.split("/").length===2&&s.indexOf(":")===-1&&(s=`https://github.com/${s}`);let c=uo(s);if(!await vw(i.cliHost,c.repositoryUrl,i.output)){await U.window.showInformationMessage(`Cannot access the repository '${c.repositoryUrl}'.`,{modal:!0});return}typeof a!="string"&&a.branch&&(s=`${s}/tree/${a.branch}`)}}s&&await VV(t,i,s,o)}}async function VV(t,e,r,n){if(n||(n=await Cue(e)),n){let o=M_(r);n!==wn&&(o=await Eue(r)),o&&await ef(t,r,n,o,e)}}async function vue(t,e,r,n,o){if(!await sd(t))return;let i=await We(t,r),s=/^(?:(?:https:\/\/)?github.com\/)?([^/]+)\/([^/]+?)(?:\/(?:pull\/([0-9]+)))?(?:\/|$)/i;if(!await Dr(t,i,e))return;let a={placeHolder:"e.g. https://github.com/microsoft/vscode/pull/123",prompt:"Enter a GitHub pull request url",validateInput:u=>s.test(u)?void 0:"Invalid pull request url"},c;if(n?c=n:c=await U.window.showInputBox(a),!c)return;let l=uo(c);if(l.repository==="unknown"||!l.pullRequestId){await U.window.showInformationMessage(`Invalid pull request URL '${c}'.`,{modal:!0});return}await VV(t,i,c,o)}async function WV(t,e,r,n,o,i){let s=await We(t,i);!await Dr(t,s,o)||(e||(e=await wue(s)),e&&(r&&n?await xue(e,r,n,s):await Sue(e,s)))}async function yue(t,e,r,n){let o=await We(t,n);!await Dr(t,o,await r)||e&&e.volumeName&&await WV(t,e.volumeName,void 0,void 0,r,n)}var dv=class{get detail(){return""}},GV=class extends dv{get label(){return"$(plus) Create a new volume..."}get description(){return""}get volumeName(){return""}get detail(){return"Use this volume to store several cloned repositories."}get alwaysShow(){return!0}},zV=class extends dv{constructor(e){super();this.volume=e}get label(){return`$(folder) ${this.volume.Name}`}get description(){return`created at ${new Date(this.volume.CreatedAt).toDateString()}`}get volumeName(){return this.volume.Name}},KV=class extends dv{constructor(e){super();this.volume=e}get label(){return`$(folder) ${this.volume.Name}`}get description(){return`created at ${new Date(this.volume.CreatedAt).toDateString()}`}get volumeName(){return this.volume.Name}};async function wue(t){let e=await ao(t),n=(await mu(t,e)).map(a=>new KV(a)),o="Select the volume to inspect with Visual Studio Code",i=U.window.createQuickPick();i.items=n,i.placeholder=o,i.show();let s=await new Promise(a=>{i.onDidAccept(()=>a(i.activeItems[0])),i.onDidHide(()=>a(void 0))});return i.hide(),s?s.volume.Name:null}async function Cue(t){let e=await ao(t,["vsch.local.repository.unique=false"]),n=(await mu(t,e)).map(u=>new zV(u)),o=new GV,i=[o,...n],s="Select the volume for the cloned repository",a=U.window.createQuickPick();a.items=i,a.placeholder=s,a.ignoreFocusOut=!0,a.show();let c=await new Promise(u=>{a.onDidAccept(()=>u(a.activeItems[0])),a.onDidHide(()=>u(void 0))});if(a.hide(),!c)return null;let l=null;return c===o?l=await bue(t):l=c.volumeName,l}async function bue(t){let e="",r="vsc-remote-containers",n=await ao(t);n.find(s=>s===r)||(e=r);let o={prompt:"Enter the volume name.",value:e,ignoreFocusOut:!0,validateInput:s=>/^[a-zA-Z0-9][a-zA-Z0-9_.-]+$/i.test(s)?null:s.length<2?"Volume names should be at least two characters and the first character must be alphanumeric.":"Only [a-zA-Z0-9_.-] are allowed and the first character must be alphanumeric."},i=await U.window.showInputBox(o);return i?n.find(s=>s===i)?(await U.window.showErrorMessage("Volume already exists",{modal:!0}),null):i:null}async function Eue(t){let e={prompt:"Enter the target folder name.",value:M_(t),ignoreFocusOut:!0},r=await U.window.showInputBox(e);return r||null}function M_(t){return vn(t).repositoryName}async function _ue(){return(await U.authentication.getSession("github",["repo"],{createIfNone:!0})).accessToken}async function ef(t,e,r,n,o,i=!1){let s=Li(o.env),a=Sc(e),c;try{c=await a.parseUrl(void 0)}catch(u){if(u instanceof Xh){U.window.showErrorMessage(u.description);return}let d=await _ue();try{c=await a.parseUrl(d)}catch{U.window.showErrorMessage(`Cannot access '${e}'.`,{modal:!0});return}}let l=U.Uri.parse(ta(e,r,n,!1,s,c));r===wn&&(r="a unique volume"),await fv({uri:l,type:"folder",label:`${n} in ${r} [Dev Container]`}),await wE(t,i?l.authority:!1),await nd(t,i==="rebuildNoCache"?l.authority:!1),await U.commands.executeCommand("vscode.openFolder",l)}async function Sue(t,e){let r=Li(e.env),n=U.Uri.parse(ta(void 0,t,void 0,!0,r,void 0));await fv({uri:n,type:"folder",label:`Volume ${t} [Dev Container]`}),await U.commands.executeCommand("vscode.openFolder",n)}async function xue(t,e,r,n){let o=Li(n.env),i=U.Uri.parse(ta(e,t,r,!0,o,void 0));await fv({uri:i,type:"folder",label:`${r} in ${t} [Inspect Dev Container]`}),await U.commands.executeCommand("vscode.openFolder",i)}async function fv(t){return U.commands.executeCommand("_workbench.addToRecentlyOpened",t)}async function sv(t,e,r,n){if(!await Bi(r))return;let o,i=t.cliHost;if(i.type==="wsl"){let l=await i.toCommonURI(i.cwd);l&&l.scheme==="file"&&(o=l.fsPath)}let s=f1(e.Name,Li(t.env),o),a=await XH(r.globalStoragePath,e),c=r.extensionMode===U.ExtensionMode.Development;if(a&&a.workspaceFolder&&!n){let l=U.Uri.parse(`vscode-remote://${s}${a.workspaceFolder}`),u={};c?u.forceReuseWindow=!0:u.forceNewWindow=!0,await U.commands.executeCommand("vscode.openFolder",l,u)}else{let l={remoteAuthority:s};c&&!n&&(l.reuseWindow=!0),await U.commands.executeCommand("vscode.newWindow",l)}}async function Pue(t,e,r){let n=(async()=>{if(!await e)throw new Error("cancel");let o=await Uo(t),i=await Ri(t,o),s=[];if(i.forEach(a=>{a.State.Status==="running"&&s.push({label:a.Name,description:`${a.Config.Image} ${a.Id}`,containerInfo:a})}),s.length===0)throw U.window.showErrorMessage("There are no running containers to attach to.",{modal:!0}),new Error("cancel");return s})();try{let o={placeHolder:"Select the container to attach VS Code"},i=await U.window.showQuickPick(n,o);if(!i&&r()){if(!await e)throw new Error("cancel");i=await U.window.showQuickPick(n,o)}return i?i.containerInfo:void 0}catch(o){if(o&&o.message==="cancel")return;throw o}}async function kue(t,e,r){if(!r.workspaceFolder)return tf("Workspace folder not specified in devcontainer.json.",e.cliHost,r.configFilePath),!1;if(!Ft.posix.isAbsolute(r.workspaceFolder))return tf("Workspace folder in devcontainer.json must be an absolute path.",e.cliHost,r.configFilePath),!1;let n=await qt(e.cliHost,r,e.cliHost.env,e.cliHost.cwd),o=await Ou(e,t,n),i=await qL(e,o,r.service),s=i&&await Pr(e,i);return!(s&&!await Iue(e.cliHost,n,r,s))}async function Iue(t,e,r,n){var i,s,a,c;let o=[];for(let l=0;l<e.length;l++)await t.isFile(e[l])||o.push(e[l]);return o.length>0?(U.window.showErrorMessage(`The following referenced docker compose files do not exist: ${o.join(", ")}`,{modal:!0}),!1):((s=(i=r.customizations)==null?void 0:i.vscode)==null?void 0:s.devPort)&&!n.Ports.find(l=>{var u,d;return((d=(u=r.customizations)==null?void 0:u.vscode)==null?void 0:d.devPort)===l.PrivatePort})?(U.window.showErrorMessage(`The port '${(c=(a=r.customizations)==null?void 0:a.vscode)==null?void 0:c.devPort}' is not open on the service '${r.service}'`,{modal:!0}),!1):!0}async function tf(t,e,r){if(await U.window.showErrorMessage(t,{modal:!0},"Open devcontainer.json")){let o=_e(r,e.platform),i=await e.toCommonURI(o);i&&U.window.showTextDocument(U.Uri.parse(i.toString()))}}async function q_(t,e,r,n,o){await r.createConfiguration()&&await YV(t,e,n,o)}async function YV(t,e,r,n){if([void 0,"wsl","ssh-remote"].indexOf(U.env.remoteName)===-1)return;let o=U.workspace.workspaceFile,i=U.workspace.workspaceFolders,s=o||i&&i.length&&i[0].uri||void 0;if(s&&s.scheme!=="vscode-vfs"){let a=_e(s,e.platform),c=Ue(e.path,a),l=await ab(e,c,vo());l&&await Aue(t,l,c,e,r,n)}}var pv="showReopenInContainerNotification",JV="showReopenInContainerNotificationReset";function Tue(t){return t.globalState.update(JV,Date.now())}async function Aue(t,e,r,n,o,i){let s=t.globalState.get(JV);if($_(t.globalState.get(pv),s)||$_(t.workspaceState.get(pv),s))return;let a=GL(n,r,e.uri),c,l="";n.platform!=="linux"&&U.env.remoteName!=="wsl"&&!(n.platform==="win32"&&Wt(r.rootFolderPath));let u;a?r.isWorkspaceFile?u="Workspace contains a Dev Container configuration file.":u="Folder contains a Dev Container configuration file.":u="There is a [Dev Container configuration](command:remote-containers.openDevContainerFile) available for this repository.";let d="Reopen in Container",f="Clone in Volume",p="Don't Show Again...",h=r.isWorkspaceFile?`${u} Reopen workspace to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).${l}`:`${u} Reopen folder to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).${l}`,m=c?[d,f,p]:[d,p];Due(o,e.location);let g=await U.window.showInformationMessage(h,...m);if(Rue(o,g===d?"reopen":g===f?"openRepository":g===p?"dontShowAgain":"cancel",e.location),g===d){if(!await U.workspace.requestWorkspaceTrust({message:id}))return;let b=await We(t,i);if(!await Dr(t,b,o))return;if(b.cliHost.type==="wsl"&&n.platform==="win32"){let{cwd:C}=await zw(r.workspaceOrFolderPath,jn(),i);r=Ue(b.cliHost.path,C)}try{await uv(t,r,b,o,!1,{forceReuseWindow:!0})}catch(C){await Mi(C,"ui",o)}}else if(g===f){let y=await We(t,i),b=await lT(y.cliHost,r,y.output),C="OK",_="Cancel";(!b||C===await U.window.showInformationMessage("Local changes not pushed to the Git remote will not be available in the Docker volume.",C,_))&&await U.window.withProgress({location:U.ProgressLocation.Notification,title:"Clone in Volume"},async(P,S)=>{P.report({message:"Follow the prompts at the top of the window."}),await U.commands.executeCommand(Tm,c)})}else if(g===p){let y=r.isWorkspaceFile?"Any Workspace":"Any Folder",b=r.isWorkspaceFile?"Current Workspace":"Current Folder",C=r.isWorkspaceFile?"Don't show again for the current workspace or for any workspace?":"Don't show again for the current folder or for any folder?",_=await U.window.showInformationMessage(C,y,b);_===y?await t.globalState.update(pv,Date.now()):_===b&&await t.workspaceState.update(pv,Date.now())}}function Due(t,e){t.sendTelemetryEvent("reopenNotificationOpen",{location:e})}function Rue(t,e,r){t.sendTelemetryEvent("reopenNotificationResult",{result:e,location:r})}function $_(t,e){return t===!1?t=1:t===void 0&&(t=-1),e===void 0&&(e=0),e<t}async function Oue(t,e){let r=[{label:"C++",detail:"https://github.com/Microsoft/vscode-remote-try-cpp"},{label:"Go",detail:"https://github.com/Microsoft/vscode-remote-try-go"},{label:"Java",detail:"https://github.com/Microsoft/vscode-remote-try-java"},{label:".NET Core",detail:"https://github.com/Microsoft/vscode-remote-try-dotnetcore"},{label:"Node",detail:"https://github.com/Microsoft/vscode-remote-try-node"},{label:"PHP",detail:"https://github.com/Microsoft/vscode-remote-try-php"},{label:"Python",detail:"https://github.com/Microsoft/vscode-remote-try-python"},{label:"Rust",detail:"https://github.com/Microsoft/vscode-remote-try-rust"}],n={placeHolder:"Select a sample repository to clone in a container volume"},o=await U.window.showQuickPick(r,n);if(!o)return;let i=await We(t,e);o.detail&&await ef(t,o.detail,wn,M_(o.detail),i)}async function Nue(t){let e=await Promise.all((await QV(t)).map(async n=>{let o=await(0,N_.promisify)(lv.stat)(n.path),i=n.time;return{label:n.prefix,description:`${ll(i.getFullYear())}-${ll(i.getMonth())}-${ll(i.getDay())} ${ll(i.getHours())}:${ll(i.getMinutes())}:${ll(i.getSeconds())} - ${o.size} bytes`,path:n.path}}));e.length||e.push({label:"No log files found."});let r=await U.window.showQuickPick(e,{placeHolder:"Choose a log file"});r&&r.path&&await U.window.showTextDocument(U.Uri.file(r.path))}function ll(t,e=2){let r=t.toString();for(;r.length<e;)r="0"+r;return r}async function Lue(t,e,r){let n=(await QV(t)).find(o=>o.name.startsWith(e)&&o.path!==r);n?await U.window.showTextDocument(U.Uri.file(n.path)):await U.window.showInformationMessage("No previous log file found.",{modal:!0})}async function QV(t){let e=[],r=Ft.basename(t.logPath),n=Ft.dirname(Ft.dirname(Ft.dirname(t.logPath)));for(let o of(await j_(n)).sort().reverse()){let i=/(\d\d\d\d)(\d\d)(\d\d)T(\d\d)(\d\d)(\d\d)/.exec(o);if(i){let s=Ft.join(n,o);for(let a of await j_(s)){let c=Ft.join(s,a),l=Ft.join(c,r);for(let u of(await j_(l)).sort()){let d=Ft.join(l,u),f=/(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d)[:\-](\d\d)[:\-](\d\d)\.(\d\d\d)Z/.exec(u),p=f?new Date(`${f[1]}-${f[2]}-${f[3]}T${f[4]}:${f[5]}:${f[6]}.${f[7]}Z`):new Date(`${i[1]}-${i[2]}-${i[3]}T${i[4]}:${i[5]}:${i[6]}Z`);e.push({name:u,path:d,time:p,prefix:f?u.substr(0,f.index-1):u.substr(0,u.length-4)})}}}}return e.sort((o,i)=>o.time>i.time?-1:o.time<i.time?1:o.path.localeCompare(i.path)),e}async function j_(t){try{return await(0,N_.promisify)(lv.readdir)(t)}catch{return[]}}0&&(module.exports={activate,attachToContainer,deactivate});
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
//# sourceMappingURL=extension.js.map
